/*! For license information please see main.e5775365.js.LICENSE.txt */
!function(){var e={6031:function(e){function t(e){return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}t.keys=function(){return[]},t.resolve=t,t.id=6031,e.exports=t},2012:function(e,t,n){"use strict";var r,a,i;n.d(t,{GW:function(){return a},dk:function(){return i},oK:function(){return r}}),function(e){e.Prompt="PROMPT",e.Camera="CAMERA",e.Photos="PHOTOS"}(r||(r={})),function(e){e.Rear="REAR",e.Front="FRONT"}(a||(a={})),function(e){e.Uri="uri",e.Base64="base64",e.DataUrl="dataUrl"}(i||(i={}))},6653:function(e,t,n){"use strict";n.d(t,{Uw:function(){return b},fo:function(){return y},xz:function(){return v}});var r,a=n(7762),i=n(9439),o=n(3433),s=n(4165),u=n(5861),c=n(3144),l=n(5671),d=n(136),f=n(9388),h=n(8664),p=function(e){return e.CapacitorPlatforms=function(e){var t=new Map;t.set("web",{name:"web"});var n=e.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:t};return n.addPlatform=function(e,t){n.platforms.set(e,t)},n.setPlatform=function(e){n.platforms.has(e)&&(n.currentPlatform=n.platforms.get(e))},n}(e)}("undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:{});p.addPlatform,p.setPlatform;!function(e){e.Unimplemented="UNIMPLEMENTED",e.Unavailable="UNAVAILABLE"}(r||(r={}));var v=function(e){(0,d.Z)(n,e);var t=(0,f.Z)(n);function n(e,r,a){var i;return(0,l.Z)(this,n),(i=t.call(this,e)).message=e,i.code=r,i.data=a,i}return(0,c.Z)(n)}((0,h.Z)(Error)),m=function(e){var t,n,a,i,c,l=e.CapacitorCustomPlatform||null,d=e.Capacitor||{},f=d.Plugins=d.Plugins||{},h=e.CapacitorPlatforms,p=(null===(t=null===h||void 0===h?void 0:h.currentPlatform)||void 0===t?void 0:t.getPlatform)||function(){return null!==l?l.name:function(e){var t,n;return(null===e||void 0===e?void 0:e.androidBridge)?"android":(null===(n=null===(t=null===e||void 0===e?void 0:e.webkit)||void 0===t?void 0:t.messageHandlers)||void 0===n?void 0:n.bridge)?"ios":"web"}(e)},m=(null===(n=null===h||void 0===h?void 0:h.currentPlatform)||void 0===n?void 0:n.isNativePlatform)||function(){return"web"!==p()},g=(null===(a=null===h||void 0===h?void 0:h.currentPlatform)||void 0===a?void 0:a.isPluginAvailable)||function(e){var t=b.get(e);return!!(null===t||void 0===t?void 0:t.platforms.has(p()))||!!y(e)},y=(null===(i=null===h||void 0===h?void 0:h.currentPlatform)||void 0===i?void 0:i.getPluginHeader)||function(e){var t;return null===(t=d.PluginHeaders)||void 0===t?void 0:t.find((function(t){return t.name===e}))},b=new Map,k=(null===(c=null===h||void 0===h?void 0:h.currentPlatform)||void 0===c?void 0:c.registerPlugin)||function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=b.get(e);if(n)return console.warn('Capacitor plugin "'.concat(e,'" already registered. Cannot register plugins twice.')),n.proxy;var a,i=p(),c=y(e),h=function(){var e=(0,u.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a||!(i in t)){e.next=11;break}if("function"!==typeof t[i]){e.next=7;break}return e.next=4,t[i]();case 4:e.t0=a=e.sent,e.next=8;break;case 7:e.t0=a=t[i];case 8:a=e.t0,e.next=20;break;case 11:if(null===l||a||!("web"in t)){e.next=20;break}if("function"!==typeof t.web){e.next=18;break}return e.next=15,t.web();case 15:e.t1=a=e.sent,e.next=19;break;case 18:e.t1=a=t.web;case 19:a=e.t1;case 20:return e.abrupt("return",a);case 21:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(t){var n,a=function(){for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];var f=h().then((function(a){var s=function(t,n){var a,o;if(!c){if(t)return null===(o=t[n])||void 0===o?void 0:o.bind(t);throw new v('"'.concat(e,'" plugin is not implemented on ').concat(i),r.Unimplemented)}var s=null===c||void 0===c?void 0:c.methods.find((function(e){return n===e.name}));return s?"promise"===s.rtype?function(t){return d.nativePromise(e,n.toString(),t)}:function(t,r){return d.nativeCallback(e,n.toString(),t,r)}:t?null===(a=t[n])||void 0===a?void 0:a.bind(t):void 0}(a,t);if(s){var u=s.apply(void 0,o);return n=null===u||void 0===u?void 0:u.remove,u}throw new v('"'.concat(e,".").concat(t,'()" is not implemented on ').concat(i),r.Unimplemented)}));return"addListener"===t&&(f.remove=(0,u.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n());case 1:case"end":return e.stop()}}),e)})))),f};return a.toString=function(){return"".concat(t.toString(),"() { [capacitor code] }")},Object.defineProperty(a,"name",{value:t,writable:!1,configurable:!1}),a},g=m("addListener"),k=m("removeListener"),w=function(e,t){var n=g({eventName:e},t),r=function(){var r=(0,u.Z)((0,s.Z)().mark((function r(){var a;return(0,s.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n;case 2:a=r.sent,k({eventName:e,callbackId:a},t);case 4:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}(),a=new Promise((function(e){return n.then((function(){return e({remove:r})}))}));return a.remove=(0,u.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.warn("Using addListener() without 'await' is deprecated."),e.next=3,r();case 3:case"end":return e.stop()}}),e)}))),a},x=new Proxy({},{get:function(e,t){switch(t){case"$$typeof":return;case"toJSON":return function(){return{}};case"addListener":return c?w:g;case"removeListener":return k;default:return m(t)}}});return f[e]=x,b.set(e,{name:e,proxy:x,platforms:new Set([].concat((0,o.Z)(Object.keys(t)),(0,o.Z)(c?[i]:[])))}),x};return d.convertFileSrc||(d.convertFileSrc=function(e){return e}),d.getPlatform=p,d.handleError=function(t){return e.console.error(t)},d.isNativePlatform=m,d.isPluginAvailable=g,d.pluginMethodNoop=function(e,t,n){return Promise.reject("".concat(n,' does not have an implementation of "').concat(t,'".'))},d.registerPlugin=k,d.Exception=v,d.DEBUG=!!d.DEBUG,d.isLoggingEnabled=!!d.isLoggingEnabled,d.platform=d.getPlatform(),d.isNative=d.isNativePlatform(),d},g=function(e){return e.Capacitor=m(e)}("undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:{}),y=g.registerPlugin,b=(g.Plugins,function(){function e(t){(0,l.Z)(this,e),this.listeners={},this.windowListeners={},t&&(console.warn('Capacitor WebPlugin "'.concat(t.name,'" config object was deprecated in v3 and will be removed in v4.')),this.config=t)}return(0,c.Z)(e,[{key:"addListener",value:function(e,t){var n=this;this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t);var r=this.windowListeners[e];r&&!r.registered&&this.addWindowListener(r);var a=function(){var r=(0,u.Z)((0,s.Z)().mark((function r(){return(0,s.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",n.removeListener(e,t));case 1:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}(),i=Promise.resolve({remove:a});return Object.defineProperty(i,"remove",{value:function(){var e=(0,u.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.warn("Using addListener() without 'await' is deprecated."),e.next=3,a();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),i}},{key:"removeAllListeners",value:function(){var e=(0,u.Z)((0,s.Z)().mark((function e(){var t;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t in this.listeners={},this.windowListeners)this.removeWindowListener(this.windowListeners[t]);this.windowListeners={};case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){var n=this.listeners[e];n&&n.forEach((function(e){return e(t)}))}},{key:"hasListeners",value:function(e){return!!this.listeners[e].length}},{key:"registerWindowListener",value:function(e,t){var n=this;this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:function(e){n.notifyListeners(t,e)}}}},{key:"unimplemented",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"not implemented";return new g.Exception(e,r.Unimplemented)}},{key:"unavailable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"not available";return new g.Exception(e,r.Unavailable)}},{key:"removeListener",value:function(){var e=(0,u.Z)((0,s.Z)().mark((function e(t,n){var r,a;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.listeners[t]){e.next=3;break}return e.abrupt("return");case 3:a=r.indexOf(n),this.listeners[t].splice(a,1),this.listeners[t].length||this.removeWindowListener(this.windowListeners[t]);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"addWindowListener",value:function(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}},{key:"removeWindowListener",value:function(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}}]),e}()),k=function(e){return encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape)},w=function(e){return e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},x=function(e){(0,d.Z)(n,e);var t=(0,f.Z)(n);function n(){return(0,l.Z)(this,n),t.apply(this,arguments)}return(0,c.Z)(n,[{key:"getCookies",value:function(){var e=(0,u.Z)((0,s.Z)().mark((function e(){var t,n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.cookie,n={},t.split(";").forEach((function(e){if(!(e.length<=0)){var t=e.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE"),r=(0,i.Z)(t,2),a=r[0],o=r[1];a=w(a).trim(),o=w(o).trim(),n[a]=o}})),e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"setCookie",value:function(){var e=(0,u.Z)((0,s.Z)().mark((function e(t){var n,r,a,i,o;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,n=k(t.key),r=k(t.value),a="; expires=".concat((t.expires||"").replace("expires=","")),i=(t.path||"/").replace("path=",""),o=null!=t.url&&t.url.length>0?"domain=".concat(t.url):"",document.cookie="".concat(n,"=").concat(r||"").concat(a,"; path=").concat(i,"; ").concat(o,";"),e.next=12;break;case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteCookie",value:function(){var e=(0,u.Z)((0,s.Z)().mark((function e(t){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,document.cookie="".concat(t.key,"=; Max-Age=0"),e.next=7;break;case 4:return e.prev=4,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 7:case"end":return e.stop()}}),e,null,[[0,4]])})));return function(t){return e.apply(this,arguments)}}()},{key:"clearCookies",value:function(){var e=(0,u.Z)((0,s.Z)().mark((function e(){var t,n,r,i;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,t=document.cookie.split(";")||[],n=(0,a.Z)(t);try{for(n.s();!(r=n.n()).done;)i=r.value,document.cookie=i.replace(/^ +/,"").replace(/=.*/,"=;expires=".concat((new Date).toUTCString(),";path=/"))}catch(o){n.e(o)}finally{n.f()}e.next=9;break;case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}()},{key:"clearAllCookies",value:function(){var e=(0,u.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.clearCookies();case 3:e.next=8;break;case 5:return e.prev=5,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),n}(b),I=(y("CapacitorCookies",{web:function(){return new x}}),function(){var e=(0,u.Z)((0,s.Z)().mark((function e(t){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=new FileReader;r.onload=function(){var t=r.result;e(t.indexOf(",")>=0?t.split(",")[1]:t)},r.onerror=function(e){return n(e)},r.readAsDataURL(t)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),S=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e?Object.entries(e).reduce((function(e,n){var r,a,o=(0,i.Z)(n,2),s=o[0],u=o[1];return Array.isArray(u)?(a="",u.forEach((function(e){r=t?encodeURIComponent(e):e,a+="".concat(s,"=").concat(r,"&")})),a.slice(0,-1)):(r=t?encodeURIComponent(u):u,a="".concat(s,"=").concat(r)),"".concat(e,"&").concat(a)}),"").substr(1):null},T=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object.assign({method:e.method||"GET",headers:e.headers},t),r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.keys(e);return Object.keys(e).map((function(e){return e.toLocaleLowerCase()})).reduce((function(n,r,a){return n[r]=e[t[a]],n}),{})}(e.headers),a=r["content-type"]||"";if("string"===typeof e.data)n.body=e.data;else if(a.includes("application/x-www-form-urlencoded")){for(var o=new URLSearchParams,s=0,u=Object.entries(e.data||{});s<u.length;s++){var c=(0,i.Z)(u[s],2),l=c[0],d=c[1];o.set(l,d)}n.body=o.toString()}else if(a.includes("multipart/form-data")){var f=new FormData;if(e.data instanceof FormData)e.data.forEach((function(e,t){f.append(t,e)}));else for(var h=0,p=Object.keys(e.data);h<p.length;h++){var v=p[h];f.append(v,e.data[v])}n.body=f;var m=new Headers(n.headers);m.delete("content-type"),n.headers=m}else(a.includes("application/json")||"object"===typeof e.data)&&(n.body=JSON.stringify(e.data));return n},E=function(e){(0,d.Z)(n,e);var t=(0,f.Z)(n);function n(){return(0,l.Z)(this,n),t.apply(this,arguments)}return(0,c.Z)(n,[{key:"request",value:function(){var e=(0,u.Z)((0,s.Z)().mark((function e(t){var n,r,a,i,o,u,c,l,d,f,h;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=T(t,t.webFetchExtra),r=S(t.params,t.shouldEncodeUrlParams),a=r?"".concat(t.url,"?").concat(r):t.url,e.next=5,fetch(a,n);case 5:i=e.sent,o=i.headers.get("content-type")||"",u=i.ok?t:{},c=u.responseType,l=void 0===c?"text":c,o.includes("application/json")&&(l="json"),e.t0=l,e.next="arraybuffer"===e.t0||"blob"===e.t0?12:"json"===e.t0?19:("document"===e.t0||e.t0,23);break;case 12:return e.next=14,i.blob();case 14:return f=e.sent,e.next=17,I(f);case 17:return d=e.sent,e.abrupt("break",26);case 19:return e.next=21,i.json();case 21:return d=e.sent,e.abrupt("break",26);case 23:return e.next=25,i.text();case 25:d=e.sent;case 26:return h={},i.headers.forEach((function(e,t){h[t]=e})),e.abrupt("return",{data:d,headers:h,status:i.status,url:i.url});case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=(0,u.Z)((0,s.Z)().mark((function e(t){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.request(Object.assign(Object.assign({},t),{method:"GET"})));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"post",value:function(){var e=(0,u.Z)((0,s.Z)().mark((function e(t){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.request(Object.assign(Object.assign({},t),{method:"POST"})));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"put",value:function(){var e=(0,u.Z)((0,s.Z)().mark((function e(t){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.request(Object.assign(Object.assign({},t),{method:"PUT"})));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"patch",value:function(){var e=(0,u.Z)((0,s.Z)().mark((function e(t){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.request(Object.assign(Object.assign({},t),{method:"PATCH"})));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=(0,u.Z)((0,s.Z)().mark((function e(t){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.request(Object.assign(Object.assign({},t),{method:"DELETE"})));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(b);y("CapacitorHttp",{web:function(){return new E}})},5883:function(e,t,n){"use strict";n.d(t,{c:function(){return v}});var r,a=n(4942),i=n(7762),o=n(3433),s=n(1811),u=n(1437),c=function(e){return e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()},l=function(e){if(void 0===r){var t=void 0!==e.style.animationName,n=void 0!==e.style.webkitAnimationName;r=!t&&n?"-webkit-":""}return r},d=function(e,t,n){var r=t.startsWith("animation")?l(e):"";e.style.setProperty(r+t,n)},f=function(e,t){var n=t.startsWith("animation")?l(e):"";e.style.removeProperty(n+t)},h=[],p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;if(void 0!==t){var n=Array.isArray(t)?t:[t];return[].concat((0,o.Z)(e),(0,o.Z)(n))}return e},v=function(e){var t,n,r,v,m,g,y,b,k,w,x,I,S,T=[],E=[],N=[],C=!1,Z={},_=[],A=[],R={},D=0,O=!1,L=!1,F=!0,M=!1,P=!0,z=!1,B=e,V=[],U=[],W=[],j=[],G=[],H=[],q=[],$=[],K=[],X=[],Y="function"===typeof AnimationEffect||void 0!==u.w&&"function"===typeof u.w.AnimationEffect,Q="function"===typeof Element&&"function"===typeof Element.prototype.animate&&Y,J=function(){return X},ee=function(e){re(),e&&ae()},te=function(e,t){return((null===t||void 0===t?void 0:t.oneTimeCallback)?U:V).push({c:e,o:t}),S},ne=function(){return V.length=0,U.length=0,S},re=function(){if(Q)X.forEach((function(e){e.cancel()})),X.length=0;else{var e=W.slice();(0,s.r)((function(){e.forEach((function(e){f(e,"animation-name"),f(e,"animation-duration"),f(e,"animation-timing-function"),f(e,"animation-iteration-count"),f(e,"animation-delay"),f(e,"animation-play-state"),f(e,"animation-fill-mode"),f(e,"animation-direction")}))}))}},ae=function(){G.forEach((function(e){(null===e||void 0===e?void 0:e.parentNode)&&e.parentNode.removeChild(e)})),G.length=0},ie=function(){return void 0!==m?m:y?y.getFill():"both"},oe=function(){return void 0!==k?k:void 0!==g?g:y?y.getDirection():"normal"},se=function(){return O?"linear":void 0!==r?r:y?y.getEasing():"linear"},ue=function(){return L?0:void 0!==w?w:void 0!==n?n:y?y.getDuration():0},ce=function(){return void 0!==v?v:y?y.getIterations():1},le=function(){return void 0!==x?x:void 0!==t?t:y?y.getDelay():0},de=function(e){Q?J().forEach((function(t){if(t.effect.setKeyframes)t.effect.setKeyframes(e);else{var n=new KeyframeEffect(t.effect.target,e,t.effect.getTiming());t.effect=n}})):he()},fe=function(){0!==D&&0===--D&&(!function(){we(),$.forEach((function(e){return e()})),K.forEach((function(e){return e()}));var e=F?1:0,t=_,n=A,r=R;W.forEach((function(e){var a=e.classList;for(var i in t.forEach((function(e){return a.add(e)})),n.forEach((function(e){return a.remove(e)})),r)r.hasOwnProperty(i)&&d(e,i,r[i])})),V.forEach((function(t){return t.c(e,S)})),U.forEach((function(t){return t.c(e,S)})),U.length=0,P=!0,F&&(M=!0),F=!0}(),y&&y.animationFinish())},he=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];ae();var n=function(e){return e.forEach((function(e){for(var t in e)if(e.hasOwnProperty(t)){var n=e[t];if("easing"===t)e["animation-timing-function"]=n,delete e[t];else{var r=c(t);r!==t&&(e[r]=n,delete e[t])}}})),e}(T);W.forEach((function(r){if(n.length>0){var a=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((function(e){var t=e.offset,n=[];for(var r in e)e.hasOwnProperty(r)&&"offset"!==r&&n.push("".concat(r,": ").concat(e[r],";"));return"".concat(100*t,"% { ").concat(n.join(" ")," }")})).join(" ")}(n);I=void 0!==e?e:function(e){var t=h.indexOf(e);return t<0&&(t=h.push(e)-1),"ion-animation-".concat(t)}(a);var i=function(e,t,n){var r,a=function(e){var t=void 0!==e.getRootNode?e.getRootNode():e;return t.head||t}(n),i=l(n),o=a.querySelector("#"+e);if(o)return o;var s=(null!==(r=n.ownerDocument)&&void 0!==r?r:document).createElement("style");return s.id=e,s.textContent="@".concat(i,"keyframes ").concat(e," { ").concat(t," } @").concat(i,"keyframes ").concat(e,"-alt { ").concat(t," }"),a.appendChild(s),s}(I,a,r);G.push(i),d(r,"animation-duration","".concat(ue(),"ms")),d(r,"animation-timing-function",se()),d(r,"animation-delay","".concat(le(),"ms")),d(r,"animation-fill-mode",ie()),d(r,"animation-direction",oe());var o=ce()===1/0?"infinite":ce().toString();d(r,"animation-iteration-count",o),d(r,"animation-play-state","paused"),t&&d(r,"animation-name","".concat(i.id,"-alt")),(0,s.r)((function(){d(r,"animation-name",i.id||null)}))}}))},pe=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];!function(){H.forEach((function(e){return e()})),q.forEach((function(e){return e()}));var e=E,t=N,n=Z;W.forEach((function(r){var a=r.classList;for(var i in e.forEach((function(e){return a.add(e)})),t.forEach((function(e){return a.remove(e)})),n)n.hasOwnProperty(i)&&d(r,i,n[i])}))}(),T.length>0&&(Q?(W.forEach((function(e){var t=e.animate(T,{id:B,delay:le(),duration:ue(),easing:se(),iterations:ce(),fill:ie(),direction:oe()});t.pause(),X.push(t)})),X.length>0&&(X[0].onfinish=function(){fe()})):he(e)),C=!0},ve=function(e){if(e=Math.min(Math.max(e,0),.9999),Q)X.forEach((function(t){t.currentTime=t.effect.getComputedTiming().delay+ue()*e,t.pause()}));else{var t="-".concat(ue()*e,"ms");W.forEach((function(e){T.length>0&&(d(e,"animation-delay",t),d(e,"animation-play-state","paused"))}))}},me=function(e){X.forEach((function(e){e.effect.updateTiming({delay:le(),duration:ue(),easing:se(),iterations:ce(),fill:ie(),direction:oe()})})),void 0!==e&&ve(e)},ge=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0;(0,s.r)((function(){W.forEach((function(n){d(n,"animation-name",I||null),d(n,"animation-duration","".concat(ue(),"ms")),d(n,"animation-timing-function",se()),d(n,"animation-delay",void 0!==t?"-".concat(t*ue(),"ms"):"".concat(le(),"ms")),d(n,"animation-fill-mode",ie()||null),d(n,"animation-direction",oe()||null);var r=ce()===1/0?"infinite":ce().toString();d(n,"animation-iteration-count",r),e&&d(n,"animation-name","".concat(I,"-alt")),(0,s.r)((function(){d(n,"animation-name",I||null)}))}))}))},ye=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0;return e&&j.forEach((function(r){r.update(e,t,n)})),Q?me(n):ge(t,n),S},be=function(){C&&(Q?X.forEach((function(e){e.pause()})):W.forEach((function(e){d(e,"animation-play-state","paused")})),z=!0)},ke=function(){b=void 0,fe()},we=function(){b&&clearTimeout(b)},xe=function(){W.forEach((function(e){f(e,"animation-duration"),f(e,"animation-delay"),f(e,"animation-play-state")}))},Ie=function(e){return new Promise((function(t){(null===e||void 0===e?void 0:e.sync)&&(L=!0,te((function(){return L=!1}),{oneTimeCallback:!0})),C||pe(),M&&(Q?(ve(0),me()):ge(),M=!1),P&&(D=j.length+1,P=!1),te((function(){return t()}),{oneTimeCallback:!0}),j.forEach((function(e){e.play()})),Q?(X.forEach((function(e){e.play()})),0!==T.length&&0!==W.length||fe()):function(){if(we(),(0,s.r)((function(){W.forEach((function(e){T.length>0&&d(e,"animation-play-state","running")}))})),0===T.length||0===W.length)fe();else{var e=le()||0,t=ue()||0,n=ce()||1;isFinite(n)&&(b=setTimeout(ke,e+t*n+100)),function(e,t){var n,r={passive:!0},a=function(){n&&n()},i=function(n){e===n.target&&(a(),t(n))};e&&(e.addEventListener("webkitAnimationEnd",i,r),e.addEventListener("animationend",i,r),n=function(){e.removeEventListener("webkitAnimationEnd",i,r),e.removeEventListener("animationend",i,r)})}(W[0],(function(){we(),(0,s.r)((function(){xe(),(0,s.r)(fe)}))}))}}(),z=!1}))},Se=function(e,t){var n=T[0];return void 0===n||void 0!==n.offset&&0!==n.offset?T=[(0,a.Z)({offset:0},e,t)].concat((0,o.Z)(T)):n[e]=t,S};return S={parentAnimation:y,elements:W,childAnimations:j,id:B,animationFinish:fe,from:Se,to:function(e,t){var n=T[T.length-1];return void 0===n||void 0!==n.offset&&1!==n.offset?T=[].concat((0,o.Z)(T),[(0,a.Z)({offset:1},e,t)]):n[e]=t,S},fromTo:function(e,t,n){return Se(e,t).to(e,n)},parent:function(e){return y=e,S},play:Ie,pause:function(){return j.forEach((function(e){e.pause()})),be(),S},stop:function(){j.forEach((function(e){e.stop()})),C&&(re(),C=!1),O=!1,L=!1,P=!0,k=void 0,w=void 0,x=void 0,D=0,M=!1,F=!0,z=!1},destroy:function(e){return j.forEach((function(t){t.destroy(e)})),ee(e),W.length=0,j.length=0,T.length=0,ne(),C=!1,P=!0,S},keyframes:function(e){var t=T!==e;return T=e,t&&de(T),S},addAnimation:function(e){if(null!=e)if(Array.isArray(e)){var t,n=(0,i.Z)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.parent(S),j.push(r)}}catch(a){n.e(a)}finally{n.f()}}else e.parent(S),j.push(e);return S},addElement:function(e){if(null!=e)if(1===e.nodeType)W.push(e);else if(e.length>=0)for(var t=0;t<e.length;t++)W.push(e[t]);else console.error("Invalid addElement value");return S},update:ye,fill:function(e){return m=e,ye(!0),S},direction:function(e){return g=e,ye(!0),S},iterations:function(e){return v=e,ye(!0),S},duration:function(e){return Q||0!==e||(e=1),n=e,ye(!0),S},easing:function(e){return r=e,ye(!0),S},delay:function(e){return t=e,ye(!0),S},getWebAnimations:J,getKeyframes:function(){return T},getFill:ie,getDirection:oe,getDelay:le,getIterations:ce,getEasing:se,getDuration:ue,afterAddRead:function(e){return $.push(e),S},afterAddWrite:function(e){return K.push(e),S},afterClearStyles:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=(0,i.Z)(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;R[r]=""}}catch(a){n.e(a)}finally{n.f()}return S},afterStyles:function(){return R=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},S},afterRemoveClass:function(e){return A=p(A,e),S},afterAddClass:function(e){return _=p(_,e),S},beforeAddRead:function(e){return H.push(e),S},beforeAddWrite:function(e){return q.push(e),S},beforeClearStyles:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=(0,i.Z)(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;Z[r]=""}}catch(a){n.e(a)}finally{n.f()}return S},beforeStyles:function(){return Z=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},S},beforeRemoveClass:function(e){return N=p(N,e),S},beforeAddClass:function(e){return E=p(E,e),S},onFinish:te,isRunning:function(){return 0!==D&&!z},progressStart:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return j.forEach((function(n){n.progressStart(e,t)})),be(),O=e,C||pe(),ye(!1,!0,t),S},progressStep:function(e){return j.forEach((function(t){t.progressStep(e)})),ve(e),S},progressEnd:function(e,t,n){return O=!1,j.forEach((function(r){r.progressEnd(e,t,n)})),void 0!==n&&(w=n),M=!1,F=!0,0===e?("reverse"===(k="reverse"===oe()?"normal":"reverse")&&(F=!1),Q?(ye(),ve(1-t)):(x=(1-t)*ue()*-1,ye(!1,!1))):1===e&&(Q?(ye(),ve(t)):(x=t*ue()*-1,ye(!1,!1))),void 0!==e&&(te((function(){w=void 0,k=void 0,x=void 0}),{oneTimeCallback:!0}),y||Ie()),S}}}},9507:function(e,t,n){"use strict";n.d(t,{i:function(){return r}});var r=function(e){return e&&""!==e.dir?"rtl"===e.dir.toLowerCase():"rtl"===(null===document||void 0===document?void 0:document.dir.toLowerCase())}},7225:function(e,t,n){"use strict";n.r(t),n.d(t,{startFocusVisible:function(){return i}});var r="ion-focused",a=["Tab","ArrowDown","Space","Escape"," ","Shift","Enter","ArrowLeft","ArrowRight","ArrowUp","Home","End"],i=function(e){var t=[],n=!0,i=e?e.shadowRoot:document,o=e||document.body,s=function(e){t.forEach((function(e){return e.classList.remove(r)})),e.forEach((function(e){return e.classList.add(r)})),t=e},u=function(){n=!1,s([])},c=function(e){(n=a.includes(e.key))||s([])},l=function(e){if(n&&void 0!==e.composedPath){var t=e.composedPath().filter((function(e){return!!e.classList&&e.classList.contains("ion-focusable")}));s(t)}},d=function(){i.activeElement===o&&s([])};i.addEventListener("keydown",c),i.addEventListener("focusin",l),i.addEventListener("focusout",d),i.addEventListener("touchstart",u),i.addEventListener("mousedown",u);return{destroy:function(){i.removeEventListener("keydown",c),i.removeEventListener("focusin",l),i.removeEventListener("focusout",d),i.removeEventListener("touchstart",u),i.removeEventListener("mousedown",u)},setFocus:s}}},2503:function(e,t,n){"use strict";n.d(t,{G:function(){return l}});var r=n(7762),a=n(5671),i=n(3144),o=function(){function e(){(0,a.Z)(this,e),this.gestureId=0,this.requestedStart=new Map,this.disabledGestures=new Map,this.disabledScroll=new Set}return(0,i.Z)(e,[{key:"createGesture",value:function(e){var t;return new s(this,this.newID(),e.name,null!==(t=e.priority)&&void 0!==t?t:0,!!e.disableScroll)}},{key:"createBlocker",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new u(this,this.newID(),e.disable,!!e.disableScroll)}},{key:"start",value:function(e,t,n){return this.canStart(e)?(this.requestedStart.set(t,n),!0):(this.requestedStart.delete(t),!1)}},{key:"capture",value:function(e,t,n){if(!this.start(e,t,n))return!1;var r=this.requestedStart,a=-1e4;if(r.forEach((function(e){a=Math.max(a,e)})),a===n){this.capturedId=t,r.clear();var i=new CustomEvent("ionGestureCaptured",{detail:{gestureName:e}});return document.dispatchEvent(i),!0}return r.delete(t),!1}},{key:"release",value:function(e){this.requestedStart.delete(e),this.capturedId===e&&(this.capturedId=void 0)}},{key:"disableGesture",value:function(e,t){var n=this.disabledGestures.get(e);void 0===n&&(n=new Set,this.disabledGestures.set(e,n)),n.add(t)}},{key:"enableGesture",value:function(e,t){var n=this.disabledGestures.get(e);void 0!==n&&n.delete(t)}},{key:"disableScroll",value:function(e){this.disabledScroll.add(e),1===this.disabledScroll.size&&document.body.classList.add(c)}},{key:"enableScroll",value:function(e){this.disabledScroll.delete(e),0===this.disabledScroll.size&&document.body.classList.remove(c)}},{key:"canStart",value:function(e){return void 0===this.capturedId&&!this.isDisabled(e)}},{key:"isCaptured",value:function(){return void 0!==this.capturedId}},{key:"isScrollDisabled",value:function(){return this.disabledScroll.size>0}},{key:"isDisabled",value:function(e){var t=this.disabledGestures.get(e);return!!(t&&t.size>0)}},{key:"newID",value:function(){return this.gestureId++,this.gestureId}}]),e}(),s=function(){function e(t,n,r,i,o){(0,a.Z)(this,e),this.id=n,this.name=r,this.disableScroll=o,this.priority=1e6*i+n,this.ctrl=t}return(0,i.Z)(e,[{key:"canStart",value:function(){return!!this.ctrl&&this.ctrl.canStart(this.name)}},{key:"start",value:function(){return!!this.ctrl&&this.ctrl.start(this.name,this.id,this.priority)}},{key:"capture",value:function(){if(!this.ctrl)return!1;var e=this.ctrl.capture(this.name,this.id,this.priority);return e&&this.disableScroll&&this.ctrl.disableScroll(this.id),e}},{key:"release",value:function(){this.ctrl&&(this.ctrl.release(this.id),this.disableScroll&&this.ctrl.enableScroll(this.id))}},{key:"destroy",value:function(){this.release(),this.ctrl=void 0}}]),e}(),u=function(){function e(t,n,r,i){(0,a.Z)(this,e),this.id=n,this.disable=r,this.disableScroll=i,this.ctrl=t}return(0,i.Z)(e,[{key:"block",value:function(){if(this.ctrl){if(this.disable){var e,t=(0,r.Z)(this.disable);try{for(t.s();!(e=t.n()).done;){var n=e.value;this.ctrl.disableGesture(n,this.id)}}catch(a){t.e(a)}finally{t.f()}}this.disableScroll&&this.ctrl.disableScroll(this.id)}}},{key:"unblock",value:function(){if(this.ctrl){if(this.disable){var e,t=(0,r.Z)(this.disable);try{for(t.s();!(e=t.n()).done;){var n=e.value;this.ctrl.enableGesture(n,this.id)}}catch(a){t.e(a)}finally{t.f()}}this.disableScroll&&this.ctrl.enableScroll(this.id)}}},{key:"destroy",value:function(){this.unblock(),this.ctrl=void 0}}]),e}(),c="backdrop-no-scroll",l=new o},8862:function(e,t,n){"use strict";n.r(t),n.d(t,{MENU_BACK_BUTTON_PRIORITY:function(){return u},OVERLAY_BACK_BUTTON_PRIORITY:function(){return s},blockHardwareBackButton:function(){return i},startHardwareBackButton:function(){return o}});var r=n(4165),a=n(5861),i=function(){document.addEventListener("backbutton",(function(){}))},o=function(){var e=document,t=!1;e.addEventListener("backbutton",(function(){if(!t){var n=0,i=[],o=new CustomEvent("ionBackButton",{bubbles:!1,detail:{register:function(e,t){i.push({priority:e,handler:t,id:n++})}}});e.dispatchEvent(o);var s=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(null===t||void 0===t?void 0:t.handler)){e.next=6;break}if(null==(n=t.handler(u))){e.next=6;break}return e.next=6,n;case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),u=function(){if(i.length>0){var e={priority:Number.MIN_SAFE_INTEGER,handler:function(){},id:-1};i.forEach((function(t){t.priority>=e.priority&&(e=t)})),t=!0,i=i.filter((function(t){return t.id!==e.id})),s(e).then((function(){return t=!1}))}};u()}}))},s=100,u=99},1811:function(e,t,n){"use strict";n.d(t,{a:function(){return c},b:function(){return l},c:function(){return i},d:function(){return o},e:function(){return g},f:function(){return v},g:function(){return d},h:function(){return y},i:function(){return u},j:function(){return I},k:function(){return p},l:function(){return x},m:function(){return b},n:function(){return m},p:function(){return w},q:function(){return h},r:function(){return f},s:function(){return T},t:function(){return r},u:function(){return k}});var r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return new Promise((function(n){a(e,t,n)}))},a=function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2?arguments[2]:void 0,i={passive:!0},o=function(){t&&t()},s=function(t){void 0!==t&&e!==t.target||(o(),a(t))};return e&&(e.addEventListener("webkitTransitionEnd",s,i),e.addEventListener("transitionend",s,i),n=setTimeout(s,r+500),t=function(){n&&(clearTimeout(n),n=void 0),e.removeEventListener("webkitTransitionEnd",s,i),e.removeEventListener("transitionend",s,i)}),o},i=function(e,t){e.componentOnReady?e.componentOnReady().then((function(e){return t(e)})):f((function(){return t(e)}))},o=function(e){var t={};return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).forEach((function(n){e.hasAttribute(n)&&(null!==e.getAttribute(n)&&(t[n]=e.getAttribute(n)),e.removeAttribute(n))})),t},s=["role","aria-activedescendant","aria-atomic","aria-autocomplete","aria-braillelabel","aria-brailleroledescription","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colindextext","aria-colspan","aria-controls","aria-current","aria-describedby","aria-description","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowindextext","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext"],u=function(e,t){var n=s;return t&&t.length>0&&(n=n.filter((function(e){return!t.includes(e)}))),o(e,n)},c=function(e,t,n,r){var a;if("undefined"!==typeof window){var i=window,o=null===(a=null===i||void 0===i?void 0:i.Ionic)||void 0===a?void 0:a.config;if(o){var s=o.get("_ael");if(s)return s(e,t,n,r);if(o._ael)return o._ael(e,t,n,r)}}return e.addEventListener(t,n,r)},l=function(e,t,n,r){var a;if("undefined"!==typeof window){var i=window,o=null===(a=null===i||void 0===i?void 0:i.Ionic)||void 0===a?void 0:a.config;if(o){var s=o.get("_rel");if(s)return s(e,t,n,r);if(o._rel)return o._rel(e,t,n,r)}}return e.removeEventListener(t,n,r)},d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;return e.shadowRoot||t},f=function(e){return"function"===typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(e):"function"===typeof requestAnimationFrame?requestAnimationFrame(e):setTimeout(e)},h=function(e){return!!e.shadowRoot&&!!e.attachShadow},p=function(e){var t=e.closest("ion-item");return t?t.querySelector("ion-label"):null},v=function(e){if(e.focus(),e.classList.contains("ion-focusable")){var t=e.closest("ion-app");t&&t.setFocus([e])}},m=function(e,t){var n,r=e.getAttribute("aria-labelledby"),a=e.id,i=null!==r&&""!==r.trim()?r:t+"-lbl",o=null!==r&&""!==r.trim()?document.getElementById(r):p(e);return o?(null===r&&(o.id=i),n=o.textContent,o.setAttribute("aria-hidden","true")):""!==a.trim()&&(o=document.querySelector('label[for="'.concat(a,'"]')))&&(""!==o.id?i=o.id:o.id=i="".concat(a,"-lbl"),n=o.textContent),{label:o,labelId:i,labelText:n}},g=function(e,t,n,r,a){if(e||h(t)){var i=t.querySelector("input.aux-input");i||((i=t.ownerDocument.createElement("input")).type="hidden",i.classList.add("aux-input"),t.appendChild(i)),i.disabled=a,i.name=n,i.value=r||""}},y=function(e,t,n){return Math.max(e,Math.min(t,n))},b=function(e,t){if(!e){var n="ASSERT: "+t;throw console.error(n),new Error(n)}},k=function(e){return e.timeStamp||Date.now()},w=function(e){if(e){var t=e.changedTouches;if(t&&t.length>0){var n=t[0];return{x:n.clientX,y:n.clientY}}if(void 0!==e.pageX)return{x:e.pageX,y:e.pageY}}return{x:0,y:0}},x=function(e){var t="rtl"===document.dir;switch(e){case"start":return t;case"end":return!t;default:throw new Error('"'.concat(e,'" is not a valid value for [side]. Use "start" or "end" instead.'))}},I=function(e,t){var n=e._original||e;return{_original:e,emit:S(n.emit.bind(n),t)}},S=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(){clearTimeout(t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];t=setTimeout.apply(void 0,[e,n].concat(a))}},T=function(e,t){if(null!==e&&void 0!==e||(e={}),null!==t&&void 0!==t||(t={}),e===t)return!0;var n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(var r=0,a=n;r<a.length;r++){var i=a[r];if(!(i in t))return!1;if(e[i]!==t[i])return!1}return!0}},7909:function(e,t,n){"use strict";n.r(t),n.d(t,{GESTURE_CONTROLLER:function(){return a.G},createGesture:function(){return u}});var r,a=n(2503),i=function(e,t,n,r){var a,i,s=o(e)?{capture:!!r.capture,passive:!!r.passive}:!!r.capture;return e.__zone_symbol__addEventListener?(a="__zone_symbol__addEventListener",i="__zone_symbol__removeEventListener"):(a="addEventListener",i="removeEventListener"),e[a](t,n,s),function(){e[i](t,n,s)}},o=function(e){if(void 0===r)try{var t=Object.defineProperty({},"passive",{get:function(){r=!0}});e.addEventListener("optsTest",(function(){}),t)}catch(n){r=!1}return!!r},s=function(e){return e instanceof Document?e:e.ownerDocument},u=function(e){var t=!1,n=!1,r=!0,o=!1,u=Object.assign({disableScroll:!1,direction:"x",gesturePriority:0,passive:!0,maxAngle:40,threshold:10},e),f=u.canStart,h=u.onWillStart,p=u.onStart,v=u.onEnd,m=u.notCaptured,g=u.onMove,y=u.threshold,b=u.passive,k=u.blurOnStart,w={type:"pan",startX:0,startY:0,startTime:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,currentTime:0,event:void 0,data:void 0},x=function(e,t,n){var r=n*(Math.PI/180),a="x"===e,i=Math.cos(r),o=t*t,s=0,u=0,c=!1,l=0;return{start:function(e,t){s=e,u=t,l=0,c=!0},detect:function(e,t){if(!c)return!1;var n=e-s,r=t-u,d=n*n+r*r;if(d<o)return!1;var f=Math.sqrt(d),h=(a?n:r)/f;return l=h>i?1:h<-i?-1:0,c=!1,!0},isGesture:function(){return 0!==l},getDirection:function(){return l}}}(u.direction,u.threshold,u.maxAngle),I=a.G.createGesture({name:e.gestureName,priority:e.gesturePriority,disableScroll:e.disableScroll}),S=function(){t&&(o=!1,g&&g(w))},T=function(){return!!I.capture()&&(t=!0,r=!1,w.startX=w.currentX,w.startY=w.currentY,w.startTime=w.currentTime,h?h(w).then(E):E(),!0)},E=function(){k&&function(){if("undefined"!==typeof document){var e=document.activeElement;(null===e||void 0===e?void 0:e.blur)&&e.blur()}}(),p&&p(w),r=!0},N=function(){t=!1,n=!1,o=!1,r=!0,I.release()},C=function(e){var n=t,a=r;N(),a&&(c(w,e),n?v&&v(w):m&&m(w))},Z=function(e,t,n,r,a){var o,u,c,l,d,f,h,p=0,v=function(r){p=Date.now()+2e3,t(r)&&(!u&&n&&(u=i(e,"touchmove",n,a)),c||(c=i(r.target,"touchend",g,a)),l||(l=i(r.target,"touchcancel",g,a)))},m=function(r){p>Date.now()||t(r)&&(!f&&n&&(f=i(s(e),"mousemove",n,a)),h||(h=i(s(e),"mouseup",y,a)))},g=function(e){b(),r&&r(e)},y=function(e){k(),r&&r(e)},b=function(){u&&u(),c&&c(),l&&l(),u=c=l=void 0},k=function(){f&&f(),h&&h(),f=h=void 0},w=function(){b(),k()},x=function(){arguments.length>0&&void 0!==arguments[0]&&!arguments[0]?(o&&o(),d&&d(),o=d=void 0,w()):(o||(o=i(e,"touchstart",v,a)),d||(d=i(e,"mousedown",m,a)))};return{enable:x,stop:w,destroy:function(){x(!1),r=n=t=void 0}}}(u.el,(function(e){var t=d(e);return!(n||!r)&&(l(e,w),w.startX=w.currentX,w.startY=w.currentY,w.startTime=w.currentTime=t,w.velocityX=w.velocityY=w.deltaX=w.deltaY=0,w.event=e,(!f||!1!==f(w))&&(I.release(),!!I.start()&&(n=!0,0===y?T():(x.start(w.startX,w.startY),!0))))}),(function(e){t?!o&&r&&(o=!0,c(w,e),requestAnimationFrame(S)):(c(w,e),x.detect(w.currentX,w.currentY)&&(x.isGesture()&&T()||_()))}),C,{capture:!1,passive:b}),_=function(){N(),Z.stop(),m&&m(w)};return{enable:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e||(t&&C(void 0),N()),Z.enable(e)},destroy:function(){I.destroy(),Z.destroy()}}},c=function(e,t){if(t){var n=e.currentX,r=e.currentY,a=e.currentTime;l(t,e);var i=e.currentX,o=e.currentY,s=(e.currentTime=d(t))-a;if(s>0&&s<100){var u=(i-n)/s,c=(o-r)/s;e.velocityX=.7*u+.3*e.velocityX,e.velocityY=.7*c+.3*e.velocityY}e.deltaX=i-e.startX,e.deltaY=o-e.startY,e.event=t}},l=function(e,t){var n=0,r=0;if(e){var a=e.changedTouches;if(a&&a.length>0){var i=a[0];n=i.clientX,r=i.clientY}else void 0!==e.pageX&&(n=e.pageX,r=e.pageY)}t.currentX=n,t.currentY=r},d=function(e){return e.timeStamp||Date.now()}},6313:function(e,t,n){"use strict";n.d(t,{b:function(){return s},c:function(){return u},d:function(){return c},e:function(){return S},g:function(){return N},l:function(){return x},s:function(){return T},t:function(){return l}});var r=n(4165),a=n(5861),i=n(1554),o=n(1811),s="ionViewWillLeave",u="ionViewDidLeave",c="ionViewWillUnload",l=function(e){return new Promise((function(t,n){(0,i.Iu)((function(){d(e),f(e).then((function(n){n.animation&&n.animation.destroy(),h(e),t(n)}),(function(t){h(e),n(t)}))}))}))},d=function(e){var t=e.enteringEl,n=e.leavingEl;E(t,n,e.direction),e.showGoBack?t.classList.add("can-go-back"):t.classList.remove("can-go-back"),T(t,!1),t.style.setProperty("pointer-events","none"),n&&(T(n,!1),n.style.setProperty("pointer-events","none"))},f=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p(t);case 2:return n=e.sent,a=n&&i.Z5.isBrowser?v(n,t):m(t),e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(e){var t=e.enteringEl,n=e.leavingEl;t.classList.remove("ion-page-invisible"),t.style.removeProperty("pointer-events"),void 0!==n&&(n.classList.remove("ion-page-invisible"),n.style.removeProperty("pointer-events"))},p=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.leavingEl&&t.animated&&0!==t.duration){e.next=2;break}return e.abrupt("return",void 0);case 2:if(!t.animationBuilder){e.next=4;break}return e.abrupt("return",t.animationBuilder);case 4:if("ios"!==t.mode){e.next=10;break}return e.next=7,n.e(372).then(n.bind(n,7372));case 7:e.t0=e.sent.iosTransitionAnimation,e.next=13;break;case 10:return e.next=12,n.e(856).then(n.bind(n,5856));case 12:e.t0=e.sent.mdTransitionAnimation;case 13:return a=e.t0,e.abrupt("return",a);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t,n){var a,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(n,!0);case 2:return a=t(n.baseEl,n),k(n.enteringEl,n.leavingEl),e.next=6,b(a,n);case 6:return i=e.sent,n.progressCallback&&n.progressCallback(void 0),i&&w(n.enteringEl,n.leavingEl),e.abrupt("return",{hasCompleted:i,animation:a});case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),m=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.enteringEl,a=t.leavingEl,e.next=4,g(t,!1);case 4:return k(n,a),w(n,a),e.abrupt("return",{hasCompleted:!0});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t,n){var a,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=void 0!==t.deepWait?t.deepWait:n,i=a?[S(t.enteringEl),S(t.leavingEl)]:[I(t.enteringEl),I(t.leavingEl)],e.next=4,Promise.all(i);case 4:return e.next=6,y(t.viewIsReady,t.enteringEl);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),y=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t,n){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=3;break}return e.next=3,t(n);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),b=function(e,t){var n=t.progressCallback,r=new Promise((function(t){e.onFinish((function(e){return t(1===e)}))}));return n?(e.progressStart(!0),n(e)):e.play(),r},k=function(e,t){x(t,s),x(e,"ionViewWillEnter")},w=function(e,t){x(e,"ionViewDidEnter"),x(t,u)},x=function(e,t){if(e){var n=new CustomEvent(t,{bubbles:!1,cancelable:!1});e.dispatchEvent(n)}},I=function(e){return e?new Promise((function(t){return(0,o.c)(e,t)})):Promise.resolve()},S=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=t)){e.next=17;break}if(null==n.componentOnReady){e.next=10;break}return e.next=5,n.componentOnReady();case 5:if(null==e.sent){e.next=8;break}return e.abrupt("return");case 8:e.next=15;break;case 10:if(null==n.__registerHost){e.next=15;break}return a=new Promise((function(e){return(0,o.r)(e)})),e.next=14,a;case 14:return e.abrupt("return");case 15:return e.next=17,Promise.all(Array.from(n.children).map(S));case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(e,t){t?(e.setAttribute("aria-hidden","true"),e.classList.add("ion-page-hidden")):(e.hidden=!1,e.removeAttribute("aria-hidden"),e.classList.remove("ion-page-hidden"))},E=function(e,t,n){void 0!==e&&(e.style.zIndex="back"===n?"99":"101"),void 0!==t&&(t.style.zIndex="100")},N=function(e){if(e.classList.contains("ion-page"))return e;var t=e.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs");return t||e}},1437:function(e,t,n){"use strict";n.d(t,{w:function(){return r}});var r="undefined"!==typeof window?window:void 0},3743:function(e,t,n){"use strict";n.d(t,{a:function(){return r},b:function(){return i},p:function(){return a}});var r=function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return(t=console).warn.apply(t,["[Ionic Warning]: ".concat(e)].concat(r))},a=function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return(t=console).error.apply(t,["[Ionic Error]: ".concat(e)].concat(r))},i=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return console.error("<".concat(e.tagName.toLowerCase(),"> must be used inside ").concat(n.join(" or "),"."))}},9344:function(e,t,n){"use strict";n.d(t,{I:function(){return s},a:function(){return h},b:function(){return u},c:function(){return v},d:function(){return g},f:function(){return f},g:function(){return d},i:function(){return l},p:function(){return m},r:function(){return y},s:function(){return p}});var r=n(4165),a=n(5861),i=n(1811),o=n(3743),s="ion-content",u=".ion-content-scroll-host",c="".concat(s,", ").concat(u),l=function(e){return"ION-CONTENT"===e.tagName},d=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l(t)){e.next=4;break}return e.next=3,new Promise((function(e){return(0,i.c)(t,e)}));case 3:return e.abrupt("return",t.getScrollElement());case 4:return e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(e){var t=e.querySelector(u);return t||e.querySelector(c)},h=function(e){return e.closest(c)},p=function(e,t){return l(e)?e.scrollToTop(t):Promise.resolve(e.scrollTo({top:0,left:0,behavior:t>0?"smooth":"auto"}))},v=function(e,t,n,r){return l(e)?e.scrollByPoint(t,n,r):Promise.resolve(e.scrollBy({top:n,left:t,behavior:r>0?"smooth":"auto"}))},m=function(e){return(0,o.b)(e,s)},g=function(e){if(l(e)){var t=e,n=t.scrollY;return t.scrollY=!1,n}return e.style.setProperty("overflow","hidden"),!0},y=function(e,t){l(e)?e.scrollY=t:e.style.removeProperty("overflow")}},5573:function(e,t,n){"use strict";n.r(t),n.d(t,{KEYBOARD_DID_CLOSE:function(){return a},KEYBOARD_DID_OPEN:function(){return r},copyVisualViewport:function(){return b},keyboardDidClose:function(){return v},keyboardDidOpen:function(){return h},keyboardDidResize:function(){return p},resetKeyboardAssist:function(){return u},setKeyboardClose:function(){return f},setKeyboardOpen:function(){return d},startKeyboardAssist:function(){return c},trackViewportChanges:function(){return y}});var r="ionKeyboardDidShow",a="ionKeyboardDidHide",i={},o={},s=!1,u=function(){i={},o={},s=!1},c=function(e){l(e),e.visualViewport&&(o=b(e.visualViewport),e.visualViewport.onresize=function(){y(e),h()||p(e)?d(e):v(e)&&f(e)})},l=function(e){e.addEventListener("keyboardDidShow",(function(t){return d(e,t)})),e.addEventListener("keyboardDidHide",(function(){return f(e)}))},d=function(e,t){m(e,t),s=!0},f=function(e){g(e),s=!1},h=function(){var e=(i.height-o.height)*o.scale;return!s&&i.width===o.width&&e>150},p=function(e){return s&&!v(e)},v=function(e){return s&&o.height===e.innerHeight},m=function(e,t){var n=t?t.keyboardHeight:e.innerHeight-o.height,a=new CustomEvent(r,{detail:{keyboardHeight:n}});e.dispatchEvent(a)},g=function(e){var t=new CustomEvent(a);e.dispatchEvent(t)},y=function(e){i=Object.assign({},o),o=b(e.visualViewport)},b=function(e){return{width:Math.round(e.width),height:Math.round(e.height),offsetTop:e.offsetTop,offsetLeft:e.offsetLeft,pageTop:e.pageTop,pageLeft:e.pageLeft,scale:e.scale}}},1554:function(e,t,n){"use strict";n.d(t,{Z5:function(){return Le},_y:function(){return Fe},mv:function(){return kn},AA:function(){return Ke},yM:function(){return ot},xE:function(){return Bt},K3:function(){return Me},iJ:function(){return it},h:function(){return qe},GH:function(){return en},wj:function(){return On},PM:function(){return at},TX:function(){return xn},Iu:function(){return Ln}});var r,a,i,o,s=n(5671),u=n(3144),c=n(4165),l=n(5861),d=n(9439),f=n(3433),h=!1,p=!0,v=!1,m=!0,g=!0,y=!0,b=!0,k=!0,w=!0,x=!0,I=!0,S=!0,T=!0,E=!0,N=!0,C=!1,Z=!0,_=!0,A=!0,R=!0,D=!0,O=!0,L=!0,F=!0,M=!0,P=!0,z=!0,B=!0,V=!0,U=!0,W=!0,j=!0,G=!0,H=!0,q=!0,$=!0,K=!0,X=!0,Y=!0,Q=!0,J=!0,ee=!0,te=!0,ne=!0,re=!1,ae=!1,ie=!1,oe=!1,se=!1,ue=!1,ce=!1,le=!1,de=!1,fe=!0,he=!1,pe=!0,ve=!1,me=!0,ge=!0,ye=!0,be=!1,ke=!0,we=!0,xe=!0,Ie=!1,Se=!1,Te=!1,Ee=!0,Ne="app",Ce=0,Ze=!1,_e=!1,Ae=!1,Re=!1,De=0,Oe=!1,Le={isDev:!!ie,isBrowser:!0,isServer:!1,isTesting:!!oe},Fe={},Me=function(e){var t=new URL(e,wn.$resourcesUrl$);return t.origin!==yn.location.origin?t.href:t.pathname},Pe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(de&&performance.mark){var n="st:".concat(e,":").concat(t,":").concat(Ce++);return performance.mark(n),function(){return performance.measure("[Stencil] ".concat(e,"() <").concat(t,">"),n)}}return function(){}},ze=function(e,t){return de&&performance.mark?(0===performance.getEntriesByName(e,"mark").length&&performance.mark(e),function(){0===performance.getEntriesByName(t,"measure").length&&performance.measure(t,e)}):function(){}},Be="s-id",Ve="sty-id",Ue="c-id",We="http://www.w3.org/1999/xlink",je={},Ge=function(e){return"object"===(e=typeof e)||"function"===e};function He(e){var t,n,r;return null!==(r=null===(n=null===(t=e.head)||void 0===t?void 0:t.querySelector('meta[name="csp-nonce"]'))||void 0===n?void 0:n.getAttribute("content"))&&void 0!==r?r:void 0}var qe=function(e,t){for(var n=null,r=null,a=null,i=!1,o=!1,s=[],u=arguments.length,c=new Array(u>2?u-2:0),l=2;l<u;l++)c[l-2]=arguments[l];if(function t(r){for(var a=0;a<r.length;a++)n=r[a],Array.isArray(n)?t(n):null!=n&&"boolean"!==typeof n&&((i="function"!==typeof e&&!Ge(n))?n=String(n):ie&&"function"!==typeof e&&void 0===n.$flags$&&fn("vNode passed as children has unexpected type.\nMake sure it's using the correct h() function.\nEmpty objects can also be the cause, look for JSX comments that became objects."),i&&o?s[s.length-1].$text$+=n:s.push(i?$e(null,n):n),o=i)}(c),t&&(ie&&"input"===e&&et(t),$&&t.key&&(r=t.key),fe&&t.name&&(a=t.name),H)){var d=t.className||t.class;d&&(t.class="object"!==typeof d?d:Object.keys(d).filter((function(e){return d[e]})).join(" "))}if(ie&&s.some(Xe)&&fn("The <Host> must be the single root component. Make sure:\n- You are NOT using hostData() and <Host> in the same component.\n- <Host> is used once, and it's the single root component of the render() function."),q&&"function"===typeof e)return e(null===t?{}:t,s,Ye);var f=$e(e,null);return f.$attrs$=t,s.length>0&&(f.$children$=s),$&&(f.$key$=r),fe&&(f.$name$=a),f},$e=function(e,t){var n={$flags$:0,$tag$:e,$text$:t,$elm$:null,$children$:null};return j&&(n.$attrs$=null),$&&(n.$key$=null),fe&&(n.$name$=null),n},Ke={},Xe=function(e){return e&&e.$tag$===Ke},Ye={forEach:function(e,t){return e.map(Qe).forEach(t)},map:function(e,t){return e.map(Qe).map(t).map(Je)}},Qe=function(e){return{vattrs:e.$attrs$,vchildren:e.$children$,vkey:e.$key$,vname:e.$name$,vtag:e.$tag$,vtext:e.$text$}},Je=function(e){if("function"===typeof e.vtag){var t=Object.assign({},e.vattrs);return e.vkey&&(t.key=e.vkey),e.vname&&(t.name=e.vname),qe.apply(void 0,[e.vtag,t].concat((0,f.Z)(e.vchildren||[])))}var n=$e(e.vtag,e.vtext);return n.$attrs$=e.vattrs,n.$children$=e.vchildren,n.$key$=e.vkey,n.$name$=e.vname,n},et=function(e){var t=Object.keys(e),n=t.indexOf("value");if(-1!==n){var r=t.indexOf("type"),a=t.indexOf("min"),i=t.indexOf("max"),o=t.indexOf("step");(n<r||n<a||n<i||n<o)&&hn('The "value" prop of <input> should be set after "min", "max", "type" and "step"')}},tt=function e(t,n,r,a,i,o,s){var u,c,l,d;if(1===o.nodeType){for((u=o.getAttribute(Ue))&&((c=u.split("."))[0]!==s&&"0"!==c[0]||(l={$flags$:0,$hostId$:c[0],$nodeId$:c[1],$depth$:c[2],$index$:c[3],$tag$:o.tagName.toLowerCase(),$elm$:o,$attrs$:null,$children$:null,$key$:null,$name$:null,$text$:null},n.push(l),o.removeAttribute(Ue),t.$children$||(t.$children$=[]),t.$children$[l.$index$]=l,t=l,a&&"0"===l.$depth$&&(a[l.$index$]=l.$elm$))),d=o.childNodes.length-1;d>=0;d--)e(t,n,r,a,i,o.childNodes[d],s);if(o.shadowRoot)for(d=o.shadowRoot.childNodes.length-1;d>=0;d--)e(t,n,r,a,i,o.shadowRoot.childNodes[d],s)}else if(8===o.nodeType)(c=o.nodeValue.split("."))[1]!==s&&"0"!==c[1]||(u=c[0],l={$flags$:0,$hostId$:c[1],$nodeId$:c[2],$depth$:c[3],$index$:c[4],$elm$:o,$attrs$:null,$children$:null,$key$:null,$name$:null,$tag$:null,$text$:null},"t"===u?(l.$elm$=o.nextSibling,l.$elm$&&3===l.$elm$.nodeType&&(l.$text$=l.$elm$.textContent,n.push(l),o.remove(),t.$children$||(t.$children$=[]),t.$children$[l.$index$]=l,a&&"0"===l.$depth$&&(a[l.$index$]=l.$elm$))):l.$hostId$===s&&("s"===u?(l.$tag$="slot",c[5]?o["s-sn"]=l.$name$=c[5]:o["s-sn"]="",o["s-sr"]=!0,M&&a&&(l.$elm$=bn.createElement(l.$tag$),l.$name$&&l.$elm$.setAttribute("name",l.$name$),o.parentNode.insertBefore(l.$elm$,o),o.remove(),"0"===l.$depth$&&(a[l.$index$]=l.$elm$)),r.push(l),t.$children$||(t.$children$=[]),t.$children$[l.$index$]=l):"r"===u&&(M&&a?o.remove():fe&&(i["s-cr"]=o,o["s-cn"]=!0))));else if(t&&"style"===t.$tag$){var f=$e(null,o.textContent);f.$elm$=o,f.$index$="0",t.$children$=[f]}},nt=function e(t,n){if(1===t.nodeType){for(var r=0;r<t.childNodes.length;r++)e(t.childNodes[r],n);if(t.shadowRoot)for(r=0;r<t.shadowRoot.childNodes.length;r++)e(t.shadowRoot.childNodes[r],n)}else if(8===t.nodeType){var a=t.nodeValue.split(".");"o"===a[0]&&(n.set(a[1]+"."+a[2],t),t.nodeValue="",t["s-en"]=a[3])}},rt=function(e){return gn.map((function(t){return t(e)})).find((function(e){return!!e}))},at=function(e){return gn.push(e)},it=function(e){return sn(e).$modeName$},ot=function(e,t,n){var r=function(e){return le?sn(e).$hostElement$:e}(e);return{emit:function(e){return ie&&!r.isConnected&&hn('The "'.concat(t,'" event was emitted, but the dispatcher node is no longer connected to the dom.')),st(r,t,{bubbles:!!(4&n),composed:!!(2&n),cancelable:!!(1&n),detail:e})}}},st=function(e,t,n){var r=wn.ce(t,n);return e.dispatchEvent(r),r},ut=new WeakMap,ct=function(e,t,n){var r=mn.get(e);Tn&&n?"string"===typeof(r=r||new CSSStyleSheet)?r=t:r.replaceSync(t):r=t,mn.set(e,r)},lt=function(e,t,n,r){var a,i=ft(t,n),o=mn.get(i);if(!Ee)return i;if(e=11===e.nodeType?e:bn,o)if("string"===typeof o){e=e.head||e;var s,u=ut.get(e);if(u||ut.set(e,u=new Set),!u.has(i)){if(ue&&e.host&&(s=e.querySelector("[".concat(Ve,'="').concat(i,'"]'))))s.innerHTML=o;else{if(be&&wn.$cssShim$){var c=(s=wn.$cssShim$.createHostStyle(r,i,o,!!(10&t.$flags$)))["s-sc"];c&&(i=c,u=null)}else(s=bn.createElement("style")).innerHTML=o;var l=null!==(a=wn.$nonce$)&&void 0!==a?a:He(bn);null!=l&&s.setAttribute("nonce",l),(se||re)&&s.setAttribute(Ve,i),e.insertBefore(s,e.querySelector("link"))}u&&u.add(i)}}else ke&&!e.adoptedStyleSheets.includes(o)&&(e.adoptedStyleSheets=[].concat((0,f.Z)(e.adoptedStyleSheets),[o]));return i},dt=function(e){var t=e.$cmpMeta$,n=e.$hostElement$,r=t.$flags$,a=Pe("attachStyles",t.$tagName$),i=lt(M&&In&&n.shadowRoot?n.shadowRoot:n.getRootNode(),t,e.$modeName$,n);(M||F)&&z&&10&r&&(n["s-sc"]=i,n.classList.add(i+"-h"),F&&2&r&&n.classList.add(i+"-s")),a()},ft=function(e,t){return"sc-"+(R&&t&&32&e.$flags$?e.$tagName$+"-"+t:e.$tagName$)},ht=function(e,t,n,r,a,i){if(n!==r){var o=cn(e,t),s=t.toLowerCase();if(H&&"class"===t){var u=e.classList,c=vt(n),l=vt(r);u.remove.apply(u,(0,f.Z)(c.filter((function(e){return e&&!l.includes(e)})))),u.add.apply(u,(0,f.Z)(l.filter((function(e){return e&&!c.includes(e)}))))}else if(J&&"style"===t){if(W)for(var d in n)r&&null!=r[d]||(!se&&d.includes("-")?e.style.removeProperty(d):e.style[d]="");for(var h in r)n&&r[h]===n[h]||(!se&&h.includes("-")?e.style.setProperty(h,r[h]):e.style[h]=r[h])}else if($&&"key"===t);else if(X&&"ref"===t)r&&r(e);else if(!K||(le?o:e.__lookupSetter__(t))||"o"!==t[0]||"n"!==t[1]){if(Y){var p=Ge(r);if((o||p&&null!==r)&&!a)try{if(e.tagName.includes("-"))e[t]=r;else{var v=null==r?"":r;"list"===t?o=!1:null!=n&&e[t]==v||(e[t]=v)}}catch(g){}var m=!1;G&&s!==(s=s.replace(/^xlink\:?/,""))&&(t=s,m=!0),null==r||!1===r?!1===r&&""!==e.getAttribute(t)||(G&&m?e.removeAttributeNS(We,t):e.removeAttribute(t)):(!o||4&i||a)&&!p&&(r=!0===r?"":r,G&&m?e.setAttributeNS(We,t,r):e.setAttribute(t,r))}}else t="-"===t[2]?t.slice(3):cn(yn,s)?s.slice(2):s[2]+t.slice(3),n&&wn.rel(e,t,n,!1),r&&wn.ael(e,t,r,!1)}},pt=/\s/,vt=function(e){return e?e.split(pt):[]},mt=function(e,t,n,r){var a=11===t.$elm$.nodeType&&t.$elm$.host?t.$elm$.host:t.$elm$,i=e&&e.$attrs$||je,o=t.$attrs$||je;if(W)for(r in i)r in o||ht(a,r,i[r],void 0,n,t.$flags$);for(r in o)ht(a,r,i[r],o[r],n,t.$flags$)},gt=function e(t,n,o,s){var u,c,l,d=n.$children$[o],f=0;if(fe&&!Ze&&(Ae=!0,"slot"===d.$tag$&&(r&&s.classList.add(r+"-s"),d.$flags$|=d.$children$?2:1)),ie&&d.$elm$&&fn("The JSX ".concat(null!==d.$text$?'"'.concat(d.$text$,'" text'):'"'.concat(d.$tag$,'" element')," node should not be shared within the same renderer. The renderer caches element lookups in order to improve performance. However, a side effect from this is that the exact same JSX node should not be reused. For more information please see https://stenciljs.com/docs/templating-jsx#avoid-shared-jsx-nodes")),ee&&null!==d.$text$)u=d.$elm$=bn.createTextNode(d.$text$);else if(fe&&1&d.$flags$)u=d.$elm$=ae||se?Rt(d):bn.createTextNode("");else{if(U&&!Re&&(Re="svg"===d.$tag$),u=d.$elm$=U?bn.createElementNS(Re?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",fe&&2&d.$flags$?"slot-fb":d.$tag$):bn.createElement(fe&&2&d.$flags$?"slot-fb":d.$tag$),U&&Re&&"foreignObject"===d.$tag$&&(Re=!1),j&&mt(null,d,Re),(M||F)&&null!=r&&u["s-si"]!==r&&u.classList.add(u["s-si"]=r),d.$children$)for(f=0;f<d.$children$.length;++f)(c=e(t,d,f,u))&&u.appendChild(c);U&&("svg"===d.$tag$?Re=!1:"foreignObject"===u.tagName&&(Re=!0))}return fe&&(u["s-hn"]=i,3&d.$flags$&&(u["s-sr"]=!0,u["s-cr"]=a,u["s-sn"]=d.$name$||"",(l=t&&t.$children$&&t.$children$[o])&&l.$tag$===d.$tag$&&t.$elm$&&yt(t.$elm$,!1))),u},yt=function e(t,n){wn.$flags$|=1;for(var r=t.childNodes,a=r.length-1;a>=0;a--){var o=r[a];o["s-hn"]!==i&&o["s-ol"]&&(St(o).insertBefore(o,It(o)),o["s-ol"].remove(),o["s-ol"]=void 0,Ae=!0),n&&e(o,n)}wn.$flags$&=-2},bt=function(e,t,n,r,a,o){var s,u=fe&&e["s-cr"]&&e["s-cr"].parentNode||e;for(M&&u.shadowRoot&&u.tagName===i&&(u=u.shadowRoot);a<=o;++a)r[a]&&(s=gt(null,n,a,e))&&(r[a].$elm$=s,u.insertBefore(s,fe?It(t):t))},kt=function(e,t,n,r,a){for(;t<=n;++t)(r=e[t])&&(a=r.$elm$,_t(r),fe&&(_e=!0,a["s-ol"]?a["s-ol"].remove():yt(a,!0)),a.remove())},wt=function(e,t,n,r){for(var a,i,o=0,s=0,u=0,c=0,l=t.length-1,d=t[0],f=t[l],h=r.length-1,p=r[0],v=r[h];o<=l&&s<=h;)if(null==d)d=t[++o];else if(null==f)f=t[--l];else if(null==p)p=r[++s];else if(null==v)v=r[--h];else if(xt(d,p))Tt(d,p),d=t[++o],p=r[++s];else if(xt(f,v))Tt(f,v),f=t[--l],v=r[--h];else if(xt(d,v))!fe||"slot"!==d.$tag$&&"slot"!==v.$tag$||yt(d.$elm$.parentNode,!1),Tt(d,v),e.insertBefore(d.$elm$,f.$elm$.nextSibling),d=t[++o],v=r[--h];else if(xt(f,p))!fe||"slot"!==d.$tag$&&"slot"!==v.$tag$||yt(f.$elm$.parentNode,!1),Tt(f,p),e.insertBefore(f.$elm$,d.$elm$),f=t[--l],p=r[++s];else{if(u=-1,$)for(c=o;c<=l;++c)if(t[c]&&null!==t[c].$key$&&t[c].$key$===p.$key$){u=c;break}$&&u>=0?((i=t[u]).$tag$!==p.$tag$?a=gt(t&&t[s],n,u,e):(Tt(i,p),t[u]=void 0,a=i.$elm$),p=r[++s]):(a=gt(t&&t[s],n,s,e),p=r[++s]),a&&(fe?St(d.$elm$).insertBefore(a,It(d.$elm$)):d.$elm$.parentNode.insertBefore(a,d.$elm$))}o>l?bt(e,null==r[h+1]?null:r[h+1].$elm$,n,r,s,h):W&&s>h&&kt(t,o,l)},xt=function(e,t){return e.$tag$===t.$tag$&&(fe&&"slot"===e.$tag$?e.$name$===t.$name$:!$||e.$key$===t.$key$)},It=function(e){return e&&e["s-ol"]||e},St=function(e){return(e["s-ol"]?e["s-ol"]:e).parentNode},Tt=function(e,t){var n,r=t.$elm$=e.$elm$,a=e.$children$,i=t.$children$,o=t.$tag$,s=t.$text$;ee&&null!==s?ee&&fe&&(n=r["s-cr"])?n.parentNode.textContent=s:ee&&e.$text$!==s&&(r.data=s):(U&&(Re="svg"===o||"foreignObject"!==o&&Re),(j||L)&&(P&&"slot"===o||mt(e,t,Re)),W&&null!==a&&null!==i?wt(r,a,t,i):null!==i?(W&&ee&&null!==e.$text$&&(r.textContent=""),bt(r,null,t,i,0,i.length-1)):W&&null!==a&&kt(a,0,a.length-1),U&&Re&&"svg"===o&&(Re=!1))},Et=function e(t){var n,r,a,i,o,s,u=t.childNodes;for(r=0,a=u.length;r<a;r++)if(1===(n=u[r]).nodeType){if(n["s-sr"])for(o=n["s-sn"],n.hidden=!1,i=0;i<a;i++)if(s=u[i].nodeType,u[i]["s-hn"]!==n["s-hn"]||""!==o){if(1===s&&o===u[i].getAttribute("slot")){n.hidden=!0;break}}else if(1===s||3===s&&""!==u[i].textContent.trim()){n.hidden=!0;break}e(n)}},Nt=[],Ct=function e(t){for(var n,r,a,i,o,s,u=0,c=t.childNodes,l=c.length;u<l;u++){if((n=c[u])["s-sr"]&&(r=n["s-cr"])&&r.parentNode)for(a=r.parentNode.childNodes,i=n["s-sn"],s=a.length-1;s>=0;s--)(r=a[s])["s-cn"]||r["s-nr"]||r["s-hn"]===n["s-hn"]||(Zt(r,i)?(o=Nt.find((function(e){return e.$nodeToRelocate$===r})),_e=!0,r["s-sn"]=r["s-sn"]||i,o?o.$slotRefNode$=n:Nt.push({$slotRefNode$:n,$nodeToRelocate$:r}),r["s-sr"]&&Nt.map((function(e){Zt(e.$nodeToRelocate$,r["s-sn"])&&(o=Nt.find((function(e){return e.$nodeToRelocate$===r})))&&!e.$slotRefNode$&&(e.$slotRefNode$=o.$slotRefNode$)}))):Nt.some((function(e){return e.$nodeToRelocate$===r}))||Nt.push({$nodeToRelocate$:r}));1===n.nodeType&&e(n)}},Zt=function(e,t){return 1===e.nodeType?null===e.getAttribute("slot")&&""===t||e.getAttribute("slot")===t:e["s-sn"]===t||""===t},_t=function e(t){X&&(t.$attrs$&&t.$attrs$.ref&&t.$attrs$.ref(null),t.$children$&&t.$children$.map(e))},At=function(e,t){var n=e.$hostElement$,o=e.$cmpMeta$,s=e.$vnode$||$e(null,null),u=Xe(t)?t:qe(null,null,t);if(i=n.tagName,ie&&Array.isArray(t)&&t.some(Xe))throw new Error('The <Host> must be the single root component.\nLooks like the render() function of "'.concat(i.toLowerCase(),'" is returning an array that contains the <Host>.\n\nThe render() function should look like this instead:\n\nrender() {\n  // Do not return an array\n  return (\n    <Host>{content}</Host>\n  );\n}\n  '));if(L&&o.$attrsToReflect$&&(u.$attrs$=u.$attrs$||{},o.$attrsToReflect$.map((function(e){var t=(0,d.Z)(e,2),r=t[0],a=t[1];return u.$attrs$[a]=n[r]}))),u.$tag$=null,u.$flags$|=4,e.$vnode$=u,u.$elm$=s.$elm$=M&&n.shadowRoot||n,(F||M)&&(r=n["s-sc"]),fe&&(a=n["s-cr"],Ze=In&&0!==(1&o.$flags$),_e=!1),Tt(s,u),fe){if(wn.$flags$|=1,Ae){var c,l,f,h,p,v;Ct(u.$elm$);for(var m=0;m<Nt.length;m++)(l=(c=Nt[m]).$nodeToRelocate$)["s-ol"]||((f=ae||se?Dt(l):bn.createTextNode(""))["s-nr"]=l,l.parentNode.insertBefore(l["s-ol"]=f,l));for(m=0;m<Nt.length;m++)if(l=(c=Nt[m]).$nodeToRelocate$,c.$slotRefNode$){for(h=c.$slotRefNode$.parentNode,p=c.$slotRefNode$.nextSibling,f=l["s-ol"];f=f.previousSibling;)if((v=f["s-nr"])&&v["s-sn"]===l["s-sn"]&&h===v.parentNode&&(!(v=v.nextSibling)||!v["s-nr"])){p=v;break}(!p&&h!==l.parentNode||l.nextSibling!==p)&&l!==p&&(!l["s-hn"]&&l["s-ol"]&&(l["s-hn"]=l["s-ol"].parentNode.nodeName),h.insertBefore(l,p))}else 1===l.nodeType&&(l.hidden=!0)}_e&&Et(u.$elm$),wn.$flags$&=-2,Nt.length=0}},Rt=function(e){return bn.createComment("<slot".concat(e.$name$?' name="'+e.$name$+'"':"","> (host=").concat(i.toLowerCase(),")"))},Dt=function(e){return bn.createComment("org-location for "+(e.localName?"<".concat(e.localName,"> (host=").concat(e["s-hn"],")"):"[".concat(e.textContent,"]")))},Ot=function(e,t){Se&&t&&!e.$onRenderResolve$&&t["s-p"]&&t["s-p"].push(new Promise((function(t){return e.$onRenderResolve$=t})))},Lt=function(e,t){if(ne&&W&&(e.$flags$|=16),!(Se&&4&e.$flags$)){Ot(e,e.$ancestorComponent$);var n=function(){return Ft(e,t)};return ne?Ln(n):n()}e.$flags$|=512},Ft=function(e,t){var n,r=e.$hostElement$,a=Pe("scheduleUpdate",e.$cmpMeta$.$tagName$),i=le?e.$lazyInstance$:r;return t?(le&&S&&(e.$flags$|=256,e.$queuedListeners$&&(e.$queuedListeners$.map((function(e){var t=(0,d.Z)(e,2),n=t[0],r=t[1];return Ut(i,n,r)})),e.$queuedListeners$=null)),jt(r,"componentWillLoad"),y&&(n=Ut(i,"componentWillLoad"))):(jt(r,"componentWillUpdate"),b&&(n=Ut(i,"componentWillUpdate"))),jt(r,"componentWillRender"),k&&(n=Wt(n,(function(){return Ut(i,"componentWillRender")}))),a(),Wt(n,(function(){return Mt(e,i,t)}))},Mt=function(){var e=(0,l.Z)((0,c.Z)().mark((function e(t,n,r){var a,i,o,s,u,l;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.$hostElement$,i=Pe("update",t.$cmpMeta$.$tagName$),o=a["s-rc"],V&&r&&dt(t),s=Pe("render",t.$cmpMeta$.$tagName$),ie&&(t.$flags$|=1024),!se){e.next=11;break}return e.next=9,Pt(t,n,a);case 9:e.next=12;break;case 11:Pt(t,n,a);case 12:if(be&&wn.$cssShim$&&wn.$cssShim$.updateHost(a),ie&&(t.$renderCount$++,t.$flags$&=-1025),se)try{Ht(a),r&&(1&t.$cmpMeta$.$flags$?a["s-en"]="":2&t.$cmpMeta$.$flags$&&(a["s-en"]="c"))}catch(c){ln(c,a)}Se&&o&&(o.map((function(e){return e()})),a["s-rc"]=void 0),s(),i(),Se?(u=a["s-p"],l=function(){return zt(t)},0===u.length?l():(Promise.all(u).then(l),t.$flags$|=4,u.length=0)):zt(t);case 19:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),Pt=function(e,t,n){var r=!!h,a=!!le,i=!!ne,o=!!W;try{if(t,t=(r||t.render)&&t.render(),o&&i&&(e.$flags$&=-17),(o||a)&&(e.$flags$|=2),I||L)if(Q||L){if(se)return Promise.resolve(t).then((function(t){return At(e,t)}));At(e,t)}else n.textContent=t}catch(s){ln(s,e.$hostElement$)}return null,null},zt=function(e){var t=e.$cmpMeta$.$tagName$,n=e.$hostElement$,r=Pe("postUpdate",t),a=le?e.$lazyInstance$:n,i=e.$ancestorComponent$;g&&(ie&&(e.$flags$|=1024),Ut(a,"componentDidRender"),ie&&(e.$flags$&=-1025)),jt(n,"componentDidRender"),64&e.$flags$?(m&&(ie&&(e.$flags$|=1024),Ut(a,"componentDidUpdate"),ie&&(e.$flags$&=-1025)),jt(n,"componentDidUpdate"),r()):(e.$flags$|=64,Se&&z&&Gt(n),p&&(ie&&(e.$flags$|=2048),Ut(a,"componentDidLoad"),ie&&(e.$flags$&=-2049)),jt(n,"componentDidLoad"),r(),Se&&(e.$onReadyResolve$(n),i||Vt(t))),re&&n["s-hmr-load"]&&n["s-hmr-load"](),A&&le&&e.$onInstanceResolve$(n),Se&&(e.$onRenderResolve$&&(e.$onRenderResolve$(),e.$onRenderResolve$=void 0),512&e.$flags$&&Dn((function(){return Lt(e,!1)})),e.$flags$&=-517)},Bt=function(e){if(W){var t=sn(e),n=t.$hostElement$.isConnected;return n&&2===(18&t.$flags$)&&Lt(t,!1),n}return!1},Vt=function(e){z&&Gt(bn.documentElement),Te&&(wn.$flags$|=2),Dn((function(){return st(yn,"appload",{detail:{namespace:Ne}})})),de&&performance.measure&&performance.measure("[Stencil] ".concat(Ne," initial load (by ").concat(e,")"),"st:app:start")},Ut=function(e,t,n){if(e&&e[t])try{return e[t](n)}catch(r){ln(r)}},Wt=function(e,t){return e&&e.then?e.then(t):t()},jt=function(e,t){ce&&st(e,"stencil_"+t,{bubbles:!0,composed:!0,detail:{namespace:Ne}})},Gt=function(e){return pe?e.classList.add("hydrated"):he?e.setAttribute("hydrated",""):void 0},Ht=function e(t){var n=t.children;if(null!=n)for(var r=0,a=n.length;r<a;r++){var i=n[r];"function"===typeof i.connectedCallback&&i.connectedCallback(),e(i)}},qt=function(e,t,n,r){var a,i,o=sn(e),s=le?o.$hostElement$:e,u=o.$instanceValues$.get(t),c=o.$flags$,l=le?o.$lazyInstance$:s;a=n,i=r.$members$[t][0],n=null==a||Ge(a)?a:me&&4&i?"false"!==a&&(""===a||!!a):ge&&2&i?parseFloat(a):ye&&1&i?String(a):a;var d=Number.isNaN(u)&&Number.isNaN(n);if((!le||!(8&c)||void 0===u)&&(n!==u&&!d)&&(o.$instanceValues$.set(t,n),ie&&(1024&o.$flags$?hn('The state/prop "'.concat(t,'" changed during rendering. This can potentially lead to infinite-loops and other bugs.'),"\nElement",s,"\nNew value",n,"\nOld value",u):2048&o.$flags$&&hn('The state/prop "'.concat(t,'" changed during "componentDidLoad()", this triggers extra re-renders, try to setup on "componentWillLoad()"'),"\nElement",s,"\nNew value",n,"\nOld value",u)),!le||l)){if(te&&r.$watchers$&&128&c){var f=r.$watchers$[t];f&&f.map((function(e){try{l[e](n,u,t)}catch(r){ln(r,s)}}))}if(W&&2===(18&c)){if(we&&l.componentShouldUpdate&&!1===l.componentShouldUpdate(n,u,t))return;Lt(o,!1)}}},$t=function(e,t,n){if(_&&t.$members$){te&&e.watchers&&(t.$watchers$=e.watchers);var r=Object.entries(t.$members$),a=e.prototype;if(r.map((function(e){var r=(0,d.Z)(e,2),i=r[0],o=(0,d.Z)(r[1],1)[0];(O||B)&&(31&o||(!le||2&n)&&32&o)?Object.defineProperty(a,i,{get:function(){return e=i,sn(this).$instanceValues$.get(e);var e},set:function(e){if(ie){var r=sn(this);0===(1&n)&&0===(8&r.$flags$)&&0!==(31&o)&&0===(1024&o)&&hn('@Prop() "'.concat(i,'" on <').concat(t.$tagName$,"> is immutable but was modified from within the component.\nMore information: https://stenciljs.com/docs/properties#prop-mutability"))}qt(this,i,e,t)},configurable:!0,enumerable:!0}):le&&A&&1&n&&64&o&&Object.defineProperty(a,i,{value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=sn(this);return r.$onInstancePromise$.then((function(){var e;return(e=r.$lazyInstance$)[i].apply(e,t)}))}})})),D&&(!le||1&n)){var i=new Map;a.attributeChangedCallback=function(e,t,n){var r=this;wn.jmp((function(){var t=i.get(e);if(r.hasOwnProperty(t))n=r[t],delete r[t];else if(a.hasOwnProperty(t)&&"number"===typeof r[t]&&r[t]==n)return;r[t]=(null!==n||"boolean"!==typeof r[t])&&n}))},e.observedAttributes=r.filter((function(e){var t=(0,d.Z)(e,2);t[0];return 15&t[1][0]})).map((function(e){var n=(0,d.Z)(e,2),r=n[0],a=n[1],o=a[1]||r;return i.set(o,r),L&&512&a[0]&&t.$attrsToReflect$.push([r,o]),o}))}}return e},Kt=function(){var e=(0,l.Z)((0,c.Z)().mark((function e(t,r,a,i,o){var s,u,l,d,f,h,p;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(le||se||V)||0!==(32&r.$flags$)){e.next=37;break}if(!le&&!ue){e.next=22;break}if(r.$flags$|=32,!(o=vn(a,r,i)).then){e.next=10;break}return s=ze("st:load:".concat(a.$tagName$,":").concat(r.$modeName$),"[Stencil] Load module for <".concat(a.$tagName$,">")),e.next=8,o;case 8:o=e.sent,s();case 10:if(!ie&&!ae||o){e.next=12;break}throw new Error('Constructor for "'.concat(a.$tagName$,"#").concat(r.$modeName$,'" was not found'));case 12:_&&!o.isProxied&&(te&&(a.$watchers$=o.watchers),$t(o,a,2),o.isProxied=!0),u=Pe("createInstance",a.$tagName$),_&&(r.$flags$|=8);try{new o(r)}catch(c){ln(c)}_&&(r.$flags$&=-9),te&&(r.$flags$|=128),u(),Xt(r.$lazyInstance$),e.next=25;break;case 22:o=t.constructor,r.$flags$|=32,customElements.whenDefined(a.$tagName$).then((function(){return r.$flags$|=128}));case 25:if(!V||!o.style){e.next=37;break}if(l=o.style,R&&"string"!==typeof l&&(l=l[r.$modeName$=rt(t)],se&&r.$modeName$&&t.setAttribute("s-mode",r.$modeName$)),d=ft(a,r.$modeName$),mn.has(d)){e.next=37;break}if(f=Pe("registerStyles",a.$tagName$),!(!se&&M&&ve&&8&a.$flags$)){e.next=35;break}return e.next=34,n.e(738).then(n.bind(n,738)).then((function(e){return e.scopeCss(l,d,!1)}));case 34:l=e.sent;case 35:ct(d,l,!!(1&a.$flags$)),f();case 37:h=r.$ancestorComponent$,p=function(){return Lt(r,!0)},Se&&h&&h["s-rc"]?h["s-rc"].push(p):p();case 40:case"end":return e.stop()}}),e)})));return function(t,n,r,a,i){return e.apply(this,arguments)}}(),Xt=function(e){le&&w&&Ut(e,"connectedCallback")},Yt=function(e){if(0===(1&wn.$flags$)){var t=sn(e),n=t.$cmpMeta$,r=Pe("connectedCallback",n.$tagName$);if(C&&tn(e,t,n.$listeners$,!0),1&t.$flags$)tn(e,t,n.$listeners$,!1),Xt(t.$lazyInstance$);else{var a;if(t.$flags$|=1,ue&&(a=e.getAttribute(Be))){if(M&&In&&1&n.$flags$){var i=R?lt(e.shadowRoot,n,e.getAttribute("s-mode")):lt(e.shadowRoot,n);e.classList.remove(i+"-h",i+"-s")}!function(e,t,n,r){var a=Pe("hydrateClient",t),i=e.shadowRoot,o=[],s=M&&i?[]:null,u=r.$vnode$=$e(t,null);wn.$orgLocNodes$||nt(bn.body,wn.$orgLocNodes$=new Map),e[Be]=n,e.removeAttribute(Be),tt(u,o,[],s,e,e,n),o.map((function(e){var n=e.$hostId$+"."+e.$nodeId$,r=wn.$orgLocNodes$.get(n),a=e.$elm$;r&&In&&""===r["s-en"]&&r.parentNode.insertBefore(a,r.nextSibling),i||(a["s-hn"]=t,r&&(a["s-ol"]=r,a["s-ol"]["s-nr"]=a)),wn.$orgLocNodes$.delete(n)})),M&&i&&s.map((function(e){e&&i.appendChild(e)})),a()}(e,n.$tagName$,a,t)}if(fe&&!a&&(se||(P||M)&&12&n.$flags$)&&Qt(e),Se)for(var o=e;o=o.parentNode||o.host;)if(ue&&1===o.nodeType&&o.hasAttribute("s-id")&&o["s-p"]||o["s-p"]){Ot(t,t.$ancestorComponent$=o);break}O&&!se&&n.$members$&&Object.entries(n.$members$).map((function(t){var n=(0,d.Z)(t,2),r=n[0];if(31&(0,d.Z)(n[1],1)[0]&&e.hasOwnProperty(r)){var a=e[r];delete e[r],e[r]=a}})),Ie?Dn((function(){return Kt(e,t,n)})):Kt(e,t,n)}r()}},Qt=function(e){var t=e["s-cr"]=bn.createComment(ae?"content-ref (host=".concat(e.localName,")"):"");t["s-cn"]=!0,e.insertBefore(t,e.firstChild)},Jt=function(e){if(0===(1&wn.$flags$)){var t=sn(e),n=le?t.$lazyInstance$:e;S&&t.$rmListeners$&&(t.$rmListeners$.map((function(e){return e()})),t.$rmListeners$=void 0),be&&wn.$cssShim$&&wn.$cssShim$.removeHost(e),le&&x&&Ut(n,"disconnectedCallback"),v&&Ut(n,"componentDidUnload")}},en=function(e,t){var n={$flags$:t[0],$tagName$:t[1]};_&&(n.$members$=t[2]),S&&(n.$listeners$=t[3]),te&&(n.$watchers$=e.$watchers$),L&&(n.$attrsToReflect$=[]),M&&!In&&1&n.$flags$&&(n.$flags$|=8);var r=e.prototype.connectedCallback,a=e.prototype.disconnectedCallback;return Object.assign(e.prototype,{__registerHost:function(){un(this,n)},connectedCallback:function(){Yt(this),w&&r&&r.call(this)},disconnectedCallback:function(){Jt(this),x&&a&&a.call(this)},__attachShadow:function(){In?xe?this.attachShadow({mode:"open",delegatesFocus:!!(16&n.$flags$)}):this.attachShadow({mode:"open"}):this.shadowRoot=this}}),e.is=n.$tagName$,$t(e,n,3)},tn=function(e,t,n,r){S&&n&&(C&&(n=r?n.filter((function(e){return 32&(0,d.Z)(e,1)[0]})):n.filter((function(e){return!(32&(0,d.Z)(e,1)[0])}))),n.map((function(n){var r=(0,d.Z)(n,3),a=r[0],i=r[1],o=r[2],s=Z?rn(e,a):e,u=nn(t,o),c=an(a);wn.ael(s,i,u,c),(t.$rmListeners$=t.$rmListeners$||[]).push((function(){return wn.rel(s,i,u,c)}))})))},nn=function(e,t){return function(n){try{le?256&e.$flags$?e.$lazyInstance$[t](n):(e.$queuedListeners$=e.$queuedListeners$||[]).push([t,n]):e.$hostElement$[t](n)}catch(r){ln(r)}}},rn=function(e,t){return E&&4&t?bn:T&&8&t?yn:N&&16&t?bn.body:C&&32&t?e.parentElement:e},an=function(e){return Sn?{passive:0!==(1&e),capture:0!==(2&e)}:0!==(2&e)},on=new WeakMap,sn=function(e){return on.get(e)},un=function(e,t){var n={$flags$:0,$hostElement$:e,$cmpMeta$:t,$instanceValues$:new Map};return ie&&(n.$renderCount$=0),A&&le&&(n.$onInstancePromise$=new Promise((function(e){return n.$onInstanceResolve$=e}))),Se&&(n.$onReadyPromise$=new Promise((function(e){return n.$onReadyResolve$=e})),e["s-p"]=[],e["s-rc"]=[]),tn(e,n,t.$listeners$,!1),on.set(e,n)},cn=function(e,t){return t in e},ln=function(e,t){return(o||console.error)(e,t)},dn=oe?["STENCIL:"]:["%cstencil","color: white;background:#4c47ff;font-weight: bold; font-size:10px; padding:2px 6px; border-radius: 5px"],fn=function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=console).error.apply(e,dn.concat(n))},hn=function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=console).warn.apply(e,dn.concat(n))},pn=new Map,vn=function(e,t,r){var a=e.$tagName$.replace(/-/g,"_"),i=e.$lazyBundleId$;if(!ie||"string"===typeof i){var o=!re&&pn.get(i);return o?o[a]:n(6031)("./".concat(i,".entry.js").concat(re&&r?"?s-hmr="+r:"")).then((function(e){return re||pn.set(i,e),e[a]}),ln)}fn("Trying to lazily load component <".concat(e.$tagName$,'> with style mode "').concat(t.$modeName$,'", but it does not exist.'))},mn=new Map,gn=[],yn="undefined"!==typeof window?window:{},bn=(be&&yn.CSS,yn.document||{head:{}}),kn=yn.HTMLElement||function(){return(0,u.Z)((function e(){(0,s.Z)(this,e)}))}(),wn={$flags$:0,$resourcesUrl$:"",jmp:function(e){return e()},raf:function(e){return requestAnimationFrame(e)},ael:function(e,t,n,r){return e.addEventListener(t,n,r)},rel:function(e,t,n,r){return e.removeEventListener(t,n,r)},ce:function(e,t){return new CustomEvent(e,t)}},xn=function(e){Object.assign(wn,e)},In=!ve||!M||function(){return(bn.head.attachShadow+"").indexOf("[native")>-1}(),Sn=function(){var e=!1;try{bn.addEventListener("e",null,Object.defineProperty({},"passive",{get:function(){e=!0}}))}catch(t){}return e}(),Tn=!!ke&&function(){try{return new CSSStyleSheet,"function"===typeof(new CSSStyleSheet).replaceSync}catch(e){}return!1}(),En=[],Nn=[],Cn=[],Zn=function(e,t){return function(n){e.push(n),Oe||(Oe=!0,t&&4&wn.$flags$?Dn(Rn):wn.raf(Rn))}},_n=function(e){for(var t=0;t<e.length;t++)try{e[t](performance.now())}catch(n){ln(n)}e.length=0},An=function(e,t){for(var n=0,r=0;n<e.length&&(r=performance.now())<t;)try{e[n++](r)}catch(a){ln(a)}n===e.length?e.length=0:0!==n&&e.splice(0,n)},Rn=function e(){if(Te&&De++,_n(En),Te){var t=2===(6&wn.$flags$)?performance.now()+14*Math.ceil(.1*De):1/0;An(Nn,t),An(Cn,t),Nn.length>0&&(Cn.push.apply(Cn,Nn),Nn.length=0),(Oe=En.length+Nn.length+Cn.length>0)?wn.raf(e):De=0}else _n(Nn),(Oe=En.length>0)&&wn.raf(e)},Dn=function(e){return Promise.resolve(t).then(e);var t},On=Zn(En,!1),Ln=Zn(Nn,!0)},4569:function(e,t,n){e.exports=n(8036)},3381:function(e,t,n){"use strict";var r=n(3589),a=n(7297),i=n(9301),o=n(9774),s=n(1804),u=n(9145),c=n(5411),l=n(6467),d=n(221),f=n(9346);e.exports=function(e){return new Promise((function(t,n){var h,p=e.data,v=e.headers,m=e.responseType;function g(){e.cancelToken&&e.cancelToken.unsubscribe(h),e.signal&&e.signal.removeEventListener("abort",h)}r.isFormData(p)&&delete v["Content-Type"];var y=new XMLHttpRequest;if(e.auth){var b=e.auth.username||"",k=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";v.Authorization="Basic "+btoa(b+":"+k)}var w=s(e.baseURL,e.url);function x(){if(y){var r="getAllResponseHeaders"in y?u(y.getAllResponseHeaders()):null,i={data:m&&"text"!==m&&"json"!==m?y.response:y.responseText,status:y.status,statusText:y.statusText,headers:r,config:e,request:y};a((function(e){t(e),g()}),(function(e){n(e),g()}),i),y=null}}if(y.open(e.method.toUpperCase(),o(w,e.params,e.paramsSerializer),!0),y.timeout=e.timeout,"onloadend"in y?y.onloadend=x:y.onreadystatechange=function(){y&&4===y.readyState&&(0!==y.status||y.responseURL&&0===y.responseURL.indexOf("file:"))&&setTimeout(x)},y.onabort=function(){y&&(n(l("Request aborted",e,"ECONNABORTED",y)),y=null)},y.onerror=function(){n(l("Network Error",e,null,y)),y=null},y.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",r=e.transitional||d.transitional;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(l(t,e,r.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",y)),y=null},r.isStandardBrowserEnv()){var I=(e.withCredentials||c(w))&&e.xsrfCookieName?i.read(e.xsrfCookieName):void 0;I&&(v[e.xsrfHeaderName]=I)}"setRequestHeader"in y&&r.forEach(v,(function(e,t){"undefined"===typeof p&&"content-type"===t.toLowerCase()?delete v[t]:y.setRequestHeader(t,e)})),r.isUndefined(e.withCredentials)||(y.withCredentials=!!e.withCredentials),m&&"json"!==m&&(y.responseType=e.responseType),"function"===typeof e.onDownloadProgress&&y.addEventListener("progress",e.onDownloadProgress),"function"===typeof e.onUploadProgress&&y.upload&&y.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(h=function(e){y&&(n(!e||e&&e.type?new f("canceled"):e),y.abort(),y=null)},e.cancelToken&&e.cancelToken.subscribe(h),e.signal&&(e.signal.aborted?h():e.signal.addEventListener("abort",h))),p||(p=null),y.send(p)}))}},8036:function(e,t,n){"use strict";var r=n(3589),a=n(4049),i=n(3773),o=n(777);var s=function e(t){var n=new i(t),s=a(i.prototype.request,n);return r.extend(s,i.prototype,n),r.extend(s,n),s.create=function(n){return e(o(t,n))},s}(n(221));s.Axios=i,s.Cancel=n(9346),s.CancelToken=n(6857),s.isCancel=n(5517),s.VERSION=n(7600).version,s.all=function(e){return Promise.all(e)},s.spread=n(8089),s.isAxiosError=n(9580),e.exports=s,e.exports.default=s},9346:function(e){"use strict";function t(e){this.message=e}t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,e.exports=t},6857:function(e,t,n){"use strict";var r=n(9346);function a(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;this.promise.then((function(e){if(n._listeners){var t,r=n._listeners.length;for(t=0;t<r;t++)n._listeners[t](e);n._listeners=null}})),this.promise.then=function(e){var t,r=new Promise((function(e){n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e){n.reason||(n.reason=new r(e),t(n.reason))}))}a.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},a.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},a.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},a.source=function(){var e;return{token:new a((function(t){e=t})),cancel:e}},e.exports=a},5517:function(e){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},3773:function(e,t,n){"use strict";var r=n(3589),a=n(9774),i=n(7470),o=n(2733),s=n(777),u=n(7835),c=u.validators;function l(e){this.defaults=e,this.interceptors={request:new i,response:new i}}l.prototype.request=function(e){"string"===typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=s(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=e.transitional;void 0!==t&&u.assertOptions(t,{silentJSONParsing:c.transitional(c.boolean),forcedJSONParsing:c.transitional(c.boolean),clarifyTimeoutError:c.transitional(c.boolean)},!1);var n=[],r=!0;this.interceptors.request.forEach((function(t){"function"===typeof t.runWhen&&!1===t.runWhen(e)||(r=r&&t.synchronous,n.unshift(t.fulfilled,t.rejected))}));var a,i=[];if(this.interceptors.response.forEach((function(e){i.push(e.fulfilled,e.rejected)})),!r){var l=[o,void 0];for(Array.prototype.unshift.apply(l,n),l=l.concat(i),a=Promise.resolve(e);l.length;)a=a.then(l.shift(),l.shift());return a}for(var d=e;n.length;){var f=n.shift(),h=n.shift();try{d=f(d)}catch(p){h(p);break}}try{a=o(d)}catch(p){return Promise.reject(p)}for(;i.length;)a=a.then(i.shift(),i.shift());return a},l.prototype.getUri=function(e){return e=s(this.defaults,e),a(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],(function(e){l.prototype[e]=function(t,n){return this.request(s(n||{},{method:e,url:t,data:(n||{}).data}))}})),r.forEach(["post","put","patch"],(function(e){l.prototype[e]=function(t,n,r){return this.request(s(r||{},{method:e,url:t,data:n}))}})),e.exports=l},7470:function(e,t,n){"use strict";var r=n(3589);function a(){this.handlers=[]}a.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},a.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},a.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=a},1804:function(e,t,n){"use strict";var r=n(4044),a=n(9549);e.exports=function(e,t){return e&&!r(t)?a(e,t):t}},6467:function(e,t,n){"use strict";var r=n(6460);e.exports=function(e,t,n,a,i){var o=new Error(e);return r(o,t,n,a,i)}},2733:function(e,t,n){"use strict";var r=n(3589),a=n(2693),i=n(5517),o=n(221),s=n(9346);function u(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new s("canceled")}e.exports=function(e){return u(e),e.headers=e.headers||{},e.data=a.call(e,e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||o.adapter)(e).then((function(t){return u(e),t.data=a.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return i(t)||(u(e),t&&t.response&&(t.response.data=a.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},6460:function(e){"use strict";e.exports=function(e,t,n,r,a){return e.config=t,n&&(e.code=n),e.request=r,e.response=a,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e}},777:function(e,t,n){"use strict";var r=n(3589);e.exports=function(e,t){t=t||{};var n={};function a(e,t){return r.isPlainObject(e)&&r.isPlainObject(t)?r.merge(e,t):r.isPlainObject(t)?r.merge({},t):r.isArray(t)?t.slice():t}function i(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:a(void 0,e[n]):a(e[n],t[n])}function o(e){if(!r.isUndefined(t[e]))return a(void 0,t[e])}function s(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:a(void 0,e[n]):a(void 0,t[n])}function u(n){return n in t?a(e[n],t[n]):n in e?a(void 0,e[n]):void 0}var c={url:o,method:o,data:o,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:u};return r.forEach(Object.keys(e).concat(Object.keys(t)),(function(e){var t=c[e]||i,a=t(e);r.isUndefined(a)&&t!==u||(n[e]=a)})),n}},7297:function(e,t,n){"use strict";var r=n(6467);e.exports=function(e,t,n){var a=n.config.validateStatus;n.status&&a&&!a(n.status)?t(r("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},2693:function(e,t,n){"use strict";var r=n(3589),a=n(221);e.exports=function(e,t,n){var i=this||a;return r.forEach(n,(function(n){e=n.call(i,e,t)})),e}},221:function(e,t,n){"use strict";var r=n(3589),a=n(4341),i=n(6460),o={"Content-Type":"application/x-www-form-urlencoded"};function s(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var u={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:function(){var e;return("undefined"!==typeof XMLHttpRequest||"undefined"!==typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(e=n(3381)),e}(),transformRequest:[function(e,t){return a(t,"Accept"),a(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e)?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(s(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):r.isObject(e)||t&&"application/json"===t["Content-Type"]?(s(t,"application/json"),function(e,t,n){if(r.isString(e))try{return(t||JSON.parse)(e),r.trim(e)}catch(a){if("SyntaxError"!==a.name)throw a}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||u.transitional,n=t&&t.silentJSONParsing,a=t&&t.forcedJSONParsing,o=!n&&"json"===this.responseType;if(o||a&&r.isString(e)&&e.length)try{return JSON.parse(e)}catch(s){if(o){if("SyntaxError"===s.name)throw i(s,this,"E_JSON_PARSE");throw s}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],(function(e){u.headers[e]={}})),r.forEach(["post","put","patch"],(function(e){u.headers[e]=r.merge(o)})),e.exports=u},7600:function(e){e.exports={version:"0.24.0"}},4049:function(e){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},9774:function(e,t,n){"use strict";var r=n(3589);function a(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var i;if(n)i=n(t);else if(r.isURLSearchParams(t))i=t.toString();else{var o=[];r.forEach(t,(function(e,t){null!==e&&"undefined"!==typeof e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),o.push(a(t)+"="+a(e))})))})),i=o.join("&")}if(i){var s=e.indexOf("#");-1!==s&&(e=e.slice(0,s)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}},9549:function(e){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},9301:function(e,t,n){"use strict";var r=n(3589);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,a,i,o){var s=[];s.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),r.isString(a)&&s.push("path="+a),r.isString(i)&&s.push("domain="+i),!0===o&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},4044:function(e){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},9580:function(e){"use strict";e.exports=function(e){return"object"===typeof e&&!0===e.isAxiosError}},5411:function(e,t,n){"use strict";var r=n(3589);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function a(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=a(window.location.href),function(t){var n=r.isString(t)?a(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},4341:function(e,t,n){"use strict";var r=n(3589);e.exports=function(e,t){r.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}},9145:function(e,t,n){"use strict";var r=n(3589),a=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,i,o={};return e?(r.forEach(e.split("\n"),(function(e){if(i=e.indexOf(":"),t=r.trim(e.substr(0,i)).toLowerCase(),n=r.trim(e.substr(i+1)),t){if(o[t]&&a.indexOf(t)>=0)return;o[t]="set-cookie"===t?(o[t]?o[t]:[]).concat([n]):o[t]?o[t]+", "+n:n}})),o):o}},8089:function(e){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},7835:function(e,t,n){"use strict";var r=n(7600).version,a={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){a[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var i={};a.transitional=function(e,t,n){function a(e,t){return"[Axios v"+r+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,r,o){if(!1===e)throw new Error(a(r," has been removed"+(t?" in "+t:"")));return t&&!i[r]&&(i[r]=!0,console.warn(a(r," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,r,o)}},e.exports={assertOptions:function(e,t,n){if("object"!==typeof e)throw new TypeError("options must be an object");for(var r=Object.keys(e),a=r.length;a-- >0;){var i=r[a],o=t[i];if(o){var s=e[i],u=void 0===s||o(s,i,e);if(!0!==u)throw new TypeError("option "+i+" must be "+u)}else if(!0!==n)throw Error("Unknown option "+i)}},validators:a}},3589:function(e,t,n){"use strict";var r=n(4049),a=Object.prototype.toString;function i(e){return"[object Array]"===a.call(e)}function o(e){return"undefined"===typeof e}function s(e){return null!==e&&"object"===typeof e}function u(e){if("[object Object]"!==a.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function c(e){return"[object Function]"===a.call(e)}function l(e,t){if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),i(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.call(null,e[a],a,e)}e.exports={isArray:i,isArrayBuffer:function(e){return"[object ArrayBuffer]"===a.call(e)},isBuffer:function(e){return null!==e&&!o(e)&&null!==e.constructor&&!o(e.constructor)&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!==typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"===typeof e},isNumber:function(e){return"number"===typeof e},isObject:s,isPlainObject:u,isUndefined:o,isDate:function(e){return"[object Date]"===a.call(e)},isFile:function(e){return"[object File]"===a.call(e)},isBlob:function(e){return"[object Blob]"===a.call(e)},isFunction:c,isStream:function(e){return s(e)&&c(e.pipe)},isURLSearchParams:function(e){return"undefined"!==typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"===typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!==typeof window&&"undefined"!==typeof document)},forEach:l,merge:function e(){var t={};function n(n,r){u(t[r])&&u(n)?t[r]=e(t[r],n):u(n)?t[r]=e({},n):i(n)?t[r]=n.slice():t[r]=n}for(var r=0,a=arguments.length;r<a;r++)l(arguments[r],n);return t},extend:function(e,t,n){return l(t,(function(t,a){e[a]=n&&"function"===typeof t?r(t,n):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}}},2110:function(e,t,n){"use strict";var r=n(7441),a={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},i={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function u(e){return r.isMemo(e)?o:s[e.$$typeof]||a}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=o;var c=Object.defineProperty,l=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,f=Object.getOwnPropertyDescriptor,h=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var a=h(n);a&&a!==p&&e(t,a,r)}var o=l(n);d&&(o=o.concat(d(n)));for(var s=u(t),v=u(n),m=0;m<o.length;++m){var g=o[m];if(!i[g]&&(!r||!r[g])&&(!v||!v[g])&&(!s||!s[g])){var y=f(n,g);try{c(t,g,y)}catch(b){}}}}return t}},1842:function(e,t,n){e.exports=function e(t,n,r){function a(o,s){if(!n[o]){if(!t[o]){if(i)return i(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[o]={exports:{}};t[o][0].call(c.exports,(function(e){var n=t[o][1][e];return a(n||e)}),c,c.exports,e,t,n,r)}return n[o].exports}for(var i=void 0,o=0;o<r.length;o++)a(r[o]);return a}({1:[function(e,t,r){(function(e){"use strict";var n,r,a=e.MutationObserver||e.WebKitMutationObserver;if(a){var i=0,o=new a(l),s=e.document.createTextNode("");o.observe(s,{characterData:!0}),n=function(){s.data=i=++i%2}}else if(e.setImmediate||"undefined"===typeof e.MessageChannel)n="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){l(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(l,0)};else{var u=new e.MessageChannel;u.port1.onmessage=l,n=function(){u.port2.postMessage(0)}}var c=[];function l(){var e,t;r=!0;for(var n=c.length;n;){for(t=c,c=[],e=-1;++e<n;)t[e]();n=c.length}r=!1}function d(e){1!==c.push(e)||r||n()}t.exports=d}).call(this,"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],2:[function(e,t,n){"use strict";var r=e(1);function a(){}var i={},o=["REJECTED"],s=["FULFILLED"],u=["PENDING"];function c(e){if("function"!==typeof e)throw new TypeError("resolver must be a function");this.state=u,this.queue=[],this.outcome=void 0,e!==a&&h(this,e)}function l(e,t,n){this.promise=e,"function"===typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"===typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function d(e,t,n){r((function(){var r;try{r=t(n)}catch(a){return i.reject(e,a)}r===e?i.reject(e,new TypeError("Cannot resolve promise with itself")):i.resolve(e,r)}))}function f(e){var t=e&&e.then;if(e&&("object"===typeof e||"function"===typeof e)&&"function"===typeof t)return function(){t.apply(e,arguments)}}function h(e,t){var n=!1;function r(t){n||(n=!0,i.reject(e,t))}function a(t){n||(n=!0,i.resolve(e,t))}function o(){t(a,r)}var s=p(o);"error"===s.status&&r(s.value)}function p(e,t){var n={};try{n.value=e(t),n.status="success"}catch(r){n.status="error",n.value=r}return n}function v(e){return e instanceof this?e:i.resolve(new this(a),e)}function m(e){var t=new this(a);return i.reject(t,e)}function g(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var o=new Array(n),s=0,u=-1,c=new this(a);++u<n;)l(e[u],u);return c;function l(e,a){function u(e){o[a]=e,++s!==n||r||(r=!0,i.resolve(c,o))}t.resolve(e).then(u,(function(e){r||(r=!0,i.reject(c,e))}))}}function y(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var o=-1,s=new this(a);++o<n;)u(e[o]);return s;function u(e){t.resolve(e).then((function(e){r||(r=!0,i.resolve(s,e))}),(function(e){r||(r=!0,i.reject(s,e))}))}}t.exports=c,c.prototype.catch=function(e){return this.then(null,e)},c.prototype.then=function(e,t){if("function"!==typeof e&&this.state===s||"function"!==typeof t&&this.state===o)return this;var n=new this.constructor(a);return this.state!==u?d(n,this.state===s?e:t,this.outcome):this.queue.push(new l(n,e,t)),n},l.prototype.callFulfilled=function(e){i.resolve(this.promise,e)},l.prototype.otherCallFulfilled=function(e){d(this.promise,this.onFulfilled,e)},l.prototype.callRejected=function(e){i.reject(this.promise,e)},l.prototype.otherCallRejected=function(e){d(this.promise,this.onRejected,e)},i.resolve=function(e,t){var n=p(f,t);if("error"===n.status)return i.reject(e,n.value);var r=n.value;if(r)h(e,r);else{e.state=s,e.outcome=t;for(var a=-1,o=e.queue.length;++a<o;)e.queue[a].callFulfilled(t)}return e},i.reject=function(e,t){e.state=o,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e},c.resolve=v,c.reject=m,c.all=g,c.race=y},{1:1}],3:[function(e,t,r){(function(t){"use strict";"function"!==typeof t.Promise&&(t.Promise=e(2))}).call(this,"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{2:2}],4:[function(e,t,n){"use strict";var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(){try{if("undefined"!==typeof indexedDB)return indexedDB;if("undefined"!==typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!==typeof mozIndexedDB)return mozIndexedDB;if("undefined"!==typeof OIndexedDB)return OIndexedDB;if("undefined"!==typeof msIndexedDB)return msIndexedDB}catch(e){return}}var o=i();function s(){try{if(!o||!o.open)return!1;var e="undefined"!==typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"===typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||t)&&"undefined"!==typeof indexedDB&&"undefined"!==typeof IDBKeyRange}catch(n){return!1}}function u(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(a){if("TypeError"!==a.name)throw a;for(var n=new("undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof MSBlobBuilder?MSBlobBuilder:"undefined"!==typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),r=0;r<e.length;r+=1)n.append(e[r]);return n.getBlob(t.type)}}"undefined"===typeof Promise&&e(3);var c=Promise;function l(e,t){t&&e.then((function(e){t(null,e)}),(function(e){t(e)}))}function d(e,t,n){"function"===typeof t&&e.then(t),"function"===typeof n&&e.catch(n)}function f(e){return"string"!==typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function h(){if(arguments.length&&"function"===typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var p="local-forage-detect-blob-support",v=void 0,m={},g=Object.prototype.toString,y="readonly",b="readwrite";function k(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),a=0;a<t;a++)r[a]=e.charCodeAt(a);return n}function w(e){return new c((function(t){var n=e.transaction(p,b),r=u([""]);n.objectStore(p).put(r,"key"),n.onabort=function(e){e.preventDefault(),e.stopPropagation(),t(!1)},n.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);t(n||!e||parseInt(e[1],10)>=43)}})).catch((function(){return!1}))}function x(e){return"boolean"===typeof v?c.resolve(v):w(e).then((function(e){return v=e}))}function I(e){var t=m[e.name],n={};n.promise=new c((function(e,t){n.resolve=e,n.reject=t})),t.deferredOperations.push(n),t.dbReady?t.dbReady=t.dbReady.then((function(){return n.promise})):t.dbReady=n.promise}function S(e){var t=m[e.name].deferredOperations.pop();if(t)return t.resolve(),t.promise}function T(e,t){var n=m[e.name].deferredOperations.pop();if(n)return n.reject(t),n.promise}function E(e,t){return new c((function(n,r){if(m[e.name]=m[e.name]||F(),e.db){if(!t)return n(e.db);I(e),e.db.close()}var a=[e.name];t&&a.push(e.version);var i=o.open.apply(o,a);t&&(i.onupgradeneeded=function(t){var n=i.result;try{n.createObjectStore(e.storeName),t.oldVersion<=1&&n.createObjectStore(p)}catch(r){if("ConstraintError"!==r.name)throw r;console.warn('The database "'+e.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+e.storeName+'" already exists.')}}),i.onerror=function(e){e.preventDefault(),r(i.error)},i.onsuccess=function(){var t=i.result;t.onversionchange=function(e){e.target.close()},n(t),S(e)}}))}function N(e){return E(e,!1)}function C(e){return E(e,!0)}function Z(e,t){if(!e.db)return!0;var n=!e.db.objectStoreNames.contains(e.storeName),r=e.version<e.db.version,a=e.version>e.db.version;if(r&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),a||n){if(n){var i=e.db.version+1;i>e.version&&(e.version=i)}return!0}return!1}function _(e){return new c((function(t,n){var r=new FileReader;r.onerror=n,r.onloadend=function(n){var r=btoa(n.target.result||"");t({__local_forage_encoded_blob:!0,data:r,type:e.type})},r.readAsBinaryString(e)}))}function A(e){return u([k(atob(e.data))],{type:e.type})}function R(e){return e&&e.__local_forage_encoded_blob}function D(e){var t=this,n=t._initReady().then((function(){var e=m[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady}));return d(n,e,e),n}function O(e){I(e);for(var t=m[e.name],n=t.forages,r=0;r<n.length;r++){var a=n[r];a._dbInfo.db&&(a._dbInfo.db.close(),a._dbInfo.db=null)}return e.db=null,N(e).then((function(t){return e.db=t,Z(e)?C(e):t})).then((function(r){e.db=t.db=r;for(var a=0;a<n.length;a++)n[a]._dbInfo.db=r})).catch((function(t){throw T(e,t),t}))}function L(e,t,n,r){void 0===r&&(r=1);try{var a=e.db.transaction(e.storeName,t);n(null,a)}catch(i){if(r>0&&(!e.db||"InvalidStateError"===i.name||"NotFoundError"===i.name))return c.resolve().then((function(){if(!e.db||"NotFoundError"===i.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),C(e)})).then((function(){return O(e).then((function(){L(e,t,n,r-1)}))})).catch(n);n(i)}}function F(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function M(e){var t=this,n={db:null};if(e)for(var r in e)n[r]=e[r];var a=m[n.name];a||(a=F(),m[n.name]=a),a.forages.push(t),t._initReady||(t._initReady=t.ready,t.ready=D);var i=[];function o(){return c.resolve()}for(var s=0;s<a.forages.length;s++){var u=a.forages[s];u!==t&&i.push(u._initReady().catch(o))}var l=a.forages.slice(0);return c.all(i).then((function(){return n.db=a.db,N(n)})).then((function(e){return n.db=e,Z(n,t._defaultConfig.version)?C(n):e})).then((function(e){n.db=a.db=e,t._dbInfo=n;for(var r=0;r<l.length;r++){var i=l[r];i!==t&&(i._dbInfo.db=n.db,i._dbInfo.version=n.version)}}))}function P(e,t){var n=this;e=f(e);var r=new c((function(t,r){n.ready().then((function(){L(n._dbInfo,y,(function(a,i){if(a)return r(a);try{var o=i.objectStore(n._dbInfo.storeName).get(e);o.onsuccess=function(){var e=o.result;void 0===e&&(e=null),R(e)&&(e=A(e)),t(e)},o.onerror=function(){r(o.error)}}catch(s){r(s)}}))})).catch(r)}));return l(r,t),r}function z(e,t){var n=this,r=new c((function(t,r){n.ready().then((function(){L(n._dbInfo,y,(function(a,i){if(a)return r(a);try{var o=i.objectStore(n._dbInfo.storeName).openCursor(),s=1;o.onsuccess=function(){var n=o.result;if(n){var r=n.value;R(r)&&(r=A(r));var a=e(r,n.key,s++);void 0!==a?t(a):n.continue()}else t()},o.onerror=function(){r(o.error)}}catch(u){r(u)}}))})).catch(r)}));return l(r,t),r}function B(e,t,n){var r=this;e=f(e);var a=new c((function(n,a){var i;r.ready().then((function(){return i=r._dbInfo,"[object Blob]"===g.call(t)?x(i.db).then((function(e){return e?t:_(t)})):t})).then((function(t){L(r._dbInfo,b,(function(i,o){if(i)return a(i);try{var s=o.objectStore(r._dbInfo.storeName);null===t&&(t=void 0);var u=s.put(t,e);o.oncomplete=function(){void 0===t&&(t=null),n(t)},o.onabort=o.onerror=function(){var e=u.error?u.error:u.transaction.error;a(e)}}catch(c){a(c)}}))})).catch(a)}));return l(a,n),a}function V(e,t){var n=this;e=f(e);var r=new c((function(t,r){n.ready().then((function(){L(n._dbInfo,b,(function(a,i){if(a)return r(a);try{var o=i.objectStore(n._dbInfo.storeName).delete(e);i.oncomplete=function(){t()},i.onerror=function(){r(o.error)},i.onabort=function(){var e=o.error?o.error:o.transaction.error;r(e)}}catch(s){r(s)}}))})).catch(r)}));return l(r,t),r}function U(e){var t=this,n=new c((function(e,n){t.ready().then((function(){L(t._dbInfo,b,(function(r,a){if(r)return n(r);try{var i=a.objectStore(t._dbInfo.storeName).clear();a.oncomplete=function(){e()},a.onabort=a.onerror=function(){var e=i.error?i.error:i.transaction.error;n(e)}}catch(o){n(o)}}))})).catch(n)}));return l(n,e),n}function W(e){var t=this,n=new c((function(e,n){t.ready().then((function(){L(t._dbInfo,y,(function(r,a){if(r)return n(r);try{var i=a.objectStore(t._dbInfo.storeName).count();i.onsuccess=function(){e(i.result)},i.onerror=function(){n(i.error)}}catch(o){n(o)}}))})).catch(n)}));return l(n,e),n}function j(e,t){var n=this,r=new c((function(t,r){e<0?t(null):n.ready().then((function(){L(n._dbInfo,y,(function(a,i){if(a)return r(a);try{var o=i.objectStore(n._dbInfo.storeName),s=!1,u=o.openKeyCursor();u.onsuccess=function(){var n=u.result;n?0===e||s?t(n.key):(s=!0,n.advance(e)):t(null)},u.onerror=function(){r(u.error)}}catch(c){r(c)}}))})).catch(r)}));return l(r,t),r}function G(e){var t=this,n=new c((function(e,n){t.ready().then((function(){L(t._dbInfo,y,(function(r,a){if(r)return n(r);try{var i=a.objectStore(t._dbInfo.storeName).openKeyCursor(),o=[];i.onsuccess=function(){var t=i.result;t?(o.push(t.key),t.continue()):e(o)},i.onerror=function(){n(i.error)}}catch(s){n(s)}}))})).catch(n)}));return l(n,e),n}function H(e,t){t=h.apply(this,arguments);var n=this.config();(e="function"!==typeof e&&e||{}).name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName);var r,a=this;if(e.name){var i=e.name===n.name&&a._dbInfo.db?c.resolve(a._dbInfo.db):N(e).then((function(t){var n=m[e.name],r=n.forages;n.db=t;for(var a=0;a<r.length;a++)r[a]._dbInfo.db=t;return t}));r=e.storeName?i.then((function(t){if(t.objectStoreNames.contains(e.storeName)){var n=t.version+1;I(e);var r=m[e.name],a=r.forages;t.close();for(var i=0;i<a.length;i++){var s=a[i];s._dbInfo.db=null,s._dbInfo.version=n}var u=new c((function(t,r){var a=o.open(e.name,n);a.onerror=function(e){a.result.close(),r(e)},a.onupgradeneeded=function(){a.result.deleteObjectStore(e.storeName)},a.onsuccess=function(){var e=a.result;e.close(),t(e)}}));return u.then((function(e){r.db=e;for(var t=0;t<a.length;t++){var n=a[t];n._dbInfo.db=e,S(n._dbInfo)}})).catch((function(t){throw(T(e,t)||c.resolve()).catch((function(){})),t}))}})):i.then((function(t){I(e);var n=m[e.name],r=n.forages;t.close();for(var a=0;a<r.length;a++)r[a]._dbInfo.db=null;var i=new c((function(t,n){var r=o.deleteDatabase(e.name);r.onerror=function(){var e=r.result;e&&e.close(),n(r.error)},r.onblocked=function(){console.warn('dropInstance blocked for database "'+e.name+'" until all open connections are closed')},r.onsuccess=function(){var e=r.result;e&&e.close(),t(e)}}));return i.then((function(e){n.db=e;for(var t=0;t<r.length;t++)S(r[t]._dbInfo)})).catch((function(t){throw(T(e,t)||c.resolve()).catch((function(){})),t}))}))}else r=c.reject("Invalid arguments");return l(r,t),r}var q={_driver:"asyncStorage",_initStorage:M,_support:s(),iterate:z,getItem:P,setItem:B,removeItem:V,clear:U,length:W,key:j,keys:G,dropInstance:H};function $(){return"function"===typeof openDatabase}var K="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",X="~~local_forage_type~",Y=/^~~local_forage_type~([^~]+)~/,Q="__lfsc__:",J=Q.length,ee="arbf",te="blob",ne="si08",re="ui08",ae="uic8",ie="si16",oe="si32",se="ur16",ue="ui32",ce="fl32",le="fl64",de=J+ee.length,fe=Object.prototype.toString;function he(e){var t,n,r,a,i,o=.75*e.length,s=e.length,u=0;"="===e[e.length-1]&&(o--,"="===e[e.length-2]&&o--);var c=new ArrayBuffer(o),l=new Uint8Array(c);for(t=0;t<s;t+=4)n=K.indexOf(e[t]),r=K.indexOf(e[t+1]),a=K.indexOf(e[t+2]),i=K.indexOf(e[t+3]),l[u++]=n<<2|r>>4,l[u++]=(15&r)<<4|a>>2,l[u++]=(3&a)<<6|63&i;return c}function pe(e){var t,n=new Uint8Array(e),r="";for(t=0;t<n.length;t+=3)r+=K[n[t]>>2],r+=K[(3&n[t])<<4|n[t+1]>>4],r+=K[(15&n[t+1])<<2|n[t+2]>>6],r+=K[63&n[t+2]];return n.length%3===2?r=r.substring(0,r.length-1)+"=":n.length%3===1&&(r=r.substring(0,r.length-2)+"=="),r}function ve(e,t){var n="";if(e&&(n=fe.call(e)),e&&("[object ArrayBuffer]"===n||e.buffer&&"[object ArrayBuffer]"===fe.call(e.buffer))){var r,a=Q;e instanceof ArrayBuffer?(r=e,a+=ee):(r=e.buffer,"[object Int8Array]"===n?a+=ne:"[object Uint8Array]"===n?a+=re:"[object Uint8ClampedArray]"===n?a+=ae:"[object Int16Array]"===n?a+=ie:"[object Uint16Array]"===n?a+=se:"[object Int32Array]"===n?a+=oe:"[object Uint32Array]"===n?a+=ue:"[object Float32Array]"===n?a+=ce:"[object Float64Array]"===n?a+=le:t(new Error("Failed to get type for BinaryArray"))),t(a+pe(r))}else if("[object Blob]"===n){var i=new FileReader;i.onload=function(){var n=X+e.type+"~"+pe(this.result);t(Q+te+n)},i.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(o){console.error("Couldn't convert value into a JSON string: ",e),t(null,o)}}function me(e){if(e.substring(0,J)!==Q)return JSON.parse(e);var t,n=e.substring(de),r=e.substring(J,de);if(r===te&&Y.test(n)){var a=n.match(Y);t=a[1],n=n.substring(a[0].length)}var i=he(n);switch(r){case ee:return i;case te:return u([i],{type:t});case ne:return new Int8Array(i);case re:return new Uint8Array(i);case ae:return new Uint8ClampedArray(i);case ie:return new Int16Array(i);case se:return new Uint16Array(i);case oe:return new Int32Array(i);case ue:return new Uint32Array(i);case ce:return new Float32Array(i);case le:return new Float64Array(i);default:throw new Error("Unkown type: "+r)}}var ge={serialize:ve,deserialize:me,stringToBuffer:he,bufferToString:pe};function ye(e,t,n,r){e.executeSql("CREATE TABLE IF NOT EXISTS "+t.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],n,r)}function be(e){var t=this,n={db:null};if(e)for(var r in e)n[r]="string"!==typeof e[r]?e[r].toString():e[r];var a=new c((function(e,r){try{n.db=openDatabase(n.name,String(n.version),n.description,n.size)}catch(a){return r(a)}n.db.transaction((function(a){ye(a,n,(function(){t._dbInfo=n,e()}),(function(e,t){r(t)}))}),r)}));return n.serializer=ge,a}function ke(e,t,n,r,a,i){e.executeSql(n,r,a,(function(e,o){o.code===o.SYNTAX_ERR?e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[t.storeName],(function(e,s){s.rows.length?i(e,o):ye(e,t,(function(){e.executeSql(n,r,a,i)}),i)}),i):i(e,o)}),i)}function we(e,t){var n=this;e=f(e);var r=new c((function(t,r){n.ready().then((function(){var a=n._dbInfo;a.db.transaction((function(n){ke(n,a,"SELECT * FROM "+a.storeName+" WHERE key = ? LIMIT 1",[e],(function(e,n){var r=n.rows.length?n.rows.item(0).value:null;r&&(r=a.serializer.deserialize(r)),t(r)}),(function(e,t){r(t)}))}))})).catch(r)}));return l(r,t),r}function xe(e,t){var n=this,r=new c((function(t,r){n.ready().then((function(){var a=n._dbInfo;a.db.transaction((function(n){ke(n,a,"SELECT * FROM "+a.storeName,[],(function(n,r){for(var i=r.rows,o=i.length,s=0;s<o;s++){var u=i.item(s),c=u.value;if(c&&(c=a.serializer.deserialize(c)),void 0!==(c=e(c,u.key,s+1)))return void t(c)}t()}),(function(e,t){r(t)}))}))})).catch(r)}));return l(r,t),r}function Ie(e,t,n,r){var a=this;e=f(e);var i=new c((function(i,o){a.ready().then((function(){void 0===t&&(t=null);var s=t,u=a._dbInfo;u.serializer.serialize(t,(function(t,c){c?o(c):u.db.transaction((function(n){ke(n,u,"INSERT OR REPLACE INTO "+u.storeName+" (key, value) VALUES (?, ?)",[e,t],(function(){i(s)}),(function(e,t){o(t)}))}),(function(t){if(t.code===t.QUOTA_ERR){if(r>0)return void i(Ie.apply(a,[e,s,n,r-1]));o(t)}}))}))})).catch(o)}));return l(i,n),i}function Se(e,t,n){return Ie.apply(this,[e,t,n,1])}function Te(e,t){var n=this;e=f(e);var r=new c((function(t,r){n.ready().then((function(){var a=n._dbInfo;a.db.transaction((function(n){ke(n,a,"DELETE FROM "+a.storeName+" WHERE key = ?",[e],(function(){t()}),(function(e,t){r(t)}))}))})).catch(r)}));return l(r,t),r}function Ee(e){var t=this,n=new c((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){ke(t,r,"DELETE FROM "+r.storeName,[],(function(){e()}),(function(e,t){n(t)}))}))})).catch(n)}));return l(n,e),n}function Ne(e){var t=this,n=new c((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){ke(t,r,"SELECT COUNT(key) as c FROM "+r.storeName,[],(function(t,n){var r=n.rows.item(0).c;e(r)}),(function(e,t){n(t)}))}))})).catch(n)}));return l(n,e),n}function Ce(e,t){var n=this,r=new c((function(t,r){n.ready().then((function(){var a=n._dbInfo;a.db.transaction((function(n){ke(n,a,"SELECT key FROM "+a.storeName+" WHERE id = ? LIMIT 1",[e+1],(function(e,n){var r=n.rows.length?n.rows.item(0).key:null;t(r)}),(function(e,t){r(t)}))}))})).catch(r)}));return l(r,t),r}function Ze(e){var t=this,n=new c((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){ke(t,r,"SELECT key FROM "+r.storeName,[],(function(t,n){for(var r=[],a=0;a<n.rows.length;a++)r.push(n.rows.item(a).key);e(r)}),(function(e,t){n(t)}))}))})).catch(n)}));return l(n,e),n}function _e(e){return new c((function(t,n){e.transaction((function(r){r.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],(function(n,r){for(var a=[],i=0;i<r.rows.length;i++)a.push(r.rows.item(i).name);t({db:e,storeNames:a})}),(function(e,t){n(t)}))}),(function(e){n(e)}))}))}function Ae(e,t){t=h.apply(this,arguments);var n=this.config();(e="function"!==typeof e&&e||{}).name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName);var r,a=this;return l(r=e.name?new c((function(t){var r;r=e.name===n.name?a._dbInfo.db:openDatabase(e.name,"","",0),e.storeName?t({db:r,storeNames:[e.storeName]}):t(_e(r))})).then((function(e){return new c((function(t,n){e.db.transaction((function(r){function a(e){return new c((function(t,n){r.executeSql("DROP TABLE IF EXISTS "+e,[],(function(){t()}),(function(e,t){n(t)}))}))}for(var i=[],o=0,s=e.storeNames.length;o<s;o++)i.push(a(e.storeNames[o]));c.all(i).then((function(){t()})).catch((function(e){n(e)}))}),(function(e){n(e)}))}))})):c.reject("Invalid arguments"),t),r}var Re={_driver:"webSQLStorage",_initStorage:be,_support:$(),iterate:xe,getItem:we,setItem:Se,removeItem:Te,clear:Ee,length:Ne,key:Ce,keys:Ze,dropInstance:Ae};function De(){try{return"undefined"!==typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(e){return!1}}function Oe(e,t){var n=e.name+"/";return e.storeName!==t.storeName&&(n+=e.storeName+"/"),n}function Le(){var e="_localforage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch(t){return!0}}function Fe(){return!Le()||localStorage.length>0}function Me(e){var t=this,n={};if(e)for(var r in e)n[r]=e[r];return n.keyPrefix=Oe(e,t._defaultConfig),Fe()?(t._dbInfo=n,n.serializer=ge,c.resolve()):c.reject()}function Pe(e){var t=this,n=t.ready().then((function(){for(var e=t._dbInfo.keyPrefix,n=localStorage.length-1;n>=0;n--){var r=localStorage.key(n);0===r.indexOf(e)&&localStorage.removeItem(r)}}));return l(n,e),n}function ze(e,t){var n=this;e=f(e);var r=n.ready().then((function(){var t=n._dbInfo,r=localStorage.getItem(t.keyPrefix+e);return r&&(r=t.serializer.deserialize(r)),r}));return l(r,t),r}function Be(e,t){var n=this,r=n.ready().then((function(){for(var t=n._dbInfo,r=t.keyPrefix,a=r.length,i=localStorage.length,o=1,s=0;s<i;s++){var u=localStorage.key(s);if(0===u.indexOf(r)){var c=localStorage.getItem(u);if(c&&(c=t.serializer.deserialize(c)),void 0!==(c=e(c,u.substring(a),o++)))return c}}}));return l(r,t),r}function Ve(e,t){var n=this,r=n.ready().then((function(){var t,r=n._dbInfo;try{t=localStorage.key(e)}catch(a){t=null}return t&&(t=t.substring(r.keyPrefix.length)),t}));return l(r,t),r}function Ue(e){var t=this,n=t.ready().then((function(){for(var e=t._dbInfo,n=localStorage.length,r=[],a=0;a<n;a++){var i=localStorage.key(a);0===i.indexOf(e.keyPrefix)&&r.push(i.substring(e.keyPrefix.length))}return r}));return l(n,e),n}function We(e){var t=this.keys().then((function(e){return e.length}));return l(t,e),t}function je(e,t){var n=this;e=f(e);var r=n.ready().then((function(){var t=n._dbInfo;localStorage.removeItem(t.keyPrefix+e)}));return l(r,t),r}function Ge(e,t,n){var r=this;e=f(e);var a=r.ready().then((function(){void 0===t&&(t=null);var n=t;return new c((function(a,i){var o=r._dbInfo;o.serializer.serialize(t,(function(t,r){if(r)i(r);else try{localStorage.setItem(o.keyPrefix+e,t),a(n)}catch(s){"QuotaExceededError"!==s.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==s.name||i(s),i(s)}}))}))}));return l(a,n),a}function He(e,t){if(t=h.apply(this,arguments),!(e="function"!==typeof e&&e||{}).name){var n=this.config();e.name=e.name||n.name,e.storeName=e.storeName||n.storeName}var r,a=this;return r=e.name?new c((function(t){e.storeName?t(Oe(e,a._defaultConfig)):t(e.name+"/")})).then((function(e){for(var t=localStorage.length-1;t>=0;t--){var n=localStorage.key(t);0===n.indexOf(e)&&localStorage.removeItem(n)}})):c.reject("Invalid arguments"),l(r,t),r}var qe={_driver:"localStorageWrapper",_initStorage:Me,_support:De(),iterate:Be,getItem:ze,setItem:Ge,removeItem:je,clear:Pe,length:We,key:Ve,keys:Ue,dropInstance:He},$e=function(e,t){return e===t||"number"===typeof e&&"number"===typeof t&&isNaN(e)&&isNaN(t)},Ke=function(e,t){for(var n=e.length,r=0;r<n;){if($e(e[r],t))return!0;r++}return!1},Xe=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},Ye={},Qe={},Je={INDEXEDDB:q,WEBSQL:Re,LOCALSTORAGE:qe},et=[Je.INDEXEDDB._driver,Je.WEBSQL._driver,Je.LOCALSTORAGE._driver],tt=["dropInstance"],nt=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(tt),rt={description:"",driver:et.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function at(e,t){e[t]=function(){var n=arguments;return e.ready().then((function(){return e[t].apply(e,n)}))}}function it(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var n in t)t.hasOwnProperty(n)&&(Xe(t[n])?arguments[0][n]=t[n].slice():arguments[0][n]=t[n])}return arguments[0]}var ot=function(){function e(t){for(var n in a(this,e),Je)if(Je.hasOwnProperty(n)){var r=Je[n],i=r._driver;this[n]=i,Ye[i]||this.defineDriver(r)}this._defaultConfig=it({},rt),this._config=it({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch((function(){}))}return e.prototype.config=function(e){if("object"===("undefined"===typeof e?"undefined":r(e))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e){if("storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),"version"===t&&"number"!==typeof e[t])return new Error("Database version must be a number.");this._config[t]=e[t]}return!("driver"in e)||!e.driver||this.setDriver(this._config.driver)}return"string"===typeof e?this._config[e]:this._config},e.prototype.defineDriver=function(e,t,n){var r=new c((function(t,n){try{var r=e._driver,a=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!e._driver)return void n(a);for(var i=nt.concat("_initStorage"),o=0,s=i.length;o<s;o++){var u=i[o];if((!Ke(tt,u)||e[u])&&"function"!==typeof e[u])return void n(a)}var d=function(){for(var t=function(e){return function(){var t=new Error("Method "+e+" is not implemented by the current driver"),n=c.reject(t);return l(n,arguments[arguments.length-1]),n}},n=0,r=tt.length;n<r;n++){var a=tt[n];e[a]||(e[a]=t(a))}};d();var f=function(n){Ye[r]&&console.info("Redefining LocalForage driver: "+r),Ye[r]=e,Qe[r]=n,t()};"_support"in e?e._support&&"function"===typeof e._support?e._support().then(f,n):f(!!e._support):f(!0)}catch(h){n(h)}}));return d(r,t,n),r},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(e,t,n){var r=Ye[e]?c.resolve(Ye[e]):c.reject(new Error("Driver not found."));return d(r,t,n),r},e.prototype.getSerializer=function(e){var t=c.resolve(ge);return d(t,e),t},e.prototype.ready=function(e){var t=this,n=t._driverSet.then((function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready}));return d(n,e,e),n},e.prototype.setDriver=function(e,t,n){var r=this;Xe(e)||(e=[e]);var a=this._getSupportedDrivers(e);function i(){r._config.driver=r.driver()}function o(e){return r._extend(e),i(),r._ready=r._initStorage(r._config),r._ready}function s(e){return function(){var t=0;function n(){for(;t<e.length;){var a=e[t];return t++,r._dbInfo=null,r._ready=null,r.getDriver(a).then(o).catch(n)}i();var s=new Error("No available storage method found.");return r._driverSet=c.reject(s),r._driverSet}return n()}}var u=null!==this._driverSet?this._driverSet.catch((function(){return c.resolve()})):c.resolve();return this._driverSet=u.then((function(){var e=a[0];return r._dbInfo=null,r._ready=null,r.getDriver(e).then((function(e){r._driver=e._driver,i(),r._wrapLibraryMethodsWithReady(),r._initDriver=s(a)}))})).catch((function(){i();var e=new Error("No available storage method found.");return r._driverSet=c.reject(e),r._driverSet})),d(this._driverSet,t,n),this._driverSet},e.prototype.supports=function(e){return!!Qe[e]},e.prototype._extend=function(e){it(this,e)},e.prototype._getSupportedDrivers=function(e){for(var t=[],n=0,r=e.length;n<r;n++){var a=e[n];this.supports(a)&&t.push(a)}return t},e.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0,t=nt.length;e<t;e++)at(this,nt[e])},e.prototype.createInstance=function(t){return new e(t)},e}(),st=new ot;t.exports=st},{3:3}]},{},[4])(4)},8987:function(e){e.exports=n;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(T){}function n(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function r(e){return!0===(e&&e.__isLong__)}n.prototype.__isLong__,Object.defineProperty(n.prototype,"__isLong__",{value:!0}),n.isLong=r;var a={},i={};function o(e,t){var n,r,o;return t?(o=0<=(e>>>=0)&&e<256)&&(r=i[e])?r:(n=u(e,(0|e)<0?-1:0,!0),o&&(i[e]=n),n):(o=-128<=(e|=0)&&e<128)&&(r=a[e])?r:(n=u(e,e<0?-1:0,!1),o&&(a[e]=n),n)}function s(e,t){if(isNaN(e))return t?g:m;if(t){if(e<0)return g;if(e>=h)return x}else{if(e<=-p)return I;if(e+1>=p)return w}return e<0?s(-e,t).neg():u(e%f|0,e/f|0,t)}function u(e,t,r){return new n(e,t,r)}n.fromInt=o,n.fromNumber=s,n.fromBits=u;var c=Math.pow;function l(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return m;if("number"===typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return l(e.substring(1),t,n).neg();for(var a=s(c(n,8)),i=m,o=0;o<e.length;o+=8){var u=Math.min(8,e.length-o),d=parseInt(e.substring(o,o+u),n);if(u<8){var f=s(c(n,u));i=i.mul(f).add(s(d))}else i=(i=i.mul(a)).add(s(d))}return i.unsigned=t,i}function d(e,t){return"number"===typeof e?s(e,t):"string"===typeof e?l(e,t):u(e.low,e.high,"boolean"===typeof t?t:e.unsigned)}n.fromString=l,n.fromValue=d;var f=4294967296,h=f*f,p=h/2,v=o(1<<24),m=o(0);n.ZERO=m;var g=o(0,!0);n.UZERO=g;var y=o(1);n.ONE=y;var b=o(1,!0);n.UONE=b;var k=o(-1);n.NEG_ONE=k;var w=u(-1,2147483647,!1);n.MAX_VALUE=w;var x=u(-1,-1,!0);n.MAX_UNSIGNED_VALUE=x;var I=u(0,-2147483648,!1);n.MIN_VALUE=I;var S=n.prototype;S.toInt=function(){return this.unsigned?this.low>>>0:this.low},S.toNumber=function(){return this.unsigned?(this.high>>>0)*f+(this.low>>>0):this.high*f+(this.low>>>0)},S.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(I)){var t=s(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var a=s(c(e,6),this.unsigned),i=this,o="";;){var u=i.div(a),l=(i.sub(u.mul(a)).toInt()>>>0).toString(e);if((i=u).isZero())return l+o;for(;l.length<6;)l="0"+l;o=""+l+o}},S.getHighBits=function(){return this.high},S.getHighBitsUnsigned=function(){return this.high>>>0},S.getLowBits=function(){return this.low},S.getLowBitsUnsigned=function(){return this.low>>>0},S.getNumBitsAbs=function(){if(this.isNegative())return this.eq(I)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},S.isZero=function(){return 0===this.high&&0===this.low},S.eqz=S.isZero,S.isNegative=function(){return!this.unsigned&&this.high<0},S.isPositive=function(){return this.unsigned||this.high>=0},S.isOdd=function(){return 1===(1&this.low)},S.isEven=function(){return 0===(1&this.low)},S.equals=function(e){return r(e)||(e=d(e)),(this.unsigned===e.unsigned||this.high>>>31!==1||e.high>>>31!==1)&&(this.high===e.high&&this.low===e.low)},S.eq=S.equals,S.notEquals=function(e){return!this.eq(e)},S.neq=S.notEquals,S.ne=S.notEquals,S.lessThan=function(e){return this.comp(e)<0},S.lt=S.lessThan,S.lessThanOrEqual=function(e){return this.comp(e)<=0},S.lte=S.lessThanOrEqual,S.le=S.lessThanOrEqual,S.greaterThan=function(e){return this.comp(e)>0},S.gt=S.greaterThan,S.greaterThanOrEqual=function(e){return this.comp(e)>=0},S.gte=S.greaterThanOrEqual,S.ge=S.greaterThanOrEqual,S.compare=function(e){if(r(e)||(e=d(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},S.comp=S.compare,S.negate=function(){return!this.unsigned&&this.eq(I)?I:this.not().add(y)},S.neg=S.negate,S.add=function(e){r(e)||(e=d(e));var t=this.high>>>16,n=65535&this.high,a=this.low>>>16,i=65535&this.low,o=e.high>>>16,s=65535&e.high,c=e.low>>>16,l=0,f=0,h=0,p=0;return h+=(p+=i+(65535&e.low))>>>16,f+=(h+=a+c)>>>16,l+=(f+=n+s)>>>16,l+=t+o,u((h&=65535)<<16|(p&=65535),(l&=65535)<<16|(f&=65535),this.unsigned)},S.subtract=function(e){return r(e)||(e=d(e)),this.add(e.neg())},S.sub=S.subtract,S.multiply=function(e){if(this.isZero())return m;if(r(e)||(e=d(e)),t)return u(t.mul(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned);if(e.isZero())return m;if(this.eq(I))return e.isOdd()?I:m;if(e.eq(I))return this.isOdd()?I:m;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(v)&&e.lt(v))return s(this.toNumber()*e.toNumber(),this.unsigned);var n=this.high>>>16,a=65535&this.high,i=this.low>>>16,o=65535&this.low,c=e.high>>>16,l=65535&e.high,f=e.low>>>16,h=65535&e.low,p=0,g=0,y=0,b=0;return y+=(b+=o*h)>>>16,g+=(y+=i*h)>>>16,y&=65535,g+=(y+=o*f)>>>16,p+=(g+=a*h)>>>16,g&=65535,p+=(g+=i*f)>>>16,g&=65535,p+=(g+=o*l)>>>16,p+=n*h+a*f+i*l+o*c,u((y&=65535)<<16|(b&=65535),(p&=65535)<<16|(g&=65535),this.unsigned)},S.mul=S.multiply,S.divide=function(e){if(r(e)||(e=d(e)),e.isZero())throw Error("division by zero");var n,a,i;if(t)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?u((this.unsigned?t.div_u:t.div_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?g:m;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return g;if(e.gt(this.shru(1)))return b;i=g}else{if(this.eq(I))return e.eq(y)||e.eq(k)?I:e.eq(I)?y:(n=this.shr(1).div(e).shl(1)).eq(m)?e.isNegative()?y:k:(a=this.sub(e.mul(n)),i=n.add(a.div(e)));if(e.eq(I))return this.unsigned?g:m;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();i=m}for(a=this;a.gte(e);){n=Math.max(1,Math.floor(a.toNumber()/e.toNumber()));for(var o=Math.ceil(Math.log(n)/Math.LN2),l=o<=48?1:c(2,o-48),f=s(n),h=f.mul(e);h.isNegative()||h.gt(a);)h=(f=s(n-=l,this.unsigned)).mul(e);f.isZero()&&(f=y),i=i.add(f),a=a.sub(h)}return i},S.div=S.divide,S.modulo=function(e){return r(e)||(e=d(e)),t?u((this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},S.mod=S.modulo,S.rem=S.modulo,S.not=function(){return u(~this.low,~this.high,this.unsigned)},S.and=function(e){return r(e)||(e=d(e)),u(this.low&e.low,this.high&e.high,this.unsigned)},S.or=function(e){return r(e)||(e=d(e)),u(this.low|e.low,this.high|e.high,this.unsigned)},S.xor=function(e){return r(e)||(e=d(e)),u(this.low^e.low,this.high^e.high,this.unsigned)},S.shiftLeft=function(e){return r(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?u(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):u(0,this.low<<e-32,this.unsigned)},S.shl=S.shiftLeft,S.shiftRight=function(e){return r(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?u(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):u(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},S.shr=S.shiftRight,S.shiftRightUnsigned=function(e){if(r(e)&&(e=e.toInt()),0===(e&=63))return this;var t=this.high;return e<32?u(this.low>>>e|t<<32-e,t>>>e,this.unsigned):u(32===e?t:t>>>e-32,0,this.unsigned)},S.shru=S.shiftRightUnsigned,S.shr_u=S.shiftRightUnsigned,S.toSigned=function(){return this.unsigned?u(this.low,this.high,!1):this},S.toUnsigned=function(){return this.unsigned?this:u(this.low,this.high,!0)},S.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},S.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},S.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},n.fromBytes=function(e,t,r){return r?n.fromBytesLE(e,t):n.fromBytesBE(e,t)},n.fromBytesLE=function(e,t){return new n(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},n.fromBytesBE=function(e,t){return new n(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},6151:function(e,t,n){var r=n(2878);e.exports=h,e.exports.parse=i,e.exports.compile=function(e,t){return s(i(e,t),t)},e.exports.tokensToFunction=s,e.exports.tokensToRegExp=f;var a=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function i(e,t){for(var n,r=[],i=0,o=0,s="",l=t&&t.delimiter||"/";null!=(n=a.exec(e));){var d=n[0],f=n[1],h=n.index;if(s+=e.slice(o,h),o=h+d.length,f)s+=f[1];else{var p=e[o],v=n[2],m=n[3],g=n[4],y=n[5],b=n[6],k=n[7];s&&(r.push(s),s="");var w=null!=v&&null!=p&&p!==v,x="+"===b||"*"===b,I="?"===b||"*"===b,S=n[2]||l,T=g||y;r.push({name:m||i++,prefix:v||"",delimiter:S,optional:I,repeat:x,partial:w,asterisk:!!k,pattern:T?c(T):k?".*":"[^"+u(S)+"]+?"})}}return o<e.length&&(s+=e.substr(o)),s&&r.push(s),r}function o(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function s(e,t){for(var n=new Array(e.length),a=0;a<e.length;a++)"object"===typeof e[a]&&(n[a]=new RegExp("^(?:"+e[a].pattern+")$",d(t)));return function(t,a){for(var i="",s=t||{},u=(a||{}).pretty?o:encodeURIComponent,c=0;c<e.length;c++){var l=e[c];if("string"!==typeof l){var d,f=s[l.name];if(null==f){if(l.optional){l.partial&&(i+=l.prefix);continue}throw new TypeError('Expected "'+l.name+'" to be defined')}if(r(f)){if(!l.repeat)throw new TypeError('Expected "'+l.name+'" to not repeat, but received `'+JSON.stringify(f)+"`");if(0===f.length){if(l.optional)continue;throw new TypeError('Expected "'+l.name+'" to not be empty')}for(var h=0;h<f.length;h++){if(d=u(f[h]),!n[c].test(d))throw new TypeError('Expected all "'+l.name+'" to match "'+l.pattern+'", but received `'+JSON.stringify(d)+"`");i+=(0===h?l.prefix:l.delimiter)+d}}else{if(d=l.asterisk?encodeURI(f).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})):u(f),!n[c].test(d))throw new TypeError('Expected "'+l.name+'" to match "'+l.pattern+'", but received "'+d+'"');i+=l.prefix+d}}else i+=l}return i}}function u(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function c(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function l(e,t){return e.keys=t,e}function d(e){return e&&e.sensitive?"":"i"}function f(e,t,n){r(t)||(n=t||n,t=[]);for(var a=(n=n||{}).strict,i=!1!==n.end,o="",s=0;s<e.length;s++){var c=e[s];if("string"===typeof c)o+=u(c);else{var f=u(c.prefix),h="(?:"+c.pattern+")";t.push(c),c.repeat&&(h+="(?:"+f+h+")*"),o+=h=c.optional?c.partial?f+"("+h+")?":"(?:"+f+"("+h+"))?":f+"("+h+")"}}var p=u(n.delimiter||"/"),v=o.slice(-p.length)===p;return a||(o=(v?o.slice(0,-p.length):o)+"(?:"+p+"(?=$))?"),o+=i?"$":a&&v?"":"(?="+p+"|$)",l(new RegExp("^"+o,d(n)),t)}function h(e,t,n){return r(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return l(e,t)}(e,t):r(e)?function(e,t,n){for(var r=[],a=0;a<e.length;a++)r.push(h(e[a],t,n).source);return l(new RegExp("(?:"+r.join("|")+")",d(n)),t)}(e,t,n):function(e,t,n){return f(i(e,n),t,n)}(e,t,n)}},2878:function(e){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},888:function(e,t,n){"use strict";var r=n(9047);function a(){}function i(){}i.resetWarningCache=a,e.exports=function(){function e(e,t,n,a,i,o){if(o!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:a};return n.PropTypes=n,n}},2007:function(e,t,n){e.exports=n(888)()},9047:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},4463:function(e,t,n){"use strict";var r=n(2791),a=n(5296);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function u(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(s[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},p={};function v(e,t,n,r,a,i,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,n,r){var a=m.hasOwnProperty(t)?m[t]:null;(null!==a?0!==a.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,a,r)&&(n=null),r||null===a?function(e){return!!d.call(p,e)||!d.call(h,e)&&(f.test(e)?p[e]=!0:(h[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=null===n?3!==a.type&&"":n:(t=a.attributeName,r=a.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(a=a.type)||4===a&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,y);m[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,y);m[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,y);m[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var k=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),x=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),N=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),Z=Symbol.for("react.suspense"),_=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var F,M=Object.assign;function P(e){if(void 0===F)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);F=t&&t[1]||""}return"\n"+F+e}var z=!1;function B(e,t){if(!e||z)return"";z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var a=c.stack.split("\n"),i=r.stack.split("\n"),o=a.length-1,s=i.length-1;1<=o&&0<=s&&a[o]!==i[s];)s--;for(;1<=o&&0<=s;o--,s--)if(a[o]!==i[s]){if(1!==o||1!==s)do{if(o--,0>--s||a[o]!==i[s]){var u="\n"+a[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=o&&0<=s);break}}}finally{z=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?P(e):""}function V(e){switch(e.tag){case 5:return P(e.type);case 16:return P("Lazy");case 13:return P("Suspense");case 19:return P("SuspenseList");case 0:case 2:case 15:return e=B(e.type,!1);case 11:return e=B(e.type.render,!1);case 1:return e=B(e.type,!0);default:return""}}function U(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case I:return"Fragment";case x:return"Portal";case T:return"Profiler";case S:return"StrictMode";case Z:return"Suspense";case _:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case N:return(e.displayName||"Context")+".Consumer";case E:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case A:return null!==(t=e.displayName||null)?t:U(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return U(e(t))}catch(n){}}return null}function W(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return U(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function j(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function H(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var a=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function q(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=G(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function $(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function K(e,t){var n=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=j(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Y(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function Q(e,t){Y(e,t);var n=j(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,j(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function J(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&$(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+j(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ae(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(i(92));if(te(n)){if(1<n.length)throw Error(i(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:j(n)}}function ie(e,t){var n=j(t.value),r=j(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ue(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,de=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function fe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var he={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||he.hasOwnProperty(e)&&he[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),a=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}Object.keys(he).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),he[t]=he[e]}))}));var ge=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ge[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(i(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ke=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xe=null,Ie=null,Se=null;function Te(e){if(e=ba(e)){if("function"!==typeof xe)throw Error(i(280));var t=e.stateNode;t&&(t=wa(t),xe(e.stateNode,e.type,t))}}function Ee(e){Ie?Se?Se.push(e):Se=[e]:Ie=e}function Ne(){if(Ie){var e=Ie,t=Se;if(Se=Ie=null,Te(e),t)for(e=0;e<t.length;e++)Te(t[e])}}function Ce(e,t){return e(t)}function Ze(){}var _e=!1;function Ae(e,t,n){if(_e)return e(t,n);_e=!0;try{return Ce(e,t,n)}finally{_e=!1,(null!==Ie||null!==Se)&&(Ze(),Ne())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=wa(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(i(231,t,typeof n));return n}var De=!1;if(l)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){De=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(le){De=!1}function Le(e,t,n,r,a,i,o,s,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Fe=!1,Me=null,Pe=!1,ze=null,Be={onError:function(e){Fe=!0,Me=e}};function Ve(e,t,n,r,a,i,o,s,u){Fe=!1,Me=null,Le.apply(Be,arguments)}function Ue(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function We(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function je(e){if(Ue(e)!==e)throw Error(i(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ue(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(null===a)break;var o=a.alternate;if(null===o){if(null!==(r=a.return)){n=r;continue}break}if(a.child===o.child){for(o=a.child;o;){if(o===n)return je(a),e;if(o===r)return je(a),t;o=o.sibling}throw Error(i(188))}if(n.return!==r.return)n=a,r=o;else{for(var s=!1,u=a.child;u;){if(u===n){s=!0,n=a,r=o;break}if(u===r){s=!0,r=a,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=a;break}if(u===r){s=!0,r=o,n=a;break}u=u.sibling}if(!s)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(e))?He(e):null}function He(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=He(e);if(null!==t)return t;e=e.sibling}return null}var qe=a.unstable_scheduleCallback,$e=a.unstable_cancelCallback,Ke=a.unstable_shouldYield,Xe=a.unstable_requestPaint,Ye=a.unstable_now,Qe=a.unstable_getCurrentPriorityLevel,Je=a.unstable_ImmediatePriority,et=a.unstable_UserBlockingPriority,tt=a.unstable_NormalPriority,nt=a.unstable_LowPriority,rt=a.unstable_IdlePriority,at=null,it=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/ut|0)|0},st=Math.log,ut=Math.LN2;var ct=64,lt=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ft(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,a=e.suspendedLanes,i=e.pingedLanes,o=268435455&n;if(0!==o){var s=o&~a;0!==s?r=dt(s):0!==(i&=o)&&(r=dt(i))}else 0!==(o=n&~a)?r=dt(o):0!==i&&(r=dt(i));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&a)&&((a=r&-r)>=(i=t&-t)||16===a&&0!==(4194240&i)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)a=1<<(n=31-ot(t)),r|=e[n],t&=~a;return r}function ht(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function gt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var bt=0;function kt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,xt,It,St,Tt,Et=!1,Nt=[],Ct=null,Zt=null,_t=null,At=new Map,Rt=new Map,Dt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Zt=null;break;case"mouseover":case"mouseout":_t=null;break;case"pointerover":case"pointerout":At.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Ft(e,t,n,r,a,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[a]},null!==t&&(null!==(t=ba(t))&&xt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function Mt(e){var t=ya(e.target);if(null!==t){var n=Ue(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=We(n)))return e.blockedOn=t,void Tt(e.priority,(function(){It(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Pt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Kt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ba(n))&&xt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);ke=r,n.target.dispatchEvent(r),ke=null,t.shift()}return!0}function zt(e,t,n){Pt(e)&&n.delete(t)}function Bt(){Et=!1,null!==Ct&&Pt(Ct)&&(Ct=null),null!==Zt&&Pt(Zt)&&(Zt=null),null!==_t&&Pt(_t)&&(_t=null),At.forEach(zt),Rt.forEach(zt)}function Vt(e,t){e.blockedOn===t&&(e.blockedOn=null,Et||(Et=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Bt)))}function Ut(e){function t(t){return Vt(t,e)}if(0<Nt.length){Vt(Nt[0],e);for(var n=1;n<Nt.length;n++){var r=Nt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&Vt(Ct,e),null!==Zt&&Vt(Zt,e),null!==_t&&Vt(_t,e),At.forEach(t),Rt.forEach(t),n=0;n<Dt.length;n++)(r=Dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Dt.length&&null===(n=Dt[0]).blockedOn;)Mt(n),null===n.blockedOn&&Dt.shift()}var Wt=k.ReactCurrentBatchConfig,jt=!0;function Gt(e,t,n,r){var a=bt,i=Wt.transition;Wt.transition=null;try{bt=1,qt(e,t,n,r)}finally{bt=a,Wt.transition=i}}function Ht(e,t,n,r){var a=bt,i=Wt.transition;Wt.transition=null;try{bt=4,qt(e,t,n,r)}finally{bt=a,Wt.transition=i}}function qt(e,t,n,r){if(jt){var a=Kt(e,t,n,r);if(null===a)jr(e,t,r,$t,n),Lt(e,r);else if(function(e,t,n,r,a){switch(t){case"focusin":return Ct=Ft(Ct,e,t,n,r,a),!0;case"dragenter":return Zt=Ft(Zt,e,t,n,r,a),!0;case"mouseover":return _t=Ft(_t,e,t,n,r,a),!0;case"pointerover":var i=a.pointerId;return At.set(i,Ft(At.get(i)||null,e,t,n,r,a)),!0;case"gotpointercapture":return i=a.pointerId,Rt.set(i,Ft(Rt.get(i)||null,e,t,n,r,a)),!0}return!1}(a,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==a;){var i=ba(a);if(null!==i&&wt(i),null===(i=Kt(e,t,n,r))&&jr(e,t,r,$t,n),i===a)break;a=i}null!==a&&r.stopPropagation()}else jr(e,t,r,null,n)}}var $t=null;function Kt(e,t,n,r){if($t=null,null!==(e=ya(e=we(r))))if(null===(t=Ue(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=We(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return $t=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qe()){case Je:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Yt=null,Qt=null,Jt=null;function en(){if(Jt)return Jt;var e,t,n=Qt,r=n.length,a="value"in Yt?Yt.value:Yt.textContent,i=a.length;for(e=0;e<r&&n[e]===a[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===a[i-t];t++);return Jt=a.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,a,i){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=a,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(a):a[o]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,sn,un,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),dn=M({},cn,{view:0,detail:0}),fn=an(dn),hn=M({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==un&&(un&&"mousemove"===e.type?(on=e.screenX-un.screenX,sn=e.screenY-un.screenY):sn=on=0,un=e),on)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),pn=an(hn),vn=an(M({},hn,{dataTransfer:0})),mn=an(M({},dn,{relatedTarget:0})),gn=an(M({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=M({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=an(yn),kn=an(M({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},In={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=In[e])&&!!t[e]}function Tn(){return Sn}var En=M({},dn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?xn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Nn=an(En),Cn=an(M({},hn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Zn=an(M({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tn})),_n=an(M({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),An=M({},hn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=an(An),Dn=[9,13,27,32],On=l&&"CompositionEvent"in window,Ln=null;l&&"documentMode"in document&&(Ln=document.documentMode);var Fn=l&&"TextEvent"in window&&!Ln,Mn=l&&(!On||Ln&&8<Ln&&11>=Ln),Pn=String.fromCharCode(32),zn=!1;function Bn(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Un=!1;var Wn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Wn[e.type]:"textarea"===t}function Gn(e,t,n,r){Ee(r),0<(t=Hr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Hn=null,qn=null;function $n(e){Pr(e,0)}function Kn(e){if(q(ka(e)))return e}function Xn(e,t){if("change"===e)return t}var Yn=!1;if(l){var Qn;if(l){var Jn="oninput"in document;if(!Jn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Jn="function"===typeof er.oninput}Qn=Jn}else Qn=!1;Yn=Qn&&(!document.documentMode||9<document.documentMode)}function tr(){Hn&&(Hn.detachEvent("onpropertychange",nr),qn=Hn=null)}function nr(e){if("value"===e.propertyName&&Kn(qn)){var t=[];Gn(t,qn,e,we(e)),Ae($n,t)}}function rr(e,t,n){"focusin"===e?(tr(),qn=n,(Hn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ar(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Kn(qn)}function ir(e,t){if("click"===e)return Kn(t)}function or(e,t){if("input"===e||"change"===e)return Kn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ur(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!d.call(t,a)||!sr(e[a],t[a]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function fr(){for(var e=window,t=$();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=$((e=t.contentWindow).document)}return t}function hr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=fr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&hr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var a=n.textContent.length,i=Math.min(r.start,a);r=void 0===r.end?i:Math.min(r.end,a),!e.extend&&i>r&&(a=r,r=i,i=a),a=lr(n,i);var o=lr(n,r);a&&o&&(1!==e.rangeCount||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(a.node,a.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,mr=null,gr=null,yr=null,br=!1;function kr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==mr||mr!==$(r)||("selectionStart"in(r=mr)&&hr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&ur(yr,r)||(yr=r,0<(r=Hr(gr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var xr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},Ir={},Sr={};function Tr(e){if(Ir[e])return Ir[e];if(!xr[e])return e;var t,n=xr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Sr)return Ir[e]=n[t];return e}l&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete xr.animationend.animation,delete xr.animationiteration.animation,delete xr.animationstart.animation),"TransitionEvent"in window||delete xr.transitionend.transition);var Er=Tr("animationend"),Nr=Tr("animationiteration"),Cr=Tr("animationstart"),Zr=Tr("transitionend"),_r=new Map,Ar="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,t){_r.set(e,t),u(t,[e])}for(var Dr=0;Dr<Ar.length;Dr++){var Or=Ar[Dr];Rr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Rr(Er,"onAnimationEnd"),Rr(Nr,"onAnimationIteration"),Rr(Cr,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(Zr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Mr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,a,o,s,u,c){if(Ve.apply(this,arguments),Fe){if(!Fe)throw Error(i(198));var l=Me;Fe=!1,Me=null,Pe||(Pe=!0,ze=l)}}(r,t,void 0,e),e.currentTarget=null}function Pr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],u=s.instance,c=s.currentTarget;if(s=s.listener,u!==i&&a.isPropagationStopped())break e;Mr(a,s,c),i=u}else for(o=0;o<r.length;o++){if(u=(s=r[o]).instance,c=s.currentTarget,s=s.listener,u!==i&&a.isPropagationStopped())break e;Mr(a,s,c),i=u}}}if(Pe)throw e=ze,Pe=!1,ze=null,e}function zr(e,t){var n=t[va];void 0===n&&(n=t[va]=new Set);var r=e+"__bubble";n.has(r)||(Wr(t,e,2,!1),n.add(r))}function Br(e,t,n){var r=0;t&&(r|=4),Wr(n,e,r,t)}var Vr="_reactListening"+Math.random().toString(36).slice(2);function Ur(e){if(!e[Vr]){e[Vr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Fr.has(t)||Br(t,!1,e),Br(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vr]||(t[Vr]=!0,Br("selectionchange",!1,t))}}function Wr(e,t,n,r){switch(Xt(t)){case 1:var a=Gt;break;case 4:a=Ht;break;default:a=qt}n=a.bind(null,t,n,e),a=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),r?void 0!==a?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):void 0!==a?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function jr(e,t,n,r,a){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===a||8===s.nodeType&&s.parentNode===a)break;if(4===o)for(o=r.return;null!==o;){var u=o.tag;if((3===u||4===u)&&((u=o.stateNode.containerInfo)===a||8===u.nodeType&&u.parentNode===a))return;o=o.return}for(;null!==s;){if(null===(o=ya(s)))return;if(5===(u=o.tag)||6===u){r=i=o;continue e}s=s.parentNode}}r=r.return}Ae((function(){var r=i,a=we(n),o=[];e:{var s=_r.get(e);if(void 0!==s){var u=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":u=Nn;break;case"focusin":c="focus",u=mn;break;case"focusout":c="blur",u=mn;break;case"beforeblur":case"afterblur":u=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=Zn;break;case Er:case Nr:case Cr:u=gn;break;case Zr:u=_n;break;case"scroll":u=fn;break;case"wheel":u=Rn;break;case"copy":case"cut":case"paste":u=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=Cn}var l=0!==(4&t),d=!l&&"scroll"===e,f=l?null!==s?s+"Capture":null:s;l=[];for(var h,p=r;null!==p;){var v=(h=p).stateNode;if(5===h.tag&&null!==v&&(h=v,null!==f&&(null!=(v=Re(p,f))&&l.push(Gr(p,v,h)))),d)break;p=p.return}0<l.length&&(s=new u(s,c,null,n,a),o.push({event:s,listeners:l}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===ke||!(c=n.relatedTarget||n.fromElement)||!ya(c)&&!c[pa])&&(u||s)&&(s=a.window===a?a:(s=a.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(c=(c=n.relatedTarget||n.toElement)?ya(c):null)&&(c!==(d=Ue(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(u=null,c=r),u!==c)){if(l=pn,v="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Cn,v="onPointerLeave",f="onPointerEnter",p="pointer"),d=null==u?s:ka(u),h=null==c?s:ka(c),(s=new l(v,p+"leave",u,n,a)).target=d,s.relatedTarget=h,v=null,ya(a)===r&&((l=new l(f,p+"enter",c,n,a)).target=h,l.relatedTarget=d,v=l),d=v,u&&c)e:{for(f=c,p=0,h=l=u;h;h=qr(h))p++;for(h=0,v=f;v;v=qr(v))h++;for(;0<p-h;)l=qr(l),p--;for(;0<h-p;)f=qr(f),h--;for(;p--;){if(l===f||null!==f&&l===f.alternate)break e;l=qr(l),f=qr(f)}l=null}else l=null;null!==u&&$r(o,s,u,l,!1),null!==c&&null!==d&&$r(o,d,c,l,!0)}if("select"===(u=(s=r?ka(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var m=Xn;else if(jn(s))if(Yn)m=or;else{m=ar;var g=rr}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(m=ir);switch(m&&(m=m(e,r))?Gn(o,m,n,a):(g&&g(e,s,r),"focusout"===e&&(g=s._wrapperState)&&g.controlled&&"number"===s.type&&ee(s,"number",s.value)),g=r?ka(r):window,e){case"focusin":(jn(g)||"true"===g.contentEditable)&&(mr=g,gr=r,yr=null);break;case"focusout":yr=gr=mr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,kr(o,n,a);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":kr(o,n,a)}var y;if(On)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Un?Bn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Mn&&"ko"!==n.locale&&(Un||"onCompositionStart"!==b?"onCompositionEnd"===b&&Un&&(y=en()):(Qt="value"in(Yt=a)?Yt.value:Yt.textContent,Un=!0)),0<(g=Hr(r,b)).length&&(b=new kn(b,e,null,n,a),o.push({event:b,listeners:g}),y?b.data=y:null!==(y=Vn(n))&&(b.data=y))),(y=Fn?function(e,t){switch(e){case"compositionend":return Vn(t);case"keypress":return 32!==t.which?null:(zn=!0,Pn);case"textInput":return(e=t.data)===Pn&&zn?null:e;default:return null}}(e,n):function(e,t){if(Un)return"compositionend"===e||!On&&Bn(e,t)?(e=en(),Jt=Qt=Yt=null,Un=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Hr(r,"onBeforeInput")).length&&(a=new kn("onBeforeInput","beforeinput",null,n,a),o.push({event:a,listeners:r}),a.data=y))}Pr(o,t)}))}function Gr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hr(e,t){for(var n=t+"Capture",r=[];null!==e;){var a=e,i=a.stateNode;5===a.tag&&null!==i&&(a=i,null!=(i=Re(e,n))&&r.unshift(Gr(e,i,a)),null!=(i=Re(e,t))&&r.push(Gr(e,i,a))),e=e.return}return r}function qr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function $r(e,t,n,r,a){for(var i=t._reactName,o=[];null!==n&&n!==r;){var s=n,u=s.alternate,c=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==c&&(s=c,a?null!=(u=Re(n,i))&&o.unshift(Gr(n,u,s)):a||null!=(u=Re(n,i))&&o.push(Gr(n,u,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Kr=/\r\n?/g,Xr=/\u0000|\uFFFD/g;function Yr(e){return("string"===typeof e?e:""+e).replace(Kr,"\n").replace(Xr,"")}function Qr(e,t,n){if(t=Yr(t),Yr(e)!==t&&n)throw Error(i(425))}function Jr(){}var ea=null,ta=null;function na(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ra="function"===typeof setTimeout?setTimeout:void 0,aa="function"===typeof clearTimeout?clearTimeout:void 0,ia="function"===typeof Promise?Promise:void 0,oa="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ia?function(e){return ia.resolve(null).then(e).catch(sa)}:ra;function sa(e){setTimeout((function(){throw e}))}function ua(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&8===a.nodeType)if("/$"===(n=a.data)){if(0===r)return e.removeChild(a),void Ut(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=a}while(n);Ut(t)}function ca(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function la(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var da=Math.random().toString(36).slice(2),fa="__reactFiber$"+da,ha="__reactProps$"+da,pa="__reactContainer$"+da,va="__reactEvents$"+da,ma="__reactListeners$"+da,ga="__reactHandles$"+da;function ya(e){var t=e[fa];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pa]||n[fa]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=la(e);null!==e;){if(n=e[fa])return n;e=la(e)}return t}n=(e=n).parentNode}return null}function ba(e){return!(e=e[fa]||e[pa])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ka(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function wa(e){return e[ha]||null}var xa=[],Ia=-1;function Sa(e){return{current:e}}function Ta(e){0>Ia||(e.current=xa[Ia],xa[Ia]=null,Ia--)}function Ea(e,t){Ia++,xa[Ia]=e.current,e.current=t}var Na={},Ca=Sa(Na),Za=Sa(!1),_a=Na;function Aa(e,t){var n=e.type.contextTypes;if(!n)return Na;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a,i={};for(a in n)i[a]=t[a];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Ra(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Da(){Ta(Za),Ta(Ca)}function Oa(e,t,n){if(Ca.current!==Na)throw Error(i(168));Ea(Ca,t),Ea(Za,n)}function La(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in t))throw Error(i(108,W(e)||"Unknown",a));return M({},n,r)}function Fa(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Na,_a=Ca.current,Ea(Ca,e),Ea(Za,Za.current),!0}function Ma(e,t,n){var r=e.stateNode;if(!r)throw Error(i(169));n?(e=La(e,t,_a),r.__reactInternalMemoizedMergedChildContext=e,Ta(Za),Ta(Ca),Ea(Ca,e)):Ta(Za),Ea(Za,n)}var Pa=null,za=!1,Ba=!1;function Va(e){null===Pa?Pa=[e]:Pa.push(e)}function Ua(){if(!Ba&&null!==Pa){Ba=!0;var e=0,t=bt;try{var n=Pa;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Pa=null,za=!1}catch(a){throw null!==Pa&&(Pa=Pa.slice(e+1)),qe(Je,Ua),a}finally{bt=t,Ba=!1}}return null}var Wa=[],ja=0,Ga=null,Ha=0,qa=[],$a=0,Ka=null,Xa=1,Ya="";function Qa(e,t){Wa[ja++]=Ha,Wa[ja++]=Ga,Ga=e,Ha=t}function Ja(e,t,n){qa[$a++]=Xa,qa[$a++]=Ya,qa[$a++]=Ka,Ka=e;var r=Xa;e=Ya;var a=32-ot(r)-1;r&=~(1<<a),n+=1;var i=32-ot(t)+a;if(30<i){var o=a-a%5;i=(r&(1<<o)-1).toString(32),r>>=o,a-=o,Xa=1<<32-ot(t)+a|n<<a|r,Ya=i+e}else Xa=1<<i|n<<a|r,Ya=e}function ei(e){null!==e.return&&(Qa(e,1),Ja(e,1,0))}function ti(e){for(;e===Ga;)Ga=Wa[--ja],Wa[ja]=null,Ha=Wa[--ja],Wa[ja]=null;for(;e===Ka;)Ka=qa[--$a],qa[$a]=null,Ya=qa[--$a],qa[$a]=null,Xa=qa[--$a],qa[$a]=null}var ni=null,ri=null,ai=!1,ii=null;function oi(e,t){var n=Rc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function si(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ni=e,ri=ca(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ni=e,ri=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Ka?{id:Xa,overflow:Ya}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Rc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ni=e,ri=null,!0);default:return!1}}function ui(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ci(e){if(ai){var t=ri;if(t){var n=t;if(!si(e,t)){if(ui(e))throw Error(i(418));t=ca(n.nextSibling);var r=ni;t&&si(e,t)?oi(r,n):(e.flags=-4097&e.flags|2,ai=!1,ni=e)}}else{if(ui(e))throw Error(i(418));e.flags=-4097&e.flags|2,ai=!1,ni=e}}}function li(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ni=e}function di(e){if(e!==ni)return!1;if(!ai)return li(e),ai=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!na(e.type,e.memoizedProps)),t&&(t=ri)){if(ui(e))throw fi(),Error(i(418));for(;t;)oi(e,t),t=ca(t.nextSibling)}if(li(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ri=ca(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ri=null}}else ri=ni?ca(e.stateNode.nextSibling):null;return!0}function fi(){for(var e=ri;e;)e=ca(e.nextSibling)}function hi(){ri=ni=null,ai=!1}function pi(e){null===ii?ii=[e]:ii.push(e)}var vi=k.ReactCurrentBatchConfig;function mi(e,t){if(e&&e.defaultProps){for(var n in t=M({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var gi=Sa(null),yi=null,bi=null,ki=null;function wi(){ki=bi=yi=null}function xi(e){var t=gi.current;Ta(gi),e._currentValue=t}function Ii(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Si(e,t){yi=e,ki=bi=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ks=!0),e.firstContext=null)}function Ti(e){var t=e._currentValue;if(ki!==e)if(e={context:e,memoizedValue:t,next:null},null===bi){if(null===yi)throw Error(i(308));bi=e,yi.dependencies={lanes:0,firstContext:e}}else bi=bi.next=e;return t}var Ei=null;function Ni(e){null===Ei?Ei=[e]:Ei.push(e)}function Ci(e,t,n,r){var a=t.interleaved;return null===a?(n.next=n,Ni(t)):(n.next=a.next,a.next=n),t.interleaved=n,Zi(e,r)}function Zi(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var _i=!1;function Ai(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ri(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Di(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Oi(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Zu)){var a=r.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),r.pending=t,Zi(e,n)}return null===(a=r.interleaved)?(t.next=t,Ni(r)):(t.next=a.next,a.next=t),r.interleaved=t,Zi(e,n)}function Li(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Fi(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var a=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?a=i=o:i=i.next=o,n=n.next}while(null!==n);null===i?a=i=t:i=i.next=t}else a=i=t;return n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Mi(e,t,n,r){var a=e.updateQueue;_i=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,s=a.shared.pending;if(null!==s){a.shared.pending=null;var u=s,c=u.next;u.next=null,null===o?i=c:o.next=c,o=u;var l=e.alternate;null!==l&&((s=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===s?l.firstBaseUpdate=c:s.next=c,l.lastBaseUpdate=u))}if(null!==i){var d=a.baseState;for(o=0,l=c=u=null,s=i;;){var f=s.lane,h=s.eventTime;if((r&f)===f){null!==l&&(l=l.next={eventTime:h,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,v=s;switch(f=t,h=n,v.tag){case 1:if("function"===typeof(p=v.payload)){d=p.call(h,d,f);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(f="function"===typeof(p=v.payload)?p.call(h,d,f):p)||void 0===f)break e;d=M({},d,f);break e;case 2:_i=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(f=a.effects)?a.effects=[s]:f.push(s))}else h={eventTime:h,lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===l?(c=l=h,u=d):l=l.next=h,o|=f;if(null===(s=s.next)){if(null===(s=a.shared.pending))break;s=(f=s).next,f.next=null,a.lastBaseUpdate=f,a.shared.pending=null}}if(null===l&&(u=d),a.baseState=u,a.firstBaseUpdate=c,a.lastBaseUpdate=l,null!==(t=a.shared.interleaved)){a=t;do{o|=a.lane,a=a.next}while(a!==t)}else null===i&&(a.shared.lanes=0);Mu|=o,e.lanes=o,e.memoizedState=d}}function Pi(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(null!==a){if(r.callback=null,r=n,"function"!==typeof a)throw Error(i(191,a));a.call(r)}}}var zi=(new r.Component).refs;function Bi(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:M({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Vi={isMounted:function(e){return!!(e=e._reactInternals)&&Ue(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),a=nc(e),i=Di(r,a);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Oi(e,i,a))&&(rc(t,e,a,r),Li(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),a=nc(e),i=Di(r,a);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Oi(e,i,a))&&(rc(t,e,a,r),Li(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),a=Di(n,r);a.tag=2,void 0!==t&&null!==t&&(a.callback=t),null!==(t=Oi(e,a,r))&&(rc(t,e,r,n),Li(t,e,r))}};function Ui(e,t,n,r,a,i,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,o):!t.prototype||!t.prototype.isPureReactComponent||(!ur(n,r)||!ur(a,i))}function Wi(e,t,n){var r=!1,a=Na,i=t.contextType;return"object"===typeof i&&null!==i?i=Ti(i):(a=Ra(t)?_a:Ca.current,i=(r=null!==(r=t.contextTypes)&&void 0!==r)?Aa(e,a):Na),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Vi,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function ji(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Vi.enqueueReplaceState(t,t.state,null)}function Gi(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs=zi,Ai(e);var i=t.contextType;"object"===typeof i&&null!==i?a.context=Ti(i):(i=Ra(t)?_a:Ca.current,a.context=Aa(e,i)),a.state=e.memoizedState,"function"===typeof(i=t.getDerivedStateFromProps)&&(Bi(e,t,i,n),a.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(t=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&Vi.enqueueReplaceState(a,a.state,null),Mi(e,n,a,r),a.state=e.memoizedState),"function"===typeof a.componentDidMount&&(e.flags|=4194308)}function Hi(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(i(309));var r=n.stateNode}if(!r)throw Error(i(147,e));var a=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=a.refs;t===zi&&(t=a.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(i(284));if(!n._owner)throw Error(i(290,e))}return e}function qi(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function $i(e){return(0,e._init)(e._payload)}function Ki(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=Oc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=Pc(n,e.mode,r)).return=e,t):((t=a(t,n)).return=e,t)}function c(e,t,n,r){var i=n.type;return i===I?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===R&&$i(i)===t.type)?((r=a(t,n.props)).ref=Hi(e,t,n),r.return=e,r):((r=Lc(n.type,n.key,n.props,null,e.mode,r)).ref=Hi(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=zc(n,e.mode,r)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function d(e,t,n,r,i){return null===t||7!==t.tag?((t=Fc(n,e.mode,r,i)).return=e,t):((t=a(t,n)).return=e,t)}function f(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Pc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Lc(t.type,t.key,t.props,null,e.mode,n)).ref=Hi(e,null,t),n.return=e,n;case x:return(t=zc(t,e.mode,n)).return=e,t;case R:return f(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Fc(t,e.mode,n,null)).return=e,t;qi(e,t)}return null}function h(e,t,n,r){var a=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==a?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===a?c(e,t,n,r):null;case x:return n.key===a?l(e,t,n,r):null;case R:return h(e,t,(a=n._init)(n._payload),r)}if(te(n)||L(n))return null!==a?null:d(e,t,n,r,null);qi(e,n)}return null}function p(e,t,n,r,a){if("string"===typeof r&&""!==r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,a);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,a);case x:return l(t,e=e.get(null===r.key?n:r.key)||null,r,a);case R:return p(e,t,n,(0,r._init)(r._payload),a)}if(te(r)||L(r))return d(t,e=e.get(n)||null,r,a,null);qi(t,r)}return null}function v(a,i,s,u){for(var c=null,l=null,d=i,v=i=0,m=null;null!==d&&v<s.length;v++){d.index>v?(m=d,d=null):m=d.sibling;var g=h(a,d,s[v],u);if(null===g){null===d&&(d=m);break}e&&d&&null===g.alternate&&t(a,d),i=o(g,i,v),null===l?c=g:l.sibling=g,l=g,d=m}if(v===s.length)return n(a,d),ai&&Qa(a,v),c;if(null===d){for(;v<s.length;v++)null!==(d=f(a,s[v],u))&&(i=o(d,i,v),null===l?c=d:l.sibling=d,l=d);return ai&&Qa(a,v),c}for(d=r(a,d);v<s.length;v++)null!==(m=p(d,a,v,s[v],u))&&(e&&null!==m.alternate&&d.delete(null===m.key?v:m.key),i=o(m,i,v),null===l?c=m:l.sibling=m,l=m);return e&&d.forEach((function(e){return t(a,e)})),ai&&Qa(a,v),c}function m(a,s,u,c){var l=L(u);if("function"!==typeof l)throw Error(i(150));if(null==(u=l.call(u)))throw Error(i(151));for(var d=l=null,v=s,m=s=0,g=null,y=u.next();null!==v&&!y.done;m++,y=u.next()){v.index>m?(g=v,v=null):g=v.sibling;var b=h(a,v,y.value,c);if(null===b){null===v&&(v=g);break}e&&v&&null===b.alternate&&t(a,v),s=o(b,s,m),null===d?l=b:d.sibling=b,d=b,v=g}if(y.done)return n(a,v),ai&&Qa(a,m),l;if(null===v){for(;!y.done;m++,y=u.next())null!==(y=f(a,y.value,c))&&(s=o(y,s,m),null===d?l=y:d.sibling=y,d=y);return ai&&Qa(a,m),l}for(v=r(a,v);!y.done;m++,y=u.next())null!==(y=p(v,a,m,y.value,c))&&(e&&null!==y.alternate&&v.delete(null===y.key?m:y.key),s=o(y,s,m),null===d?l=y:d.sibling=y,d=y);return e&&v.forEach((function(e){return t(a,e)})),ai&&Qa(a,m),l}return function e(r,i,o,u){if("object"===typeof o&&null!==o&&o.type===I&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,l=i;null!==l;){if(l.key===c){if((c=o.type)===I){if(7===l.tag){n(r,l.sibling),(i=a(l,o.props.children)).return=r,r=i;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===R&&$i(c)===l.type){n(r,l.sibling),(i=a(l,o.props)).ref=Hi(r,l,o),i.return=r,r=i;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===I?((i=Fc(o.props.children,r.mode,u,o.key)).return=r,r=i):((u=Lc(o.type,o.key,o.props,null,r.mode,u)).ref=Hi(r,i,o),u.return=r,r=u)}return s(r);case x:e:{for(l=o.key;null!==i;){if(i.key===l){if(4===i.tag&&i.stateNode.containerInfo===o.containerInfo&&i.stateNode.implementation===o.implementation){n(r,i.sibling),(i=a(i,o.children||[])).return=r,r=i;break e}n(r,i);break}t(r,i),i=i.sibling}(i=zc(o,r.mode,u)).return=r,r=i}return s(r);case R:return e(r,i,(l=o._init)(o._payload),u)}if(te(o))return v(r,i,o,u);if(L(o))return m(r,i,o,u);qi(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==i&&6===i.tag?(n(r,i.sibling),(i=a(i,o)).return=r,r=i):(n(r,i),(i=Pc(o,r.mode,u)).return=r,r=i),s(r)):n(r,i)}}var Xi=Ki(!0),Yi=Ki(!1),Qi={},Ji=Sa(Qi),eo=Sa(Qi),to=Sa(Qi);function no(e){if(e===Qi)throw Error(i(174));return e}function ro(e,t){switch(Ea(to,t),Ea(eo,e),Ea(Ji,Qi),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ue(null,"");break;default:t=ue(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ta(Ji),Ea(Ji,t)}function ao(){Ta(Ji),Ta(eo),Ta(to)}function io(e){no(to.current);var t=no(Ji.current),n=ue(t,e.type);t!==n&&(Ea(eo,e),Ea(Ji,n))}function oo(e){eo.current===e&&(Ta(Ji),Ta(eo))}var so=Sa(0);function uo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function lo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var fo=k.ReactCurrentDispatcher,ho=k.ReactCurrentBatchConfig,po=0,vo=null,mo=null,go=null,yo=!1,bo=!1,ko=0,wo=0;function xo(){throw Error(i(321))}function Io(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function So(e,t,n,r,a,o){if(po=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fo.current=null===e||null===e.memoizedState?ss:us,e=n(r,a),bo){o=0;do{if(bo=!1,ko=0,25<=o)throw Error(i(301));o+=1,go=mo=null,t.updateQueue=null,fo.current=cs,e=n(r,a)}while(bo)}if(fo.current=os,t=null!==mo&&null!==mo.next,po=0,go=mo=vo=null,yo=!1,t)throw Error(i(300));return e}function To(){var e=0!==ko;return ko=0,e}function Eo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===go?vo.memoizedState=go=e:go=go.next=e,go}function No(){if(null===mo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=mo.next;var t=null===go?vo.memoizedState:go.next;if(null!==t)go=t,mo=e;else{if(null===e)throw Error(i(310));e={memoizedState:(mo=e).memoizedState,baseState:mo.baseState,baseQueue:mo.baseQueue,queue:mo.queue,next:null},null===go?vo.memoizedState=go=e:go=go.next=e}return go}function Co(e,t){return"function"===typeof t?t(e):t}function Zo(e){var t=No(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=mo,a=r.baseQueue,o=n.pending;if(null!==o){if(null!==a){var s=a.next;a.next=o.next,o.next=s}r.baseQueue=a=o,n.pending=null}if(null!==a){o=a.next,r=r.baseState;var u=s=null,c=null,l=o;do{var d=l.lane;if((po&d)===d)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var f={lane:d,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(u=c=f,s=r):c=c.next=f,vo.lanes|=d,Mu|=d}l=l.next}while(null!==l&&l!==o);null===c?s=r:c.next=u,sr(r,t.memoizedState)||(ks=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){a=e;do{o=a.lane,vo.lanes|=o,Mu|=o,a=a.next}while(a!==e)}else null===a&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function _o(e){var t=No(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,o=t.memoizedState;if(null!==a){n.pending=null;var s=a=a.next;do{o=e(o,s.action),s=s.next}while(s!==a);sr(o,t.memoizedState)||(ks=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Ao(){}function Ro(e,t){var n=vo,r=No(),a=t(),o=!sr(r.memoizedState,a);if(o&&(r.memoizedState=a,ks=!0),r=r.queue,jo(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==go&&1&go.memoizedState.tag){if(n.flags|=2048,zo(9,Oo.bind(null,n,r,a,t),void 0,null),null===_u)throw Error(i(349));0!==(30&po)||Do(n,t,a)}return a}function Do(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Oo(e,t,n,r){t.value=n,t.getSnapshot=r,Fo(t)&&Mo(e)}function Lo(e,t,n){return n((function(){Fo(t)&&Mo(e)}))}function Fo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function Mo(e){var t=Zi(e,1);null!==t&&rc(t,e,1,-1)}function Po(e){var t=Eo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:e},t.queue=e,e=e.dispatch=ns.bind(null,vo,e),[t.memoizedState,e]}function zo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Bo(){return No().memoizedState}function Vo(e,t,n,r){var a=Eo();vo.flags|=e,a.memoizedState=zo(1|t,n,void 0,void 0===r?null:r)}function Uo(e,t,n,r){var a=No();r=void 0===r?null:r;var i=void 0;if(null!==mo){var o=mo.memoizedState;if(i=o.destroy,null!==r&&Io(r,o.deps))return void(a.memoizedState=zo(t,n,i,r))}vo.flags|=e,a.memoizedState=zo(1|t,n,i,r)}function Wo(e,t){return Vo(8390656,8,e,t)}function jo(e,t){return Uo(2048,8,e,t)}function Go(e,t){return Uo(4,2,e,t)}function Ho(e,t){return Uo(4,4,e,t)}function qo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function $o(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Uo(4,4,qo.bind(null,t,e),n)}function Ko(){}function Xo(e,t){var n=No();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Io(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Yo(e,t){var n=No();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Io(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Qo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,ks=!0),e.memoizedState=n):(sr(n,t)||(n=vt(),vo.lanes|=n,Mu|=n,e.baseState=!0),t)}function Jo(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=ho.transition;ho.transition={};try{e(!1),t()}finally{bt=n,ho.transition=r}}function es(){return No().memoizedState}function ts(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rs(e))as(t,n);else if(null!==(n=Ci(e,t,n,r))){rc(n,e,r,tc()),is(n,t,r)}}function ns(e,t,n){var r=nc(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rs(e))as(t,a);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=i(o,n);if(a.hasEagerState=!0,a.eagerState=s,sr(s,o)){var u=t.interleaved;return null===u?(a.next=a,Ni(t)):(a.next=u.next,u.next=a),void(t.interleaved=a)}}catch(c){}null!==(n=Ci(e,t,a,r))&&(rc(n,e,r,a=tc()),is(n,t,r))}}function rs(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function as(e,t){bo=yo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function is(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var os={readContext:Ti,useCallback:xo,useContext:xo,useEffect:xo,useImperativeHandle:xo,useInsertionEffect:xo,useLayoutEffect:xo,useMemo:xo,useReducer:xo,useRef:xo,useState:xo,useDebugValue:xo,useDeferredValue:xo,useTransition:xo,useMutableSource:xo,useSyncExternalStore:xo,useId:xo,unstable_isNewReconciler:!1},ss={readContext:Ti,useCallback:function(e,t){return Eo().memoizedState=[e,void 0===t?null:t],e},useContext:Ti,useEffect:Wo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Vo(4194308,4,qo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Vo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Vo(4,2,e,t)},useMemo:function(e,t){var n=Eo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Eo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ts.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Eo().memoizedState=e},useState:Po,useDebugValue:Ko,useDeferredValue:function(e){return Eo().memoizedState=e},useTransition:function(){var e=Po(!1),t=e[0];return e=Jo.bind(null,e[1]),Eo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vo,a=Eo();if(ai){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===_u)throw Error(i(349));0!==(30&po)||Do(r,t,n)}a.memoizedState=n;var o={value:n,getSnapshot:t};return a.queue=o,Wo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,zo(9,Oo.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Eo(),t=_u.identifierPrefix;if(ai){var n=Ya;t=":"+t+"R"+(n=(Xa&~(1<<32-ot(Xa)-1)).toString(32)+n),0<(n=ko++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},us={readContext:Ti,useCallback:Xo,useContext:Ti,useEffect:jo,useImperativeHandle:$o,useInsertionEffect:Go,useLayoutEffect:Ho,useMemo:Yo,useReducer:Zo,useRef:Bo,useState:function(){return Zo(Co)},useDebugValue:Ko,useDeferredValue:function(e){return Qo(No(),mo.memoizedState,e)},useTransition:function(){return[Zo(Co)[0],No().memoizedState]},useMutableSource:Ao,useSyncExternalStore:Ro,useId:es,unstable_isNewReconciler:!1},cs={readContext:Ti,useCallback:Xo,useContext:Ti,useEffect:jo,useImperativeHandle:$o,useInsertionEffect:Go,useLayoutEffect:Ho,useMemo:Yo,useReducer:_o,useRef:Bo,useState:function(){return _o(Co)},useDebugValue:Ko,useDeferredValue:function(e){var t=No();return null===mo?t.memoizedState=e:Qo(t,mo.memoizedState,e)},useTransition:function(){return[_o(Co)[0],No().memoizedState]},useMutableSource:Ao,useSyncExternalStore:Ro,useId:es,unstable_isNewReconciler:!1};function ls(e,t){try{var n="",r=t;do{n+=V(r),r=r.return}while(r);var a=n}catch(i){a="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:t,stack:a,digest:null}}function ds(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function fs(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var hs="function"===typeof WeakMap?WeakMap:Map;function ps(e,t,n){(n=Di(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Gu||(Gu=!0,Hu=r),fs(0,t)},n}function vs(e,t,n){(n=Di(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){fs(0,t)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(n.callback=function(){fs(0,t),"function"!==typeof r&&(null===qu?qu=new Set([this]):qu.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ms(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new hs;var a=new Set;r.set(t,a)}else void 0===(a=r.get(t))&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=Ec.bind(null,e,t,n),t.then(e,e))}function gs(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ys(e,t,n,r,a){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Di(-1,1)).tag=2,Oi(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=a,e)}var bs=k.ReactCurrentOwner,ks=!1;function ws(e,t,n,r){t.child=null===e?Yi(t,null,n,r):Xi(t,e.child,n,r)}function xs(e,t,n,r,a){n=n.render;var i=t.ref;return Si(t,a),r=So(e,t,n,r,i,a),n=To(),null===e||ks?(ai&&n&&ei(t),t.flags|=1,ws(e,t,r,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Gs(e,t,a))}function Is(e,t,n,r,a){if(null===e){var i=n.type;return"function"!==typeof i||Dc(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Lc(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,Ss(e,t,i,r,a))}if(i=e.child,0===(e.lanes&a)){var o=i.memoizedProps;if((n=null!==(n=n.compare)?n:ur)(o,r)&&e.ref===t.ref)return Gs(e,t,a)}return t.flags|=1,(e=Oc(i,r)).ref=t.ref,e.return=t,t.child=e}function Ss(e,t,n,r,a){if(null!==e){var i=e.memoizedProps;if(ur(i,r)&&e.ref===t.ref){if(ks=!1,t.pendingProps=r=i,0===(e.lanes&a))return t.lanes=e.lanes,Gs(e,t,a);0!==(131072&e.flags)&&(ks=!0)}}return Ns(e,t,n,r,a)}function Ts(e,t,n){var r=t.pendingProps,a=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ea(Ou,Du),Du|=n;else{if(0===(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ea(Ou,Du),Du|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==i?i.baseLanes:n,Ea(Ou,Du),Du|=r}else null!==i?(r=i.baseLanes|n,t.memoizedState=null):r=n,Ea(Ou,Du),Du|=r;return ws(e,t,a,n),t.child}function Es(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ns(e,t,n,r,a){var i=Ra(n)?_a:Ca.current;return i=Aa(t,i),Si(t,a),n=So(e,t,n,r,i,a),r=To(),null===e||ks?(ai&&r&&ei(t),t.flags|=1,ws(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Gs(e,t,a))}function Cs(e,t,n,r,a){if(Ra(n)){var i=!0;Fa(t)}else i=!1;if(Si(t,a),null===t.stateNode)js(e,t),Wi(t,n,r),Gi(t,n,r,a),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var u=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ti(c):c=Aa(t,c=Ra(n)?_a:Ca.current);var l=n.getDerivedStateFromProps,d="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;d||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||u!==c)&&ji(t,o,r,c),_i=!1;var f=t.memoizedState;o.state=f,Mi(t,r,o,a),u=t.memoizedState,s!==r||f!==u||Za.current||_i?("function"===typeof l&&(Bi(t,n,l,r),u=t.memoizedState),(s=_i||Ui(t,n,s,r,f,u,c))?(d||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=c,r=s):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Ri(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:mi(t.type,s),o.props=c,d=t.pendingProps,f=o.context,"object"===typeof(u=n.contextType)&&null!==u?u=Ti(u):u=Aa(t,u=Ra(n)?_a:Ca.current);var h=n.getDerivedStateFromProps;(l="function"===typeof h||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==d||f!==u)&&ji(t,o,r,u),_i=!1,f=t.memoizedState,o.state=f,Mi(t,r,o,a);var p=t.memoizedState;s!==d||f!==p||Za.current||_i?("function"===typeof h&&(Bi(t,n,h,r),p=t.memoizedState),(c=_i||Ui(t,n,c,r,f,p,u)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,u),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,u)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=c):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return Zs(e,t,n,r,i,a)}function Zs(e,t,n,r,a,i){Es(e,t);var o=0!==(128&t.flags);if(!r&&!o)return a&&Ma(t,n,!1),Gs(e,t,i);r=t.stateNode,bs.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Xi(t,e.child,null,i),t.child=Xi(t,null,s,i)):ws(e,t,s,i),t.memoizedState=r.state,a&&Ma(t,n,!0),t.child}function _s(e){var t=e.stateNode;t.pendingContext?Oa(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oa(0,t.context,!1),ro(e,t.containerInfo)}function As(e,t,n,r,a){return hi(),pi(a),t.flags|=256,ws(e,t,n,r),t.child}var Rs,Ds,Os,Ls,Fs={dehydrated:null,treeContext:null,retryLane:0};function Ms(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ps(e,t,n){var r,a=t.pendingProps,o=so.current,s=!1,u=0!==(128&t.flags);if((r=u)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ea(so,1&o),null===e)return ci(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(u=a.children,e=a.fallback,s?(a=t.mode,s=t.child,u={mode:"hidden",children:u},0===(1&a)&&null!==s?(s.childLanes=0,s.pendingProps=u):s=Mc(u,a,0,null),e=Fc(e,a,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Ms(n),t.memoizedState=Fs,e):zs(t,u));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,a,o,s){if(n)return 256&t.flags?(t.flags&=-257,Bs(e,t,s,r=ds(Error(i(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,a=t.mode,r=Mc({mode:"visible",children:r.children},a,0,null),(o=Fc(o,a,s,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Xi(t,e.child,null,s),t.child.memoizedState=Ms(s),t.memoizedState=Fs,o);if(0===(1&t.mode))return Bs(e,t,s,null);if("$!"===a.data){if(r=a.nextSibling&&a.nextSibling.dataset)var u=r.dgst;return r=u,Bs(e,t,s,r=ds(o=Error(i(419)),r,void 0))}if(u=0!==(s&e.childLanes),ks||u){if(null!==(r=_u)){switch(s&-s){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}0!==(a=0!==(a&(r.suspendedLanes|s))?0:a)&&a!==o.retryLane&&(o.retryLane=a,Zi(e,a),rc(r,e,a,-1))}return mc(),Bs(e,t,s,r=ds(Error(i(421))))}return"$?"===a.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),a._reactRetry=t,null):(e=o.treeContext,ri=ca(a.nextSibling),ni=t,ai=!0,ii=null,null!==e&&(qa[$a++]=Xa,qa[$a++]=Ya,qa[$a++]=Ka,Xa=e.id,Ya=e.overflow,Ka=t),t=zs(t,r.children),t.flags|=4096,t)}(e,t,u,a,r,o,n);if(s){s=a.fallback,u=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:a.children};return 0===(1&u)&&t.child!==o?((a=t.child).childLanes=0,a.pendingProps=c,t.deletions=null):(a=Oc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?s=Oc(r,s):(s=Fc(s,u,n,null)).flags|=2,s.return=t,a.return=t,a.sibling=s,t.child=a,a=s,s=t.child,u=null===(u=e.child.memoizedState)?Ms(n):{baseLanes:u.baseLanes|n,cachePool:null,transitions:u.transitions},s.memoizedState=u,s.childLanes=e.childLanes&~n,t.memoizedState=Fs,a}return e=(s=e.child).sibling,a=Oc(s,{mode:"visible",children:a.children}),0===(1&t.mode)&&(a.lanes=n),a.return=t,a.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=a,t.memoizedState=null,a}function zs(e,t){return(t=Mc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Bs(e,t,n,r){return null!==r&&pi(r),Xi(t,e.child,null,n),(e=zs(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Vs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ii(e.return,t,n)}function Us(e,t,n,r,a){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=a)}function Ws(e,t,n){var r=t.pendingProps,a=r.revealOrder,i=r.tail;if(ws(e,t,r.children,n),0!==(2&(r=so.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Vs(e,n,t);else if(19===e.tag)Vs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ea(so,r),0===(1&t.mode))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===uo(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),Us(t,!1,a,n,i);break;case"backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===uo(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}Us(t,!0,n,null,i);break;case"together":Us(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function js(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Gs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Mu|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=Oc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Oc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Hs(e,t){if(!ai)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function qs(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=14680064&a.subtreeFlags,r|=14680064&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function $s(e,t,n){var r=t.pendingProps;switch(ti(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qs(t),null;case 1:case 17:return Ra(t.type)&&Da(),qs(t),null;case 3:return r=t.stateNode,ao(),Ta(Za),Ta(Ca),lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(di(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ii&&(sc(ii),ii=null))),Ds(e,t),qs(t),null;case 5:oo(t);var a=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Os(e,t,n,r,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(i(166));return qs(t),null}if(e=no(Ji.current),di(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[fa]=t,r[ha]=o,e=0!==(1&t.mode),n){case"dialog":zr("cancel",r),zr("close",r);break;case"iframe":case"object":case"embed":zr("load",r);break;case"video":case"audio":for(a=0;a<Lr.length;a++)zr(Lr[a],r);break;case"source":zr("error",r);break;case"img":case"image":case"link":zr("error",r),zr("load",r);break;case"details":zr("toggle",r);break;case"input":X(r,o),zr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},zr("invalid",r);break;case"textarea":ae(r,o),zr("invalid",r)}for(var u in ye(n,o),a=null,o)if(o.hasOwnProperty(u)){var c=o[u];"children"===u?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Qr(r.textContent,c,e),a=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Qr(r.textContent,c,e),a=["children",""+c]):s.hasOwnProperty(u)&&null!=c&&"onScroll"===u&&zr("scroll",r)}switch(n){case"input":H(r),J(r,o,!0);break;case"textarea":H(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Jr)}r=a,t.updateQueue=r,null!==r&&(t.flags|=4)}else{u=9===a.nodeType?a:a.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),"select"===n&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[fa]=t,e[ha]=r,Rs(e,t,!1,!1),t.stateNode=e;e:{switch(u=be(n,r),n){case"dialog":zr("cancel",e),zr("close",e),a=r;break;case"iframe":case"object":case"embed":zr("load",e),a=r;break;case"video":case"audio":for(a=0;a<Lr.length;a++)zr(Lr[a],e);a=r;break;case"source":zr("error",e),a=r;break;case"img":case"image":case"link":zr("error",e),zr("load",e),a=r;break;case"details":zr("toggle",e),a=r;break;case"input":X(e,r),a=K(e,r),zr("invalid",e);break;case"option":default:a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=M({},r,{value:void 0}),zr("invalid",e);break;case"textarea":ae(e,r),a=re(e,r),zr("invalid",e)}for(o in ye(n,a),c=a)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?me(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&de(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&fe(e,l):"number"===typeof l&&fe(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(s.hasOwnProperty(o)?null!=l&&"onScroll"===o&&zr("scroll",e):null!=l&&b(e,o,l,u))}switch(n){case"input":H(e),J(e,r,!1);break;case"textarea":H(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+j(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=Jr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return qs(t),null;case 6:if(e&&null!=t.stateNode)Ls(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(i(166));if(n=no(to.current),no(Ji.current),di(t)){if(r=t.stateNode,n=t.memoizedProps,r[fa]=t,(o=r.nodeValue!==n)&&null!==(e=ni))switch(e.tag){case 3:Qr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Qr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[fa]=t,t.stateNode=r}return qs(t),null;case 13:if(Ta(so),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ai&&null!==ri&&0!==(1&t.mode)&&0===(128&t.flags))fi(),hi(),t.flags|=98560,o=!1;else if(o=di(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(i(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(i(317));o[fa]=t}else hi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;qs(t),o=!1}else null!==ii&&(sc(ii),ii=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&so.current)?0===Lu&&(Lu=3):mc())),null!==t.updateQueue&&(t.flags|=4),qs(t),null);case 4:return ao(),Ds(e,t),null===e&&Ur(t.stateNode.containerInfo),qs(t),null;case 10:return xi(t.type._context),qs(t),null;case 19:if(Ta(so),null===(o=t.memoizedState))return qs(t),null;if(r=0!==(128&t.flags),null===(u=o.rendering))if(r)Hs(o,!1);else{if(0!==Lu||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(u=uo(e))){for(t.flags|=128,Hs(o,!1),null!==(r=u.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(u=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=u.childLanes,o.lanes=u.lanes,o.child=u.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=u.memoizedProps,o.memoizedState=u.memoizedState,o.updateQueue=u.updateQueue,o.type=u.type,e=u.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ea(so,1&so.current|2),t.child}e=e.sibling}null!==o.tail&&Ye()>Wu&&(t.flags|=128,r=!0,Hs(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=uo(u))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Hs(o,!0),null===o.tail&&"hidden"===o.tailMode&&!u.alternate&&!ai)return qs(t),null}else 2*Ye()-o.renderingStartTime>Wu&&1073741824!==n&&(t.flags|=128,r=!0,Hs(o,!1),t.lanes=4194304);o.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=o.last)?n.sibling=u:t.child=u,o.last=u)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Ye(),t.sibling=null,n=so.current,Ea(so,r?1&n|2:1&n),t):(qs(t),null);case 22:case 23:return fc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Du)&&(qs(t),6&t.subtreeFlags&&(t.flags|=8192)):qs(t),null;case 24:case 25:return null}throw Error(i(156,t.tag))}function Ks(e,t){switch(ti(t),t.tag){case 1:return Ra(t.type)&&Da(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return ao(),Ta(Za),Ta(Ca),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Ta(so),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));hi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ta(so),null;case 4:return ao(),null;case 10:return xi(t.type._context),null;case 22:case 23:return fc(),null;default:return null}}Rs=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ds=function(){},Os=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,no(Ji.current);var i,o=null;switch(n){case"input":a=K(e,a),r=K(e,r),o=[];break;case"select":a=M({},a,{value:void 0}),r=M({},r,{value:void 0}),o=[];break;case"textarea":a=re(e,a),r=re(e,r),o=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(e.onclick=Jr)}for(l in ye(n,r),n=null,a)if(!r.hasOwnProperty(l)&&a.hasOwnProperty(l)&&null!=a[l])if("style"===l){var u=a[l];for(i in u)u.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(s.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(u=null!=a?a[l]:void 0,r.hasOwnProperty(l)&&c!==u&&(null!=c||null!=u))if("style"===l)if(u){for(i in u)!u.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in c)c.hasOwnProperty(i)&&u[i]!==c[i]&&(n||(n={}),n[i]=c[i])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(s.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&zr("scroll",e),o||u===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Ls=function(e,t,n,r){n!==r&&(t.flags|=4)};var Xs=!1,Ys=!1,Qs="function"===typeof WeakSet?WeakSet:Set,Js=null;function eu(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Tc(e,t,r)}else n.current=null}function tu(e,t,n){try{n()}catch(r){Tc(e,t,r)}}var nu=!1;function ru(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var a=r=r.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,void 0!==i&&tu(t,n,i)}a=a.next}while(a!==r)}}function au(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function iu(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ou(e){var t=e.alternate;null!==t&&(e.alternate=null,ou(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[fa],delete t[ha],delete t[va],delete t[ma],delete t[ga])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function su(e){return 5===e.tag||3===e.tag||4===e.tag}function uu(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||su(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Jr));else if(4!==r&&null!==(e=e.child))for(cu(e,t,n),e=e.sibling;null!==e;)cu(e,t,n),e=e.sibling}function lu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(lu(e,t,n),e=e.sibling;null!==e;)lu(e,t,n),e=e.sibling}var du=null,fu=!1;function hu(e,t,n){for(n=n.child;null!==n;)pu(e,t,n),n=n.sibling}function pu(e,t,n){if(it&&"function"===typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(at,n)}catch(s){}switch(n.tag){case 5:Ys||eu(n,t);case 6:var r=du,a=fu;du=null,hu(e,t,n),fu=a,null!==(du=r)&&(fu?(e=du,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):du.removeChild(n.stateNode));break;case 18:null!==du&&(fu?(e=du,n=n.stateNode,8===e.nodeType?ua(e.parentNode,n):1===e.nodeType&&ua(e,n),Ut(e)):ua(du,n.stateNode));break;case 4:r=du,a=fu,du=n.stateNode.containerInfo,fu=!0,hu(e,t,n),du=r,fu=a;break;case 0:case 11:case 14:case 15:if(!Ys&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){a=r=r.next;do{var i=a,o=i.destroy;i=i.tag,void 0!==o&&(0!==(2&i)||0!==(4&i))&&tu(n,t,o),a=a.next}while(a!==r)}hu(e,t,n);break;case 1:if(!Ys&&(eu(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Tc(n,t,s)}hu(e,t,n);break;case 21:hu(e,t,n);break;case 22:1&n.mode?(Ys=(r=Ys)||null!==n.memoizedState,hu(e,t,n),Ys=r):hu(e,t,n);break;default:hu(e,t,n)}}function vu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Qs),t.forEach((function(t){var r=Zc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function mu(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var a=n[r];try{var o=e,s=t,u=s;e:for(;null!==u;){switch(u.tag){case 5:du=u.stateNode,fu=!1;break e;case 3:case 4:du=u.stateNode.containerInfo,fu=!0;break e}u=u.return}if(null===du)throw Error(i(160));pu(o,s,a),du=null,fu=!1;var c=a.alternate;null!==c&&(c.return=null),a.return=null}catch(l){Tc(a,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gu(t,e),t=t.sibling}function gu(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(mu(t,e),yu(e),4&r){try{ru(3,e,e.return),au(3,e)}catch(m){Tc(e,e.return,m)}try{ru(5,e,e.return)}catch(m){Tc(e,e.return,m)}}break;case 1:mu(t,e),yu(e),512&r&&null!==n&&eu(n,n.return);break;case 5:if(mu(t,e),yu(e),512&r&&null!==n&&eu(n,n.return),32&e.flags){var a=e.stateNode;try{fe(a,"")}catch(m){Tc(e,e.return,m)}}if(4&r&&null!=(a=e.stateNode)){var o=e.memoizedProps,s=null!==n?n.memoizedProps:o,u=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===u&&"radio"===o.type&&null!=o.name&&Y(a,o),be(u,s);var l=be(u,o);for(s=0;s<c.length;s+=2){var d=c[s],f=c[s+1];"style"===d?me(a,f):"dangerouslySetInnerHTML"===d?de(a,f):"children"===d?fe(a,f):b(a,d,f,l)}switch(u){case"input":Q(a,o);break;case"textarea":ie(a,o);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(a,!!o.multiple,p,!1):h!==!!o.multiple&&(null!=o.defaultValue?ne(a,!!o.multiple,o.defaultValue,!0):ne(a,!!o.multiple,o.multiple?[]:"",!1))}a[ha]=o}catch(m){Tc(e,e.return,m)}}break;case 6:if(mu(t,e),yu(e),4&r){if(null===e.stateNode)throw Error(i(162));a=e.stateNode,o=e.memoizedProps;try{a.nodeValue=o}catch(m){Tc(e,e.return,m)}}break;case 3:if(mu(t,e),yu(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Ut(t.containerInfo)}catch(m){Tc(e,e.return,m)}break;case 4:default:mu(t,e),yu(e);break;case 13:mu(t,e),yu(e),8192&(a=e.child).flags&&(o=null!==a.memoizedState,a.stateNode.isHidden=o,!o||null!==a.alternate&&null!==a.alternate.memoizedState||(Uu=Ye())),4&r&&vu(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Ys=(l=Ys)||d,mu(t,e),Ys=l):mu(t,e),yu(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!d&&0!==(1&e.mode))for(Js=e,d=e.child;null!==d;){for(f=Js=d;null!==Js;){switch(p=(h=Js).child,h.tag){case 0:case 11:case 14:case 15:ru(4,h,h.return);break;case 1:eu(h,h.return);var v=h.stateNode;if("function"===typeof v.componentWillUnmount){r=h,n=h.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(m){Tc(r,n,m)}}break;case 5:eu(h,h.return);break;case 22:if(null!==h.memoizedState){xu(f);continue}}null!==p?(p.return=h,Js=p):xu(f)}d=d.sibling}e:for(d=null,f=e;;){if(5===f.tag){if(null===d){d=f;try{a=f.stateNode,l?"function"===typeof(o=a.style).setProperty?o.setProperty("display","none","important"):o.display="none":(u=f.stateNode,s=void 0!==(c=f.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,u.style.display=ve("display",s))}catch(m){Tc(e,e.return,m)}}}else if(6===f.tag){if(null===d)try{f.stateNode.nodeValue=l?"":f.memoizedProps}catch(m){Tc(e,e.return,m)}}else if((22!==f.tag&&23!==f.tag||null===f.memoizedState||f===e)&&null!==f.child){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;null===f.sibling;){if(null===f.return||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:mu(t,e),yu(e),4&r&&vu(e);case 21:}}function yu(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(su(n)){var r=n;break e}n=n.return}throw Error(i(160))}switch(r.tag){case 5:var a=r.stateNode;32&r.flags&&(fe(a,""),r.flags&=-33),lu(e,uu(e),a);break;case 3:case 4:var o=r.stateNode.containerInfo;cu(e,uu(e),o);break;default:throw Error(i(161))}}catch(s){Tc(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function bu(e,t,n){Js=e,ku(e,t,n)}function ku(e,t,n){for(var r=0!==(1&e.mode);null!==Js;){var a=Js,i=a.child;if(22===a.tag&&r){var o=null!==a.memoizedState||Xs;if(!o){var s=a.alternate,u=null!==s&&null!==s.memoizedState||Ys;s=Xs;var c=Ys;if(Xs=o,(Ys=u)&&!c)for(Js=a;null!==Js;)u=(o=Js).child,22===o.tag&&null!==o.memoizedState?Iu(a):null!==u?(u.return=o,Js=u):Iu(a);for(;null!==i;)Js=i,ku(i,t,n),i=i.sibling;Js=a,Xs=s,Ys=c}wu(e)}else 0!==(8772&a.subtreeFlags)&&null!==i?(i.return=a,Js=i):wu(e)}}function wu(e){for(;null!==Js;){var t=Js;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ys||au(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ys)if(null===n)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:mi(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Pi(t,o,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Pi(t,s,n)}break;case 5:var u=t.stateNode;if(null===n&&4&t.flags){n=u;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var d=l.memoizedState;if(null!==d){var f=d.dehydrated;null!==f&&Ut(f)}}}break;default:throw Error(i(163))}Ys||512&t.flags&&iu(t)}catch(h){Tc(t,t.return,h)}}if(t===e){Js=null;break}if(null!==(n=t.sibling)){n.return=t.return,Js=n;break}Js=t.return}}function xu(e){for(;null!==Js;){var t=Js;if(t===e){Js=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Js=n;break}Js=t.return}}function Iu(e){for(;null!==Js;){var t=Js;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{au(4,t)}catch(u){Tc(t,n,u)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var a=t.return;try{r.componentDidMount()}catch(u){Tc(t,a,u)}}var i=t.return;try{iu(t)}catch(u){Tc(t,i,u)}break;case 5:var o=t.return;try{iu(t)}catch(u){Tc(t,o,u)}}}catch(u){Tc(t,t.return,u)}if(t===e){Js=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Js=s;break}Js=t.return}}var Su,Tu=Math.ceil,Eu=k.ReactCurrentDispatcher,Nu=k.ReactCurrentOwner,Cu=k.ReactCurrentBatchConfig,Zu=0,_u=null,Au=null,Ru=0,Du=0,Ou=Sa(0),Lu=0,Fu=null,Mu=0,Pu=0,zu=0,Bu=null,Vu=null,Uu=0,Wu=1/0,ju=null,Gu=!1,Hu=null,qu=null,$u=!1,Ku=null,Xu=0,Yu=0,Qu=null,Ju=-1,ec=0;function tc(){return 0!==(6&Zu)?Ye():-1!==Ju?Ju:Ju=Ye()}function nc(e){return 0===(1&e.mode)?1:0!==(2&Zu)&&0!==Ru?Ru&-Ru:null!==vi.transition?(0===ec&&(ec=vt()),ec):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function rc(e,t,n,r){if(50<Yu)throw Yu=0,Qu=null,Error(i(185));gt(e,n,r),0!==(2&Zu)&&e===_u||(e===_u&&(0===(2&Zu)&&(Pu|=n),4===Lu&&uc(e,Ru)),ac(e,r),1===n&&0===Zu&&0===(1&t.mode)&&(Wu=Ye()+500,za&&Ua()))}function ac(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-ot(i),s=1<<o,u=a[o];-1===u?0!==(s&n)&&0===(s&r)||(a[o]=ht(s,t)):u<=t&&(e.expiredLanes|=s),i&=~s}}(e,t);var r=ft(e,e===_u?Ru:0);if(0===r)null!==n&&$e(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&$e(n),1===t)0===e.tag?function(e){za=!0,Va(e)}(cc.bind(null,e)):Va(cc.bind(null,e)),oa((function(){0===(6&Zu)&&Ua()})),n=null;else{switch(kt(r)){case 1:n=Je;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=_c(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Ju=-1,ec=0,0!==(6&Zu))throw Error(i(327));var n=e.callbackNode;if(Ic()&&e.callbackNode!==n)return null;var r=ft(e,e===_u?Ru:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gc(e,r);else{t=r;var a=Zu;Zu|=2;var o=vc();for(_u===e&&Ru===t||(ju=null,Wu=Ye()+500,hc(e,t));;)try{bc();break}catch(u){pc(e,u)}wi(),Eu.current=o,Zu=a,null!==Au?t=0:(_u=null,Ru=0,t=Lu)}if(0!==t){if(2===t&&(0!==(a=pt(e))&&(r=a,t=oc(e,a))),1===t)throw n=Fu,hc(e,0),uc(e,r),ac(e,Ye()),n;if(6===t)uc(e,r);else{if(a=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var a=n[r],i=a.getSnapshot;a=a.value;try{if(!sr(i(),a))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(a)&&(2===(t=gc(e,r))&&(0!==(o=pt(e))&&(r=o,t=oc(e,o))),1===t))throw n=Fu,hc(e,0),uc(e,r),ac(e,Ye()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(i(345));case 2:case 5:xc(e,Vu,ju);break;case 3:if(uc(e,r),(130023424&r)===r&&10<(t=Uu+500-Ye())){if(0!==ft(e,0))break;if(((a=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=ra(xc.bind(null,e,Vu,ju),t);break}xc(e,Vu,ju);break;case 4:if(uc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,a=-1;0<r;){var s=31-ot(r);o=1<<s,(s=t[s])>a&&(a=s),r&=~o}if(r=a,10<(r=(120>(r=Ye()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Tu(r/1960))-r)){e.timeoutHandle=ra(xc.bind(null,e,Vu,ju),r);break}xc(e,Vu,ju);break;default:throw Error(i(329))}}}return ac(e,Ye()),e.callbackNode===n?ic.bind(null,e):null}function oc(e,t){var n=Bu;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=Vu,Vu=n,null!==t&&sc(t)),e}function sc(e){null===Vu?Vu=e:Vu.push.apply(Vu,e)}function uc(e,t){for(t&=~zu,t&=~Pu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&Zu))throw Error(i(327));Ic();var t=ft(e,0);if(0===(1&t))return ac(e,Ye()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Fu,hc(e,0),uc(e,t),ac(e,Ye()),n;if(6===n)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xc(e,Vu,ju),ac(e,Ye()),null}function lc(e,t){var n=Zu;Zu|=1;try{return e(t)}finally{0===(Zu=n)&&(Wu=Ye()+500,za&&Ua())}}function dc(e){null!==Ku&&0===Ku.tag&&0===(6&Zu)&&Ic();var t=Zu;Zu|=1;var n=Cu.transition,r=bt;try{if(Cu.transition=null,bt=1,e)return e()}finally{bt=r,Cu.transition=n,0===(6&(Zu=t))&&Ua()}}function fc(){Du=Ou.current,Ta(Ou)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,aa(n)),null!==Au)for(n=Au.return;null!==n;){var r=n;switch(ti(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Da();break;case 3:ao(),Ta(Za),Ta(Ca),lo();break;case 5:oo(r);break;case 4:ao();break;case 13:case 19:Ta(so);break;case 10:xi(r.type._context);break;case 22:case 23:fc()}n=n.return}if(_u=e,Au=e=Oc(e.current,null),Ru=Du=t,Lu=0,Fu=null,zu=Pu=Mu=0,Vu=Bu=null,null!==Ei){for(t=0;t<Ei.length;t++)if(null!==(r=(n=Ei[t]).interleaved)){n.interleaved=null;var a=r.next,i=n.pending;if(null!==i){var o=i.next;i.next=a,r.next=o}n.pending=r}Ei=null}return e}function pc(e,t){for(;;){var n=Au;try{if(wi(),fo.current=os,yo){for(var r=vo.memoizedState;null!==r;){var a=r.queue;null!==a&&(a.pending=null),r=r.next}yo=!1}if(po=0,go=mo=vo=null,bo=!1,ko=0,Nu.current=null,null===n||null===n.return){Lu=1,Fu=t,Au=null;break}e:{var o=e,s=n.return,u=n,c=t;if(t=Ru,u.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,d=u,f=d.tag;if(0===(1&d.mode)&&(0===f||11===f||15===f)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=gs(s);if(null!==p){p.flags&=-257,ys(p,s,u,0,t),1&p.mode&&ms(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var m=new Set;m.add(c),t.updateQueue=m}else v.add(c);break e}if(0===(1&t)){ms(o,l,t),mc();break e}c=Error(i(426))}else if(ai&&1&u.mode){var g=gs(s);if(null!==g){0===(65536&g.flags)&&(g.flags|=256),ys(g,s,u,0,t),pi(ls(c,u));break e}}o=c=ls(c,u),4!==Lu&&(Lu=2),null===Bu?Bu=[o]:Bu.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Fi(o,ps(0,c,t));break e;case 1:u=c;var y=o.type,b=o.stateNode;if(0===(128&o.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===qu||!qu.has(b)))){o.flags|=65536,t&=-t,o.lanes|=t,Fi(o,vs(o,u,t));break e}}o=o.return}while(null!==o)}wc(n)}catch(k){t=k,Au===n&&null!==n&&(Au=n=n.return);continue}break}}function vc(){var e=Eu.current;return Eu.current=os,null===e?os:e}function mc(){0!==Lu&&3!==Lu&&2!==Lu||(Lu=4),null===_u||0===(268435455&Mu)&&0===(268435455&Pu)||uc(_u,Ru)}function gc(e,t){var n=Zu;Zu|=2;var r=vc();for(_u===e&&Ru===t||(ju=null,hc(e,t));;)try{yc();break}catch(a){pc(e,a)}if(wi(),Zu=n,Eu.current=r,null!==Au)throw Error(i(261));return _u=null,Ru=0,Lu}function yc(){for(;null!==Au;)kc(Au)}function bc(){for(;null!==Au&&!Ke();)kc(Au)}function kc(e){var t=Su(e.alternate,e,Du);e.memoizedProps=e.pendingProps,null===t?wc(e):Au=t,Nu.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=$s(n,t,Du)))return void(Au=n)}else{if(null!==(n=Ks(n,t)))return n.flags&=32767,void(Au=n);if(null===e)return Lu=6,void(Au=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Au=t);Au=t=e}while(null!==t);0===Lu&&(Lu=5)}function xc(e,t,n){var r=bt,a=Cu.transition;try{Cu.transition=null,bt=1,function(e,t,n,r){do{Ic()}while(null!==Ku);if(0!==(6&Zu))throw Error(i(327));n=e.finishedWork;var a=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-ot(n),i=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~i}}(e,o),e===_u&&(Au=_u=null,Ru=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||$u||($u=!0,_c(tt,(function(){return Ic(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Cu.transition,Cu.transition=null;var s=bt;bt=1;var u=Zu;Zu|=4,Nu.current=null,function(e,t){if(ea=jt,hr(e=fr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var a=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var s=0,u=-1,c=-1,l=0,d=0,f=e,h=null;t:for(;;){for(var p;f!==n||0!==a&&3!==f.nodeType||(u=s+a),f!==o||0!==r&&3!==f.nodeType||(c=s+r),3===f.nodeType&&(s+=f.nodeValue.length),null!==(p=f.firstChild);)h=f,f=p;for(;;){if(f===e)break t;if(h===n&&++l===a&&(u=s),h===o&&++d===r&&(c=s),null!==(p=f.nextSibling))break;h=(f=h).parentNode}f=p}n=-1===u||-1===c?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ta={focusedElem:e,selectionRange:n},jt=!1,Js=t;null!==Js;)if(e=(t=Js).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Js=e;else for(;null!==Js;){t=Js;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var m=v.memoizedProps,g=v.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:mi(t.type,m),g);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var k=t.stateNode.containerInfo;1===k.nodeType?k.textContent="":9===k.nodeType&&k.documentElement&&k.removeChild(k.documentElement);break;default:throw Error(i(163))}}catch(w){Tc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Js=e;break}Js=t.return}v=nu,nu=!1}(e,n),gu(n,e),pr(ta),jt=!!ea,ta=ea=null,e.current=n,bu(n,e,a),Xe(),Zu=u,bt=s,Cu.transition=o}else e.current=n;if($u&&($u=!1,Ku=e,Xu=a),o=e.pendingLanes,0===o&&(qu=null),function(e){if(it&&"function"===typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(at,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ac(e,Ye()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(Gu)throw Gu=!1,e=Hu,Hu=null,e;0!==(1&Xu)&&0!==e.tag&&Ic(),o=e.pendingLanes,0!==(1&o)?e===Qu?Yu++:(Yu=0,Qu=e):Yu=0,Ua()}(e,t,n,r)}finally{Cu.transition=a,bt=r}return null}function Ic(){if(null!==Ku){var e=kt(Xu),t=Cu.transition,n=bt;try{if(Cu.transition=null,bt=16>e?16:e,null===Ku)var r=!1;else{if(e=Ku,Ku=null,Xu=0,0!==(6&Zu))throw Error(i(331));var a=Zu;for(Zu|=4,Js=e.current;null!==Js;){var o=Js,s=o.child;if(0!==(16&Js.flags)){var u=o.deletions;if(null!==u){for(var c=0;c<u.length;c++){var l=u[c];for(Js=l;null!==Js;){var d=Js;switch(d.tag){case 0:case 11:case 15:ru(8,d,o)}var f=d.child;if(null!==f)f.return=d,Js=f;else for(;null!==Js;){var h=(d=Js).sibling,p=d.return;if(ou(d),d===l){Js=null;break}if(null!==h){h.return=p,Js=h;break}Js=p}}}var v=o.alternate;if(null!==v){var m=v.child;if(null!==m){v.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(null!==m)}}Js=o}}if(0!==(2064&o.subtreeFlags)&&null!==s)s.return=o,Js=s;else e:for(;null!==Js;){if(0!==(2048&(o=Js).flags))switch(o.tag){case 0:case 11:case 15:ru(9,o,o.return)}var y=o.sibling;if(null!==y){y.return=o.return,Js=y;break e}Js=o.return}}var b=e.current;for(Js=b;null!==Js;){var k=(s=Js).child;if(0!==(2064&s.subtreeFlags)&&null!==k)k.return=s,Js=k;else e:for(s=b;null!==Js;){if(0!==(2048&(u=Js).flags))try{switch(u.tag){case 0:case 11:case 15:au(9,u)}}catch(x){Tc(u,u.return,x)}if(u===s){Js=null;break e}var w=u.sibling;if(null!==w){w.return=u.return,Js=w;break e}Js=u.return}}if(Zu=a,Ua(),it&&"function"===typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(at,e)}catch(x){}r=!0}return r}finally{bt=n,Cu.transition=t}}return!1}function Sc(e,t,n){e=Oi(e,t=ps(0,t=ls(n,t),1),1),t=tc(),null!==e&&(gt(e,1,t),ac(e,t))}function Tc(e,t,n){if(3===e.tag)Sc(e,e,n);else for(;null!==t;){if(3===t.tag){Sc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===qu||!qu.has(r))){t=Oi(t,e=vs(t,e=ls(n,e),1),1),e=tc(),null!==t&&(gt(t,1,e),ac(t,e));break}}t=t.return}}function Ec(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,_u===e&&(Ru&n)===n&&(4===Lu||3===Lu&&(130023424&Ru)===Ru&&500>Ye()-Uu?hc(e,0):zu|=n),ac(e,t)}function Nc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=tc();null!==(e=Zi(e,t))&&(gt(e,t,n),ac(e,n))}function Cc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Nc(e,n)}function Zc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;null!==a&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(i(314))}null!==r&&r.delete(t),Nc(e,n)}function _c(e,t){return qe(e,t)}function Ac(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rc(e,t,n,r){return new Ac(e,t,n,r)}function Dc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Oc(e,t){var n=e.alternate;return null===n?((n=Rc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lc(e,t,n,r,a,o){var s=2;if(r=e,"function"===typeof e)Dc(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case I:return Fc(n.children,a,o,t);case S:s=8,a|=8;break;case T:return(e=Rc(12,n,t,2|a)).elementType=T,e.lanes=o,e;case Z:return(e=Rc(13,n,t,a)).elementType=Z,e.lanes=o,e;case _:return(e=Rc(19,n,t,a)).elementType=_,e.lanes=o,e;case D:return Mc(n,a,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case E:s=10;break e;case N:s=9;break e;case C:s=11;break e;case A:s=14;break e;case R:s=16,r=null;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=Rc(s,n,t,a)).elementType=e,t.type=r,t.lanes=o,t}function Fc(e,t,n,r){return(e=Rc(7,e,r,t)).lanes=n,e}function Mc(e,t,n,r){return(e=Rc(22,e,r,t)).elementType=D,e.lanes=n,e.stateNode={isHidden:!1},e}function Pc(e,t,n){return(e=Rc(6,e,null,t)).lanes=n,e}function zc(e,t,n){return(t=Rc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Bc(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Vc(e,t,n,r,a,i,o,s,u){return e=new Bc(e,t,n,s,u),1===t?(t=1,!0===i&&(t|=8)):t=0,i=Rc(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ai(i),e}function Uc(e){if(!e)return Na;e:{if(Ue(e=e._reactInternals)!==e||1!==e.tag)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ra(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(i(171))}if(1===e.tag){var n=e.type;if(Ra(n))return La(e,n,t)}return t}function Wc(e,t,n,r,a,i,o,s,u){return(e=Vc(n,r,!0,e,0,i,0,s,u)).context=Uc(null),n=e.current,(i=Di(r=tc(),a=nc(n))).callback=void 0!==t&&null!==t?t:null,Oi(n,i,a),e.current.lanes=a,gt(e,a,r),ac(e,r),e}function jc(e,t,n,r){var a=t.current,i=tc(),o=nc(a);return n=Uc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Di(i,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Oi(a,t,o))&&(rc(e,a,o,i),Li(e,a,o)),o}function Gc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function qc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}Su=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Za.current)ks=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ks=!1,function(e,t,n){switch(t.tag){case 3:_s(t),hi();break;case 5:io(t);break;case 1:Ra(t.type)&&Fa(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;Ea(gi,r._currentValue),r._currentValue=a;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ea(so,1&so.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ps(e,t,n):(Ea(so,1&so.current),null!==(e=Gs(e,t,n))?e.sibling:null);Ea(so,1&so.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Ws(e,t,n);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),Ea(so,so.current),r)break;return null;case 22:case 23:return t.lanes=0,Ts(e,t,n)}return Gs(e,t,n)}(e,t,n);ks=0!==(131072&e.flags)}else ks=!1,ai&&0!==(1048576&t.flags)&&Ja(t,Ha,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;js(e,t),e=t.pendingProps;var a=Aa(t,Ca.current);Si(t,n),a=So(null,t,r,e,a,n);var o=To();return t.flags|=1,"object"===typeof a&&null!==a&&"function"===typeof a.render&&void 0===a.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ra(r)?(o=!0,Fa(t)):o=!1,t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,Ai(t),a.updater=Vi,t.stateNode=a,a._reactInternals=t,Gi(t,r,e,n),t=Zs(null,t,r,!0,o,n)):(t.tag=0,ai&&o&&ei(t),ws(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(js(e,t),e=t.pendingProps,r=(a=r._init)(r._payload),t.type=r,a=t.tag=function(e){if("function"===typeof e)return Dc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===A)return 14}return 2}(r),e=mi(r,e),a){case 0:t=Ns(null,t,r,e,n);break e;case 1:t=Cs(null,t,r,e,n);break e;case 11:t=xs(null,t,r,e,n);break e;case 14:t=Is(null,t,r,mi(r.type,e),n);break e}throw Error(i(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,Ns(e,t,r,a=t.elementType===r?a:mi(r,a),n);case 1:return r=t.type,a=t.pendingProps,Cs(e,t,r,a=t.elementType===r?a:mi(r,a),n);case 3:e:{if(_s(t),null===e)throw Error(i(387));r=t.pendingProps,a=(o=t.memoizedState).element,Ri(e,t),Mi(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=As(e,t,r,n,a=ls(Error(i(423)),t));break e}if(r!==a){t=As(e,t,r,n,a=ls(Error(i(424)),t));break e}for(ri=ca(t.stateNode.containerInfo.firstChild),ni=t,ai=!0,ii=null,n=Yi(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(hi(),r===a){t=Gs(e,t,n);break e}ws(e,t,r,n)}t=t.child}return t;case 5:return io(t),null===e&&ci(t),r=t.type,a=t.pendingProps,o=null!==e?e.memoizedProps:null,s=a.children,na(r,a)?s=null:null!==o&&na(r,o)&&(t.flags|=32),Es(e,t),ws(e,t,s,n),t.child;case 6:return null===e&&ci(t),null;case 13:return Ps(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Xi(t,null,r,n):ws(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,xs(e,t,r,a=t.elementType===r?a:mi(r,a),n);case 7:return ws(e,t,t.pendingProps,n),t.child;case 8:case 12:return ws(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,o=t.memoizedProps,s=a.value,Ea(gi,r._currentValue),r._currentValue=s,null!==o)if(sr(o.value,s)){if(o.children===a.children&&!Za.current){t=Gs(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var u=o.dependencies;if(null!==u){s=o.child;for(var c=u.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Di(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var d=(l=l.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),Ii(o.return,n,t),u.lanes|=n;break}c=c.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(i(341));s.lanes|=n,null!==(u=s.alternate)&&(u.lanes|=n),Ii(s,n,t),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}ws(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,Si(t,n),r=r(a=Ti(a)),t.flags|=1,ws(e,t,r,n),t.child;case 14:return a=mi(r=t.type,t.pendingProps),Is(e,t,r,a=mi(r.type,a),n);case 15:return Ss(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:mi(r,a),js(e,t),t.tag=1,Ra(r)?(e=!0,Fa(t)):e=!1,Si(t,n),Wi(t,r,a),Gi(t,r,a,n),Zs(null,t,r,!0,e,n);case 19:return Ws(e,t,n);case 22:return Ts(e,t,n)}throw Error(i(156,t.tag))};var $c="function"===typeof reportError?reportError:function(e){console.error(e)};function Kc(e){this._internalRoot=e}function Xc(e){this._internalRoot=e}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Jc(){}function el(e,t,n,r,a){var i=n._reactRootContainer;if(i){var o=i;if("function"===typeof a){var s=a;a=function(){var e=Gc(o);s.call(e)}}jc(t,o,e,a)}else o=function(e,t,n,r,a){if(a){if("function"===typeof r){var i=r;r=function(){var e=Gc(o);i.call(e)}}var o=Wc(t,r,e,0,null,!1,0,"",Jc);return e._reactRootContainer=o,e[pa]=o.current,Ur(8===e.nodeType?e.parentNode:e),dc(),o}for(;a=e.lastChild;)e.removeChild(a);if("function"===typeof r){var s=r;r=function(){var e=Gc(u);s.call(e)}}var u=Vc(e,0,!1,null,0,!1,0,"",Jc);return e._reactRootContainer=u,e[pa]=u.current,Ur(8===e.nodeType?e.parentNode:e),dc((function(){jc(t,u,n,r)})),u}(n,t,e,a,r);return Gc(o)}Xc.prototype.render=Kc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));jc(e,t,null,null)},Xc.prototype.unmount=Kc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc((function(){jc(null,e,null,null)})),t[pa]=null}},Xc.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dt.length&&0!==t&&t<Dt[n].priority;n++);Dt.splice(n,0,e),0===n&&Mt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(yt(t,1|n),ac(t,Ye()),0===(6&Zu)&&(Wu=Ye()+500,Ua()))}break;case 13:dc((function(){var t=Zi(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),qc(e,1)}},xt=function(e){if(13===e.tag){var t=Zi(e,134217728);if(null!==t)rc(t,e,134217728,tc());qc(e,134217728)}},It=function(e){if(13===e.tag){var t=nc(e),n=Zi(e,t);if(null!==n)rc(n,e,t,tc());qc(e,t)}},St=function(){return bt},Tt=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},xe=function(e,t,n){switch(t){case"input":if(Q(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=wa(r);if(!a)throw Error(i(90));q(r),Q(r,a)}}}break;case"textarea":ie(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=lc,Ze=dc;var tl={usingClientEntryPoint:!1,Events:[ba,ka,wa,Ee,Ne,lc]},nl={findFiberByHostInstance:ya,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:k.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var al=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!al.isDisabled&&al.supportsFiber)try{at=al.inject(rl),it=al}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Yc(t))throw Error(i(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Yc(e))throw Error(i(299));var n=!1,r="",a=$c;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(a=t.onRecoverableError)),t=Vc(e,1,!1,null,0,n,0,r,a),e[pa]=t.current,Ur(8===e.nodeType?e.parentNode:e),new Kc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return dc(e)},t.hydrate=function(e,t,n){if(!Qc(t))throw Error(i(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Yc(e))throw Error(i(405));var r=null!=n&&n.hydratedSources||null,a=!1,o="",s=$c;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(a=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Wc(t,null,e,1,null!=n?n:null,a,0,o,s),e[pa]=t.current,Ur(e),r)for(e=0;e<r.length;e++)a=(a=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new Xc(t)},t.render=function(e,t,n){if(!Qc(t))throw Error(i(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Qc(e))throw Error(i(40));return!!e._reactRootContainer&&(dc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[pa]=null}))})),!0)},t.unstable_batchedUpdates=lc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Qc(n))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},1250:function(e,t,n){"use strict";var r=n(4164);t.s=r.createRoot,r.hydrateRoot},4164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4463)},1372:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,a=n?Symbol.for("react.portal"):60106,i=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,d=n?Symbol.for("react.concurrent_mode"):60111,f=n?Symbol.for("react.forward_ref"):60112,h=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,m=n?Symbol.for("react.lazy"):60116,g=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,k=n?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case d:case i:case s:case o:case h:return e;default:switch(e=e&&e.$$typeof){case c:case f:case m:case v:case u:return e;default:return t}}case a:return t}}}function x(e){return w(e)===d}t.AsyncMode=l,t.ConcurrentMode=d,t.ContextConsumer=c,t.ContextProvider=u,t.Element=r,t.ForwardRef=f,t.Fragment=i,t.Lazy=m,t.Memo=v,t.Portal=a,t.Profiler=s,t.StrictMode=o,t.Suspense=h,t.isAsyncMode=function(e){return x(e)||w(e)===l},t.isConcurrentMode=x,t.isContextConsumer=function(e){return w(e)===c},t.isContextProvider=function(e){return w(e)===u},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return w(e)===f},t.isFragment=function(e){return w(e)===i},t.isLazy=function(e){return w(e)===m},t.isMemo=function(e){return w(e)===v},t.isPortal=function(e){return w(e)===a},t.isProfiler=function(e){return w(e)===s},t.isStrictMode=function(e){return w(e)===o},t.isSuspense=function(e){return w(e)===h},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===i||e===d||e===s||e===o||e===h||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===v||e.$$typeof===u||e.$$typeof===c||e.$$typeof===f||e.$$typeof===y||e.$$typeof===b||e.$$typeof===k||e.$$typeof===g)},t.typeOf=w},7441:function(e,t,n){"use strict";e.exports=n(1372)},6374:function(e,t,n){"use strict";var r=n(2791),a=Symbol.for("react.element"),i=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,i={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!u.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:a,type:e,key:c,ref:l,props:i,_owner:s.current}}t.Fragment=i,t.jsx=c,t.jsxs=c},9117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),h=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,m={};function g(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=g.prototype;var k=b.prototype=new y;k.constructor=b,v(k,g.prototype),k.isPureReactComponent=!0;var w=Array.isArray,x=Object.prototype.hasOwnProperty,I={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function T(e,t,r){var a,i={},o=null,s=null;if(null!=t)for(a in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)x.call(t,a)&&!S.hasOwnProperty(a)&&(i[a]=t[a]);var u=arguments.length-2;if(1===u)i.children=r;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];i.children=c}if(e&&e.defaultProps)for(a in u=e.defaultProps)void 0===i[a]&&(i[a]=u[a]);return{$$typeof:n,type:e,key:o,ref:s,props:i,_owner:I.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var N=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function Z(e,t,a,i,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0}}if(u)return o=o(u=e),e=""===i?"."+C(u,0):i,w(o)?(a="",null!=e&&(a=e.replace(N,"$&/")+"/"),Z(o,t,a,"",(function(e){return e}))):null!=o&&(E(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,a+(!o.key||u&&u.key===o.key?"":(""+o.key).replace(N,"$&/")+"/")+e)),t.push(o)),1;if(u=0,i=""===i?".":i+":",w(e))for(var c=0;c<e.length;c++){var l=i+C(s=e[c],c);u+=Z(s,t,a,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(s=e.next()).done;)u+=Z(s=s.value,t,a,l=i+C(s,c++),o);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function _(e,t,n){if(null==e)return e;var r=[],a=0;return Z(e,r,"","",(function(e){return t.call(n,e,a++)})),r}function A(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},D={transition:null},O={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:D,ReactCurrentOwner:I};t.Children={map:_,forEach:function(e,t,n){_(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return _(e,(function(){t++})),t},toArray:function(e){return _(e,(function(e){return e}))||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=g,t.Fragment=a,t.Profiler=o,t.PureComponent=b,t.StrictMode=i,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=v({},e.props),i=e.key,o=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,s=I.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(c in t)x.call(t,c)&&!S.hasOwnProperty(c)&&(a[c]=void 0===t[c]&&void 0!==u?u[c]:t[c])}var c=arguments.length-2;if(1===c)a.children=r;else if(1<c){u=Array(c);for(var l=0;l<c;l++)u[l]=arguments[l+2];a.children=u}return{$$typeof:n,type:e.type,key:i,ref:o,props:a,_owner:s}},t.createContext=function(e){return(e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=T,t.createFactory=function(e){var t=T.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.2.0"},2791:function(e,t,n){"use strict";e.exports=n(9117)},184:function(e,t,n){"use strict";e.exports=n(6374)},6813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,a=e[r];if(!(0<i(a,t)))break e;e[r]=t,e[n]=a,n=r}}function r(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,a=e.length,o=a>>>1;r<o;){var s=2*(r+1)-1,u=e[s],c=s+1,l=e[c];if(0>i(u,n))c<a&&0>i(l,u)?(e[r]=l,e[c]=n,r=c):(e[r]=u,e[s]=n,r=s);else{if(!(c<a&&0>i(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}var c=[],l=[],d=1,f=null,h=3,p=!1,v=!1,m=!1,g="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function k(e){for(var t=r(l);null!==t;){if(null===t.callback)a(l);else{if(!(t.startTime<=e))break;a(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function w(e){if(m=!1,k(e),!v)if(null!==r(c))v=!0,D(x);else{var t=r(l);null!==t&&O(w,t.startTime-e)}}function x(e,n){v=!1,m&&(m=!1,y(E),E=-1),p=!0;var i=h;try{for(k(n),f=r(c);null!==f&&(!(f.expirationTime>n)||e&&!Z());){var o=f.callback;if("function"===typeof o){f.callback=null,h=f.priorityLevel;var s=o(f.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?f.callback=s:f===r(c)&&a(c),k(n)}else a(c);f=r(c)}if(null!==f)var u=!0;else{var d=r(l);null!==d&&O(w,d.startTime-n),u=!1}return u}finally{f=null,h=i,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var I,S=!1,T=null,E=-1,N=5,C=-1;function Z(){return!(t.unstable_now()-C<N)}function _(){if(null!==T){var e=t.unstable_now();C=e;var n=!0;try{n=T(!0,e)}finally{n?I():(S=!1,T=null)}}else S=!1}if("function"===typeof b)I=function(){b(_)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,R=A.port2;A.port1.onmessage=_,I=function(){R.postMessage(null)}}else I=function(){g(_,0)};function D(e){T=e,S||(S=!0,I())}function O(e,n){E=g((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,D(x))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var n=h;h=t;try{return e()}finally{h=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=h;h=e;try{return t()}finally{h=n}},t.unstable_scheduleCallback=function(e,a,i){var o=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?o+i:o:i=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:a,priorityLevel:e,startTime:i,expirationTime:s=i+s,sortIndex:-1},i>o?(e.sortIndex=i,n(l,e),null===r(c)&&e===r(l)&&(m?(y(E),E=-1):m=!0,O(w,i-o))):(e.sortIndex=s,n(c,e),v||p||(v=!0,D(x))),e},t.unstable_shouldYield=Z,t.unstable_wrapCallback=function(e){var t=h;return function(){var n=h;h=t;try{return e.apply(this,arguments)}finally{h=n}}}},5296:function(e,t,n){"use strict";e.exports=n(6813)},6699:function(e,t,n){var r=n(2501),a=n(9112),i=n(2132),o=n(890),s=n(4113),u=n(1725),c=n(3411);c.alea=r,c.xor128=a,c.xorwow=i,c.xorshift7=o,c.xor4096=s,c.tychei=u,e.exports=c},2501:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this,n=function(){var e=4022871197,t=function(t){t=String(t);for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)};return t}();t.next=function(){var e=2091639*t.s0+2.3283064365386963e-10*t.c;return t.s0=t.s1,t.s1=t.s2,t.s2=e-(t.c=0|e)},t.c=1,t.s0=n(" "),t.s1=n(" "),t.s2=n(" "),t.s0-=n(e),t.s0<0&&(t.s0+=1),t.s1-=n(e),t.s1<0&&(t.s1+=1),t.s2-=n(e),t.s2<0&&(t.s2+=1),n=null}function s(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function u(e,t){var n=new o(e),r=t&&t.state,a=n.next;return a.int32=function(){return 4294967296*n.next()|0},a.double=function(){return a()+11102230246251565e-32*(2097152*a()|0)},a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.alea=u}(0,e=n.nmd(e),n.amdD)},1725:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,a=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^a,a=a-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^a,t.a=a-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function s(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function u(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.tychei=u}(0,e=n.nmd(e),n.amdD)},9112:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function u(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.xor128=u}(0,e=n.nmd(e),n.amdD)},4113:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this;t.next=function(){var e,n,r=t.w,a=t.X,i=t.i;return t.w=r=r+1640531527|0,n=a[i+34&127],e=a[i=i+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=a[i]=n^e,t.i=i,n+(r^r>>>16)|0},function(e,t){var n,r,a,i,o,s=[],u=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,u=Math.max(u,t.length)),a=0,i=-32;i<u;++i)t&&(r^=t.charCodeAt((i+32)%t.length)),0===i&&(o=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,i>=0&&(o=o+1640531527|0,a=0==(n=s[127&i]^=r+o)?a+1:0);for(a>=128&&(s[127&(t&&t.length||0)]=-1),a=127,i=512;i>0;--i)r=s[a+34&127],n=s[a=a+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[a]=r^n;e.w=o,e.X=s,e.i=a}(t,e)}function s(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function u(e,t){null==e&&(e=+new Date);var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.X&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.xor4096=u}(0,e=n.nmd(e),n.amdD)},890:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this;t.next=function(){var e,n,r=t.x,a=t.i;return e=r[a],n=(e^=e>>>7)^e<<24,n^=(e=r[a+1&7])^e>>>10,n^=(e=r[a+3&7])^e>>>3,n^=(e=r[a+4&7])^e<<7,e=r[a+7&7],n^=(e^=e<<13)^e<<9,r[a]=n,t.i=a+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function s(e,t){return t.x=e.x.slice(),t.i=e.i,t}function u(e,t){null==e&&(e=+new Date);var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.x&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.xorshift7=u}(0,e=n.nmd(e),n.amdD)},2132:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function u(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.xorwow=u}(0,e=n.nmd(e),n.amdD)},3411:function(e,t,n){var r;!function(a,i,o){var s,u=256,c=6,l="random",d=o.pow(u,c),f=o.pow(2,52),h=2*f,p=u-1;function v(e,t,n){var r=[],p=b(y((t=1==t?{entropy:!0}:t||{}).entropy?[e,k(i)]:null==e?function(){try{var e;return s&&(e=s.randomBytes)?e=e(u):(e=new Uint8Array(u),(a.crypto||a.msCrypto).getRandomValues(e)),k(e)}catch(r){var t=a.navigator,n=t&&t.plugins;return[+new Date,a,n,a.screen,k(i)]}}():e,3),r),v=new m(r),w=function(){for(var e=v.g(c),t=d,n=0;e<f;)e=(e+n)*u,t*=u,n=v.g(1);for(;e>=h;)e/=2,t/=2,n>>>=1;return(e+n)/t};return w.int32=function(){return 0|v.g(4)},w.quick=function(){return v.g(4)/4294967296},w.double=w,b(k(v.S),i),(t.pass||n||function(e,t,n,r){return r&&(r.S&&g(r,v),e.state=function(){return g(v,{})}),n?(o[l]=e,t):e})(w,p,"global"in t?t.global:this==o,t.state)}function m(e){var t,n=e.length,r=this,a=0,i=r.i=r.j=0,o=r.S=[];for(n||(e=[n++]);a<u;)o[a]=a++;for(a=0;a<u;a++)o[a]=o[i=p&i+e[a%n]+(t=o[a])],o[i]=t;(r.g=function(e){for(var t,n=0,a=r.i,i=r.j,o=r.S;e--;)t=o[a=p&a+1],n=n*u+o[p&(o[a]=o[i=p&i+t])+(o[i]=t)];return r.i=a,r.j=i,n})(u)}function g(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function y(e,t){var n,r=[],a=typeof e;if(t&&"object"==a)for(n in e)try{r.push(y(e[n],t-1))}catch(i){}return r.length?r:"string"==a?e:e+"\0"}function b(e,t){for(var n,r=e+"",a=0;a<r.length;)t[p&a]=p&(n^=19*t[p&a])+r.charCodeAt(a++);return k(t)}function k(e){return String.fromCharCode.apply(0,e)}if(b(o.random(),i),e.exports){e.exports=v;try{s=n(5042)}catch(w){}}else void 0===(r=function(){return v}.call(t,n,t,e))||(e.exports=r)}("undefined"!==typeof self?self:this,[],Math)},5410:function(){},8628:function(){},1601:function(){},7792:function(){},4977:function(){},5042:function(){},907:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{Z:function(){return r}})},3878:function(e,t,n){"use strict";function r(e){if(Array.isArray(e))return e}n.d(t,{Z:function(){return r}})},7326:function(e,t,n){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,{Z:function(){return r}})},5861:function(e,t,n){"use strict";function r(e,t,n,r,a,i,o){try{var s=e[i](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,a)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var o=e.apply(t,n);function s(e){r(o,a,i,s,u,"next",e)}function u(e){r(o,a,i,s,u,"throw",e)}s(void 0)}))}}n.d(t,{Z:function(){return a}})},5671:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,{Z:function(){return r}})},5647:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(9611),a=n(8814);function i(e,t,n){return i=(0,a.Z)()?Reflect.construct.bind():function(e,t,n){var a=[null];a.push.apply(a,t);var i=new(Function.bind.apply(e,a));return n&&(0,r.Z)(i,n.prototype),i},i.apply(null,arguments)}},3144:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(9142);function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,(0,r.Z)(a.key),a)}}function i(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}},7762:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(181);function a(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=(0,r.Z)(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw o}}}}},9388:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(1120),a=n(8814),i=n(2963);function o(e){var t=(0,a.Z)();return function(){var n,a=(0,r.Z)(e);if(t){var o=(0,r.Z)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return(0,i.Z)(this,n)}}},4942:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(9142);function a(e,t,n){return(t=(0,r.Z)(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},1120:function(e,t,n){"use strict";function r(e){return r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},r(e)}n.d(t,{Z:function(){return r}})},136:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(9611);function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&(0,r.Z)(e,t)}},8814:function(e,t,n){"use strict";function r(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}n.d(t,{Z:function(){return r}})},9199:function(e,t,n){"use strict";function r(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}n.d(t,{Z:function(){return r}})},5267:function(e,t,n){"use strict";function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}n.d(t,{Z:function(){return r}})},2963:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(1002),a=n(7326);function i(e,t){if(t&&("object"===(0,r.Z)(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return(0,a.Z)(e)}},4165:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(1002);function a(){a=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",u=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(_){l=function(e,t,n){return e[t]=n}}function d(e,t,n,r){var a=t&&t.prototype instanceof p?t:p,o=Object.create(a.prototype),s=new N(r||[]);return i(o,"_invoke",{value:I(e,n,s)}),o}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(_){return{type:"throw",arg:_}}}e.wrap=d;var h={};function p(){}function v(){}function m(){}var g={};l(g,s,(function(){return this}));var y=Object.getPrototypeOf,b=y&&y(y(C([])));b&&b!==t&&n.call(b,s)&&(g=b);var k=m.prototype=p.prototype=Object.create(g);function w(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function a(i,o,s,u){var c=f(e[i],e,o);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==(0,r.Z)(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){a("next",e,s,u)}),(function(e){a("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return a("throw",e,s,u)}))}u(c.arg)}var o;i(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){a(e,n,t,r)}))}return o=o?o.then(r,r):r()}})}function I(e,t,n){var r="suspendedStart";return function(a,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw i;return Z()}for(n.method=a,n.arg=i;;){var o=n.delegate;if(o){var s=S(o,n);if(s){if(s===h)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=f(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function S(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=f(r,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,h;var i=a.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function C(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:Z}}function Z(){return{value:void 0,done:!0}}return v.prototype=m,i(k,"constructor",{value:m,configurable:!0}),i(m,"constructor",{value:v,configurable:!0}),v.displayName=l(m,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,c,"GeneratorFunction")),e.prototype=Object.create(k),e},e.awrap=function(e){return{__await:e}},w(x.prototype),l(x.prototype,u,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,r,a,i){void 0===i&&(i=Promise);var o=new x(d(t,n,r,a),i);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},w(k),l(k,c,"Generator"),l(k,s,(function(){return this})),l(k,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=C,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],o=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;E(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:C(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},e}},9611:function(e,t,n){"use strict";function r(e,t){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},r(e,t)}n.d(t,{Z:function(){return r}})},9439:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(3878);var a=n(181),i=n(5267);function o(e,t){return(0,r.Z)(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,s=[],u=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(l){c=!0,a=l}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw a}}return s}}(e,t)||(0,a.Z)(e,t)||(0,i.Z)()}},3433:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(907);var a=n(9199),i=n(181);function o(e){return function(e){if(Array.isArray(e))return(0,r.Z)(e)}(e)||(0,a.Z)(e)||(0,i.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},9142:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(1002);function a(e){var t=function(e,t){if("object"!==(0,r.Z)(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!==(0,r.Z)(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===(0,r.Z)(t)?t:String(t)}},1002:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n.d(t,{Z:function(){return r}})},181:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(907);function a(e,t){if(e){if("string"===typeof e)return(0,r.Z)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,r.Z)(e,t):void 0}}},8664:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(1120),a=n(9611);var i=n(5647);function o(e){var t="function"===typeof Map?new Map:void 0;return o=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,o)}function o(){return(0,i.Z)(e,arguments,(0,r.Z)(this).constructor)}return o.prototype=Object.create(e.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),(0,a.Z)(o,e)},o(e)}}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var i=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.m=e,n.amdD=function(){throw new Error("define cannot be used indirect")},n.amdO={},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+"."+{22:"4fdd24e7",133:"dc3f0ee6",186:"e831ad1e",272:"06be5b00",372:"26ca6a15",377:"fcf82100",738:"fe31a753",841:"0450f58b",851:"8d1d25f0",856:"a4baceb1"}[e]+".chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="pokedex:";n.l=function(r,a,i,o){if(e[r])e[r].push(a);else{var s,u;if(void 0!==i)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var d=c[l];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+i){s=d;break}}s||(u=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+i),s.src=r),e[r]=[a];var f=function(t,n){s.onerror=s.onload=null,clearTimeout(h);var a=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),a&&a.forEach((function(e){return e(n)})),t)return t(n)},h=setTimeout(f.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=f.bind(null,s.onerror),s.onload=f.bind(null,s.onload),u&&document.head.appendChild(s)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},n.p="/",function(){var e={179:0};n.f.j=function(t,r){var a=n.o(e,t)?e[t]:void 0;if(0!==a)if(a)r.push(a[2]);else{var i=new Promise((function(n,r){a=e[t]=[n,r]}));r.push(a[2]=i);var o=n.p+n.u(t),s=new Error;n.l(o,(function(r){if(n.o(e,t)&&(0!==(a=e[t])&&(e[t]=void 0),a)){var i=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+i+": "+o+")",s.name="ChunkLoadError",s.type=i,s.request=o,a[1](s)}}),"chunk-"+t,t)}};var t=function(t,r){var a,i,o=r[0],s=r[1],u=r[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(a in s)n.o(s,a)&&(n.m[a]=s[a]);if(u)u(n)}for(t&&t(r);c<o.length;c++)i=o[c],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0},r=self.webpackChunkpokedex=self.webpackChunkpokedex||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),function(){"use strict";var e={};n.r(e),n.d(e,{browserFiles:function(){return zm},browserHTTPRequest:function(){return Ym},concatenateArrayBuffers:function(){return Yp},copyModel:function(){return Wv},decodeWeights:function(){return Gp},encodeWeights:function(){return Wp},fromMemory:function(){return ng},fromMemorySync:function(){return rg},getLoadHandlers:function(){return lv},getModelArtifactsForJSON:function(){return tv},getModelArtifactsForJSONSync:function(){return ev},getModelArtifactsInfoForJSON:function(){return rv},getSaveHandlers:function(){return cv},getWeightSpecs:function(){return av},http:function(){return Xm},isHTTPScheme:function(){return $m},listModels:function(){return zv},loadWeights:function(){return Wm},moveModel:function(){return Gv},registerLoadRouter:function(){return uv},registerSaveRouter:function(){return sv},removeModel:function(){return Vv},weightsLoaderFactory:function(){return Gm},withSaveHandler:function(){return ag},withSaveHandlerSync:function(){return ig}});var t={};n.r(t),n.d(t,{conv2d:function(){return Cw},depthwiseConv2d:function(){return Aw},matMul:function(){return Rw}});var r={};n.r(r),n.d(r,{json:function(){return kA}});var a={};n.r(a),n.d(a,{json:function(){return wA}});var i={};n.r(i),n.d(i,{json:function(){return xA}});var o={};n.r(o),n.d(o,{json:function(){return IA}});var s={};n.r(s),n.d(s,{json:function(){return SA}});var u={};n.r(u),n.d(u,{json:function(){return TA}});var c={};n.r(c),n.d(c,{json:function(){return EA}});var l={};n.r(l),n.d(l,{json:function(){return NA}});var d={};n.r(d),n.d(d,{json:function(){return CA}});var f={};n.r(f),n.d(f,{json:function(){return ZA}});var h={};n.r(h),n.d(h,{json:function(){return _A}});var p={};n.r(p),n.d(p,{json:function(){return AA}});var v={};n.r(v),n.d(v,{json:function(){return RA}});var m={};n.r(m),n.d(m,{json:function(){return DA}});var g={};n.r(g),n.d(g,{json:function(){return OA}});var y={};n.r(y),n.d(y,{json:function(){return LA}});var b={};n.r(b),n.d(b,{json:function(){return FA}});var k={};n.r(k),n.d(k,{json:function(){return MA}});var w={};n.r(w),n.d(w,{json:function(){return PA}});var x={};n.r(x),n.d(x,{OP_SCOPE_SUFFIX:function(){return Fp},abs:function(){return Em},acos:function(){return yg},acosh:function(){return bg},add:function(){return sm},addN:function(){return kg},all:function(){return wg},any:function(){return xg},argMax:function(){return Ig},argMin:function(){return Sg},asin:function(){return Tg},asinh:function(){return Eg},atan:function(){return Ng},atan2:function(){return Cg},atanh:function(){return Zg},avgPool:function(){return Hg},avgPool3d:function(){return qg},basicLSTMCell:function(){return Jg},batchNorm:function(){return ty},batchNorm2d:function(){return ny},batchNorm3d:function(){return ry},batchNorm4d:function(){return ay},batchToSpaceND:function(){return ey},bincount:function(){return iy},booleanMaskAsync:function(){return fw},broadcastArgs:function(){return oy},broadcastTo:function(){return sy},buffer:function(){return Yv},cast:function(){return Qv},ceil:function(){return uy},clipByValue:function(){return cy},clone:function(){return Jv},complex:function(){return Pp},concat:function(){return $g},concat1d:function(){return ly},concat2d:function(){return dy},concat3d:function(){return fy},concat4d:function(){return hy},conv1d:function(){return vy},conv2d:function(){return py},conv2dTranspose:function(){return gy},conv3d:function(){return yy},conv3dTranspose:function(){return ky},cos:function(){return wy},cosh:function(){return xy},cosineWindow:function(){return kw},cumprod:function(){return Iy},cumsum:function(){return Sy},denseBincount:function(){return Ty},depthToSpace:function(){return Ey},depthwiseConv2d:function(){return Ny},diag:function(){return Cy},dilation2d:function(){return Zy},div:function(){return cm},divNoNan:function(){return Ry},dot:function(){return Dy},dropout:function(){return yw},einsum:function(){return Oy},elu:function(){return Ly},enclosingPowerOfTwo:function(){return bw},equal:function(){return _y},erf:function(){return Fy},euclideanNorm:function(){return Ky},exp:function(){return Xy},expandDims:function(){return Yy},expm1:function(){return Qy},eye:function(){return eb},fft:function(){return Fk},fill:function(){return wm},floor:function(){return tb},floorDiv:function(){return um},fused:function(){return t},gather:function(){return nb},gatherND:function(){return gw},greater:function(){return rb},greaterEqual:function(){return ab},ifft:function(){return Mk},imag:function(){return ib},image:function(){return Lx},inTopKAsync:function(){return xw},irfft:function(){return Pk},isFinite:function(){return ob},isInf:function(){return sb},isNaN:function(){return ub},leakyRelu:function(){return cb},less:function(){return lb},lessEqual:function(){return db},linalg:function(){return Fx},linspace:function(){return fb},localResponseNormalization:function(){return hb},log:function(){return pb},log1p:function(){return vb},logSigmoid:function(){return yb},logSoftmax:function(){return bb},logSumExp:function(){return kb},logicalAnd:function(){return wb},logicalNot:function(){return xb},logicalOr:function(){return Ib},logicalXor:function(){return Sb},losses:function(){return Mx},lowerBound:function(){return Nb},matMul:function(){return Kg},max:function(){return jy},maxPool:function(){return Cb},maxPool3d:function(){return Zb},maxPoolWithArgmax:function(){return _b},maximum:function(){return _m},mean:function(){return Ab},meshgrid:function(){return Ob},min:function(){return Gy},minimum:function(){return Lb},mirrorPad:function(){return Fb},mod:function(){return Mb},moments:function(){return Pb},movingAverage:function(){return pw},mul:function(){return lm},multiRNNCell:function(){return zb},multinomial:function(){return Bb},neg:function(){return mb},norm:function(){return $y},notEqual:function(){return Vb},oneHot:function(){return Ub},ones:function(){return Db},onesLike:function(){return Wb},op:function(){return Mp},outerProduct:function(){return jb},pad:function(){return Gb},pad1d:function(){return Hb},pad2d:function(){return qb},pad3d:function(){return $b},pad4d:function(){return Kb},pool:function(){return Yb},pow:function(){return Im},prelu:function(){return Qb},print:function(){return em},prod:function(){return Jb},raggedGather:function(){return ek},raggedRange:function(){return tk},raggedTensorToTensor:function(){return nk},rand:function(){return rk},randomGamma:function(){return uk},randomNormal:function(){return ck},randomStandardNormal:function(){return lk},randomUniform:function(){return dk},range:function(){return fk},real:function(){return hk},reciprocal:function(){return pk},relu:function(){return vk},relu6:function(){return mk},reshape:function(){return Gg},reverse:function(){return gk},reverse1d:function(){return yk},reverse2d:function(){return bk},reverse3d:function(){return kk},reverse4d:function(){return wk},rfft:function(){return Bk},round:function(){return xk},rsqrt:function(){return Ik},scalar:function(){return vm},scatterND:function(){return vw},searchSorted:function(){return Eb},selu:function(){return Sk},separableConv2d:function(){return Tk},setdiff1dAsync:function(){return Nk},sigmoid:function(){return Xg},sign:function(){return Ck},signal:function(){return Ox},sin:function(){return Zk},sinh:function(){return _k},slice:function(){return Yg},slice1d:function(){return Ak},slice2d:function(){return Rk},slice3d:function(){return Dk},slice4d:function(){return Ok},softmax:function(){return Lk},softplus:function(){return gb},spaceToBatchND:function(){return Xb},sparse:function(){return Px},sparseToDense:function(){return mw},spectral:function(){return Dx},split:function(){return zk},sqrt:function(){return dm},square:function(){return fm},squaredDifference:function(){return Vk},squeeze:function(){return Uk},stack:function(){return Wk},step:function(){return jk},stridedSlice:function(){return Gk},string:function(){return zx},sub:function(){return Sm},sum:function(){return Hy},tan:function(){return Hk},tanh:function(){return Qg},tensor:function(){return Bp},tensor1d:function(){return qk},tensor2d:function(){return $k},tensor3d:function(){return og},tensor4d:function(){return Kk},tensor5d:function(){return Xk},tensor6d:function(){return Yk},tensorScatterUpdate:function(){return ew},tile:function(){return Jy},topk:function(){return tw},transpose:function(){return hw},truncatedNormal:function(){return nw},unique:function(){return rw},unsortedSegmentSum:function(){return aw},unstack:function(){return iw},upperBound:function(){return ow},variable:function(){return sw},where:function(){return Ay},whereAsync:function(){return lw},zeros:function(){return Rb},zerosLike:function(){return hm}});var I={};n.r(I),n.d(I,{FirebaseError:function(){return MX},SDK_VERSION:function(){return jY},_DEFAULT_ENTRY_NAME:function(){return AY},_addComponent:function(){return LY},_addOrOverwriteComponent:function(){return FY},_apps:function(){return DY},_clearComponents:function(){return BY},_components:function(){return OY},_getProvider:function(){return PY},_registerComponent:function(){return MY},_removeServiceInstance:function(){return zY},deleteApp:function(){return $Y},getApp:function(){return HY},getApps:function(){return qY},initializeApp:function(){return GY},onLog:function(){return YY},registerVersion:function(){return XY},setLogLevel:function(){return QY}});var S=n(2791),T=n(1250),E=n(9611);function N(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,(0,E.Z)(e,t)}var C=n(2007),Z=n.n(C);function _(){return _=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_.apply(this,arguments)}function A(e){return"/"===e.charAt(0)}function R(e,t){for(var n=t,r=n+1,a=e.length;r<a;n+=1,r+=1)e[n]=e[r];e.pop()}var D=function(e,t){void 0===t&&(t="");var n,r=e&&e.split("/")||[],a=t&&t.split("/")||[],i=e&&A(e),o=t&&A(t),s=i||o;if(e&&A(e)?a=r:r.length&&(a.pop(),a=a.concat(r)),!a.length)return"/";if(a.length){var u=a[a.length-1];n="."===u||".."===u||""===u}else n=!1;for(var c=0,l=a.length;l>=0;l--){var d=a[l];"."===d?R(a,l):".."===d?(R(a,l),c++):c&&(R(a,l),c--)}if(!s)for(;c--;c)a.unshift("..");!s||""===a[0]||a[0]&&A(a[0])||a.unshift("");var f=a.join("/");return n&&"/"!==f.substr(-1)&&(f+="/"),f};function O(e){var t=e.pathname,n=e.search,r=e.hash,a=t||"/";return n&&"?"!==n&&("?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&("#"===r.charAt(0)?r:"#"+r),a}function L(e,t,n,r){var a;"string"===typeof e?(function(e){var t=e||"/",n="",r="",a=t.indexOf("#");-1!==a&&(t.substr(a),t.substr(0,a));var i=t.indexOf("?");return-1!==i&&(t.substr(i),t.substr(0,i)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}}(e),a.state=t):(void 0===_({},e).pathname&&(a.pathname=""),a.search?"?"!==a.search.charAt(0)&&(a.search="?"+a.search):a.search="",a.hash?"#"!==a.hash.charAt(0)&&(a.hash="#"+a.hash):a.hash="",void 0!==t&&void 0===a.state&&(a.state=t));try{a.pathname=decodeURI(a.pathname)}catch(i){throw i instanceof URIError?new URIError('Pathname "'+a.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):i}return n&&(a.key=n),r?a.pathname?"/"!==a.pathname.charAt(0)&&(a.pathname=D(a.pathname,r.pathname)):a.pathname=r.pathname:a.pathname||(a.pathname="/"),a}function F(){var e=null;var t=[];return{setPrompt:function(t){return t,function(){e===t&&null}},confirmTransitionTo:function(t,n,r,a){if(null!=e){var i="function"===typeof e?e(t,n):e;"string"===typeof i?"function"===typeof r?r(i,a):a(!0):a(!1!==i)}else a(!0)},appendListener:function(e){var n=!0;function r(){n&&e.apply(void 0,arguments)}return t.push(r),function(){!1,t.filter((function(e){return e!==r}))}},notifyListeners:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.forEach((function(e){return e.apply(void 0,n)}))}}}"undefined"===typeof window||!window.document||window.document.createElement;function M(e,t,n){return Math.min(Math.max(e,t),n)}var P=!0,z="Invariant failed";function B(e,t){if(!e){if(P)throw new Error(z);var n="function"===typeof t?t():t,r=n?"".concat(z,": ").concat(n):z;throw new Error(r)}}var V=n(6151),U=n.n(V);n(7441);n(2110);var W=1073741823,j="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:{};var G=S.createContext||function(e,t){var n,r,a="__create-react-context-"+function(){var e="__global_unique_id__";return j[e]=(j[e]||0)+1}()+"__",i=function(e){function n(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).emitter=function(e){var t=[];return{on:function(e){t.push(e)},off:function(e){t=t.filter((function(t){return t!==e}))},get:function(){return e},set:function(n,r){e=n,t.forEach((function(t){return t(e,r)}))}}}(t.props.value),t}N(n,e);var r=n.prototype;return r.getChildContext=function(){var e;return(e={})[a]=this.emitter,e},r.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var n,r=this.props.value,a=e.value;!function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}(r,a)?(n="function"===typeof t?t(r,a):W,0!==(n|=0)&&this.emitter.set(e.value,n)):n=0}},r.render=function(){return this.props.children},n}(S.Component);i.childContextTypes=((n={})[a]=Z().object.isRequired,n);var o=function(t){function n(){for(var e,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))||this).observedBits=void 0,e.state={value:e.getValue()},e.onUpdate=function(t,n){0!==((0|e.observedBits)&n)&&e.setState({value:e.getValue()})},e}N(n,t);var r=n.prototype;return r.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=void 0===t||null===t?W:t},r.componentDidMount=function(){this.context[a]&&this.context[a].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=void 0===e||null===e?W:e},r.componentWillUnmount=function(){this.context[a]&&this.context[a].off(this.onUpdate)},r.getValue=function(){return this.context[a]?this.context[a].get():e},r.render=function(){return(e=this.props.children,Array.isArray(e)?e[0]:e)(this.state.value);var e},n}(S.Component);return o.contextTypes=((r={})[a]=Z().object,r),{Provider:i,Consumer:o}},H=function(e){var t=G();return t.displayName=e,t},q=H("Router-History"),$=H("Router"),K=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={location:t.history.location},n._isMounted=!1,n._pendingLocation=null,t.staticContext||(n.unlisten=t.history.listen((function(e){n._pendingLocation=e}))),n}N(t,e),t.computeRootMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}};var n=t.prototype;return n.componentDidMount=function(){var e=this;this._isMounted=!0,this.unlisten&&this.unlisten(),this.props.staticContext||(this.unlisten=this.props.history.listen((function(t){e._isMounted&&e.setState({location:t})}))),this._pendingLocation&&this.setState({location:this._pendingLocation})},n.componentWillUnmount=function(){this.unlisten&&(this.unlisten(),this._isMounted=!1,this._pendingLocation=null)},n.render=function(){return S.createElement($.Provider,{value:{history:this.props.history,location:this.state.location,match:t.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},S.createElement(q.Provider,{children:this.props.children||null,value:this.props.history}))},t}(S.Component);S.Component;S.Component;var X={},Y=1e4,Q=0;function J(e,t){void 0===t&&(t={}),("string"===typeof t||Array.isArray(t))&&(t={path:t});var n=t,r=n.path,a=n.exact,i=void 0!==a&&a,o=n.strict,s=void 0!==o&&o,u=n.sensitive,c=void 0!==u&&u;return[].concat(r).reduce((function(t,n){if(!n&&""!==n)return null;if(t)return t;var r=function(e,t){var n=""+t.end+t.strict+t.sensitive,r=X[n]||(X[n]={});if(r[e])return r[e];var a=[],i={regexp:U()(e,a,t),keys:a};return Q<Y&&(r[e]=i,Q++),i}(n,{end:i,strict:s,sensitive:c}),a=r.regexp,o=r.keys,u=a.exec(e);if(!u)return null;var l=u[0],d=u.slice(1),f=e===l;return i&&!f?null:{path:n,url:"/"===n&&""===l?"/":l,isExact:f,params:o.reduce((function(e,t,n){return e[t.name]=d[n],e}),{})}}),null)}var ee=function(e){function t(){return e.apply(this,arguments)||this}return N(t,e),t.prototype.render=function(){var e=this;return S.createElement($.Consumer,null,(function(t){t||B(!1);var n=e.props.location||t.location,r=_({},t,{location:n,match:e.props.computedMatch?e.props.computedMatch:e.props.path?J(n.pathname,e.props):t.match}),a=e.props,i=a.children,o=a.component,s=a.render;return Array.isArray(i)&&function(e){return 0===S.Children.count(e)}(i)&&(i=null),S.createElement($.Provider,{value:r},r.match?i?"function"===typeof i?i(r):i:o?S.createElement(o,r):s?s(r):null:"function"===typeof i?i(r):null)}))},t}(S.Component);function te(e){return"/"===e.charAt(0)?e:"/"+e}function ne(e,t){if(!e)return t;var n=te(e);return 0!==t.pathname.indexOf(n)?t:_({},t,{pathname:t.pathname.substr(n.length)})}function re(e){return"string"===typeof e?e:O(e)}function ae(e){return function(){B(!1)}}function ie(){}S.Component;S.Component;var oe;S.useContext;!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(oe||(oe={}));var se=function(e){return e};var ue="beforeunload",ce="popstate";function le(e){e.preventDefault(),e.returnValue=""}function de(){var e=[];return{get length(){return e.length},push:function(t){return e.push(t),function(){e=e.filter((function(e){return e!==t}))}},call:function(t){e.forEach((function(e){return e&&e(t)}))}}}function fe(){return Math.random().toString(36).substr(2,8)}function he(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,a=void 0===r?"":r,i=e.hash,o=void 0===i?"":i;return a&&"?"!==a&&(n+="?"===a.charAt(0)?a:"?"+a),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function pe(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}var ve,me=n(3433),ge=n(9439),ye=n(4942),be=n(4165),ke=n(5861),we=n(7326),xe=n(136),Ie=n(9388),Se=n(5671),Te=n(3144),Ee=n(1554),Ne=function(){function e(){(0,Se.Z)(this,e),this.m=new Map}return(0,Te.Z)(e,[{key:"reset",value:function(e){this.m=new Map(Object.entries(e))}},{key:"get",value:function(e,t){var n=this.m.get(e);return void 0!==n?n:t}},{key:"getBoolean",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.m.get(e);return void 0===n?t:"string"===typeof n?"true"===n:!!n}},{key:"getNumber",value:function(e,t){var n=parseFloat(this.m.get(e));return isNaN(n)?void 0!==t?t:NaN:n}},{key:"set",value:function(e,t){this.m.set(e,t)}}]),e}(),Ce=new Ne,Ze=function(e,t){return e.substr(0,t.length)===t},_e="ionic:",Ae="ionic-persist-config",Re=function(e,t){return"string"===typeof e&&(t=e,e=void 0),function(e){return De(e)}(e).includes(t)},De=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;if("undefined"===typeof e)return[];e.Ionic=e.Ionic||{};var t=e.Ionic.platforms;return null==t&&(t=e.Ionic.platforms=Oe(e)).forEach((function(t){return e.document.documentElement.classList.add("plt-".concat(t))})),t},Oe=function(e){var t=Ce.get("platform");return Object.keys(We).filter((function(n){var r=null===t||void 0===t?void 0:t[n];return"function"===typeof r?r(e):We[n](e)}))},Le=function(e){return!!Ve(e,/iPad/i)||!(!Ve(e,/Macintosh/i)||!Me(e))},Fe=function(e){return Ve(e,/android|sink/i)},Me=function(e){return Ue(e,"(any-pointer:coarse)")},Pe=function(e){return ze(e)||Be(e)},ze=function(e){return!!(e.cordova||e.phonegap||e.PhoneGap)},Be=function(e){var t=e.Capacitor;return!!(null===t||void 0===t?void 0:t.isNative)},Ve=function(e,t){return t.test(e.navigator.userAgent)},Ue=function(e,t){var n;return null===(n=e.matchMedia)||void 0===n?void 0:n.call(e,t).matches},We={ipad:Le,iphone:function(e){return Ve(e,/iPhone/i)},ios:function(e){return Ve(e,/iPhone|iPod/i)||Le(e)},android:Fe,phablet:function(e){var t=e.innerWidth,n=e.innerHeight,r=Math.min(t,n),a=Math.max(t,n);return r>390&&r<520&&a>620&&a<800},tablet:function(e){var t=e.innerWidth,n=e.innerHeight,r=Math.min(t,n),a=Math.max(t,n);return Le(e)||function(e){return Fe(e)&&!Ve(e,/mobile/i)}(e)||r>460&&r<820&&a>780&&a<1400},cordova:ze,capacitor:Be,electron:function(e){return Ve(e,/electron/i)},pwa:function(e){var t;return!(!(null===(t=e.matchMedia)||void 0===t?void 0:t.call(e,"(display-mode: standalone)").matches)&&!e.navigator.standalone)},mobile:Me,mobileweb:function(e){return Me(e)&&!Pe(e)},desktop:function(e){return!Me(e)},hybrid:Pe},je=function(e){return e&&(0,Ee.iJ)(e)||ve},Ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("undefined"!==typeof window){var t=window.document,n=window;Ee._y.config=Ce;var r=n.Ionic=n.Ionic||{},a={};e._ael&&(a.ael=e._ael),e._rel&&(a.rel=e._rel),e._ce&&(a.ce=e._ce),(0,Ee.TX)(a);var i=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},function(e){try{var t=e.sessionStorage.getItem(Ae);return null!==t?JSON.parse(t):{}}catch(n){return{}}}(n)),{persistConfig:!1}),r.config),function(e){var t={};return e.location.search.slice(1).split("&").map((function(e){return e.split("=")})).map((function(e){var t=(0,ge.Z)(e,2),n=t[0],r=t[1];return[decodeURIComponent(n),decodeURIComponent(r)]})).filter((function(e){var t=(0,ge.Z)(e,1)[0];return Ze(t,_e)})).map((function(e){var t=(0,ge.Z)(e,2),n=t[0],r=t[1];return[n.slice(_e.length),r]})).forEach((function(e){var n=(0,ge.Z)(e,2),r=n[0],a=n[1];t[r]=a})),t}(n)),e);Ce.reset(i),Ce.getBoolean("persistConfig")&&function(e,t){try{e.sessionStorage.setItem(Ae,JSON.stringify(t))}catch(n){return}}(n,i),De(n),r.config=Ce,r.mode=ve=Ce.get("mode",t.documentElement.getAttribute("mode")||(Re(n,"ios")?"ios":"md")),Ce.set("mode",ve),t.documentElement.setAttribute("mode",ve),t.documentElement.classList.add(ve),Ce.getBoolean("_testing")&&Ce.set("animated",!1);var o=function(e){var t;return null===(t=e.tagName)||void 0===t?void 0:t.startsWith("ION-")},s=function(e){return["ios","md"].includes(e)};(0,Ee.PM)((function(e){for(;e;){var t=e.mode||e.getAttribute("mode");if(t){if(s(t))return t;o(e)&&console.warn('Invalid ionic mode: "'+t+'", expected: "ios" or "md"')}e=e.parentElement}return ve}))}},He=n(8862),qe=n(1811),$e=0,Ke=new WeakMap,Xe=function(e){return{create:function(t){return tt(e,t)},dismiss:function(t,n,r){return ot(document,t,n,e,r)},getTop:function(){return(0,ke.Z)((0,be.Z)().mark((function t(){return(0,be.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",st(document,e));case 1:case"end":return t.stop()}}),t)})))()}}},Ye=Xe("ion-alert"),Qe=Xe("ion-action-sheet"),Je=Xe("ion-popover"),et=function(e){"undefined"!==typeof document&&it(document);var t=$e++;e.overlayIndex=t,e.hasAttribute("id")||(e.id="ion-overlay-".concat(t))},tt=function(e,t){return"undefined"!==typeof window&&"undefined"!==typeof window.customElements?window.customElements.whenDefined(e).then((function(){var n=document.createElement(e);return n.classList.add("overlay-hidden"),Object.assign(n,Object.assign(Object.assign({},t),{hasController:!0})),ft(document).appendChild(n),new Promise((function(e){return(0,qe.c)(n,e)}))})):Promise.resolve()},nt='[tabindex]:not([tabindex^="-"]):not([hidden]):not([disabled]), input:not([type=hidden]):not([tabindex^="-"]):not([hidden]):not([disabled]), textarea:not([tabindex^="-"]):not([hidden]):not([disabled]), button:not([tabindex^="-"]):not([hidden]):not([disabled]), select:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable[disabled="false"]:not([tabindex^="-"]):not([hidden])',rt=function(e,t){var n=e.querySelector(nt),r=null===n||void 0===n?void 0:n.shadowRoot;r&&(n=r.querySelector(nt)||n),n?(0,qe.f)(n):t.focus()},at=function(e,t){var n=Array.from(e.querySelectorAll(nt)),r=n.length>0?n[n.length-1]:null,a=null===r||void 0===r?void 0:r.shadowRoot;a&&(r=a.querySelector(nt)||r),r?r.focus():t.focus()},it=function(e){0===$e&&($e=1,e.addEventListener("focus",(function(t){!function(e,t){var n=st(t,"ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover"),r=e.target;n&&r&&!n.classList.contains("ion-disable-focus-trap")&&(n.shadowRoot?function(){if(n.contains(r))n.lastFocus=r;else{var e=n.lastFocus;rt(n,n),e===t.activeElement&&at(n,n),n.lastFocus=t.activeElement}}():function(){if(n===r)n.lastFocus=void 0;else{var e=(0,qe.g)(n);if(!e.contains(r))return;var a=e.querySelector(".ion-overlay-wrapper");if(!a)return;if(a.contains(r))n.lastFocus=r;else{var i=n.lastFocus;rt(a,n),i===t.activeElement&&at(a,n),n.lastFocus=t.activeElement}}}())}(t,e)}),!0),e.addEventListener("ionBackButton",(function(t){var n=st(e);(null===n||void 0===n?void 0:n.backdropDismiss)&&t.detail.register(He.OVERLAY_BACK_BUTTON_PRIORITY,(function(){return n.dismiss(void 0,bt)}))})),e.addEventListener("keyup",(function(t){if("Escape"===t.key){var n=st(e);(null===n||void 0===n?void 0:n.backdropDismiss)&&n.dismiss(void 0,bt)}})))},ot=function(e,t,n,r,a){var i=st(e,r,a);return i?i.dismiss(t,n):Promise.reject("overlay does not exist")},st=function(e,t,n){var r=function(e,t){return void 0===t&&(t="ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover,ion-toast"),Array.from(e.querySelectorAll(t)).filter((function(e){return e.overlayIndex>0}))}(e,t).filter((function(e){return!e.classList.contains("overlay-hidden")}));return void 0===n?r[r.length-1]:r.find((function(e){return e.id===n}))},ut=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=ft(document).querySelector("ion-router-outlet, ion-nav, #ion-view-container-root");t&&(e?t.setAttribute("aria-hidden","true"):t.removeAttribute("aria-hidden"))},ct=function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t,n,r,a,i){var o,s,u,c;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.presented){e.next=2;break}return e.abrupt("return");case 2:return ut(!0),t.presented=!0,t.willPresent.emit(),null===(o=t.willPresentShorthand)||void 0===o||o.emit(),u=je(t),c=t.enterAnimation?t.enterAnimation:Ce.get(n,"ios"===u?r:a),e.next=10,ht(t,c,t.el,i);case 10:e.sent&&(t.didPresent.emit(),null===(s=t.didPresentShorthand)||void 0===s||s.emit()),"ION-TOAST"!==t.el.tagName&&lt(t.el),!t.keyboardClose||null!==document.activeElement&&t.el.contains(document.activeElement)||t.el.focus();case 14:case"end":return e.stop()}}),e)})));return function(t,n,r,a,i){return e.apply(this,arguments)}}(),lt=function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){var n,r;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=document.activeElement){e.next=3;break}return e.abrupt("return");case 3:return(r=null===n||void 0===n?void 0:n.shadowRoot)&&(n=r.querySelector(nt)||n),e.next=7,t.onDidDismiss();case 7:n.focus();case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),dt=function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t,n,r,a,i,o,s){var u,c,l,d;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.presented){e.next=2;break}return e.abrupt("return",!1);case 2:if(ut(!1),t.presented=!1,e.prev=4,t.el.style.setProperty("pointer-events","none"),t.willDismiss.emit({data:n,role:r}),null===(u=t.willDismissShorthand)||void 0===u||u.emit({data:n,role:r}),l=je(t),d=t.leaveAnimation?t.leaveAnimation:Ce.get(a,"ios"===l?i:o),r===kt){e.next=13;break}return e.next=13,ht(t,d,t.el,s);case 13:t.didDismiss.emit({data:n,role:r}),null===(c=t.didDismissShorthand)||void 0===c||c.emit({data:n,role:r}),Ke.delete(t),t.el.classList.add("overlay-hidden"),t.el.style.removeProperty("pointer-events"),void 0!==t.el.lastFocus&&(t.el.lastFocus=void 0),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(4),console.error(e.t0);case 24:return t.el.remove(),e.abrupt("return",!0);case 26:case"end":return e.stop()}}),e,null,[[4,21]])})));return function(t,n,r,a,i,o,s){return e.apply(this,arguments)}}(),ft=function(e){return e.querySelector("ion-app")||e.body},ht=function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t,n,r,a){var i,o,s;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.classList.remove("overlay-hidden"),i=t.el,o=n(i,a),t.animated&&Ce.getBoolean("animated",!0)||o.duration(0),t.keyboardClose&&o.beforeAddWrite((function(){var e=r.ownerDocument.activeElement;(null===e||void 0===e?void 0:e.matches("input,ion-input, ion-textarea"))&&e.blur()})),s=Ke.get(t)||[],Ke.set(t,[].concat((0,me.Z)(s),[o])),e.next=9,o.play();case 9:return e.abrupt("return",!0);case 10:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),pt=function(e,t){var n,r=new Promise((function(e){return n=e}));return vt(e,t,(function(e){n(e.detail)})),r},vt=function(e,t,n){(0,qe.a)(e,t,(function r(a){(0,qe.b)(e,t,r),n(a)}))},mt=function(e){return"cancel"===e||e===bt},gt=function(e){return e()},yt=function(e,t){if("function"===typeof e)return Ce.get("_zoneGate",gt)((function(){try{return e(t)}catch(n){throw n}}))},bt="backdrop",kt="gesture",wt=n(5883);function xt(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}Object.create;Object.create;var It,St,Tt=n(4164),Et="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='square' stroke-miterlimit='10' stroke-width='48' d='M244 400L100 256l144-144M120 256h292' class='ionicon-fill-none'/></svg>",Nt="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' stroke-width='48' d='M328 112L184 256l144 144' class='ionicon-fill-none'/></svg>",Ct="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' stroke-width='48' d='M112 184l144 144 144-144' class='ionicon-fill-none'/></svg>",Zt="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' stroke-width='48' d='M184 112l144 144-144 144' class='ionicon-fill-none'/></svg>",_t="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M256 48C141.31 48 48 141.31 48 256s93.31 208 208 208 208-93.31 208-208S370.69 48 256 48zm75.31 260.69a16 16 0 11-22.62 22.62L256 278.63l-52.69 52.68a16 16 0 01-22.62-22.62L233.37 256l-52.68-52.69a16 16 0 0122.62-22.62L256 233.37l52.69-52.68a16 16 0 0122.62 22.62L278.63 256z'/></svg>",At="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M400 145.49L366.51 112 256 222.51 145.49 112 112 145.49 222.51 256 112 366.51 145.49 400 256 289.49 366.51 400 400 366.51 289.49 256 400 145.49z'/></svg>",Rt="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' d='M400 256H112' class='ionicon-fill-none ionicon-stroke-width'/></svg>",Dt=function(e){var t=function(){if("undefined"===typeof window)return new Map;if(!It){var e=window;e.Ionicons=e.Ionicons||{},It=e.Ionicons.map=e.Ionicons.map||new Map}return It}().get(e);return t||(0,Ee.K3)("svg/".concat(e,".svg"))},Ot=function(e,t,n,r,a){return n="ios"===(n&&Pt(n))?"ios":"md",r&&"ios"===n?e=Pt(r):a&&"md"===n?e=Pt(a):(e||!t||Ft(t)||(e=t),Mt(e)&&(e=Pt(e))),Mt(e)&&""!==e.trim()?""!==e.replace(/[a-z]|-|\d/gi,"")?null:e:null},Lt=function(e){return Mt(e)&&(e=e.trim(),Ft(e))?e:null},Ft=function(e){return e.length>0&&/(\/|\.)/.test(e)},Mt=function(e){return"string"===typeof e},Pt=function(e){return e.toLowerCase()},zt=function e(t){if(1===t.nodeType){if("script"===t.nodeName.toLowerCase())return!1;for(var n=0;n<t.attributes.length;n++){var r=t.attributes[n].name;if(Mt(r)&&0===r.toLowerCase().indexOf("on"))return!1}for(var a=0;a<t.childNodes.length;a++)if(!e(t.childNodes[a]))return!1}return!0},Bt=new Map,Vt=new Map,Ut=function(e,t){var n=Vt.get(e);if(!n){if("undefined"===typeof fetch||"undefined"===typeof document)return Bt.set(e,""),Promise.resolve();if(function(e){return e.startsWith("data:image/svg+xml")}(e)&&function(e){return-1!==e.indexOf(";utf8,")}(e)){St||(St=new DOMParser);var r=St.parseFromString(e,"text/html").querySelector("svg");return r&&Bt.set(e,r.outerHTML),Promise.resolve()}n=fetch(e).then((function(n){if(n.ok)return n.text().then((function(n){n&&!1!==t&&(n=function(e){var t=document.createElement("div");t.innerHTML=e;for(var n=t.childNodes.length-1;n>=0;n--)"svg"!==t.childNodes[n].nodeName.toLowerCase()&&t.removeChild(t.childNodes[n]);var r=t.firstElementChild;if(r&&"svg"===r.nodeName.toLowerCase()){var a=r.getAttribute("class")||"";if(r.setAttribute("class",(a+" s-ion-icon").trim()),zt(r))return t.innerHTML}return""}(n)),Bt.set(e,n||"")}));Bt.set(e,"")})),Vt.set(e,n)}return n},Wt=(Ee.mv,function(){return Ee.Z5.isBrowser&&"undefined"!==typeof document&&document.documentElement.getAttribute("mode")||"md"}),jt=function(e){return e?(0,ye.Z)({"ion-color":!0},"ion-color-".concat(e),!0):null};Ee.mv;var Gt=0;var Ht=n(7762);Ee.mv;Ee.mv;var qt=n(2503),$t=(0,Ee.GH)(function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(){var e;return(0,Se.Z)(this,n),(e=t.call(this)).__registerHost(),e.__attachShadow(),e.ionBackdropTap=(0,Ee.yM)((0,we.Z)(e),"ionBackdropTap",7),e.blocker=qt.G.createBlocker({disableScroll:!0}),e.visible=!0,e.tappable=!0,e.stopPropagation=!0,e}return(0,Te.Z)(n,[{key:"connectedCallback",value:function(){this.stopPropagation&&this.blocker.block()}},{key:"disconnectedCallback",value:function(){this.blocker.unblock()}},{key:"onMouseDown",value:function(e){this.emitTap(e)}},{key:"emitTap",value:function(e){this.stopPropagation&&(e.preventDefault(),e.stopPropagation()),this.tappable&&this.ionBackdropTap.emit()}},{key:"render",value:function(){var e,t=je(this);return(0,Ee.h)(Ee.AA,{tabindex:"-1","aria-hidden":"true",class:(e={},(0,ye.Z)(e,t,!0),(0,ye.Z)(e,"backdrop-hide",!this.visible),(0,ye.Z)(e,"backdrop-no-tappable",!this.tappable),e)})}}],[{key:"style",get:function(){return{ios:":host{left:0;right:0;top:0;bottom:0;display:block;position:absolute;-webkit-transform:translateZ(0);transform:translateZ(0);contain:strict;cursor:pointer;opacity:0.01;-ms-touch-action:none;touch-action:none;z-index:2}:host(.backdrop-hide){background:transparent}:host(.backdrop-no-tappable){cursor:auto}:host{background-color:var(--ion-backdrop-color, #000)}",md:":host{left:0;right:0;top:0;bottom:0;display:block;position:absolute;-webkit-transform:translateZ(0);transform:translateZ(0);contain:strict;cursor:pointer;opacity:0.01;-ms-touch-action:none;touch-action:none;z-index:2}:host(.backdrop-hide){background:transparent}:host(.backdrop-no-tappable){cursor:auto}:host{background-color:var(--ion-backdrop-color, #000)}"}}}]),n}(Ee.mv),[33,"ion-backdrop",{visible:[4],tappable:[4],stopPropagation:[4,"stop-propagation"]},[[2,"click","onMouseDown"]]]);function Kt(){if("undefined"!==typeof customElements){["ion-backdrop"].forEach((function(e){if("ion-backdrop"===e)customElements.get(e)||customElements.define(e,$t)}))}}var Xt=function(e,t){return null!==t.closest(e)},Yt=function(e,t){return"string"===typeof e&&e.length>0?Object.assign((0,ye.Z)({"ion-color":!0},"ion-color-".concat(e),!0),t):t},Qt=function(e){var t={};return function(e){return void 0!==e?(Array.isArray(e)?e:e.split(" ")).filter((function(e){return null!=e})).map((function(e){return e.trim()})).filter((function(e){return""!==e})):[]}(e).forEach((function(e){return t[e]=!0})),t},Jt=/^[a-z][a-z0-9+\-.]*:/,en=function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t,n,r,a){var i;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==t||"#"===t[0]||Jt.test(t)){e.next=5;break}if(!(i=document.querySelector("ion-router"))){e.next=5;break}return null!=n&&n.preventDefault(),e.abrupt("return",i.push(t,r,a));case 5:return e.abrupt("return",!1);case 6:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}();Ee.mv;Ee.mv;var tn=(0,Ee.GH)(function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(){var e;return(0,Se.Z)(this,n),(e=t.call(this)).__registerHost(),e.collapse=!1,e}return(0,Te.Z)(n,[{key:"render",value:function(){var e,t=je(this);return(0,Ee.h)(Ee.AA,{class:(e={},(0,ye.Z)(e,t,!0),(0,ye.Z)(e,"buttons-collapse",this.collapse),e)})}}],[{key:"style",get:function(){return{ios:".sc-ion-buttons-ios-h{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-webkit-transform:translateZ(0);transform:translateZ(0);z-index:99}.sc-ion-buttons-ios-s ion-button{--padding-top:0;--padding-bottom:0;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}.sc-ion-buttons-ios-s ion-button{--padding-start:5px;--padding-end:5px;margin-left:2px;margin-right:2px;height:32px}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){.sc-ion-buttons-ios-s ion-button{margin-left:unset;margin-right:unset;-webkit-margin-start:2px;margin-inline-start:2px;-webkit-margin-end:2px;margin-inline-end:2px}}.sc-ion-buttons-ios-s ion-button:not(.button-round){--border-radius:4px}.sc-ion-buttons-ios-h.ion-color.sc-ion-buttons-ios-s .button,.ion-color .sc-ion-buttons-ios-h.sc-ion-buttons-ios-s .button{--color:initial;--border-color:initial;--background-focused:var(--ion-color-contrast)}.sc-ion-buttons-ios-h.ion-color.sc-ion-buttons-ios-s .button-solid,.ion-color .sc-ion-buttons-ios-h.sc-ion-buttons-ios-s .button-solid{--background:var(--ion-color-contrast);--background-focused:#000;--background-focused-opacity:.12;--background-activated:#000;--background-activated-opacity:.12;--background-hover:var(--ion-color-base);--background-hover-opacity:0.45;--color:var(--ion-color-base);--color-focused:var(--ion-color-base)}.sc-ion-buttons-ios-h.ion-color.sc-ion-buttons-ios-s .button-clear,.ion-color .sc-ion-buttons-ios-h.sc-ion-buttons-ios-s .button-clear{--color-activated:var(--ion-color-contrast);--color-focused:var(--ion-color-contrast)}.sc-ion-buttons-ios-h.ion-color.sc-ion-buttons-ios-s .button-outline,.ion-color .sc-ion-buttons-ios-h.sc-ion-buttons-ios-s .button-outline{--color-activated:var(--ion-color-base);--color-focused:var(--ion-color-contrast);--background-activated:var(--ion-color-contrast)}.sc-ion-buttons-ios-s .button-clear,.sc-ion-buttons-ios-s .button-outline{--background-activated:transparent;--background-focused:currentColor;--background-hover:transparent}.sc-ion-buttons-ios-s .button-solid:not(.ion-color){--background-focused:#000;--background-focused-opacity:.12;--background-activated:#000;--background-activated-opacity:.12}.sc-ion-buttons-ios-s ion-icon[slot=start]{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;margin-right:0.3em;font-size:24px;line-height:0.67}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){.sc-ion-buttons-ios-s ion-icon[slot=start]{margin-right:unset;-webkit-margin-end:0.3em;margin-inline-end:0.3em}}.sc-ion-buttons-ios-s ion-icon[slot=end]{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;margin-left:0.4em;font-size:24px;line-height:0.67}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){.sc-ion-buttons-ios-s ion-icon[slot=end]{margin-left:unset;-webkit-margin-start:0.4em;margin-inline-start:0.4em}}.sc-ion-buttons-ios-s ion-icon[slot=icon-only]{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;font-size:28px;line-height:0.67}",md:".sc-ion-buttons-md-h{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-webkit-transform:translateZ(0);transform:translateZ(0);z-index:99}.sc-ion-buttons-md-s ion-button{--padding-top:0;--padding-bottom:0;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}.sc-ion-buttons-md-s ion-button{--padding-top:0;--padding-bottom:0;--padding-start:8px;--padding-end:8px;--box-shadow:none;margin-left:2px;margin-right:2px;height:32px}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){.sc-ion-buttons-md-s ion-button{margin-left:unset;margin-right:unset;-webkit-margin-start:2px;margin-inline-start:2px;-webkit-margin-end:2px;margin-inline-end:2px}}.sc-ion-buttons-md-s ion-button:not(.button-round){--border-radius:2px}.sc-ion-buttons-md-h.ion-color.sc-ion-buttons-md-s .button,.ion-color .sc-ion-buttons-md-h.sc-ion-buttons-md-s .button{--color:initial;--color-focused:var(--ion-color-contrast);--color-hover:var(--ion-color-contrast);--background-activated:transparent;--background-focused:var(--ion-color-contrast);--background-hover:var(--ion-color-contrast)}.sc-ion-buttons-md-h.ion-color.sc-ion-buttons-md-s .button-solid,.ion-color .sc-ion-buttons-md-h.sc-ion-buttons-md-s .button-solid{--background:var(--ion-color-contrast);--background-activated:transparent;--background-focused:var(--ion-color-shade);--background-hover:var(--ion-color-base);--color:var(--ion-color-base);--color-focused:var(--ion-color-base);--color-hover:var(--ion-color-base)}.sc-ion-buttons-md-h.ion-color.sc-ion-buttons-md-s .button-outline,.ion-color .sc-ion-buttons-md-h.sc-ion-buttons-md-s .button-outline{--border-color:var(--ion-color-contrast)}.sc-ion-buttons-md-s .button-has-icon-only.button-clear{--padding-top:12px;--padding-end:12px;--padding-bottom:12px;--padding-start:12px;--border-radius:50%;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;width:48px;height:48px}.sc-ion-buttons-md-s .button{--background-hover:currentColor}.sc-ion-buttons-md-s .button-solid{--color:var(--ion-toolbar-background, var(--ion-background-color, #fff));--background:var(--ion-toolbar-color, var(--ion-text-color, #424242));--background-activated:transparent;--background-focused:currentColor}.sc-ion-buttons-md-s .button-outline{--color:initial;--background:transparent;--background-activated:transparent;--background-focused:currentColor;--background-hover:currentColor;--border-color:currentColor}.sc-ion-buttons-md-s .button-clear{--color:initial;--background:transparent;--background-activated:transparent;--background-focused:currentColor;--background-hover:currentColor}.sc-ion-buttons-md-s ion-icon[slot=start]{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;margin-right:0.3em;font-size:1.4em}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){.sc-ion-buttons-md-s ion-icon[slot=start]{margin-right:unset;-webkit-margin-end:0.3em;margin-inline-end:0.3em}}.sc-ion-buttons-md-s ion-icon[slot=end]{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;margin-left:0.4em;font-size:1.4em}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){.sc-ion-buttons-md-s ion-icon[slot=end]{margin-left:unset;-webkit-margin-start:0.4em;margin-inline-start:0.4em}}.sc-ion-buttons-md-s ion-icon[slot=icon-only]{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;font-size:1.8em}"}}}]),n}(Ee.mv),[34,"ion-buttons",{collapse:[4]}]);function nn(){if("undefined"!==typeof customElements){["ion-buttons"].forEach((function(e){if("ion-buttons"===e)customElements.get(e)||customElements.define(e,tn)}))}}var rn=nn;Ee.mv;var an=(0,Ee.GH)(function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(){var e;return(0,Se.Z)(this,n),(e=t.call(this)).__registerHost(),e.__attachShadow(),e.translucent=!1,e}return(0,Te.Z)(n,[{key:"render",value:function(){var e=je(this);return(0,Ee.h)(Ee.AA,{class:Yt(this.color,(0,ye.Z)({"card-header-translucent":this.translucent,"ion-inherit-color":!0},e,!0))},(0,Ee.h)("slot",null))}}],[{key:"style",get:function(){return{ios:":host{--background:transparent;--color:inherit;display:block;position:relative;background:var(--background);color:var(--color)}:host(.ion-color){background:var(--ion-color-base);color:var(--ion-color-contrast)}:host{padding-left:20px;padding-right:20px;padding-top:20px;padding-bottom:16px}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){:host{padding-left:unset;padding-right:unset;-webkit-padding-start:20px;padding-inline-start:20px;-webkit-padding-end:20px;padding-inline-end:20px}}@supports ((-webkit-backdrop-filter: blur(0)) or (backdrop-filter: blur(0))){:host(.card-header-translucent){background-color:rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.9);-webkit-backdrop-filter:saturate(180%) blur(30px);backdrop-filter:saturate(180%) blur(30px)}}",md:":host{--background:transparent;--color:inherit;display:block;position:relative;background:var(--background);color:var(--color)}:host(.ion-color){background:var(--ion-color-base);color:var(--ion-color-contrast)}:host{padding-left:16px;padding-right:16px;padding-top:16px;padding-bottom:16px}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){:host{padding-left:unset;padding-right:unset;-webkit-padding-start:16px;padding-inline-start:16px;-webkit-padding-end:16px;padding-inline-end:16px}}::slotted(ion-card-title:not(:first-child)),::slotted(ion-card-subtitle:not(:first-child)){margin-top:8px}"}}}]),n}(Ee.mv),[33,"ion-card-header",{color:[513],translucent:[4]}]);var on=function(){if("undefined"!==typeof customElements){["ion-card-header"].forEach((function(e){if("ion-card-header"===e)customElements.get(e)||customElements.define(e,an)}))}};Ee.mv;var sn=(0,Ee.GH)(function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(){var e;return(0,Se.Z)(this,n),(e=t.call(this)).__registerHost(),e.__attachShadow(),e}return(0,Te.Z)(n,[{key:"render",value:function(){var e=je(this);return(0,Ee.h)(Ee.AA,{role:"heading","aria-level":"2",class:Yt(this.color,(0,ye.Z)({"ion-inherit-color":!0},e,!0))},(0,Ee.h)("slot",null))}}],[{key:"style",get:function(){return{ios:":host{display:block;position:relative;color:var(--color)}:host(.ion-color){color:var(--ion-color-base)}:host{--color:var(--ion-text-color, #000);margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;font-size:28px;font-weight:700;line-height:1.2}",md:":host{display:block;position:relative;color:var(--color)}:host(.ion-color){color:var(--ion-color-base)}:host{--color:var(--ion-color-step-850, #262626);margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;font-size:20px;font-weight:500;line-height:1.2}"}}}]),n}(Ee.mv),[33,"ion-card-title",{color:[513]}]);var un=function(){if("undefined"!==typeof customElements){["ion-card-title"].forEach((function(e){if("ion-card-title"===e)customElements.get(e)||customElements.define(e,sn)}))}},cn=(Ee.mv,0);var ln=(0,Ee.GH)(function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(){var e;return(0,Se.Z)(this,n),(e=t.call(this)).__registerHost(),e.__attachShadow(),e.type="bounded",e}return(0,Te.Z)(n,[{key:"addRipple",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t,n){var r=this;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){(0,Ee.wj)((function(){var a=r.el.getBoundingClientRect(),i=a.width,o=a.height,s=Math.sqrt(i*i+o*o),u=Math.max(o,i),c=r.unbounded?u:s+fn,l=Math.floor(u*hn),d=c/l,f=t-a.left,h=n-a.top;r.unbounded&&(f=.5*i,h=.5*o);var p=f-.5*l,v=h-.5*l,m=.5*i-f,g=.5*o-h;(0,Ee.Iu)((function(){var t=document.createElement("div");t.classList.add("ripple-effect");var n=t.style;n.top=v+"px",n.left=p+"px",n.width=n.height=l+"px",n.setProperty("--final-scale","".concat(d)),n.setProperty("--translate-end","".concat(m,"px, ").concat(g,"px")),(r.el.shadowRoot||r.el).appendChild(t),setTimeout((function(){e((function(){dn(t)}))}),325)}))}))})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unbounded",get:function(){return"unbounded"===this.type}},{key:"render",value:function(){var e,t=je(this);return(0,Ee.h)(Ee.AA,{role:"presentation",class:(e={},(0,ye.Z)(e,t,!0),(0,ye.Z)(e,"unbounded",this.unbounded),e)})}},{key:"el",get:function(){return this}}],[{key:"style",get:function(){return":host{left:0;right:0;top:0;bottom:0;position:absolute;contain:strict;pointer-events:none}:host(.unbounded){contain:layout size style}.ripple-effect{border-radius:50%;position:absolute;background-color:currentColor;color:inherit;contain:strict;opacity:0;-webkit-animation:225ms rippleAnimation forwards, 75ms fadeInAnimation forwards;animation:225ms rippleAnimation forwards, 75ms fadeInAnimation forwards;will-change:transform, opacity;pointer-events:none}.fade-out{-webkit-transform:translate(var(--translate-end)) scale(var(--final-scale, 1));transform:translate(var(--translate-end)) scale(var(--final-scale, 1));-webkit-animation:150ms fadeOutAnimation forwards;animation:150ms fadeOutAnimation forwards}@-webkit-keyframes rippleAnimation{from{-webkit-animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);-webkit-transform:scale(1);transform:scale(1)}to{-webkit-transform:translate(var(--translate-end)) scale(var(--final-scale, 1));transform:translate(var(--translate-end)) scale(var(--final-scale, 1))}}@keyframes rippleAnimation{from{-webkit-animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);-webkit-transform:scale(1);transform:scale(1)}to{-webkit-transform:translate(var(--translate-end)) scale(var(--final-scale, 1));transform:translate(var(--translate-end)) scale(var(--final-scale, 1))}}@-webkit-keyframes fadeInAnimation{from{-webkit-animation-timing-function:linear;animation-timing-function:linear;opacity:0}to{opacity:0.16}}@keyframes fadeInAnimation{from{-webkit-animation-timing-function:linear;animation-timing-function:linear;opacity:0}to{opacity:0.16}}@-webkit-keyframes fadeOutAnimation{from{-webkit-animation-timing-function:linear;animation-timing-function:linear;opacity:0.16}to{opacity:0}}@keyframes fadeOutAnimation{from{-webkit-animation-timing-function:linear;animation-timing-function:linear;opacity:0.16}to{opacity:0}}"}}]),n}(Ee.mv),[1,"ion-ripple-effect",{type:[1],addRipple:[64]}]),dn=function(e){e.classList.add("fade-out"),setTimeout((function(){e.remove()}),200)},fn=10,hn=.5;function pn(){if("undefined"!==typeof customElements){["ion-ripple-effect"].forEach((function(e){if("ion-ripple-effect"===e)customElements.get(e)||customElements.define(e,ln)}))}}var vn=(0,Ee.GH)(function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(){var e;return(0,Se.Z)(this,n),(e=t.call(this)).__registerHost(),e.__attachShadow(),e.outline=!1,e.disabled=!1,e}return(0,Te.Z)(n,[{key:"render",value:function(){var e,t=je(this);return(0,Ee.h)(Ee.AA,{"aria-disabled":this.disabled?"true":null,class:Yt(this.color,(e={},(0,ye.Z)(e,t,!0),(0,ye.Z)(e,"chip-outline",this.outline),(0,ye.Z)(e,"chip-disabled",this.disabled),(0,ye.Z)(e,"ion-activatable",!0),e))},(0,Ee.h)("slot",null),"md"===t&&(0,Ee.h)("ion-ripple-effect",null))}}],[{key:"style",get:function(){return":host{--background:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.12);--color:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.87);border-radius:16px;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;margin-left:4px;margin-right:4px;margin-top:4px;margin-bottom:4px;padding-left:12px;padding-right:12px;padding-top:7px;padding-bottom:7px;display:-ms-inline-flexbox;display:inline-flex;position:relative;-ms-flex-align:center;align-items:center;height:32px;background:var(--background);color:var(--color);font-family:var(--ion-font-family, inherit);font-size:14px;cursor:pointer;overflow:hidden;vertical-align:middle;-webkit-box-sizing:border-box;box-sizing:border-box}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){:host{margin-left:unset;margin-right:unset;-webkit-margin-start:4px;margin-inline-start:4px;-webkit-margin-end:4px;margin-inline-end:4px}}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){:host{padding-left:unset;padding-right:unset;-webkit-padding-start:12px;padding-inline-start:12px;-webkit-padding-end:12px;padding-inline-end:12px}}:host(.chip-disabled){cursor:default;opacity:0.4;pointer-events:none}:host(.ion-color){background:rgba(var(--ion-color-base-rgb), 0.08);color:var(--ion-color-shade)}:host(.ion-color:focus){background:rgba(var(--ion-color-base-rgb), 0.12)}:host(.ion-color.ion-activated){background:rgba(var(--ion-color-base-rgb), 0.16)}:host(.chip-outline){border-width:1px;border-style:solid}:host(.chip-outline){border-color:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.32);background:transparent}:host(.chip-outline.ion-color){border-color:rgba(var(--ion-color-base-rgb), 0.32)}:host(.chip-outline:not(.ion-color):focus){background:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.04)}:host(.chip-outline.ion-activated:not(.ion-color)){background:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.08)}::slotted(ion-icon){font-size:20px}:host(:not(.ion-color)) ::slotted(ion-icon){color:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.54)}::slotted(ion-icon:first-child){margin-left:-4px;margin-right:8px;margin-top:-4px;margin-bottom:-4px}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){::slotted(ion-icon:first-child){margin-left:unset;margin-right:unset;-webkit-margin-start:-4px;margin-inline-start:-4px;-webkit-margin-end:8px;margin-inline-end:8px}}::slotted(ion-icon:last-child){margin-left:8px;margin-right:-4px;margin-top:-4px;margin-bottom:-4px}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){::slotted(ion-icon:last-child){margin-left:unset;margin-right:unset;-webkit-margin-start:8px;margin-inline-start:8px;-webkit-margin-end:-4px;margin-inline-end:-4px}}::slotted(ion-avatar){width:24px;height:24px}::slotted(ion-avatar:first-child){margin-left:-8px;margin-right:8px;margin-top:-4px;margin-bottom:-4px}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){::slotted(ion-avatar:first-child){margin-left:unset;margin-right:unset;-webkit-margin-start:-8px;margin-inline-start:-8px;-webkit-margin-end:8px;margin-inline-end:8px}}::slotted(ion-avatar:last-child){margin-left:8px;margin-right:-8px;margin-top:-4px;margin-bottom:-4px}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){::slotted(ion-avatar:last-child){margin-left:unset;margin-right:unset;-webkit-margin-start:8px;margin-inline-start:8px;-webkit-margin-end:-8px;margin-inline-end:-8px}}:host(:focus){outline:none}:host(:focus){--background:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.16)}:host(.ion-activated){--background:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.2)}@media (any-hover: hover){:host(:hover){--background:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.16)}:host(.ion-color:hover){background:rgba(var(--ion-color-base-rgb), 0.12)}:host(.chip-outline:not(.ion-color):hover){background:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.04)}}"}}]),n}(Ee.mv),[1,"ion-chip",{color:[513],outline:[4],disabled:[4]}]);var mn=function(){if("undefined"!==typeof customElements){["ion-chip","ion-ripple-effect"].forEach((function(e){switch(e){case"ion-chip":customElements.get(e)||customElements.define(e,vn);break;case"ion-ripple-effect":customElements.get(e)||pn()}}))}},gn={xs:"(min-width: 0px)",sm:"(min-width: 576px)",md:"(min-width: 768px)",lg:"(min-width: 992px)",xl:"(min-width: 1200px)"},yn=function(e){if(void 0===e||""===e)return!0;if(window.matchMedia){var t=gn[e];return window.matchMedia(t).matches}return!1},bn="undefined"!==typeof window?window:void 0,kn=bn&&!!(bn.CSS&&bn.CSS.supports&&bn.CSS.supports("--a: 0")),wn=["","xs","sm","md","lg","xl"],xn=(0,Ee.GH)(function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(){var e;return(0,Se.Z)(this,n),(e=t.call(this)).__registerHost(),e.__attachShadow(),e}return(0,Te.Z)(n,[{key:"onResize",value:function(){(0,Ee.xE)(this)}},{key:"getColumns",value:function(e){for(var t,n=0,r=wn;n<r.length;n++){var a=r[n],i=yn(a),o=this[e+a.charAt(0).toUpperCase()+a.slice(1)];i&&void 0!==o&&(t=o)}return t}},{key:"calculateSize",value:function(){var e=this.getColumns("size");if(e&&""!==e){var t="auto"===e?"auto":kn?"calc(calc(".concat(e," / var(--ion-grid-columns, 12)) * 100%)"):e/12*100+"%";return{flex:"0 0 ".concat(t),width:"".concat(t),"max-width":"".concat(t)}}}},{key:"calculatePosition",value:function(e,t){var n=this.getColumns(e);if(n){var r=kn?"calc(calc(".concat(n," / var(--ion-grid-columns, 12)) * 100%)"):n>0&&n<12?n/12*100+"%":"auto";return(0,ye.Z)({},t,r)}}},{key:"calculateOffset",value:function(e){return this.calculatePosition("offset",e?"margin-right":"margin-left")}},{key:"calculatePull",value:function(e){return this.calculatePosition("pull",e?"left":"right")}},{key:"calculatePush",value:function(e){return this.calculatePosition("push",e?"right":"left")}},{key:"render",value:function(){var e="rtl"===document.dir,t=je(this);return(0,Ee.h)(Ee.AA,{class:(0,ye.Z)({},t,!0),style:Object.assign(Object.assign(Object.assign(Object.assign({},this.calculateOffset(e)),this.calculatePull(e)),this.calculatePush(e)),this.calculateSize())},(0,Ee.h)("slot",null))}}],[{key:"style",get:function(){return":host{padding-left:var(--ion-grid-column-padding-xs, var(--ion-grid-column-padding, 5px));padding-right:var(--ion-grid-column-padding-xs, var(--ion-grid-column-padding, 5px));padding-top:var(--ion-grid-column-padding-xs, var(--ion-grid-column-padding, 5px));padding-bottom:var(--ion-grid-column-padding-xs, var(--ion-grid-column-padding, 5px));margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-box-sizing:border-box;box-sizing:border-box;position:relative;-ms-flex-preferred-size:0;flex-basis:0;-ms-flex-positive:1;flex-grow:1;width:100%;max-width:100%;min-height:1px}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){:host{padding-left:unset;padding-right:unset;-webkit-padding-start:var(--ion-grid-column-padding-xs, var(--ion-grid-column-padding, 5px));padding-inline-start:var(--ion-grid-column-padding-xs, var(--ion-grid-column-padding, 5px));-webkit-padding-end:var(--ion-grid-column-padding-xs, var(--ion-grid-column-padding, 5px));padding-inline-end:var(--ion-grid-column-padding-xs, var(--ion-grid-column-padding, 5px))}}@media (min-width: 576px){:host{padding-left:var(--ion-grid-column-padding-sm, var(--ion-grid-column-padding, 5px));padding-right:var(--ion-grid-column-padding-sm, var(--ion-grid-column-padding, 5px));padding-top:var(--ion-grid-column-padding-sm, var(--ion-grid-column-padding, 5px));padding-bottom:var(--ion-grid-column-padding-sm, var(--ion-grid-column-padding, 5px))}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){:host{padding-left:unset;padding-right:unset;-webkit-padding-start:var(--ion-grid-column-padding-sm, var(--ion-grid-column-padding, 5px));padding-inline-start:var(--ion-grid-column-padding-sm, var(--ion-grid-column-padding, 5px));-webkit-padding-end:var(--ion-grid-column-padding-sm, var(--ion-grid-column-padding, 5px));padding-inline-end:var(--ion-grid-column-padding-sm, var(--ion-grid-column-padding, 5px))}}}@media (min-width: 768px){:host{padding-left:var(--ion-grid-column-padding-md, var(--ion-grid-column-padding, 5px));padding-right:var(--ion-grid-column-padding-md, var(--ion-grid-column-padding, 5px));padding-top:var(--ion-grid-column-padding-md, var(--ion-grid-column-padding, 5px));padding-bottom:var(--ion-grid-column-padding-md, var(--ion-grid-column-padding, 5px))}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){:host{padding-left:unset;padding-right:unset;-webkit-padding-start:var(--ion-grid-column-padding-md, var(--ion-grid-column-padding, 5px));padding-inline-start:var(--ion-grid-column-padding-md, var(--ion-grid-column-padding, 5px));-webkit-padding-end:var(--ion-grid-column-padding-md, var(--ion-grid-column-padding, 5px));padding-inline-end:var(--ion-grid-column-padding-md, var(--ion-grid-column-padding, 5px))}}}@media (min-width: 992px){:host{padding-left:var(--ion-grid-column-padding-lg, var(--ion-grid-column-padding, 5px));padding-right:var(--ion-grid-column-padding-lg, var(--ion-grid-column-padding, 5px));padding-top:var(--ion-grid-column-padding-lg, var(--ion-grid-column-padding, 5px));padding-bottom:var(--ion-grid-column-padding-lg, var(--ion-grid-column-padding, 5px))}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){:host{padding-left:unset;padding-right:unset;-webkit-padding-start:var(--ion-grid-column-padding-lg, var(--ion-grid-column-padding, 5px));padding-inline-start:var(--ion-grid-column-padding-lg, var(--ion-grid-column-padding, 5px));-webkit-padding-end:var(--ion-grid-column-padding-lg, var(--ion-grid-column-padding, 5px));padding-inline-end:var(--ion-grid-column-padding-lg, var(--ion-grid-column-padding, 5px))}}}@media (min-width: 1200px){:host{padding-left:var(--ion-grid-column-padding-xl, var(--ion-grid-column-padding, 5px));padding-right:var(--ion-grid-column-padding-xl, var(--ion-grid-column-padding, 5px));padding-top:var(--ion-grid-column-padding-xl, var(--ion-grid-column-padding, 5px));padding-bottom:var(--ion-grid-column-padding-xl, var(--ion-grid-column-padding, 5px))}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){:host{padding-left:unset;padding-right:unset;-webkit-padding-start:var(--ion-grid-column-padding-xl, var(--ion-grid-column-padding, 5px));padding-inline-start:var(--ion-grid-column-padding-xl, var(--ion-grid-column-padding, 5px));-webkit-padding-end:var(--ion-grid-column-padding-xl, var(--ion-grid-column-padding, 5px));padding-inline-end:var(--ion-grid-column-padding-xl, var(--ion-grid-column-padding, 5px))}}}"}}]),n}(Ee.mv),[1,"ion-col",{offset:[1],offsetXs:[1,"offset-xs"],offsetSm:[1,"offset-sm"],offsetMd:[1,"offset-md"],offsetLg:[1,"offset-lg"],offsetXl:[1,"offset-xl"],pull:[1],pullXs:[1,"pull-xs"],pullSm:[1,"pull-sm"],pullMd:[1,"pull-md"],pullLg:[1,"pull-lg"],pullXl:[1,"pull-xl"],push:[1],pushXs:[1,"push-xs"],pushSm:[1,"push-sm"],pushMd:[1,"push-md"],pushLg:[1,"push-lg"],pushXl:[1,"push-xl"],size:[1],sizeXs:[1,"size-xs"],sizeSm:[1,"size-sm"],sizeMd:[1,"size-md"],sizeLg:[1,"size-lg"],sizeXl:[1,"size-xl"]},[[9,"resize","onResize"]]]);var In=function(){if("undefined"!==typeof customElements){["ion-col"].forEach((function(e){if("ion-col"===e)customElements.get(e)||customElements.define(e,xn)}))}},Sn=n(9507),Tn=(0,Ee.GH)(function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(){var e;return(0,Se.Z)(this,n),(e=t.call(this)).__registerHost(),e.__attachShadow(),e.ionScrollStart=(0,Ee.yM)((0,we.Z)(e),"ionScrollStart",7),e.ionScroll=(0,Ee.yM)((0,we.Z)(e),"ionScroll",7),e.ionScrollEnd=(0,Ee.yM)((0,we.Z)(e),"ionScrollEnd",7),e.watchDog=null,e.isScrolling=!1,e.lastScroll=0,e.queued=!1,e.cTop=-1,e.cBottom=-1,e.isMainContent=!0,e.resizeTimeout=null,e.detail={scrollTop:0,scrollLeft:0,type:"scroll",event:void 0,startX:0,startY:0,startTime:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,currentTime:0,data:void 0,isScrolling:!0},e.fullscreen=!1,e.scrollX=!1,e.scrollY=!0,e.scrollEvents=!1,e}return(0,Te.Z)(n,[{key:"connectedCallback",value:function(){this.isMainContent=null===this.el.closest("ion-menu, ion-popover, ion-modal")}},{key:"disconnectedCallback",value:function(){this.onScrollEnd()}},{key:"onAppLoad",value:function(){this.resize()}},{key:"onResize",value:function(){var e=this;this.resizeTimeout&&(clearTimeout(this.resizeTimeout),this.resizeTimeout=null),this.resizeTimeout=setTimeout((function(){null!==e.el.offsetParent&&e.resize()}),100)}},{key:"shouldForceOverscroll",value:function(){var e=this.forceOverscroll,t=je(this);return void 0===e?"ios"===t&&Re("ios"):e}},{key:"resize",value:function(){var e=this;this.fullscreen?(0,Ee.wj)((function(){return e.readDimensions()})):0===this.cTop&&0===this.cBottom||(this.cTop=this.cBottom=0,(0,Ee.xE)(this))}},{key:"readDimensions",value:function(){var e=En(this.el),t=Math.max(this.el.offsetTop,0),n=Math.max(e.offsetHeight-t-this.el.offsetHeight,0);(t!==this.cTop||n!==this.cBottom)&&(this.cTop=t,this.cBottom=n,(0,Ee.xE)(this))}},{key:"onScroll",value:function(e){var t=this,n=Date.now(),r=!this.isScrolling;this.lastScroll=n,r&&this.onScrollStart(),!this.queued&&this.scrollEvents&&(this.queued=!0,(0,Ee.wj)((function(n){t.queued=!1,t.detail.event=e,Nn(t.detail,t.scrollEl,n,r),t.ionScroll.emit(t.detail)})))}},{key:"getScrollElement",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){var t=this;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.scrollEl){e.next=3;break}return e.next=3,new Promise((function(e){return(0,qe.c)(t.el,e)}));case 3:return e.abrupt("return",Promise.resolve(this.scrollEl));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getBackgroundElement",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){var t=this;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.backgroundContentEl){e.next=3;break}return e.next=3,new Promise((function(e){return(0,qe.c)(t.el,e)}));case 3:return e.abrupt("return",Promise.resolve(this.backgroundContentEl));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"scrollToTop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.scrollToPoint(void 0,0,e)}},{key:"scrollToBottom",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){var t,n,r,a=arguments;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:0,e.next=3,this.getScrollElement();case 3:return n=e.sent,r=n.scrollHeight-n.clientHeight,e.abrupt("return",this.scrollToPoint(void 0,r,t));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"scrollByPoint",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t,n,r){var a;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getScrollElement();case 2:return a=e.sent,e.abrupt("return",this.scrollToPoint(t+a.scrollLeft,n+a.scrollTop,r));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"scrollToPoint",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t,n){var r,a,i,o,s,u,c,l,d,f,h=arguments;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>2&&void 0!==h[2]?h[2]:0,e.next=3,this.getScrollElement();case 3:if(a=e.sent,!(r<32)){e.next=8;break}return null!=n&&(a.scrollTop=n),null!=t&&(a.scrollLeft=t),e.abrupt("return");case 8:return o=0,s=new Promise((function(e){return i=e})),u=a.scrollTop,c=a.scrollLeft,l=null!=n?n-u:0,d=null!=t?t-c:0,f=function e(t){var n=Math.min(1,(t-o)/r)-1,s=Math.pow(n,3)+1;0!==l&&(a.scrollTop=Math.floor(s*l+u)),0!==d&&(a.scrollLeft=Math.floor(s*d+c)),s<1?requestAnimationFrame(e):i()},requestAnimationFrame((function(e){o=e,f(e)})),e.abrupt("return",s);case 17:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onScrollStart",value:function(){var e=this;this.isScrolling=!0,this.ionScrollStart.emit({isScrolling:!0}),this.watchDog&&clearInterval(this.watchDog),this.watchDog=setInterval((function(){e.lastScroll<Date.now()-120&&e.onScrollEnd()}),100)}},{key:"onScrollEnd",value:function(){this.watchDog&&clearInterval(this.watchDog),this.watchDog=null,this.isScrolling&&(this.isScrolling=!1,this.ionScrollEnd.emit({isScrolling:!1}))}},{key:"render",value:function(){var e,t=this,n=this.isMainContent,r=this.scrollX,a=this.scrollY,i=this.el,o=(0,Sn.i)(i)?"rtl":"ltr",s=je(this),u=this.shouldForceOverscroll(),c="ios"===s,l=n?"main":"div";return this.resize(),(0,Ee.h)(Ee.AA,{class:Yt(this.color,(e={},(0,ye.Z)(e,s,!0),(0,ye.Z)(e,"content-sizing",Xt("ion-popover",this.el)),(0,ye.Z)(e,"overscroll",u),(0,ye.Z)(e,"content-".concat(o),!0),e)),style:{"--offset-top":"".concat(this.cTop,"px"),"--offset-bottom":"".concat(this.cBottom,"px")}},(0,Ee.h)("div",{ref:function(e){return t.backgroundContentEl=e},id:"background-content",part:"background"}),(0,Ee.h)(l,{class:{"inner-scroll":!0,"scroll-x":r,"scroll-y":a,overscroll:(r||a)&&u},ref:function(e){return t.scrollEl=e},onScroll:this.scrollEvents?function(e){return t.onScroll(e)}:void 0,part:"scroll"},(0,Ee.h)("slot",null)),c?(0,Ee.h)("div",{class:"transition-effect"},(0,Ee.h)("div",{class:"transition-cover"}),(0,Ee.h)("div",{class:"transition-shadow"})):null,(0,Ee.h)("slot",{name:"fixed"}))}},{key:"el",get:function(){return this}}],[{key:"style",get:function(){return':host{--background:var(--ion-background-color, #fff);--color:var(--ion-text-color, #000);--padding-top:0px;--padding-bottom:0px;--padding-start:0px;--padding-end:0px;--keyboard-offset:0px;--offset-top:0px;--offset-bottom:0px;--overflow:auto;display:block;position:relative;-ms-flex:1;flex:1;width:100%;height:100%;margin:0 !important;padding:0 !important;font-family:var(--ion-font-family, inherit);contain:size style}:host(.ion-color) .inner-scroll{background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(.outer-content){--background:var(--ion-color-step-50, #f2f2f2)}#background-content{left:0px;right:0px;top:calc(var(--offset-top) * -1);bottom:calc(var(--offset-bottom) * -1);position:absolute;background:var(--background)}.inner-scroll{left:0px;right:0px;top:calc(var(--offset-top) * -1);bottom:calc(var(--offset-bottom) * -1);padding-left:var(--padding-start);padding-right:var(--padding-end);padding-top:calc(var(--padding-top) + var(--offset-top));padding-bottom:calc(var(--padding-bottom) + var(--keyboard-offset) + var(--offset-bottom));position:absolute;color:var(--color);-webkit-box-sizing:border-box;box-sizing:border-box;overflow:hidden;-ms-touch-action:pan-x pan-y pinch-zoom;touch-action:pan-x pan-y pinch-zoom}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){.inner-scroll{padding-left:unset;padding-right:unset;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end)}}.scroll-y,.scroll-x{-webkit-overflow-scrolling:touch;z-index:0;will-change:scroll-position}.scroll-y{overflow-y:var(--overflow);overscroll-behavior-y:contain}.scroll-x{overflow-x:var(--overflow);overscroll-behavior-x:contain}.overscroll::before,.overscroll::after{position:absolute;width:1px;height:1px;content:""}.overscroll::before{bottom:-1px}.overscroll::after{top:-1px}:host(.content-sizing){display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;min-height:0;contain:none}:host(.content-sizing) .inner-scroll{position:relative;top:0;bottom:0;margin-top:calc(var(--offset-top) * -1);margin-bottom:calc(var(--offset-bottom) * -1)}.transition-effect{display:none;position:absolute;width:100%;height:100vh;opacity:0;pointer-events:none}:host(.content-ltr) .transition-effect{left:-100%;}:host(.content-rtl) .transition-effect{right:-100%;}.transition-cover{position:absolute;right:0;width:100%;height:100%;background:black;opacity:0.1}.transition-shadow{display:block;position:absolute;width:10px;height:100%;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAgCAYAAAAIXrg4AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ1IDc5LjE2MzQ5OSwgMjAxOC8wOC8xMy0xNjo0MDoyMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MTE3MDgzRkQ5QTkyMTFFOUEwNzQ5MkJFREE1NUY2MjQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MTE3MDgzRkU5QTkyMTFFOUEwNzQ5MkJFREE1NUY2MjQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDoxMTcwODNGQjlBOTIxMUU5QTA3NDkyQkVEQTU1RjYyNCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDoxMTcwODNGQzlBOTIxMUU5QTA3NDkyQkVEQTU1RjYyNCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PmePEuQAAABNSURBVHjaYvz//z8DIxAwMDAwATGMhmFmPDQuOSZks0AMmoJBaQHjkPfB0Lfg/2gQjVow+HPy/yHvg9GiYjQfjMbBqAWjFgy/4hogwADYqwdzxy5BuwAAAABJRU5ErkJggg==);background-repeat:repeat-y;background-size:10px 16px}:host(.content-ltr) .transition-shadow{right:0;}:host(.content-rtl) .transition-shadow{left:0;-webkit-transform:scaleX(-1);transform:scaleX(-1)}::slotted([slot=fixed]){position:absolute;-webkit-transform:translateZ(0);transform:translateZ(0)}'}}]),n}(Ee.mv),[1,"ion-content",{color:[513],fullscreen:[4],forceOverscroll:[1028,"force-overscroll"],scrollX:[4,"scroll-x"],scrollY:[4,"scroll-y"],scrollEvents:[4,"scroll-events"],getScrollElement:[64],getBackgroundElement:[64],scrollToTop:[64],scrollToBottom:[64],scrollByPoint:[64],scrollToPoint:[64]},[[8,"appload","onAppLoad"],[9,"resize","onResize"]]]),En=function(e){var t=e.closest("ion-tabs");if(t)return t;var n=e.closest("ion-app, ion-page, .ion-page, page-inner, .popover-content");return n||function(e){var t;return e.parentElement?e.parentElement:(null===(t=e.parentNode)||void 0===t?void 0:t.host)?e.parentNode.host:null}(e)},Nn=function(e,t,n,r){var a=e.currentX,i=e.currentY,o=e.currentTime,s=t.scrollLeft,u=t.scrollTop,c=n-o;if(r&&(e.startTime=n,e.startX=s,e.startY=u,e.velocityX=e.velocityY=0),e.currentTime=n,e.currentX=e.scrollLeft=s,e.currentY=e.scrollTop=u,e.deltaX=s-e.startX,e.deltaY=u-e.startY,c>0&&c<100){var l=(s-a)/c,d=(u-i)/c;e.velocityX=.7*l+.3*e.velocityX,e.velocityY=.7*d+.3*e.velocityY}};var Cn=function(){if("undefined"!==typeof customElements){["ion-content"].forEach((function(e){if("ion-content"===e)customElements.get(e)||customElements.define(e,Tn)}))}},Zn=n(7225),_n=n(3743),An=function(e,t){return e.month===t.month&&e.day===t.day&&e.year===t.year},Rn=function(e,t){return!!(e.year<t.year||e.year===t.year&&e.month<t.month||e.year===t.year&&e.month===t.month&&null!==e.day&&e.day<t.day)},Dn=function(e,t){return!!(e.year>t.year||e.year===t.year&&e.month>t.month||e.year===t.year&&e.month===t.month&&null!==e.day&&e.day>t.day)},On=function(e,t,n){var r,a=Array.isArray(e)?e:[e],i=(0,Ht.Z)(a);try{for(i.s();!(r=i.n()).done;){var o=r.value;if(void 0!==t&&Rn(o,t)||void 0!==n&&Dn(o,n)){(0,_n.a)("The value provided to ion-datetime is out of bounds.\n\n"+"Min: ".concat(JSON.stringify(t),"\n")+"Max: ".concat(JSON.stringify(n),"\n")+"Value: ".concat(JSON.stringify(e)));break}}}catch(s){i.e(s)}finally{i.f()}},Ln=function(e,t){if(void 0!==t)return"h23"===t;var n=new Intl.DateTimeFormat(e,{hour:"numeric"}),r=n.resolvedOptions();if(void 0!==r.hourCycle)return"h23"===r.hourCycle;var a=new Date("5/18/2021 00:00"),i=n.formatToParts(a).find((function(e){return"hour"===e.type}));if(!i)throw new Error("Hour value not found from DateTimeFormat");return"00"===i.value},Fn=function(e,t){return 4===e||6===e||9===e||11===e?30:2===e?function(e){return e%4===0&&e%100!==0||e%400===0}(t)?29:28:31},Mn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{month:"numeric",year:"numeric"};return"month"===new Intl.DateTimeFormat(e,t).formatToParts(new Date)[0].type},Pn=/^(\d{4}|[+\-]\d{6})(?:-(\d{2})(?:-(\d{2}))?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(?:\.(\d{3}))?)?(?:(Z)|([+\-])(\d{2})(?::(\d{2}))?)?)?$/,zn=/^((\d{2}):(\d{2})(?::(\d{2})(?:\.(\d{3}))?)?(?:(Z)|([+\-])(\d{2})(?::(\d{2}))?)?)?$/,Bn=function(e){if(void 0!==e){var t=e;return"string"===typeof e&&(t=e.replace(/\[|\]|\s/g,"").split(",")),Array.isArray(t)?t.map((function(e){return parseInt(e,10)})).filter(isFinite):[t]}};function Vn(e){if(Array.isArray(e))return e.map((function(e){return Vn(e)}));var t=null;if(null!=e&&""!==e&&(zn.exec(e)?(t.unshift(void 0,void 0),t[2]=t[3]=void 0):Pn.exec(e)),null!==t){for(var n=1;n<8;n++)t[n]=void 0!==t[n]?parseInt(t[n],10):void 0;var r=0;return t[9]&&t[10]&&(60*parseInt(t[10],10),t[11]&&parseInt(t[11],10),"-"===t[9]&&-1),{year:t[1],month:t[2],day:t[3],hour:t[4],minute:t[5],tzOffset:r,ampm:t[4]<12?"am":"pm"}}}var Un=function(e){return e>=12?"pm":"am"},Wn=function(e){return("0"+(void 0!==e?Math.abs(e):"0")).slice(-2)},jn=function(e){return("000"+(void 0!==e?Math.abs(e):"0")).slice(-4)};function Gn(e){if(Array.isArray(e))return e.map((function(e){return Gn(e)}));var t="";return void 0!==e.year?(t=jn(e.year),void 0!==e.month&&(t+="-"+Wn(e.month),void 0!==e.day&&(t+="-"+Wn(e.day),void 0!==e.hour&&(t+="T".concat(Wn(e.hour),":").concat(Wn(e.minute),":00"),void 0===e.tzOffset?t+="Z":t+=(e.tzOffset>0?"+":"-")+Wn(Math.floor(Math.abs(e.tzOffset/60)))+":"+Wn(e.tzOffset%60))))):void 0!==e.hour&&(t=Wn(e.hour)+":"+Wn(e.minute)),t}var Hn=function(e,t){return void 0===t?e:"am"===t?12===e?0:e:12===e?12:e+12},qn=function(e,t){var n=e.month,r=e.day,a=e.year;if(null===r)throw new Error("No day provided");var i={month:n,day:r,year:a};if(i.day=r-t,i.day<1&&(i.month-=1),i.month<1&&(i.month=12,i.year-=1),i.day<1){var o=Fn(i.month,i.year);i.day=o+i.day}return i},$n=function(e,t){var n=e.month,r=e.day,a=e.year;if(null===r)throw new Error("No day provided");var i={month:n,day:r,year:a},o=Fn(n,a);return i.day=r+t,i.day>o&&(i.day-=o,i.month+=1),i.month>12&&(i.month=1,i.year+=1),i},Kn=function(e){var t=1===e.month?12:e.month-1,n=1===e.month?e.year-1:e.year,r=Fn(t,n);return{month:t,year:n,day:r<e.day?r:e.day}},Xn=function(e){var t=12===e.month?1:e.month+1,n=12===e.month?e.year+1:e.year,r=Fn(t,n);return{month:t,year:n,day:r<e.day?r:e.day}},Yn=function(e,t){var n=e.month,r=e.year+t,a=Fn(n,r);return{month:n,year:r,day:a<e.day?a:e.day}},Qn=function(e,t,n){return t?e:Hn(e,n)},Jn=function(e,t){for(var n=t[0],r=Math.abs(n-e),a=1;a<t.length;a++){var i=t[a],o=Math.abs(i-e);o<r&&(n=i,r=o)}return n},er=function(e,t,n){var r={hour:t.hour,minute:t.minute};return void 0===r.hour||void 0===r.minute?"Invalid Time":new Intl.DateTimeFormat(e,{hour:"numeric",minute:"numeric",timeZone:"UTC",hourCycle:n?"h23":"h12"}).format(new Date(Gn(Object.assign(Object.assign({year:2023,day:1,month:1},r),{tzOffset:void 0}))))},tr=function(e){var t=e.toString();return t.length>1?t:"0".concat(t)},nr=function(e,t){return t?tr(e):0===e?"12":e.toString()},rr=function(e,t,n){if(null===n.day)return null;var r=new Date("".concat(n.month,"/").concat(n.day,"/").concat(n.year," GMT+0000")),a=new Intl.DateTimeFormat(e,{weekday:"long",month:"long",day:"numeric",timeZone:"UTC"}).format(r);return t?"Today, ".concat(a):a},ar=function(e,t){var n=new Date("".concat(t.month,"/").concat(t.day,"/").concat(t.year," GMT+0000"));return new Intl.DateTimeFormat(e,{month:"long",year:"numeric",timeZone:"UTC"}).format(n)},ir=function(e,t){return cr(e,t,{month:"short",day:"numeric",year:"numeric"})},or=function(e,t){return lr(e,t,{day:"numeric"}).find((function(e){return"day"===e.type})).value},sr=function(e,t){return cr(e,t,{year:"numeric"})},ur=function(e){var t=void 0!==e.hour&&void 0!==e.minute?" ".concat(e.hour,":").concat(e.minute):"";return new Date("".concat(e.month,"/").concat(e.day,"/").concat(e.year).concat(t," GMT+0000"))},cr=function(e,t,n){var r=ur(t);return dr(e,n).format(r)},lr=function(e,t,n){var r=ur(t);return dr(e,n).formatToParts(r)},dr=function(e,t){return new Intl.DateTimeFormat(e,Object.assign(Object.assign({},t),{timeZone:"UTC"}))},fr=function(e){if("RelativeTimeFormat"in Intl){var t=new Intl.RelativeTimeFormat(e,{numeric:"auto"}).format(0,"day");return t.charAt(0).toUpperCase()+t.slice(1)}return"Today"},hr=function(e){var t=e.getTimezoneOffset();return e.setMinutes(e.getMinutes()-t),e},pr=hr(new Date("2022T01:00")),vr=hr(new Date("2022T13:00")),mr=function(e,t){var n="am"===t?pr:vr,r=new Intl.DateTimeFormat(e,{hour:"numeric",timeZone:"UTC"}).formatToParts(n).find((function(e){return"dayPeriod"===e.type}));return r?r.value:function(e){return void 0===e?"":e.toUpperCase()}(t)},gr=function(){return hr(new Date).toISOString()},yr=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59],br=[0,1,2,3,4,5,6,7,8,9,10,11],kr=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23],wr=function(e){var t=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0,i="h23"===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"h12"),o=i?kr:br,s=yr,u=!0,c=!0;if(r&&(o=o.filter((function(e){return r.includes(e)}))),a&&(s=s.filter((function(e){return a.includes(e)}))),t)if(An(e,t)){if(void 0!==t.hour&&(o=o.filter((function(n){var r="pm"===e.ampm?(n+12)%24:n;return(i?n:r)>=t.hour})),u=t.hour<13),void 0!==t.minute){var l=!1;void 0!==t.hour&&void 0!==e.hour&&e.hour>t.hour&&(l=!0),s=s.filter((function(e){return!!l||e>=t.minute}))}}else Rn(e,t)&&(o=[],s=[],u=c=!1);return n&&(An(e,n)?(void 0!==n.hour&&(o=o.filter((function(t){var r="pm"===e.ampm?(t+12)%24:t;return(i?t:r)<=n.hour})),c=n.hour>=12),void 0!==n.minute&&e.hour===n.hour&&(s=s.filter((function(e){return e<=n.minute})))):Dn(e,n)&&(o=[],s=[],u=c=!1)),{hours:o,minutes:s,am:u,pm:c}},xr=function(e){return[Kn(e),{month:e.month,year:e.year,day:e.day},Xn(e)]},Ir=function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{day:"numeric"},o=t.month,s=t.year,u=[],c=Fn(o,s),l=null!==(null===r||void 0===r?void 0:r.day)&&void 0!==(null===r||void 0===r?void 0:r.day)&&r.year===s&&r.month===o?r.day:c,d=null!==(null===n||void 0===n?void 0:n.day)&&void 0!==(null===n||void 0===n?void 0:n.day)&&n.year===s&&n.month===o?n.day:1;if(void 0!==a){var f=a;(f=f.filter((function(e){return e>=d&&e<=l}))).forEach((function(t){var n=new Date("".concat(o,"/").concat(t,"/").concat(s," GMT+0000")),r=new Intl.DateTimeFormat(e,Object.assign(Object.assign({},i),{timeZone:"UTC"})).format(n);u.push({text:r,value:t})}))}else for(var h=d;h<=l;h++){var p=new Date("".concat(o,"/").concat(h,"/").concat(s," GMT+0000")),v=new Intl.DateTimeFormat(e,Object.assign(Object.assign({},i),{timeZone:"UTC"})).format(p);u.push({text:v,value:h})}return u},Sr=function e(t,n){return t.month===n.month&&t.year===n.year?[t]:[t].concat((0,me.Z)(e(Xn(t),n)))},Tr=function(e,t,n,r,a,i){var o=[],s=[],u=Sr(n,r);return i&&(u=u.filter((function(e){var t=e.month;return i.includes(t)}))),u.forEach((function(i){var u={month:i.month,day:null,year:i.year},c=Ir(e,u,n,r,a,{month:"short",day:"numeric",weekday:"short"}),l=[],d=[];c.forEach((function(n){var r=An(Object.assign(Object.assign({},u),{day:n.value}),t);d.push({text:r?fr(e):n.text,value:"".concat(u.year,"-").concat(u.month,"-").concat(n.value)}),l.push({month:u.month,year:u.year,day:n.value})})),s=[].concat((0,me.Z)(s),l),o=[].concat((0,me.Z)(o),d)})),{parts:s,items:o}},Er=(0,Ee.GH)(function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(){var e;return(0,Se.Z)(this,n),(e=t.call(this)).__registerHost(),e.__attachShadow(),e.ionFocus=(0,Ee.yM)((0,we.Z)(e),"ionFocus",7),e.ionBlur=(0,Ee.yM)((0,we.Z)(e),"ionBlur",7),e.inItem=!1,e.inListHeader=!1,e.inToolbar=!1,e.inheritedAttributes={},e.buttonType="button",e.disabled=!1,e.routerDirection="forward",e.strong=!1,e.type="button",e.handleClick=function(t){var n=(0,we.Z)(e).el;if("button"===e.type)en(e.href,t,e.routerDirection,e.routerAnimation);else if((0,qe.q)(n)){var r=e.findForm(),a=(0,we.Z)(e).form;if(!r&&void 0!==a)return void("string"===typeof a?(0,_n.a)('Form with selector: "#'.concat(a,'" could not be found. Verify that the id is correct and the form is rendered in the DOM.'),n):(0,_n.a)('The provided "form" element is invalid. Verify that the form is a HTMLFormElement and rendered in the DOM.',n));if(r||(r=n.closest("form")),r){t.preventDefault();var i=document.createElement("button");i.type=e.type,i.style.display="none",r.appendChild(i),i.click(),i.remove()}}},e.onFocus=function(){e.ionFocus.emit()},e.onBlur=function(){e.ionBlur.emit()},e}return(0,Te.Z)(n,[{key:"componentWillLoad",value:function(){this.inToolbar=!!this.el.closest("ion-buttons"),this.inListHeader=!!this.el.closest("ion-list-header"),this.inItem=!!this.el.closest("ion-item")||!!this.el.closest("ion-item-divider"),this.inheritedAttributes=(0,qe.i)(this.el)}},{key:"hasIconOnly",get:function(){return!!this.el.querySelector('[slot="icon-only"]')}},{key:"rippleType",get:function(){return(void 0===this.fill||"clear"===this.fill)&&this.hasIconOnly&&this.inToolbar?"unbounded":"bounded"}},{key:"findForm",value:function(){var e=this.form;if(e instanceof HTMLFormElement)return e;if("string"===typeof e){var t=document.getElementById(e);if(t instanceof HTMLFormElement)return t}return null}},{key:"render",value:function(){var e,t=je(this),n=this.buttonType,r=this.type,a=this.disabled,i=this.rel,o=this.target,s=this.size,u=this.href,c=this.color,l=this.expand,d=this.hasIconOnly,f=this.shape,h=this.strong,p=this.inheritedAttributes,v=void 0===s&&this.inItem?"small":s,m=void 0===u?"button":"a",g="button"===m?{type:r}:{download:this.download,href:u,rel:i,target:o},y=this.fill;return null==y&&(y=this.inToolbar||this.inListHeader?"clear":"solid"),(0,Ee.h)(Ee.AA,{onClick:this.handleClick,"aria-disabled":a?"true":null,class:Yt(c,(e={},(0,ye.Z)(e,t,!0),(0,ye.Z)(e,n,!0),(0,ye.Z)(e,"".concat(n,"-").concat(l),void 0!==l),(0,ye.Z)(e,"".concat(n,"-").concat(v),void 0!==v),(0,ye.Z)(e,"".concat(n,"-").concat(f),void 0!==f),(0,ye.Z)(e,"".concat(n,"-").concat(y),!0),(0,ye.Z)(e,"".concat(n,"-strong"),h),(0,ye.Z)(e,"in-toolbar",Xt("ion-toolbar",this.el)),(0,ye.Z)(e,"in-toolbar-color",Xt("ion-toolbar[color]",this.el)),(0,ye.Z)(e,"in-buttons",Xt("ion-buttons",this.el)),(0,ye.Z)(e,"button-has-icon-only",d),(0,ye.Z)(e,"button-disabled",a),(0,ye.Z)(e,"ion-activatable",!0),(0,ye.Z)(e,"ion-focusable",!0),e))},(0,Ee.h)(m,Object.assign({},g,{class:"button-native",part:"native",disabled:a,onFocus:this.onFocus,onBlur:this.onBlur},p),(0,Ee.h)("span",{class:"button-inner"},(0,Ee.h)("slot",{name:"icon-only"}),(0,Ee.h)("slot",{name:"start"}),(0,Ee.h)("slot",null),(0,Ee.h)("slot",{name:"end"})),"md"===t&&(0,Ee.h)("ion-ripple-effect",{type:this.rippleType})))}},{key:"el",get:function(){return this}}],[{key:"style",get:function(){return{ios:':host{--overflow:hidden;--ripple-color:currentColor;--border-width:initial;--border-color:initial;--border-style:initial;--color-activated:var(--color);--color-focused:var(--color);--color-hover:var(--color);--box-shadow:none;display:inline-block;width:auto;color:var(--color);font-family:var(--ion-font-family, inherit);text-align:center;text-decoration:none;text-overflow:ellipsis;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:top;vertical-align:-webkit-baseline-middle;-webkit-font-kerning:none;font-kerning:none}:host(.button-disabled){cursor:default;opacity:0.5;pointer-events:none}:host(.button-solid){--background:var(--ion-color-primary, #3880ff);--color:var(--ion-color-primary-contrast, #fff)}:host(.button-outline){--border-color:var(--ion-color-primary, #3880ff);--background:transparent;--color:var(--ion-color-primary, #3880ff)}:host(.button-clear){--border-width:0;--background:transparent;--color:var(--ion-color-primary, #3880ff)}:host(.button-block){display:block}:host(.button-block) .button-native{margin-left:0;margin-right:0;display:block;width:100%;clear:both;contain:content}:host(.button-block) .button-native::after{clear:both}:host(.button-full){display:block}:host(.button-full) .button-native{margin-left:0;margin-right:0;display:block;width:100%;contain:content}:host(.button-full:not(.button-round)) .button-native{border-radius:0;border-right-width:0;border-left-width:0}.button-native{border-radius:var(--border-radius);-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:var(--padding-start);padding-right:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:block;position:relative;width:100%;height:100%;-webkit-transition:var(--transition);transition:var(--transition);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);outline:none;background:var(--background);line-height:1;-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow);contain:layout style;cursor:pointer;opacity:var(--opacity);overflow:var(--overflow);z-index:0;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-appearance:none;-moz-appearance:none;appearance:none}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){.button-native{padding-left:unset;padding-right:unset;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end)}}.button-native::-moz-focus-inner{border:0}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-negative:0;flex-shrink:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;z-index:1}::slotted(ion-icon){font-size:1.4em;pointer-events:none}::slotted(ion-icon[slot=start]){margin-left:-0.3em;margin-right:0.3em;margin-top:0;margin-bottom:0}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){::slotted(ion-icon[slot=start]){margin-left:unset;margin-right:unset;-webkit-margin-start:-0.3em;margin-inline-start:-0.3em;-webkit-margin-end:0.3em;margin-inline-end:0.3em}}::slotted(ion-icon[slot=end]){margin-left:0.3em;margin-right:-0.2em;margin-top:0;margin-bottom:0}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){::slotted(ion-icon[slot=end]){margin-left:unset;margin-right:unset;-webkit-margin-start:0.3em;margin-inline-start:0.3em;-webkit-margin-end:-0.2em;margin-inline-end:-0.2em}}::slotted(ion-icon[slot=icon-only]){font-size:1.8em}ion-ripple-effect{color:var(--ripple-color)}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}:host(.ion-focused){color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}@media (any-hover: hover){:host(:hover){color:var(--color-hover)}:host(:hover) .button-native::after{background:var(--background-hover);opacity:var(--background-hover-opacity)}}:host(.ion-activated){color:var(--color-activated)}:host(.ion-activated) .button-native::after{background:var(--background-activated);opacity:var(--background-activated-opacity)}:host(.button-solid.ion-color) .button-native{background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(.button-outline.ion-color) .button-native{border-color:var(--ion-color-base);background:transparent;color:var(--ion-color-base)}:host(.button-clear.ion-color) .button-native{background:transparent;color:var(--ion-color-base)}:host(.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{color:var(--ion-toolbar-color, var(--color))}:host(.button-outline.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{border-color:var(--ion-toolbar-color, var(--color, var(--border-color)))}:host(.button-solid.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{background:var(--ion-toolbar-color, var(--background));color:var(--ion-toolbar-background, var(--color))}:host(.button-outline.ion-activated.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{background:var(--ion-toolbar-color, var(--color));color:var(--ion-toolbar-background, var(--background), var(--ion-color-primary-contrast, #fff))}:host{--border-radius:10px;--padding-top:0;--padding-bottom:0;--padding-start:1em;--padding-end:1em;--transition:background-color, opacity 100ms linear;margin-left:2px;margin-right:2px;margin-top:4px;margin-bottom:4px;height:2.8em;font-size:16px;font-weight:500;letter-spacing:-0.03em}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){:host{margin-left:unset;margin-right:unset;-webkit-margin-start:2px;margin-inline-start:2px;-webkit-margin-end:2px;margin-inline-end:2px}}:host(.in-buttons){font-size:17px;font-weight:400}:host(.button-solid){--background-activated:var(--ion-color-primary-shade, #3171e0);--background-focused:var(--ion-color-primary-shade, #3171e0);--background-hover:var(--ion-color-primary-tint, #4c8dff);--background-activated-opacity:1;--background-focused-opacity:1;--background-hover-opacity:1}:host(.button-outline){--border-radius:10px;--border-width:1px;--border-style:solid;--background-activated:var(--ion-color-primary, #3880ff);--background-focused:var(--ion-color-primary, #3880ff);--background-hover:transparent;--background-focused-opacity:.1;--color-activated:var(--ion-color-primary-contrast, #fff)}:host(.button-clear){--background-activated:transparent;--background-activated-opacity:0;--background-focused:var(--ion-color-primary, #3880ff);--background-hover:transparent;--background-focused-opacity:.1;font-size:17px;font-weight:normal;letter-spacing:0}:host(.button-large){--border-radius:12px;--padding-top:0;--padding-start:1em;--padding-end:1em;--padding-bottom:0;height:2.8em;font-size:20px}:host(.button-small){--border-radius:6px;--padding-top:0;--padding-start:0.9em;--padding-end:0.9em;--padding-bottom:0;height:2.1em;font-size:13px}:host(.button-round){--border-radius:64px;--padding-top:0;--padding-start:26px;--padding-end:26px;--padding-bottom:0}:host(.button-strong){font-weight:600}:host(.button-outline.ion-focused.ion-color) .button-native,:host(.button-clear.ion-focused.ion-color) .button-native{color:var(--ion-color-base)}:host(.button-outline.ion-focused.ion-color) .button-native::after,:host(.button-clear.ion-focused.ion-color) .button-native::after{background:var(--ion-color-base)}:host(.button-solid.ion-color.ion-focused) .button-native::after{background:var(--ion-color-shade)}@media (any-hover: hover){:host(.button-clear:not(.ion-activated):hover),:host(.button-outline:not(.ion-activated):hover){opacity:0.6}:host(.button-clear.ion-color:hover) .button-native,:host(.button-outline.ion-color:hover) .button-native{color:var(--ion-color-base)}:host(.button-clear.ion-color:hover) .button-native::after,:host(.button-outline.ion-color:hover) .button-native::after{background:transparent}:host(.button-solid.ion-color:hover) .button-native::after{background:var(--ion-color-tint)}:host(:hover.button-solid.in-toolbar:not(.ion-color):not(.in-toolbar-color):not(.ion-activated)) .button-native::after{background:#fff;opacity:0.1}}:host(.button-clear.ion-activated){opacity:0.4}:host(.button-outline.ion-activated.ion-color) .button-native{color:var(--ion-color-contrast)}:host(.button-outline.ion-activated.ion-color) .button-native::after{background:var(--ion-color-base)}:host(.button-solid.ion-color.ion-activated) .button-native::after{background:var(--ion-color-shade)}',md:':host{--overflow:hidden;--ripple-color:currentColor;--border-width:initial;--border-color:initial;--border-style:initial;--color-activated:var(--color);--color-focused:var(--color);--color-hover:var(--color);--box-shadow:none;display:inline-block;width:auto;color:var(--color);font-family:var(--ion-font-family, inherit);text-align:center;text-decoration:none;text-overflow:ellipsis;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:top;vertical-align:-webkit-baseline-middle;-webkit-font-kerning:none;font-kerning:none}:host(.button-disabled){cursor:default;opacity:0.5;pointer-events:none}:host(.button-solid){--background:var(--ion-color-primary, #3880ff);--color:var(--ion-color-primary-contrast, #fff)}:host(.button-outline){--border-color:var(--ion-color-primary, #3880ff);--background:transparent;--color:var(--ion-color-primary, #3880ff)}:host(.button-clear){--border-width:0;--background:transparent;--color:var(--ion-color-primary, #3880ff)}:host(.button-block){display:block}:host(.button-block) .button-native{margin-left:0;margin-right:0;display:block;width:100%;clear:both;contain:content}:host(.button-block) .button-native::after{clear:both}:host(.button-full){display:block}:host(.button-full) .button-native{margin-left:0;margin-right:0;display:block;width:100%;contain:content}:host(.button-full:not(.button-round)) .button-native{border-radius:0;border-right-width:0;border-left-width:0}.button-native{border-radius:var(--border-radius);-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:var(--padding-start);padding-right:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:block;position:relative;width:100%;height:100%;-webkit-transition:var(--transition);transition:var(--transition);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);outline:none;background:var(--background);line-height:1;-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow);contain:layout style;cursor:pointer;opacity:var(--opacity);overflow:var(--overflow);z-index:0;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-appearance:none;-moz-appearance:none;appearance:none}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){.button-native{padding-left:unset;padding-right:unset;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end)}}.button-native::-moz-focus-inner{border:0}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-negative:0;flex-shrink:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;z-index:1}::slotted(ion-icon){font-size:1.4em;pointer-events:none}::slotted(ion-icon[slot=start]){margin-left:-0.3em;margin-right:0.3em;margin-top:0;margin-bottom:0}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){::slotted(ion-icon[slot=start]){margin-left:unset;margin-right:unset;-webkit-margin-start:-0.3em;margin-inline-start:-0.3em;-webkit-margin-end:0.3em;margin-inline-end:0.3em}}::slotted(ion-icon[slot=end]){margin-left:0.3em;margin-right:-0.2em;margin-top:0;margin-bottom:0}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){::slotted(ion-icon[slot=end]){margin-left:unset;margin-right:unset;-webkit-margin-start:0.3em;margin-inline-start:0.3em;-webkit-margin-end:-0.2em;margin-inline-end:-0.2em}}::slotted(ion-icon[slot=icon-only]){font-size:1.8em}ion-ripple-effect{color:var(--ripple-color)}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}:host(.ion-focused){color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}@media (any-hover: hover){:host(:hover){color:var(--color-hover)}:host(:hover) .button-native::after{background:var(--background-hover);opacity:var(--background-hover-opacity)}}:host(.ion-activated){color:var(--color-activated)}:host(.ion-activated) .button-native::after{background:var(--background-activated);opacity:var(--background-activated-opacity)}:host(.button-solid.ion-color) .button-native{background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(.button-outline.ion-color) .button-native{border-color:var(--ion-color-base);background:transparent;color:var(--ion-color-base)}:host(.button-clear.ion-color) .button-native{background:transparent;color:var(--ion-color-base)}:host(.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{color:var(--ion-toolbar-color, var(--color))}:host(.button-outline.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{border-color:var(--ion-toolbar-color, var(--color, var(--border-color)))}:host(.button-solid.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{background:var(--ion-toolbar-color, var(--background));color:var(--ion-toolbar-background, var(--color))}:host(.button-outline.ion-activated.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{background:var(--ion-toolbar-color, var(--color));color:var(--ion-toolbar-background, var(--background), var(--ion-color-primary-contrast, #fff))}:host{--border-radius:4px;--padding-top:0;--padding-bottom:0;--padding-start:1.1em;--padding-end:1.1em;--transition:box-shadow 280ms cubic-bezier(.4, 0, .2, 1),\n                background-color 15ms linear,\n                color 15ms linear;margin-left:2px;margin-right:2px;margin-top:4px;margin-bottom:4px;height:36px;font-size:14px;font-weight:500;letter-spacing:0.06em;text-transform:uppercase}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){:host{margin-left:unset;margin-right:unset;-webkit-margin-start:2px;margin-inline-start:2px;-webkit-margin-end:2px;margin-inline-end:2px}}:host(.button-solid){--background-activated:transparent;--background-hover:var(--ion-color-primary-contrast, #fff);--background-focused:var(--ion-color-primary-contrast, #fff);--background-activated-opacity:0;--background-focused-opacity:.24;--background-hover-opacity:.08;--box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12)}:host(.button-solid.ion-activated){--box-shadow:0 5px 5px -3px rgba(0, 0, 0, 0.2), 0 8px 10px 1px rgba(0, 0, 0, 0.14), 0 3px 14px 2px rgba(0, 0, 0, 0.12)}:host(.button-outline){--border-width:2px;--border-style:solid;--box-shadow:none;--background-activated:transparent;--background-focused:var(--ion-color-primary, #3880ff);--background-hover:var(--ion-color-primary, #3880ff);--background-activated-opacity:0;--background-focused-opacity:.12;--background-hover-opacity:.04}:host(.button-outline.ion-activated.ion-color) .button-native{background:transparent}:host(.button-clear){--background-activated:transparent;--background-focused:var(--ion-color-primary, #3880ff);--background-hover:var(--ion-color-primary, #3880ff);--background-activated-opacity:0;--background-focused-opacity:.12;--background-hover-opacity:.04}:host(.button-round){--border-radius:64px;--padding-top:0;--padding-start:26px;--padding-end:26px;--padding-bottom:0}:host(.button-large){--padding-top:0;--padding-start:1em;--padding-end:1em;--padding-bottom:0;height:2.8em;font-size:20px}:host(.button-small){--padding-top:0;--padding-start:0.9em;--padding-end:0.9em;--padding-bottom:0;height:2.1em;font-size:13px}:host(.button-strong){font-weight:bold}::slotted(ion-icon[slot=icon-only]){padding-left:0;padding-right:0;padding-top:0;padding-bottom:0}:host(.button-solid.ion-color.ion-focused) .button-native::after{background:var(--ion-color-contrast)}:host(.button-clear.ion-color.ion-focused) .button-native::after,:host(.button-outline.ion-color.ion-focused) .button-native::after{background:var(--ion-color-base)}@media (any-hover: hover){:host(.button-solid.ion-color:hover) .button-native::after{background:var(--ion-color-contrast)}:host(.button-clear.ion-color:hover) .button-native::after,:host(.button-outline.ion-color:hover) .button-native::after{background:var(--ion-color-base)}}'}}}]),n}(Ee.mv),[33,"ion-button",{color:[513],buttonType:[1025,"button-type"],disabled:[516],expand:[513],fill:[1537],routerDirection:[1,"router-direction"],routerAnimation:[16],download:[1],href:[1],rel:[1],shape:[513],size:[513],strong:[4],target:[1],type:[1],form:[1]}]);Ee.mv;Ee.mv;var Nr=(0,Ee.GH)(function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(){var e;return(0,Se.Z)(this,n),(e=t.call(this)).__registerHost(),e.ionColor=(0,Ee.yM)((0,we.Z)(e),"ionColor",7),e.ionStyle=(0,Ee.yM)((0,we.Z)(e),"ionStyle",7),e.inRange=!1,e.noAnimate=!1,e}return(0,Te.Z)(n,[{key:"componentWillLoad",value:function(){this.inRange=!!this.el.closest("ion-range"),this.noAnimate="floating"===this.position,this.emitStyle(),this.emitColor()}},{key:"componentDidLoad",value:function(){var e=this;this.noAnimate&&setTimeout((function(){e.noAnimate=!1}),1e3)}},{key:"colorChanged",value:function(){this.emitColor()}},{key:"positionChanged",value:function(){this.emitStyle()}},{key:"emitColor",value:function(){var e=this.color;this.ionColor.emit((0,ye.Z)({"item-label-color":void 0!==e},"ion-color-".concat(e),void 0!==e))}},{key:"emitStyle",value:function(){var e=this.inRange,t=this.position;e||this.ionStyle.emit((0,ye.Z)({label:!0},"label-".concat(t),void 0!==t))}},{key:"render",value:function(){var e,t=this.position,n=je(this);return(0,Ee.h)(Ee.AA,{class:Yt(this.color,(e={},(0,ye.Z)(e,n,!0),(0,ye.Z)(e,"in-item-color",Xt("ion-item.ion-color",this.el)),(0,ye.Z)(e,"label-".concat(t),void 0!==t),(0,ye.Z)(e,"label-no-animate",this.noAnimate),(0,ye.Z)(e,"label-rtl","rtl"===document.dir),e))})}},{key:"el",get:function(){return this}}],[{key:"watchers",get:function(){return{color:["colorChanged"],position:["positionChanged"]}}},{key:"style",get:function(){return{ios:".item.sc-ion-label-ios-h,.item .sc-ion-label-ios-h{--color:initial;display:block;color:var(--color);font-family:var(--ion-font-family, inherit);font-size:inherit;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box}.ion-color.sc-ion-label-ios-h{color:var(--ion-color-base)}.ion-text-wrap.sc-ion-label-ios-h,[text-wrap].sc-ion-label-ios-h{white-space:normal}.item-interactive-disabled.sc-ion-label-ios-h:not(.item-multiple-inputs),.item-interactive-disabled:not(.item-multiple-inputs) .sc-ion-label-ios-h{cursor:default;opacity:0.3;pointer-events:none}.item-input.sc-ion-label-ios-h,.item-input .sc-ion-label-ios-h{-ms-flex:initial;flex:initial;max-width:200px;pointer-events:none}.item-textarea.sc-ion-label-ios-h,.item-textarea .sc-ion-label-ios-h{-ms-flex-item-align:baseline;align-self:baseline}.label-fixed.sc-ion-label-ios-h{-ms-flex:0 0 100px;flex:0 0 100px;width:100px;min-width:100px;max-width:200px}.label-stacked.sc-ion-label-ios-h,.label-floating.sc-ion-label-ios-h{margin-bottom:0;-ms-flex-item-align:stretch;align-self:stretch;width:auto;max-width:100%}.label-no-animate.label-floating.sc-ion-label-ios-h{-webkit-transition:none;transition:none}.sc-ion-label-ios-s h1,.sc-ion-label-ios-s h2,.sc-ion-label-ios-s h3,.sc-ion-label-ios-s h4,.sc-ion-label-ios-s h5,.sc-ion-label-ios-s h6{text-overflow:inherit;overflow:inherit}.ion-text-wrap.sc-ion-label-ios-h,[text-wrap].sc-ion-label-ios-h{font-size:14px;line-height:1.5}.label-stacked.sc-ion-label-ios-h{margin-bottom:4px;font-size:14px}.label-floating.sc-ion-label-ios-h{margin-bottom:0;-webkit-transform:translate(0, 29px);transform:translate(0, 29px);-webkit-transform-origin:left top;transform-origin:left top;-webkit-transition:-webkit-transform 150ms ease-in-out;transition:-webkit-transform 150ms ease-in-out;transition:transform 150ms ease-in-out;transition:transform 150ms ease-in-out, -webkit-transform 150ms ease-in-out}[dir=rtl].sc-ion-label-ios-h -no-combinator.label-floating.sc-ion-label-ios-h,[dir=rtl] .sc-ion-label-ios-h -no-combinator.label-floating.sc-ion-label-ios-h,[dir=rtl].label-floating.sc-ion-label-ios-h,[dir=rtl] .label-floating.sc-ion-label-ios-h{-webkit-transform-origin:right top;transform-origin:right top}.item-textarea.label-floating.sc-ion-label-ios-h,.item-textarea .label-floating.sc-ion-label-ios-h{-webkit-transform:translate(0, 28px);transform:translate(0, 28px)}.item-has-focus.label-floating.sc-ion-label-ios-h,.item-has-focus .label-floating.sc-ion-label-ios-h,.item-has-placeholder.sc-ion-label-ios-h:not(.item-input).label-floating,.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-ios-h,.item-has-value.label-floating.sc-ion-label-ios-h,.item-has-value .label-floating.sc-ion-label-ios-h{-webkit-transform:scale(0.82);transform:scale(0.82)}.sc-ion-label-ios-s h1{margin-left:0;margin-right:0;margin-top:3px;margin-bottom:2px;font-size:22px;font-weight:normal}.sc-ion-label-ios-s h2{margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:17px;font-weight:normal}.sc-ion-label-ios-s h3,.sc-ion-label-ios-s h4,.sc-ion-label-ios-s h5,.sc-ion-label-ios-s h6{margin-left:0;margin-right:0;margin-top:0;margin-bottom:3px;font-size:14px;font-weight:normal;line-height:normal}.sc-ion-label-ios-s p{margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:14px;line-height:normal;text-overflow:inherit;overflow:inherit}.sc-ion-label-ios-s>p{color:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.4)}.sc-ion-label-ios-h.in-item-color.sc-ion-label-ios-s>p{color:inherit}.sc-ion-label-ios-s h2:last-child,.sc-ion-label-ios-s h3:last-child,.sc-ion-label-ios-s h4:last-child,.sc-ion-label-ios-s h5:last-child,.sc-ion-label-ios-s h6:last-child,.sc-ion-label-ios-s p:last-child{margin-bottom:0}",md:'.item.sc-ion-label-md-h,.item .sc-ion-label-md-h{--color:initial;display:block;color:var(--color);font-family:var(--ion-font-family, inherit);font-size:inherit;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box}.ion-color.sc-ion-label-md-h{color:var(--ion-color-base)}.ion-text-wrap.sc-ion-label-md-h,[text-wrap].sc-ion-label-md-h{white-space:normal}.item-interactive-disabled.sc-ion-label-md-h:not(.item-multiple-inputs),.item-interactive-disabled:not(.item-multiple-inputs) .sc-ion-label-md-h{cursor:default;opacity:0.3;pointer-events:none}.item-input.sc-ion-label-md-h,.item-input .sc-ion-label-md-h{-ms-flex:initial;flex:initial;max-width:200px;pointer-events:none}.item-textarea.sc-ion-label-md-h,.item-textarea .sc-ion-label-md-h{-ms-flex-item-align:baseline;align-self:baseline}.label-fixed.sc-ion-label-md-h{-ms-flex:0 0 100px;flex:0 0 100px;width:100px;min-width:100px;max-width:200px}.label-stacked.sc-ion-label-md-h,.label-floating.sc-ion-label-md-h{margin-bottom:0;-ms-flex-item-align:stretch;align-self:stretch;width:auto;max-width:100%}.label-no-animate.label-floating.sc-ion-label-md-h{-webkit-transition:none;transition:none}.sc-ion-label-md-s h1,.sc-ion-label-md-s h2,.sc-ion-label-md-s h3,.sc-ion-label-md-s h4,.sc-ion-label-md-s h5,.sc-ion-label-md-s h6{text-overflow:inherit;overflow:inherit}.ion-text-wrap.sc-ion-label-md-h,[text-wrap].sc-ion-label-md-h{line-height:1.5}.label-stacked.sc-ion-label-md-h,.label-floating.sc-ion-label-md-h{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-transform-origin:top left;transform-origin:top left}.label-stacked.label-rtl.sc-ion-label-md-h,.label-floating.label-rtl.sc-ion-label-md-h{-webkit-transform-origin:top right;transform-origin:top right}.label-stacked.sc-ion-label-md-h{-webkit-transform:translateY(50%) scale(0.75);transform:translateY(50%) scale(0.75);-webkit-transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.label-floating.sc-ion-label-md-h{-webkit-transform:translateY(96%);transform:translateY(96%);-webkit-transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), transform 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1)}.ion-focused.label-floating.sc-ion-label-md-h,.ion-focused .label-floating.sc-ion-label-md-h,.item-has-focus.label-floating.sc-ion-label-md-h,.item-has-focus .label-floating.sc-ion-label-md-h,.item-has-placeholder.sc-ion-label-md-h:not(.item-input).label-floating,.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-md-h,.item-has-value.label-floating.sc-ion-label-md-h,.item-has-value .label-floating.sc-ion-label-md-h{-webkit-transform:translateY(50%) scale(0.75);transform:translateY(50%) scale(0.75)}.item-fill-outline.ion-focused.label-floating.sc-ion-label-md-h,.item-fill-outline.ion-focused .label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-focus.label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-focus .label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-placeholder.sc-ion-label-md-h:not(.item-input).label-floating,.item-fill-outline.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-value.label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-value .label-floating.sc-ion-label-md-h{-webkit-transform:translateY(-6px) scale(0.75);transform:translateY(-6px) scale(0.75);position:relative;max-width:-webkit-min-content;max-width:-moz-min-content;max-width:min-content;background-color:var(--ion-item-background, var(--ion-background-color, #fff));overflow:visible;z-index:3}.item-fill-outline.ion-focused.label-floating.sc-ion-label-md-h::before,.item-fill-outline.ion-focused .label-floating.sc-ion-label-md-h::before,.item-fill-outline.ion-focused.label-floating.sc-ion-label-md-h::after,.item-fill-outline.ion-focused .label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-focus.label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-focus .label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-focus.label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-focus .label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-placeholder.sc-ion-label-md-h:not(.item-input).label-floating::before,.item-fill-outline.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-placeholder.sc-ion-label-md-h:not(.item-input).label-floating::after,.item-fill-outline.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-value.label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-value .label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-value.label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-value .label-floating.sc-ion-label-md-h::after{position:absolute;width:4px;height:100%;background-color:var(--ion-item-background, var(--ion-background-color, #fff));content:""}.item-fill-outline.ion-focused.label-floating.sc-ion-label-md-h::before,.item-fill-outline.ion-focused .label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-focus.label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-focus .label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-placeholder.sc-ion-label-md-h:not(.item-input).label-floating::before,.item-fill-outline.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-value.label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-value .label-floating.sc-ion-label-md-h::before{left:calc(-1 * 4px)}.item-fill-outline.ion-focused.label-floating.sc-ion-label-md-h::after,.item-fill-outline.ion-focused .label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-focus.label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-focus .label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-placeholder.sc-ion-label-md-h:not(.item-input).label-floating::after,.item-fill-outline.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-value.label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-value .label-floating.sc-ion-label-md-h::after{right:calc(-1 * 4px)}.item-fill-outline.ion-focused.item-has-start-slot.label-floating.sc-ion-label-md-h,.item-fill-outline.ion-focused.item-has-start-slot .label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-focus.item-has-start-slot.label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-focus.item-has-start-slot .label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-placeholder.sc-ion-label-md-h:not(.item-input).item-has-start-slot.label-floating,.item-fill-outline.item-has-placeholder:not(.item-input).item-has-start-slot .label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-value.item-has-start-slot.label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-value.item-has-start-slot .label-floating.sc-ion-label-md-h{-webkit-transform:translateX(-32px) translateY(-6px) scale(0.75);transform:translateX(-32px) translateY(-6px) scale(0.75)}.item-fill-outline.ion-focused.item-has-start-slot.label-floating.label-rtl.sc-ion-label-md-h,.item-fill-outline.ion-focused.item-has-start-slot .label-floating.label-rtl.sc-ion-label-md-h,.item-fill-outline.item-has-focus.item-has-start-slot.label-floating.label-rtl.sc-ion-label-md-h,.item-fill-outline.item-has-focus.item-has-start-slot .label-floating.label-rtl.sc-ion-label-md-h,.item-fill-outline.item-has-placeholder.sc-ion-label-md-h:not(.item-input).item-has-start-slot.label-floating.label-rtl,.item-fill-outline.item-has-placeholder:not(.item-input).item-has-start-slot .label-floating.label-rtl.sc-ion-label-md-h,.item-fill-outline.item-has-value.item-has-start-slot.label-floating.label-rtl.sc-ion-label-md-h,.item-fill-outline.item-has-value.item-has-start-slot .label-floating.label-rtl.sc-ion-label-md-h{-webkit-transform:translateX(calc(-1 * -32px)) translateY(-6px) scale(0.75);transform:translateX(calc(-1 * -32px)) translateY(-6px) scale(0.75)}.ion-focused.label-stacked.sc-ion-label-md-h:not(.ion-color),.ion-focused .label-stacked.sc-ion-label-md-h:not(.ion-color),.ion-focused.label-floating.sc-ion-label-md-h:not(.ion-color),.ion-focused .label-floating.sc-ion-label-md-h:not(.ion-color),.item-has-focus.label-stacked.sc-ion-label-md-h:not(.ion-color),.item-has-focus .label-stacked.sc-ion-label-md-h:not(.ion-color),.item-has-focus.label-floating.sc-ion-label-md-h:not(.ion-color),.item-has-focus .label-floating.sc-ion-label-md-h:not(.ion-color){color:var(--ion-color-primary, #3880ff)}.ion-focused.ion-color.label-stacked.sc-ion-label-md-h:not(.ion-color),.ion-focused.ion-color .label-stacked.sc-ion-label-md-h:not(.ion-color),.ion-focused.ion-color.label-floating.sc-ion-label-md-h:not(.ion-color),.ion-focused.ion-color .label-floating.sc-ion-label-md-h:not(.ion-color),.item-has-focus.ion-color.label-stacked.sc-ion-label-md-h:not(.ion-color),.item-has-focus.ion-color .label-stacked.sc-ion-label-md-h:not(.ion-color),.item-has-focus.ion-color.label-floating.sc-ion-label-md-h:not(.ion-color),.item-has-focus.ion-color .label-floating.sc-ion-label-md-h:not(.ion-color){color:var(--ion-color-contrast)}.item-fill-solid.ion-focused.ion-color.label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-solid.ion-focused.ion-color .label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-solid.ion-focused.ion-color.label-floating.sc-ion-label-md-h:not(.ion-color),.item-fill-solid.ion-focused.ion-color .label-floating.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.ion-focused.ion-color.label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.ion-focused.ion-color .label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.ion-focused.ion-color.label-floating.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.ion-focused.ion-color .label-floating.sc-ion-label-md-h:not(.ion-color),.item-fill-solid.item-has-focus.ion-color.label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-solid.item-has-focus.ion-color .label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-solid.item-has-focus.ion-color.label-floating.sc-ion-label-md-h:not(.ion-color),.item-fill-solid.item-has-focus.ion-color .label-floating.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.item-has-focus.ion-color.label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.item-has-focus.ion-color .label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.item-has-focus.ion-color.label-floating.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.item-has-focus.ion-color .label-floating.sc-ion-label-md-h:not(.ion-color){color:var(--ion-color-base)}.ion-invalid.ion-touched.label-stacked.sc-ion-label-md-h:not(.ion-color),.ion-invalid.ion-touched .label-stacked.sc-ion-label-md-h:not(.ion-color),.ion-invalid.ion-touched.label-floating.sc-ion-label-md-h:not(.ion-color),.ion-invalid.ion-touched .label-floating.sc-ion-label-md-h:not(.ion-color){color:var(--highlight-color-invalid)}.sc-ion-label-md-s h1{margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:24px;font-weight:normal}.sc-ion-label-md-s h2{margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;font-size:16px;font-weight:normal}.sc-ion-label-md-s h3,.sc-ion-label-md-s h4,.sc-ion-label-md-s h5,.sc-ion-label-md-s h6{margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;font-size:14px;font-weight:normal;line-height:normal}.sc-ion-label-md-s p{margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:14px;line-height:20px;text-overflow:inherit;overflow:inherit}.sc-ion-label-md-s>p{color:var(--ion-color-step-600, #666666)}.sc-ion-label-md-h.in-item-color.sc-ion-label-md-s>p{color:inherit}'}}}]),n}(Ee.mv),[34,"ion-label",{color:[513],position:[1],noAnimate:[32]}]);function Cr(){if("undefined"!==typeof customElements){["ion-label"].forEach((function(e){if("ion-label"===e)customElements.get(e)||customElements.define(e,Nr)}))}}var Zr={getEngine:function(){var e,t=window;return t.TapticEngine||(null===(e=t.Capacitor)||void 0===e?void 0:e.isPluginAvailable("Haptics"))&&t.Capacitor.Plugins.Haptics},available:function(){var e,t=window;return!!this.getEngine()&&("web"!==(null===(e=t.Capacitor)||void 0===e?void 0:e.getPlatform())||"undefined"!==typeof navigator&&void 0!==navigator.vibrate)},isCordova:function(){return!!window.TapticEngine},isCapacitor:function(){return!!window.Capacitor},impact:function(e){var t=this.getEngine();if(t){var n=this.isCapacitor()?e.style.toUpperCase():e.style;t.impact({style:n})}},notification:function(e){var t=this.getEngine();if(t){var n=this.isCapacitor()?e.style.toUpperCase():e.style;t.notification({style:n})}},selection:function(){this.impact({style:"light"})},selectionStart:function(){var e=this.getEngine();e&&(this.isCapacitor()?e.selectionStart():e.gestureSelectionStart())},selectionChanged:function(){var e=this.getEngine();e&&(this.isCapacitor()?e.selectionChanged():e.gestureSelectionChanged())},selectionEnd:function(){var e=this.getEngine();e&&(this.isCapacitor()?e.selectionEnd():e.gestureSelectionEnd())}},_r=function(){return Zr.available()},Ar=function(){_r()&&Zr.selectionStart()},Rr=function(){_r()&&Zr.selectionChanged()},Dr=function(){_r()&&Zr.selectionEnd()},Or=function(e){_r()&&Zr.impact(e)},Lr=(Ee.mv,"picker-item-active");Ee.mv;var Fr=function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t,n,r,a,i,o){var s,u;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=2;break}return e.abrupt("return",t.attachViewToDom(n,r,i,a));case 2:if(o||"string"===typeof r||r instanceof HTMLElement){e.next=4;break}throw new Error("framework delegate is missing");case 4:return u="string"===typeof r?null===(s=n.ownerDocument)||void 0===s?void 0:s.createElement(r):r,a&&a.forEach((function(e){return u.classList.add(e)})),i&&Object.assign(u,i),n.appendChild(u),e.next=10,new Promise((function(e){return(0,qe.c)(u,e)}));case 10:return e.abrupt("return",u);case 11:case"end":return e.stop()}}),e)})));return function(t,n,r,a,i,o){return e.apply(this,arguments)}}(),Mr=function(e,t){if(t){if(e){var n=t.parentElement;return e.removeViewFromDom(n,t)}t.remove()}return Promise.resolve()},Pr=function(){var e,t,n=function(){var n=(0,ke.Z)((0,be.Z)().mark((function n(r,a){var i,o,s,u,c,l,d,f=arguments;return(0,be.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i=f.length>2&&void 0!==f[2]?f[2]:{},o=f.length>3&&void 0!==f[3]?f[3]:[],e=r,!a){n.next=12;break}return c="string"===typeof a?null===(s=e.ownerDocument)||void 0===s?void 0:s.createElement(a):a,o.forEach((function(e){return c.classList.add(e)})),Object.assign(c,i),e.appendChild(c),n.next=10,new Promise((function(e){return(0,qe.c)(c,e)}));case 10:n.next=13;break;case 12:e.children.length>0&&(e.children[0].classList.contains("ion-delegate-host")||((l=null===(u=e.ownerDocument)||void 0===u?void 0:u.createElement("div")).classList.add("ion-delegate-host"),o.forEach((function(e){return l.classList.add(e)})),l.append.apply(l,(0,me.Z)(e.children)),e.appendChild(l)));case 13:return d=document.querySelector("ion-app")||document.body,t=document.createComment("ionic teleport"),e.parentNode.insertBefore(t,e),d.appendChild(e),n.abrupt("return",e);case 18:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}();return{attachViewToDom:n,removeViewFromDom:function(){return e&&t&&(t.parentNode.insertBefore(e,t),t.remove()),Promise.resolve()}}},zr=n(6313),Br=function(e,t,n){var r=t.getBoundingClientRect(),a=r.height,i=r.width;"cover"===e&&n&&(i=n.getBoundingClientRect().width);return{contentWidth:i,contentHeight:a}},Vr=function(e,t){return t&&"ION-ITEM"===t.tagName?e.findIndex((function(e){return e===t})):-1},Ur=function(e,t){return e[Vr(e,t)+1]},Wr=function(e,t){return e[Vr(e,t)-1]},jr=function(e){var t=(0,qe.g)(e).querySelector("button");t&&(0,qe.r)((function(){return t.focus()}))},Gr=function(e){return e.hasAttribute("data-ion-popover-trigger")},Hr=function(e,t,n,r,a,i,o,s,u,c,l){var d,f={top:0,left:0,width:0,height:0};if("event"===i){if(!l)return u;var h=l;f={top:h.clientY,left:h.clientX,width:1,height:1}}else{var p=l,v=c||(null===(d=null===p||void 0===p?void 0:p.detail)||void 0===d?void 0:d.ionShadowTarget)||(null===p||void 0===p?void 0:p.target);if(!v)return u;var m=v.getBoundingClientRect();f={top:m.top,left:m.left,width:m.width,height:m.height}}var g=Yr(o,f,t,n,r,a,e),y=Qr(s,o,f,t,n),b=g.top+y.top,k=g.left+y.left,w=Xr(o,r,a,b,k,t,n,e),x=w.arrowTop,I=w.arrowLeft,S=qr(o,s,e);return{top:b,left:k,referenceCoordinates:f,arrowTop:x,arrowLeft:I,originX:S.originX,originY:S.originY}},qr=function(e,t,n){switch(e){case"top":return{originX:$r(t),originY:"bottom"};case"bottom":return{originX:$r(t),originY:"top"};case"left":return{originX:"right",originY:Kr(t)};case"right":return{originX:"left",originY:Kr(t)};case"start":return{originX:n?"left":"right",originY:Kr(t)};case"end":return{originX:n?"right":"left",originY:Kr(t)}}},$r=function(e){switch(e){case"start":return"left";case"center":return"center";case"end":return"right"}},Kr=function(e){switch(e){case"start":return"top";case"center":return"center";case"end":return"bottom"}},Xr=function(e,t,n,r,a,i,o,s){var u={arrowTop:r+o/2-t/2,arrowLeft:a+i-t/2},c={arrowTop:r+o/2-t/2,arrowLeft:a-1.5*t};switch(e){case"top":return{arrowTop:r+o,arrowLeft:a+i/2-t/2};case"bottom":return{arrowTop:r-n,arrowLeft:a+i/2-t/2};case"left":return u;case"right":return c;case"start":return s?c:u;case"end":return s?u:c;default:return{arrowTop:0,arrowLeft:0}}},Yr=function(e,t,n,r,a,i,o){var s={top:t.top,left:t.left-n-a},u={top:t.top,left:t.left+t.width+a};switch(e){case"top":return{top:t.top-r-i,left:t.left};case"right":return u;case"bottom":return{top:t.top+t.height+i,left:t.left};case"left":return s;case"start":return o?u:s;case"end":return o?s:u}},Qr=function(e,t,n,r,a){switch(e){case"center":return ea(t,n,r,a);case"end":return Jr(t,n,r,a);default:return{top:0,left:0}}},Jr=function(e,t,n,r){switch(e){case"start":case"end":case"left":case"right":return{top:-(r-t.height),left:0};default:return{top:0,left:-(n-t.width)}}},ea=function(e,t,n,r){switch(e){case"start":case"end":case"left":case"right":return{top:-(r/2-t.height/2),left:0};default:return{top:0,left:-(n/2-t.width/2)}}},ta=function(e,t,n,r,a,i,o,s,u,c,l,d){var f,h=arguments.length>14&&void 0!==arguments[14]?arguments[14]:0,p=arguments.length>12&&void 0!==arguments[12]?arguments[12]:0,v=arguments.length>13&&void 0!==arguments[13]?arguments[13]:0,m=n,g=t,y=c,b=l,k=!1,w=!1,x=d?d.top+d.height:i/2-s/2,I=d?d.height:0,S=!1;return m<r+u?(m=r,k=!0,y="left"):o+r+m+u>a&&(w=!0,m=a-o-r,y="right"),x+I+s>i&&("top"===e||"bottom"===e)&&(x-s>0?(p=(g=Math.max(12,x-s-I-(h-1)))+s,b="bottom",S=!0):f=r),{top:g,left:m,bottom:f,originX:y,originY:b,checkSafeAreaLeft:k,checkSafeAreaRight:w,arrowTop:p,arrowLeft:v,addPopoverBottomClass:S}},na=function(e,t){var n,r=t.event,a=t.size,i=t.trigger,o=t.reference,s=t.side,u=t.align,c=e.ownerDocument,l="rtl"===c.dir,d=c.defaultView.innerWidth,f=c.defaultView.innerHeight,h=(0,qe.g)(e),p=h.querySelector(".popover-content"),v=h.querySelector(".popover-arrow"),m=i||(null===(n=null===r||void 0===r?void 0:r.detail)||void 0===n?void 0:n.ionShadowTarget)||(null===r||void 0===r?void 0:r.target),g=Br(a,p,m),y=g.contentWidth,b=g.contentHeight,k=function(e){if(!e)return{arrowWidth:0,arrowHeight:0};var t=e.getBoundingClientRect();return{arrowWidth:t.width,arrowHeight:t.height}}(v),w=k.arrowWidth,x=k.arrowHeight,I=Hr(l,y,b,w,x,o,s,u,{top:f/2-b/2,left:d/2-y/2,originX:l?"right":"left",originY:"top"},i,r),S="cover"===a?0:5,T="cover"===a?0:25,E=ta(s,I.top,I.left,S,d,f,y,b,T,I.originX,I.originY,I.referenceCoordinates,I.arrowTop,I.arrowLeft,x),N=E.originX,C=E.originY,Z=E.top,_=E.left,A=E.bottom,R=E.checkSafeAreaLeft,D=E.checkSafeAreaRight,O=E.arrowTop,L=E.arrowLeft,F=E.addPopoverBottomClass,M=(0,wt.c)(),P=(0,wt.c)(),z=(0,wt.c)();return P.addElement(h.querySelector("ion-backdrop")).fromTo("opacity",.01,"var(--backdrop-opacity)").beforeStyles({"pointer-events":"none"}).afterClearStyles(["pointer-events"]),z.addElement(h.querySelector(".popover-wrapper")).fromTo("opacity",.01,1),M.easing("ease").duration(100).beforeAddWrite((function(){"cover"===a&&e.style.setProperty("--width","".concat(y,"px")),F&&e.classList.add("popover-bottom"),void 0!==A&&p.style.setProperty("bottom","".concat(A,"px"));var t="".concat(_,"px");if(R&&(t="".concat(_,"px").concat(" + var(--ion-safe-area-left, 0)")),D&&(t="".concat(_,"px").concat(" - var(--ion-safe-area-right, 0)")),p.style.setProperty("top","calc(".concat(Z,"px + var(--offset-y, 0))")),p.style.setProperty("left","calc(".concat(t," + var(--offset-x, 0))")),p.style.setProperty("transform-origin","".concat(C," ").concat(N)),null!==v){var n=I.top!==Z||I.left!==_,o=function(e){return!(!(arguments.length>2?arguments[2]:void 0)&&!(arguments.length>3?arguments[3]:void 0))&&("top"===e||"bottom"===e||!(arguments.length>1&&void 0!==arguments[1]&&arguments[1]))}(s,n,r,i);o?(v.style.setProperty("top","calc(".concat(O,"px + var(--offset-y, 0))")),v.style.setProperty("left","calc(".concat(L,"px + var(--offset-x, 0))"))):v.style.setProperty("display","none")}})).addAnimation([P,z])},ra=function(e){var t=(0,qe.g)(e),n=t.querySelector(".popover-content"),r=t.querySelector(".popover-arrow"),a=(0,wt.c)(),i=(0,wt.c)(),o=(0,wt.c)();return i.addElement(t.querySelector("ion-backdrop")).fromTo("opacity","var(--backdrop-opacity)",0),o.addElement(t.querySelector(".popover-wrapper")).fromTo("opacity",.99,0),a.easing("ease").afterAddWrite((function(){e.style.removeProperty("--width"),e.classList.remove("popover-bottom"),n.style.removeProperty("top"),n.style.removeProperty("left"),n.style.removeProperty("bottom"),n.style.removeProperty("transform-origin"),r&&(r.style.removeProperty("top"),r.style.removeProperty("left"),r.style.removeProperty("display"))})).duration(300).addAnimation([i,o])},aa=function(e,t){var n,r=t.event,a=t.size,i=t.trigger,o=t.reference,s=t.side,u=t.align,c=e.ownerDocument,l="rtl"===c.dir,d=c.defaultView.innerWidth,f=c.defaultView.innerHeight,h=(0,qe.g)(e),p=h.querySelector(".popover-content"),v=i||(null===(n=null===r||void 0===r?void 0:r.detail)||void 0===n?void 0:n.ionShadowTarget)||(null===r||void 0===r?void 0:r.target),m=Br(a,p,v),g=m.contentWidth,y=m.contentHeight,b=Hr(l,g,y,0,0,o,s,u,{top:f/2-y/2,left:d/2-g/2,originX:l?"right":"left",originY:"top"},i,r),k="cover"===a?0:12,w=ta(s,b.top,b.left,k,d,f,g,y,0,b.originX,b.originY,b.referenceCoordinates),x=w.originX,I=w.originY,S=w.top,T=w.left,E=w.bottom,N=(0,wt.c)(),C=(0,wt.c)(),Z=(0,wt.c)(),_=(0,wt.c)(),A=(0,wt.c)();return C.addElement(h.querySelector("ion-backdrop")).fromTo("opacity",.01,"var(--backdrop-opacity)").beforeStyles({"pointer-events":"none"}).afterClearStyles(["pointer-events"]),Z.addElement(h.querySelector(".popover-wrapper")).duration(150).fromTo("opacity",.01,1),_.addElement(p).beforeStyles({top:"calc(".concat(S,"px + var(--offset-y, 0px))"),left:"calc(".concat(T,"px + var(--offset-x, 0px))"),"transform-origin":"".concat(I," ").concat(x)}).beforeAddWrite((function(){void 0!==E&&p.style.setProperty("bottom","".concat(E,"px"))})).fromTo("transform","scale(0.8)","scale(1)"),A.addElement(h.querySelector(".popover-viewport")).fromTo("opacity",.01,1),N.easing("cubic-bezier(0.36,0.66,0.04,1)").duration(300).beforeAddWrite((function(){"cover"===a&&e.style.setProperty("--width","".concat(g,"px")),"bottom"===I&&e.classList.add("popover-bottom")})).addAnimation([C,Z,_,A])},ia=function(e){var t=(0,qe.g)(e),n=t.querySelector(".popover-content"),r=(0,wt.c)(),a=(0,wt.c)(),i=(0,wt.c)();return a.addElement(t.querySelector("ion-backdrop")).fromTo("opacity","var(--backdrop-opacity)",0),i.addElement(t.querySelector(".popover-wrapper")).fromTo("opacity",.99,0),r.easing("ease").afterAddWrite((function(){e.style.removeProperty("--width"),e.classList.remove("popover-bottom"),n.style.removeProperty("top"),n.style.removeProperty("left"),n.style.removeProperty("bottom"),n.style.removeProperty("transform-origin")})).duration(150).addAnimation([a,i])},oa=(Ee.mv,{ionPopoverDidPresent:"ionViewDidEnter",ionPopoverWillPresent:"ionViewWillEnter",ionPopoverWillDismiss:"ionViewWillLeave",ionPopoverDidDismiss:"ionViewDidLeave"}),sa=0;var ua=function(e,t,n,r){return null===e.day||(void 0!==r&&!r.includes(e.day)||(!(!t||!Rn(e,t))||!(!n||!Dn(e,n))))},ca=function(e,t){var n=t.minParts,r=t.maxParts;return!!function(e,t,n){return!!(t&&t.year>e)||!!(n&&n.year<e)}(e.year,n,r)||!!(n&&Rn(e,n)||r&&Dn(e,r))},la=(Ee.mv,0);Ee.mv;Ee.mv;Ee.mv;var da=n(9344),fa=n(1437),ha=function(e){var t,n,r,a=function(){t=function(){r=!0,e&&e(!0)},n=function(){r=!1,e&&e(!1)},null===fa.w||void 0===fa.w||fa.w.addEventListener("keyboardWillShow",t),null===fa.w||void 0===fa.w||fa.w.addEventListener("keyboardWillHide",n)};return a(),{init:a,destroy:function(){null===fa.w||void 0===fa.w||fa.w.removeEventListener("keyboardWillShow",t),null===fa.w||void 0===fa.w||fa.w.removeEventListener("keyboardWillHide",n),t=n=void 0},isKeyboardVisible:function(){return r}}},pa=function(e,t){(0,Ee.wj)((function(){var n=e.scrollTop-(e.scrollHeight-e.clientHeight-10),r=(0,qe.h)(0,1-n/10,1);(0,Ee.Iu)((function(){t.style.setProperty("--opacity-scale",r.toString())}))}))};Ee.mv;var va=(0,Ee.GH)(function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(){var e;return(0,Se.Z)(this,n),(e=t.call(this)).__registerHost(),e.__attachShadow(),e.fixed=!1,e}return(0,Te.Z)(n,[{key:"render",value:function(){var e,t=je(this);return(0,Ee.h)(Ee.AA,{class:(e={},(0,ye.Z)(e,t,!0),(0,ye.Z)(e,"grid-fixed",this.fixed),e)},(0,Ee.h)("slot",null))}}],[{key:"style",get:function(){return":host{padding-left:var(--ion-grid-padding-xs, var(--ion-grid-padding, 5px));padding-right:var(--ion-grid-padding-xs, var(--ion-grid-padding, 5px));padding-top:var(--ion-grid-padding-xs, var(--ion-grid-padding, 5px));padding-bottom:var(--ion-grid-padding-xs, var(--ion-grid-padding, 5px));margin-left:auto;margin-right:auto;display:block;-ms-flex:1;flex:1}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){:host{padding-left:unset;padding-right:unset;-webkit-padding-start:var(--ion-grid-padding-xs, var(--ion-grid-padding, 5px));padding-inline-start:var(--ion-grid-padding-xs, var(--ion-grid-padding, 5px));-webkit-padding-end:var(--ion-grid-padding-xs, var(--ion-grid-padding, 5px));padding-inline-end:var(--ion-grid-padding-xs, var(--ion-grid-padding, 5px))}}@media (min-width: 576px){:host{padding-left:var(--ion-grid-padding-sm, var(--ion-grid-padding, 5px));padding-right:var(--ion-grid-padding-sm, var(--ion-grid-padding, 5px));padding-top:var(--ion-grid-padding-sm, var(--ion-grid-padding, 5px));padding-bottom:var(--ion-grid-padding-sm, var(--ion-grid-padding, 5px))}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){:host{padding-left:unset;padding-right:unset;-webkit-padding-start:var(--ion-grid-padding-sm, var(--ion-grid-padding, 5px));padding-inline-start:var(--ion-grid-padding-sm, var(--ion-grid-padding, 5px));-webkit-padding-end:var(--ion-grid-padding-sm, var(--ion-grid-padding, 5px));padding-inline-end:var(--ion-grid-padding-sm, var(--ion-grid-padding, 5px))}}}@media (min-width: 768px){:host{padding-left:var(--ion-grid-padding-md, var(--ion-grid-padding, 5px));padding-right:var(--ion-grid-padding-md, var(--ion-grid-padding, 5px));padding-top:var(--ion-grid-padding-md, var(--ion-grid-padding, 5px));padding-bottom:var(--ion-grid-padding-md, var(--ion-grid-padding, 5px))}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){:host{padding-left:unset;padding-right:unset;-webkit-padding-start:var(--ion-grid-padding-md, var(--ion-grid-padding, 5px));padding-inline-start:var(--ion-grid-padding-md, var(--ion-grid-padding, 5px));-webkit-padding-end:var(--ion-grid-padding-md, var(--ion-grid-padding, 5px));padding-inline-end:var(--ion-grid-padding-md, var(--ion-grid-padding, 5px))}}}@media (min-width: 992px){:host{padding-left:var(--ion-grid-padding-lg, var(--ion-grid-padding, 5px));padding-right:var(--ion-grid-padding-lg, var(--ion-grid-padding, 5px));padding-top:var(--ion-grid-padding-lg, var(--ion-grid-padding, 5px));padding-bottom:var(--ion-grid-padding-lg, var(--ion-grid-padding, 5px))}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){:host{padding-left:unset;padding-right:unset;-webkit-padding-start:var(--ion-grid-padding-lg, var(--ion-grid-padding, 5px));padding-inline-start:var(--ion-grid-padding-lg, var(--ion-grid-padding, 5px));-webkit-padding-end:var(--ion-grid-padding-lg, var(--ion-grid-padding, 5px));padding-inline-end:var(--ion-grid-padding-lg, var(--ion-grid-padding, 5px))}}}@media (min-width: 1200px){:host{padding-left:var(--ion-grid-padding-xl, var(--ion-grid-padding, 5px));padding-right:var(--ion-grid-padding-xl, var(--ion-grid-padding, 5px));padding-top:var(--ion-grid-padding-xl, var(--ion-grid-padding, 5px));padding-bottom:var(--ion-grid-padding-xl, var(--ion-grid-padding, 5px))}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){:host{padding-left:unset;padding-right:unset;-webkit-padding-start:var(--ion-grid-padding-xl, var(--ion-grid-padding, 5px));padding-inline-start:var(--ion-grid-padding-xl, var(--ion-grid-padding, 5px));-webkit-padding-end:var(--ion-grid-padding-xl, var(--ion-grid-padding, 5px));padding-inline-end:var(--ion-grid-padding-xl, var(--ion-grid-padding, 5px))}}}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){:host{margin-left:unset;margin-right:unset;-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto}}:host(.grid-fixed){width:var(--ion-grid-width-xs, var(--ion-grid-width, 100%));max-width:100%}@media (min-width: 576px){:host(.grid-fixed){width:var(--ion-grid-width-sm, var(--ion-grid-width, 540px))}}@media (min-width: 768px){:host(.grid-fixed){width:var(--ion-grid-width-md, var(--ion-grid-width, 720px))}}@media (min-width: 992px){:host(.grid-fixed){width:var(--ion-grid-width-lg, var(--ion-grid-width, 960px))}}@media (min-width: 1200px){:host(.grid-fixed){width:var(--ion-grid-width-xl, var(--ion-grid-width, 1140px))}}:host(.ion-no-padding){--ion-grid-column-padding:0;--ion-grid-column-padding-xs:0;--ion-grid-column-padding-sm:0;--ion-grid-column-padding-md:0;--ion-grid-column-padding-lg:0;--ion-grid-column-padding-xl:0}"}}]),n}(Ee.mv),[1,"ion-grid",{fixed:[4]}]);var ma=function(){if("undefined"!==typeof customElements){["ion-grid"].forEach((function(e){if("ion-grid"===e)customElements.get(e)||customElements.define(e,va)}))}},ga=function(e){var t=document.querySelector("".concat(e,".ion-cloned-element"));if(null!==t)return t;var n=document.createElement(e);return n.classList.add("ion-cloned-element"),n.style.setProperty("display","none"),document.body.appendChild(n),n},ya=function(e){if(e){var t=e.querySelectorAll("ion-toolbar");return{el:e,toolbars:Array.from(t).map((function(e){var t=e.querySelector("ion-title");return{el:e,background:e.shadowRoot.querySelector(".toolbar-background"),ionTitleEl:t,innerTitleEl:t?t.shadowRoot.querySelector(".toolbar-title"):null,ionButtonsEl:Array.from(e.querySelectorAll("ion-buttons"))}}))}}},ba=function(e,t,n){(0,Ee.wj)((function(){var r=e.scrollTop,a=(0,qe.h)(1,1+-r/500,1.1);null===n.querySelector("ion-refresher.refresher-native")&&(0,Ee.Iu)((function(){Ia(t.toolbars,a)}))}))},ka=function(e,t){"fade"!==e.collapse&&(void 0===t?e.style.removeProperty("--opacity-scale"):e.style.setProperty("--opacity-scale",t.toString()))},wa=function(e,t,n,r){(0,Ee.Iu)((function(){var a=r.scrollTop;!function(e,t,n){if(e[0].isIntersecting){var r=e[0].intersectionRatio>.9||n<=0?0:100*(1-e[0].intersectionRatio)/75;ka(t.el,1===r?void 0:r)}}(e,t,a);var i=e[0],o=i.intersectionRect,s=o.width*o.height,u=i.rootBounds.width*i.rootBounds.height,c=0===s&&0===u,l=Math.abs(o.left-i.boundingClientRect.left),d=Math.abs(o.right-i.boundingClientRect.right);c||s>0&&(l>=5||d>=5)||(i.isIntersecting?(xa(t,!1),xa(n)):(0===o.x&&0===o.y||0!==o.width&&0!==o.height)&&a>0&&(xa(t),xa(n,!1),ka(t.el)))}))},xa=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e.el;t?(n.classList.remove("header-collapse-condense-inactive"),n.removeAttribute("aria-hidden")):(n.classList.add("header-collapse-condense-inactive"),n.setAttribute("aria-hidden","true"))},Ia=function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((function(n){var r=n.ionTitleEl,a=n.innerTitleEl;r&&"large"===r.size&&(a.style.transition=t?"all 0.2s ease-in-out":"",a.style.transform="scale3d(".concat(e,", ").concat(e,", 1)"))}))},Sa=function(e,t,n){(0,Ee.wj)((function(){var r=e.scrollTop,a=t.clientHeight,i=n?n.clientHeight:0;if(null!==n&&r<i)return t.style.setProperty("--opacity-scale","0"),void e.style.setProperty("clip-path","inset(".concat(a,"px 0px 0px 0px)"));var o=r-i,s=(0,qe.h)(0,o/10,1);(0,Ee.Iu)((function(){e.style.removeProperty("clip-path"),t.style.setProperty("--opacity-scale",s.toString())}))}))},Ta=(0,Ee.GH)(function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(){var e;return(0,Se.Z)(this,n),(e=t.call(this)).__registerHost(),e.inheritedAttributes={},e.translucent=!1,e.setupFadeHeader=function(){var t=(0,ke.Z)((0,be.Z)().mark((function t(n,r){var a;return(0,be.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,da.g)(n);case 2:a=e.scrollEl=t.sent,e.contentScrollCallback=function(){Sa(e.scrollEl,e.el,r)},a.addEventListener("scroll",e.contentScrollCallback),Sa(e.scrollEl,e.el,r);case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e}return(0,Te.Z)(n,[{key:"componentWillLoad",value:function(){this.inheritedAttributes=(0,qe.i)(this.el)}},{key:"componentDidLoad",value:function(){this.checkCollapsibleHeader()}},{key:"componentDidUpdate",value:function(){this.checkCollapsibleHeader()}},{key:"disconnectedCallback",value:function(){this.destroyCollapsibleHeader()}},{key:"checkCollapsibleHeader",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){var t,n,r,a,i,o,s,u;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("ios"===je(this)){e.next=3;break}return e.abrupt("return");case 3:if(t=this.collapse,n="condense"===t,r="fade"===t,this.destroyCollapsibleHeader(),!n){e.next=15;break}return a=this.el.closest("ion-app,ion-page,.ion-page,page-inner"),i=a?(0,da.f)(a):null,(0,Ee.Iu)((function(){ga("ion-title").size="large",ga("ion-back-button")})),e.next=13,this.setupCondenseHeader(i,a);case 13:e.next=24;break;case 15:if(!r){e.next=24;break}if(o=this.el.closest("ion-app,ion-page,.ion-page,page-inner"),s=o?(0,da.f)(o):null){e.next=21;break}return(0,da.p)(this.el),e.abrupt("return");case 21:return u=s.querySelector('ion-header[collapse="condense"]'),e.next=24,this.setupFadeHeader(s,u);case 24:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"destroyCollapsibleHeader",value:function(){this.intersectionObserver&&(this.intersectionObserver.disconnect(),this.intersectionObserver=void 0),this.scrollEl&&this.contentScrollCallback&&(this.scrollEl.removeEventListener("scroll",this.contentScrollCallback),this.contentScrollCallback=void 0),this.collapsibleMainHeader&&(this.collapsibleMainHeader.classList.remove("header-collapse-main"),this.collapsibleMainHeader=void 0)}},{key:"setupCondenseHeader",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t,n){var r,a,i,o,s=this;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&n){e.next=3;break}return(0,da.p)(this.el),e.abrupt("return");case 3:if("undefined"!==typeof IntersectionObserver){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,(0,da.g)(t);case 7:if(this.scrollEl=e.sent,r=n.querySelectorAll("ion-header"),this.collapsibleMainHeader=Array.from(r).find((function(e){return"condense"!==e.collapse})),this.collapsibleMainHeader){e.next=12;break}return e.abrupt("return");case 12:if(a=ya(this.collapsibleMainHeader),i=ya(this.el),a&&i){e.next=16;break}return e.abrupt("return");case 16:xa(a,!1),ka(a.el,0),o=function(e){wa(e,a,i,s.scrollEl)},this.intersectionObserver=new IntersectionObserver(o,{root:t,threshold:[.25,.3,.4,.5,.6,.7,.8,.9,1]}),this.intersectionObserver.observe(i.toolbars[i.toolbars.length-1].el),this.contentScrollCallback=function(){ba(s.scrollEl,i,t)},this.scrollEl.addEventListener("scroll",this.contentScrollCallback),(0,Ee.Iu)((function(){void 0!==s.collapsibleMainHeader&&s.collapsibleMainHeader.classList.add("header-collapse-main")}));case 24:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t=this.translucent,n=this.inheritedAttributes,r=je(this),a=this.collapse||"none",i=Xt("ion-menu",this.el)?"none":"banner";return(0,Ee.h)(Ee.AA,Object.assign({role:i,class:(e={},(0,ye.Z)(e,r,!0),(0,ye.Z)(e,"header-".concat(r),!0),(0,ye.Z)(e,"header-translucent",this.translucent),(0,ye.Z)(e,"header-collapse-".concat(a),!0),(0,ye.Z)(e,"header-translucent-".concat(r),this.translucent),e)},n),"ios"===r&&t&&(0,Ee.h)("div",{class:"header-background"}),(0,Ee.h)("slot",null))}},{key:"el",get:function(){return this}}],[{key:"style",get:function(){return{ios:"ion-header{display:block;position:relative;-ms-flex-order:-1;order:-1;width:100%;z-index:10}ion-header ion-toolbar:first-of-type{padding-top:var(--ion-safe-area-top, 0)}.header-ios ion-toolbar:last-of-type{--border-width:0 0 0.55px}@supports ((-webkit-backdrop-filter: blur(0)) or (backdrop-filter: blur(0))){.header-background{left:0;right:0;top:0;bottom:0;position:absolute;-webkit-backdrop-filter:saturate(180%) blur(20px);backdrop-filter:saturate(180%) blur(20px)}.header-translucent-ios ion-toolbar{--opacity:.8}.header-collapse-condense-inactive .header-background{-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px)}}.header-ios.ion-no-border ion-toolbar:last-of-type{--border-width:0}.header-collapse-fade ion-toolbar{--opacity-scale:inherit}.header-collapse-condense{z-index:9}.header-collapse-condense ion-toolbar{position:-webkit-sticky;position:sticky;top:0}.header-collapse-condense ion-toolbar:first-of-type{padding-top:7px;z-index:1}.header-collapse-condense ion-toolbar{--background:var(--ion-background-color, #fff);z-index:0}.header-collapse-condense ion-toolbar:last-of-type{--border-width:0px}.header-collapse-condense ion-toolbar ion-searchbar{height:48px;padding-top:0px;padding-bottom:13px}.header-collapse-main{--opacity-scale:1}.header-collapse-main ion-toolbar{--opacity-scale:inherit}.header-collapse-main ion-toolbar.in-toolbar ion-title,.header-collapse-main ion-toolbar.in-toolbar ion-buttons{-webkit-transition:all 0.2s ease-in-out;transition:all 0.2s ease-in-out}.header-collapse-condense-inactive:not(.header-collapse-condense) ion-toolbar.in-toolbar ion-title,.header-collapse-condense-inactive:not(.header-collapse-condense) ion-toolbar.in-toolbar ion-buttons.buttons-collapse{opacity:0;pointer-events:none}.header-collapse-condense-inactive.header-collapse-condense ion-toolbar.in-toolbar ion-title,.header-collapse-condense-inactive.header-collapse-condense ion-toolbar.in-toolbar ion-buttons.buttons-collapse{visibility:hidden}",md:'ion-header{display:block;position:relative;-ms-flex-order:-1;order:-1;width:100%;z-index:10}ion-header ion-toolbar:first-of-type{padding-top:var(--ion-safe-area-top, 0)}.header-md::after{left:0;bottom:-5px;background-position:left 0 top -2px;position:absolute;width:100%;height:5px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAHBAMAAADzDtBxAAAAD1BMVEUAAAAAAAAAAAAAAAAAAABPDueNAAAABXRSTlMUCS0gBIh/TXEAAAAaSURBVAjXYxCEAgY4UIICBmMogMsgFLtAAQCNSwXZKOdPxgAAAABJRU5ErkJggg==);background-repeat:repeat-x;content:""}[dir=rtl] .header-md::after,:host-context([dir=rtl]) .header-md::after{left:unset;right:unset;right:0}[dir=rtl] .header-md::after,:host-context([dir=rtl]) .header-md::after{background-position:right 0 top -2px}.header-collapse-condense{display:none}.header-md.ion-no-border::after{display:none}'}}}]),n}(Ee.mv),[36,"ion-header",{collapse:[1],translucent:[4]}]);var Ea=function(){if("undefined"!==typeof customElements){["ion-header"].forEach((function(e){if("ion-header"===e)customElements.get(e)||customElements.define(e,Ta)}))}},Na=(0,Ee.GH)(function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(){var e;return(0,Se.Z)(this,n),(e=t.call(this)).__registerHost(),e.__attachShadow(),e.ionImgWillLoad=(0,Ee.yM)((0,we.Z)(e),"ionImgWillLoad",7),e.ionImgDidLoad=(0,Ee.yM)((0,we.Z)(e),"ionImgDidLoad",7),e.ionError=(0,Ee.yM)((0,we.Z)(e),"ionError",7),e.inheritedAttributes={},e.onLoad=function(){e.ionImgDidLoad.emit()},e.onError=function(){e.ionError.emit()},e}return(0,Te.Z)(n,[{key:"srcChanged",value:function(){this.addIO()}},{key:"componentWillLoad",value:function(){this.inheritedAttributes=(0,qe.d)(this.el,["draggable"])}},{key:"componentDidLoad",value:function(){this.addIO()}},{key:"addIO",value:function(){var e=this;void 0!==this.src&&("undefined"!==typeof window&&"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"isIntersecting"in window.IntersectionObserverEntry.prototype?(this.removeIO(),this.io=new IntersectionObserver((function(t){t[t.length-1].isIntersecting&&(e.load(),e.removeIO())})),this.io.observe(this.el)):setTimeout((function(){return e.load()}),200))}},{key:"load",value:function(){this.loadError=this.onError,this.loadSrc=this.src,this.ionImgWillLoad.emit()}},{key:"removeIO",value:function(){this.io&&(this.io.disconnect(),this.io=void 0)}},{key:"render",value:function(){var e=this.loadSrc,t=this.alt,n=this.onLoad,r=this.loadError,a=this.inheritedAttributes.draggable;return(0,Ee.h)(Ee.AA,{class:je(this)},(0,Ee.h)("img",{decoding:"async",src:e,alt:t,onLoad:n,onError:r,part:"image",draggable:Ca(a)}))}},{key:"el",get:function(){return this}}],[{key:"watchers",get:function(){return{src:["srcChanged"]}}},{key:"style",get:function(){return":host{display:block;-o-object-fit:contain;object-fit:contain}img{display:block;width:100%;height:100%;-o-object-fit:inherit;object-fit:inherit;-o-object-position:inherit;object-position:inherit}"}}]),n}(Ee.mv),[1,"ion-img",{alt:[1],src:[1],loadSrc:[32],loadError:[32]}]),Ca=function(e){switch(e){case"true":return!0;case"false":return!1;default:return}};var Za=function(){if("undefined"!==typeof customElements){["ion-img"].forEach((function(e){if("ion-img"===e)customElements.get(e)||customElements.define(e,Na)}))}};Ee.mv;var _a=function(e){try{if(e instanceof Fa)return e.value;if(!Da()||"string"!==typeof e||""===e)return e;if(e.includes("onload="))return"";var t=document.createDocumentFragment(),n=document.createElement("div");t.appendChild(n),n.innerHTML=e,La.forEach((function(e){for(var n=t.querySelectorAll(e),r=n.length-1;r>=0;r--){var a=n[r];a.parentNode?a.parentNode.removeChild(a):t.removeChild(a);for(var i=Ra(a),o=0;o<i.length;o++)Aa(i[o])}}));for(var r=Ra(t),a=0;a<r.length;a++)Aa(r[a]);var i=document.createElement("div");i.appendChild(t);var o=i.querySelector("div");return null!==o?o.innerHTML:i.innerHTML}catch(s){return console.error(s),""}},Aa=function e(t){if(!t.nodeType||1===t.nodeType)if("undefined"===typeof NamedNodeMap||t.attributes instanceof NamedNodeMap){for(var n=t.attributes.length-1;n>=0;n--){var r=t.attributes.item(n),a=r.name;if(Oa.includes(a.toLowerCase())){var i=r.value,o=t[a];(null!=i&&i.toLowerCase().includes("javascript:")||null!=o&&o.toLowerCase().includes("javascript:"))&&t.removeAttribute(a)}else t.removeAttribute(a)}for(var s=Ra(t),u=0;u<s.length;u++)e(s[u])}else t.remove()},Ra=function(e){return null!=e.children?e.children:e.childNodes},Da=function(){var e,t=window,n=null===(e=null===t||void 0===t?void 0:t.Ionic)||void 0===e?void 0:e.config;return!n||(n.get?n.get("sanitizerEnabled",!0):!0===n.sanitizerEnabled||void 0===n.sanitizerEnabled)},Oa=["class","id","href","src","name","slot"],La=["script","style","iframe","meta","link","object","embed"],Fa=(0,Te.Z)((function e(t){(0,Se.Z)(this,e),this.value=t})),Ma={bubbles:{dur:1e3,circles:9,fn:function(e,t,n){var r="".concat(e*t/n-e,"ms"),a=2*Math.PI*t/n;return{r:5,style:{top:"".concat(9*Math.sin(a),"px"),left:"".concat(9*Math.cos(a),"px"),"animation-delay":r}}}},circles:{dur:1e3,circles:8,fn:function(e,t,n){var r=t/n,a="".concat(e*r-e,"ms"),i=2*Math.PI*r;return{r:5,style:{top:"".concat(9*Math.sin(i),"px"),left:"".concat(9*Math.cos(i),"px"),"animation-delay":a}}}},circular:{dur:1400,elmDuration:!0,circles:1,fn:function(){return{r:20,cx:48,cy:48,fill:"none",viewBox:"24 24 48 48",transform:"translate(0,0)",style:{}}}},crescent:{dur:750,circles:1,fn:function(){return{r:26,style:{}}}},dots:{dur:750,circles:3,fn:function(e,t){var n=-110*t+"ms";return{r:6,style:{left:"".concat(9-9*t,"px"),"animation-delay":n}}}},lines:{dur:1e3,lines:8,fn:function(e,t,n){return{y1:14,y2:26,style:{transform:"rotate(".concat(360/n*t+(t<n/2?180:-180),"deg)"),"animation-delay":"".concat(e*t/n-e,"ms")}}}},"lines-small":{dur:1e3,lines:8,fn:function(e,t,n){return{y1:12,y2:20,style:{transform:"rotate(".concat(360/n*t+(t<n/2?180:-180),"deg)"),"animation-delay":"".concat(e*t/n-e,"ms")}}}},"lines-sharp":{dur:1e3,lines:12,fn:function(e,t,n){return{y1:17,y2:29,style:{transform:"rotate(".concat(30*t+(t<6?180:-180),"deg)"),"animation-delay":"".concat(e*t/n-e,"ms")}}}},"lines-sharp-small":{dur:1e3,lines:12,fn:function(e,t,n){return{y1:12,y2:20,style:{transform:"rotate(".concat(30*t+(t<6?180:-180),"deg)"),"animation-delay":"".concat(e*t/n-e,"ms")}}}}},Pa=Ma,za=(Ee.mv,function(e,t,n,r){var a=e.fn(t,n,r);return a.style["animation-duration"]=t+"ms",(0,Ee.h)("svg",{viewBox:a.viewBox||"0 0 64 64",style:a.style},(0,Ee.h)("circle",{transform:a.transform||"translate(32,32)",cx:a.cx,cy:a.cy,r:a.r,style:e.elmDuration?{animationDuration:t+"ms"}:{}}))}),Ba=function(e,t,n,r){var a=e.fn(t,n,r);return a.style["animation-duration"]=t+"ms",(0,Ee.h)("svg",{viewBox:a.viewBox||"0 0 64 64",style:a.style},(0,Ee.h)("line",{transform:"translate(32,32)",y1:a.y1,y2:a.y2}))};Ee.mv;Ee.mv;var Va=0;Ee.mv;Ee.mv;Ee.mv;Ee.mv;var Ua,Wa=function(e,t,n){return!t&&n||e&&t};var ja=Cr;Ee.mv;Ee.mv;var Ga=function(e,t,n,r,a){return qa(e[1],t[1],n[1],r[1],a).map((function(a){return Ha(e[0],t[0],n[0],r[0],a)}))},Ha=function(e,t,n,r,a){return a*(3*t*Math.pow(a-1,2)+a*(-3*n*a+3*n+r*a))-e*Math.pow(a-1,3)},qa=function(e,t,n,r,a){return $a((r-=a)-3*(n-=a)+3*(t-=a)-(e-=a),3*n-6*t+3*e,3*t-3*e,e).filter((function(e){return e>=0&&e<=1}))},$a=function(e,t,n,r){if(0===e)return function(e,t,n){var r=t*t-4*e*n;return r<0?[]:[(-t+Math.sqrt(r))/(2*e),(-t-Math.sqrt(r))/(2*e)]}(t,n,r);var a=(3*(n/=e)-(t/=e)*t)/3,i=(2*t*t*t-9*t*n+27*(r/=e))/27;if(0===a)return[Math.pow(-i,1/3)];if(0===i)return[Math.sqrt(-a),-Math.sqrt(-a)];var o=Math.pow(i/2,2)+Math.pow(a/3,3);if(0===o)return[Math.pow(i/2,.5)-t/3];if(o>0)return[Math.pow(-i/2+Math.sqrt(o),1/3)-Math.pow(i/2+Math.sqrt(o),1/3)-t/3];var s=Math.sqrt(Math.pow(-a/3,3)),u=Math.acos(-i/(2*Math.sqrt(Math.pow(-a/3,3)))),c=2*Math.pow(s,1/3);return[c*Math.cos(u/3)-t/3,c*Math.cos((u+2*Math.PI)/3)-t/3,c*Math.cos((u+4*Math.PI)/3)-t/3]},Ka=function(e){return(0,wt.c)().duration(e?400:300)},Xa=function(e){var t,n,r=e.width+8,a=(0,wt.c)(),i=(0,wt.c)();e.isEndSide?(t=r+"px",n="0px"):(t=-r+"px",n="0px"),a.addElement(e.menuInnerEl).fromTo("transform","translateX(".concat(t,")"),"translateX(".concat(n,")"));var o="ios"===je(e),s=o?.2:.25;return i.addElement(e.backdropEl).fromTo("opacity",.01,s),Ka(o).addAnimation([a,i])},Ya=function(e){var t,n,r=je(e),a=e.width;e.isEndSide?(t=-a+"px",n=a+"px"):(t=a+"px",n=-a+"px");var i=(0,wt.c)().addElement(e.menuInnerEl).fromTo("transform","translateX(".concat(n,")"),"translateX(0px)"),o=(0,wt.c)().addElement(e.contentEl).fromTo("transform","translateX(0px)","translateX(".concat(t,")")),s=(0,wt.c)().addElement(e.backdropEl).fromTo("opacity",.01,.32);return Ka("ios"===r).addAnimation([i,o,s])},Qa=function(e){var t=je(e),n=e.width*(e.isEndSide?-1:1)+"px",r=(0,wt.c)().addElement(e.contentEl).fromTo("transform","translateX(0px)","translateX(".concat(n,")"));return Ka("ios"===t).addAnimation(r)},Ja=function(){var e=new Map,t=[],n=function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){var n;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(t);case 2:if(!(n=e.sent)){e.next=5;break}return e.abrupt("return",n.open());case 5:return e.abrupt("return",!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r=function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){var n;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,void 0!==t?c(t):l();case 2:if(void 0===(n=e.sent)){e.next=5;break}return e.abrupt("return",n.close());case 5:return e.abrupt("return",!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a=function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){var n;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(t);case 2:if(!(n=e.sent)){e.next=5;break}return e.abrupt("return",n.toggle());case 5:return e.abrupt("return",!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i=function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t,n){var r;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(n);case 2:return(r=e.sent)&&(r.disabled=!t),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),o=function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t,n){var r;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(n);case 2:return(r=e.sent)&&(r.swipeGesture=t),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),s=function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){var n,r;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==t){e.next=7;break}return e.next=3,c(t);case 3:return n=e.sent,e.abrupt("return",void 0!==n&&n.isOpen());case 7:return e.next=9,l();case 9:return r=e.sent,e.abrupt("return",void 0!==r);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){var n;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(t);case 2:if(!(n=e.sent)){e.next=5;break}return e.abrupt("return",!n.disabled);case 5:return e.abrupt("return",!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c=function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(n){var r,a;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k();case 2:if("start"!==n&&"end"!==n){e.next=9;break}if(!(r=b((function(e){return e.side===n&&!e.disabled})))){e.next=6;break}return e.abrupt("return",r);case 6:return e.abrupt("return",b((function(e){return e.side===n})));case 9:if(null==n){e.next=11;break}return e.abrupt("return",b((function(e){return e.menuId===n})));case 11:if(!(a=b((function(e){return!e.disabled})))){e.next=14;break}return e.abrupt("return",a);case 14:return e.abrupt("return",t.length>0?t[0].el:void 0);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k();case 2:return e.abrupt("return",m());case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k();case 2:return e.abrupt("return",g());case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k();case 2:return e.abrupt("return",y());case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(t,n){e.set(t,n)},p=function(e){var n=e.side;t.filter((function(t){return t.side===n&&t!==e})).forEach((function(e){return e.disabled=!0}))},v=function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t,n,r){var a;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!y()){e.next=2;break}return e.abrupt("return",!1);case 2:if(!n){e.next=9;break}return e.next=5,l();case 5:if(!(a=e.sent)||t.el===a){e.next=9;break}return e.next=9,a.setOpen(!1,!1);case 9:return e.abrupt("return",t._setOpen(n,r));case 10:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),m=function(){return b((function(e){return e._isOpen}))},g=function(){return t.map((function(e){return e.el}))},y=function(){return t.some((function(e){return e.isAnimating}))},b=function(e){var n=t.find(e);if(void 0!==n)return n.el},k=function(){return Promise.all(Array.from(document.querySelectorAll("ion-menu")).map((function(e){return new Promise((function(t){return(0,qe.c)(e,t)}))})))};return h("reveal",Qa),h("push",Ya),h("overlay",Xa),"undefined"!==typeof document&&document.addEventListener("ionBackButton",(function(e){var t=m();t&&e.detail.register(He.MENU_BACK_BUTTON_PRIORITY,(function(){return t.close()}))})),{registerAnimation:h,get:c,getMenus:d,getOpen:l,isEnabled:u,swipeGesture:o,isAnimating:f,isOpen:s,enable:i,toggle:a,close:r,open:n,_getOpenSync:m,_createAnimation:function(t,n){var r=e.get(t);if(!r)throw new Error("animation not registered");return r(n)},_register:function(e){t.indexOf(e)<0&&(e.disabled||p(e),t.push(e))},_unregister:function(e){var n=t.indexOf(e);n>-1&&t.splice(n,1)},_setOpen:v,_setActiveMenu:p}},ei=Ja(),ti='[tabindex]:not([tabindex^="-"]), input:not([type=hidden]):not([tabindex^="-"]), textarea:not([tabindex^="-"]), button:not([tabindex^="-"]), select:not([tabindex^="-"]), .ion-focusable:not([tabindex^="-"])',ni=(Ee.mv,function(e,t,n){return Math.max(0,t!==n?-e:e)}),ri=function(e,t,n,r){return n?t>=e.innerWidth-r:t<=r},ai="show-menu",ii="show-backdrop",oi="menu-content-open";var si=function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){var n;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ei.get(t);case 2:if(n=e.sent,e.t0=n,!e.t0){e.next=8;break}return e.next=7,n.isActive();case 7:e.t0=e.sent;case 8:return e.abrupt("return",!!e.t0);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Ee.mv;Ee.mv;var ui=function(){function e(t,n){(0,Se.Z)(this,e),this.component=t,this.params=n,this.state=1}return(0,Te.Z)(e,[{key:"init",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){var n;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state=2,this.element){e.next=6;break}return n=this.component,e.next=5,Fr(this.delegate,t,n,["ion-page","ion-page-invisible"],this.params);case 5:this.element=e.sent;case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_destroy",value:function(){(0,qe.m)(3!==this.state,"view state must be ATTACHED");var e=this.element;e&&(this.delegate?this.delegate.removeViewFromDom(e.parentElement,e):e.remove()),this.nav=void 0,this.state=3}}]),e}(),ci=function(e,t,n){return!!e&&(e.component===t&&(0,qe.s)(e.params,n))},li=function(e,t){return e?e instanceof ui?e:new ui(e,t):null},di=(0,Ee.GH)(function(e){(0,xe.Z)(r,e);var t=(0,Ie.Z)(r);function r(){var e;return(0,Se.Z)(this,r),(e=t.call(this)).__registerHost(),e.__attachShadow(),e.ionNavWillLoad=(0,Ee.yM)((0,we.Z)(e),"ionNavWillLoad",7),e.ionNavWillChange=(0,Ee.yM)((0,we.Z)(e),"ionNavWillChange",3),e.ionNavDidChange=(0,Ee.yM)((0,we.Z)(e),"ionNavDidChange",3),e.transInstr=[],e.animationEnabled=!0,e.useRouter=!1,e.isTransitioning=!1,e.destroyed=!1,e.views=[],e.animated=!0,e}return(0,Te.Z)(r,[{key:"swipeGestureChanged",value:function(){this.gesture&&this.gesture.enable(!0===this.swipeGesture)}},{key:"rootChanged",value:function(){var e=Ee.Z5.isDev;void 0!==this.root&&(this.useRouter?e&&console.warn("<ion-nav> does not support a root attribute when using ion-router."):this.setRoot(this.root,this.rootParams))}},{key:"componentWillLoad",value:function(){if(this.useRouter=null!==document.querySelector("ion-router")&&null===this.el.closest("[no-router]"),void 0===this.swipeGesture){var e=je(this);this.swipeGesture=Ce.getBoolean("swipeBackEnabled","ios"===e)}this.ionNavWillLoad.emit()}},{key:"componentDidLoad",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.rootChanged(),e.next=3,n.e(22).then(n.bind(n,5022));case 3:this.gesture=e.sent.createSwipeBackGesture(this.el,this.canStart.bind(this),this.onStart.bind(this),this.onMove.bind(this),this.onEnd.bind(this)),this.swipeGestureChanged();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"connectedCallback",value:function(){this.destroyed=!1}},{key:"disconnectedCallback",value:function(){var e,t=(0,Ht.Z)(this.views);try{for(t.s();!(e=t.n()).done;){var n=e.value;(0,zr.l)(n.element,zr.d),n._destroy()}}catch(r){t.e(r)}finally{t.f()}this.gesture&&(this.gesture.destroy(),this.gesture=void 0),this.transInstr.length=0,this.views.length=0,this.destroyed=!0}},{key:"push",value:function(e,t,n,r){return this.insert(-1,e,t,n,r)}},{key:"insert",value:function(e,t,n,r,a){return this.insertPages(e,[{component:t,componentProps:n}],r,a)}},{key:"insertPages",value:function(e,t,n,r){return this.queueTrns({insertStart:e,insertViews:t,opts:n},r)}},{key:"pop",value:function(e,t){return this.removeIndex(-1,1,e,t)}},{key:"popTo",value:function(e,t,n){var r={removeStart:-1,removeCount:-1,opts:t};return"object"===typeof e&&e.component?(r.removeView=e,r.removeStart=1):"number"===typeof e&&(r.removeStart=e+1),this.queueTrns(r,n)}},{key:"popToRoot",value:function(e,t){return this.removeIndex(1,-1,e,t)}},{key:"removeIndex",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return this.queueTrns({removeStart:e,removeCount:t,opts:n},r)}},{key:"setRoot",value:function(e,t,n,r){return this.setPages([{component:e,componentProps:t}],n,r)}},{key:"setPages",value:function(e,t,n){return null!==t&&void 0!==t||(t={}),!0!==t.animated&&(t.animated=!1),this.queueTrns({insertStart:0,insertViews:e,removeStart:0,removeCount:-1,opts:t},n)}},{key:"setRouteId",value:function(e,t,n,r){var a,i=this.getActiveSync();if(ci(i,e,t))return Promise.resolve({changed:!1,element:i.element});var o,s=new Promise((function(e){return a=e})),u={updateURL:!1,viewIsReady:function(e){var t,n=new Promise((function(e){return t=e}));return a({changed:!0,element:e,markVisible:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(),e.next=3,o;case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),n}};if("root"===n)o=this.setRoot(e,t,u);else{var c=this.views.find((function(n){return ci(n,e,t)}));c?o=this.popTo(c,Object.assign(Object.assign({},u),{direction:"back",animationBuilder:r})):"forward"===n?o=this.push(e,t,Object.assign(Object.assign({},u),{animationBuilder:r})):"back"===n&&(o=this.setRoot(e,t,Object.assign(Object.assign({},u),{direction:"back",animated:!0,animationBuilder:r})))}return s}},{key:"getRouteId",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){var t;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.getActiveSync())){e.next=3;break}return e.abrupt("return",{id:t.element.tagName,params:t.params,element:t.element});case 3:return e.abrupt("return",void 0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getActive",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getActiveSync());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getByIndex",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.views[t]);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"canGoBack",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.canGoBackSync(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getPrevious",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getPreviousSync(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getLength",value:function(){return this.views.length}},{key:"getActiveSync",value:function(){return this.views[this.views.length-1]}},{key:"canGoBackSync",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getActiveSync();return!(!e||!this.getPreviousSync(e))}},{key:"getPreviousSync",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getActiveSync();if(e){var t=this.views,n=t.indexOf(e);return n>0?t[n-1]:void 0}}},{key:"queueTrns",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t,n){var r,a,i,o,s;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isTransitioning||!(null===(r=t.opts)||void 0===r?void 0:r.skipIfBusy)){e.next=2;break}return e.abrupt("return",!1);case 2:if(i=new Promise((function(e,n){t.resolve=e,t.reject=n})),t.done=n,!t.opts||!1===t.opts.updateURL||!this.useRouter){e.next=15;break}if(!(o=document.querySelector("ion-router"))){e.next=15;break}return e.next=9,o.canTransition();case 9:if(!1!==(s=e.sent)){e.next=12;break}return e.abrupt("return",!1);case 12:if("string"!==typeof s){e.next=15;break}return o.push(s,t.opts.direction||"back"),e.abrupt("return",!1);case 15:return 0===(null===(a=t.insertViews)||void 0===a?void 0:a.length)&&(t.insertViews=void 0),this.transInstr.push(t),this.nextTrns(),e.abrupt("return",i);case 19:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"success",value:function(e,t){if(this.destroyed)this.fireError("nav controller was destroyed",t);else if(t.done&&t.done(e.hasCompleted,e.requiresTransition,e.enteringView,e.leavingView,e.direction),t.resolve(e.hasCompleted),!1!==t.opts.updateURL&&this.useRouter){var n=document.querySelector("ion-router");if(n){var r="back"===e.direction?"back":"forward";n.navChanged(r)}}}},{key:"failed",value:function(e,t){this.destroyed?this.fireError("nav controller was destroyed",t):(this.transInstr.length=0,this.fireError(e,t))}},{key:"fireError",value:function(e,t){t.done&&t.done(!1,!1,e),t.reject&&!this.destroyed?t.reject(e):t.resolve(!1)}},{key:"nextTrns",value:function(){if(this.isTransitioning)return!1;var e=this.transInstr.shift();return!!e&&(this.runTransition(e),!0)}},{key:"runTransition",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){var n,r,a,i;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.ionNavWillChange.emit(),this.isTransitioning=!0,this.prepareTI(t),n=this.getActiveSync(),r=this.getEnteringView(t,n),n||r){e.next=8;break}throw new Error("no views in the stack to be removed");case 8:if(!r||1!==r.state){e.next=11;break}return e.next=11,r.init(this.el);case 11:if(this.postViewInit(r,n,t),(a=(t.enteringRequiresTransition||t.leavingRequiresTransition)&&r!==n)&&t.opts&&n&&("back"===t.opts.direction&&(t.opts.animationBuilder=t.opts.animationBuilder||(null===r||void 0===r?void 0:r.animationBuilder)),n.animationBuilder=t.opts.animationBuilder),!a){e.next=20;break}return e.next=17,this.transition(r,n,t);case 17:i=e.sent,e.next=21;break;case 20:i={hasCompleted:!0,requiresTransition:!1};case 21:this.success(i,t),this.ionNavDidChange.emit(),e.next=28;break;case 25:e.prev=25,e.t0=e.catch(0),this.failed(e.t0,t);case 28:this.isTransitioning=!1,this.nextTrns();case 30:case"end":return e.stop()}}),e,this,[[0,25]])})));return function(t){return e.apply(this,arguments)}}()},{key:"prepareTI",value:function(e){var t,n,r,a=this.views.length;if(null!==(t=e.opts)&&void 0!==t||(e.opts={}),null!==(n=(r=e.opts).delegate)&&void 0!==n||(r.delegate=this.delegate),void 0!==e.removeView){(0,qe.m)(void 0!==e.removeStart,"removeView needs removeStart"),(0,qe.m)(void 0!==e.removeCount,"removeView needs removeCount");var i=this.views.indexOf(e.removeView);if(i<0)throw new Error("removeView was not found");e.removeStart+=i}void 0!==e.removeStart&&(e.removeStart<0&&(e.removeStart=a-1),e.removeCount<0&&(e.removeCount=a-e.removeStart),e.leavingRequiresTransition=e.removeCount>0&&e.removeStart+e.removeCount===a),e.insertViews&&((e.insertStart<0||e.insertStart>a)&&(e.insertStart=a),e.enteringRequiresTransition=e.insertStart===a);var o=e.insertViews;if(o){(0,qe.m)(o.length>0,"length can not be zero");var s=o.map((function(e){return e instanceof ui?e:"component"in e?li(e.component,null===e.componentProps?void 0:e.componentProps):li(e,void 0)})).filter((function(e){return null!==e}));if(0===s.length)throw new Error("invalid views to insert");var u,c=(0,Ht.Z)(s);try{for(c.s();!(u=c.n()).done;){var l=u.value;l.delegate=e.opts.delegate;var d=l.nav;if(d&&d!==this)throw new Error("inserted view was already inserted");if(3===l.state)throw new Error("inserted view was already destroyed")}}catch(f){c.e(f)}finally{c.f()}e.insertViews=s}}},{key:"getEnteringView",value:function(e,t){var n=e.insertViews;if(void 0!==n)return n[n.length-1];var r=e.removeStart;if(void 0!==r)for(var a=this.views,i=r+e.removeCount,o=a.length-1;o>=0;o--){var s=a[o];if((o<r||o>=i)&&s!==t)return s}}},{key:"postViewInit",value:function(e,t,n){var r,a,i;(0,qe.m)(t||e,"Both leavingView and enteringView are null"),(0,qe.m)(n.resolve,"resolve must be valid"),(0,qe.m)(n.reject,"reject must be valid");var o,s=n.opts,u=n.insertViews,c=n.removeStart,l=n.removeCount;if(void 0!==c&&void 0!==l){(0,qe.m)(c>=0,"removeStart can not be negative"),(0,qe.m)(l>=0,"removeCount can not be negative"),o=[];for(var d=c;d<c+l;d++){var f=this.views[d];void 0!==f&&f!==e&&f!==t&&o.push(f)}null!==(r=s.direction)&&void 0!==r||(s.direction="back")}var h=this.views.length+(null!==(a=null===u||void 0===u?void 0:u.length)&&void 0!==a?a:0)-(null!==l&&void 0!==l?l:0);if((0,qe.m)(h>=0,"final balance can not be negative"),0===h)throw console.warn("You can't remove all the pages in the navigation stack. nav.pop() is probably called too many times.",this,this.el),new Error("navigation stack needs at least one root page");if(u){var p,v=n.insertStart,m=(0,Ht.Z)(u);try{for(m.s();!(p=m.n()).done;){var g=p.value;this.insertViewAt(g,v),v++}}catch(S){m.e(S)}finally{m.f()}n.enteringRequiresTransition&&(null!==(i=s.direction)&&void 0!==i||(s.direction="forward"))}if(o&&o.length>0){var y,b=(0,Ht.Z)(o);try{for(b.s();!(y=b.n()).done;){var k=y.value;(0,zr.l)(k.element,zr.b),(0,zr.l)(k.element,zr.c),(0,zr.l)(k.element,zr.d)}}catch(S){b.e(S)}finally{b.f()}var w,x=(0,Ht.Z)(o);try{for(x.s();!(w=x.n()).done;){var I=w.value;this.destroyView(I)}}catch(S){x.e(S)}finally{x.f()}}}},{key:"transition",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t,n,r){var a,i,o,s,u,c,l,d,f=this;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.opts,i=a.progressAnimation?function(e){return f.sbAni=e}:void 0,o=je(this),s=t.element,u=n&&n.element,c=Object.assign(Object.assign({mode:o,showGoBack:this.canGoBackSync(t),baseEl:this.el,progressCallback:i,animated:this.animated&&Ce.getBoolean("animated",!0),enteringEl:s,leavingEl:u},a),{animationBuilder:a.animationBuilder||this.animation||Ce.get("navAnimation")}),e.next=8,(0,zr.t)(c);case 8:return l=e.sent,d=l.hasCompleted,e.abrupt("return",this.transitionFinish(d,t,n,a));case 11:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"transitionFinish",value:function(e,t,n,r){var a=e?t:n;return a&&this.unmountInactiveViews(a),{hasCompleted:e,requiresTransition:!0,enteringView:t,leavingView:n,direction:r.direction}}},{key:"insertViewAt",value:function(e,t){var n=this.views,r=n.indexOf(e);r>-1?((0,qe.m)(e.nav===this,"view is not part of the nav"),n.splice(r,1),n.splice(t,0,e)):((0,qe.m)(!e.nav,"nav is used"),e.nav=this,n.splice(t,0,e))}},{key:"removeView",value:function(e){(0,qe.m)(2===e.state||3===e.state,"view state should be loaded or destroyed");var t=this.views,n=t.indexOf(e);(0,qe.m)(n>-1,"view must be part of the stack"),n>=0&&t.splice(n,1)}},{key:"destroyView",value:function(e){e._destroy(),this.removeView(e)}},{key:"unmountInactiveViews",value:function(e){if(!this.destroyed)for(var t=this.views,n=t.indexOf(e),r=t.length-1;r>=0;r--){var a=t[r],i=a.element;i&&(r>n?((0,zr.l)(i,zr.d),this.destroyView(a)):r<n&&(0,zr.s)(i,!0))}}},{key:"canStart",value:function(){return!!this.swipeGesture&&!this.isTransitioning&&0===this.transInstr.length&&this.animationEnabled&&this.canGoBackSync()}},{key:"onStart",value:function(){this.pop({direction:"back",progressAnimation:!0})}},{key:"onMove",value:function(e){this.sbAni&&this.sbAni.progressStep(e)}},{key:"onEnd",value:function(e,t,n){var r=this;if(this.sbAni){this.animationEnabled=!1,this.sbAni.onFinish((function(){r.animationEnabled=!0}),{oneTimeCallback:!0});var a=e?-.001:.001;e?a+=Ga([0,0],[.32,.72],[0,1],[1,1],t)[0]:(this.sbAni.easing("cubic-bezier(1, 0, 0.68, 0.28)"),a+=Ga([0,0],[1,0],[.68,.28],[1,1],t)[0]),this.sbAni.progressEnd(e?1:0,a,n)}}},{key:"render",value:function(){return(0,Ee.h)("slot",null)}},{key:"el",get:function(){return this}}],[{key:"watchers",get:function(){return{swipeGesture:["swipeGestureChanged"],root:["rootChanged"]}}},{key:"style",get:function(){return":host{left:0;right:0;top:0;bottom:0;position:absolute;contain:layout size style;overflow:hidden;z-index:0}"}}]),r}(Ee.mv),[1,"ion-nav",{delegate:[16],swipeGesture:[1028,"swipe-gesture"],animated:[4],animation:[16],rootParams:[16],root:[1],push:[64],insert:[64],insertPages:[64],pop:[64],popTo:[64],popToRoot:[64],removeIndex:[64],setRoot:[64],setPages:[64],setRouteId:[64],getRouteId:[64],getActive:[64],getByIndex:[64],canGoBack:[64],getPrevious:[64]}]);var fi=function(){if("undefined"!==typeof customElements){["ion-nav"].forEach((function(e){if("ion-nav"===e)customElements.get(e)||customElements.define(e,di)}))}};Ee.mv;var hi=(0,Ee.GH)(function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(){var e;return(0,Se.Z)(this,n),(e=t.call(this)).__registerHost(),e.__attachShadow(),e.type="determinate",e.reversed=!1,e.value=0,e.buffer=1,e}return(0,Te.Z)(n,[{key:"render",value:function(){var e,t=this.color,n=this.type,r=this.reversed,a=this.value,i=this.buffer,o=Ce.getBoolean("_testing"),s=je(this);return(0,Ee.h)(Ee.AA,{role:"progressbar","aria-valuenow":"determinate"===n?a:null,"aria-valuemin":"0","aria-valuemax":"1",class:Yt(t,(e={},(0,ye.Z)(e,s,!0),(0,ye.Z)(e,"progress-bar-".concat(n),!0),(0,ye.Z)(e,"progress-paused",o),(0,ye.Z)(e,"progress-bar-reversed","rtl"===document.dir?!r:r),e))},"indeterminate"===n?pi():vi(a,i))}}],[{key:"style",get:function(){return{ios:":host{--background:rgba(var(--ion-color-primary-rgb, 56, 128, 255), 0.3);--progress-background:var(--ion-color-primary, #3880ff);--buffer-background:var(--background);display:block;position:relative;width:100%;contain:strict;direction:ltr;overflow:hidden}.progress,.progress-indeterminate,.indeterminate-bar-primary,.indeterminate-bar-secondary,.progress-buffer-bar{left:0;right:0;top:0;bottom:0;position:absolute;width:100%;height:100%}.buffer-circles-container,.buffer-circles{left:0;right:0;top:0;bottom:0;position:absolute}.buffer-circles{right:-10px;left:-10px;}.progress,.progress-buffer-bar,.buffer-circles-container{-webkit-transform-origin:left top;transform-origin:left top;-webkit-transition:-webkit-transform 150ms linear;transition:-webkit-transform 150ms linear;transition:transform 150ms linear;transition:transform 150ms linear, -webkit-transform 150ms linear}.progress,.progress-indeterminate{background:var(--progress-background);z-index:2}.progress-buffer-bar{background:var(--buffer-background);z-index:1}.buffer-circles-container{overflow:hidden}.indeterminate-bar-primary{top:0;right:0;bottom:0;left:-145.166611%;-webkit-animation:primary-indeterminate-translate 2s infinite linear;animation:primary-indeterminate-translate 2s infinite linear}.indeterminate-bar-primary .progress-indeterminate{-webkit-animation:primary-indeterminate-scale 2s infinite linear;animation:primary-indeterminate-scale 2s infinite linear;-webkit-animation-play-state:inherit;animation-play-state:inherit}.indeterminate-bar-secondary{top:0;right:0;bottom:0;left:-54.888891%;-webkit-animation:secondary-indeterminate-translate 2s infinite linear;animation:secondary-indeterminate-translate 2s infinite linear}.indeterminate-bar-secondary .progress-indeterminate{-webkit-animation:secondary-indeterminate-scale 2s infinite linear;animation:secondary-indeterminate-scale 2s infinite linear;-webkit-animation-play-state:inherit;animation-play-state:inherit}.buffer-circles{background-image:radial-gradient(ellipse at center, var(--buffer-background) 0%, var(--buffer-background) 30%, transparent 30%);background-repeat:repeat-x;background-position:5px center;background-size:10px 10px;z-index:0;-webkit-animation:buffering 450ms infinite linear;animation:buffering 450ms infinite linear}:host(.progress-bar-reversed){-webkit-transform:scaleX(-1);transform:scaleX(-1)}:host(.progress-paused) .indeterminate-bar-secondary,:host(.progress-paused) .indeterminate-bar-primary,:host(.progress-paused) .buffer-circles{-webkit-animation-play-state:paused;animation-play-state:paused}:host(.ion-color) .progress-buffer-bar{background:rgba(var(--ion-color-base-rgb), 0.3)}:host(.ion-color) .buffer-circles{background-image:radial-gradient(ellipse at center, rgba(var(--ion-color-base-rgb), 0.3) 0%, rgba(var(--ion-color-base-rgb), 0.3) 30%, transparent 30%)}:host(.ion-color) .progress,:host(.ion-color) .progress-indeterminate{background:var(--ion-color-base)}@-webkit-keyframes primary-indeterminate-translate{0%{-webkit-transform:translateX(0);transform:translateX(0)}20%{-webkit-animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);-webkit-transform:translateX(0);transform:translateX(0)}59.15%{-webkit-animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);-webkit-transform:translateX(83.67142%);transform:translateX(83.67142%)}100%{-webkit-transform:translateX(200.611057%);transform:translateX(200.611057%)}}@keyframes primary-indeterminate-translate{0%{-webkit-transform:translateX(0);transform:translateX(0)}20%{-webkit-animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);-webkit-transform:translateX(0);transform:translateX(0)}59.15%{-webkit-animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);-webkit-transform:translateX(83.67142%);transform:translateX(83.67142%)}100%{-webkit-transform:translateX(200.611057%);transform:translateX(200.611057%)}}@-webkit-keyframes primary-indeterminate-scale{0%{-webkit-transform:scaleX(0.08);transform:scaleX(0.08)}36.65%{-webkit-animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);-webkit-transform:scaleX(0.08);transform:scaleX(0.08)}69.15%{-webkit-animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);-webkit-transform:scaleX(0.661479);transform:scaleX(0.661479)}100%{-webkit-transform:scaleX(0.08);transform:scaleX(0.08)}}@keyframes primary-indeterminate-scale{0%{-webkit-transform:scaleX(0.08);transform:scaleX(0.08)}36.65%{-webkit-animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);-webkit-transform:scaleX(0.08);transform:scaleX(0.08)}69.15%{-webkit-animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);-webkit-transform:scaleX(0.661479);transform:scaleX(0.661479)}100%{-webkit-transform:scaleX(0.08);transform:scaleX(0.08)}}@-webkit-keyframes secondary-indeterminate-translate{0%{-webkit-animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);-webkit-transform:translateX(0);transform:translateX(0)}25%{-webkit-animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);-webkit-transform:translateX(37.651913%);transform:translateX(37.651913%)}48.35%{-webkit-animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);-webkit-transform:translateX(84.386165%);transform:translateX(84.386165%)}100%{-webkit-transform:translateX(160.277782%);transform:translateX(160.277782%)}}@keyframes secondary-indeterminate-translate{0%{-webkit-animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);-webkit-transform:translateX(0);transform:translateX(0)}25%{-webkit-animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);-webkit-transform:translateX(37.651913%);transform:translateX(37.651913%)}48.35%{-webkit-animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);-webkit-transform:translateX(84.386165%);transform:translateX(84.386165%)}100%{-webkit-transform:translateX(160.277782%);transform:translateX(160.277782%)}}@-webkit-keyframes secondary-indeterminate-scale{0%{-webkit-animation-timing-function:cubic-bezier(0.205028, 0.057051, 0.57661, 0.453971);animation-timing-function:cubic-bezier(0.205028, 0.057051, 0.57661, 0.453971);-webkit-transform:scaleX(0.08);transform:scaleX(0.08)}19.15%{-webkit-animation-timing-function:cubic-bezier(0.152313, 0.196432, 0.648374, 1.004315);animation-timing-function:cubic-bezier(0.152313, 0.196432, 0.648374, 1.004315);-webkit-transform:scaleX(0.457104);transform:scaleX(0.457104)}44.15%{-webkit-animation-timing-function:cubic-bezier(0.257759, -0.003163, 0.211762, 1.38179);animation-timing-function:cubic-bezier(0.257759, -0.003163, 0.211762, 1.38179);-webkit-transform:scaleX(0.72796);transform:scaleX(0.72796)}100%{-webkit-transform:scaleX(0.08);transform:scaleX(0.08)}}@keyframes secondary-indeterminate-scale{0%{-webkit-animation-timing-function:cubic-bezier(0.205028, 0.057051, 0.57661, 0.453971);animation-timing-function:cubic-bezier(0.205028, 0.057051, 0.57661, 0.453971);-webkit-transform:scaleX(0.08);transform:scaleX(0.08)}19.15%{-webkit-animation-timing-function:cubic-bezier(0.152313, 0.196432, 0.648374, 1.004315);animation-timing-function:cubic-bezier(0.152313, 0.196432, 0.648374, 1.004315);-webkit-transform:scaleX(0.457104);transform:scaleX(0.457104)}44.15%{-webkit-animation-timing-function:cubic-bezier(0.257759, -0.003163, 0.211762, 1.38179);animation-timing-function:cubic-bezier(0.257759, -0.003163, 0.211762, 1.38179);-webkit-transform:scaleX(0.72796);transform:scaleX(0.72796)}100%{-webkit-transform:scaleX(0.08);transform:scaleX(0.08)}}@-webkit-keyframes buffering{to{-webkit-transform:translateX(-10px);transform:translateX(-10px)}}@keyframes buffering{to{-webkit-transform:translateX(-10px);transform:translateX(-10px)}}:host{height:3px}",md:":host{--background:rgba(var(--ion-color-primary-rgb, 56, 128, 255), 0.3);--progress-background:var(--ion-color-primary, #3880ff);--buffer-background:var(--background);display:block;position:relative;width:100%;contain:strict;direction:ltr;overflow:hidden}.progress,.progress-indeterminate,.indeterminate-bar-primary,.indeterminate-bar-secondary,.progress-buffer-bar{left:0;right:0;top:0;bottom:0;position:absolute;width:100%;height:100%}.buffer-circles-container,.buffer-circles{left:0;right:0;top:0;bottom:0;position:absolute}.buffer-circles{right:-10px;left:-10px;}.progress,.progress-buffer-bar,.buffer-circles-container{-webkit-transform-origin:left top;transform-origin:left top;-webkit-transition:-webkit-transform 150ms linear;transition:-webkit-transform 150ms linear;transition:transform 150ms linear;transition:transform 150ms linear, -webkit-transform 150ms linear}.progress,.progress-indeterminate{background:var(--progress-background);z-index:2}.progress-buffer-bar{background:var(--buffer-background);z-index:1}.buffer-circles-container{overflow:hidden}.indeterminate-bar-primary{top:0;right:0;bottom:0;left:-145.166611%;-webkit-animation:primary-indeterminate-translate 2s infinite linear;animation:primary-indeterminate-translate 2s infinite linear}.indeterminate-bar-primary .progress-indeterminate{-webkit-animation:primary-indeterminate-scale 2s infinite linear;animation:primary-indeterminate-scale 2s infinite linear;-webkit-animation-play-state:inherit;animation-play-state:inherit}.indeterminate-bar-secondary{top:0;right:0;bottom:0;left:-54.888891%;-webkit-animation:secondary-indeterminate-translate 2s infinite linear;animation:secondary-indeterminate-translate 2s infinite linear}.indeterminate-bar-secondary .progress-indeterminate{-webkit-animation:secondary-indeterminate-scale 2s infinite linear;animation:secondary-indeterminate-scale 2s infinite linear;-webkit-animation-play-state:inherit;animation-play-state:inherit}.buffer-circles{background-image:radial-gradient(ellipse at center, var(--buffer-background) 0%, var(--buffer-background) 30%, transparent 30%);background-repeat:repeat-x;background-position:5px center;background-size:10px 10px;z-index:0;-webkit-animation:buffering 450ms infinite linear;animation:buffering 450ms infinite linear}:host(.progress-bar-reversed){-webkit-transform:scaleX(-1);transform:scaleX(-1)}:host(.progress-paused) .indeterminate-bar-secondary,:host(.progress-paused) .indeterminate-bar-primary,:host(.progress-paused) .buffer-circles{-webkit-animation-play-state:paused;animation-play-state:paused}:host(.ion-color) .progress-buffer-bar{background:rgba(var(--ion-color-base-rgb), 0.3)}:host(.ion-color) .buffer-circles{background-image:radial-gradient(ellipse at center, rgba(var(--ion-color-base-rgb), 0.3) 0%, rgba(var(--ion-color-base-rgb), 0.3) 30%, transparent 30%)}:host(.ion-color) .progress,:host(.ion-color) .progress-indeterminate{background:var(--ion-color-base)}@-webkit-keyframes primary-indeterminate-translate{0%{-webkit-transform:translateX(0);transform:translateX(0)}20%{-webkit-animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);-webkit-transform:translateX(0);transform:translateX(0)}59.15%{-webkit-animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);-webkit-transform:translateX(83.67142%);transform:translateX(83.67142%)}100%{-webkit-transform:translateX(200.611057%);transform:translateX(200.611057%)}}@keyframes primary-indeterminate-translate{0%{-webkit-transform:translateX(0);transform:translateX(0)}20%{-webkit-animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);-webkit-transform:translateX(0);transform:translateX(0)}59.15%{-webkit-animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);-webkit-transform:translateX(83.67142%);transform:translateX(83.67142%)}100%{-webkit-transform:translateX(200.611057%);transform:translateX(200.611057%)}}@-webkit-keyframes primary-indeterminate-scale{0%{-webkit-transform:scaleX(0.08);transform:scaleX(0.08)}36.65%{-webkit-animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);-webkit-transform:scaleX(0.08);transform:scaleX(0.08)}69.15%{-webkit-animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);-webkit-transform:scaleX(0.661479);transform:scaleX(0.661479)}100%{-webkit-transform:scaleX(0.08);transform:scaleX(0.08)}}@keyframes primary-indeterminate-scale{0%{-webkit-transform:scaleX(0.08);transform:scaleX(0.08)}36.65%{-webkit-animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);-webkit-transform:scaleX(0.08);transform:scaleX(0.08)}69.15%{-webkit-animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);-webkit-transform:scaleX(0.661479);transform:scaleX(0.661479)}100%{-webkit-transform:scaleX(0.08);transform:scaleX(0.08)}}@-webkit-keyframes secondary-indeterminate-translate{0%{-webkit-animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);-webkit-transform:translateX(0);transform:translateX(0)}25%{-webkit-animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);-webkit-transform:translateX(37.651913%);transform:translateX(37.651913%)}48.35%{-webkit-animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);-webkit-transform:translateX(84.386165%);transform:translateX(84.386165%)}100%{-webkit-transform:translateX(160.277782%);transform:translateX(160.277782%)}}@keyframes secondary-indeterminate-translate{0%{-webkit-animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);-webkit-transform:translateX(0);transform:translateX(0)}25%{-webkit-animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);-webkit-transform:translateX(37.651913%);transform:translateX(37.651913%)}48.35%{-webkit-animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);-webkit-transform:translateX(84.386165%);transform:translateX(84.386165%)}100%{-webkit-transform:translateX(160.277782%);transform:translateX(160.277782%)}}@-webkit-keyframes secondary-indeterminate-scale{0%{-webkit-animation-timing-function:cubic-bezier(0.205028, 0.057051, 0.57661, 0.453971);animation-timing-function:cubic-bezier(0.205028, 0.057051, 0.57661, 0.453971);-webkit-transform:scaleX(0.08);transform:scaleX(0.08)}19.15%{-webkit-animation-timing-function:cubic-bezier(0.152313, 0.196432, 0.648374, 1.004315);animation-timing-function:cubic-bezier(0.152313, 0.196432, 0.648374, 1.004315);-webkit-transform:scaleX(0.457104);transform:scaleX(0.457104)}44.15%{-webkit-animation-timing-function:cubic-bezier(0.257759, -0.003163, 0.211762, 1.38179);animation-timing-function:cubic-bezier(0.257759, -0.003163, 0.211762, 1.38179);-webkit-transform:scaleX(0.72796);transform:scaleX(0.72796)}100%{-webkit-transform:scaleX(0.08);transform:scaleX(0.08)}}@keyframes secondary-indeterminate-scale{0%{-webkit-animation-timing-function:cubic-bezier(0.205028, 0.057051, 0.57661, 0.453971);animation-timing-function:cubic-bezier(0.205028, 0.057051, 0.57661, 0.453971);-webkit-transform:scaleX(0.08);transform:scaleX(0.08)}19.15%{-webkit-animation-timing-function:cubic-bezier(0.152313, 0.196432, 0.648374, 1.004315);animation-timing-function:cubic-bezier(0.152313, 0.196432, 0.648374, 1.004315);-webkit-transform:scaleX(0.457104);transform:scaleX(0.457104)}44.15%{-webkit-animation-timing-function:cubic-bezier(0.257759, -0.003163, 0.211762, 1.38179);animation-timing-function:cubic-bezier(0.257759, -0.003163, 0.211762, 1.38179);-webkit-transform:scaleX(0.72796);transform:scaleX(0.72796)}100%{-webkit-transform:scaleX(0.08);transform:scaleX(0.08)}}@-webkit-keyframes buffering{to{-webkit-transform:translateX(-10px);transform:translateX(-10px)}}@keyframes buffering{to{-webkit-transform:translateX(-10px);transform:translateX(-10px)}}:host{height:4px}"}}}]),n}(Ee.mv),[33,"ion-progress-bar",{type:[1],reversed:[4],value:[2],buffer:[2],color:[513]}]),pi=function(){return(0,Ee.h)("div",{part:"track",class:"progress-buffer-bar"},(0,Ee.h)("div",{class:"indeterminate-bar-primary"},(0,Ee.h)("span",{part:"progress",class:"progress-indeterminate"})),(0,Ee.h)("div",{class:"indeterminate-bar-secondary"},(0,Ee.h)("span",{part:"progress",class:"progress-indeterminate"})))},vi=function(e,t){var n=(0,qe.h)(0,e,1),r=(0,qe.h)(0,t,1);return[(0,Ee.h)("div",{part:"progress",class:"progress",style:{transform:"scaleX(".concat(n,")")}}),(0,Ee.h)("div",{class:{"buffer-circles-container":!0,"ion-hide":1===r},style:{transform:"translateX(".concat(100*r,"%)")}},(0,Ee.h)("div",{class:"buffer-circles-container",style:{transform:"translateX(-".concat(100*r,"%)")}},(0,Ee.h)("div",{part:"stream",class:"buffer-circles"}))),(0,Ee.h)("div",{part:"track",class:"progress-buffer-bar",style:{transform:"scaleX(".concat(r,")")}})]};var mi=function(){if("undefined"!==typeof customElements){["ion-progress-bar"].forEach((function(e){if("ion-progress-bar"===e)customElements.get(e)||customElements.define(e,hi)}))}},gi=(Ee.mv,0);Ee.mv;var yi=0;Ee.mv;var bi=function(e,t){var n=t.knob,r=t.value,a=t.ratio,i=t.min,o=t.max,s=t.disabled,u=t.pressed,c=t.pin,l=t.handleKeyboard,d=t.labelText,f=t.pinFormatter,h=e?"right":"left";return(0,Ee.h)("div",{onKeyDown:function(e){var t=e.key;"ArrowLeft"===t||"ArrowDown"===t?(l(n,!1),e.preventDefault(),e.stopPropagation()):"ArrowRight"!==t&&"ArrowUp"!==t||(l(n,!0),e.preventDefault(),e.stopPropagation())},class:{"range-knob-handle":!0,"range-knob-a":"A"===n,"range-knob-b":"B"===n,"range-knob-pressed":u,"range-knob-min":r===i,"range-knob-max":r===o,"ion-activatable":!0,"ion-focusable":!0},style:function(){var e={};return e[h]="".concat(100*a,"%"),e}(),role:"slider",tabindex:s?-1:0,"aria-label":d,"aria-valuemin":i,"aria-valuemax":o,"aria-disabled":s?"true":null,"aria-valuenow":r},c&&(0,Ee.h)("div",{class:"range-pin",role:"presentation",part:"pin"},f(r)),(0,Ee.h)("div",{class:"range-knob",role:"presentation",part:"knob"}))},ki=function(e,t,n,r){var a=(n-t)*e;return r>0&&(a=Math.round(a/r)*r+t),(0,qe.h)(t,a,n)},wi=function(e,t,n){return(0,qe.h)(0,(e-t)/(n-t),1)},xi=0;var Ii=function(e){var t=e.previousElementSibling;return null!==t&&"ION-HEADER"===t.tagName?"translate":"scale"},Si=function(e,t,n){return"scale"===e?Ei(t,n):Ni(t,n)},Ti=function(e){var t=e.querySelector("ion-spinner"),n=t.shadowRoot.querySelector("circle"),r=e.querySelector(".spinner-arrow-container"),a=e.querySelector(".arrow-container"),i=a?a.querySelector("ion-icon"):null,o=(0,wt.c)().duration(1e3).easing("ease-out"),s=(0,wt.c)().addElement(r).keyframes([{offset:0,opacity:"0.3"},{offset:.45,opacity:"0.3"},{offset:.55,opacity:"1"},{offset:1,opacity:"1"}]),u=(0,wt.c)().addElement(n).keyframes([{offset:0,strokeDasharray:"1px, 200px"},{offset:.2,strokeDasharray:"1px, 200px"},{offset:.55,strokeDasharray:"100px, 200px"},{offset:1,strokeDasharray:"100px, 200px"}]),c=(0,wt.c)().addElement(t).keyframes([{offset:0,transform:"rotate(-90deg)"},{offset:1,transform:"rotate(210deg)"}]);if(a&&i){var l=(0,wt.c)().addElement(a).keyframes([{offset:0,transform:"rotate(0deg)"},{offset:.3,transform:"rotate(0deg)"},{offset:.55,transform:"rotate(280deg)"},{offset:1,transform:"rotate(400deg)"}]),d=(0,wt.c)().addElement(i).keyframes([{offset:0,transform:"translateX(2px) scale(0)"},{offset:.3,transform:"translateX(2px) scale(0)"},{offset:.55,transform:"translateX(-1.5px) scale(1)"},{offset:1,transform:"translateX(-1.5px) scale(1)"}]);o.addAnimation([l,d])}return o.addAnimation([s,u,c])},Ei=function(e,t){var n=t.clientHeight,r=(0,wt.c)().addElement(e).keyframes([{offset:0,transform:"scale(0) translateY(-".concat(n,"px)")},{offset:1,transform:"scale(1) translateY(100px)"}]);return Ti(e).addAnimation([r])},Ni=function(e,t){var n=t.clientHeight,r=(0,wt.c)().addElement(e).keyframes([{offset:0,transform:"translateY(-".concat(n,"px)")},{offset:1,transform:"translateY(100px)"}]);return Ti(e).addAnimation([r])},Ci=function(e){return(0,wt.c)().duration(125).addElement(e).fromTo("transform","translateY(var(--ion-pulling-refresher-translate, 100px))","translateY(0px)")},Zi=function(e,t,n){(0,Ee.Iu)((function(){e.forEach((function(e,r){var a=r*(1/t),i=1-a,o=n-a,s=(0,qe.h)(0,o/i,1);e.style.setProperty("opacity",s.toString())}))}))},_i=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200;if(!e)return Promise.resolve();var r=(0,qe.t)(e,n);return(0,Ee.Iu)((function(){e.style.setProperty("transition","".concat(n,"ms all ease-out")),void 0===t?e.style.removeProperty("transform"):e.style.setProperty("transform","translate3d(0px, ".concat(t,", 0px)"))})),r},Ai=function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t,n){var r,a,i;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.querySelector("ion-refresher-content")){e.next=3;break}return e.abrupt("return",Promise.resolve(!1));case 3:return e.next=5,new Promise((function(e){return(0,qe.c)(r,e)}));case 5:return a=t.querySelector("ion-refresher-content .refresher-pulling ion-spinner"),i=t.querySelector("ion-refresher-content .refresher-refreshing ion-spinner"),e.abrupt("return",null!==a&&null!==i&&("ios"===n&&Re("mobile")&&void 0!==t.style.webkitOverflowScrolling||"md"===n));case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();Ee.mv;Ee.mv;Ee.mv;Ee.mv;var Ri=function(e){return e.$ionIndex},Di=function(e,t){for(var n;e;){if((n=e.parentElement)===t)return e;e=n}},Oi=60,Li=10,Fi="reorder-selected",Mi=function(e,t,n){var r=e[t];return e.splice(t,1),e.splice(n,0,r),e.slice()};var Pi=(0,Ee.GH)(function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(){var e;return(0,Se.Z)(this,n),(e=t.call(this)).__registerHost(),e.__attachShadow(),e}return(0,Te.Z)(n,[{key:"render",value:function(){return(0,Ee.h)(Ee.AA,{class:je(this)},(0,Ee.h)("slot",null))}}],[{key:"style",get:function(){return":host{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}"}}]),n}(Ee.mv),[1,"ion-row"]);var zi=function(){if("undefined"!==typeof customElements){["ion-row"].forEach((function(e){if("ion-row"===e)customElements.get(e)||customElements.define(e,Pi)}))}};Ee.mv;Ee.mv;var Bi=0;Ee.mv;var Vi=n(7909),Ui=function(e,t){var n,r,a=function(e,r,a){if("undefined"!==typeof document){var s=document.elementFromPoint(e,r);s&&t(s)?s!==n&&(o(),i(s,a)):o()}},i=function(e,t){n=e,r||(r=n);var a=n;(0,Ee.Iu)((function(){return a.classList.add("ion-activated")})),t()},o=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(n){var t=n;(0,Ee.Iu)((function(){return t.classList.remove("ion-activated")})),e&&r!==n&&n.click(),n=void 0}};return(0,Vi.createGesture)({el:e,gestureName:"buttonActiveDrag",threshold:0,onStart:function(e){return a(e.currentX,e.currentY,Ar)},onMove:function(e){return a(e.currentX,e.currentY,Rr)},onEnd:function(){o(!0),Dr(),r=void 0}})},Wi=function(e){var t=(0,wt.c)(),n=(0,wt.c)(),r=(0,wt.c)();return n.addElement(e.querySelector("ion-backdrop")).fromTo("opacity",.01,"var(--backdrop-opacity)").beforeStyles({"pointer-events":"none"}).afterClearStyles(["pointer-events"]),r.addElement(e.querySelector(".action-sheet-wrapper")).fromTo("transform","translateY(100%)","translateY(0%)"),t.addElement(e).easing("cubic-bezier(.36,.66,.04,1)").duration(400).addAnimation([n,r])},ji=function(e){var t=(0,wt.c)(),n=(0,wt.c)(),r=(0,wt.c)();return n.addElement(e.querySelector("ion-backdrop")).fromTo("opacity","var(--backdrop-opacity)",0),r.addElement(e.querySelector(".action-sheet-wrapper")).fromTo("transform","translateY(0%)","translateY(100%)"),t.addElement(e).easing("cubic-bezier(.36,.66,.04,1)").duration(450).addAnimation([n,r])},Gi=function(e){var t=(0,wt.c)(),n=(0,wt.c)(),r=(0,wt.c)();return n.addElement(e.querySelector("ion-backdrop")).fromTo("opacity",.01,"var(--backdrop-opacity)").beforeStyles({"pointer-events":"none"}).afterClearStyles(["pointer-events"]),r.addElement(e.querySelector(".action-sheet-wrapper")).fromTo("transform","translateY(100%)","translateY(0%)"),t.addElement(e).easing("cubic-bezier(.36,.66,.04,1)").duration(400).addAnimation([n,r])},Hi=function(e){var t=(0,wt.c)(),n=(0,wt.c)(),r=(0,wt.c)();return n.addElement(e.querySelector("ion-backdrop")).fromTo("opacity","var(--backdrop-opacity)",0),r.addElement(e.querySelector(".action-sheet-wrapper")).fromTo("transform","translateY(0%)","translateY(100%)"),t.addElement(e).easing("cubic-bezier(.36,.66,.04,1)").duration(450).addAnimation([n,r])},qi=(Ee.mv,function(e){return Object.assign((0,ye.Z)({"action-sheet-button":!0,"ion-activatable":!0,"ion-focusable":!0},"action-sheet-".concat(e.role),void 0!==e.role),Qt(e.cssClass))});var $i=function(e){var t=(0,wt.c)(),n=(0,wt.c)(),r=(0,wt.c)();return n.addElement(e.querySelector("ion-backdrop")).fromTo("opacity",.01,"var(--backdrop-opacity)").beforeStyles({"pointer-events":"none"}).afterClearStyles(["pointer-events"]),r.addElement(e.querySelector(".alert-wrapper")).keyframes([{offset:0,opacity:"0.01",transform:"scale(1.1)"},{offset:1,opacity:"1",transform:"scale(1)"}]),t.addElement(e).easing("ease-in-out").duration(200).addAnimation([n,r])},Ki=function(e){var t=(0,wt.c)(),n=(0,wt.c)(),r=(0,wt.c)();return n.addElement(e.querySelector("ion-backdrop")).fromTo("opacity","var(--backdrop-opacity)",0),r.addElement(e.querySelector(".alert-wrapper")).keyframes([{offset:0,opacity:.99,transform:"scale(1)"},{offset:1,opacity:0,transform:"scale(0.9)"}]),t.addElement(e).easing("ease-in-out").duration(200).addAnimation([n,r])},Xi=function(e){var t=(0,wt.c)(),n=(0,wt.c)(),r=(0,wt.c)();return n.addElement(e.querySelector("ion-backdrop")).fromTo("opacity",.01,"var(--backdrop-opacity)").beforeStyles({"pointer-events":"none"}).afterClearStyles(["pointer-events"]),r.addElement(e.querySelector(".alert-wrapper")).keyframes([{offset:0,opacity:"0.01",transform:"scale(0.9)"},{offset:1,opacity:"1",transform:"scale(1)"}]),t.addElement(e).easing("ease-in-out").duration(150).addAnimation([n,r])},Yi=function(e){var t=(0,wt.c)(),n=(0,wt.c)(),r=(0,wt.c)();return n.addElement(e.querySelector("ion-backdrop")).fromTo("opacity","var(--backdrop-opacity)",0),r.addElement(e.querySelector(".alert-wrapper")).fromTo("opacity",.99,0),t.addElement(e).easing("ease-in-out").duration(150).addAnimation([n,r])},Qi=(Ee.mv,function(e){var t,n,r;return Object.assign(Object.assign({"alert-input":!0,"alert-input-disabled":(null!==(n=null===(t=e.attributes)||void 0===t?void 0:t.disabled)&&void 0!==n?n:e.disabled)||!1},Qt(e.cssClass)),Qt(e.attributes?null===(r=e.attributes.class)||void 0===r?void 0:r.toString():""))}),Ji=function(e){return Object.assign((0,ye.Z)({"alert-button":!0,"ion-focusable":!0,"ion-activatable":!0},"alert-button-role-".concat(e.role),void 0!==e.role),Qt(e.cssClass))};Ee.mv;var eo=function(e,t,n){if("undefined"!==typeof MutationObserver){var r=new MutationObserver((function(e){n(to(e,t))}));return r.observe(e,{childList:!0,subtree:!0}),r}},to=function(e,t){var n;return e.forEach((function(e){for(var r=0;r<e.addedNodes.length;r++)n=no(e.addedNodes[r],t)||n})),n},no=function(e,t){if(1===e.nodeType)return(e.tagName===t.toUpperCase()?[e]:Array.from(e.querySelectorAll(t))).find((function(t){return t.value===e.value}))},ro=(Ee.mv,function(e,t,n){return void 0!==e&&(Array.isArray(e)?e.some((function(e){return oo(e,t,n)})):oo(e,t,n))}),ao=function(e){var t=e.value;return void 0===t?e.textContent||"":t},io=function(e){if(null!=e)return Array.isArray(e)?e.join(","):e.toString()},oo=function(e,t,n){return"function"===typeof n?n(e,t):"string"===typeof n?e[n]===t[n]:Array.isArray(t)?t.includes(e):e===t},so=function(e,t,n){return void 0===t?"":Array.isArray(t)?t.map((function(t){return uo(e,t,n)})).filter((function(e){return null!==e})).join(", "):uo(e,t,n)||""},uo=function(e,t,n){var r=e.find((function(e){return oo(t,ao(e),n)}));return r?r.textContent:null},co=0,lo="select-interface-option";Ee.mv;var fo=0;Ee.mv;Ee.mv;Ee.mv;var ho=function(e){return Promise.all(Array.from(e.querySelectorAll("ion-slide")).map((function(e){return new Promise((function(t){return(0,qe.c)(e,t)}))})))};var po="split-pane-main",vo="split-pane-side",mo={xs:"(min-width: 0px)",sm:"(min-width: 576px)",md:"(min-width: 768px)",lg:"(min-width: 992px)",xl:"(min-width: 1200px)",never:""},go=(Ee.mv,function(e,t){var n,r;t?(n=po,r=vo):(n=vo,r=po);var a=e.classList;a.add(n),a.remove(r)});Ee.mv;var yo=(0,Ee.GH)(function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(){var e;return(0,Se.Z)(this,n),(e=t.call(this)).__registerHost(),e.__attachShadow(),e}return(0,Te.Z)(n,[{key:"render",value:function(){var e=je(this);return(0,Ee.h)(Ee.AA,{class:Yt(this.color,(0,ye.Z)({},e,!0))},(0,Ee.h)("slot",null))}}],[{key:"style",get:function(){return":host(.ion-color){color:var(--ion-color-base)}"}}]),n}(Ee.mv),[1,"ion-text",{color:[513]}]);var bo=function(){if("undefined"!==typeof customElements){["ion-text"].forEach((function(e){if("ion-text"===e)customElements.get(e)||customElements.define(e,yo)}))}},ko=(Ee.mv,0);Ee.mv;var wo=(0,Ee.GH)(function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(){var e;return(0,Se.Z)(this,n),(e=t.call(this)).__registerHost(),e.__attachShadow(),e.ionStyle=(0,Ee.yM)((0,we.Z)(e),"ionStyle",7),e}return(0,Te.Z)(n,[{key:"sizeChanged",value:function(){this.emitStyle()}},{key:"connectedCallback",value:function(){this.emitStyle()}},{key:"emitStyle",value:function(){var e=this.getSize();this.ionStyle.emit((0,ye.Z)({},"title-".concat(e),!0))}},{key:"getSize",value:function(){return void 0!==this.size?this.size:"default"}},{key:"render",value:function(){var e,t=je(this),n=this.getSize();return(0,Ee.h)(Ee.AA,{class:Yt(this.color,(e={},(0,ye.Z)(e,t,!0),(0,ye.Z)(e,"title-".concat(n),!0),(0,ye.Z)(e,"title-rtl","rtl"===document.dir),e))},(0,Ee.h)("div",{class:"toolbar-title"},(0,Ee.h)("slot",null)))}},{key:"el",get:function(){return this}}],[{key:"watchers",get:function(){return{size:["sizeChanged"]}}},{key:"style",get:function(){return{ios:":host{--color:initial;display:-ms-flexbox;display:flex;-ms-flex:1;flex:1;-ms-flex-align:center;align-items:center;-webkit-transform:translateZ(0);transform:translateZ(0);color:var(--color)}:host(.ion-color){color:var(--ion-color-base)}.toolbar-title{display:block;width:100%;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;pointer-events:auto}:host(.title-small) .toolbar-title{white-space:normal}:host{left:0;top:0;padding-left:90px;padding-right:90px;padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);position:absolute;width:100%;height:100%;-webkit-transform:translateZ(0);transform:translateZ(0);font-size:17px;font-weight:600;text-align:center;-webkit-box-sizing:border-box;box-sizing:border-box;pointer-events:none}:host-context([dir=rtl]){left:unset;right:unset;right:0}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){:host{padding-left:unset;padding-right:unset;-webkit-padding-start:90px;padding-inline-start:90px;-webkit-padding-end:90px;padding-inline-end:90px}}:host(.title-small){padding-left:9px;padding-right:9px;padding-top:6px;padding-bottom:16px;position:relative;font-size:13px;font-weight:normal}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){:host(.title-small){padding-left:unset;padding-right:unset;-webkit-padding-start:9px;padding-inline-start:9px;-webkit-padding-end:9px;padding-inline-end:9px}}:host(.title-large){padding-left:16px;padding-right:16px;padding-top:0;padding-bottom:0;-webkit-transform-origin:left center;transform-origin:left center;bottom:0;-ms-flex-align:end;align-items:flex-end;min-width:100%;padding-bottom:6px;font-size:34px;font-weight:700;text-align:start}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){:host(.title-large){padding-left:unset;padding-right:unset;-webkit-padding-start:16px;padding-inline-start:16px;-webkit-padding-end:16px;padding-inline-end:16px}}:host(.title-large.title-rtl){-webkit-transform-origin:right center;transform-origin:right center}:host(.title-large.ion-cloned-element){--color:var(--ion-text-color, #000)}:host(.title-large) .toolbar-title{-webkit-transform-origin:inherit;transform-origin:inherit}:host-context([dir=rtl]):host(.title-large) .toolbar-title,:host-context([dir=rtl]).title-large .toolbar-title{-webkit-transform-origin:calc(100% - inherit);transform-origin:calc(100% - inherit)}",md:":host{--color:initial;display:-ms-flexbox;display:flex;-ms-flex:1;flex:1;-ms-flex-align:center;align-items:center;-webkit-transform:translateZ(0);transform:translateZ(0);color:var(--color)}:host(.ion-color){color:var(--ion-color-base)}.toolbar-title{display:block;width:100%;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;pointer-events:auto}:host(.title-small) .toolbar-title{white-space:normal}:host{padding-left:20px;padding-right:20px;padding-top:0;padding-bottom:0;font-size:20px;font-weight:500;letter-spacing:0.0125em}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){:host{padding-left:unset;padding-right:unset;-webkit-padding-start:20px;padding-inline-start:20px;-webkit-padding-end:20px;padding-inline-end:20px}}:host(.title-small){width:100%;height:100%;font-size:15px;font-weight:normal}"}}}]),n}(Ee.mv),[33,"ion-title",{color:[513],size:[1]}]);var xo=function(){if("undefined"!==typeof customElements){["ion-title"].forEach((function(e){if("ion-title"===e)customElements.get(e)||customElements.define(e,wo)}))}},Io=(Ee.mv,function(e,t,n,r){return t?!e&&r>n||e&&-r<n:!e&&-r<n||e&&r>n}),So=0;var To=(0,Ee.GH)(function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(){var e;return(0,Se.Z)(this,n),(e=t.call(this)).__registerHost(),e.__attachShadow(),e.childrenStyles=new Map,e}return(0,Te.Z)(n,[{key:"componentWillLoad",value:function(){var e=Array.from(this.el.querySelectorAll("ion-buttons")),t=e.find((function(e){return"start"===e.slot}));t&&t.classList.add("buttons-first-slot");var n=e.reverse(),r=n.find((function(e){return"end"===e.slot}))||n.find((function(e){return"primary"===e.slot}))||n.find((function(e){return"secondary"===e.slot}));r&&r.classList.add("buttons-last-slot")}},{key:"childrenStyle",value:function(e){e.stopPropagation();var t=e.target.tagName,n=e.detail,r={},a=this.childrenStyles.get(t)||{},i=!1;Object.keys(n).forEach((function(e){var t="toolbar-".concat(e),o=n[e];o!==a[t]&&(i=!0),o&&(r[t]=!0)})),i&&(this.childrenStyles.set(t,r),(0,Ee.xE)(this))}},{key:"render",value:function(){var e,t=je(this),n={};return this.childrenStyles.forEach((function(e){Object.assign(n,e)})),(0,Ee.h)(Ee.AA,{class:Object.assign(Object.assign({},n),Yt(this.color,(e={},(0,ye.Z)(e,t,!0),(0,ye.Z)(e,"in-toolbar",Xt("ion-toolbar",this.el)),e)))},(0,Ee.h)("div",{class:"toolbar-background"}),(0,Ee.h)("div",{class:"toolbar-container"},(0,Ee.h)("slot",{name:"start"}),(0,Ee.h)("slot",{name:"secondary"}),(0,Ee.h)("div",{class:"toolbar-content"},(0,Ee.h)("slot",null)),(0,Ee.h)("slot",{name:"primary"}),(0,Ee.h)("slot",{name:"end"})))}},{key:"el",get:function(){return this}}],[{key:"style",get:function(){return{ios:":host{--border-width:0;--border-style:solid;--opacity:1;--opacity-scale:1;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;padding-left:var(--ion-safe-area-left);padding-right:var(--ion-safe-area-right);display:block;position:relative;width:100%;color:var(--color);font-family:var(--ion-font-family, inherit);contain:content;z-index:10;-webkit-box-sizing:border-box;box-sizing:border-box}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){:host{padding-left:unset;padding-right:unset;-webkit-padding-start:var(--ion-safe-area-left);padding-inline-start:var(--ion-safe-area-left);-webkit-padding-end:var(--ion-safe-area-right);padding-inline-end:var(--ion-safe-area-right)}}:host(.ion-color){color:var(--ion-color-contrast)}:host(.ion-color) .toolbar-background{background:var(--ion-color-base)}.toolbar-container{padding-left:var(--padding-start);padding-right:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:row;flex-direction:row;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between;width:100%;min-height:var(--min-height);contain:content;overflow:hidden;z-index:10;-webkit-box-sizing:border-box;box-sizing:border-box}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){.toolbar-container{padding-left:unset;padding-right:unset;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end)}}.toolbar-background{left:0;right:0;top:0;bottom:0;position:absolute;-webkit-transform:translateZ(0);transform:translateZ(0);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);background:var(--background);contain:strict;opacity:calc(var(--opacity) * var(--opacity-scale));z-index:-1;pointer-events:none}::slotted(ion-progress-bar){left:0;right:0;bottom:0;position:absolute}:host{--background:var(--ion-toolbar-background, var(--ion-color-step-50, #f7f7f7));--color:var(--ion-toolbar-color, var(--ion-text-color, #000));--border-color:var(--ion-toolbar-border-color, var(--ion-border-color, var(--ion-color-step-150, rgba(0, 0, 0, 0.2))));--padding-top:3px;--padding-bottom:3px;--padding-start:4px;--padding-end:4px;--min-height:44px}.toolbar-content{-ms-flex:1;flex:1;-ms-flex-order:4;order:4;min-width:0}:host(.toolbar-segment) .toolbar-content{display:-ms-inline-flexbox;display:inline-flex}:host(.toolbar-searchbar) .toolbar-container{padding-top:0;padding-bottom:0}:host(.toolbar-searchbar) ::slotted(*){-ms-flex-item-align:start;align-self:start}:host(.toolbar-searchbar) ::slotted(ion-chip){margin-top:3px}:host(.toolbar-searchbar) ::slotted(ion-back-button){height:38px}::slotted(ion-buttons){min-height:38px}::slotted([slot=start]){-ms-flex-order:2;order:2}::slotted([slot=secondary]){-ms-flex-order:3;order:3}::slotted([slot=primary]){-ms-flex-order:5;order:5;text-align:end}::slotted([slot=end]){-ms-flex-order:6;order:6;text-align:end}:host(.toolbar-title-large) .toolbar-container{-ms-flex-wrap:wrap;flex-wrap:wrap;-ms-flex-align:start;align-items:flex-start}:host(.toolbar-title-large) .toolbar-content ion-title{-ms-flex:1;flex:1;-ms-flex-order:8;order:8;min-width:100%}",md:":host{--border-width:0;--border-style:solid;--opacity:1;--opacity-scale:1;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;padding-left:var(--ion-safe-area-left);padding-right:var(--ion-safe-area-right);display:block;position:relative;width:100%;color:var(--color);font-family:var(--ion-font-family, inherit);contain:content;z-index:10;-webkit-box-sizing:border-box;box-sizing:border-box}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){:host{padding-left:unset;padding-right:unset;-webkit-padding-start:var(--ion-safe-area-left);padding-inline-start:var(--ion-safe-area-left);-webkit-padding-end:var(--ion-safe-area-right);padding-inline-end:var(--ion-safe-area-right)}}:host(.ion-color){color:var(--ion-color-contrast)}:host(.ion-color) .toolbar-background{background:var(--ion-color-base)}.toolbar-container{padding-left:var(--padding-start);padding-right:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:row;flex-direction:row;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between;width:100%;min-height:var(--min-height);contain:content;overflow:hidden;z-index:10;-webkit-box-sizing:border-box;box-sizing:border-box}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){.toolbar-container{padding-left:unset;padding-right:unset;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end)}}.toolbar-background{left:0;right:0;top:0;bottom:0;position:absolute;-webkit-transform:translateZ(0);transform:translateZ(0);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);background:var(--background);contain:strict;opacity:calc(var(--opacity) * var(--opacity-scale));z-index:-1;pointer-events:none}::slotted(ion-progress-bar){left:0;right:0;bottom:0;position:absolute}:host{--background:var(--ion-toolbar-background, var(--ion-background-color, #fff));--color:var(--ion-toolbar-color, var(--ion-text-color, #424242));--border-color:var(--ion-toolbar-border-color, var(--ion-border-color, var(--ion-color-step-150, #c1c4cd)));--padding-top:0;--padding-bottom:0;--padding-start:0;--padding-end:0;--min-height:56px}.toolbar-content{-ms-flex:1;flex:1;-ms-flex-order:3;order:3;min-width:0;max-width:100%}::slotted(.buttons-first-slot){margin-left:4px}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){::slotted(.buttons-first-slot){margin-left:unset;-webkit-margin-start:4px;margin-inline-start:4px}}::slotted(.buttons-last-slot){margin-right:4px}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){::slotted(.buttons-last-slot){margin-right:unset;-webkit-margin-end:4px;margin-inline-end:4px}}::slotted([slot=start]){-ms-flex-order:2;order:2}::slotted([slot=secondary]){-ms-flex-order:4;order:4}::slotted([slot=primary]){-ms-flex-order:5;order:5;text-align:end}::slotted([slot=end]){-ms-flex-order:6;order:6;text-align:end}"}}}]),n}(Ee.mv),[33,"ion-toolbar",{color:[513]},[[0,"ionStyle","childrenStyle"]]]);var Eo=function(){if("undefined"!==typeof customElements){["ion-toolbar"].forEach((function(e){if("ion-toolbar"===e)customElements.get(e)||customElements.define(e,To)}))}},No="item",Co="header",Zo="footer",_o=function(e,t){var n=Ao(e,t);return n&&null!==e.ownerDocument?e.ownerDocument.importNode(n.content,!0).children[0]:null},Ao=function(e,t){switch(t){case No:return e.querySelector("template:not([name])");case Co:return e.querySelector("template[name=header]");case Zo:return e.querySelector("template[name=footer]")}},Ro=function(e,t){var n=e.length>0?e[e.length-1].index:0;return 0===t?0:t===n+1?e.length:e.findIndex((function(e){return e.index===t}))},Do=function(e,t,n){if(0===n&&t.length>=e.length)return t;for(var r=0;r<t.length;r++)e[r+n]=t[r];return e},Oo=function(e,t,n,r,a,i,o,s,u,c,l,d){for(var f=[],h=d+l,p=l;p<h;p++){var v=e[p];if(a){var m=a(v,p,e);null!=m&&f.push({i:c++,type:Co,value:m,index:p,height:n?n(m,p):o,reads:n?0:2,visible:!!n})}if(f.push({i:c++,type:No,value:v,index:p,height:t?t(v,p):u,reads:t?0:2,visible:!!t}),i){var g=i(v,p,e);null!=g&&f.push({i:c++,type:Zo,value:g,index:p,height:r?r(g,p):s,reads:r?0:2,visible:!!r})}}return f},Lo=(Ee.mv,function(e,t,n){var r=e.dom;return n.map(t,(function(e,t){var n=r[t],a=e.vattrs||{},i=a.class||"";return i+="virtual-item ",n.visible||(i+="virtual-loading"),Object.assign(Object.assign({},e),{vattrs:Object.assign(Object.assign({},a),{class:i,style:Object.assign(Object.assign({},a.style),{transform:"translate3d(0,".concat(n.top,"px,0)")})})})}))});Ee.mv;var Fo=Er,Mo=(0,Ee.GH)(function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(){var e;return(0,Se.Z)(this,n),(e=t.call(this)).__registerHost(),e.__attachShadow(),e.inheritedAriaAttributes={},e.button=!1,e.type="button",e.disabled=!1,e.routerDirection="forward",e}return(0,Te.Z)(n,[{key:"componentWillLoad",value:function(){this.inheritedAriaAttributes=(0,qe.d)(this.el,["aria-label"])}},{key:"isClickable",value:function(){return void 0!==this.href||this.button}},{key:"renderCard",value:function(e){var t=this.isClickable();if(!t)return[(0,Ee.h)("slot",null)];var n=this.href,r=this.routerAnimation,a=this.routerDirection,i=this.inheritedAriaAttributes,o=t?void 0===n?"button":"a":"div",s="button"===o?{type:this.type}:{download:this.download,href:this.href,rel:this.rel,target:this.target};return(0,Ee.h)(o,Object.assign({},s,i,{class:"card-native",part:"native",disabled:this.disabled,onClick:function(e){return en(n,e,a,r)}}),(0,Ee.h)("slot",null),t&&"md"===e&&(0,Ee.h)("ion-ripple-effect",null))}},{key:"render",value:function(){var e,t=je(this);return(0,Ee.h)(Ee.AA,{class:Yt(this.color,(e={},(0,ye.Z)(e,t,!0),(0,ye.Z)(e,"card-disabled",this.disabled),(0,ye.Z)(e,"ion-activatable",this.isClickable()),e))},this.renderCard(t))}},{key:"el",get:function(){return this}}],[{key:"style",get:function(){return{ios:":host{--ion-safe-area-left:0px;--ion-safe-area-right:0px;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:block;position:relative;background:var(--background);color:var(--color);font-family:var(--ion-font-family, inherit);contain:content;overflow:hidden}:host(.ion-color){background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(.card-disabled){cursor:default;opacity:0.3;pointer-events:none}.card-native{font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;display:block;width:100%;min-height:var(--min-height);-webkit-transition:var(--transition);transition:var(--transition);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);outline:none;background:inherit}.card-native::-moz-focus-inner{border:0}button,a{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-user-drag:none}ion-ripple-effect{color:var(--ripple-color)}:host{--background:var(--ion-card-background, var(--ion-item-background, var(--ion-background-color, #fff)));--color:var(--ion-card-color, var(--ion-item-color, var(--ion-color-step-600, #666666)));margin-left:16px;margin-right:16px;margin-top:24px;margin-bottom:24px;border-radius:8px;-webkit-transition:-webkit-transform 500ms cubic-bezier(0.12, 0.72, 0.29, 1);transition:-webkit-transform 500ms cubic-bezier(0.12, 0.72, 0.29, 1);transition:transform 500ms cubic-bezier(0.12, 0.72, 0.29, 1);transition:transform 500ms cubic-bezier(0.12, 0.72, 0.29, 1), -webkit-transform 500ms cubic-bezier(0.12, 0.72, 0.29, 1);font-size:14px;-webkit-box-shadow:0 4px 16px rgba(0, 0, 0, 0.12);box-shadow:0 4px 16px rgba(0, 0, 0, 0.12)}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){:host{margin-left:unset;margin-right:unset;-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:16px;margin-inline-end:16px}}:host(.ion-activated){-webkit-transform:scale3d(0.97, 0.97, 1);transform:scale3d(0.97, 0.97, 1)}",md:":host{--ion-safe-area-left:0px;--ion-safe-area-right:0px;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:block;position:relative;background:var(--background);color:var(--color);font-family:var(--ion-font-family, inherit);contain:content;overflow:hidden}:host(.ion-color){background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(.card-disabled){cursor:default;opacity:0.3;pointer-events:none}.card-native{font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;display:block;width:100%;min-height:var(--min-height);-webkit-transition:var(--transition);transition:var(--transition);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);outline:none;background:inherit}.card-native::-moz-focus-inner{border:0}button,a{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-user-drag:none}ion-ripple-effect{color:var(--ripple-color)}:host{--background:var(--ion-card-background, var(--ion-item-background, var(--ion-background-color, #fff)));--color:var(--ion-card-color, var(--ion-item-color, var(--ion-color-step-550, #737373)));margin-left:10px;margin-right:10px;margin-top:10px;margin-bottom:10px;border-radius:4px;font-size:14px;-webkit-box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12);box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12)}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){:host{margin-left:unset;margin-right:unset;-webkit-margin-start:10px;margin-inline-start:10px;-webkit-margin-end:10px;margin-inline-end:10px}}"}}}]),n}(Ee.mv),[33,"ion-card",{color:[513],button:[4],type:[1],disabled:[4],download:[1],href:[1],rel:[1],routerDirection:[1,"router-direction"],routerAnimation:[16],target:[1]}]);var Po=Mo;Ee.mv;Ee.mv;Ee.mv;var zo=function(e){var t=(0,wt.c)(),n=(0,wt.c)(),r=(0,wt.c)();return n.addElement(e.querySelector("ion-backdrop")).fromTo("opacity",.01,"var(--backdrop-opacity)").beforeStyles({"pointer-events":"none"}).afterClearStyles(["pointer-events"]),r.addElement(e.querySelector(".loading-wrapper")).keyframes([{offset:0,opacity:.01,transform:"scale(1.1)"},{offset:1,opacity:1,transform:"scale(1)"}]),t.addElement(e).easing("ease-in-out").duration(200).addAnimation([n,r])},Bo=function(e){var t=(0,wt.c)(),n=(0,wt.c)(),r=(0,wt.c)();return n.addElement(e.querySelector("ion-backdrop")).fromTo("opacity","var(--backdrop-opacity)",0),r.addElement(e.querySelector(".loading-wrapper")).keyframes([{offset:0,opacity:.99,transform:"scale(1)"},{offset:1,opacity:0,transform:"scale(0.9)"}]),t.addElement(e).easing("ease-in-out").duration(200).addAnimation([n,r])},Vo=function(e){var t=(0,wt.c)(),n=(0,wt.c)(),r=(0,wt.c)();return n.addElement(e.querySelector("ion-backdrop")).fromTo("opacity",.01,"var(--backdrop-opacity)").beforeStyles({"pointer-events":"none"}).afterClearStyles(["pointer-events"]),r.addElement(e.querySelector(".loading-wrapper")).keyframes([{offset:0,opacity:.01,transform:"scale(1.1)"},{offset:1,opacity:1,transform:"scale(1)"}]),t.addElement(e).easing("ease-in-out").duration(200).addAnimation([n,r])},Uo=function(e){var t=(0,wt.c)(),n=(0,wt.c)(),r=(0,wt.c)();return n.addElement(e.querySelector("ion-backdrop")).fromTo("opacity","var(--backdrop-opacity)",0),r.addElement(e.querySelector(".loading-wrapper")).keyframes([{offset:0,opacity:.99,transform:"scale(1)"},{offset:1,opacity:0,transform:"scale(0.9)"}]),t.addElement(e).easing("ease-in-out").duration(200).addAnimation([n,r])};Ee.mv;var Wo=function(e,t){var n=(0,wt.c)(),r=(0,wt.c)(),a=(0,qe.g)(e).querySelector(".toast-wrapper");switch(r.addElement(a),t){case"top":r.fromTo("transform","translateY(-100%)","translateY(".concat("calc(10px + var(--ion-safe-area-top, 0px))",")"));break;case"middle":var i=Math.floor(e.clientHeight/2-a.clientHeight/2);a.style.top="".concat(i,"px"),r.fromTo("opacity",.01,1);break;default:r.fromTo("transform","translateY(100%)","translateY(".concat("calc(-10px - var(--ion-safe-area-bottom, 0px))",")"))}return n.easing("cubic-bezier(.155,1.105,.295,1.12)").duration(400).addAnimation(r)},jo=function(e,t){var n=(0,wt.c)(),r=(0,wt.c)(),a=(0,qe.g)(e).querySelector(".toast-wrapper");switch(r.addElement(a),t){case"top":r.fromTo("transform","translateY(".concat("calc(10px + var(--ion-safe-area-top, 0px))",")"),"translateY(-100%)");break;case"middle":r.fromTo("opacity",.99,0);break;default:r.fromTo("transform","translateY(".concat("calc(-10px - var(--ion-safe-area-bottom, 0px))",")"),"translateY(100%)")}return n.easing("cubic-bezier(.36,.66,.04,1)").duration(300).addAnimation(r)},Go=function(e,t){var n=(0,wt.c)(),r=(0,wt.c)(),a=(0,qe.g)(e).querySelector(".toast-wrapper");switch(r.addElement(a),t){case"top":a.style.top="calc(8px + var(--ion-safe-area-top, 0px))",r.fromTo("opacity",.01,1);break;case"middle":var i=Math.floor(e.clientHeight/2-a.clientHeight/2);a.style.top="".concat(i,"px"),r.fromTo("opacity",.01,1);break;default:a.style.bottom="calc(8px + var(--ion-safe-area-bottom, 0px))",r.fromTo("opacity",.01,1)}return n.easing("cubic-bezier(.36,.66,.04,1)").duration(400).addAnimation(r)},Ho=function(e){var t=(0,wt.c)(),n=(0,wt.c)(),r=(0,qe.g)(e).querySelector(".toast-wrapper");return n.addElement(r).fromTo("opacity",.99,0),t.easing("cubic-bezier(.36,.66,.04,1)").duration(300).addAnimation(n)},qo=(Ee.mv,function(e){var t;return Object.assign((t={"toast-button":!0,"toast-button-icon-only":void 0!==e.icon&&void 0===e.text},(0,ye.Z)(t,"toast-button-".concat(e.role),void 0!==e.role),(0,ye.Z)(t,"ion-focusable",!0),(0,ye.Z)(t,"ion-activatable",!0),t),Qt(e.cssClass))});Ee.mv;var $o="picker-opt-selected",Ko=.97,Xo=90,Yo=150;var Qo=function(e){var t=(0,wt.c)(),n=(0,wt.c)(),r=(0,wt.c)();return n.addElement(e.querySelector("ion-backdrop")).fromTo("opacity",.01,"var(--backdrop-opacity)").beforeStyles({"pointer-events":"none"}).afterClearStyles(["pointer-events"]),r.addElement(e.querySelector(".picker-wrapper")).fromTo("transform","translateY(100%)","translateY(0%)"),t.addElement(e).easing("cubic-bezier(.36,.66,.04,1)").duration(400).addAnimation([n,r])},Jo=function(e){var t=(0,wt.c)(),n=(0,wt.c)(),r=(0,wt.c)();return n.addElement(e.querySelector("ion-backdrop")).fromTo("opacity","var(--backdrop-opacity)",.01),r.addElement(e.querySelector(".picker-wrapper")).fromTo("transform","translateY(0%)","translateY(100%)"),t.addElement(e).easing("cubic-bezier(.36,.66,.04,1)").duration(400).addAnimation([n,r])},es=(Ee.mv,function(e){var t;return t={},(0,ye.Z)(t,"picker-toolbar-".concat(e.role),void 0!==e.role),(0,ye.Z)(t,"picker-toolbar-button",!0),t}),ts=function(e){return Object.assign({"picker-button":!0,"ion-activatable":!0},Qt(e.cssClass))};var ns,rs=n(5573);!function(e){e.Dark="DARK",e.Light="LIGHT",e.Default="DEFAULT"}(ns||(ns={}));var as={getEngine:function(){var e;return(null===(e=null===fa.w||void 0===fa.w?void 0:fa.w.Capacitor)||void 0===e?void 0:e.isPluginAvailable("StatusBar"))&&(null===fa.w||void 0===fa.w?void 0:fa.w.Capacitor.Plugins.StatusBar)},supportsDefaultStatusBarStyle:function(){var e;return!!(null===(e=null===fa.w||void 0===fa.w?void 0:fa.w.Capacitor)||void 0===e?void 0:e.PluginHeaders)},setStyle:function(e){var t=this.getEngine();t&&t.setStyle(e)},getStyle:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){var t,n,r;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.getEngine()){e.next=3;break}return e.abrupt("return",ns.Default);case 3:return e.next=5,t.getInfo();case 5:return n=e.sent,r=n.style,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},is=function(e,t){if(1===t)return 0;var n=1/(1-t);return e*n+-t*n},os=function(){!fa.w||fa.w.innerWidth>=768||!as.supportsDefaultStatusBarStyle()||as.setStyle({style:ns.Dark})},ss=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ns.Default;!fa.w||fa.w.innerWidth>=768||!as.supportsDefaultStatusBarStyle()||as.setStyle({style:e})},us=function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t,n){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("function"===typeof t.canDismiss){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.canDismiss(void 0,kt);case 4:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:n.isRunning()?n.onFinish((function(){t.dismiss(void 0,"handler")}),{oneTimeCallback:!0}):t.dismiss(void 0,"handler");case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),cs=function(e){return.00255275*Math.pow(2.71828,-14.9619*e)-1.00255*Math.pow(2.71828,-.0380968*e)+1},ls=.93,ds=function(e,t,n,r){var a=.5,i=e.offsetHeight,o=!1,s=!1,u=null,c=null,l=!0,d=0,f=(0,Vi.createGesture)({el:e,gestureName:"modalSwipeToClose",gesturePriority:39,direction:"y",threshold:10,canStart:function(e){var t=e.event.target;if(null===t||!t.closest)return!0;if(u=(0,da.a)(t)){if((0,da.i)(u)){var n=(0,qe.g)(u);c=n.querySelector(".inner-scroll")}else c=u;return!!!u.querySelector("ion-refresher")&&0===c.scrollTop}return null===t.closest("ion-footer")},onStart:function(n){var r=n.deltaY;l=!u||!(0,da.i)(u)||u.scrollY,s=void 0!==e.canDismiss&&!0!==e.canDismiss,r>0&&u&&(0,da.d)(u),t.progressStart(!0,o?1:0)},onMove:function(e){e.deltaY>0&&u&&(0,da.d)(u);var r=e.deltaY/i,o=r>=0&&s,c=o?.2:.9999,l=o?cs(r/c):r,f=(0,qe.h)(1e-4,l,c);t.progressStep(f),f>=a&&d<a?ss(n):f<a&&d>=a&&os(),d=f},onEnd:function(n){var c=n.velocityY,d=n.deltaY/i,h=d>=0&&s,p=h?.2:.9999,v=h?cs(d/p):d,m=(0,qe.h)(1e-4,v,p),g=(n.deltaY+1e3*c)/i,y=!h&&g>=a,b=y?-.001:.001;y?(t.easing("cubic-bezier(0.32, 0.72, 0, 1)"),b+=Ga([0,0],[.32,.72],[0,1],[1,1],m)[0]):(t.easing("cubic-bezier(1, 0, 0.68, 0.28)"),b+=Ga([0,0],[1,0],[.68,.28],[1,1],m)[0]);var k=fs(y?d*i:(1-m)*i,c);o=y,f.enable(!1),u&&(0,da.r)(u,l),t.onFinish((function(){y||f.enable(!0)})).progressEnd(y?1:0,b,k),h&&m>p/4?us(e,t):y&&r()}});return f},fs=function(e,t){return(0,qe.h)(400,e/Math.abs(1.1*t),500)},hs=function(e){var t=e.currentBreakpoint,n=e.backdropBreakpoint,r=void 0===n||n<t,a=r?"calc(var(--backdrop-opacity) * ".concat(t,")"):"0",i=(0,wt.c)("backdropAnimation").fromTo("opacity",0,a);return r&&i.beforeStyles({"pointer-events":"none"}).afterClearStyles(["pointer-events"]),{wrapperAnimation:(0,wt.c)("wrapperAnimation").keyframes([{offset:0,opacity:1,transform:"translateY(100%)"},{offset:1,opacity:1,transform:"translateY(".concat(100-100*t,"%)")}]),backdropAnimation:i}},ps=function(e){var t=e.currentBreakpoint,n=e.backdropBreakpoint,r="calc(var(--backdrop-opacity) * ".concat(is(t,n),")"),a=[{offset:0,opacity:r},{offset:1,opacity:0}],i=[{offset:0,opacity:r},{offset:n,opacity:0},{offset:1,opacity:0}],o=(0,wt.c)("backdropAnimation").keyframes(0!==n?i:a);return{wrapperAnimation:(0,wt.c)("wrapperAnimation").keyframes([{offset:0,opacity:1,transform:"translateY(".concat(100-100*t,"%)")},{offset:1,opacity:1,transform:"translateY(100%)"}]),backdropAnimation:o}},vs=function(e,t){var n=t.presentingEl,r=t.currentBreakpoint,a=(0,qe.g)(e),i=void 0!==r?hs(t):{backdropAnimation:(0,wt.c)().fromTo("opacity",.01,"var(--backdrop-opacity)").beforeStyles({"pointer-events":"none"}).afterClearStyles(["pointer-events"]),wrapperAnimation:(0,wt.c)().fromTo("transform","translateY(100vh)","translateY(0vh)")},o=i.wrapperAnimation,s=i.backdropAnimation;s.addElement(a.querySelector("ion-backdrop")),o.addElement(a.querySelectorAll(".modal-wrapper, .modal-shadow")).beforeStyles({opacity:1});var u=(0,wt.c)("entering-base").addElement(e).easing("cubic-bezier(0.32,0.72,0,1)").duration(500).addAnimation(o);if(n){var c=window.innerWidth<768,l="ION-MODAL"===n.tagName&&void 0!==n.presentingElement,d=(0,qe.g)(n),f=(0,wt.c)().beforeStyles({transform:"translateY(0)","transform-origin":"top center",overflow:"hidden"}),h=document.body;if(c){var p=CSS.supports("width","max(0px, 1px)")?"max(30px, var(--ion-safe-area-top))":"30px",v=ls,m="translateY(".concat(l?"-10px":p,") scale(").concat(v,")");f.afterStyles({transform:m}).beforeAddWrite((function(){return h.style.setProperty("background-color","black")})).addElement(n).keyframes([{offset:0,filter:"contrast(1)",transform:"translateY(0px) scale(1)",borderRadius:"0px"},{offset:1,filter:"contrast(0.85)",transform:m,borderRadius:"10px 10px 0 0"}]),u.addAnimation(f)}else if(u.addAnimation(s),l){var g="translateY(-10px) scale(".concat(l?ls:1,")");f.afterStyles({transform:g}).addElement(d.querySelector(".modal-wrapper")).keyframes([{offset:0,filter:"contrast(1)",transform:"translateY(0) scale(1)"},{offset:1,filter:"contrast(0.85)",transform:g}]);var y=(0,wt.c)().afterStyles({transform:g}).addElement(d.querySelector(".modal-shadow")).keyframes([{offset:0,opacity:"1",transform:"translateY(0) scale(1)"},{offset:1,opacity:"0",transform:g}]);u.addAnimation([f,y])}else o.fromTo("opacity","0","1")}else u.addAnimation(s);return u},ms=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:500,r=t.presentingEl,a=t.currentBreakpoint,i=(0,qe.g)(e),o=void 0!==a?ps(t):{backdropAnimation:(0,wt.c)().fromTo("opacity","var(--backdrop-opacity)",0),wrapperAnimation:(0,wt.c)().fromTo("transform","translateY(0vh)","translateY(100vh)")},s=o.wrapperAnimation,u=o.backdropAnimation;u.addElement(i.querySelector("ion-backdrop")),s.addElement(i.querySelectorAll(".modal-wrapper, .modal-shadow")).beforeStyles({opacity:1});var c=(0,wt.c)("leaving-base").addElement(e).easing("cubic-bezier(0.32,0.72,0,1)").duration(n).addAnimation(s);if(r){var l=window.innerWidth<768,d="ION-MODAL"===r.tagName&&void 0!==r.presentingElement,f=(0,qe.g)(r),h=(0,wt.c)().beforeClearStyles(["transform"]).afterClearStyles(["transform"]).onFinish((function(e){1===e&&(r.style.setProperty("overflow",""),Array.from(p.querySelectorAll("ion-modal")).filter((function(e){return void 0!==e.presentingElement})).length<=1&&p.style.setProperty("background-color",""))})),p=document.body;if(l){var v=CSS.supports("width","max(0px, 1px)")?"max(30px, var(--ion-safe-area-top))":"30px",m=ls,g="translateY(".concat(d?"-10px":v,") scale(").concat(m,")");h.addElement(r).keyframes([{offset:0,filter:"contrast(0.85)",transform:g,borderRadius:"10px 10px 0 0"},{offset:1,filter:"contrast(1)",transform:"translateY(0px) scale(1)",borderRadius:"0px"}]),c.addAnimation(h)}else if(c.addAnimation(u),d){var y="translateY(-10px) scale(".concat(d?ls:1,")");h.addElement(f.querySelector(".modal-wrapper")).afterStyles({transform:"translate3d(0, 0, 0)"}).keyframes([{offset:0,filter:"contrast(0.85)",transform:y},{offset:1,filter:"contrast(1)",transform:"translateY(0) scale(1)"}]);var b=(0,wt.c)().addElement(f.querySelector(".modal-shadow")).afterStyles({transform:"translateY(0) scale(1)"}).keyframes([{offset:0,opacity:"0",transform:y},{offset:1,opacity:"1",transform:"translateY(0) scale(1)"}]);c.addAnimation([h,b])}else s.fromTo("opacity","1","0")}else c.addAnimation(u);return c},gs=function(e,t){var n=t.currentBreakpoint,r=(0,qe.g)(e),a=void 0!==n?hs(t):{backdropAnimation:(0,wt.c)().fromTo("opacity",.01,"var(--backdrop-opacity)").beforeStyles({"pointer-events":"none"}).afterClearStyles(["pointer-events"]),wrapperAnimation:(0,wt.c)().keyframes([{offset:0,opacity:.01,transform:"translateY(40px)"},{offset:1,opacity:1,transform:"translateY(0px)"}])},i=a.wrapperAnimation,o=a.backdropAnimation;return o.addElement(r.querySelector("ion-backdrop")),i.addElement(r.querySelector(".modal-wrapper")),(0,wt.c)().addElement(e).easing("cubic-bezier(0.36,0.66,0.04,1)").duration(280).addAnimation([o,i])},ys=function(e,t){var n=t.currentBreakpoint,r=(0,qe.g)(e),a=void 0!==n?ps(t):{backdropAnimation:(0,wt.c)().fromTo("opacity","var(--backdrop-opacity)",0),wrapperAnimation:(0,wt.c)().keyframes([{offset:0,opacity:.99,transform:"translateY(0px)"},{offset:1,opacity:0,transform:"translateY(40px)"}])},i=a.wrapperAnimation,o=a.backdropAnimation;return o.addElement(r.querySelector("ion-backdrop")),i.addElement(r.querySelector(".modal-wrapper")),(0,wt.c)().easing("cubic-bezier(0.47,0,0.745,0.715)").duration(200).addAnimation([o,i])},bs=(0,Ee.GH)(function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(){var e;return(0,Se.Z)(this,n),(e=t.call(this)).__registerHost(),e.__attachShadow(),e.didPresent=(0,Ee.yM)((0,we.Z)(e),"ionModalDidPresent",7),e.willPresent=(0,Ee.yM)((0,we.Z)(e),"ionModalWillPresent",7),e.willDismiss=(0,Ee.yM)((0,we.Z)(e),"ionModalWillDismiss",7),e.didDismiss=(0,Ee.yM)((0,we.Z)(e),"ionModalDidDismiss",7),e.ionBreakpointDidChange=(0,Ee.yM)((0,we.Z)(e),"ionBreakpointDidChange",7),e.didPresentShorthand=(0,Ee.yM)((0,we.Z)(e),"didPresent",7),e.willPresentShorthand=(0,Ee.yM)((0,we.Z)(e),"willPresent",7),e.willDismissShorthand=(0,Ee.yM)((0,we.Z)(e),"willDismiss",7),e.didDismissShorthand=(0,Ee.yM)((0,we.Z)(e),"didDismiss",7),e.modalIndex=ws++,e.coreDelegate=Pr(),e.isSheetModal=!1,e.inheritedAttributes={},e.inline=!1,e.gestureAnimationDismissing=!1,e.presented=!1,e.hasController=!1,e.keyboardClose=!0,e.backdropBreakpoint=0,e.handleBehavior="none",e.backdropDismiss=!0,e.showBackdrop=!0,e.animated=!0,e.swipeToClose=!1,e.isOpen=!1,e.keepContentsMounted=!1,e.configureTriggerInteraction=function(){var t=(0,we.Z)(e),n=t.trigger,r=t.el,a=t.destroyTriggerInteraction;if(a&&a(),void 0!==n){var i=void 0!==n?document.getElementById(n):null;if(i){e.destroyTriggerInteraction=function(e,t){var n=function(){t.present()};return e.addEventListener("click",n),function(){e.removeEventListener("click",n)}}(i,r)}else(0,_n.a)('A trigger element with the ID "'.concat(n,'" was not found in the DOM. The trigger element must be in the DOM when the "trigger" property is set on ion-modal.'),e.el)}},e.onHandleClick=function(){var t=(0,we.Z)(e),n=t.sheetTransition;"cycle"===t.handleBehavior&&void 0===n&&e.moveToNextBreakpoint()},e.onBackdropTap=function(){void 0===(0,we.Z)(e).sheetTransition&&e.dismiss(void 0,bt)},e.onLifecycle=function(t){var n=e.usersElement,r=ks[t.type];if(n&&r){var a=new CustomEvent(r,{bubbles:!1,cancelable:!1,detail:t.detail});n.dispatchEvent(a)}},e}return(0,Te.Z)(n,[{key:"onIsOpenChange",value:function(e,t){!0===e&&!1===t?this.present():!1===e&&!0===t&&this.dismiss()}},{key:"onTriggerChange",value:function(){this.configureTriggerInteraction()}},{key:"swipeToCloseChanged",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.gesture?this.gesture.enable(t):t&&this.initSwipeToClose();case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"breakpointsChanged",value:function(e){void 0!==e&&(this.sortedBreakpoints=e.sort((function(e,t){return e-t})))}},{key:"connectedCallback",value:function(){var e=this.configureTriggerInteraction,t=this.el;et(t),e()}},{key:"disconnectedCallback",value:function(){var e=this.destroyTriggerInteraction;e&&e()}},{key:"componentWillLoad",value:function(){var e=this.breakpoints,t=this.initialBreakpoint,n=this.swipeToClose,r=this.el;this.inheritedAttributes=(0,qe.d)(r,["aria-label","role"]),this.modalId=this.el.hasAttribute("id")?this.el.getAttribute("id"):"ion-modal-".concat(this.modalIndex),(this.isSheetModal=void 0!==e&&void 0!==t)&&(this.currentBreakpoint=this.initialBreakpoint),void 0===e||void 0===t||e.includes(t)||(0,_n.a)("Your breakpoints array must include the initialBreakpoint value."),n&&(0,_n.a)("swipeToClose has been deprecated in favor of canDismiss.\n\nIf you want a card modal to be swipeable, set canDismiss to `true`. In the next major release of Ionic, swipeToClose will be removed, and all card modals will be swipeable by default.")}},{key:"componentDidLoad",value:function(){var e=this;!0===this.isOpen&&(0,qe.r)((function(){return e.present()})),this.breakpointsChanged(this.breakpoints)}},{key:"getDelegate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.workingDelegate&&!e)return{delegate:this.workingDelegate,inline:this.inline};var t=this.el.parentNode,n=this.inline=null!==t&&!this.hasController;return{inline:n,delegate:this.workingDelegate=n?this.delegate||this.coreDelegate:this.delegate}}},{key:"checkCanDismiss",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t,n){var r;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==(r=this.canDismiss)){e.next=3;break}return e.abrupt("return",!0);case 3:if("function"!==typeof r){e.next=5;break}return e.abrupt("return",r(t,n));case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"present",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){var t,n,r,a,i=this;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.presented){e.next=2;break}return e.abrupt("return");case 2:if(void 0===this.currentTransition){e.next=5;break}return e.next=5,this.currentTransition;case 5:return this.currentBreakpoint=this.initialBreakpoint,t=this.getDelegate(!0),n=t.inline,r=t.delegate,e.next=9,Fr(r,this.el,this.component,["ion-page"],this.componentProps,n);case 9:return this.usersElement=e.sent,e.next=12,(0,zr.e)(this.usersElement);case 12:if((0,Ee.Iu)((function(){return i.el.classList.add("show-modal")})),this.currentTransition=ct(this,"modalEnter",vs,gs,{presentingEl:this.presentingElement,currentBreakpoint:this.initialBreakpoint,backdropBreakpoint:this.backdropBreakpoint}),"undefined"!==typeof window&&(this.keyboardOpenCallback=function(){i.gesture&&(i.gesture.enable(!1),(0,qe.r)((function(){i.gesture&&i.gesture.enable(!0)})))},window.addEventListener(rs.KEYBOARD_DID_OPEN,this.keyboardOpenCallback)),!(a=void 0!==this.presentingElement&&(this.swipeToClose||void 0!==this.canDismiss))||"ios"!==je(this)){e.next=21;break}return e.next=19,as.getStyle();case 19:this.statusBarStyle=e.sent,os();case 21:return e.next=23,this.currentTransition;case 23:this.isSheetModal?this.initSheetGesture():a&&this.initSwipeToClose(),this.currentTransition=void 0;case 25:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initSwipeToClose",value:function(){var e,t=this;if("ios"===je(this)){var n=this.el,r=this.leaveAnimation||Ce.get("modalLeave",ms),a=this.animation=r(n,{presentingEl:this.presentingElement});if((0,da.f)(n)){var i=null!==(e=this.statusBarStyle)&&void 0!==e?e:ns.Default;this.gesture=ds(n,a,i,(function(){t.gestureAnimationDismissing=!0,t.animation.onFinish((0,ke.Z)((0,be.Z)().mark((function e(){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.dismiss(void 0,kt);case 2:t.gestureAnimationDismissing=!1;case 3:case"end":return e.stop()}}),e)}))))})),this.gesture.enable(!0)}else(0,da.p)(n)}}},{key:"initSheetGesture",value:function(){var e=this,t=this.wrapperEl,n=this.initialBreakpoint,r=this.backdropBreakpoint;if(t&&void 0!==n){var a=this.enterAnimation||Ce.get("modalEnter",vs),i=this.animation=a(this.el,{presentingEl:this.presentingElement,currentBreakpoint:n,backdropBreakpoint:r});i.progressStart(!0,1);var o=function(e,t,n,r,a,i){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[],s=arguments.length>7?arguments[7]:void 0,u=arguments.length>8?arguments[8]:void 0,c=arguments.length>9?arguments[9]:void 0,l={WRAPPER_KEYFRAMES:[{offset:0,transform:"translateY(0%)"},{offset:1,transform:"translateY(100%)"}],BACKDROP_KEYFRAMES:0!==a?[{offset:0,opacity:"var(--backdrop-opacity)"},{offset:1-a,opacity:0},{offset:1,opacity:0}]:[{offset:0,opacity:"var(--backdrop-opacity)"},{offset:1,opacity:.01}]},d=e.querySelector("ion-content"),f=n.clientHeight,h=r,p=0,v=!1,m=i.childAnimations.find((function(e){return"wrapperAnimation"===e.id})),g=i.childAnimations.find((function(e){return"backdropAnimation"===e.id})),y=o[o.length-1],b=o[0],k=function(){e.style.setProperty("pointer-events","auto"),t.style.setProperty("pointer-events","auto"),e.classList.remove("ion-disable-focus-trap")},w=function(){e.style.setProperty("pointer-events","none"),t.style.setProperty("pointer-events","none"),e.classList.add("ion-disable-focus-trap")};m&&g&&(m.keyframes((0,me.Z)(l.WRAPPER_KEYFRAMES)),g.keyframes((0,me.Z)(l.BACKDROP_KEYFRAMES)),i.progressStart(!0,1-h),h>a?k():w()),d&&h!==y&&(d.scrollY=!1);var x=function(t){var n=t.breakpoint,r=t.canDismiss,s=t.breakpointOffset,f=r&&0===n,p=f?h:n,v=0!==p;return h=0,m&&g&&(m.keyframes([{offset:0,transform:"translateY(".concat(100*s,"%)")},{offset:1,transform:"translateY(".concat(100*(1-p),"%)")}]),g.keyframes([{offset:0,opacity:"calc(var(--backdrop-opacity) * ".concat(is(1-s,a),")")},{offset:1,opacity:"calc(var(--backdrop-opacity) * ".concat(is(p,a),")")}]),i.progressStep(0)),I.enable(!1),f?us(e,i):v||u(),new Promise((function(e){i.onFinish((function(){v?m&&g?(0,qe.r)((function(){m.keyframes((0,me.Z)(l.WRAPPER_KEYFRAMES)),g.keyframes((0,me.Z)(l.BACKDROP_KEYFRAMES)),i.progressStart(!0,1-p),c(h=p),d&&h===o[o.length-1]&&(d.scrollY=!0),h>a?k():w(),I.enable(!0),e()})):(I.enable(!0),e()):e()}),{oneTimeCallback:!0}).progressEnd(1,0,500)}))},I=(0,Vi.createGesture)({el:n,gestureName:"modalSheet",gesturePriority:40,direction:"y",threshold:10,canStart:function(e){var t=e.event.target.closest("ion-content");return 1!==(h=s())||!t},onStart:function(){v=void 0!==e.canDismiss&&!0!==e.canDismiss&&0===b,d&&(d.scrollY=!1),(0,qe.r)((function(){e.focus()})),i.progressStart(!0,1-h)},onMove:function(e){var t=1-h,n=o.length>1?1-o[1]:void 0,r=t+e.deltaY/f,a=void 0!==n&&r>=n&&v,s=a?.95:.9999,u=a&&void 0!==n?n+cs((r-n)/(s-n)):r;p=(0,qe.h)(1e-4,u,s),i.progressStep(p)},onEnd:function(e){var t=e.velocityY,n=(e.deltaY+350*t)/f,r=h-n,a=o.reduce((function(e,t){return Math.abs(t-r)<Math.abs(e-r)?t:e}));x({breakpoint:a,breakpointOffset:p,canDismiss:v})}});return{gesture:I,moveSheetToBreakpoint:x}}(this.el,this.backdropEl,t,n,r,i,this.sortedBreakpoints,(function(){var t;return null!==(t=e.currentBreakpoint)&&void 0!==t?t:0}),(function(){return e.sheetOnDismiss()}),(function(t){e.currentBreakpoint!==t&&(e.currentBreakpoint=t,e.ionBreakpointDidChange.emit({breakpoint:t}))})),s=o.gesture,u=o.moveSheetToBreakpoint;this.gesture=s,this.moveSheetToBreakpoint=u,this.gesture.enable(!0)}}},{key:"sheetOnDismiss",value:function(){var e=this;this.gestureAnimationDismissing=!0,this.animation.onFinish((0,ke.Z)((0,be.Z)().mark((function t(){return(0,be.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.currentBreakpoint=0,e.ionBreakpointDidChange.emit({breakpoint:e.currentBreakpoint}),t.next=4,e.dismiss(void 0,kt);case 4:e.gestureAnimationDismissing=!1;case 5:case"end":return t.stop()}}),t)}))))}},{key:"dismiss",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t,n){var r,a,i,o,s,u=this;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.gestureAnimationDismissing||n===kt){e.next=2;break}return e.abrupt("return",!1);case 2:if(e.t0="handler"!==n,!e.t0){e.next=7;break}return e.next=6,this.checkCanDismiss(t,n);case 6:e.t0=!e.sent;case 7:if(!e.t0){e.next=9;break}return e.abrupt("return",!1);case 9:if(void 0!==this.presentingElement&&(this.swipeToClose||void 0!==this.canDismiss)&&"ios"===je(this)&&ss(this.statusBarStyle),"undefined"!==typeof window&&this.keyboardOpenCallback&&(window.removeEventListener(rs.KEYBOARD_DID_OPEN,this.keyboardOpenCallback),this.keyboardOpenCallback=void 0),void 0===this.currentTransition){e.next=15;break}return e.next=15,this.currentTransition;case 15:return a=Ke.get(this)||[],this.currentTransition=dt(this,t,n,"modalLeave",ms,ys,{presentingEl:this.presentingElement,currentBreakpoint:null!==(r=this.currentBreakpoint)&&void 0!==r?r:this.initialBreakpoint,backdropBreakpoint:this.backdropBreakpoint}),e.next=19,this.currentTransition;case 19:if(!(i=e.sent)){e.next=28;break}return o=this.getDelegate(),s=o.delegate,e.next=24,Mr(s,this.usersElement);case 24:(0,Ee.Iu)((function(){return u.el.classList.remove("show-modal")})),this.animation&&this.animation.destroy(),this.gesture&&this.gesture.destroy(),a.forEach((function(e){return e.destroy()}));case 28:return this.currentBreakpoint=void 0,this.currentTransition=void 0,this.animation=void 0,e.abrupt("return",i);case 32:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onDidDismiss",value:function(){return pt(this.el,"ionModalDidDismiss")}},{key:"onWillDismiss",value:function(){return pt(this.el,"ionModalWillDismiss")}},{key:"setCurrentBreakpoint",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){var n,r,a,i;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isSheetModal){e.next=3;break}return(0,_n.a)("setCurrentBreakpoint is only supported on sheet modals."),e.abrupt("return");case 3:if(this.breakpoints.includes(t)){e.next=6;break}return(0,_n.a)("Attempted to set invalid breakpoint value ".concat(t,". Please double check that the breakpoint value is part of your defined breakpoints.")),e.abrupt("return");case 6:if(n=this.currentBreakpoint,r=this.moveSheetToBreakpoint,a=this.canDismiss,i=this.breakpoints,n!==t){e.next=9;break}return e.abrupt("return");case 9:if(!r){e.next=14;break}return this.sheetTransition=r({breakpoint:t,breakpointOffset:1-n,canDismiss:void 0!==a&&!0!==a&&0===i[0]}),e.next=13,this.sheetTransition;case 13:this.sheetTransition=void 0;case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getCurrentBreakpoint",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.currentBreakpoint);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"moveToNextBreakpoint",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){var t,n,r,a,i,o;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.breakpoints,n=this.currentBreakpoint,t&&null!=n){e.next=3;break}return e.abrupt("return",!1);case 3:return r=t.filter((function(e){return 0!==e})),a=r.indexOf(n),i=(a+1)%r.length,o=r[i],e.next=9,this.setCurrentBreakpoint(o);case 9:return e.abrupt("return",!0);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t=this,n=this.handle,r=this.isSheetModal,a=this.presentingElement,i=this.htmlAttributes,o=this.handleBehavior,s=this.inheritedAttributes,u=!1!==n&&r,c=je(this),l=this.modalId,d=void 0!==a&&"ios"===c,f="cycle"===o;return(0,Ee.h)(Ee.AA,Object.assign({"no-router":!0,tabindex:"-1"},i,{style:{zIndex:"".concat(2e4+this.overlayIndex)},class:Object.assign((e={},(0,ye.Z)(e,c,!0),(0,ye.Z)(e,"modal-default",!d&&!r),(0,ye.Z)(e,"modal-card",d),(0,ye.Z)(e,"modal-sheet",r),(0,ye.Z)(e,"overlay-hidden",!0),e),Qt(this.cssClass)),id:l,onIonBackdropTap:this.onBackdropTap,onIonModalDidPresent:this.onLifecycle,onIonModalWillPresent:this.onLifecycle,onIonModalWillDismiss:this.onLifecycle,onIonModalDidDismiss:this.onLifecycle}),(0,Ee.h)("ion-backdrop",{ref:function(e){return t.backdropEl=e},visible:this.showBackdrop,tappable:this.backdropDismiss,part:"backdrop"}),"ios"===c&&(0,Ee.h)("div",{class:"modal-shadow"}),(0,Ee.h)("div",Object.assign({role:"dialog"},s,{"aria-modal":"true",class:"modal-wrapper ion-overlay-wrapper",part:"content",ref:function(e){return t.wrapperEl=e}}),u&&(0,Ee.h)("button",{class:"modal-handle",tabIndex:f?0:-1,"aria-label":"Activate to adjust the size of the dialog overlaying the screen",onClick:f?this.onHandleClick:void 0,part:"handle"}),(0,Ee.h)("slot",null)))}},{key:"el",get:function(){return this}}],[{key:"watchers",get:function(){return{isOpen:["onIsOpenChange"],trigger:["onTriggerChange"],swipeToClose:["swipeToCloseChanged"]}}},{key:"style",get:function(){return{ios:':host{--width:100%;--min-width:auto;--max-width:auto;--height:100%;--min-height:auto;--max-height:auto;--overflow:hidden;--border-radius:0;--border-width:0;--border-style:none;--border-color:transparent;--background:var(--ion-background-color, #fff);--box-shadow:none;--backdrop-opacity:0;left:0;right:0;top:0;bottom:0;display:-ms-flexbox;display:flex;position:absolute;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;outline:none;contain:strict}.modal-wrapper,ion-backdrop{pointer-events:auto}:host(.overlay-hidden){display:none}.modal-wrapper,.modal-shadow{border-radius:var(--border-radius);width:var(--width);min-width:var(--min-width);max-width:var(--max-width);height:var(--height);min-height:var(--min-height);max-height:var(--max-height);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);background:var(--background);-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow);overflow:var(--overflow);z-index:10}.modal-shadow{position:absolute;background:transparent}@media only screen and (min-width: 768px) and (min-height: 600px){:host{--width:600px;--height:500px;--ion-safe-area-top:0px;--ion-safe-area-bottom:0px;--ion-safe-area-right:0px;--ion-safe-area-left:0px}}@media only screen and (min-width: 768px) and (min-height: 768px){:host{--width:600px;--height:600px}}.modal-handle{left:0px;right:0px;top:5px;border-radius:8px;margin-left:auto;margin-right:auto;position:absolute;width:36px;height:5px;-webkit-transform:translateZ(0);transform:translateZ(0);border:0;background:var(--ion-color-step-350, #c0c0be);cursor:pointer;z-index:11}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){.modal-handle{margin-left:unset;margin-right:unset;-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto}}.modal-handle::before{padding-left:4px;padding-right:4px;padding-top:4px;padding-bottom:4px;position:absolute;width:36px;height:5px;-webkit-transform:translate(-50%, -50%);transform:translate(-50%, -50%);content:""}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){.modal-handle::before{padding-left:unset;padding-right:unset;-webkit-padding-start:4px;padding-inline-start:4px;-webkit-padding-end:4px;padding-inline-end:4px}}:host(.modal-sheet){--height:calc(100% - (var(--ion-safe-area-top) + 10px))}:host(.modal-sheet) .modal-wrapper,:host(.modal-sheet) .modal-shadow{position:absolute;bottom:0}:host{--backdrop-opacity:var(--ion-backdrop-opacity, 0.4)}:host(.modal-card),:host(.modal-sheet){--border-radius:10px}@media only screen and (min-width: 768px) and (min-height: 600px){:host{--border-radius:10px}}.modal-wrapper{-webkit-transform:translate3d(0,  100%,  0);transform:translate3d(0,  100%,  0)}@media screen and (max-width: 767px){@supports (width: 1px){:host(.modal-card){--height:calc(100% - max(30px, var(--ion-safe-area-top)) - 10px)}}@supports not (width: 1px){:host(.modal-card){--height:calc(100% - 40px)}}:host(.modal-card) .modal-wrapper{border-top-left-radius:var(--border-radius);border-top-right-radius:var(--border-radius);border-bottom-right-radius:0;border-bottom-left-radius:0}:host-context([dir=rtl]):host(.modal-card) .modal-wrapper,:host-context([dir=rtl]).modal-card .modal-wrapper{border-top-left-radius:var(--border-radius);border-top-right-radius:var(--border-radius);border-bottom-right-radius:0;border-bottom-left-radius:0}:host(.modal-card){--backdrop-opacity:0;--width:100%;-ms-flex-align:end;align-items:flex-end}:host(.modal-card) .modal-shadow{display:none}:host(.modal-card) ion-backdrop{pointer-events:none}}@media screen and (min-width: 768px){:host(.modal-card){--width:calc(100% - 120px);--height:calc(100% - (120px + var(--ion-safe-area-top) + var(--ion-safe-area-bottom)));--max-width:720px;--max-height:1000px;--backdrop-opacity:0;--box-shadow:0px 0px 30px 10px rgba(0, 0, 0, 0.1);-webkit-transition:all 0.5s ease-in-out;transition:all 0.5s ease-in-out}:host(.modal-card) .modal-wrapper{-webkit-box-shadow:none;box-shadow:none}:host(.modal-card) .modal-shadow{-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow)}}:host(.modal-sheet) .modal-wrapper{border-top-left-radius:var(--border-radius);border-top-right-radius:var(--border-radius);border-bottom-right-radius:0;border-bottom-left-radius:0}:host-context([dir=rtl]):host(.modal-sheet) .modal-wrapper,:host-context([dir=rtl]).modal-sheet .modal-wrapper{border-top-left-radius:var(--border-radius);border-top-right-radius:var(--border-radius);border-bottom-right-radius:0;border-bottom-left-radius:0}',md:':host{--width:100%;--min-width:auto;--max-width:auto;--height:100%;--min-height:auto;--max-height:auto;--overflow:hidden;--border-radius:0;--border-width:0;--border-style:none;--border-color:transparent;--background:var(--ion-background-color, #fff);--box-shadow:none;--backdrop-opacity:0;left:0;right:0;top:0;bottom:0;display:-ms-flexbox;display:flex;position:absolute;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;outline:none;contain:strict}.modal-wrapper,ion-backdrop{pointer-events:auto}:host(.overlay-hidden){display:none}.modal-wrapper,.modal-shadow{border-radius:var(--border-radius);width:var(--width);min-width:var(--min-width);max-width:var(--max-width);height:var(--height);min-height:var(--min-height);max-height:var(--max-height);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);background:var(--background);-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow);overflow:var(--overflow);z-index:10}.modal-shadow{position:absolute;background:transparent}@media only screen and (min-width: 768px) and (min-height: 600px){:host{--width:600px;--height:500px;--ion-safe-area-top:0px;--ion-safe-area-bottom:0px;--ion-safe-area-right:0px;--ion-safe-area-left:0px}}@media only screen and (min-width: 768px) and (min-height: 768px){:host{--width:600px;--height:600px}}.modal-handle{left:0px;right:0px;top:5px;border-radius:8px;margin-left:auto;margin-right:auto;position:absolute;width:36px;height:5px;-webkit-transform:translateZ(0);transform:translateZ(0);border:0;background:var(--ion-color-step-350, #c0c0be);cursor:pointer;z-index:11}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){.modal-handle{margin-left:unset;margin-right:unset;-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto}}.modal-handle::before{padding-left:4px;padding-right:4px;padding-top:4px;padding-bottom:4px;position:absolute;width:36px;height:5px;-webkit-transform:translate(-50%, -50%);transform:translate(-50%, -50%);content:""}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){.modal-handle::before{padding-left:unset;padding-right:unset;-webkit-padding-start:4px;padding-inline-start:4px;-webkit-padding-end:4px;padding-inline-end:4px}}:host(.modal-sheet){--height:calc(100% - (var(--ion-safe-area-top) + 10px))}:host(.modal-sheet) .modal-wrapper,:host(.modal-sheet) .modal-shadow{position:absolute;bottom:0}:host{--backdrop-opacity:var(--ion-backdrop-opacity, 0.32)}@media only screen and (min-width: 768px) and (min-height: 600px){:host{--border-radius:2px;--box-shadow:0 28px 48px rgba(0, 0, 0, 0.4)}}.modal-wrapper{-webkit-transform:translate3d(0,  40px,  0);transform:translate3d(0,  40px,  0);opacity:0.01}'}}}]),n}(Ee.mv),[33,"ion-modal",{hasController:[4,"has-controller"],overlayIndex:[2,"overlay-index"],delegate:[16],keyboardClose:[4,"keyboard-close"],enterAnimation:[16],leaveAnimation:[16],breakpoints:[16],initialBreakpoint:[2,"initial-breakpoint"],backdropBreakpoint:[2,"backdrop-breakpoint"],handle:[4],handleBehavior:[1,"handle-behavior"],component:[1],componentProps:[16],cssClass:[1,"css-class"],backdropDismiss:[4,"backdrop-dismiss"],showBackdrop:[4,"show-backdrop"],animated:[4],swipeToClose:[4,"swipe-to-close"],presentingElement:[16],htmlAttributes:[16],isOpen:[4,"is-open"],trigger:[1],keepContentsMounted:[4,"keep-contents-mounted"],canDismiss:[4,"can-dismiss"],presented:[32],present:[64],dismiss:[64],onDidDismiss:[64],onWillDismiss:[64],setCurrentBreakpoint:[64],getCurrentBreakpoint:[64]}]),ks={ionModalDidPresent:"ionViewDidEnter",ionModalWillPresent:"ionViewWillEnter",ionModalWillDismiss:"ionViewWillLeave",ionModalDidDismiss:"ionViewDidLeave"},ws=0;var xs=function(){if("undefined"!==typeof customElements){["ion-modal","ion-backdrop"].forEach((function(e){switch(e){case"ion-modal":customElements.get(e)||customElements.define(e,bs);break;case"ion-backdrop":customElements.get(e)||Kt()}}))}},Is=(0,Ee.GH)(function(e){(0,xe.Z)(r,e);var t=(0,Ie.Z)(r);function r(){var e;return(0,Se.Z)(this,r),(e=t.call(this)).__registerHost(),e}return(0,Te.Z)(r,[{key:"componentDidLoad",value:function(){var e=this;Ee.Z5.isBrowser&&Ts((0,ke.Z)((0,be.Z)().mark((function t(){var r,a,i;return(0,be.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Re(window,"hybrid"),Ce.getBoolean("_testing")||n.e(272).then(n.bind(n,5272)).then((function(e){return e.startTapClick(Ce)})),Ce.getBoolean("statusTap",r)&&n.e(841).then(n.bind(n,8841)).then((function(e){return e.startStatusTap()})),Ce.getBoolean("inputShims",Ss())&&(a=Re(window,"ios")?"ios":"android",n.e(186).then(n.bind(n,1186)).then((function(e){return e.startInputShims(Ce,a)}))),t.next=6,Promise.resolve().then(n.bind(n,8862));case 6:i=t.sent,Ce.getBoolean("hardwareBackButton",r)?i.startHardwareBackButton():i.blockHardwareBackButton(),"undefined"!==typeof window&&Promise.resolve().then(n.bind(n,5573)).then((function(e){return e.startKeyboardAssist(window)})),Promise.resolve().then(n.bind(n,7225)).then((function(t){return e.focusVisible=t.startFocusVisible()}));case 10:case"end":return t.stop()}}),t)}))))}},{key:"setFocus",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.focusVisible&&this.focusVisible.setFocus(t);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t=je(this);return(0,Ee.h)(Ee.AA,{class:(e={},(0,ye.Z)(e,t,!0),(0,ye.Z)(e,"ion-page",!0),(0,ye.Z)(e,"force-statusbar-padding",Ce.getBoolean("_forceStatusbarPadding")),e)})}},{key:"el",get:function(){return this}}],[{key:"style",get:function(){return"html.plt-mobile ion-app{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}html.plt-mobile ion-app [contenteditable]{-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}ion-app.force-statusbar-padding{--ion-safe-area-top:20px}"}}]),r}(Ee.mv),[0,"ion-app",{setFocus:[64]}]),Ss=function(){return!(!Re(window,"ios")||!Re(window,"mobile"))||!(!Re(window,"android")||!Re(window,"mobileweb"))},Ts=function(e){"requestIdleCallback"in window?window.requestIdleCallback(e):setTimeout(e,32)};var Es=function(){if("undefined"!==typeof customElements){["ion-app"].forEach((function(e){if("ion-app"===e)customElements.get(e)||customElements.define(e,Is)}))}};Ee.mv;var Ns=(0,Ee.GH)(function(e){(0,xe.Z)(r,e);var t=(0,Ie.Z)(r);function r(){var e;return(0,Se.Z)(this,r),(e=t.call(this)).__registerHost(),e.__attachShadow(),e.ionNavWillLoad=(0,Ee.yM)((0,we.Z)(e),"ionNavWillLoad",7),e.ionNavWillChange=(0,Ee.yM)((0,we.Z)(e),"ionNavWillChange",3),e.ionNavDidChange=(0,Ee.yM)((0,we.Z)(e),"ionNavDidChange",3),e.gestureOrAnimationInProgress=!1,e.mode=je((0,we.Z)(e)),e.animated=!0,e}return(0,Te.Z)(r,[{key:"swipeHandlerChanged",value:function(){this.gesture&&this.gesture.enable(void 0!==this.swipeHandler)}},{key:"connectedCallback",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){var t,r=this;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=function(){r.gestureOrAnimationInProgress=!0,r.swipeHandler&&r.swipeHandler.onStart()},e.next=3,n.e(22).then(n.bind(n,5022));case 3:this.gesture=e.sent.createSwipeBackGesture(this.el,(function(){return!r.gestureOrAnimationInProgress&&!!r.swipeHandler&&r.swipeHandler.canStart()}),(function(){return t()}),(function(e){var t;return null===(t=r.ani)||void 0===t?void 0:t.progressStep(e)}),(function(e,t,n){if(r.ani){r.ani.onFinish((function(){r.gestureOrAnimationInProgress=!1,r.swipeHandler&&r.swipeHandler.onEnd(e)}),{oneTimeCallback:!0});var a=e?-.001:.001;e?a+=Ga([0,0],[.32,.72],[0,1],[1,1],t)[0]:(r.ani.easing("cubic-bezier(1, 0, 0.68, 0.28)"),a+=Ga([0,0],[1,0],[.68,.28],[1,1],t)[0]),r.ani.progressEnd(e?1:0,a,n)}else r.gestureOrAnimationInProgress=!1})),this.swipeHandlerChanged();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillLoad",value:function(){this.ionNavWillLoad.emit()}},{key:"disconnectedCallback",value:function(){this.gesture&&(this.gesture.destroy(),this.gesture=void 0)}},{key:"commit",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t,n,r){var a,i;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.lock();case 2:return a=e.sent,i=!1,e.prev=4,e.next=7,this.transition(t,n,r);case 7:i=e.sent,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),console.error(e.t0);case 13:return a(),e.abrupt("return",i);case 15:case"end":return e.stop()}}),e,this,[[4,10]])})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"setRouteId",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t,n,r,a){var i;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setRoot(t,n,{duration:"root"===r?0:void 0,direction:"back"===r?"back":"forward",animationBuilder:a});case 2:return i=e.sent,e.abrupt("return",{changed:i,element:this.activeEl});case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"getRouteId",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){var t;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.activeEl,e.abrupt("return",t?{id:t.tagName,element:t,params:this.activeParams}:void 0);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setRoot",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t,n,r){var a,i;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.activeComponent!==t||!(0,qe.s)(n,this.activeParams)){e.next=2;break}return e.abrupt("return",!1);case 2:return a=this.activeEl,e.next=5,Fr(this.delegate,this.el,t,["ion-page","ion-page-invisible"],n);case 5:return i=e.sent,this.activeComponent=t,this.activeEl=i,this.activeParams=n,e.next=11,this.commit(i,a,r);case 11:return e.next=13,Mr(this.delegate,a);case 13:return e.abrupt("return",!0);case 14:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"transition",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t,n){var r,a,i,o,s,u=this,c=arguments;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=c.length>2&&void 0!==c[2]?c[2]:{},n!==t){e.next=3;break}return e.abrupt("return",!1);case 3:return this.ionNavWillChange.emit(),a=this.el,i=this.mode,o=this.animated&&Ce.getBoolean("animated",!0),s=r.animationBuilder||this.animation||Ce.get("navAnimation"),e.next=9,(0,zr.t)(Object.assign(Object.assign({mode:i,animated:o,enteringEl:t,leavingEl:n,baseEl:a,progressCallback:r.progressAnimation?function(e){void 0===e||u.gestureOrAnimationInProgress?u.ani=e:(u.gestureOrAnimationInProgress=!0,e.onFinish((function(){u.gestureOrAnimationInProgress=!1,u.swipeHandler&&u.swipeHandler.onEnd(!1)}),{oneTimeCallback:!0}),e.progressEnd(0,0,0))}:void 0},r),{animationBuilder:s}));case 9:return this.ionNavDidChange.emit(),e.abrupt("return",!0);case 11:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"lock",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){var t,n;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.waitPromise,this.waitPromise=new Promise((function(e){return n=e})),void 0===t){e.next=5;break}return e.next=5,t;case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return(0,Ee.h)("slot",null)}},{key:"el",get:function(){return this}}],[{key:"watchers",get:function(){return{swipeHandler:["swipeHandlerChanged"]}}},{key:"style",get:function(){return":host{left:0;right:0;top:0;bottom:0;position:absolute;contain:layout size style;overflow:hidden;z-index:0}"}}]),r}(Ee.mv),[1,"ion-router-outlet",{mode:[1025],delegate:[16],animated:[4],animation:[16],swipeHandler:[16],commit:[64],setRouteId:[64],getRouteId:[64]}]);var Cs=function(){if("undefined"!==typeof customElements){["ion-router-outlet"].forEach((function(e){if("ion-router-outlet"===e)customElements.get(e)||customElements.define(e,Ns)}))}},Zs=(0,Ee.GH)(function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(){var e;return(0,Se.Z)(this,n),(e=t.call(this)).__registerHost(),e.__attachShadow(),e.ionTabBarChanged=(0,Ee.yM)((0,we.Z)(e),"ionTabBarChanged",7),e.keyboardCtrl=null,e.keyboardVisible=!1,e.translucent=!1,e}return(0,Te.Z)(n,[{key:"selectedTabChanged",value:function(){void 0!==this.selectedTab&&this.ionTabBarChanged.emit({tab:this.selectedTab})}},{key:"componentWillLoad",value:function(){this.selectedTabChanged()}},{key:"connectedCallback",value:function(){var e=this;this.keyboardCtrl=ha((function(t){e.keyboardVisible=t}))}},{key:"disconnectedCallback",value:function(){this.keyboardCtrl&&this.keyboardCtrl.destroy()}},{key:"render",value:function(){var e,t=this.color,n=this.translucent,r=this.keyboardVisible,a=je(this),i=r&&"top"!==this.el.getAttribute("slot");return(0,Ee.h)(Ee.AA,{role:"tablist","aria-hidden":i?"true":null,class:Yt(t,(e={},(0,ye.Z)(e,a,!0),(0,ye.Z)(e,"tab-bar-translucent",n),(0,ye.Z)(e,"tab-bar-hidden",i),e))},(0,Ee.h)("slot",null))}},{key:"el",get:function(){return this}}],[{key:"watchers",get:function(){return{selectedTab:["selectedTabChanged"]}}},{key:"style",get:function(){return{ios:":host{padding-left:var(--ion-safe-area-left);padding-right:var(--ion-safe-area-right);display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:auto;padding-bottom:var(--ion-safe-area-bottom, 0);border-top:var(--border);background:var(--background);color:var(--color);text-align:center;contain:strict;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:10;-webkit-box-sizing:content-box !important;box-sizing:content-box !important}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){:host{padding-left:unset;padding-right:unset;-webkit-padding-start:var(--ion-safe-area-left);padding-inline-start:var(--ion-safe-area-left);-webkit-padding-end:var(--ion-safe-area-right);padding-inline-end:var(--ion-safe-area-right)}}:host(.ion-color) ::slotted(ion-tab-button){--background-focused:var(--ion-color-shade);--color-selected:var(--ion-color-contrast)}:host(.ion-color) ::slotted(.tab-selected){color:var(--ion-color-contrast)}:host(.ion-color),:host(.ion-color) ::slotted(ion-tab-button){color:rgba(var(--ion-color-contrast-rgb), 0.7)}:host(.ion-color),:host(.ion-color) ::slotted(ion-tab-button){background:var(--ion-color-base)}:host(.ion-color) ::slotted(ion-tab-button.ion-focused),:host(.tab-bar-translucent) ::slotted(ion-tab-button.ion-focused){background:var(--background-focused)}:host(.tab-bar-translucent) ::slotted(ion-tab-button){background:transparent}:host([slot=top]){padding-top:var(--ion-safe-area-top, 0);padding-bottom:0;border-top:0;border-bottom:var(--border)}:host(.tab-bar-hidden){display:none !important}:host{--background:var(--ion-tab-bar-background, var(--ion-color-step-50, #f7f7f7));--background-focused:var(--ion-tab-bar-background-focused, #e0e0e0);--border:0.55px solid var(--ion-tab-bar-border-color, var(--ion-border-color, var(--ion-color-step-150, rgba(0, 0, 0, 0.2))));--color:var(--ion-tab-bar-color, var(--ion-color-step-400, #999999));--color-selected:var(--ion-tab-bar-color-selected, var(--ion-color-primary, #3880ff));height:50px}@supports ((-webkit-backdrop-filter: blur(0)) or (backdrop-filter: blur(0))){:host(.tab-bar-translucent){--background:rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.8);-webkit-backdrop-filter:saturate(210%) blur(20px);backdrop-filter:saturate(210%) blur(20px)}:host(.ion-color.tab-bar-translucent){background:rgba(var(--ion-color-base-rgb), 0.8)}:host(.tab-bar-translucent) ::slotted(ion-tab-button.ion-focused){background:rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.6)}}",md:":host{padding-left:var(--ion-safe-area-left);padding-right:var(--ion-safe-area-right);display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:auto;padding-bottom:var(--ion-safe-area-bottom, 0);border-top:var(--border);background:var(--background);color:var(--color);text-align:center;contain:strict;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:10;-webkit-box-sizing:content-box !important;box-sizing:content-box !important}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){:host{padding-left:unset;padding-right:unset;-webkit-padding-start:var(--ion-safe-area-left);padding-inline-start:var(--ion-safe-area-left);-webkit-padding-end:var(--ion-safe-area-right);padding-inline-end:var(--ion-safe-area-right)}}:host(.ion-color) ::slotted(ion-tab-button){--background-focused:var(--ion-color-shade);--color-selected:var(--ion-color-contrast)}:host(.ion-color) ::slotted(.tab-selected){color:var(--ion-color-contrast)}:host(.ion-color),:host(.ion-color) ::slotted(ion-tab-button){color:rgba(var(--ion-color-contrast-rgb), 0.7)}:host(.ion-color),:host(.ion-color) ::slotted(ion-tab-button){background:var(--ion-color-base)}:host(.ion-color) ::slotted(ion-tab-button.ion-focused),:host(.tab-bar-translucent) ::slotted(ion-tab-button.ion-focused){background:var(--background-focused)}:host(.tab-bar-translucent) ::slotted(ion-tab-button){background:transparent}:host([slot=top]){padding-top:var(--ion-safe-area-top, 0);padding-bottom:0;border-top:0;border-bottom:var(--border)}:host(.tab-bar-hidden){display:none !important}:host{--background:var(--ion-tab-bar-background, var(--ion-background-color, #fff));--background-focused:var(--ion-tab-bar-background-focused, #e0e0e0);--border:1px solid var(--ion-tab-bar-border-color, var(--ion-border-color, var(--ion-color-step-150, rgba(0, 0, 0, 0.07))));--color:var(--ion-tab-bar-color, var(--ion-color-step-600, #666666));--color-selected:var(--ion-tab-bar-color-selected, var(--ion-color-primary, #3880ff));height:56px}"}}}]),n}(Ee.mv),[33,"ion-tab-bar",{color:[513],selectedTab:[1,"selected-tab"],translucent:[4],keyboardVisible:[32]}]);var _s=function(){if("undefined"!==typeof customElements){["ion-tab-bar"].forEach((function(e){if("ion-tab-bar"===e)customElements.get(e)||customElements.define(e,Zs)}))}},As=(0,Ee.GH)(function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(){var e;return(0,Se.Z)(this,n),(e=t.call(this)).__registerHost(),e.__attachShadow(),e.ionTabButtonClick=(0,Ee.yM)((0,we.Z)(e),"ionTabButtonClick",7),e.inheritedAttributes={},e.disabled=!1,e.selected=!1,e.onKeyUp=function(t){"Enter"!==t.key&&" "!==t.key||e.selectTab(t)},e.onClick=function(t){e.selectTab(t)},e}return(0,Te.Z)(n,[{key:"onTabBarChanged",value:function(e){var t=e.target,n=this.el.parentElement;(e.composedPath().includes(n)||(null===t||void 0===t?void 0:t.contains(this.el)))&&(this.selected=this.tab===e.detail.tab)}},{key:"componentWillLoad",value:function(){this.inheritedAttributes=Object.assign({},(0,qe.d)(this.el,["aria-label"])),void 0===this.layout&&(this.layout=Ce.get("tabButtonLayout","icon-top"))}},{key:"selectTab",value:function(e){void 0!==this.tab&&(this.disabled||this.ionTabButtonClick.emit({tab:this.tab,href:this.href,selected:this.selected}),e.preventDefault())}},{key:"hasLabel",get:function(){return!!this.el.querySelector("ion-label")}},{key:"hasIcon",get:function(){return!!this.el.querySelector("ion-icon")}},{key:"render",value:function(){var e,t=this.disabled,n=this.hasIcon,r=this.hasLabel,a=this.href,i=this.rel,o=this.target,s=this.layout,u=this.selected,c=this.tab,l=this.inheritedAttributes,d=je(this),f={download:this.download,href:a,rel:i,target:o};return(0,Ee.h)(Ee.AA,{onClick:this.onClick,onKeyup:this.onKeyUp,id:void 0!==c?"tab-button-".concat(c):null,class:(e={},(0,ye.Z)(e,d,!0),(0,ye.Z)(e,"tab-selected",u),(0,ye.Z)(e,"tab-disabled",t),(0,ye.Z)(e,"tab-has-label",r),(0,ye.Z)(e,"tab-has-icon",n),(0,ye.Z)(e,"tab-has-label-only",r&&!n),(0,ye.Z)(e,"tab-has-icon-only",n&&!r),(0,ye.Z)(e,"tab-layout-".concat(s),!0),(0,ye.Z)(e,"ion-activatable",!0),(0,ye.Z)(e,"ion-selectable",!0),(0,ye.Z)(e,"ion-focusable",!0),e)},(0,Ee.h)("a",Object.assign({},f,{class:"button-native",part:"native",role:"tab","aria-selected":u?"true":null,"aria-disabled":t?"true":null,tabindex:t?"-1":void 0},l),(0,Ee.h)("span",{class:"button-inner"},(0,Ee.h)("slot",null)),"md"===d&&(0,Ee.h)("ion-ripple-effect",{type:"unbounded"})))}},{key:"el",get:function(){return this}}],[{key:"style",get:function(){return{ios:':host{--ripple-color:var(--color-selected);--background-focused-opacity:1;-ms-flex:1;flex:1;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;height:100%;outline:none;background:var(--background);color:var(--color)}.button-native{border-radius:inherit;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:var(--padding-start);padding-right:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:inherit;flex-direction:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:100%;height:100%;border:0;outline:none;background:transparent;text-decoration:none;cursor:pointer;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-user-drag:none}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){.button-native{padding-left:unset;padding-right:unset;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end)}}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:inherit;flex-flow:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:100%;height:100%;z-index:1}:host(.ion-focused) .button-native{color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}@media (any-hover: hover){a:hover{color:var(--color-selected)}}:host(.tab-selected){color:var(--color-selected)}:host(.tab-hidden){display:none !important}:host(.tab-disabled){pointer-events:none;opacity:0.4}::slotted(ion-label),::slotted(ion-icon){display:block;-ms-flex-item-align:center;align-self:center;max-width:100%;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box}::slotted(ion-label){-ms-flex-order:0;order:0}::slotted(ion-icon){-ms-flex-order:-1;order:-1;height:1em}:host(.tab-has-label-only) ::slotted(ion-label){white-space:normal}::slotted(ion-badge){-webkit-box-sizing:border-box;box-sizing:border-box;position:absolute;z-index:1}:host(.tab-layout-icon-start){-ms-flex-direction:row;flex-direction:row}:host(.tab-layout-icon-end){-ms-flex-direction:row-reverse;flex-direction:row-reverse}:host(.tab-layout-icon-bottom){-ms-flex-direction:column-reverse;flex-direction:column-reverse}:host(.tab-layout-icon-hide) ::slotted(ion-icon){display:none}:host(.tab-layout-label-hide) ::slotted(ion-label){display:none}ion-ripple-effect{color:var(--ripple-color)}:host{--padding-top:0;--padding-end:2px;--padding-bottom:0;--padding-start:2px;max-width:240px;font-size:10px}::slotted(ion-badge){padding-left:6px;padding-right:6px;padding-top:1px;padding-bottom:1px;left:calc(50% + 6px);top:4px;height:auto;font-size:12px;line-height:16px}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){::slotted(ion-badge){padding-left:unset;padding-right:unset;-webkit-padding-start:6px;padding-inline-start:6px;-webkit-padding-end:6px;padding-inline-end:6px}}[dir=rtl] ::slotted(ion-badge),:host-context([dir=rtl]) ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 6px)}::slotted(ion-icon){margin-top:2px;margin-bottom:2px;font-size:30px}::slotted(ion-icon::before){vertical-align:top}::slotted(ion-label){margin-top:0;margin-bottom:1px;min-height:11px;font-weight:500}:host(.tab-has-label-only) ::slotted(ion-label){margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;font-size:12px;font-size:14px;line-height:1.1}:host(.tab-layout-icon-end) ::slotted(ion-label),:host(.tab-layout-icon-start) ::slotted(ion-label),:host(.tab-layout-icon-hide) ::slotted(ion-label){margin-top:2px;margin-bottom:2px;font-size:14px;line-height:1.1}:host(.tab-layout-icon-end) ::slotted(ion-icon),:host(.tab-layout-icon-start) ::slotted(ion-icon){min-width:24px;height:26px;margin-top:2px;margin-bottom:1px;font-size:24px}:host(.tab-layout-icon-bottom) ::slotted(ion-badge){left:calc(50% + 12px)}:host-context([dir=rtl]):host(.tab-layout-icon-bottom) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-bottom ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 12px)}:host(.tab-layout-icon-bottom) ::slotted(ion-icon){margin-top:0;margin-bottom:1px}:host(.tab-layout-icon-bottom) ::slotted(ion-label){margin-top:4px}:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){left:calc(50% + 35px);top:10px}:host-context([dir=rtl]):host(.tab-layout-icon-start) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-start ::slotted(ion-badge),:host-context([dir=rtl]):host(.tab-layout-icon-end) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-end ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 35px)}:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){left:calc(50% + 30px);top:10px}:host-context([dir=rtl]):host(.tab-layout-icon-hide) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-hide ::slotted(ion-badge),:host-context([dir=rtl]):host(.tab-has-label-only) ::slotted(ion-badge),:host-context([dir=rtl]).tab-has-label-only ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 30px)}:host(.tab-layout-label-hide) ::slotted(ion-badge),:host(.tab-has-icon-only) ::slotted(ion-badge){top:10px}:host(.tab-layout-label-hide) ::slotted(ion-icon){margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}',md:':host{--ripple-color:var(--color-selected);--background-focused-opacity:1;-ms-flex:1;flex:1;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;height:100%;outline:none;background:var(--background);color:var(--color)}.button-native{border-radius:inherit;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:var(--padding-start);padding-right:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:inherit;flex-direction:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:100%;height:100%;border:0;outline:none;background:transparent;text-decoration:none;cursor:pointer;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-user-drag:none}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){.button-native{padding-left:unset;padding-right:unset;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end)}}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:inherit;flex-flow:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:100%;height:100%;z-index:1}:host(.ion-focused) .button-native{color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}@media (any-hover: hover){a:hover{color:var(--color-selected)}}:host(.tab-selected){color:var(--color-selected)}:host(.tab-hidden){display:none !important}:host(.tab-disabled){pointer-events:none;opacity:0.4}::slotted(ion-label),::slotted(ion-icon){display:block;-ms-flex-item-align:center;align-self:center;max-width:100%;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box}::slotted(ion-label){-ms-flex-order:0;order:0}::slotted(ion-icon){-ms-flex-order:-1;order:-1;height:1em}:host(.tab-has-label-only) ::slotted(ion-label){white-space:normal}::slotted(ion-badge){-webkit-box-sizing:border-box;box-sizing:border-box;position:absolute;z-index:1}:host(.tab-layout-icon-start){-ms-flex-direction:row;flex-direction:row}:host(.tab-layout-icon-end){-ms-flex-direction:row-reverse;flex-direction:row-reverse}:host(.tab-layout-icon-bottom){-ms-flex-direction:column-reverse;flex-direction:column-reverse}:host(.tab-layout-icon-hide) ::slotted(ion-icon){display:none}:host(.tab-layout-label-hide) ::slotted(ion-label){display:none}ion-ripple-effect{color:var(--ripple-color)}:host{--padding-top:0;--padding-end:12px;--padding-bottom:0;--padding-start:12px;max-width:168px;font-size:12px;font-weight:normal;letter-spacing:0.03em}::slotted(ion-label){margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;text-transform:none}::slotted(ion-icon){margin-left:0;margin-right:0;margin-top:16px;margin-bottom:16px;-webkit-transform-origin:center center;transform-origin:center center;font-size:22px}[dir=rtl] ::slotted(ion-icon),:host-context([dir=rtl]) ::slotted(ion-icon){-webkit-transform-origin:calc(100% - center) center;transform-origin:calc(100% - center) center}::slotted(ion-badge){border-radius:8px;padding-left:2px;padding-right:2px;padding-top:3px;padding-bottom:2px;left:calc(50% + 6px);top:8px;min-width:12px;font-size:8px;font-weight:normal}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){::slotted(ion-badge){padding-left:unset;padding-right:unset;-webkit-padding-start:2px;padding-inline-start:2px;-webkit-padding-end:2px;padding-inline-end:2px}}[dir=rtl] ::slotted(ion-badge),:host-context([dir=rtl]) ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 6px)}::slotted(ion-badge:empty){display:block;min-width:8px;height:8px}:host(.tab-layout-icon-top) ::slotted(ion-icon){margin-top:6px;margin-bottom:2px}:host(.tab-layout-icon-top) ::slotted(ion-label){margin-top:0;margin-bottom:6px}:host(.tab-layout-icon-bottom) ::slotted(ion-badge){left:70%;top:8px}:host-context([dir=rtl]):host(.tab-layout-icon-bottom) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-bottom ::slotted(ion-badge){left:unset;right:unset;right:70%}:host(.tab-layout-icon-bottom) ::slotted(ion-icon){margin-top:0;margin-bottom:6px}:host(.tab-layout-icon-bottom) ::slotted(ion-label){margin-top:6px;margin-bottom:0}:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){left:80%;top:16px}:host-context([dir=rtl]):host(.tab-layout-icon-start) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-start ::slotted(ion-badge),:host-context([dir=rtl]):host(.tab-layout-icon-end) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-end ::slotted(ion-badge){left:unset;right:unset;right:80%}:host(.tab-layout-icon-start) ::slotted(ion-icon){margin-right:6px}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){:host(.tab-layout-icon-start) ::slotted(ion-icon){margin-right:unset;-webkit-margin-end:6px;margin-inline-end:6px}}:host(.tab-layout-icon-end) ::slotted(ion-icon){margin-left:6px}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){:host(.tab-layout-icon-end) ::slotted(ion-icon){margin-left:unset;-webkit-margin-start:6px;margin-inline-start:6px}}:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){left:70%;top:16px}:host-context([dir=rtl]):host(.tab-layout-icon-hide) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-hide ::slotted(ion-badge),:host-context([dir=rtl]):host(.tab-has-label-only) ::slotted(ion-badge),:host-context([dir=rtl]).tab-has-label-only ::slotted(ion-badge){left:unset;right:unset;right:70%}:host(.tab-layout-icon-hide) ::slotted(ion-label),:host(.tab-has-label-only) ::slotted(ion-label){margin-top:0;margin-bottom:0}:host(.tab-layout-label-hide) ::slotted(ion-badge),:host(.tab-has-icon-only) ::slotted(ion-badge){top:16px}:host(.tab-layout-label-hide) ::slotted(ion-icon),:host(.tab-has-icon-only) ::slotted(ion-icon){margin-top:0;margin-bottom:0;font-size:24px}'}}}]),n}(Ee.mv),[33,"ion-tab-button",{disabled:[4],download:[1],href:[1],rel:[1],layout:[1025],selected:[1028],tab:[1],target:[1]},[[8,"ionTabBarChanged","onTabBarChanged"]]]);var Rs,Ds,Os=function(){if("undefined"!==typeof customElements){["ion-tab-button","ion-ripple-effect"].forEach((function(e){switch(e){case"ion-tab-button":customElements.get(e)||customElements.define(e,As);break;case"ion-ripple-effect":customElements.get(e)||pn()}}))}},Ls=function(){if("undefined"===typeof window)return new Map;if(!Rs){var e=window;e.Ionicons=e.Ionicons||{},Rs=e.Ionicons.map=e.Ionicons.map||new Map}return Rs},Fs=function(e){var t=Ls().get(e);return t||(0,Ee.K3)("svg/".concat(e,".svg"))},Ms=function(e,t,n,r,a){return n="ios"===(n&&Vs(n))?"ios":"md",r&&"ios"===n?e=Vs(r):a&&"md"===n?e=Vs(a):(e||!t||zs(t)||(e=t),Bs(e)&&(e=Vs(e))),Bs(e)&&""!==e.trim()?""!==e.replace(/[a-z]|-|\d/gi,"")?null:e:null},Ps=function(e){return Bs(e)&&(e=e.trim(),zs(e))?e:null},zs=function(e){return e.length>0&&/(\/|\.)/.test(e)},Bs=function(e){return"string"===typeof e},Vs=function(e){return e.toLowerCase()},Us=function e(t){if(1===t.nodeType){if("script"===t.nodeName.toLowerCase())return!1;for(var n=0;n<t.attributes.length;n++){var r=t.attributes[n].name;if(Bs(r)&&0===r.toLowerCase().indexOf("on"))return!1}for(var a=0;a<t.childNodes.length;a++)if(!e(t.childNodes[a]))return!1}return!0},Ws=new Map,js=new Map,Gs=function(e,t){var n=js.get(e);if(!n){if("undefined"===typeof fetch||"undefined"===typeof document)return Ws.set(e,""),Promise.resolve();if(function(e){return e.startsWith("data:image/svg+xml")}(e)&&function(e){return-1!==e.indexOf(";utf8,")}(e)){Ds||(Ds=new DOMParser);var r=Ds.parseFromString(e,"text/html").querySelector("svg");return r&&Ws.set(e,r.outerHTML),Promise.resolve()}n=fetch(e).then((function(n){if(n.ok)return n.text().then((function(n){n&&!1!==t&&(n=function(e){var t=document.createElement("div");t.innerHTML=e;for(var n=t.childNodes.length-1;n>=0;n--)"svg"!==t.childNodes[n].nodeName.toLowerCase()&&t.removeChild(t.childNodes[n]);var r=t.firstElementChild;if(r&&"svg"===r.nodeName.toLowerCase()){var a=r.getAttribute("class")||"";if(r.setAttribute("class",(a+" s-ion-icon").trim()),Us(r))return t.innerHTML}return""}(n)),Ws.set(e,n||"")}));Ws.set(e,"")})),js.set(e,n)}return n},Hs=(0,Ee.GH)(function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(){var e;return(0,Se.Z)(this,n),(e=t.call(this)).__registerHost(),e.__attachShadow(),e.iconName=null,e.inheritedAttributes={},e.isVisible=!1,e.mode=qs(),e.lazy=!1,e.sanitize=!0,e.hasAriaHidden=function(){var t=(0,we.Z)(e).el;return t.hasAttribute("aria-hidden")&&"true"===t.getAttribute("aria-hidden")},e}return(0,Te.Z)(n,[{key:"componentWillLoad",value:function(){this.inheritedAttributes=function(e){var t={};return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).forEach((function(n){e.hasAttribute(n)&&(null!==e.getAttribute(n)&&(t[n]=e.getAttribute(n)),e.removeAttribute(n))})),t}(this.el,["aria-label"])}},{key:"connectedCallback",value:function(){var e=this;this.waitUntilVisible(this.el,"50px",(function(){e.isVisible=!0,e.loadIcon()}))}},{key:"disconnectedCallback",value:function(){this.io&&(this.io.disconnect(),this.io=void 0)}},{key:"waitUntilVisible",value:function(e,t,n){var r=this;if(Ee.Z5.isBrowser&&this.lazy&&"undefined"!==typeof window&&window.IntersectionObserver){var a=this.io=new window.IntersectionObserver((function(e){e[0].isIntersecting&&(a.disconnect(),r.io=void 0,n())}),{rootMargin:t});a.observe(e)}else n()}},{key:"loadIcon",value:function(){var e=this;if(Ee.Z5.isBrowser&&this.isVisible){var t=function(e){var t=Ps(e.src);if(t)return t;if(t=Ms(e.name,e.icon,e.mode,e.ios,e.md))return Fs(t);if(e.icon){if(t=Ps(e.icon))return t;if(t=Ps(e.icon[e.mode]))return t}return null}(this);t&&(Ws.has(t)?this.svgContent=Ws.get(t):Gs(t,this.sanitize).then((function(){return e.svgContent=Ws.get(t)})))}var n=this.iconName=Ms(this.name,this.icon,this.mode,this.ios,this.md);n&&(this.ariaLabel=n.replace(/\-/g," "))}},{key:"render",value:function(){var e,t,n=this.iconName,r=this.ariaLabel,a=this.el,i=this.inheritedAttributes,o=this.mode||"md",s=this.flipRtl||n&&(n.indexOf("arrow")>-1||n.indexOf("chevron")>-1)&&!1!==this.flipRtl;return(0,Ee.h)(Ee.AA,Object.assign({"aria-label":void 0===r||this.hasAriaHidden()?null:r,role:"img",class:Object.assign(Object.assign((0,ye.Z)({},o,!0),$s(this.color)),(e={},(0,ye.Z)(e,"icon-".concat(this.size),!!this.size),(0,ye.Z)(e,"flip-rtl",!!s&&(t=a,t&&""!==t.dir?"rtl"===t.dir.toLowerCase():"rtl"===(null===document||void 0===document?void 0:document.dir.toLowerCase()))),e))},i),Ee.Z5.isBrowser&&this.svgContent?(0,Ee.h)("div",{class:"icon-inner",innerHTML:this.svgContent}):(0,Ee.h)("div",{class:"icon-inner"}))}},{key:"el",get:function(){return this}}],[{key:"assetsDirs",get:function(){return["svg"]}},{key:"watchers",get:function(){return{name:["loadIcon"],src:["loadIcon"],icon:["loadIcon"],ios:["loadIcon"],md:["loadIcon"]}}},{key:"style",get:function(){return":host{display:inline-block;width:1em;height:1em;contain:strict;fill:currentColor;-webkit-box-sizing:content-box !important;box-sizing:content-box !important}:host .ionicon{stroke:currentColor}.ionicon-fill-none{fill:none}.ionicon-stroke-width{stroke-width:32px;stroke-width:var(--ionicon-stroke-width, 32px)}.icon-inner,.ionicon,svg{display:block;height:100%;width:100%}:host(.flip-rtl) .icon-inner{-webkit-transform:scaleX(-1);transform:scaleX(-1)}:host(.icon-small){font-size:18px !important}:host(.icon-large){font-size:32px !important}:host(.ion-color){color:var(--ion-color-base) !important}:host(.ion-color-primary){--ion-color-base:var(--ion-color-primary, #3880ff)}:host(.ion-color-secondary){--ion-color-base:var(--ion-color-secondary, #0cd1e8)}:host(.ion-color-tertiary){--ion-color-base:var(--ion-color-tertiary, #f4a942)}:host(.ion-color-success){--ion-color-base:var(--ion-color-success, #10dc60)}:host(.ion-color-warning){--ion-color-base:var(--ion-color-warning, #ffce00)}:host(.ion-color-danger){--ion-color-base:var(--ion-color-danger, #f14141)}:host(.ion-color-light){--ion-color-base:var(--ion-color-light, #f4f5f8)}:host(.ion-color-medium){--ion-color-base:var(--ion-color-medium, #989aa2)}:host(.ion-color-dark){--ion-color-base:var(--ion-color-dark, #222428)}"}}]),n}(Ee.mv),[1,"ion-icon",{mode:[1025],color:[1],ios:[1],md:[1],flipRtl:[4,"flip-rtl"],name:[513],src:[1],icon:[8],size:[1],lazy:[4],sanitize:[4],svgContent:[32],isVisible:[32],ariaLabel:[32]}]),qs=function(){return Ee.Z5.isBrowser&&"undefined"!==typeof document&&document.documentElement.getAttribute("mode")||"md"},$s=function(e){return e?(0,ye.Z)({"ion-color":!0},"ion-color-".concat(e),!0):null};var Ks=function(){if("undefined"!==typeof customElements){["ion-icon"].forEach((function(e){if("ion-icon"===e)customElements.get(e)||customElements.define(e,Hs)}))}},Xs=S.createContext({onIonViewWillEnter:function(){},ionViewWillEnter:function(){},onIonViewDidEnter:function(){},ionViewDidEnter:function(){},onIonViewWillLeave:function(){},ionViewWillLeave:function(){},onIonViewDidLeave:function(){},ionViewDidLeave:function(){}}),Ys=function(){function e(){(0,Se.Z)(this,e),this.ionViewWillEnterCallbacks=[],this.ionViewDidEnterCallbacks=[],this.ionViewWillLeaveCallbacks=[],this.ionViewDidLeaveCallbacks=[]}return(0,Te.Z)(e,[{key:"onIonViewWillEnter",value:function(e){if(e.id){var t=this.ionViewWillEnterCallbacks.findIndex((function(t){return t.id===e.id}));t>-1?this.ionViewWillEnterCallbacks[t]=e:this.ionViewWillEnterCallbacks.push(e)}else this.ionViewWillEnterCallbacks.push(e)}},{key:"ionViewWillEnter",value:function(){this.ionViewWillEnterCallbacks.forEach((function(e){return e()}))}},{key:"onIonViewDidEnter",value:function(e){if(e.id){var t=this.ionViewDidEnterCallbacks.findIndex((function(t){return t.id===e.id}));t>-1?this.ionViewDidEnterCallbacks[t]=e:this.ionViewDidEnterCallbacks.push(e)}else this.ionViewDidEnterCallbacks.push(e)}},{key:"ionViewDidEnter",value:function(){this.ionViewDidEnterCallbacks.forEach((function(e){return e()}))}},{key:"onIonViewWillLeave",value:function(e){if(e.id){var t=this.ionViewWillLeaveCallbacks.findIndex((function(t){return t.id===e.id}));t>-1?this.ionViewWillLeaveCallbacks[t]=e:this.ionViewWillLeaveCallbacks.push(e)}else this.ionViewWillLeaveCallbacks.push(e)}},{key:"ionViewWillLeave",value:function(){this.ionViewWillLeaveCallbacks.forEach((function(e){return e()}))}},{key:"onIonViewDidLeave",value:function(e){if(e.id){var t=this.ionViewDidLeaveCallbacks.findIndex((function(t){return t.id===e.id}));t>-1?this.ionViewDidLeaveCallbacks[t]=e:this.ionViewDidLeaveCallbacks.push(e)}else this.ionViewDidLeaveCallbacks.push(e)}},{key:"ionViewDidLeave",value:function(){this.ionViewDidLeaveCallbacks.forEach((function(e){return e()})),this.componentCanBeDestroyed()}},{key:"onComponentCanBeDestroyed",value:function(e){this.componentCanBeDestroyedCallback=e}},{key:"componentCanBeDestroyed",value:function(){this.componentCanBeDestroyedCallback&&this.componentCanBeDestroyedCallback()}}]),e}(),Qs=S.createContext({getIonRedirect:function(){},getIonRoute:function(){},getPageManager:function(){},getStackManager:function(){},goBack:function(e){"undefined"!==typeof window&&("string"===typeof e?window.location.pathname=e:window.history.back())},navigate:function(e){"undefined"!==typeof window&&(window.location.pathname=e)},hasIonicRouter:function(){return!1},routeInfo:void 0,setCurrentTab:function(){},changeTab:function(e,t){"undefined"!==typeof window&&(window.location.pathname=t)},resetTab:function(e,t){"undefined"!==typeof window&&(window.location.pathname=t)}}),Js=function(e){return e.toLowerCase().split("-").map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join("")},eu=function(e){return e.replace(/([A-Z])/g,(function(e){return"-".concat(e[0].toLowerCase())}))},tu=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e instanceof Element){var r=nu(e.classList,t,n);""!==r&&(e.className=r),Object.keys(t).forEach((function(n){if("children"!==n&&"style"!==n&&"ref"!==n&&"class"!==n&&"className"!==n&&"forwardedRef"!==n)if(0===n.indexOf("on")&&n[2]===n[2].toUpperCase()){var r=n.substring(2),a=r[0].toLowerCase()+r.substring(1);ru(a)||au(e,a,t[n])}else{e[n]=t[n],"string"===typeof t[n]&&e.setAttribute(eu(n),t[n])}}))}},nu=function(e,t,n){var r=t.className||t.class,a=n.className||n.class,i=iu(e),o=iu(r?r.split(" "):[]),s=iu(a?a.split(" "):[]),u=[];return i.forEach((function(e){o.has(e)?(u.push(e),o.delete(e)):s.has(e)||u.push(e)})),o.forEach((function(e){return u.push(e)})),u.join(" ")},ru=function(e){if("undefined"===typeof document)return!0;var t="on"+e,n=t in document;if(!n){var r=document.createElement("div");r.setAttribute(t,"return;"),n="function"===typeof r[t]}return n},au=function(e,t,n){var r=e.__events||(e.__events={}),a=r[t];a&&e.removeEventListener(t,a),e.addEventListener(t,r[t]=function(e){n&&n.call(this,e)})},iu=function(e){var t=new Map;return e.forEach((function(e){return t.set(e,e)})),t},ou=function(e,t){"function"===typeof e?e(t):null!=e&&(e.current=t)},su=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){t.forEach((function(t){ou(t,e)}))}},uu=function(e,t,n,r){void 0!==r&&r();var a=Js(e),i=function(t){(0,xe.Z)(i,t);var r=(0,Ie.Z)(i);function i(e){var t;return(0,Se.Z)(this,i),(t=r.call(this,e)).setComponentElRef=function(e){t.componentEl=e},t}return(0,Te.Z)(i,[{key:"componentDidMount",value:function(){this.componentDidUpdate(this.props)}},{key:"componentDidUpdate",value:function(e){tu(this.componentEl,this.props,e)}},{key:"render",value:function(){var t=this.props,r=t.children,a=t.forwardedRef,i=t.style,o=(t.className,t.ref,xt(t,["children","forwardedRef","style","className","ref"])),s=Object.keys(o).reduce((function(e,t){if(0===t.indexOf("on")&&t[2]===t[2].toUpperCase()){var n=t.substring(2).toLowerCase();"undefined"!==typeof document&&ru(n)&&(e[t]=o[t])}else e[t]=o[t];return e}),{});n&&(s=n(this.props,s));var u=Object.assign(Object.assign({},s),{ref:su(a,this.setComponentElRef),style:i});return(0,S.createElement)(e,u,r)}}],[{key:"displayName",get:function(){return a}}]),i}(S.Component);return t&&(i.contextType=t),function(e,t){var n=function(t,n){return S.createElement(e,Object.assign({},t,{forwardedRef:n}))};return n.displayName=t,S.forwardRef(n)}(i,a)},cu=uu("ion-buttons",void 0,void 0,rn),lu=uu("ion-card-header",void 0,void 0,on),du=uu("ion-card-title",void 0,void 0,un),fu=uu("ion-chip",void 0,void 0,mn),hu=uu("ion-col",void 0,void 0,In),pu=uu("ion-content",void 0,void 0,Cn),vu=uu("ion-grid",void 0,void 0,ma),mu=uu("ion-header",void 0,void 0,Ea),gu=uu("ion-img",void 0,void 0,Za),yu=uu("ion-label",void 0,void 0,ja),bu=uu("ion-progress-bar",void 0,void 0,mi),ku=uu("ion-row",void 0,void 0,zi),wu=uu("ion-text",void 0,void 0,bo),xu=uu("ion-title",void 0,void 0,xo),Iu=uu("ion-toolbar",void 0,void 0,Eo),Su=function(e,t){var n=function(t,n){return S.createElement(e,Object.assign({},t,{forwardedRef:n}))};return n.displayName=t,S.forwardRef(n)},Tu=function(e,t){!function(e,t){void 0===t||"undefined"===typeof customElements||customElements.get(e)||customElements.define(e,t)}(e,t);var n=Js(e),r=function(t){(0,xe.Z)(a,t);var r=(0,Ie.Z)(a);function a(e){var t;return(0,Se.Z)(this,a),(t=r.call(this,e)).handleClick=function(e){var n=t.props,r=n.routerLink,a=n.routerDirection,i=n.routerOptions,o=n.routerAnimation;void 0!==r&&(e.preventDefault(),t.context.navigate(r,a,void 0,o,i))},t.ref=S.createRef(),t.stableMergedRefs=su(t.ref,t.props.forwardedRef),t}return(0,Te.Z)(a,[{key:"componentDidMount",value:function(){this.componentDidUpdate(this.props)}},{key:"componentDidUpdate",value:function(e){var t=this.ref.current;tu(t,this.props,e)}},{key:"render",value:function(){var t=this,n=this.props,r=n.children,a=(n.forwardedRef,n.style),i=(n.className,n.ref,xt(n,["children","forwardedRef","style","className","ref"])),o=Object.keys(i).reduce((function(e,t){if(0===t.indexOf("on")&&t[2]===t[2].toUpperCase()){var n=t.substring(2).toLowerCase();ru(n)&&(e[t]=i[t])}else["string","boolean","number"].includes(typeof i[t])&&(e[eu(t)]=i[t]);return e}),{}),s=Object.assign(Object.assign({},o),{ref:this.stableMergedRefs,style:a});if(this.props.routerLink&&!this.props.href&&(s.href=this.props.routerLink),s.onClick){var u=s.onClick;s.onClick=function(e){u(e),e.defaultPrevented||t.handleClick(e)}}else s.onClick=this.handleClick;return(0,S.createElement)(e,s,r)}}],[{key:"displayName",get:function(){return n}},{key:"contextType",get:function(){return Qs}}]),a}(S.Component);return Su(r,n)},Eu=Tu("ion-button",Fo),Nu=Tu("ion-card",Po),Cu=function(e,t){var n=e.__events||(e.__events={}),r=n[t];r&&(e.removeEventListener(t,r),n[t]=void 0)},Zu=function(e,t){t&&t();var n=Js(e),r=function(t){(0,xe.Z)(a,t);var r=(0,Ie.Z)(a);function a(e){var t;return(0,Se.Z)(this,a),(t=r.call(this,e)).handleIonMount=function(){t.setState({isOpen:!0})},t.handleWillPresent=function(e){t.setState({isOpen:!0}),t.props.onWillPresent&&t.props.onWillPresent(e)},t.handleDidDismiss=function(e){var n=t.wrapperRef.current,r=t.ref.current;n&&r&&(r.append(n),t.setState({isOpen:!1})),t.props.onDidDismiss&&t.props.onDidDismiss(e)},t.ref=S.createRef(),t.stableMergedRefs=su(t.ref,t.props.forwardedRef),t.state={isOpen:!1},t.wrapperRef=S.createRef(),t}return(0,Te.Z)(a,[{key:"componentDidMount",value:function(){var e,t,n;this.componentDidUpdate(this.props),null===(e=this.ref.current)||void 0===e||e.addEventListener("ionMount",this.handleIonMount),null===(t=this.ref.current)||void 0===t||t.addEventListener("willPresent",this.handleWillPresent),null===(n=this.ref.current)||void 0===n||n.addEventListener("didDismiss",this.handleDidDismiss)}},{key:"componentDidUpdate",value:function(e){var t=this.ref.current;tu(t,this.props,e)}},{key:"componentWillUnmount",value:function(){var e=this.ref.current;e&&this.state.isOpen&&(e.removeEventListener("didDismiss",this.handleDidDismiss),e.remove(),function(e,t){e instanceof Element&&Object.keys(t).forEach((function(t){if(0===t.indexOf("on")&&t[2]===t[2].toUpperCase()){var n=t.substring(2),r=n[0].toLowerCase()+n.substring(1);ru(r)||Cu(e,r)}}))}(e,this.props))}},{key:"render",value:function(){var t=this.props,n=t.children,r=(t.forwardedRef,t.style),a=(t.className,t.ref,xt(t,["children","forwardedRef","style","className","ref"])),i=Object.keys(a).reduce((function(e,t){if(0===t.indexOf("on")&&t[2]===t[2].toUpperCase()){var n=t.substring(2).toLowerCase();ru(n)&&(e[t]=a[t])}else["string","boolean","number"].includes(typeof a[t])&&(e[eu(t)]=a[t]);return e}),{}),o=Object.assign(Object.assign({},i),{ref:this.stableMergedRefs,style:r});return(0,S.createElement)("template",{},(0,S.createElement)(e,o,this.state.isOpen||this.props.keepContentsMounted?(0,S.createElement)("div",{id:"ion-react-wrapper",ref:this.wrapperRef,className:"ion-delegate-host",style:{display:"flex",flexDirection:"column",height:"100%"}},n):null))}}],[{key:"displayName",get:function(){return n}}]),a}(S.Component);return Su(r,n)},_u=Zu("ion-modal",xs),Au=S.createContext({addOverlay:function(){},removeOverlay:function(){}}),Ru=function(e){var t=e.onAddOverlay,n=e.onRemoveOverlay,r=(0,S.useState)({}),a=(0,ge.Z)(r,2),i=a[0],o=a[1],s=(0,S.useRef)({});s.current=i,(0,S.useEffect)((function(){t(u),n(c)}),[]);var u=function(e,t,n){var r=Object.assign({},s.current);r[e]={component:t,containerElement:n},o(r)},c=function(e){var t=Object.assign({},s.current);delete t[e],o(t)},l=Object.keys(i);return S.createElement(S.Fragment,null,l.map((function(e){var t=i[e];return Tt.createPortal(t.component,t.containerElement,"overlay-".concat(e))})))},Du=uu("ion-tab-button",void 0,void 0,Os),Ou=uu("ion-tab-bar",void 0,void 0,_s),Lu=uu("ion-router-outlet",void 0,void 0,Cs),Fu=uu("ion-app",void 0,void 0,Es),Mu=uu("ion-icon",void 0,void 0,Ks),Pu=function(){return function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r;return(0,Se.Z)(this,n),(r=t.call(this,e)).ionContext={addOverlay:function(e,t,n){r.addOverlayCallback&&r.addOverlayCallback(e,t,n)},removeOverlay:function(e){r.removeOverlayCallback&&r.removeOverlayCallback(e)}},r}return(0,Te.Z)(n,[{key:"render",value:function(){var e=this;return S.createElement(Au.Provider,{value:this.ionContext},S.createElement(Fu,Object.assign({},this.props),this.props.children),S.createElement(Ru,{onAddOverlay:function(t){e.addOverlayCallback=t},onRemoveOverlay:function(t){e.removeOverlayCallback=t}}))}}],[{key:"displayName",get:function(){return"IonApp"}}]),n}(S.Component)}(),zu=S.createContext({registerIonPage:function(){},isInOutlet:function(){return!1}}),Bu=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r;return(0,Se.Z)(this,n),(r=t.call(this,e)).ionPageElementRef=S.createRef(),r.stableMergedRefs=su(r.ionPageElementRef,r.props.forwardedRef),r}return(0,Te.Z)(n,[{key:"componentDidMount",value:function(){this.ionPageElementRef.current&&(this.context.isInOutlet()&&this.ionPageElementRef.current.classList.add("ion-page-invisible"),this.context.registerIonPage(this.ionPageElementRef.current,this.props.routeInfo),this.ionPageElementRef.current.addEventListener("ionViewWillEnter",this.ionViewWillEnterHandler.bind(this)),this.ionPageElementRef.current.addEventListener("ionViewDidEnter",this.ionViewDidEnterHandler.bind(this)),this.ionPageElementRef.current.addEventListener("ionViewWillLeave",this.ionViewWillLeaveHandler.bind(this)),this.ionPageElementRef.current.addEventListener("ionViewDidLeave",this.ionViewDidLeaveHandler.bind(this)))}},{key:"componentWillUnmount",value:function(){this.ionPageElementRef.current&&(this.ionPageElementRef.current.removeEventListener("ionViewWillEnter",this.ionViewWillEnterHandler.bind(this)),this.ionPageElementRef.current.removeEventListener("ionViewDidEnter",this.ionViewDidEnterHandler.bind(this)),this.ionPageElementRef.current.removeEventListener("ionViewWillLeave",this.ionViewWillLeaveHandler.bind(this)),this.ionPageElementRef.current.removeEventListener("ionViewDidLeave",this.ionViewDidLeaveHandler.bind(this)))}},{key:"ionViewWillEnterHandler",value:function(){this.ionLifeCycleContext.ionViewWillEnter()}},{key:"ionViewDidEnterHandler",value:function(){this.ionLifeCycleContext.ionViewDidEnter()}},{key:"ionViewWillLeaveHandler",value:function(){this.ionLifeCycleContext.ionViewWillLeave()}},{key:"ionViewDidLeaveHandler",value:function(){this.ionLifeCycleContext.ionViewDidLeave()}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,r=t.children,a=(t.routeInfo,t.forwardedRef,xt(t,["className","children","routeInfo","forwardedRef"]));return S.createElement(Xs.Consumer,null,(function(t){return e.ionLifeCycleContext=t,S.createElement("div",Object.assign({className:n?"".concat(n," ion-page"):"ion-page",ref:e.stableMergedRefs},a),r)}))}}],[{key:"contextType",get:function(){return zu}}]),n}(S.PureComponent),Vu=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){return(0,Se.Z)(this,n),t.call(this,e)}return(0,Te.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.children,r=e.forwardedRef,a=xt(e,["className","children","forwardedRef"]);return this.context.hasIonicRouter()?S.createElement(Bu,Object.assign({className:t?"".concat(t):"",routeInfo:this.context.routeInfo,forwardedRef:r},a),n):S.createElement("div",Object.assign({className:t?"ion-page ".concat(t):"ion-page",ref:r},a),n)}}],[{key:"displayName",get:function(){return"IonPage"}},{key:"contextType",get:function(){return Qs}}]),n}(S.Component),Uu=Su(Vu,"IonPage"),Wu=uu("ion-nav",void 0,void 0,fi),ju=(Su((function(e){e.children;var t=e.forwardedRef,n=xt(e,["children","forwardedRef"]),r=(0,S.useState)([]),a=(0,ge.Z)(r,2),i=a[0],o=a[1],s=function(e,t){var n=new WeakMap,r=function(){var t=(0,ke.Z)((0,be.Z)().mark((function t(r,a,i,o){var s,u,c,l;return(0,be.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u=document.createElement("div"),o&&(s=u.classList).add.apply(s,(0,me.Z)(o)),r.appendChild(u),c=a(i),l=(0,Tt.createPortal)(c,u),n.set(a,l),e(l),t.abrupt("return",Promise.resolve(u));case 8:case"end":return t.stop()}}),t)})));return function(e,n,r,a){return t.apply(this,arguments)}}();return{attachViewToDom:r,removeViewFromDom:function(e,r){var a=n.get(r);return a&&t(a),Promise.resolve()}}}((function(e){return o([].concat((0,me.Z)(i),[e]))}),(function(e){return o(i.filter((function(t){return t!==e})))}));return S.createElement(Wu,Object.assign({delegate:s,ref:t},n),i)}),"IonNav"),S.createContext({activeTab:void 0,selectTab:function(){return!1}})),Gu="undefined"!==typeof HTMLElement?HTMLElement:function(){return(0,Te.Z)((function e(){(0,Se.Z)(this,e)}))}(),Hu=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r;return(0,Se.Z)(this,n),(r=t.call(this,e)).outletIsReady=!1,r}return(0,Te.Z)(n,[{key:"componentDidMount",value:function(){var e=this;this.ionRouterOutlet&&(this.outletIsReady||(0,qe.c)(this.ionRouterOutlet,(function(){e.outletIsReady=!0,e.context.registerIonPage(e.ionRouterOutlet,e.props.routeInfo)})),this.ionRouterOutlet.addEventListener("ionViewWillEnter",this.ionViewWillEnterHandler.bind(this)),this.ionRouterOutlet.addEventListener("ionViewDidEnter",this.ionViewDidEnterHandler.bind(this)),this.ionRouterOutlet.addEventListener("ionViewWillLeave",this.ionViewWillLeaveHandler.bind(this)),this.ionRouterOutlet.addEventListener("ionViewDidLeave",this.ionViewDidLeaveHandler.bind(this)))}},{key:"componentWillUnmount",value:function(){this.ionRouterOutlet&&(this.ionRouterOutlet.removeEventListener("ionViewWillEnter",this.ionViewWillEnterHandler.bind(this)),this.ionRouterOutlet.removeEventListener("ionViewDidEnter",this.ionViewDidEnterHandler.bind(this)),this.ionRouterOutlet.removeEventListener("ionViewWillLeave",this.ionViewWillLeaveHandler.bind(this)),this.ionRouterOutlet.removeEventListener("ionViewDidLeave",this.ionViewDidLeaveHandler.bind(this)))}},{key:"ionViewWillEnterHandler",value:function(){this.ionLifeCycleContext.ionViewWillEnter()}},{key:"ionViewDidEnterHandler",value:function(){this.ionLifeCycleContext.ionViewDidEnter()}},{key:"ionViewWillLeaveHandler",value:function(){this.ionLifeCycleContext.ionViewWillLeave()}},{key:"ionViewDidLeaveHandler",value:function(){this.ionLifeCycleContext.ionViewDidLeave()}},{key:"render",value:function(){var e=this,t=this.props,n=t.StackManager,r=t.children,a=t.routeInfo,i=xt(t,["StackManager","children","routeInfo"]);return S.createElement(Xs.Consumer,null,(function(t){return e.ionLifeCycleContext=t,S.createElement(n,{routeInfo:a},S.createElement(Lu,Object.assign({setRef:function(t){return e.ionRouterOutlet=t}},i),r))}))}}],[{key:"contextType",get:function(){return zu}}]),n}(S.Component),qu=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){return(0,Se.Z)(this,n),t.call(this,e)}return(0,Te.Z)(n,[{key:"render",value:function(){var e=this.context.getStackManager(),t=this.props,n=t.children,r=t.forwardedRef,a=xt(t,["children","forwardedRef"]);return this.context.hasIonicRouter()?a.ionPage?S.createElement(Hu,Object.assign({StackManager:e,routeInfo:this.context.routeInfo},a),n):S.createElement(e,{routeInfo:this.context.routeInfo},S.createElement(Lu,Object.assign({},a,{forwardedRef:r}),n)):S.createElement(Lu,Object.assign({ref:r},this.props),this.props.children)}}],[{key:"contextType",get:function(){return Qs}}]),n}(S.Component),$u=Su(qu,"IonRouterOutlet"),Ku=function(){return function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r;return(0,Se.Z)(this,n),(r=t.call(this,e)).handleIonTabButtonClick=r.handleIonTabButtonClick.bind((0,we.Z)(r)),r}return(0,Te.Z)(n,[{key:"handleIonTabButtonClick",value:function(){this.props.onClick&&this.props.onClick(new CustomEvent("ionTabButtonClick",{detail:{tab:this.props.tab,href:this.props.href,routeOptions:this.props.routerOptions}}))}},{key:"render",value:function(){var e=xt(this.props,["onClick"]);return S.createElement(Du,Object.assign({onIonTabButtonClick:this.handleIonTabButtonClick},e))}}],[{key:"displayName",get:function(){return"IonTabButton"}}]),n}(S.Component)}(),Xu=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r;(0,Se.Z)(this,n),(r=t.call(this,e)).setActiveTabOnContext=function(e){};var a={};return S.Children.forEach(e.children,(function(t){var n,r,i,o;null!=t&&"object"===typeof t&&t.props&&(t.type===Ku||t.type.isTabButton)&&(a[t.props.tab]={originalHref:t.props.href,currentHref:t.props.href,originalRouteOptions:t.props.href===(null===(n=e.routeInfo)||void 0===n?void 0:n.pathname)?null===(r=e.routeInfo)||void 0===r?void 0:r.routeOptions:void 0,currentRouteOptions:t.props.href===(null===(i=e.routeInfo)||void 0===i?void 0:i.pathname)?null===(o=e.routeInfo)||void 0===o?void 0:o.routeOptions:void 0})})),r.state={tabs:a},r.onTabButtonClick=r.onTabButtonClick.bind((0,we.Z)(r)),r.renderTabButton=r.renderTabButton.bind((0,we.Z)(r)),r.setActiveTabOnContext=r.setActiveTabOnContext.bind((0,we.Z)(r)),r.selectTab=r.selectTab.bind((0,we.Z)(r)),r}return(0,Te.Z)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.state.tabs,n=Object.keys(t).find((function(n){var r=t[n].originalHref;return e.props.routeInfo.pathname.startsWith(r)}));n&&this.setState({activeTab:n})}},{key:"componentDidUpdate",value:function(){this.state.activeTab&&this.setActiveTabOnContext(this.state.activeTab)}},{key:"selectTab",value:function(e){var t=this.state.tabs[e];return!!t&&(this.onTabButtonClick(new CustomEvent("ionTabButtonClick",{detail:{href:t.currentHref,tab:e,selected:e===this.state.activeTab,routeOptions:void 0}})),!0)}},{key:"onTabButtonClick",value:function(e,t){var n=this.state.tabs[e.detail.tab],r=n.originalHref,a=e.detail.href,i=this.state.activeTab;t&&t(e),i===e.detail.tab?r!==a&&this.context.resetTab(e.detail.tab,r,n.originalRouteOptions):(this.props.onIonTabsWillChange&&this.props.onIonTabsWillChange(new CustomEvent("ionTabWillChange",{detail:{tab:e.detail.tab}})),this.props.onIonTabsDidChange&&this.props.onIonTabsDidChange(new CustomEvent("ionTabDidChange",{detail:{tab:e.detail.tab}})),this.setActiveTabOnContext(e.detail.tab),this.context.changeTab(e.detail.tab,a,e.detail.routeOptions))}},{key:"renderTabButton",value:function(e){var t=this;return function(n){var r,a;if(null!=n&&n.props&&(n.type===Ku||n.type.isTabButton)){var i=n.props.tab===e?null===(r=t.props.routeInfo)||void 0===r?void 0:r.pathname:t.state.tabs[n.props.tab].currentHref,o=n.props.tab===e?null===(a=t.props.routeInfo)||void 0===a?void 0:a.routeOptions:t.state.tabs[n.props.tab].currentRouteOptions;return S.cloneElement(n,{href:i,routeOptions:o,onClick:function(e){return t.onTabButtonClick(e,n.props.onClick)}})}return null}}},{key:"render",value:function(){var e=this.state.activeTab;return S.createElement(Ou,Object.assign({},this.props,{selectedTab:e}),S.Children.map(this.props.children,this.renderTabButton(e)))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n,r,a,i=Object.assign({},t.tabs),o=Object.keys(t.tabs).find((function(n){var r=t.tabs[n].originalHref;return e.routeInfo.pathname.startsWith(r)}));S.Children.forEach(e.children,(function(e){if(null!=e&&"object"===typeof e&&e.props&&(e.type===Ku||e.type.isTabButton)){var t=i[e.props.tab];t&&t.originalHref===e.props.href||(i[e.props.tab]={originalHref:e.props.href,currentHref:e.props.href,originalRouteOptions:e.props.routeOptions,currentRouteOptions:e.props.routeOptions})}}));var s=t.activeTab;if(o&&s){var u=t.tabs[s].currentHref,c=t.tabs[s].currentRouteOptions;o===s&&u===(null===(n=e.routeInfo)||void 0===n?void 0:n.pathname)&&c===(null===(r=e.routeInfo)||void 0===r?void 0:r.routeOptions)||(i[o]={originalHref:i[o].originalHref,currentHref:e.routeInfo.pathname+(e.routeInfo.search||""),originalRouteOptions:i[o].originalRouteOptions,currentRouteOptions:null===(a=e.routeInfo)||void 0===a?void 0:a.routeOptions},"pop"===e.routeInfo.routeAction&&o!==s&&(i[s]={originalHref:i[s].originalHref,currentHref:i[s].originalHref,originalRouteOptions:i[s].originalRouteOptions,currentRouteOptions:i[s].currentRouteOptions}))}return o&&e.onSetCurrentTab(o,e.routeInfo),{activeTab:o,tabs:i}}},{key:"contextType",get:function(){return Qs}}]),n}(S.PureComponent),Yu=S.memo((function(e){var t=e.forwardedRef,n=xt(e,["forwardedRef"]),r=(0,S.useContext)(Qs);return S.createElement(Xu,Object.assign({ref:t},n,{routeInfo:n.routeInfo||r.routeInfo||{pathname:window.location.pathname},onSetCurrentTab:r.setCurrentTab}),n.children)})),Qu=Su(Yu,"IonTabBar"),Ju=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(){return(0,Se.Z)(this,n),t.call(this)}return(0,Te.Z)(n)}(Gu);"undefined"!==typeof window&&window.customElements&&(window.customElements.get("ion-tabs")||window.customElements.define("ion-tabs",Ju));var ec={display:"flex",position:"absolute",top:"0",left:"0",right:"0",bottom:"0",flexDirection:"column",width:"100%",height:"100%",contain:"layout size style"},tc={position:"relative",flex:1,contain:"layout size style"},nc=function(){return function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r;return(0,Se.Z)(this,n),(r=t.call(this,e)).routerOutletRef=S.createRef(),r.tabBarRef=S.createRef(),r.ionTabContextState={activeTab:void 0,selectTab:function(){return!1}},r}return(0,Te.Z)(n,[{key:"componentDidMount",value:function(){var e=this;this.tabBarRef.current&&(this.ionTabContextState.activeTab=this.tabBarRef.current.state.activeTab,this.tabBarRef.current.setActiveTabOnContext=function(t){e.ionTabContextState.activeTab=t},this.ionTabContextState.selectTab=this.tabBarRef.current.selectTab)}},{key:"render",value:function(){var e,t,n=this,r=this.props,a=r.className,i=r.onIonTabsDidChange,o=r.onIonTabsWillChange,s=xt(r,["className","onIonTabsDidChange","onIonTabsWillChange"]),u="function"===typeof this.props.children?this.props.children(this.ionTabContextState):this.props.children;if(S.Children.forEach(u,(function(r){if(null!=r&&"object"===typeof r&&r.hasOwnProperty("type")){r.type===$u||r.type.isRouterOutlet?e=S.cloneElement(r):r.type===S.Fragment&&r.props.children[0].type===$u&&(e=r.props.children[0]);var a={ref:n.tabBarRef};void 0!==i&&(a=Object.assign(Object.assign({},a),{onIonTabsDidChange:i})),void 0!==o&&(a=Object.assign(Object.assign({},a),{onIonTabsWillChange:o})),r.type===Qu||r.type.isTabBar?t=S.cloneElement(r,a):r.type!==S.Fragment||r.props.children[1].type!==Qu&&!r.props.children[1].type.isTabBar||(t=S.cloneElement(r.props.children[1],a))}})),!e)throw new Error("IonTabs must contain an IonRouterOutlet");if(!t)throw new Error("IonTabs needs a IonTabBar");return S.createElement(ju.Provider,{value:this.ionTabContextState},this.context.hasIonicRouter()?S.createElement(Bu,Object.assign({className:a?"".concat(a):"",routeInfo:this.context.routeInfo},s),S.createElement("ion-tabs",{className:"ion-tabs",style:ec},"top"===t.props.slot?t:null,S.createElement("div",{style:tc,className:"tabs-inner"},e),"bottom"===t.props.slot?t:null)):S.createElement("div",Object.assign({className:a?"".concat(a):"ion-tabs"},s,{style:ec}),"top"===t.props.slot?t:null,S.createElement("div",{style:tc,className:"tabs-inner"},e),"bottom"===t.props.slot?t:null))}}],[{key:"contextType",get:function(){return Qs}}]),n}(S.Component)}(),rc=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r;return(0,Se.Z)(this,n),(r=t.call(this,e)).props.name&&console.warn('In Ionic React, you import icons from "ionicons/icons" and set the icon you imported to the "icon" property. Setting the "name" property has no effect.'),r}return(0,Te.Z)(n,[{key:"render",value:function(){var e,t,n,r=this.props,a=r.icon,i=r.ios,o=r.md,s=r.mode,u=xt(r,["icon","ios","md","mode"]),c=function(){if("undefined"!==typeof window){var e=window.Ionic;if(e&&e.config)return e.config}return null}(),l=s||(null===c||void 0===c?void 0:c.get("mode"));return n=i||o?"ios"===l?null!==(e=null!==i&&void 0!==i?i:o)&&void 0!==e?e:a:null!==(t=null!==o&&void 0!==o?o:i)&&void 0!==t?t:a:a,S.createElement(Mu,Object.assign({ref:this.props.forwardedRef,icon:n},u),this.props.children)}}],[{key:"contextType",get:function(){return Qs}}]),n}(S.PureComponent),ac=Su(rc,"IonIcon"),ic=(S.PureComponent,S.PureComponent,S.createContext({routeInfo:void 0,push:function(){throw new Error("An Ionic Router is required for IonRouterContext")},back:function(){throw new Error("An Ionic Router is required for IonRouterContext")},canGoBack:function(){throw new Error("An Ionic Router is required for IonRouterContext")},nativeBack:function(){throw new Error("An Ionic Router is required for IonRouterContext")}}));S.PureComponent;var oc=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=["children","progressStart","progressStep","progressEnd","pause","stop","destroy","play","from","to","fromTo","onFinish"];for(var a in t)t.hasOwnProperty(a)&&!r.includes(a)&&t[a]!==n[a]&&e[a](t[a]);var i=t.from;i&&i!==n.from&&(Array.isArray(i)?i:[i]).forEach((function(t){return e.from(t.property,t.value)}));var o=t.to;o&&o!==n.to&&(Array.isArray(o)?o:[o]).forEach((function(t){return e.to(t.property,t.value)}));var s=t.fromTo;s&&s!==n.fromTo&&(Array.isArray(s)?s:[s]).forEach((function(t){return e.fromTo(t.property,t.fromValue,t.toValue)}));var u=t.onFinish;u&&u!==n.onFinish&&(Array.isArray(u)?u:[u]).forEach((function(t){return e.onFinish(t.callback,t.opts)}))},sc=function(e){var t,n,r,a,i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},u=o.progressStart,c=o.progressStep,l=o.progressEnd;!u||(null===(t=s.progressStart)||void 0===t?void 0:t.forceLinearEasing)===(null===u||void 0===u?void 0:u.forceLinearEasing)&&(null===(n=s.progressStart)||void 0===n?void 0:n.step)===(null===u||void 0===u?void 0:u.step)||e.progressStart(u.forceLinearEasing,u.step),c&&(null===(r=s.progressStep)||void 0===r?void 0:r.step)!==(null===c||void 0===c?void 0:c.step)&&e.progressStep(c.step),!l||(null===(a=s.progressEnd)||void 0===a?void 0:a.playTo)===(null===l||void 0===l?void 0:l.playTo)&&(null===(i=s.progressEnd)||void 0===i?void 0:i.step)===(null===l||void 0===l?void 0:l.step)&&(null===s||void 0===s?void 0:s.dur)===(null===l||void 0===l?void 0:l.dur)||e.progressEnd(l.playTo,l.step,l.dur)},uc=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!n.play&&t.play&&e.play(),!n.pause&&t.pause&&e.pause(),!n.stop&&t.stop&&e.stop(),!n.destroy&&t.destroy&&e.destroy()};S.Component,S.PureComponent;var cc=n(6653),lc=n(2012),dc=(0,cc.fo)("Camera",{web:function(){return n.e(133).then(n.bind(n,7133)).then((function(e){return new e.CameraWeb}))}}),fc=function(){function e(t,n){(0,Se.Z)(this,e),this.backend=t,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}return(0,Te.Z)(e,[{key:"get",value:function(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}},{key:"set",value:function(e,t){this.dataIdsCount++,this.data.set(e,t)}},{key:"has",value:function(e){return this.data.has(e)}},{key:"delete",value:function(e){return this.dataIdsCount--,this.data.delete(e)}},{key:"numDataIds",value:function(){return this.dataIdsCount}}]),e}(),hc=function(){function e(){(0,Se.Z)(this,e)}return(0,Te.Z)(e,[{key:"refCount",value:function(e){return pc("refCount")}},{key:"incRef",value:function(e){return pc("incRef")}},{key:"timerAvailable",value:function(){return!0}},{key:"time",value:function(e){return pc("time")}},{key:"read",value:function(e){return pc("read")}},{key:"readSync",value:function(e){return pc("readSync")}},{key:"readToGPU",value:function(e,t){return pc("readToGPU")}},{key:"numDataIds",value:function(){return pc("numDataIds")}},{key:"disposeData",value:function(e,t){return pc("disposeData")}},{key:"write",value:function(e,t,n){return pc("write")}},{key:"move",value:function(e,t,n,r,a){return pc("move")}},{key:"createTensorFromGPUData",value:function(e,t,n){return pc("createTensorFromGPUData")}},{key:"memory",value:function(){return pc("memory")}},{key:"floatPrecision",value:function(){return pc("floatPrecision")}},{key:"epsilon",value:function(){return 32===this.floatPrecision()?1e-7:1e-4}},{key:"dispose",value:function(){return pc("dispose")}}]),e}();function pc(e){throw new Error("'".concat(e,"' not yet implemented or not found in the registry. ")+"This kernel may not be supported by the tfjs backend you have chosen")}function vc(e){for(var t=e.length,n=0;t>0;)n=Math.random()*t|0,yc(e,--t,n)}function mc(e,t,n){return Math.max(e,Math.min(t,n))}function gc(e){return e%2===0?e:e+1}function yc(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function bc(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];return t}function kc(e,t){if(!e)throw new Error("string"===typeof t?t:t())}function wc(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";kc(Sc(e,t),(function(){return n+" Shapes ".concat(e," and ").concat(t," must match")}))}function xc(e){kc(null!=e,(function(){return"The input to the tensor constructor must be a non-null value."}))}function Ic(e){if(0===e.length)return 1;for(var t=e[0],n=1;n<e.length;n++)t*=e[n];return t}function Sc(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Tc(e){return e%1===0}function Ec(e){var t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function Nc(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function Cc(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return 0},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return new Promise((function(a,i){var o=0;!function s(){if(e())a();else{o++;var u=t(o);null!=n&&o>=n?i():null!=r?r(s,u):setTimeout(s,u)}}()}))}function Zc(e,t){for(var n=1,r=-1,a=0;a<e.length;++a)if(e[a]>=0)n*=e[a];else if(-1===e[a]){if(-1!==r)throw Error("Shapes can only have 1 implicit size. "+"Found -1 at dim ".concat(r," and dim ").concat(a));r=a}else if(e[a]<0)throw Error("Shapes can not be < 0. Found ".concat(e[a]," at dim ").concat(a));if(-1===r){if(t>0&&t!==n)throw Error("Size(".concat(t,") must match the product of shape ").concat(e));return e}if(0===n)throw Error("Cannot infer the missing size in [".concat(e,"] when ")+"there are 0 elements");if(t%n!==0)throw Error("The implicit shape can't be a fractional number. "+"Got ".concat(t," / ").concat(n));var i=e.slice();return i[r]=t/n,i}function _c(e,t){var n=t.length;return kc((e=null==e?t.map((function(e,t){return t})):[].concat(e)).every((function(e){return e>=-n&&e<n})),(function(){return"All values in axis param must be in range [-".concat(n,", ").concat(n,") but ")+"got axis ".concat(e)})),kc(e.every((function(e){return Tc(e)})),(function(){return"All values in axis param must be integers but "+"got axis ".concat(e)})),e.map((function(e){return e<0?n+e:e}))}function Ac(e,t){for(var n=[],r=[],a=null!=t&&Array.isArray(t)&&0===t.length,i=null==t||a?null:_c(t,e).sort(),o=0,s=0;s<e.length;++s){if(null!=i){if(i[o]===s&&1!==e[s])throw new Error("Can't squeeze axis ".concat(s," since its dim '").concat(e[s],"' is not 1"));(null==i[o]||i[o]>s)&&1===e[s]&&(n.push(e[s]),r.push(s)),i[o]<=s&&o++}1!==e[s]&&(n.push(e[s]),r.push(s))}return{newShape:n,keptDims:r}}function Rc(e,t){return Dc(e,t)}function Dc(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else if("bool"===e)n=new Uint8Array(t);else{if("string"!==e)throw new Error("Unknown data type ".concat(e));n=new Array(t)}return n}function Oc(e,t){return"complex64"!==t&&(("float32"!==t||"complex64"===e)&&(("int32"!==t||"float32"===e||"complex64"===e)&&("bool"!==t||"bool"!==e)))}function Lc(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw new Error("Unknown dtype ".concat(e))}function Fc(e){return"string"===typeof e||e instanceof String}function Mc(e){return"number"===typeof e}function Pc(e){return Array.isArray(e)?Pc(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray?"int32":Mc(e)?"float32":Fc(e)?"string":"boolean"===typeof e?"bool":"float32"}function zc(e){return!!(e&&e.constructor&&e.call&&e.apply)}function Bc(e,t){for(var n=t;n<e;++n)if(e%n===0)return n;return e}function Vc(e){var t=e.length;if(t<2)return[];var n=new Array(t-1);n[t-2]=e[t-1];for(var r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function Uc(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=new Array;if(1===t.length)for(var i=t[0]*(r?2:1),o=0;o<i;o++)a[o]=n[e+o];else for(var s=t[0],u=t.slice(1),c=u.reduce((function(e,t){return e*t}))*(r?2:1),l=0;l<s;l++)a[l]=Uc(e+l*c,u,n,r);return a}function Wc(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(0===e.length)return t[0];var r=e.reduce((function(e,t){return e*t}))*(n?2:1);if(0===r)return[];if(r!==t.length)throw new Error("[".concat(e,"] does not match the input size ").concat(t.length).concat(n?" for a complex tensor":"","."));return Uc(0,e,t,n)}function jc(e,t){for(var n=Gc(e,t),r=0;r<n.length;r++)n[r]=1;return n}function Gc(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw new Error("Unknown data type ".concat(t))}function Hc(e,t){var n=e.reduce((function(e,t){return e*t}),1);if(null==t||"float32"===t)return Wc(e,new Float32Array(n));if("int32"===t)return Wc(e,new Int32Array(n));if("bool"===t)return Wc(e,new Uint8Array(n));throw new Error("Unknown data type ".concat(t))}function qc(e){e.forEach((function(t){kc(Number.isInteger(t)&&t>=0,(function(){return"Tensor must have a shape comprised of positive integers but got "+"shape [".concat(e,"].")}))}))}function $c(e,t,n){if(0===t)return 0;if(1===t)return e[0];for(var r=e[e.length-1],a=0;a<e.length-1;++a)r+=n[a]*e[a];return r}function Kc(e,t,n){if(0===t)return[];if(1===t)return[e];for(var r=new Array(t),a=0;a<r.length-1;++a)r[a]=Math.floor(e/n[a]),e-=r[a]*n[a];return r[r.length-1]=e,r}function Xc(e){return e&&e.then&&"function"===typeof e.then}var Yc="tfjsflags",Qc=function(){function e(t){(0,Se.Z)(this,e),this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=Jc,this.populateURLFlags()}return(0,Te.Z)(e,[{key:"setPlatform",value:function(e,t){null!=this.platform&&(el().getBool("IS_TEST")||el().getBool("PROD")||console.warn("Platform ".concat(this.platformName," has already been set. ")+"Overwriting the platform with ".concat(e,"."))),this.platformName=e,this.platform=t}},{key:"registerFlag",value:function(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},null!=this.urlFlags[e]){var r=this.urlFlags[e];el().getBool("IS_TEST")||el().getBool("PROD")||console.warn("Setting feature override from URL ".concat(e,": ").concat(r,".")),this.set(e,r)}}},{key:"getAsync",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t in this.flags)){e.next=2;break}return e.abrupt("return",this.flags[t]);case 2:return e.next=4,this.evaluateFlag(t);case 4:return this.flags[t]=e.sent,e.abrupt("return",this.flags[t]);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"get",value:function(e){if(e in this.flags)return this.flags[e];var t=this.evaluateFlag(e);if(Xc(t))throw new Error("Flag ".concat(e," cannot be synchronously evaluated. ")+"Please use getAsync() instead.");return this.flags[e]=t,this.flags[e]}},{key:"getNumber",value:function(e){return this.get(e)}},{key:"getBool",value:function(e){return this.get(e)}},{key:"getFlags",value:function(){return this.flags}},{key:"features",get:function(){return this.flags}},{key:"set",value:function(e,t){if(null==this.flagRegistry[e])throw new Error("Cannot set flag ".concat(e," as it has not been registered."));this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)}},{key:"evaluateFlag",value:function(e){if(null==this.flagRegistry[e])throw new Error("Cannot evaluate flag '".concat(e,"': no evaluation function found."));return this.flagRegistry[e].evaluationFn()}},{key:"setFlags",value:function(e){this.flags=Object.assign({},e)}},{key:"reset",value:function(){this.flags={},this.urlFlags={},this.populateURLFlags()}},{key:"populateURLFlags",value:function(){var e=this;if("undefined"!==typeof this.global&&"undefined"!==typeof this.global.location&&"undefined"!==typeof this.global.location.search){var t=this.getQueryParams(this.global.location.search);if(Yc in t)t[Yc].split(",").forEach((function(t){var n=t.split(":"),r=(0,ge.Z)(n,2),a=r[0],i=r[1];e.urlFlags[a]=function(e,t){if("true"===(t=t.toLowerCase())||"false"===t)return"true"===t;if("".concat(+t)===t)return+t;throw new Error("Could not parse value flag value ".concat(t," for flag ").concat(e,"."))}(a,i)}))}}}]),e}();function Jc(e){var t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return function(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}(t,r[0],r[1]),r.join("=")})),t}function el(){return nl}var tl,nl=null;function rl(){if(null==tl){var e;if("undefined"!==typeof window)e=window;else if("undefined"!==typeof n.g)e=n.g;else if("undefined"!==typeof process)e=process;else{if("undefined"===typeof self)throw new Error("Could not find a global object");e=self}tl=e}return tl}function al(e,t){var n=function(){var e=rl();return null==e._tfGlobals&&(e._tfGlobals=new Map),e._tfGlobals}();if(n.has(e))return n.get(e);var r=t();return n.set(e,r),n.get(e)}var il="Abs",ol="Acos",sl="Acosh",ul="Add",cl="AddN",ll="All",dl="Any",fl="ArgMax",hl="ArgMin",pl="Asin",vl="Asinh",ml="Atan",gl="Atanh",yl="Atan2",bl="AvgPool",kl="AvgPoolGrad",wl="AvgPool3D",xl="AvgPool3DGrad",Il="BatchMatMul",Sl="BatchToSpaceND",Tl="Bincount",El="BroadcastArgs",Nl="Cast",Cl="Ceil",Zl="ClipByValue",_l="Complex",Al="ComplexAbs",Rl="Concat",Dl="Conv2D",Ol="Conv2DBackpropFilter",Ll="Conv2DBackpropInput",Fl="Conv3D",Ml="Conv3DBackpropFilterV2",Pl="Conv3DBackpropInputV2",zl="Cos",Bl="Cosh",Vl="Cumprod",Ul="Cumsum",Wl="CropAndResize",jl="DenseBincount",Gl="DepthToSpace",Hl="DepthwiseConv2dNative",ql="DepthwiseConv2dNativeBackpropFilter",$l="DepthwiseConv2dNativeBackpropInput",Kl="Diag",Xl="Dilation2D",Yl="Dilation2DBackpropInput",Ql="Dilation2DBackpropFilter",Jl="RealDiv",ed="Einsum",td="Elu",nd="EluGrad",rd="Erf",ad="Equal",id="Exp",od="ExpandDims",sd="Expm1",ud="FFT",cd="Fill",ld="FlipLeftRight",dd="Floor",fd="FloorDiv",hd="FusedBatchNorm",pd="GatherV2",vd="GatherNd",md="Greater",gd="GreaterEqual",yd="Identity",bd="IFFT",kd="Imag",wd="IsFinite",xd="IsInf",Id="IsNan",Sd="LeakyRelu",Td="Less",Ed="LessEqual",Nd="LinSpace",Cd="Log",Zd="Log1p",_d="LogicalAnd",Ad="LogicalNot",Rd="LogicalOr",Dd="LRN",Od="LRNGrad",Ld="Max",Fd="Maximum",Md="MaxPool",Pd="MaxPoolGrad",zd="MaxPool3D",Bd="MaxPool3DGrad",Vd="MaxPoolWithArgmax",Ud="Mean",Wd="Min",jd="Minimum",Gd="MirrorPad",Hd="Mod",qd="Multinomial",$d="Multiply",Kd="Neg",Xd="NotEqual",Yd="NonMaxSuppressionV3",Qd="NonMaxSuppressionV4",Jd="NonMaxSuppressionV5",ef="OnesLike",tf="OneHot",nf="Pack",rf="PadV2",af="Pow",of="Prelu",sf="Prod",uf="RaggedGather",cf="RaggedRange",lf="RaggedTensorToTensor",df="Range",ff="Real",hf="Reciprocal",pf="Relu",vf="Reshape",mf="ResizeNearestNeighbor",gf="ResizeNearestNeighborGrad",yf="ResizeBilinear",bf="ResizeBilinearGrad",kf="Relu6",wf="Reverse",xf="Round",If="Rsqrt",Sf="ScatterNd",Tf="TensorScatterUpdate",Ef="SearchSorted",Nf="Select",Cf="Selu",Zf="Slice",_f="Sin",Af="Sinh",Rf="Sign",Df="Sigmoid",Of="Softplus",Lf="Sqrt",Ff="Sum",Mf="SpaceToBatchND",Pf="SplitV",zf="Softmax",Bf="SparseFillEmptyRows",Vf="SparseReshape",Uf="SparseSegmentMean",Wf="SparseSegmentSum",jf="SparseToDense",Gf="SquaredDifference",Hf="Square",qf="StaticRegexReplace",$f="StridedSlice",Kf="StringNGrams",Xf="StringSplit",Yf="StringToHashBucketFast",Qf="Sub",Jf="Tan",eh="Tanh",th="Tile",nh="TopK",rh="Transform",ah="Transpose",ih="Unique",oh="Unpack",sh="UnsortedSegmentSum",uh="ZerosLike",ch="Step",lh="FromPixels",dh="RotateWithOffset",fh="_FusedMatMul",hh="FusedConv2D",ph="FusedDepthwiseConv2D";function vh(){var e;el().getBool("IS_TEST")||el().getBool("PROD")||(e=console).warn.apply(e,arguments)}var mh=al("kernelRegistry",(function(){return new Map})),gh=al("gradRegistry",(function(){return new Map}));function yh(e,t){var n=Ih(e,t);return mh.get(n)}function bh(e){return gh.get(e)}function kh(e){for(var t=mh.entries(),n=[];;){var r=t.next(),a=r.done,i=r.value;if(a)break;var o=(0,ge.Z)(i,2),s=o[0],u=o[1],c=s.split("_");(0,ge.Z)(c,1)[0]===e&&n.push(u)}return n}function wh(e){var t=e.kernelName,n=e.backendName,r=Ih(t,n);mh.has(r)&&vh("The kernel '".concat(t,"' for backend ")+"'".concat(n,"' is already registered")),mh.set(r,e)}function xh(e){var t=e.kernelName;gh.has(t)&&el().getBool("DEBUG")&&vh("Overriding the gradient for '".concat(t,"'")),gh.set(t,e)}function Ih(e,t){return"".concat(t,"_").concat(e)}var Sh=n(8987),Th=n.n(Sh)()||Sh;function Eh(e){return Th.fromString(e,!0,16)}var Nh=Eh("c3a5c85c97cb3127"),Ch=Eh("b492b66fbe98f273"),Zh=Eh("9ae16a3b2f90404f");function _h(e){return e.xor(e.shru(47))}function Ah(e,t,n){var r=e.slice(t,t+n);return Th.fromBytes(Array.from(r),!0,!0)}function Rh(e,t){return Ah(e,t,8)}function Dh(e,t){return Ah(e,t,4)}function Oh(e,t){return 0===t?e:e.shru(t).or(e.shl(64-t))}function Lh(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Eh("9ddfea08eb382d69"),r=e.xor(t).mul(n);r=r.xor(r.shru(47));var a=t.xor(r).mul(n);return a=(a=a.xor(a.shru(47))).mul(n)}function Fh(e,t,n,r){return function(e,t,n,r,a,i){a=a.add(e),i=Oh(i.add(a).add(r),21);var o=a;return a=(a=a.add(t)).add(n),i=i.add(Oh(a,44)),[a.add(r),i.add(o)]}(Rh(e,t),Rh(e,t+8),Rh(e,t+16),Rh(e,t+24),n,r)}function Mh(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,n=Th.fromNumber(81,!0);if(t<=32)return t<=16?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;if(t>=8){var n=Zh.add(2*t),r=Rh(e,0).add(Zh),a=Rh(e,t-8);return Lh(Oh(a,37).mul(n).add(r),Oh(r,25).add(a).mul(n),n)}if(t>=4){var i=Zh.add(2*t);return Lh(Dh(e,0).shl(3).add(t),Dh(e,t-4),i)}if(t>0){var o=e[0]+(e[t>>1]<<8),s=t+(e[t-1]<<2);return _h(Zh.mul(o).xor(Nh.mul(s))).mul(Zh)}return Zh}(e,t):function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,n=Zh.add(2*t),r=Rh(e,0).mul(Ch),a=Rh(e,8),i=Rh(e,t-8).mul(n),o=Rh(e,t-16).mul(Zh);return Lh(Oh(r.add(a),43).add(Oh(i,30)).add(o),r.add(Oh(a.add(Zh),18)).add(i),n)}(e,t);if(t<=64)return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,n=Zh.add(2*t),r=Rh(e,0).mul(Zh),a=Rh(e,8),i=Rh(e,t-8).mul(n),o=Rh(e,t-16).mul(Zh),s=Oh(r.add(a),43).add(Oh(i,30)).add(o),u=Lh(s,r.add(Oh(a.add(Zh),18)).add(i),n),c=Rh(e,16).mul(n),l=Rh(e,24),d=s.add(Rh(e,t-32)).mul(n),f=u.add(Rh(e,t-24)).mul(n);return Lh(Oh(c.add(l),43).add(Oh(d,30)).add(f),c.add(Oh(l.add(r),18)).add(d),n)}(e,t);var r=n,a=n.mul(Ch).add(113),i=_h(a.mul(Zh).add(113)).mul(Zh),o=[Th.UZERO,Th.UZERO],s=[Th.UZERO,Th.UZERO];r=r.mul(Zh).add(Rh(e,0));var u=0,c=64*(t-1>>6),l=c+(t-1&63)-63;do{r=Oh(r.add(a).add(o[0]).add(Rh(e,u+8)),37).mul(Ch),a=Oh(a.add(o[1]).add(Rh(e,u+48)),42).mul(Ch),r=r.xor(s[1]),a=a.add(o[0]).add(Rh(e,u+40)),i=Oh(i.add(s[0]),33).mul(Ch),o=Fh(e,u,o[1].mul(Ch),r.add(s[0])),s=Fh(e,u+32,i.add(s[1]),a.add(Rh(e,u+16)));var d=[r,i];i=d[0],r=d[1],u+=64}while(u!==c);var f=Ch.add(i.and(255).shl(1));u=l,s[0]=s[0].add(t-1&63),o[0]=o[0].add(s[0]),s[0]=s[0].add(o[0]),r=Oh(r.add(a).add(o[0]).add(Rh(e,u+8)),37).mul(f),a=Oh(a.add(o[1]).add(Rh(e,u+48)),42).mul(f),r=r.xor(s[1].mul(9)),a=a.add(o[0].mul(9).add(Rh(e,u+40))),i=Oh(i.add(s[0]),33).mul(f),o=Fh(e,u,o[1].mul(f),r.add(s[0])),s=Fh(e,u+32,i.add(s[1]),a.add(Rh(e,u+16)));var h=[r,i];return i=h[0],r=h[1],Lh(Lh(o[0],s[0],f).add(_h(a).mul(Nh)).add(i),Lh(o[1],s[1],f).add(r),f)}function Ph(e,t){return"string"===t?Vh(e):zh([e],t)}function zh(e,t){if("string"===t)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=jh(e)),el().getBool("DEBUG")&&function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type ".concat(t," being uploaded contains ").concat(r,"."))}}(e,t),function(e,t){return e instanceof Float32Array&&"float32"===t||e instanceof Int32Array&&"int32"===t||e instanceof Uint8Array&&"bool"===t}(e,t))return e;if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t){for(var n=new Uint8Array(e.length),r=0;r<n.length;++r)0!==Math.round(e[r])&&(n[r]=1);return n}throw new Error("Unknown data type ".concat(t))}function Bh(){return el().platform.now()}function Vh(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",el().platform.encode(e,t)}function Uh(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",el().platform.decode(e,t)}function Wh(e){return el().platform.isTypedArray(e)}function jh(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==t&&(t=[]),"boolean"===typeof e||"number"===typeof e||"string"===typeof e||Xc(e)||null==e||Wh(e)&&n)t.push(e);else if(Array.isArray(e)||Wh(e))for(var r=0;r<e.length;++r)jh(e[r],t,n);else{for(var a=-1,i=0,o=Object.keys(e);i<o.length;i++){var s=o[i];/^([1-9]+[0-9]*|0)$/.test(s)&&(a=Math.max(a,Number(s)))}for(var u=0;u<=a;u++)jh(e[u],t,n)}return t}var Gh=function(){function e(t,n){(0,Se.Z)(this,e),this.backendTimer=t,this.logger=n,null==n&&(this.logger=new Hh)}return(0,Te.Z)(e,[{key:"profileKernel",value:function(e,t,n){var r,a,i=function(){r=n()},o=Bh();if(this.backendTimer.timerAvailable())a=this.backendTimer.time(i);else{i();var s,u=(0,Ht.Z)(r);try{for(u.s();!(s=u.n()).done;){s.value.dataSync()}}catch(d){u.e(d)}finally{u.f()}a=Promise.resolve({kernelMs:Bh()-o})}if(el().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(var c=function(){var t=r[l];t.data().then((function(n){!function(e,t,n){if("float32"!==t)return!1;for(var r=0;r<e.length;r++){var a=e[r];if(isNaN(a)||!isFinite(a))return console.warn("Found ".concat(a," in the result of '").concat(n,"'")),!0}}(n,t.dtype,e)}))},l=0;l<r.length;l++)c();return{kernelName:e,outputs:r,inputs:t,timeMs:a.then((function(e){return e.kernelMs})),extraInfo:a.then((function(e){return null!=e.getExtraProfileInfo?e.getExtraProfileInfo():""}))}}},{key:"logKernelProfile",value:function(e){var t=this,n=e.kernelName,r=e.outputs,a=e.timeMs,i=e.inputs,o=e.extraInfo;r.forEach((function(e){Promise.all([e.data(),a,o]).then((function(r){t.logger.logKernelProfile(n,e,r[0],r[1],i,r[2])}))}))}}]),e}();var Hh=function(){function e(){(0,Se.Z)(this,e)}return(0,Te.Z)(e,[{key:"logKernelProfile",value:function(e,t,n,r,a,i){var o="number"===typeof r?Nc("".concat(r,"ms"),9):r.error,s=Nc(e,25),u=t.rank,c=t.size,l=Nc(t.shape.toString(),14),d="";for(var f in a){var h=a[f];if(null!=h){var p=h.shape||t.shape,v=p.length;d+="".concat(f,": ").concat(v,"D ").concat(v>0?p:""," ")}}console.log("%c".concat(s,"\t%c").concat(o,"\t%c").concat(u,"D ").concat(l,"\t%c").concat(c,"\t%c").concat(d,"\t%c").concat(i),"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}]),e}();var qh=20,$h=3,Kh=7;function Xh(e,t,n,r){var a=Vc(t),i=function(e,t,n,r){var a=Ic(t),i=r[r.length-1],o=new Array(i).fill(0),s=t.length,u="complex64"===n?ep(e):e;if(s>1)for(var c=0;c<a/i;c++)for(var l=c*i,d=0;d<i;d++)o[d]=Math.max(o[d],Yh(u[l+d],0,n).length);return o}(e,t,n,a),o=t.length,s=Jh(e,t,n,a,i),u=["Tensor"];return r&&(u.push("  dtype: ".concat(n)),u.push("  rank: ".concat(o)),u.push("  shape: [".concat(t,"]")),u.push("  values:")),u.push(s.map((function(e){return"    "+e})).join("\n")),u.join("\n")}function Yh(e,t,n){return Nc(Array.isArray(e)?"".concat(parseFloat(e[0].toFixed(Kh))," + ")+"".concat(parseFloat(e[1].toFixed(Kh)),"j"):Fc(e)?"'".concat(e,"'"):"bool"===n?Qh(e):parseFloat(e.toFixed(Kh)).toString(),t)}function Qh(e){return 0===e?"false":"true"}function Jh(e,t,n,r,a){var i=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],o="complex64"===n?2:1,s=t[0],u=t.length;if(0===u)return"complex64"===n?[Yh(ep(e)[0],0,n)]:"bool"===n?[Qh(e[0])]:[e[0].toString()];if(1===u){if(s>qh){var c=$h*o,l=Array.from(e.slice(0,c)),d=Array.from(e.slice((s-$h)*o,s*o));return"complex64"===n&&(l=ep(l),d=ep(d)),["["+l.map((function(e,t){return Yh(e,a[t],n)})).join(", ")+", ..., "+d.map((function(e,t){return Yh(e,a[s-$h+t],n)})).join(", ")+"]"]}return["["+("complex64"===n?ep(e):Array.from(e)).map((function(e,t){return Yh(e,a[t],n)})).join(", ")+"]"]}var f=t.slice(1),h=r.slice(1),p=r[0]*o,v=[];if(s>qh){for(var m=0;m<$h;m++){var g=m*p,y=g+p;v.push.apply(v,(0,me.Z)(Jh(e.slice(g,y),f,n,h,a,!1)))}v.push("...");for(var b=s-$h;b<s;b++){var k=b*p,w=k+p;v.push.apply(v,(0,me.Z)(Jh(e.slice(k,w),f,n,h,a,b===s-1)))}}else for(var x=0;x<s;x++){var I=x*p,S=I+p;v.push.apply(v,(0,me.Z)(Jh(e.slice(I,S),f,n,h,a,x===s-1)))}var T=2===u?",":"";v[0]="["+(s>0?v[0]+T:"");for(var E=1;E<v.length-1;E++)v[E]=" "+v[E]+T;for(var N=",\n",C=2;C<u;C++)N+="\n";return v[v.length-1]=" "+v[v.length-1]+"]"+(i?"":N),v}function ep(e){for(var t=[],n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}var tp=function(){function e(t,n,r){var a=this;if((0,Se.Z)(this,e),this.dtype=n,this.shape=t.slice(),this.size=Ic(t),null!=r){var i=r.length;kc(i===this.size,(function(){return"Length of values '".concat(i,"' does not match the size ")+"inferred by the shape '".concat(a.size,"'.")}))}if("complex64"===n)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||Dc(n,this.size),this.strides=Vc(t)}return(0,Te.Z)(e,[{key:"set",value:function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];0===r.length&&(r=[0]),kc(r.length===this.rank,(function(){return"The number of provided coordinates (".concat(r.length,") must ")+"match the rank (".concat(t.rank,")")}));var i=this.locToIndex(r);this.values[i]=e}},{key:"get",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];0===t.length&&(t=[0]);for(var r=0,a=0,i=t;a<i.length;a++){var o=i[a];if(o<0||o>=this.shape[r]){var s="Requested out of range element at ".concat(t,". ")+"  Buffer shape=".concat(this.shape);throw new Error(s)}r++}for(var u=t[t.length-1],c=0;c<t.length-1;++c)u+=this.strides[c]*t[c];return this.values[u]}},{key:"locToIndex",value:function(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];for(var t=e[e.length-1],n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t}},{key:"indexToLoc",value:function(e){if(0===this.rank)return[];if(1===this.rank)return[e];for(var t=new Array(this.shape.length),n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t}},{key:"rank",get:function(){return this.shape.length}},{key:"toTensor",value:function(){return np().makeTensor(this.values,this.shape,this.dtype)}}]),e}(),np=null,rp=null;var ap=function(){function e(t,n,r,a){(0,Se.Z)(this,e),this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=n||"float32",this.size=Ic(t),this.strides=Vc(t),this.dataId=r,this.id=a,this.rankType=this.rank<5?this.rank.toString():"higher"}return(0,Te.Z)(e,[{key:"rank",get:function(){return this.shape.length}},{key:"buffer",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){var t;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.data();case 2:return t=e.sent,e.abrupt("return",rp.buffer(this.shape,this.dtype,t));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"bufferSync",value:function(){return rp.buffer(this.shape,this.dtype,this.dataSync())}},{key:"array",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){var t;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.data();case 2:return t=e.sent,e.abrupt("return",Wc(this.shape,t,"complex64"===this.dtype));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"arraySync",value:function(){return Wc(this.shape,this.dataSync(),"complex64"===this.dtype)}},{key:"data",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){var t,n;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.throwIfDisposed(),t=np().read(this.dataId),"string"!==this.dtype){e.next=13;break}return e.next=5,t;case 5:return n=e.sent,e.prev=6,e.abrupt("return",n.map((function(e){return Uh(e)})));case 10:throw e.prev=10,e.t0=e.catch(6),new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().");case 13:return e.abrupt("return",t);case 14:case"end":return e.stop()}}),e,this,[[6,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"dataToGPU",value:function(e){return this.throwIfDisposed(),np().readToGPU(this.dataId,e)}},{key:"dataSync",value:function(){this.throwIfDisposed();var e=np().readSync(this.dataId);if("string"===this.dtype)try{return e.map((function(e){return Uh(e)}))}catch(rle){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}},{key:"bytes",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){var t;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.throwIfDisposed(),e.next=3,np().read(this.dataId);case 3:if(t=e.sent,"string"!==this.dtype){e.next=8;break}return e.abrupt("return",t);case 8:return e.abrupt("return",new Uint8Array(t.buffer));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"dispose",value:function(){this.isDisposed||(np().disposeTensor(this),this.isDisposedInternal=!0)}},{key:"isDisposed",get:function(){return this.isDisposedInternal}},{key:"throwIfDisposed",value:function(){if(this.isDisposed)throw new Error("Tensor is disposed.")}},{key:"print",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return rp.print(this,e)}},{key:"clone",value:function(){return this.throwIfDisposed(),rp.clone(this)}},{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Xh(this.dataSync(),this.shape,this.dtype,e)}},{key:"cast",value:function(e){return this.throwIfDisposed(),rp.cast(this,e)}},{key:"variable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return this.throwIfDisposed(),np().makeVariable(this,e,t,n)}}]),e}();function ip(){return al("Tensor",(function(){return ap}))}Object.defineProperty(ap,Symbol.hasInstance,{value:function(e){return!!e&&null!=e.data&&null!=e.dataSync&&null!=e.throwIfDisposed}}),ip();var op,sp,up,cp,lp,dp=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e,r,a,i){var o;return(0,Se.Z)(this,n),(o=t.call(this,e.shape,e.dtype,e.dataId,i)).trainable=r,o.name=a,o}return(0,Te.Z)(n,[{key:"assign",value:function(e){if(e.dtype!==this.dtype)throw new Error("dtype of the new value (".concat(e.dtype,") and ")+"previous value (".concat(this.dtype,") must match"));if(!Sc(e.shape,this.shape))throw new Error("shape of the new value (".concat(e.shape,") and ")+"previous value (".concat(this.shape,") must match"));np().disposeTensor(this),this.dataId=e.dataId,np().incRef(this,null)}},{key:"dispose",value:function(){np().disposeVariable(this),this.isDisposedInternal=!0}}]),n}(ap);Object.defineProperty(dp,Symbol.hasInstance,{value:function(e){return e instanceof ap&&null!=e.assign&&e.assign instanceof Function}}),function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"}(op||(op={})),function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(sp||(sp={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(up||(up={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(cp||(cp={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(lp||(lp={}));var fp={float32:cp,int32:sp,bool:up,complex64:lp};function hp(e,t){if("string"===e||"string"===t){if("string"===e&&"string"===t)return"string";throw new Error("Can not upcast ".concat(e," with ").concat(t))}return fp[e][t]}function pp(e){return hp(e,"int32")}function vp(e){return null!=e&&"object"===typeof e&&"texture"in e&&e.texture instanceof WebGLTexture}function mp(e){return"undefined"!==typeof GPUBuffer&&null!=e&&"object"===typeof e&&"buffer"in e&&e.buffer instanceof GPUBuffer}function gp(e,t){if(e.dtype===t.dtype)return[e,t];var n=hp(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function yp(e,t){return t.some((function(t){return t.id===e.id}))}function bp(e){var t=[];return kp(e,t,new Set),t}function kp(e,t,n){if(null!=e)if(e instanceof ap)t.push(e);else if(r=e,Array.isArray(r)||"object"===typeof r){var r,a=e;for(var i in a){var o=a[i];n.has(o)||(n.add(o),kp(o,t,n))}}}function wp(e){return null!=e.kernelName}var xp=function(){function e(){(0,Se.Z)(this,e),this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map((function(e){return e.name}))))}}}return(0,Te.Z)(e,[{key:"dispose",value:function(){for(var e in this.registeredVariables)this.registeredVariables[e].dispose()}}]),e}(),Ip=function(){function e(t){(0,Se.Z)(this,e),this.ENV=t,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new xp}return(0,Te.Z)(e,[{key:"ready",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){var t,n,r;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.pendingBackendInit){e.next=2;break}return e.abrupt("return",this.pendingBackendInit.then((function(){})));case 2:if(null==this.backendInstance){e.next=4;break}return e.abrupt("return");case 4:t=this.getSortedBackends(),n=0;case 6:if(!(n<t.length)){e.next=18;break}return r=t[n],e.next=10,this.initializeBackend(r).success;case 10:if(!e.sent){e.next=15;break}return e.next=14,this.setBackend(r);case 14:return e.abrupt("return");case 15:n++,e.next=6;break;case 18:throw new Error("Could not initialize any backends, all backend initializations failed.");case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"backend",get:function(){if(null!=this.pendingBackendInit)throw new Error("Backend '".concat(this.backendName,"' has not yet been initialized. Make ")+"sure to await tf.ready() or await tf.setBackend() before calling other methods");if(null==this.backendInstance){var e=this.initializeBackendsAndReturnBest(),t=e.name;if(e.asyncInit)throw new Error("The highest priority backend '".concat(t,"' has not yet been ")+"initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(t)}return this.backendInstance}},{key:"backendNames",value:function(){return Object.keys(this.registryFactory)}},{key:"findBackend",value:function(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;if(this.initializeBackend(e).asyncInit)return null}return this.registry[e]}},{key:"findBackendFactory",value:function(e){return e in this.registryFactory?this.registryFactory[e].factory:null}},{key:"registerBackend",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e in this.registryFactory?(vh("".concat(e," backend was already registered. ")+"Reusing existing backend factory."),!1):(this.registryFactory[e]={factory:t,priority:n},!0)}},{key:"setBackend",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){var n,r;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.registryFactory[t]){e.next=2;break}throw new Error("Backend name '".concat(t,"' not found in registry"));case 2:if(this.backendName=t,null!=this.registry[t]){e.next=16;break}if(this.backendInstance=null,n=this.initializeBackend(t),r=n.success,!n.asyncInit){e.next=12;break}return e.next=9,r;case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=r;case 13:if(e.t0){e.next=16;break}return e.abrupt("return",!1);case 16:return this.backendInstance=this.registry[t],this.setupRegisteredKernels(),this.profiler=new Gh(this.backendInstance),e.abrupt("return",!0);case 20:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setupRegisteredKernels",value:function(){var e=this;kh(this.backendName).forEach((function(t){null!=t.setupFunc&&t.setupFunc(e.backendInstance)}))}},{key:"disposeRegisteredKernels",value:function(e){var t=this;kh(e).forEach((function(n){null!=n.disposeFunc&&n.disposeFunc(t.registry[e])}))}},{key:"initializeBackend",value:function(e){var t=this,n=this.registryFactory[e];if(null==n)throw new Error("Cannot initialize backend ".concat(e,", no registration found."));try{var r=n.factory();if(!r||r instanceof hc||"function"!==typeof r.then)return this.registry[e]=r,{success:!0,asyncInit:!1};var a=++this.pendingBackendInitId,i=r.then((function(n){return!(a<t.pendingBackendInitId)&&(t.registry[e]=n,t.pendingBackendInit=null,!0)})).catch((function(n){return a<t.pendingBackendInitId||(t.pendingBackendInit=null,vh("Initialization of backend ".concat(e," failed")),vh(n.stack||n.message)),!1}));return this.pendingBackendInit=i,{success:i,asyncInit:!0}}catch(o){return vh("Initialization of backend ".concat(e," failed")),vh(o.stack||o.message),{success:!1,asyncInit:!1}}}},{key:"removeBackend",value:function(e){if(!(e in this.registryFactory))throw new Error("".concat(e," backend not found in registry"));this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}},{key:"getSortedBackends",value:function(){var e=this;if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((function(t,n){return e.registryFactory[n].priority-e.registryFactory[t].priority}))}},{key:"initializeBackendsAndReturnBest",value:function(){for(var e=this.getSortedBackends(),t=0;t<e.length;t++){var n=e[t],r=this.initializeBackend(n),a=r.success,i=r.asyncInit;if(i||a)return{name:n,asyncInit:i}}throw new Error("Could not initialize any backends, all backend initializations failed.")}},{key:"moveData",value:function(e,t){var n=this.state.tensorInfo.get(t),r=n.backend,a=this.readSync(t),i=r.refCount(t);r.disposeData(t,!0),n.backend=e,e.move(t,a,n.shape,n.dtype,i),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}},{key:"tidy",value:function(e,t){var n,r=this,a=null;if(null==t){if("function"!==typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!==typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!==typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");a=e}return this.scopedRun((function(){return r.startScope(a)}),(function(){return r.endScope(n)}),(function(){return(n=t())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n}))}},{key:"scopedRun",value:function(e,t,n){e();try{var r=n();return t(),r}catch(a){throw t(),a}}},{key:"nextTensorId",value:function(){return e.nextTensorId++}},{key:"nextVariableId",value:function(){return e.nextVariableId++}},{key:"clone",value:function(e){var t=Ep.runKernel(yd,{x:e}),n={x:e};return this.addTapeNode(this.state.activeScope.name,n,[t],(function(e){return{x:function(){var t={x:e},n={dtype:"float32"};return Ep.runKernel(Nl,t,n)}}}),[],{}),t}},{key:"runKernel",value:function(e,t,n){if(null==this.backendName&&this.backend,!(null!=yh(e,this.backendName)))throw new Error("Kernel '".concat(e,"' not registered for backend '").concat(this.backendName,"'"));return this.runKernelFunc({kernelName:e,inputs:t,attrs:n})}},{key:"shouldCheckForMemLeaks",value:function(){return this.ENV.getBool("IS_TEST")}},{key:"checkKernelForMemLeak",value:function(e,t,n){var r=this.backend.numDataIds(),a=0;n.forEach((function(e){a+="complex64"===e.dtype?3:1}));var i=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],o=r-t-a-i;if(o>0)throw new Error("Backend '".concat(this.backendName,"' has an internal memory leak ")+"(".concat(o," data ids) after running '").concat(e,"'"))}},{key:"runKernelFunc",value:function(e){var t,n,r,a=this,i=[],o=this.isTapeOn(),s=this.state.numBytes,u=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0),null==this.backendName&&this.backend;var c=wp(e)?e.kernelName:null!=this.state.activeScope?this.state.activeScope.name:"";if(wp(e)){var l=e.kernelName,d=e.inputs,f=e.attrs;null==this.backendName&&this.backend;var h=yh(l,this.backendName);kc(null!=h,(function(){return"Cannot find registered kernel '".concat(l,"' for backend '").concat(a.backendName,"'")})),n=function(){var e=a.backend.numDataIds();r=h.kernelFunc({inputs:d,attrs:f,backend:a.backend});var t=Array.isArray(r)?r:[r];a.shouldCheckForMemLeaks()&&a.checkKernelForMemLeak(l,e,t);var n=t.map((function(e){return null!=e.rank?e:a.makeTensorFromTensorInfo(e)}));if(o){var s=a.getTensorsForGradient(l,d,n);i=a.saveTensorsForBackwardMode(s)}return n}}else{var p=e.forwardFunc,v=function(e){o&&(i=e.map((function(e){return a.keep(a.clone(e))})))};n=function(){var e=a.backend.numDataIds();r=a.tidy((function(){return p(a.backend,v)}));var t=Array.isArray(r)?r:[r];return a.shouldCheckForMemLeaks()&&a.checkKernelForMemLeak(c,e,t),t}}var m,g=e.inputs,y=e.attrs,b=wp(e)?null:e.backwardsFunc;return this.scopedRun((function(){return a.state.kernelDepth++}),(function(){return a.state.kernelDepth--}),(function(){a.ENV.getBool("DEBUG")||a.state.profiling?(m=a.profiler.profileKernel(c,g,(function(){return n()})),a.ENV.getBool("DEBUG")&&a.profiler.logKernelProfile(m),t=m.outputs):t=n()})),o&&this.addTapeNode(c,g,t,b,i,y),this.state.profiling&&this.state.activeProfile.kernels.push({name:c,bytesAdded:this.state.numBytes-s,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-u,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(g).map((function(e){return null!=g[e]?g[e].shape:null})),outputShapes:t.map((function(e){return e.shape})),kernelTimeMs:m.timeMs,extraInfo:m.extraInfo}),Array.isArray(r)?t:t[0]}},{key:"saveTensorsForBackwardMode",value:function(e){var t=this;return e.map((function(e){return t.keep(t.clone(e))}))}},{key:"getTensorsForGradient",value:function(e,t,n){var r=bh(e);if(null!=r){var a,i=r.inputsToSave||[],o=r.outputsToSave||[];r.saveAllInputs?(kc(Array.isArray(t),(function(){return"saveAllInputs is true, expected inputs to be an array."})),a=Object.keys(t).map((function(e){return t[e]}))):a=i.map((function(e){return t[e]}));var s=n.filter((function(e,t){return o[t]}));return a.concat(s)}return[]}},{key:"makeTensor",value:function(e,t,n,r){if(null==e)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",r=r||this.backend;var a=e;"string"===n&&Fc(e[0])&&(a=e.map((function(e){return Vh(e)})));var i=r.write(a,t,n),o=new ap(t,n,i,this.nextTensorId());if(this.trackTensor(o,r),"string"===n){var s=this.state.tensorInfo.get(i),u=function(e){if(null==e)return 0;var t=0;return e.forEach((function(e){return t+=e.length})),t}(a);this.state.numBytes+=u-s.bytes,s.bytes=u}return o}},{key:"makeTensorFromDataId",value:function(e,t,n,r){var a={dataId:e,shape:t,dtype:n=n||"float32"};return this.makeTensorFromTensorInfo(a,r)}},{key:"makeTensorFromTensorInfo",value:function(e,t){var n=e.dataId,r=e.shape,a=e.dtype,i=new ap(r,a,n,this.nextTensorId());return this.trackTensor(i,t),i}},{key:"makeVariable",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;n=n||this.nextVariableId().toString(),null!=r&&r!==e.dtype&&(e=e.cast(r));var a=new dp(e,t,n,this.nextTensorId());if(null!=this.state.registeredVariables[a.name])throw new Error("Variable with name ".concat(a.name," was already registered"));return this.state.registeredVariables[a.name]=a,this.incRef(a,this.backend),a}},{key:"trackTensor",value:function(e,t){this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++;var n=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(n=e.size*Lc(e.dtype)),this.state.numBytes+=n,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:n})),e instanceof dp||this.track(e)}},{key:"incRef",value:function(e,t){this.trackTensor(e,t),this.backend.incRef(e.dataId)}},{key:"removeDataId",value:function(e,t){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===t&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}},{key:"disposeTensor",value:function(e){if(this.state.tensorInfo.has(e.dataId)){var t=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,"string"===e.dtype&&(this.state.numStringTensors--,this.state.numBytes-=t.bytes),"complex64"!==e.dtype&&"string"!==e.dtype){var n=e.size*Lc(e.dtype);this.state.numBytes-=n}t.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,t.backend)}}},{key:"disposeVariables",value:function(){for(var e in this.state.registeredVariables){var t=this.state.registeredVariables[e];this.disposeVariable(t)}}},{key:"disposeVariable",value:function(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]}},{key:"memory",value:function(){var e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}},{key:"profile",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){var n,r,a,i,o;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.state.profiling=!0,n=this.state.numBytes,r=this.state.numTensors,this.state.activeProfile.kernels=[],e.next=6,t();case 6:this.state.activeProfile.result=e.sent,this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,(0,me.Z)(this.state.activeProfile.kernels.map((function(e){return e.totalBytesSnapshot})))),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r,a=(0,Ht.Z)(this.state.activeProfile.kernels),e.prev=12,a.s();case 14:if((i=a.n()).done){e.next=24;break}return o=i.value,e.next=18,o.kernelTimeMs;case 18:return o.kernelTimeMs=e.sent,e.next=21,o.extraInfo;case 21:o.extraInfo=e.sent;case 22:e.next=14;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(12),a.e(e.t0);case 29:return e.prev=29,a.f(),e.finish(29);case 32:return e.abrupt("return",this.state.activeProfile);case 33:case"end":return e.stop()}}),e,this,[[12,26,29,32]])})));return function(t){return e.apply(this,arguments)}}()},{key:"isTapeOn",value:function(){return this.state.gradientDepth>0&&0===this.state.kernelDepth}},{key:"addTapeNode",value:function(e,t,n,r,a,i){var o=this,s={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:n,saved:a},u=bh(e);null!=u&&(r=u.gradFunc),null!=r&&(s.gradient=function(e){return e=e.map((function(e,t){if(null==e){var r=n[t],a=Gc(r.size,r.dtype);return o.makeTensor(a,r.shape,r.dtype)}return e})),r(e.length>1?e:e[0],a,i)}),this.state.activeTape.push(s)}},{key:"keep",value:function(e){return e.kept=!0,e}},{key:"startTape",value:function(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}},{key:"endTape",value:function(){this.state.gradientDepth--}},{key:"startScope",value:function(e){var t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t}},{key:"endScope",value:function(e){for(var t=this,n=bp(e),r=new Set(n.map((function(e){return e.id}))),a=0;a<this.state.activeScope.track.length;a++){var i=this.state.activeScope.track[a];i.kept||r.has(i.id)||i.dispose()}var o=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach((function(e){e.kept||e.scopeId!==o.id||t.track(e)}))}},{key:"gradients",value:function(e,t,n){var r=this,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(kc(t.length>0,(function(){return"gradients() received an empty list of xs."})),null!=n&&"float32"!==n.dtype)throw new Error("dy must have 'float32' dtype, but has '".concat(n.dtype,"'"));var i=this.scopedRun((function(){return r.startTape()}),(function(){return r.endTape()}),(function(){return r.tidy("forward",e)}));kc(i instanceof ap,(function(){return"The result y returned by f() must be a tensor."}));var o=function(e,t,n){for(var r={},a={},i=0;i<t.length;i++)r[t[i].id]=!0;for(var o=0;o<e.length;o++){var s=e[o],u=s.inputs;for(var c in u){for(var l=u[c],d=!1,f=0;f<t.length;f++)if(r[l.id]){s.outputs.forEach((function(e){return r[e.id]=!0})),d=!0,a[s.id]=!0;break}if(d)break}}var h={};h[n.id]=!0;for(var p={},v=e.length-1;v>=0;v--)for(var m=e[v],g=m.inputs,y=0;y<m.outputs.length;y++)if(h[m.outputs[y].id]){for(var b in g)h[g[b].id]=!0,p[m.id]=!0;break}for(var k=[],w=0;w<e.length;w++){var x=e[w];if(a[x.id]&&p[x.id]){var I={};for(var S in x.inputs){var T=x.inputs[S];r[T.id]&&(I[S]=T)}var E=Object.assign({},x);E.inputs=I,E.outputs=x.outputs,k.push(E)}}return k}(this.state.activeTape,t,i);if(!a&&0===o.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",(function(){var e={};e[i.id]=null==n?function(e){var t=jc(Ic(e),"float32");return Ep.makeTensor(t,e,"float32")}(i.shape):n,function(e,t,n,r){for(var a=function(){var a=t[i],o=[];if(a.outputs.forEach((function(t){var n=e[t.id];null!=n?o.push(n):o.push(null)})),null==a.gradient)throw new Error("Cannot compute gradient: gradient function not found "+"for ".concat(a.kernelName,"."));var s=a.gradient(o),u=function(t){if(!(t in s))throw new Error("Cannot backprop through input ".concat(t,". ")+"Available gradients found: ".concat(Object.keys(s),"."));var i=n((function(){return s[t]()}));if("float32"!==i.dtype)throw new Error("Error in gradient for op ".concat(a.kernelName,". The gradient of input ")+"".concat(t," must have 'float32' dtype, but has '").concat(i.dtype,"'"));var o=a.inputs[t];if(!Sc(i.shape,o.shape))throw new Error("Error in gradient for op ".concat(a.kernelName,". The gradient of input ")+"'".concat(t,"' has shape '").concat(i.shape,"', which does not match ")+"the shape of the input '".concat(o.shape,"'"));if(null==e[o.id])e[o.id]=i;else{var u=e[o.id];e[o.id]=r(u,i),u.dispose()}};for(var c in a.inputs)u(c)},i=t.length-1;i>=0;i--)a()}(e,o,(function(e){return r.tidy(e)}),Np);var a=t.map((function(t){return e[t.id]}));return 0===r.state.gradientDepth&&(r.state.activeTape.forEach((function(e){var t,n=(0,Ht.Z)(e.saved);try{for(n.s();!(t=n.n()).done;){t.value.dispose()}}catch(r){n.e(r)}finally{n.f()}})),r.state.activeTape=null),{value:i,grads:a}}))}},{key:"customGrad",value:function(e){var t=this;return kc(zc(e),(function(){return"The f passed in customGrad(f) must be a function."})),function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];var i;kc(r.every((function(e){return e instanceof ap})),(function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"}));var o={};r.forEach((function(e,t){o[t]=e}));return t.runKernelFunc({forwardFunc:function(t,n){return kc((i=e.apply(void 0,[].concat(r,[n]))).value instanceof ap,(function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"})),kc(zc(i.gradFunc),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."})),i.value},backwardsFunc:function(e,t){var n=i.gradFunc(e,t),a=Array.isArray(n)?n:[n];kc(a.length===r.length,(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."})),kc(a.every((function(e){return e instanceof ap})),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."}));var o={};return a.forEach((function(e,t){o[t]=function(){return e}})),o},inputs:o})}}},{key:"readSync",value:function(e){return this.state.tensorInfo.get(e).backend.readSync(e)}},{key:"read",value:function(e){return this.state.tensorInfo.get(e).backend.read(e)}},{key:"readToGPU",value:function(e,t){return this.state.tensorInfo.get(e).backend.readToGPU(e,t)}},{key:"time",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){var n,r;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Bh(),e.next=3,this.backend.time(t);case 3:return(r=e.sent).wallMs=Bh()-n,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"track",value:function(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}},{key:"registeredVariables",get:function(){return this.state.registeredVariables}},{key:"reset",value:function(){for(var e in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new xp,this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}]),e}();function Sp(){var e=rl();if(null==e._tfengine){var t=new Qc(e);e._tfengine=new Ip(t)}return function(e){nl=e}(e._tfengine.ENV),function(e){np=e}((function(){return e._tfengine})),e._tfengine}Ip.nextTensorId=0,Ip.nextVariableId=0;var Tp,Ep=Sp();function Np(e,t){var n={a:e,b:t};return Ep.runKernel(ul,n)}function Cp(e){if(void 0!==Tp)return Tp;if(e||"undefined"!==typeof navigator&&null!=navigator){if(e||(e=navigator),"ReactNative"===e.product)return!0;var t=e.userAgent||e.vendor||("undefined"!==typeof window?window.opera:"");if(!t){var n=e;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}return!1}function Zp(){return"undefined"!==typeof window&&null!=window.document||"undefined"!==typeof WorkerGlobalScope}var _p=el();function Ap(e,t){var n=e;if(Wh(e))return"string"===t?[]:[e.length];if(vp(e)){var r=e.channels||"RGBA";return[e.height,e.width*r.length]}if(mp(e))return[e.buffer.size/(null==t?4:Lc(t))];if(!Array.isArray(e))return[];for(var a=[];Array.isArray(n)||Wh(n)&&"string"!==t;)a.push(n.length),n=n[0];return Array.isArray(e)&&el().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&Rp(e,a,[]),a}function Rp(e,t,n){if(n=n||[],Array.isArray(e)||Wh(e)){kc(t.length>0,(function(){return"Element arr[".concat(n.join("]["),"] should be a primitive, ")+"but is an array of ".concat(e.length," elements")})),kc(e.length===t[0],(function(){return"Element arr[".concat(n.join("]["),"] should have ").concat(t[0]," ")+"elements, but has ".concat(e.length," elements")}));for(var r=t.slice(1),a=0;a<e.length;++a)Rp(e[a],r,n.concat(a))}else kc(0===t.length,(function(){return"Element arr[".concat(n.join("]["),"] is a primitive, ")+"but should be an array/TypedArray of ".concat(t[0]," elements")}))}function Dp(e,t,n,r){if("string_or_numeric"!==e){if(null==e)throw new Error("Expected dtype cannot be null.");if("numeric"!==e&&e!==t||"numeric"===e&&"string"===t)throw new Error("Argument '".concat(n,"' passed to '").concat(r,"' must ")+"be ".concat(e," tensor, but got ").concat(t," tensor"))}}function Op(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(e instanceof ap)return Dp(r,e.dtype,t,n),e;var a=Pc(e);if("string"!==a&&["bool","int32","float32"].indexOf(r)>=0&&(a=r),Dp(r,a,t,n),null==e||!Wh(e)&&!Array.isArray(e)&&"number"!==typeof e&&"boolean"!==typeof e&&"string"!==typeof e){var i=null==e?"null":e.constructor.name;throw new Error("Argument '".concat(t,"' passed to '").concat(n,"' must be a ")+"Tensor or TensorLike, but got '".concat(i,"'"))}var o=Ap(e,a);Wh(e)||Array.isArray(e)||(e=[e]);var s="string"!==a?zh(e,a):jh(e,[],!0);return Ep.makeTensor(s,o,a)}function Lp(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(!Array.isArray(e))throw new Error("Argument ".concat(t," passed to ").concat(n," must be a ")+"`Tensor[]` or `TensorLike[]`");return e.map((function(e,a){return Op(e,"".concat(t,"[").concat(a,"]"),n,r)}))}_p.registerFlag("DEBUG",(function(){return!1}),(function(e){e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")})),_p.registerFlag("IS_BROWSER",(function(){return Zp()})),_p.registerFlag("IS_NODE",(function(){return"undefined"!==typeof process&&"undefined"!==typeof process.versions&&"undefined"!==typeof process.versions.node})),_p.registerFlag("IS_CHROME",(function(){return"undefined"!==typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)})),_p.registerFlag("IS_SAFARI",(function(){return"undefined"!==typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor)})),_p.registerFlag("PROD",(function(){return!1})),_p.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",(function(){return _p.getBool("DEBUG")})),_p.registerFlag("DEPRECATION_WARNINGS_ENABLED",(function(){return!0})),_p.registerFlag("IS_TEST",(function(){return!1})),_p.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",(function(){return _p.getBool("DEBUG")})),_p.registerFlag("WRAP_TO_IMAGEBITMAP",(function(){return!1})),_p.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",(function(){return!1})),_p.registerFlag("USE_SETTIMEOUTCUSTOM",(function(){return!1}));var Fp="__op";function Mp(e){var t=Object.keys(e);if(1!==t.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+"".concat(t.length," keys."));var n=t[0],r=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n+=Fp;var a=function(){Ep.startScope(n);try{var e=r.apply(void 0,arguments);return Xc(e)&&console.error("Cannot return a Promise inside of tidy."),Ep.endScope(e),e}catch(t){throw Ep.endScope(null),t}};return Object.defineProperty(a,"name",{value:n,configurable:!0}),a}var Pp=Mp({complex_:function(e,t){var n=Op(e,"real","complex"),r=Op(t,"imag","complex");wc(n.shape,r.shape,"real and imag shapes, ".concat(n.shape," and ").concat(r.shape,", ")+"must match in call to tf.complex().");var a={real:n,imag:r};return Ep.runKernel(_l,a)}});function zp(e,t,n,r){if(null==r)r=Pc(e);else if("complex64"===r)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(mp(e)||vp(e)){if("float32"!==r&&"int32"!==r)throw new Error("Creating tensor from GPU data only supports "+"'float32'|'int32' dtype, while the dtype is ".concat(r,"."));return Ep.backend.createTensorFromGPUData(e,t||n,r)}if(!Wh(e)&&!Array.isArray(e)&&"number"!==typeof e&&"boolean"!==typeof e&&"string"!==typeof e)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=t){qc(t);var a=Ic(t),i=Ic(n);kc(a===i,(function(){return"Based on the provided shape, [".concat(t,"], the tensor should have ")+"".concat(a," values but has ").concat(i)}));for(var o=0;o<n.length;++o){var s=n[o],u=o!==n.length-1||s!==Ic(t.slice(o));kc(n[o]===t[o]||!u,(function(){return"Error creating a new Tensor. Inferred shape "+"(".concat(n,") does not match the provided ")+"shape (".concat(t,"). ")}))}}return Wh(e)||Array.isArray(e)||(e=[e]),t=t||n,e="string"!==r?zh(e,r):jh(e,[],!0),Ep.makeTensor(e,t,r)}function Bp(e,t,n){return zp(e,t,Ap(e,n),n)}var Vp={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8},Up=4;function Wp(e,t){return jp.apply(this,arguments)}function jp(){return jp=(0,ke.Z)((0,be.Z)().mark((function e(t,n){var r,a,i,o,s,u;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],a=[],i=Array.isArray(t)?t.map((function(e){return e.name})):Object.keys(t),o=(0,be.Z)().mark((function e(){var o,u,c,l;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=i[s],"float32"===(u=Array.isArray(t)?t[s].tensor:t[o]).dtype||"int32"===u.dtype||"bool"===u.dtype||"string"===u.dtype||"complex64"===u.dtype){e.next=4;break}throw new Error("Unsupported dtype in weight '".concat(o,"': ").concat(u.dtype));case 4:c={name:o,shape:u.shape,dtype:u.dtype},"string"===u.dtype?(l=new Promise(function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){var n,r,a,i,o,s,c;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.bytes();case 2:for(n=e.sent,r=n.reduce((function(e,t){return e+t.length}),0)+Up*n.length,a=new Uint8Array(r),i=0,o=0;o<n.length;o++)s=n[o],c=new Uint8Array(new Uint32Array([s.length]).buffer),a.set(c,i),i+=Up,a.set(s,i),i+=s.length;t(a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),a.push(l)):a.push(u.data()),null!=n&&(c.group=n),r.push(c);case 8:case"end":return e.stop()}}),e)})),s=0;case 5:if(!(s<i.length)){e.next=10;break}return e.delegateYield(o(),"t0",7);case 7:++s,e.next=5;break;case 10:return e.next=12,Promise.all(a);case 12:return u=e.sent,e.abrupt("return",{data:Hp(u),specs:r});case 14:case"end":return e.stop()}}),e)}))),jp.apply(this,arguments)}function Gp(e,t){var n,r,a={},i=0,o=(0,Ht.Z)(t);try{for(o.s();!(r=o.n()).done;){var s=r.value,u=s.name,c=s.dtype,l=s.shape,d=Ic(l),f=void 0;if("quantization"in s){var h=s.quantization;if("uint8"===h.dtype||"uint16"===h.dtype){if(!("min"in h)||!("scale"in h))throw new Error("Weight ".concat(s.name," with quantization ").concat(h.dtype," ")+"doesn't have corresponding metadata min and scale.")}else{if("float16"!==h.dtype)throw new Error("Weight ".concat(s.name," has unknown ")+"quantization dtype ".concat(h.dtype,". ")+"Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.");if("float32"!==c)throw new Error("Weight ".concat(s.name," is quantized with ").concat(h.dtype," ")+"which only supports weights of type float32 not ".concat(c,"."))}var p=Vp[h.dtype],v=e.slice(i,i+d*p),m="uint8"===h.dtype?new Uint8Array(v):new Uint16Array(v);if("float32"===c)if("uint8"===h.dtype||"uint16"===h.dtype){f=new Float32Array(m.length);for(var g=0;g<m.length;g++){var y=m[g];f[g]=y*h.scale+h.min}}else{if("float16"!==h.dtype)throw new Error("Unsupported quantization type ".concat(h.dtype," ")+"for weight type float32.");void 0===n&&(n=iv()),f=n(m)}else{if("int32"!==c)throw new Error("Unsupported dtype in weight '".concat(u,"': ").concat(c));if("uint8"!==h.dtype&&"uint16"!==h.dtype)throw new Error("Unsupported quantization type ".concat(h.dtype," ")+"for weight type int32.");f=new Int32Array(m.length);for(var b=0;b<m.length;b++){var k=m[b];f[b]=Math.round(k*h.scale+h.min)}}i+=d*p}else if("string"===c){var w=Ic(s.shape);f=[];for(var x=0;x<w;x++){var I=new Uint32Array(e.slice(i,i+Up))[0];i+=Up;var S=new Uint8Array(e.slice(i,i+I));f.push(S),i+=I}}else{var T=Vp[c],E=e.slice(i,i+d*T);if("float32"===c)f=new Float32Array(E);else if("int32"===c)f=new Int32Array(E);else if("bool"===c)f=new Uint8Array(E);else{if("complex64"!==c)throw new Error("Unsupported dtype in weight '".concat(u,"': ").concat(c));f=new Float32Array(E);for(var N=new Float32Array(f.length/2),C=new Float32Array(f.length/2),Z=0;Z<N.length;Z++)N[Z]=f[2*Z],C[Z]=f[2*Z+1];var _=Bp(N,l,"float32"),A=Bp(C,l,"float32");a[u]=Pp(_,A),_.dispose(),A.dispose()}i+=d*T}"complex64"!==c&&(a[u]=Bp(f,l,c))}}catch(R){o.e(R)}finally{o.f()}return a}function Hp(e){if(null===e)throw new Error("Invalid input value: ".concat(JSON.stringify(e)));var t=0,n=[];e.forEach((function(e){if(t+=e.byteLength,n.push(e.byteLength===e.buffer.byteLength?e:new e.constructor(e)),!(e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: ".concat(e.constructor.name))}));var r=new Uint8Array(t),a=0;return n.forEach((function(e){r.set(new Uint8Array(e.buffer),a),a+=e.byteLength})),r.buffer}var qp="undefined"!==typeof Buffer&&("undefined"===typeof Blob||"undefined"===typeof atob||"undefined"===typeof btoa);function $p(e){return qp?Buffer.byteLength(e):new Blob([e]).size}function Kp(e){if(qp)return Buffer.from(e).toString("base64");for(var t=new Uint8Array(e),n="",r=0,a=t.length;r<a;r++)n+=String.fromCharCode(t[r]);return btoa(n)}function Xp(e){if(qp){var t=Buffer.from(e,"base64");return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}for(var n=atob(e),r=new Uint8Array(n.length),a=0;a<n.length;++a)r.set([n.charCodeAt(a)],a);return r.buffer}function Yp(e){if(1===e.length)return e[0];var t=0;e.forEach((function(e){t+=e.byteLength}));var n=new Uint8Array(t),r=0;return e.forEach((function(e){n.set(new Uint8Array(e),r),r+=e.byteLength})),n.buffer}function Qp(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);var t=e.split("/");return t[t.length-1]}function Jp(e,t){var n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:t};return null!=e.signature&&(n.signature=e.signature),null!=e.userDefinedMetadata&&(n.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(n.modelInitializer=e.modelInitializer),null!=e.initializerSignature&&(n.initializerSignature=e.initializerSignature),null!=e.trainingConfig&&(n.trainingConfig=e.trainingConfig),n}function ev(e,t,n){var r={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy};if(null!=e.trainingConfig&&(r.trainingConfig=e.trainingConfig),null!=e.weightsManifest){if(!t)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=t,r.weightData=n}return null!=e.signature&&(r.signature=e.signature),null!=e.userDefinedMetadata&&(r.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(r.modelInitializer=e.modelInitializer),null!=e.initializerSignature&&(r.initializerSignature=e.initializerSignature),r}function tv(e,t){return nv.apply(this,arguments)}function nv(){return nv=(0,ke.Z)((0,be.Z)().mark((function e(t,n){var r,a,i,o;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==t.weightsManifest){e.next=7;break}return e.next=3,n(t.weightsManifest);case 3:i=e.sent,o=(0,ge.Z)(i,2),r=o[0],a=o[1];case 7:return e.abrupt("return",ev(t,r,a));case 8:case"end":return e.stop()}}),e)}))),nv.apply(this,arguments)}function rv(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:$p(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:$p(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:e.weightData.byteLength}}function av(e){var t,n=[],r=(0,Ht.Z)(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;n.push.apply(n,(0,me.Z)(a.weights))}}catch(i){r.e(i)}finally{r.f()}return n}function iv(){var e=function(){var e=function(e){for(var t=e<<13,n=0;0===(8388608&t);)n-=8388608,t<<=1;return(t&=-8388609)|n+947912704},t=new Uint32Array(2048);t[0]=0;for(var n=1;n<1024;n++)t[n]=e(n);for(var r=1024;r<2048;r++)t[r]=939524096+(r-1024<<13);return t}(),t=function(){var e=new Uint32Array(64);e[0]=0,e[31]=1199570944,e[32]=2147483648,e[63]=3347054592;for(var t=1;t<31;t++)e[t]=t<<23;for(var n=33;n<63;n++)e[n]=2147483648+(n-32<<23);return e}(),n=function(){for(var e=new Uint32Array(64),t=0;t<64;t++)e[t]=1024;return e[0]=e[32]=0,e}();return function(r){for(var a=new ArrayBuffer(4*r.length),i=new Uint32Array(a),o=0;o<r.length;o++){var s=r[o],u=e[n[s>>10]+(1023&s)]+t[s>>10];i[o]=u}return new Float32Array(a)}}var ov=function(){function e(){(0,Se.Z)(this,e),this.saveRouters=[],this.loadRouters=[]}return(0,Te.Z)(e,null,[{key:"getInstance",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"registerSaveRouter",value:function(t){e.getInstance().saveRouters.push(t)}},{key:"registerLoadRouter",value:function(t){e.getInstance().loadRouters.push(t)}},{key:"getSaveHandlers",value:function(t){return e.getHandlers(t,"save")}},{key:"getLoadHandlers",value:function(t,n){return e.getHandlers(t,"load",n)}},{key:"getHandlers",value:function(t,n,r){var a=[];return("load"===n?e.getInstance().loadRouters:e.getInstance().saveRouters).forEach((function(e){var n=e(t,r);null!==n&&a.push(n)})),a}}]),e}(),sv=function(e){return ov.registerSaveRouter(e)},uv=function(e){return ov.registerLoadRouter(e)},cv=function(e){return ov.getSaveHandlers(e)},lv=function(e,t){return ov.getLoadHandlers(e,t)},dv="tensorflowjs",fv="models_store",hv="model_info_store";function pv(){if(!el().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var e="undefined"===typeof window?self:window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==t)throw new Error("The current browser does not appear to support IndexedDB.");return t}function vv(e){var t=e.result;t.createObjectStore(fv,{keyPath:"modelPath"}),t.createObjectStore(hv,{keyPath:"modelPath"})}var mv=function(){function e(t){if((0,Se.Z)(this,e),this.indexedDB=pv(),null==t||!t)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=t}return(0,Te.Z)(e,[{key:"save",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=2;break}throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");case 2:return e.abrupt("return",this.databaseAction(this.modelPath,t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.databaseAction(this.modelPath));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"databaseAction",value:function(e,t){var n=this;return new Promise((function(e,r){var a=n.indexedDB.open(dv,1);a.onupgradeneeded=function(){return vv(a)},a.onsuccess=function(){var i=a.result;if(null==t){var o=i.transaction(fv,"readonly"),s=o.objectStore(fv).get(n.modelPath);s.onsuccess=function(){if(null==s.result)return i.close(),r(new Error("Cannot find model with path '".concat(n.modelPath,"' ")+"in IndexedDB."));e(s.result.modelArtifacts)},s.onerror=function(e){return i.close(),r(s.error)},o.oncomplete=function(){return i.close()}}else{var u,c,l=rv(t),d=i.transaction(hv,"readwrite"),f=d.objectStore(hv);try{u=f.put({modelPath:n.modelPath,modelArtifactsInfo:l})}catch(h){return r(h)}u.onsuccess=function(){var a,o=(c=i.transaction(fv,"readwrite")).objectStore(fv);try{a=o.put({modelPath:n.modelPath,modelArtifacts:t,modelArtifactsInfo:l})}catch(h){return r(h)}a.onsuccess=function(){return e({modelArtifactsInfo:l})},a.onerror=function(e){var t=(f=d.objectStore(hv)).delete(n.modelPath);t.onsuccess=function(){return i.close(),r(a.error)},t.onerror=function(e){return i.close(),r(a.error)}}},u.onerror=function(e){return i.close(),r(u.error)},d.oncomplete=function(){null==c?i.close():c.oncomplete=function(){return i.close()}}}},a.onerror=function(e){return r(a.error)}}))}}]),e}();mv.URL_SCHEME="indexeddb://";var gv=function(e){return el().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(mv.URL_SCHEME)?(t=e.slice(mv.URL_SCHEME.length),new mv(t)):null;var t};function yv(e){return e.startsWith(mv.URL_SCHEME)?e.slice(mv.URL_SCHEME.length):e}ov.registerSaveRouter(gv),ov.registerLoadRouter(gv);var bv=function(){function e(){(0,Se.Z)(this,e),this.indexedDB=pv()}return(0,Te.Z)(e,[{key:"listModels",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){var t=this;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=t.indexedDB.open(dv,1);r.onupgradeneeded=function(){return vv(r)},r.onsuccess=function(){var t=r.result,a=t.transaction(hv,"readonly"),i=a.objectStore(hv).getAll();i.onsuccess=function(){var t,n={},r=(0,Ht.Z)(i.result);try{for(r.s();!(t=r.n()).done;){var a=t.value;n[a.modelPath]=a.modelArtifactsInfo}}catch(o){r.e(o)}finally{r.f()}e(n)},i.onerror=function(e){return t.close(),n(i.error)},a.oncomplete=function(){return t.close()}},r.onerror=function(e){return n(r.error)}})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"removeModel",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){var n=this;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=yv(t),e.abrupt("return",new Promise((function(e,r){var a=n.indexedDB.open(dv,1);a.onupgradeneeded=function(){return vv(a)},a.onsuccess=function(){var n,i=a.result,o=i.transaction(hv,"readwrite"),s=o.objectStore(hv),u=s.get(t);u.onsuccess=function(){if(null==u.result)return i.close(),r(new Error("Cannot find model with path '".concat(t,"' ")+"in IndexedDB."));var a=s.delete(t),o=function(){var a=(n=i.transaction(fv,"readwrite")).objectStore(fv).delete(t);a.onsuccess=function(){return e(u.result.modelArtifactsInfo)},a.onerror=function(e){return r(u.error)}};a.onsuccess=o,a.onerror=function(e){return o(),i.close(),r(u.error)}},u.onerror=function(e){return i.close(),r(u.error)},o.oncomplete=function(){null==n?i.close():n.oncomplete=function(){return i.close()}}},a.onerror=function(e){return r(a.error)}})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),kv="/",wv="tensorflowjs_models",xv="info",Iv="model_topology",Sv="weight_specs",Tv="weight_data",Ev="model_metadata";function Nv(e){return{info:[wv,e,xv].join(kv),topology:[wv,e,Iv].join(kv),weightSpecs:[wv,e,Sv].join(kv),weightData:[wv,e,Tv].join(kv),modelMetadata:[wv,e,Ev].join(kv)}}function Cv(e){for(var t=0,n=Object.values(e);t<n.length;t++){var r=n[t];window.localStorage.removeItem(r)}}function Zv(e){var t=e.split(kv);if(t.length<3)throw new Error("Invalid key format: ".concat(e));return t.slice(1,t.length-1).join(kv)}function _v(e){return e.startsWith(Av.URL_SCHEME)?e.slice(Av.URL_SCHEME.length):e}var Av=function(){function e(t){if((0,Se.Z)(this,e),!el().getBool("IS_BROWSER")||"undefined"===typeof window||"undefined"===typeof window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==t||!t)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=t,this.keys=Nv(this.modelPath)}return(0,Te.Z)(e,[{key:"save",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){var n,r,a,i;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=4;break}throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");case 4:return n=JSON.stringify(t.modelTopology),r=JSON.stringify(t.weightSpecs),a=rv(t),e.prev=7,this.LS.setItem(this.keys.info,JSON.stringify(a)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,Kp(t.weightData)),i={format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,signature:null!=t.signature?t.signature:void 0,userDefinedMetadata:null!=t.userDefinedMetadata?t.userDefinedMetadata:void 0,modelInitializer:null!=t.modelInitializer?t.modelInitializer:void 0,initializerSignature:null!=t.initializerSignature?t.initializerSignature:void 0,trainingConfig:null!=t.trainingConfig?t.trainingConfig:void 0},this.LS.setItem(this.keys.modelMetadata,JSON.stringify(i)),e.abrupt("return",{modelArtifactsInfo:a});case 17:throw e.prev=17,e.t0=e.catch(7),Cv(this.keys),new Error("Failed to save model '".concat(this.modelPath,"' to local storage: ")+"size quota being exceeded is a possible cause of this failure: "+"modelTopologyBytes=".concat(a.modelTopologyBytes,", ")+"weightSpecsBytes=".concat(a.weightSpecsBytes,", ")+"weightDataBytes=".concat(a.weightDataBytes,"."));case 21:case"end":return e.stop()}}),e,this,[[7,17]])})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){var t,n,r,a,i,o,s;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(t=JSON.parse(this.LS.getItem(this.keys.info)))){e.next=3;break}throw new Error("In local storage, there is no model with name '".concat(this.modelPath,"'"));case 3:if("JSON"===t.modelTopologyType){e.next=5;break}throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");case 5:if(n={},null!=(r=JSON.parse(this.LS.getItem(this.keys.topology)))){e.next=9;break}throw new Error("In local storage, the topology of model '".concat(this.modelPath,"' ")+"is missing.");case 9:if(n.modelTopology=r,null!=(a=JSON.parse(this.LS.getItem(this.keys.weightSpecs)))){e.next=13;break}throw new Error("In local storage, the weight specs of model '".concat(this.modelPath,"' ")+"are missing.");case 13:if(n.weightSpecs=a,null!=(i=this.LS.getItem(this.keys.modelMetadata))&&(o=JSON.parse(i),n.format=o.format,n.generatedBy=o.generatedBy,n.convertedBy=o.convertedBy,null!=o.signature&&(n.signature=o.signature),null!=o.userDefinedMetadata&&(n.userDefinedMetadata=o.userDefinedMetadata),null!=o.modelInitializer&&(n.modelInitializer=o.modelInitializer),null!=o.initializerSignature&&(n.initializerSignature=o.initializerSignature),null!=o.trainingConfig&&(n.trainingConfig=o.trainingConfig)),null!=(s=this.LS.getItem(this.keys.weightData))){e.next=19;break}throw new Error("In local storage, the binary weight values of model "+"'".concat(this.modelPath,"' are missing."));case 19:return n.weightData=Xp(s),e.abrupt("return",n);case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();Av.URL_SCHEME="localstorage://";var Rv=function(e){return el().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Av.URL_SCHEME)?(t=e.slice(Av.URL_SCHEME.length),new Av(t)):null;var t};ov.registerSaveRouter(Rv),ov.registerLoadRouter(Rv);var Dv=function(){function e(){(0,Se.Z)(this,e),kc(el().getBool("IS_BROWSER"),(function(){return"Current environment is not a web browser"})),kc("undefined"===typeof window||"undefined"!==typeof window.localStorage,(function(){return"Current browser does not appear to support localStorage"})),this.LS=window.localStorage}return(0,Te.Z)(e,[{key:"listModels",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){var t,n,r,a,i,o;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t={},n=wv+kv,r=kv+xv,a=0;a<this.LS.length;++a)(i=this.LS.key(a)).startsWith(n)&&i.endsWith(r)&&(o=Zv(i),t[o]=JSON.parse(this.LS.getItem(i)));return e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeModel",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){var n,r;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=_v(t),n=Nv(t),null!=this.LS.getItem(n.info)){e.next=4;break}throw new Error("Cannot find model at path '".concat(t,"'"));case 4:return r=JSON.parse(this.LS.getItem(n.info)),Cv(n),e.abrupt("return",r);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Ov="://",Lv=function(){function e(){(0,Se.Z)(this,e),this.managers={}}return(0,Te.Z)(e,null,[{key:"getInstance",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"registerManager",value:function(t,n){kc(null!=t,(function(){return"scheme must not be undefined or null."})),t.endsWith(Ov)&&(t=t.slice(0,t.indexOf(Ov))),kc(t.length>0,(function(){return"scheme must not be an empty string."}));var r=e.getInstance();kc(null==r.managers[t],(function(){return"A model store manager is already registered for scheme '".concat(t,"'.")})),r.managers[t]=n}},{key:"getManager",value:function(t){var n=e.getInstance().managers[t];if(null==n)throw new Error("Cannot find model manager for scheme '".concat(t,"'"));return n}},{key:"getSchemes",value:function(){return Object.keys(e.getInstance().managers)}}]),e}();function Fv(e){if(-1===e.indexOf(Ov))throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+"".concat(Lv.getSchemes().join(",")));return{scheme:e.split(Ov)[0],path:e.split(Ov)[1]}}function Mv(e,t){return Pv.apply(this,arguments)}function Pv(){return Pv=(0,ke.Z)((0,be.Z)().mark((function e(t,n){var r,a,i,o,s,u,c,l,d,f,h=arguments;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>2&&void 0!==h[2]&&h[2],kc(t!==n,(function(){return"Old path and new path are the same: '".concat(t,"'")})),kc((a=ov.getLoadHandlers(t)).length>0,(function(){return"Copying failed because no load handler is found for source URL ".concat(t,".")})),kc(a.length<2,(function(){return"Copying failed because more than one (".concat(a.length,") ")+"load handlers for source URL ".concat(t,".")})),i=a[0],kc((o=ov.getSaveHandlers(n)).length>0,(function(){return"Copying failed because no save handler is found for destination "+"URL ".concat(n,".")})),kc(o.length<2,(function(){return"Copying failed because more than one (".concat(a.length,") ")+"save handlers for destination URL ".concat(n,".")})),s=o[0],u=Fv(t).scheme,c=Fv(t).path,l=u===Fv(t).scheme,e.next=15,i.load();case 15:if(d=e.sent,!r||!l){e.next=19;break}return e.next=19,Lv.getManager(u).removeModel(c);case 19:return e.next=21,s.save(d);case 21:if(f=e.sent,!r||l){e.next=25;break}return e.next=25,Lv.getManager(u).removeModel(c);case 25:return e.abrupt("return",f.modelArtifactsInfo);case 26:case"end":return e.stop()}}),e)}))),Pv.apply(this,arguments)}function zv(){return Bv.apply(this,arguments)}function Bv(){return(Bv=(0,ke.Z)((0,be.Z)().mark((function e(){var t,n,r,a,i,o,s;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Lv.getSchemes(),n={},r=(0,Ht.Z)(t),e.prev=3,r.s();case 5:if((a=r.n()).done){e.next=13;break}return i=a.value,e.next=9,Lv.getManager(i).listModels();case 9:for(s in o=e.sent)n[i+Ov+s]=o[s];case 11:e.next=5;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(3),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",n);case 22:case"end":return e.stop()}}),e,null,[[3,15,18,21]])})))).apply(this,arguments)}function Vv(e){return Uv.apply(this,arguments)}function Uv(){return(Uv=(0,ke.Z)((0,be.Z)().mark((function e(t){var n,r;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Fv(t),r=Lv.getManager(n.scheme),e.abrupt("return",r.removeModel(n.path));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wv(e,t){return jv.apply(this,arguments)}function jv(){return(jv=(0,ke.Z)((0,be.Z)().mark((function e(t,n){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!1,e.abrupt("return",Mv(t,n,false));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Gv(e,t){return Hv.apply(this,arguments)}function Hv(){return(Hv=(0,ke.Z)((0,be.Z)().mark((function e(t,n){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!0,e.abrupt("return",Mv(t,n,true));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var qv=function(){function e(){(0,Se.Z)(this,e),this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}return(0,Te.Z)(e,[{key:"fetch",value:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){return fetch(e,t)}))},{key:"now",value:function(){return performance.now()}},{key:"encode",value:function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Browser's encoder only supports utf-8, but got ".concat(t));return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}},{key:"decode",value:function(e,t){return new TextDecoder(t).decode(e)}},{key:"setTimeoutCustom",value:function(e,t){var n=this;"undefined"!==typeof window&&el().getBool("USE_SETTIMEOUTCUSTOM")?(this.functionRefs.push(e),setTimeout((function(){window.postMessage({name:n.messageName,index:n.functionRefs.length-1},"*")}),t),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",(function(e){e.source===window&&e.data.name===n.messageName&&(e.stopPropagation(),(0,n.functionRefs[e.data.index])(),n.handledMessageCount++,n.handledMessageCount===n.functionRefs.length&&(n.functionRefs=[],n.handledMessageCount=0))}),!0))):setTimeout(e,t)}},{key:"isTypedArray",value:function(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray}}]),e}();if(el().get("IS_BROWSER")){el().setPlatform("browser",new qv);try{Lv.registerManager(Av.URL_SCHEME,new Dv)}catch(yhe){}try{Lv.registerManager(mv.URL_SCHEME,new bv)}catch(yhe){}}var $v,Kv=function(){return n(5410)};var Xv=function(){function e(){(0,Se.Z)(this,e),this.util=n(8628),this.textEncoder=new this.util.TextEncoder}return(0,Te.Z)(e,[{key:"fetch",value:function(e,t){return null!=el().global.fetch?el().global.fetch(e,t):(null==$v&&($v=Kv()),$v(e,t))}},{key:"now",value:function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}},{key:"encode",value:function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Node built-in encoder only supports utf-8, but got ".concat(t));return this.textEncoder.encode(e)}},{key:"decode",value:function(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)}},{key:"isTypedArray",value:function(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}}]),e}();function Yv(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32",n=arguments.length>2?arguments[2]:void 0;return t=t||"float32",qc(e),new tp(e,t,n)}el().get("IS_NODE")&&!el().get("IS_BROWSER")&&el().setPlatform("node",new Xv);var Qv=Mp({cast_:function(e,t){var n=Op(e,"x","cast");if(!function(e){return"bool"===e||"complex64"===e||"float32"===e||"int32"===e||"string"===e}(t))throw new Error("Failed to cast to unknown dtype ".concat(t));if("string"===t&&"string"!==n.dtype||"string"!==t&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");var r={x:n},a={dtype:t};return Ep.runKernel(Nl,r,a)}});var Jv=Mp({clone_:function(e){var t={x:Op(e,"x","clone","string_or_numeric")};return Ep.runKernel(yd,t)}});function em(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log(e.toString(t))}function tm(){return Ep}function nm(){return Ep.memory()}function rm(e,t){return Ep.tidy(e,t)}function am(e){bp(e).forEach((function(e){return e.dispose()}))}function im(e){return Ep.keep(e)}function om(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Ep.registerBackend(e,t,n)}Sp(),rp={buffer:Yv,cast:Qv,clone:Jv,print:em},function(e){e}((function(e){el().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}));var sm=Mp({add_:function(e,t){var n=Op(e,"a","add"),r=Op(t,"b","add"),a=gp(n,r),i=(0,ge.Z)(a,2),o={a:n=i[0],b:r=i[1]};return Ep.runKernel(ul,o)}});var um=Mp({floorDiv_:function(e,t){var n=Op(e,"a","floorDiv"),r=Op(t,"b","floorDiv"),a=gp(n,r),i=(0,ge.Z)(a,2),o={a:n=i[0],b:r=i[1]};return Ep.runKernel(fd,o)}});var cm=Mp({div_:function(e,t){var n=Op(e,"a","div"),r=Op(t,"b","div"),a=gp(n,r),i=(0,ge.Z)(a,2);if(n=i[0],r=i[1],"int32"===n.dtype&&"int32"===r.dtype)return um(n,r);var o={a:n,b:r};return Ep.runKernel(Jl,o,{})}});var lm=Mp({mul_:function(e,t){var n=Op(e,"a","mul"),r=Op(t,"b","mul"),a=gp(n,r),i=(0,ge.Z)(a,2),o={a:n=i[0],b:r=i[1]};return Ep.runKernel($d,o)}});var dm=Mp({sqrt_:function(e){var t={x:Op(e,"x","sqrt","float32")};return Ep.runKernel(Lf,t)}});var fm=Mp({square_:function(e){var t=Op(e,"x","square");return Ep.runKernel("Square",{x:t},{})}});var hm=Mp({zerosLike_:function(e){var t={x:Op(e,"x","zerosLike")};return Ep.runKernel(uh,t)}});function pm(e){return Ep.customGrad(e)}function vm(e,t){if((Wh(e)&&"string"!==t||Array.isArray(e))&&"complex64"!==t)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===t&&Wh(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return zp(e,[],[],t)}var mm=function(){function e(){(0,Se.Z)(this,e)}return(0,Te.Z)(e,[{key:"getClassName",value:function(){return this.constructor.className}}],[{key:"fromConfig",value:function(e,t){return new e(t)}}]),e}(),gm=function(){function e(){(0,Se.Z)(this,e),this.classNameMap={}}return(0,Te.Z)(e,null,[{key:"getMap",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"register",value:function(t){e.getMap().classNameMap[t.className]=[t,t.fromConfig]}}]),e}();function ym(e){kc(null!=e.className,(function(){return"Class being registered does not have the static className property defined."})),kc("string"===typeof e.className,(function(){return"className is required to be a string, but got type "+typeof e.className})),kc(e.className.length>0,(function(){return"Class being registered has an empty-string as its className, which is disallowed."})),gm.register(e)}var bm=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(){return(0,Se.Z)(this,n),t.apply(this,arguments)}return(0,Te.Z)(n,[{key:"minimize",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,r=this.computeGradients(e,n),a=r.value,i=r.grads;if(null!=n){var o=n.map((function(e){return{name:e.name,tensor:i[e.name]}}));this.applyGradients(o)}else this.applyGradients(i);return am(i),t?a:(a.dispose(),null)}},{key:"iterations",get:function(){return null==this.iterations_&&(this.iterations_=0),this.iterations_}},{key:"incrementIterations",value:function(){this.iterations_=this.iterations+1}},{key:"computeGradients",value:function(e,t){return function(e,t){kc(zc(e),(function(){return"The f passed in variableGrads(f) must be a function"})),kc(null==t||Array.isArray(t)&&t.every((function(e){return e instanceof dp})),(function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"}));var n=null!=t;if(!n)for(var r in t=[],Ep.registeredVariables)t.push(Ep.registeredVariables[r]);var a=n?t.filter((function(e){return!e.trainable})):null,i=t.length;t=t.filter((function(e){return e.trainable})),kc(t.length>0,(function(){return"variableGrads() expects at least one of the input variables to "+"be trainable, but none of the ".concat(i," variables is ")+"trainable."}));var o=Ep.gradients(e,t,null,!0),s=o.value,u=o.grads;kc(u.some((function(e){return null!=e})),(function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."})),kc(0===s.rank,(function(){return"The f passed in variableGrads(f) must return a scalar, but it "+"returned a rank-".concat(s.rank," tensor")}));var c={};return t.forEach((function(e,t){null!=u[t]&&(c[e.name]=u[t])})),null!=a&&a.forEach((function(e){return c[e.name]=null})),{value:s,grads:c}}(e,t)}},{key:"dispose",value:function(){null!=this.iterations_&&am(this.iterations_)}},{key:"saveIterations",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null==this.iterations_&&(this.iterations_=0),e.abrupt("return",{name:"iter",tensor:vm(this.iterations_,"int32")});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getWeights",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("getWeights() is not implemented for this optimizer yet.");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("setWeights() is not implemented for this optimizer class "+"".concat(this.getClassName()));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"extractIterations",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t[0].tensor.data();case 2:return this.iterations_=e.sent[0],e.abrupt("return",t.slice(1));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(mm);Object.defineProperty(bm,Symbol.hasInstance,{value:function(e){return null!=e.minimize&&null!=e.computeGradients&&null!=e.applyGradients}});var km=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e,r){var a,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return(0,Se.Z)(this,n),(a=t.call(this)).learningRate=e,a.rho=r,a.epsilon=i,a.accumulatedGrads=[],a.accumulatedUpdates=[],null==i&&(a.epsilon=Ep.backend.epsilon()),a}return(0,Te.Z)(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=Ep.registeredVariables[n];null==t.accumulatedGrads[r]&&(t.accumulatedGrads[r]={originalName:"".concat(n,"/accum_grad"),variable:rm((function(){return hm(a).variable(false)}))}),null==t.accumulatedUpdates[r]&&(t.accumulatedUpdates[r]={originalName:"".concat(n,"/accum_var"),variable:rm((function(){return hm(a).variable(false)}))});var i=Array.isArray(e)?e[r].tensor:e[n];if(null!=i){var o=t.accumulatedGrads[r].variable,s=t.accumulatedUpdates[r].variable;rm((function(){var e=sm(lm(o,t.rho),lm(fm(i),1-t.rho)),n=lm(cm(dm(sm(s,t.epsilon)),dm(sm(o,t.epsilon))),i),r=sm(lm(s,t.rho),lm(fm(n),1-t.rho));o.assign(e),s.assign(r);var u=sm(lm(n,-t.learningRate),a);a.assign(u)}))}})),this.incrementIterations()}},{key:"dispose",value:function(){null!=this.accumulatedUpdates&&(am(this.accumulatedGrads.map((function(e){return e.variable}))),am(this.accumulatedUpdates.map((function(e){return e.variable}))))}},{key:"getWeights",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){var t;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[].concat((0,me.Z)(this.accumulatedGrads),(0,me.Z)(this.accumulatedUpdates)),e.next=3,this.saveIterations();case 3:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(t.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){var n;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,n=t.length/2,!1,this.accumulatedGrads=t.slice(0,n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}})),this.accumulatedUpdates=t.slice(n,2*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}}],[{key:"className",get:function(){return"Adadelta"}},{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.rho,t.epsilon)}}]),n}(bm);function wm(e,t,n){qc(e);var r={shape:e,value:t,dtype:n=n||Pc(t)};return Ep.runKernel(cd,{},r)}var xm=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1;return(0,Se.Z)(this,n),(r=t.call(this)).learningRate=e,r.initialAccumulatorValue=a,r.accumulatedGrads=[],r}return(0,Te.Z)(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=Ep.registeredVariables[n];if(null==t.accumulatedGrads[r]){t.accumulatedGrads[r]={originalName:"".concat(n,"/accumulator"),variable:rm((function(){return wm(a.shape,t.initialAccumulatorValue).variable(false)}))}}var i=Array.isArray(e)?e[r].tensor:e[n];if(null!=i){var o=t.accumulatedGrads[r].variable;rm((function(){var e=sm(o,fm(i));o.assign(e);var n=sm(lm(cm(i,dm(sm(e,Ep.backend.epsilon()))),-t.learningRate),a);a.assign(n)}))}})),this.incrementIterations()}},{key:"dispose",value:function(){null!=this.accumulatedGrads&&am(this.accumulatedGrads.map((function(e){return e.variable})))}},{key:"getWeights",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.saveIterations();case 2:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(this.accumulatedGrads.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,!1,this.accumulatedGrads=t.map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}}],[{key:"className",get:function(){return"Adagrad"}},{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.initialAccumulatorValue)}}]),n}(bm);var Im=Mp({pow_:function(e,t){var n=Op(e,"base","pow"),r=Op(t,"exp","pow"),a=gp(n,r),i=(0,ge.Z)(a,2),o={a:n=i[0],b:r=i[1]};return Ep.runKernel(af,o)}});var Sm=Mp({sub_:function(e,t){var n=Op(e,"a","sub"),r=Op(t,"b","sub"),a=gp(n,r),i=(0,ge.Z)(a,2),o={a:n=i[0],b:r=i[1]};return Ep.runKernel(Qf,o)}}),Tm=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e,r,a){var i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return(0,Se.Z)(this,n),(i=t.call(this)).learningRate=e,i.beta1=r,i.beta2=a,i.epsilon=o,i.accumulatedFirstMoment=[],i.accumulatedSecondMoment=[],rm((function(){i.accBeta1=vm(r).variable(),i.accBeta2=vm(a).variable()})),null==o&&(i.epsilon=Ep.backend.epsilon()),i}return(0,Te.Z)(n,[{key:"applyGradients",value:function(e){var t=this,n=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e);rm((function(){var r=Sm(1,t.accBeta1),a=Sm(1,t.accBeta2);n.forEach((function(n,i){var o=Ep.registeredVariables[n];null==t.accumulatedFirstMoment[i]&&(t.accumulatedFirstMoment[i]={originalName:"".concat(n,"/m"),variable:rm((function(){return hm(o).variable(false)}))}),null==t.accumulatedSecondMoment[i]&&(t.accumulatedSecondMoment[i]={originalName:"".concat(n,"/v"),variable:rm((function(){return hm(o).variable(false)}))});var s=Array.isArray(e)?e[i].tensor:e[n];if(null!=s){var u=t.accumulatedFirstMoment[i].variable,c=t.accumulatedSecondMoment[i].variable,l=sm(lm(u,t.beta1),lm(s,1-t.beta1)),d=sm(lm(c,t.beta2),lm(fm(s),1-t.beta2)),f=cm(l,r),h=cm(d,a);u.assign(l),c.assign(d);var p=sm(lm(cm(f,sm(dm(h),t.epsilon)),-t.learningRate),o);o.assign(p)}})),t.accBeta1.assign(lm(t.accBeta1,t.beta1)),t.accBeta2.assign(lm(t.accBeta2,t.beta2))})),this.incrementIterations()}},{key:"dispose",value:function(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&am(this.accumulatedFirstMoment.map((function(e){return e.variable}))),null!=this.accumulatedSecondMoment&&am(this.accumulatedSecondMoment.map((function(e){return e.variable})))}},{key:"getWeights",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){var t;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[].concat((0,me.Z)(this.accumulatedFirstMoment),(0,me.Z)(this.accumulatedSecondMoment)),e.next=3,this.saveIterations();case 3:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(t.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){var n,r=this;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,rm((function(){r.accBeta1.assign(Im(r.beta1,r.iterations_+1)),r.accBeta2.assign(Im(r.beta2,r.iterations_+1))})),n=t.length/2,!1,this.accumulatedFirstMoment=t.slice(0,n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}})),this.accumulatedSecondMoment=t.slice(n,2*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}}],[{key:"className",get:function(){return"Adam"}},{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)}}]),n}(bm);var Em=Mp({abs_:function(e){var t=Op(e,"x","abs");if("complex64"===t.dtype){var n={x:t};return Ep.runKernel(Al,n)}var r={x:t};return Ep.runKernel(il,r)}});function Nm(e,t){for(var n=e.length,r=[],a=0;a<n;a++){var i=n-1-a,o=e[i]||1;(t[t.length-1-a]||1)>1&&1===o&&r.unshift(i)}return r}function Cm(e,t){for(var n=[],r=0;r<t.length;r++){var a=e[e.length-r-1],i=t.length-r-1,o=t[i];(null==a||1===a&&o>1)&&n.unshift(i)}return n}function Zm(e,t){for(var n=Math.max(e.length,t.length),r=new Array(n),a=0;a<n;a++){var i=e[e.length-a-1];null==i&&(i=1);var o=t[t.length-a-1];if(null==o&&(o=1),1===i)r[n-a-1]=o;else if(1===o)r[n-a-1]=i;else{if(i!==o){var s="Operands could not be broadcast together with shapes "+"".concat(e," and ").concat(t,".");throw Error(s)}r[n-a-1]=i}}return r}var _m=Mp({maximum_:function(e,t){var n=Op(e,"a","maximum"),r=Op(t,"b","maximum"),a=gp(n,r),i=(0,ge.Z)(a,2);n=i[0],r=i[1],"bool"===n.dtype&&(n=Qv(n,"int32"),r=Qv(r,"int32")),Zm(n.shape,r.shape);var o={a:n,b:r};return Ep.runKernel(Fd,o)}}),Am=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e,r,a){var i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return(0,Se.Z)(this,n),(i=t.call(this)).learningRate=e,i.beta1=r,i.beta2=a,i.epsilon=o,i.decay=s,i.accumulatedFirstMoment=[],i.accumulatedWeightedInfNorm=[],rm((function(){i.iteration=vm(0).variable(),i.accBeta1=vm(r).variable()})),null==o&&(i.epsilon=Ep.backend.epsilon()),i}return(0,Te.Z)(n,[{key:"applyGradients",value:function(e){var t=this,n=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e);rm((function(){var r=Sm(1,t.accBeta1),a=cm(-t.learningRate,sm(lm(t.iteration,t.decay),1));n.forEach((function(n,i){var o=Ep.registeredVariables[n];null==t.accumulatedFirstMoment[i]&&(t.accumulatedFirstMoment[i]={originalName:"".concat(n,"/m"),variable:hm(o).variable(false)}),null==t.accumulatedWeightedInfNorm[i]&&(t.accumulatedWeightedInfNorm[i]={originalName:"".concat(n,"/v"),variable:hm(o).variable(false)});var s=Array.isArray(e)?e[i].tensor:e[n];if(null!=s){var u=t.accumulatedFirstMoment[i].variable,c=t.accumulatedWeightedInfNorm[i].variable,l=sm(lm(u,t.beta1),lm(s,1-t.beta1)),d=lm(c,t.beta2),f=Em(s),h=_m(d,f);u.assign(l),c.assign(h);var p=sm(lm(cm(a,r),cm(l,sm(h,t.epsilon))),o);o.assign(p)}})),t.iteration.assign(sm(t.iteration,1)),t.accBeta1.assign(lm(t.accBeta1,t.beta1))})),this.incrementIterations()}},{key:"dispose",value:function(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&am(this.accumulatedFirstMoment.map((function(e){return e.variable}))),null!=this.accumulatedWeightedInfNorm&&am(this.accumulatedWeightedInfNorm.map((function(e){return e.variable})))}},{key:"getWeights",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("getWeights() is not implemented for Adamax yet.");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("setWeights() is not implemented for Adamax yet.");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}}],[{key:"className",get:function(){return"Adamax"}},{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)}}]),n}(bm),Rm=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r;return(0,Se.Z)(this,n),(r=t.call(this)).learningRate=e,r.setLearningRate(e),r}return(0,Te.Z)(n,[{key:"applyGradients",value:function(e){var t=this,n=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e);n.forEach((function(n,r){var a=Array.isArray(e)?e[r].tensor:e[n];if(null!=a){var i=Ep.registeredVariables[n];rm((function(){var e=sm(lm(t.c,a),i);i.assign(e)}))}})),this.incrementIterations()}},{key:"setLearningRate",value:function(e){this.learningRate=e,null!=this.c&&this.c.dispose(),this.c=im(vm(-e))}},{key:"dispose",value:function(){this.c.dispose()}},{key:"getWeights",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.saveIterations();case 2:return e.t0=e.sent,e.abrupt("return",[e.t0]);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:if(0===(t=e.sent).length){e.next=5;break}throw new Error("SGD optimizer does not have settable weights.");case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate}}}],[{key:"className",get:function(){return"SGD"}},{key:"fromConfig",value:function(e,t){return new e(t.learningRate)}}]),n}(bm),Dm=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e,r){var a,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,Se.Z)(this,n),(a=t.call(this,e)).learningRate=e,a.momentum=r,a.useNesterov=i,a.accumulations=[],a.m=vm(a.momentum),a}return(0,Te.Z)(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=Ep.registeredVariables[n];if(null==t.accumulations[r]){t.accumulations[r]={originalName:"".concat(n,"/momentum"),variable:rm((function(){return hm(a).variable(false)}))}}var i=t.accumulations[r].variable,o=Array.isArray(e)?e[r].tensor:e[n];null!=o&&rm((function(){var e,n=sm(lm(t.m,i),o);e=t.useNesterov?sm(lm(t.c,sm(o,lm(n,t.m))),a):sm(lm(t.c,n),a),i.assign(n),a.assign(e)}))})),this.incrementIterations()}},{key:"dispose",value:function(){this.m.dispose(),null!=this.accumulations&&am(this.accumulations.map((function(e){return e.variable})))}},{key:"setMomentum",value:function(e){this.momentum=e}},{key:"getWeights",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.saveIterations();case 2:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(this.accumulations.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,!1,this.accumulations=t.map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}}],[{key:"className",get:function(){return"Momentum"}},{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)}}]),n}(Rm),Om=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if((0,Se.Z)(this,n),(r=t.call(this)).learningRate=e,r.decay=a,r.momentum=i,r.epsilon=o,r.accumulatedMeanSquares=[],r.accumulatedMoments=[],r.accumulatedMeanGrads=[],r.centered=s,null==o&&(r.epsilon=Ep.backend.epsilon()),null==e)throw new Error("learningRate for RMSPropOptimizer must be defined.");return r}return(0,Te.Z)(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=Ep.registeredVariables[n],i=!1;null==t.accumulatedMeanSquares[r]&&(t.accumulatedMeanSquares[r]={originalName:"".concat(n,"/rms"),variable:rm((function(){return hm(a).variable(i)}))}),null==t.accumulatedMoments[r]&&(t.accumulatedMoments[r]={originalName:"".concat(n,"/momentum"),variable:rm((function(){return hm(a).variable(i)}))}),null==t.accumulatedMeanGrads[r]&&t.centered&&(t.accumulatedMeanGrads[r]={originalName:"".concat(n,"/mg"),variable:rm((function(){return hm(a).variable(i)}))});var o=Array.isArray(e)?e[r].tensor:e[n];if(null!=o){var s=t.accumulatedMeanSquares[r].variable,u=t.accumulatedMoments[r].variable;rm((function(){var e=sm(lm(s,t.decay),lm(fm(o),1-t.decay));if(t.centered){var n=t.accumulatedMeanGrads[r].variable,i=sm(lm(n,t.decay),lm(o,1-t.decay)),c=cm(lm(o,t.learningRate),dm(Sm(e,sm(fm(i),t.epsilon)))),l=sm(lm(u,t.momentum),c);s.assign(e),n.assign(i),u.assign(l);var d=Sm(a,l);a.assign(d)}else{var f=sm(lm(s,t.decay),lm(fm(o),1-t.decay)),h=sm(lm(u,t.momentum),cm(lm(o,t.learningRate),dm(sm(f,t.epsilon))));s.assign(f),u.assign(h);var p=Sm(a,h);a.assign(p)}}))}})),this.incrementIterations()}},{key:"dispose",value:function(){null!=this.accumulatedMeanSquares&&am(this.accumulatedMeanSquares.map((function(e){return e.variable}))),null!=this.accumulatedMeanGrads&&this.centered&&am(this.accumulatedMeanGrads.map((function(e){return e.variable}))),null!=this.accumulatedMoments&&am(this.accumulatedMoments.map((function(e){return e.variable})))}},{key:"getWeights",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){var t;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[].concat((0,me.Z)(this.accumulatedMeanSquares),(0,me.Z)(this.accumulatedMoments)),this.centered&&t.push.apply(t,(0,me.Z)(this.accumulatedMeanGrads)),e.next=4,this.saveIterations();case 4:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(t.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){var n,r;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,n=this.centered?t.length/3:t.length/2,r=!1,this.accumulatedMeanSquares=t.slice(0,n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(r)}})),this.accumulatedMoments=t.slice(n,2*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(r)}})),this.centered&&(this.accumulatedMeanGrads=t.slice(2*n,3*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(r)}})));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}}],[{key:"className",get:function(){return"RMSProp"}},{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)}}]),n}(bm),Lm=[km,xm,Tm,Am,Dm,Om,Rm];function Fm(e){return new Promise((function(e){return setTimeout(e)})).then(e)}var Mm=function(){function e(t){if((0,Se.Z)(this,e),!el().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(e.URL_SCHEME)&&(t=t.slice(e.URL_SCHEME.length)),null!=t&&0!==t.length||(t="model"),this.modelJsonFileName=t+".json",this.weightDataFileName=t+".weights.bin"}return(0,Te.Z)(e,[{key:"save",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){var n,r,a,i,o,s;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"!==typeof document){e.next=2;break}throw new Error("Browser downloads are not supported in this environment since `document` is not present");case 2:if(n=window.URL.createObjectURL(new Blob([t.weightData],{type:"application/octet-stream"})),!(t.modelTopology instanceof ArrayBuffer)){e.next=7;break}throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 7:return r=[{paths:["./"+this.weightDataFileName],weights:t.weightSpecs}],a=Jp(t,r),i=window.URL.createObjectURL(new Blob([JSON.stringify(a)],{type:"application/json"})),(o=null==this.modelJsonAnchor?document.createElement("a"):this.modelJsonAnchor).download=this.modelJsonFileName,o.href=i,e.next=15,Fm((function(){return o.dispatchEvent(new MouseEvent("click"))}));case 15:if(null==t.weightData){e.next=21;break}return(s=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,s.href=n,e.next=21,Fm((function(){return s.dispatchEvent(new MouseEvent("click"))}));case 21:return e.abrupt("return",{modelArtifactsInfo:rv(t)});case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();Mm.URL_SCHEME="downloads://";var Pm=function(){function e(t){if((0,Se.Z)(this,e),null==t||t.length<1)throw new Error("When calling browserFiles, at least 1 file is required, "+"but received ".concat(t));this.jsonFile=t[0],this.weightsFiles=t.slice(1)}return(0,Te.Z)(e,[{key:"load",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){var t=this;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=new FileReader;r.onload=function(r){var a=JSON.parse(r.target.result),i=a.modelTopology;if(null!=i)if(null!=a.weightsManifest)if(0!==t.weightsFiles.length){var o=tv(a,(function(e){return t.loadWeights(e)}));e(o)}else e({modelTopology:i});else n(new Error("weightManifest field is missing from file ".concat(t.jsonFile.name)));else n(new Error("modelTopology field is missing from file ".concat(t.jsonFile.name)))},r.onerror=function(e){return n("Failed to read model topology and weights manifest JSON "+"from file '".concat(t.jsonFile.name,"'. BrowserFiles supports loading ")+"Keras-style tf.Model artifacts only.")},r.readAsText(t.jsonFile)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"loadWeights",value:function(e){var t,n=this,r=[],a=[],i=(0,Ht.Z)(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;r.push.apply(r,(0,me.Z)(o.weights)),a.push.apply(a,(0,me.Z)(o.paths))}}catch(yhe){i.e(yhe)}finally{i.f()}var s=this.checkManifestAndWeightFiles(e),u=a.map((function(e){return n.loadWeightsFile(e,s[e])}));return Promise.all(u).then((function(e){return[r,Yp(e)]}))}},{key:"loadWeightsFile",value:function(e,t){return new Promise((function(n,r){var a=new FileReader;a.onload=function(e){var t=e.target.result;n(t)},a.onerror=function(t){return r("Failed to weights data from file of path '".concat(e,"'."))},a.readAsArrayBuffer(t)}))}},{key:"checkManifestAndWeightFiles",value:function(e){var t,n=this,r=[],a=this.weightsFiles.map((function(e){return Qp(e.name)})),i={},o=(0,Ht.Z)(e);try{for(o.s();!(t=o.n()).done;){t.value.paths.forEach((function(e){var t=Qp(e);if(-1!==r.indexOf(t))throw new Error("Duplicate file basename found in weights manifest: "+"'".concat(t,"'"));if(r.push(t),-1===a.indexOf(t))throw new Error("Weight file with basename '".concat(t,"' is not provided."));i[e]=n.weightsFiles[a.indexOf(t)]}))}}catch(yhe){o.e(yhe)}finally{o.f()}if(r.length!==this.weightsFiles.length)throw new Error("Mismatch in the number of files in weights manifest "+"(".concat(r.length,") and the number of weight files provided ")+"(".concat(this.weightsFiles.length,")."));return i}}]),e}();function zm(e){return new Pm(e)}function Bm(e,t,n,r){!function(e){kc(null!=e&&Array.isArray(e)&&e.length>0,(function(){return"promises must be a none empty array"}))}(e),function(e,t){kc(e>=0&&e<=1,(function(){return"Progress fraction must be in range [0, 1], but "+"got startFraction ".concat(e)})),kc(t>=0&&t<=1,(function(){return"Progress fraction must be in range [0, 1], but "+"got endFraction ".concat(t)})),kc(t>=e,(function(){return"startFraction must be no more than endFraction, but "+"got startFraction ".concat(e," and endFraction ")+"".concat(t)}))}(n=null==n?0:n,r=null==r?1:r);var a=0;return Promise.all(e.map((function(i){return i.then((function(i){var o=n+ ++a/e.length*(r-n);return t(o),i})),i})))}function Vm(e,t){return Um.apply(this,arguments)}function Um(){return Um=(0,ke.Z)((0,be.Z)().mark((function e(t,n){var r,a,i,o,s,u,c,l,d;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n&&(n={}),r=null==n.fetchFunc?el().platform.fetch:n.fetchFunc,a=t.map((function(e){return r(e,n.requestInit,{isBinary:!0})})),i=0,o=.5,null!=n.onProgress){e.next=11;break}return e.next=8,Promise.all(a);case 8:e.t0=e.sent,e.next=14;break;case 11:return e.next=13,Bm(a,n.onProgress,i,o);case 13:e.t0=e.sent;case 14:if(s=e.t0,u=s.map((function(e){return e.arrayBuffer()})),c=.5,l=1,null!=n.onProgress){e.next=24;break}return e.next=21,Promise.all(u);case 21:e.t1=e.sent,e.next=27;break;case 24:return e.next=26,Bm(u,n.onProgress,c,l);case 26:e.t1=e.sent;case 27:return d=e.t1,e.abrupt("return",d);case 29:case"end":return e.stop()}}),e)}))),Um.apply(this,arguments)}function Wm(e){return jm.apply(this,arguments)}function jm(){return jm=(0,ke.Z)((0,be.Z)().mark((function e(t){var n,r,a,i,o=arguments;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:"",r=o.length>2?o[2]:void 0,a=o.length>3?o[3]:void 0,i=Gm((function(e){return Vm(e,{requestInit:a})})),e.abrupt("return",i(t,n,r));case 6:case"end":return e.stop()}}),e)}))),jm.apply(this,arguments)}function Gm(e){return function(){var t=(0,ke.Z)((0,be.Z)().mark((function t(n){var r,a,i,o,s,u,c,l,d,f,h,p,v=arguments;return(0,be.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=v.length>1&&void 0!==v[1]?v[1]:"",a=v.length>2?v[2]:void 0,i=n.map((function(){return!1})),o={},s=null!=a?a.map((function(){return!1})):[],u=[],n.forEach((function(e,t){var n=0;e.weights.forEach((function(e){var r="quantization"in e?e.quantization.dtype:e.dtype,c=Vp[r]*Ic(e.shape),l=function(){i[t]=!0,null==o[t]&&(o[t]=[]),o[t].push({manifestEntry:e,groupOffset:n,sizeBytes:c})};null!=a?a.forEach((function(t,n){t===e.name&&(l(),s[n]=!0)})):l(),u.push(e.name),n+=c}))})),s.every((function(e){return e}))){t.next=10;break}throw c=a.filter((function(e,t){return!s[t]})),new Error("Could not find weights in manifest with names: "+"".concat(c.join(", "),". \n")+"Manifest JSON has weights with names: "+"".concat(u.join(", "),"."));case 10:return l=i.reduce((function(e,t,n){return t&&e.push(n),e}),[]),d=[],l.forEach((function(e){n[e].paths.forEach((function(e){var t=r+(r.endsWith("/")?"":"/")+e;d.push(t)}))})),t.next=15,e(d);case 15:return f=t.sent,h={},p=0,l.forEach((function(e){for(var t=n[e].paths.length,r=0,a=0;a<t;a++)r+=f[p+a].byteLength;for(var i=new ArrayBuffer(r),s=new Uint8Array(i),u=0,c=0;c<t;c++){var l=new Uint8Array(f[p+c]);s.set(l,u),u+=l.byteLength}o[e].forEach((function(e){var t=Gp(i.slice(e.groupOffset,e.groupOffset+e.sizeBytes),[e.manifestEntry]);for(var n in t)h[n]=t[n]})),p+=t})),t.abrupt("return",h);case 20:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}ov.registerSaveRouter((function(e){return el().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Mm.URL_SCHEME)?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"model";return new Mm(e)}(e.slice(Mm.URL_SCHEME.length)):null}));var Hm=function(){function e(t,n){if((0,Se.Z)(this,e),this.DEFAULT_METHOD="POST",null==n&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.onProgress=n.onProgress,this.weightUrlConverter=n.weightUrlConverter,null!=n.fetchFunc?(kc("function"===typeof n.fetchFunc,(function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"})),this.fetch=n.fetchFunc):this.fetch=el().platform.fetch,kc(null!=t&&t.length>0,(function(){return"URL path for http must not be null, undefined or empty."})),Array.isArray(t)&&kc(2===t.length,(function(){return"URL paths for http must have a length of 2, "+"(actual length is ".concat(t.length,").")})),this.path=t,null!=n.requestInit&&null!=n.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{}}return(0,Te.Z)(e,[{key:"save",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){var n,r,a,i;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=2;break}throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");case 2:return(n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,r=[{paths:["./model.weights.bin"],weights:t.weightSpecs}],a=Jp(t,r),n.body.append("model.json",new Blob([JSON.stringify(a)],{type:"application/json"}),"model.json"),null!=t.weightData&&n.body.append("model.weights.bin",new Blob([t.weightData],{type:"application/octet-stream"}),"model.weights.bin"),e.next=10,this.fetch(this.path,n);case 10:if(!(i=e.sent).ok){e.next=15;break}return e.abrupt("return",{modelArtifactsInfo:rv(t),responses:[i]});case 15:throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+"".concat(i.status,"."));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){var t,n,r,a,i,o=this;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetch(this.path,this.requestInit);case 2:if((t=e.sent).ok){e.next=5;break}throw new Error("Request to ".concat(this.path," failed with status code ")+"".concat(t.status,". Please verify this URL points to ")+"the model JSON of the model to load.");case 5:return e.prev=5,e.next=8,t.json();case 8:n=e.sent,e.next=16;break;case 11:throw e.prev=11,e.t0=e.catch(5),r="Failed to parse model JSON of response from ".concat(this.path,"."),this.path.endsWith(".pb")?r+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":r+=" Please make sure the server is serving valid JSON for this request.",new Error(r);case 16:if(a=n.modelTopology,i=n.weightsManifest,null!=a||null!=i){e.next=20;break}throw new Error("The JSON from HTTP path ".concat(this.path," contains neither model ")+"topology or manifest for weights.");case 20:return e.abrupt("return",tv(n,(function(e){return o.loadWeights(e)})));case 21:case"end":return e.stop()}}),e,this,[[5,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"loadWeights",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){var n,r,a,i,o,s,u,c,l,d,f,h,p,v,m,g;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Array.isArray(this.path)?this.path[1]:this.path,r=qm(n),a=(0,ge.Z)(r,2),i=a[0],o=a[1],s=this.weightPathPrefix||i,u=av(t),c=[],l=[],d=(0,Ht.Z)(t);try{for(d.s();!(f=d.n()).done;){h=f.value,p=(0,Ht.Z)(h.paths);try{for(p.s();!(v=p.n()).done;)m=v.value,null!=this.weightUrlConverter?l.push(this.weightUrlConverter(m)):c.push(s+m+o)}catch(yhe){p.e(yhe)}finally{p.f()}}}catch(yhe){d.e(yhe)}finally{d.f()}if(!this.weightUrlConverter){e.next=17;break}return e.t0=c.push,e.t1=c,e.t2=me.Z,e.next=14,Promise.all(l);case 14:e.t3=e.sent,e.t4=(0,e.t2)(e.t3),e.t0.apply.call(e.t0,e.t1,e.t4);case 17:return e.next=19,Vm(c,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress});case 19:return g=e.sent,e.abrupt("return",[u,Yp(g)]);case 21:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function qm(e){var t=e.lastIndexOf("/"),n=e.lastIndexOf("?");return[e.substring(0,t)+"/",n>t?e.substring(n):""]}function $m(e){return null!=e.match(Hm.URL_SCHEME_REGEX)}Hm.URL_SCHEME_REGEX=/^https?:\/\//;var Km=function(e,t){if("undefined"===typeof fetch&&(null==t||null==t.fetchFunc))return null;return(Array.isArray(e)?e.every((function(e){return $m(e)})):$m(e))?Xm(e,t):null};function Xm(e,t){return new Hm(e,t)}function Ym(e,t){return Xm(e,t)}ov.registerSaveRouter(Km),ov.registerLoadRouter(Km);var Qm,Jm=function(){function e(t){(0,Se.Z)(this,e),this.modelArtifacts=t}return(0,Te.Z)(e,[{key:"load",value:function(){return this.modelArtifacts}}]),e}(),eg=function(){function e(t){(0,Se.Z)(this,e),this.saveHandler=t}return(0,Te.Z)(e,[{key:"save",value:function(e){return this.saveHandler(e)}}]),e}(),tg=(0,Te.Z)((function e(t){(0,Se.Z)(this,e),t.load&&(this.load=function(){return Promise.resolve(t.load())}),t.save&&(this.save=function(e){return Promise.resolve(t.save(e))})}));function ng(e,t,n,r){var a=arguments;return new tg(rg.apply(void 0,(0,me.Z)(a)))}function rg(e,t,n,r){return 1===arguments.length?null!=e.modelTopology||null!=e.weightSpecs?new Jm(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new Jm({modelTopology:e})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new Jm({modelTopology:e,weightSpecs:t,weightData:n,trainingConfig:r}))}function ag(e){return new eg(e)}function ig(e){return new eg(e)}function og(e,t,n){if(xc(e),null!=t&&3!==t.length)throw new Error("tensor3d() requires shape to have three numbers");var r=Ap(e,n);if(3!==r.length&&1!==r.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return zp(e,t,r,n)}function sg(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;if(t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(null==e)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var n=!1,r=!1,a=!1,i=!1,o=!1,s=!1;if(e.data instanceof Uint8Array)n=!0;else if("undefined"!==typeof ImageData&&e instanceof ImageData)r=!0;else if("undefined"!==typeof HTMLVideoElement&&e instanceof HTMLVideoElement)a=!0;else if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement)i=!0;else if(null!=e.getContext)o=!0;else{if(!("undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap))throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, "+"but was ".concat(e.constructor.name));s=!0}if(null!=yh(lh,Ep.backendName)){var u={pixels:e},c={numChannels:t};return Ep.runKernel(lh,u,c)}var l,d,f=a?[e.videoWidth,e.videoHeight]:[e.width,e.height],h=(0,ge.Z)(f,2),p=h[0],v=h[1];if(o)l=e.getContext("2d").getImageData(0,0,p,v).data;else if(r||n)l=e.data;else if(i||a||s){if(null==Qm)if("undefined"===typeof document){if("undefined"===typeof OffscreenCanvas||"undefined"===typeof OffscreenCanvasRenderingContext2D)throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");Qm=new OffscreenCanvas(1,1).getContext("2d")}else Qm=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});Qm.canvas.width=p,Qm.canvas.height=v,Qm.drawImage(e,0,0,p,v),l=Qm.getImageData(0,0,p,v).data}if(4===t)d=new Int32Array(l);else{var m=p*v;d=new Int32Array(m*t);for(var g=0;g<m;g++)for(var y=0;y<t;++y)d[g*t+y]=l[4*g+y]}return og(d,[v,p,t],"int32")}var ug=Mp({fromPixels_:sg}),cg=-2,lg=-1;function dg(e,t,n){var r=e.shape.length;kc(r===t.length,(function(){return"Error in slice".concat(r,"D: Length of begin ").concat(t," must ")+"match the rank of the array (".concat(r,").")})),kc(r===n.length,(function(){return"Error in slice".concat(r,"D: Length of size ").concat(n," must ")+"match the rank of the array (".concat(r,").")}));for(var a=function(a){kc(t[a]+n[a]<=e.shape[a],(function(){return"Error in slice".concat(r,"D: begin[").concat(a,"] + size[").concat(a,"] ")+"(".concat(t[a]+n[a],") would overflow input.shape[").concat(a,"] (").concat(e.shape[a],")")}))},i=0;i<r;++i)a(i)}function fg(e,t,n){for(var r=[],a=0;a<e.length;a++)r[a]=Math.ceil((t[a]-e[a])/n[a]);return r}function hg(e,t,n){for(var r=n.length,a=0;a<n.length;a++)if(n[a]>1){r=a;break}for(var i=r+1;i<n.length;i++)if(t[i]>0||n[i]!==e[i])return!1;return!0}function pg(e,t){for(var n=e.length>0?e[e.length-1]:1,r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}function vg(e,t,n){var r,a,i=e.shape.length;return(r="number"===typeof t?[t].concat((0,me.Z)(new Array(i-1).fill(0))):t.length<i?t.concat(new Array(i-t.length).fill(0)):t.slice()).forEach((function(e){kc(-1!==e,(function(){return"slice() does not support negative begin indexing."}))})),a=(a=null==n?new Array(i).fill(-1):"number"===typeof n?[n].concat((0,me.Z)(new Array(i-1).fill(-1))):n.length<i?n.concat(new Array(i-n.length).fill(-1)):n).map((function(t,n){return t>=0?t:(kc(-1===t,(function(){return"Negative size values should be exactly -1 but got "+"".concat(t," for the slice() size at index ").concat(n,".")})),e.shape[n]-r[n])})),[r,a]}function mg(e,t,n,r,a,i,o,s,u){var c;if(null==r?(c=new Array(t.length)).fill(1):c=r,null!=o&&0!==(o&o-1))throw new Error("Multiple ellipses in slice is not allowed.");for(var l=!1,d={dims:c.length,numAddAxisAfterEllipsis:0,begin:t.slice(),end:n.slice(),strides:c.slice(),beginMask:a,endMask:i,ellipsisMask:o,newAxisMask:s,shrinkAxisMask:u},f=0;f<d.dims;f++)l&&0!==(1<<f&s)&&d.numAddAxisAfterEllipsis++,1<<f&o&&(l=!0);l||(d.ellipsisMask|=1<<d.dims,d.dims++);var h={dims:e.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};!function(e,t){t.beginMask=0,t.endMask=0,t.shrinkAxisMask=0;var n=0;t.beginValid=null!=e.begin,t.endValid=null!=e.end,t.begin=new Array(t.dims),t.end=new Array(t.dims),t.strides=new Array(t.dims),t.finalShapeGatherIndices=[],t.finalShapeGatherIndicesSparse=[],t.inputShapeGatherIndicesSparse=new Array(t.dims);for(var r=0;r<e.dims;r++)if(1<<r&e.ellipsisMask)for(var a=Math.min(t.dims-(e.dims-r)+1+e.numAddAxisAfterEllipsis,t.dims);n<a;n++)t.begin[n]=0,t.end[n]=0,t.strides[n]=1,t.beginMask|=1<<n,t.endMask|=1<<n,t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(-1),t.inputShapeGatherIndicesSparse[n]=r;else if(1<<r&e.newAxisMask)t.finalShapeGatherIndices.push(cg),t.finalShapeGatherIndicesSparse.push(-1);else{if(n===t.begin.length)throw Error("Index out of range using input dim ".concat(n,"; input ")+"has only ".concat(t.dims," dims, ").concat(t.begin.length,"."));null!=e.begin&&(t.begin[n]=e.begin[r]),null!=e.end&&(t.end[n]=e.end[r]),t.strides[n]=e.strides[r],e.beginMask&1<<r&&(t.beginMask|=1<<n),e.endMask&1<<r&&(t.endMask|=1<<n),e.shrinkAxisMask&1<<r?(t.finalShapeGatherIndices.push(lg),t.finalShapeGatherIndicesSparse.push(-1),t.shrinkAxisMask|=1<<n):(t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(r)),t.inputShapeGatherIndicesSparse[n]=r,n++}}(d,h);for(var p=!0,v=!0,m=!0,g=[],y=[],b=0;b<e.length;++b){if(0===h.strides[b])throw Error("strides[".concat(b,"] must be non-zero"));var k=!!(h.shrinkAxisMask&1<<b),w=e[b];if(-1!==w){var x=[h.beginMask&1<<b,h.endMask&1<<b],I=[h.strides[b]>0?0:-1,h.strides[b]>0?w:w-1];if(k&&h.strides[b]<=0)throw Error("only stride 1 allowed on non-range indexing.");m=m&&1===h.strides[b];var S=!!(h.beginMask&1<<b&&h.endMask&1<<b);if(h.beginValid&&h.endValid){if(k){var T=h.begin[b]<0?w+h.begin[b]:h.begin[b];if(h.begin[b]=T,h.end[b]=h.begin[b]+1,T<0||T>=w)throw Error("slice index ".concat(h.begin[b]," of dimension ").concat(b," out of bounds."))}else h.begin[b]=gg(h.begin[b],0,h.strides[b],w,x,I),h.end[b]=gg(h.end[b],1,h.strides[b],w,x,I);var E=1===h.strides[b]&&0===h.begin[b]&&h.end[b]===w;p=p&&E,v=v&&(0===b&&1===h.strides[b]||E)}else p=p&&1===h.strides[b]&&S,v=v&&(0===b&&1===h.strides[b]||S);var N=void 0,C=!1;if(h.beginValid&&h.endValid?(N=h.end[b]-h.begin[b],C=!0):k?(N=1,C=!0):S&&w>=0&&(N=h.strides[b]<0?-w:w,C=!0),C){var Z=void 0;Z=0===N||N<0!==h.strides[b]<0?0:Math.trunc(N/h.strides[b])+(N%h.strides[b]!==0?1:0),g.push(Z)}else g.push(-1)}else g.push(k?1:-1)}for(var _=0;_<h.finalShapeGatherIndices.length;++_){var A=h.finalShapeGatherIndices[_];A>=0?y.push(g[A]):A===cg&&y.push(1)}var R=y.filter((function(e,t){return h.finalShapeGatherIndices[t]!==cg}));return{finalShapeSparse:R,finalShape:y,isIdentity:p,sliceDim0:v,isSimpleSlice:m,begin:h.begin,end:h.end,strides:h.strides}}function gg(e,t,n,r,a,i){if(a[t])return n>0?i[t]:i[t+1&1];var o=e<0?r+e:e;return o<i[0]?i[0]:o>i[1]?i[1]:o}var yg=Mp({acos_:function(e){var t={x:Op(e,"x","acos")};return Ep.runKernel(ol,t)}});var bg=Mp({acosh_:function(e){var t={x:Op(e,"x","acosh")};return Ep.runKernel(sl,t)}});var kg=Mp({addN_:function(e){kc(Array.isArray(e),(function(){return"The argument passed to tf.addN() must be a list of tensors"})),kc(e.length>=1,(function(){return"Must pass at least one tensor to tf.addN(), but got "+"".concat(e.length)}));var t=e.map((function(e,t){return Op(e,"tensors".concat(t),"addN")})),n=t[0];t.forEach((function(e){if(e.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")})),t.forEach((function(e){if(!Sc(e.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")}));var r=t;return Ep.runKernel(cl,r)}});var wg=Mp({all_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r={x:Op(e,"x","all","bool")},a={axis:t,keepDims:n};return Ep.runKernel(ll,r,a)}});var xg=Mp({any_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r={x:Op(e,"x","any","bool")},a={axis:t,keepDims:n};return Ep.runKernel(dl,r,a)}});var Ig=Mp({argMax_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n={x:Op(e,"x","argMax")},r={axis:t};return Ep.runKernel(fl,n,r)}});var Sg=Mp({argMin_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n={x:Op(e,"x","argMin")},r={axis:t};return Ep.runKernel(hl,n,r)}});var Tg=Mp({asin_:function(e){var t={x:Op(e,"x","asin")};return Ep.runKernel(pl,t)}});var Eg=Mp({asinh_:function(e){var t={x:Op(e,"x","asinh")};return Ep.runKernel(vl,t)}});var Ng=Mp({atan_:function(e){var t={x:Op(e,"x","atan")};return Ep.runKernel(ml,t)}});var Cg=Mp({atan2_:function(e,t){var n=Op(e,"a","atan2"),r=Op(t,"b","atan2"),a=gp(n,r),i=(0,ge.Z)(a,2),o={a:n=i[0],b:r=i[1]};return Ep.runKernel(yl,o)}});var Zg=Mp({atanh_:function(e){var t={x:Op(e,"x","atanh")};return Ep.runKernel(gl,t)}});function _g(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",i=arguments.length>5?arguments[5]:void 0,o=e[3];return Dg(e,[].concat((0,me.Z)(t),[o]),n,i,r,null,null,Wg(a))}function Ag(e,t,n,r,a,i){var o,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast",u=Fg(t),c=(0,ge.Z)(u,2),l=c[0],d=c[1];if("channelsLast"===s)o=[l,d,e[3],e[3]];else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat ".concat(s));o=[l,d,e[1],e[1]]}return Dg(e,o,n,r,a,i,!1,s)}function Rg(e,t,n,r,a,i){var o,s,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NDHWC",c=Mg(t),l=(0,ge.Z)(c,3),d=l[0],f=l[1],h=l[2];if("NDHWC"===u)s="channelsLast",o=[d,f,h,e[4],e[4]];else{if("NCDHW"!==u)throw new Error("Unknown dataFormat ".concat(u));s="channelsFirst",o=[d,f,h,e[1],e[1]]}return Og(e,o,n,r,a,!1,s,i)}function Dg(e,t,n,r,a,i){var o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"channelsLast",u=-1,c=-1,l=-1,d=-1;if("channelsLast"===s){var f=(0,ge.Z)(e,4);u=f[0],c=f[1],l=f[2],d=f[3]}else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat ".concat(s));var h=(0,ge.Z)(e,4);u=h[0],d=h[1],c=h[2],l=h[3]}var p,v=(0,ge.Z)(t,4),m=v[0],g=v[1],y=v[3],b=Fg(n),k=(0,ge.Z)(b,2),w=k[0],x=k[1],I=Fg(r),S=(0,ge.Z)(I,2),T=S[0],E=S[1],N=Pg(m,T),C=Pg(g,E),Z=function(e,t,n,r,a,i,o,s,u){var c,l,d;if("number"===typeof e){c={top:e,bottom:e,left:e,right:e,type:0===e?"VALID":"NUMBER"};var f=function(e,t,n,r,a){null==r&&(r=Lg(e,t,n));var i=e[0],o=e[1],s=zg((i-t+2*r)/n+1,a),u=zg((o-t+2*r)/n+1,a);return[s,u]}([t,n],i,r,e,s);l=f[0],d=f[1]}else if("same"===e){l=Math.ceil(t/r),d=Math.ceil(n/a);var h=Math.max(0,(l-1)*r+i-t),p=Math.max(0,(d-1)*a+o-n),v=Math.floor(h/2),m=h-v,g=Math.floor(p/2);c={top:v,bottom:m,left:g,right:p-g,type:"SAME"}}else if("valid"===e)c={top:0,bottom:0,left:0,right:0,type:"VALID"},l=Math.ceil((t-i+1)/r),d=Math.ceil((n-o+1)/a);else{if("object"!==typeof e)throw Error("Unknown padding parameter: ".concat(e));var y="channelsLast"===u?e[1][0]:e[2][0],b="channelsLast"===u?e[1][1]:e[2][1],k="channelsLast"===u?e[2][0]:e[3][0],w="channelsLast"===u?e[2][1]:e[3][1];c={top:y,bottom:b,left:k,right:w,type:0===y&&0===b&&0===k&&0===w?"VALID":"EXPLICIT"},l=zg((t-i+y+b)/r+1,s),d=zg((n-o+k+w)/a+1,s)}return{padInfo:c,outHeight:l,outWidth:d}}(a,c,l,w,x,N,C,i,s),_=Z.padInfo,A=Z.outHeight,R=Z.outWidth,D=o?y*d:y;return"channelsFirst"===s?p=[u,D,A,R]:"channelsLast"===s&&(p=[u,A,R,D]),{batchSize:u,dataFormat:s,inHeight:c,inWidth:l,inChannels:d,outHeight:A,outWidth:R,outChannels:D,padInfo:_,strideHeight:w,strideWidth:x,filterHeight:m,filterWidth:g,effectiveFilterHeight:N,effectiveFilterWidth:C,dilationHeight:T,dilationWidth:E,inShape:e,outShape:p,filterShape:t}}function Og(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast",s=arguments.length>7?arguments[7]:void 0,u=-1,c=-1,l=-1,d=-1,f=-1;if("channelsLast"===o){var h=(0,ge.Z)(e,5);u=h[0],c=h[1],l=h[2],d=h[3],f=h[4]}else{if("channelsFirst"!==o)throw new Error("Unknown dataFormat ".concat(o));var p=(0,ge.Z)(e,5);u=p[0],f=p[1],c=p[2],l=p[3],d=p[4]}var v,m=(0,ge.Z)(t,5),g=m[0],y=m[1],b=m[2],k=m[4],w=Mg(n),x=(0,ge.Z)(w,3),I=x[0],S=x[1],T=x[2],E=Mg(r),N=(0,ge.Z)(E,3),C=N[0],Z=N[1],_=N[2],A=Pg(g,C),R=Pg(y,Z),D=Pg(b,_),O=function(e,t,n,r,a,i,o,s,u,c,l){var d,f,h,p;"valid"===e&&(e=0);if("number"===typeof e){d={top:e,bottom:e,left:e,right:e,front:e,back:e,type:0===e?"VALID":"NUMBER"};var v=function(e,t,n,r,a,i){null==a&&(a=Lg(e,t[0],r[0]));for(var o=[0,0,0,n],s=0;s<3;s++)e[s]+2*a>=t[s]&&(o[s]=zg((e[s]-t[s]+2*a)/r[s]+1,i));return o}([t,n,r,1],[s,u,c],1,[a,i,o],e,l);f=v[0],h=v[1],p=v[2]}else{if("same"!==e)throw Error("Unknown padding parameter: ".concat(e));var m=((f=Math.ceil(t/a))-1)*a+s-t,g=((h=Math.ceil(n/i))-1)*i+u-n,y=((p=Math.ceil(r/o))-1)*o+c-r,b=Math.floor(m/2),k=m-b,w=Math.floor(g/2),x=g-w,I=Math.floor(y/2);d={top:w,bottom:x,left:I,right:y-I,front:b,back:k,type:"SAME"}}return{padInfo:d,outDepth:f,outHeight:h,outWidth:p}}(a,c,l,d,I,S,T,A,R,D,s),L=O.padInfo,F=O.outDepth,M=O.outHeight,P=O.outWidth,z=i?k*f:k;return"channelsFirst"===o?v=[u,z,F,M,P]:"channelsLast"===o&&(v=[u,F,M,P,z]),{batchSize:u,dataFormat:o,inDepth:c,inHeight:l,inWidth:d,inChannels:f,outDepth:F,outHeight:M,outWidth:P,outChannels:z,padInfo:L,strideDepth:I,strideHeight:S,strideWidth:T,filterDepth:g,filterHeight:y,filterWidth:b,effectiveFilterDepth:A,effectiveFilterHeight:R,effectiveFilterWidth:D,dilationDepth:C,dilationHeight:Z,dilationWidth:_,inShape:e,outShape:v,filterShape:t}}function Lg(e,t,n){var r=Pg(t,arguments.length>3&&void 0!==arguments[3]?arguments[3]:1);return Math.floor((e[0]*(n-1)-n+r)/2)}function Fg(e){return"number"===typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}function Mg(e){return"number"===typeof e?[e,e,e]:e}function Pg(e,t){return t<=1?e:e+(e-1)*(t-1)}function zg(e,t){if(!t)return Math.trunc(e);switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode ".concat(t))}}function Bg(e){var t=Fg(e),n=(0,ge.Z)(t,3),r=n[0],a=n[1],i=n[2];return 1===r&&1===a&&1===i}function Vg(e,t){return Bg(e)||Bg(t)}function Ug(e){return Fg(e).every((function(e){return e>0}))}function Wg(e){if("NHWC"===e)return"channelsLast";if("NCHW"===e)return"channelsFirst";throw new Error("Unknown dataFormat ".concat(e))}function jg(e,t,n){if(null!=n){if("string"===typeof t)throw Error("Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,"."));if("number"===typeof t)kc(Tc(t),(function(){return"Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,".")}));else{if("object"!==typeof t)throw Error("Error in ".concat(e,": Unknown padding parameter: ").concat(t));t.forEach((function(t){t.forEach((function(t){kc(Tc(t),(function(){return"Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,".")}))}))}))}}}var Gg=Mp({reshape_:function(e,t){var n={x:Op(e,"x","reshape","string_or_numeric")},r={shape:t};return Ep.runKernel(vf,n,r)}});var Hg=Mp({avgPool_:function(e,t,n,r,a){var i=Op(e,"x","avgPool","float32");kc(Vg(n,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(1,"'")}));var o=i,s=!1;3===i.rank&&(s=!0,o=Gg(i,[1,i.shape[0],i.shape[1],i.shape[2]])),kc(4===o.rank,(function(){return"Error in avgPool: x must be rank 4 but got rank ".concat(o.rank,".")})),jg("avgPool",r,a);var u={x:o},c={filterSize:t,strides:n,pad:r,dimRoundingMode:a},l=Ep.runKernel(bl,u,c);return l=Qv(l,i.dtype),s?Gg(l,[l.shape[1],l.shape[2],l.shape[3]]):l}});var qg=Mp({avgPool3d_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC",o=Op(e,"x","avgPool3d","float32"),s=o,u=!1;4===o.rank&&(u=!0,s=Gg(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),kc(5===s.rank,(function(){return"Error in avgPool3d: x must be rank 5 but got rank ".concat(s.rank,".")})),kc("NDHWC"===i,(function(){return"Error in avgPool3d: Only NDHWC is currently supported, "+"but got dataFormat of ".concat(i)})),kc("number"===typeof n&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,(function(){return"Error in avgPool3d: Stride must be > 0, but got '".concat(n,"'")})),jg("avgPool3d",r,a);var c={x:s},l={filterSize:t,strides:n,pad:r,dimRoundingMode:a,dataFormat:i},d=Ep.runKernel(wl,c,l);return d=Qv(d,s.dtype),u?Gg(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}});var $g=Mp({concat_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;kc(e.length>=1,(function(){return"Pass at least one tensor to concat"}));var n=Lp(e,"tensors","concat","string_or_numeric");if("complex64"===n[0].dtype&&n.forEach((function(e){if("complex64"!==e.dtype)throw new Error("Cannot concatenate complex64 tensors with a tensor\n          with dtype ".concat(e.dtype,". "))})),1===n.length)return Jv(n[0]);var r=n,a={axis:t};return Ep.runKernel(Rl,r,a)}});var Kg=Mp({matMul_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=Op(e,"a","matMul"),i=Op(t,"b","matMul"),o=gp(a,i),s=(0,ge.Z)(o,2),u={a:a=s[0],b:i=s[1]},c={transposeA:n,transposeB:r};return Ep.runKernel(Il,u,c)}});var Xg=Mp({sigmoid_:function(e){var t={x:Op(e,"x","sigmoid","float32")};return Ep.runKernel(Df,t)}});var Yg=Mp({slice_:function(e,t,n){var r=Op(e,"x","slice","string_or_numeric");if(0===r.rank)throw new Error("Slicing scalar is not possible");var a={x:r},i={begin:t,size:n};return Ep.runKernel(Zf,a,i)}});var Qg=Mp({tanh_:function(e){var t={x:Op(e,"x","tanh","float32")};return Ep.runKernel(eh,t)}});var Jg=Mp({basicLSTMCell_:function(e,t,n,r,a,i){var o=Op(e,"forgetBias","basicLSTMCell"),s=Op(t,"lstmKernel","basicLSTMCell"),u=Op(n,"lstmBias","basicLSTMCell"),c=Op(r,"data","basicLSTMCell"),l=Op(a,"c","basicLSTMCell"),d=Op(i,"h","basicLSTMCell"),f=$g([c,d],1),h=Kg(f,s),p=sm(h,u),v=p.shape[0],m=p.shape[1]/4,g=[v,m],y=Yg(p,[0,0],g),b=Yg(p,[0,m],g),k=Yg(p,[0,2*m],g),w=Yg(p,[0,3*m],g),x=sm(lm(Xg(y),Qg(b)),lm(l,Xg(sm(o,k))));return[x,lm(Qg(x),Xg(w))]}});var ey=Mp({batchToSpaceND_:function(e,t,n){var r=Op(e,"x","batchToSpaceND"),a=t.reduce((function(e,t){return e*t}));kc(r.rank>=1+t.length,(function(){return"input rank is ".concat(r.rank," but should be > than blockShape.length ").concat(t.length)})),kc(n.length===t.length,(function(){return"crops.length is ".concat(n.length," but should be equal to blockShape.length  ").concat(t.length)})),kc(r.shape[0]%a===0,(function(){return"input tensor batch is ".concat(r.shape[0]," but is not divisible by the product of ")+"the elements of blockShape ".concat(t.join(" * ")," === ").concat(a)}));var i={x:r},o={blockShape:t,crops:n};return Ep.runKernel(Sl,i,o)}});var ty=Mp({batchNorm_:function(e,t,n,r,a,i){null==i&&(i=.001);var o,s,u=Op(e,"x","batchNorm"),c=Op(t,"mean","batchNorm"),l=Op(n,"variance","batchNorm");null!=a&&(o=Op(a,"scale","batchNorm")),null!=r&&(s=Op(r,"offset","batchNorm")),kc(c.rank===l.rank,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),kc(null==s||c.rank===s.rank,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),kc(null==o||c.rank===o.rank,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}));var d=function(e){return 0===e.rank||1===e.rank?Gg(e,[1,1,1,e.size]):2===e.rank?Gg(e,[1,1,e.shape[0],e.shape[1]]):3===e.rank?Gg(e,[1,e.shape[0],e.shape[1],e.shape[2]]):e}(u),f={x:d,scale:o,offset:s,mean:c,variance:l},h={varianceEpsilon:i},p=Ep.runKernel(hd,f,h);return Gg(p,u.shape)}});var ny=Mp({batchNorm2d_:function(e,t,n,r,a,i){var o,s,u=Op(e,"x","batchNorm"),c=Op(t,"mean","batchNorm"),l=Op(n,"variance","batchNorm");return null!=a&&(o=Op(a,"scale","batchNorm")),null!=r&&(s=Op(r,"offset","batchNorm")),kc(2===u.rank,(function(){return"Error in batchNorm2D: x must be rank 2 but got rank "+"".concat(u.rank,".")})),kc(2===c.rank||1===c.rank,(function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but "+"got rank ".concat(c.rank,".")})),kc(2===l.rank||1===l.rank,(function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 "+"but got rank ".concat(l.rank,".")})),null!=o&&kc(2===o.rank||1===o.rank,(function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 "+"but got rank ".concat(o.rank,".")})),null!=s&&kc(2===s.rank||1===s.rank,(function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 "+"but got rank ".concat(s.rank,".")})),ty(u,c,l,s,o,i)}});var ry=Mp({batchNorm3d_:function(e,t,n,r,a,i){var o,s,u=Op(e,"x","batchNorm"),c=Op(t,"mean","batchNorm"),l=Op(n,"variance","batchNorm");return null!=a&&(o=Op(a,"scale","batchNorm")),null!=r&&(s=Op(r,"offset","batchNorm")),kc(3===u.rank,(function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+"".concat(u.rank,".")})),kc(3===c.rank||1===c.rank,(function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but "+"got rank ".concat(c.rank,".")})),kc(3===l.rank||1===l.rank,(function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 "+"but got rank ".concat(l.rank,".")})),null!=o&&kc(3===o.rank||1===o.rank,(function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 "+"but got rank ".concat(o.rank,".")})),null!=s&&kc(3===s.rank||1===s.rank,(function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 "+"but got rank ".concat(s.rank,".")})),ty(u,c,l,s,o,i)}});var ay=Mp({batchNorm4d_:function(e,t,n,r,a,i){var o,s,u=Op(e,"x","batchNorm"),c=Op(t,"mean","batchNorm"),l=Op(n,"variance","batchNorm");return null!=a&&(o=Op(a,"scale","batchNorm")),null!=r&&(s=Op(r,"offset","batchNorm")),kc(4===u.rank,(function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+"".concat(u.rank,".")})),kc(4===c.rank||1===c.rank,(function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but "+"got rank ".concat(c.rank,".")})),kc(4===l.rank||1===l.rank,(function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 "+"but got rank ".concat(l.rank,".")})),null!=o&&kc(4===o.rank||1===o.rank,(function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 "+"but got rank ".concat(o.rank,".")})),null!=s&&kc(4===s.rank||1===s.rank,(function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 "+"but got rank ".concat(s.rank,".")})),ty(u,c,l,s,o,i)}});var iy=Mp({bincount_:function(e,t,n){var r=Op(e,"x","bincount"),a=Op(t,"weights","bincount");kc("int32"===r.dtype,(function(){return"Error in bincount: input "+"dtype must be int32, but got ".concat(r.dtype)})),kc(n>=0,(function(){return"size must be non-negative, but got ".concat(n,".")})),kc(a.size===r.size||0===a.size,(function(){return"Error in bincount: weights must have the same size as input or"+"0-length, but got input shape: ".concat(r.shape,", weights shape: ")+"".concat(a.shape,".")}));var i={x:r,weights:a},o={size:n};return Ep.runKernel(Tl,i,o)}});var oy=Mp({broadcastArgs_:function(e,t){var n=Op(e,"s0","broadcastArgs","int32"),r=Op(t,"s1","broadcastArgs","int32");if(1!==n.rank)throw new Error("broadcastArgs(): first input must be a vector (rank=1). "+"Has rank ".concat(n.rank));if(1!==r.rank)throw new Error("broadcastArgs(): second input must be a vector (rank=1). "+"Has rank ".concat(r.rank));var a={s0:n,s1:r};return Ep.runKernel(El,a)}});var sy=Mp({broadcastTo_:function(e,t){var n=Op(e,"broadcastTo","x"),r=n.shape;if(qc(t),t.length<n.rank)throw new Error("broadcastTo(): shape.length=".concat(t.length," < input.rank=").concat(n.rank,"."));if(t.length>n.rank){for(var a=n.shape.slice();a.length<t.length;)a.unshift(1);n=Gg(n,a)}for(var i=n.shape,o=Array.from(t),s=t.length-1;s>=0;s--)if(i[s]===t[s])o[s]=1;else if(1!==n.shape[s])throw new Error("broadcastTo(): [".concat(r,"] cannot be broadcast to [").concat(t,"]."));if(0===o.map((function(e,t){return e>1?t:-1})).filter((function(e){return e>=0})).length)return Jv(n);var u={x:n},c={reps:o};return Ep.runKernel(th,u,c)}});var uy=Mp({ceil_:function(e){var t={x:Op(e,"x","ceil","float32")};return Ep.runKernel(Cl,t)}});var cy=Mp({clipByValue_:function(e,t,n){var r=Op(e,"x","clipByValue");if(kc(t<=n,(function(){return"Error in clip: min (".concat(t,") must be ")+"less than or equal to max (".concat(n,").")})),t===n)return wm(r.shape,t,r.dtype);var a={x:r},i={clipValueMin:t,clipValueMax:n};return Ep.runKernel(Zl,a,i)}});var ly=Mp({concat1d_:function(e){return $g(e,0)}});var dy=Mp({concat2d_:function(e,t){return $g(e,t)}});var fy=Mp({concat3d_:function(e,t){return $g(e,t)}});var hy=Mp({concat4d_:function(e,t){return $g(e,t)}});var py=Mp({conv2d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],o=arguments.length>6?arguments[6]:void 0,s=Op(e,"x","conv2d","float32"),u=Op(t,"filter","conv2d","float32"),c=s,l=!1;3===s.rank&&(l=!0,c=Gg(s,[1,s.shape[0],s.shape[1],s.shape[2]])),kc(4===c.rank,(function(){return"Error in conv2d: input must be rank 4, but got rank ".concat(c.rank,".")})),kc(4===u.rank,(function(){return"Error in conv2d: filter must be rank 4, but got rank "+"".concat(u.rank,".")})),jg("conv2d",r,o);var d="NHWC"===a?c.shape[3]:c.shape[1];kc(d===u.shape[2],(function(){return"Error in conv2d: depth of input (".concat(d,") must match ")+"input depth for filter ".concat(u.shape[2],".")})),kc(Vg(n,i),(function(){return"Error in conv2D: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(i,"'")})),kc(Ug(i),(function(){return"Error in conv2D: Dilated rates should be larger than 0."})),kc(Ug(n),(function(){return"Error in conv2D: Strides should be larger than 0."}));var f={x:c,filter:u},h={strides:n,pad:r,dataFormat:a,dilations:i,dimRoundingMode:o},p=Ep.runKernel(Dl,f,h);return l?Gg(p,[p.shape[1],p.shape[2],p.shape[3]]):p}});var vy=Mp({conv1d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NWC",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,o=arguments.length>6?arguments[6]:void 0,s=Op(e,"x","conv1d"),u=Op(t,"filter","conv1d"),c=s,l=!1;2===s.rank&&(l=!0,c=Gg(s,[1,s.shape[0],s.shape[1]])),kc(3===c.rank,(function(){return"Error in conv1d: input must be rank 3, but got rank ".concat(c.rank,".")})),kc(3===u.rank,(function(){return"Error in conv1d: filter must be rank 3, but got rank "+"".concat(u.rank,".")})),jg("conv1d",r,o),kc(c.shape[2]===u.shape[1],(function(){return"Error in conv1d: depth of input (".concat(c.shape[2],") must match ")+"input depth for filter ".concat(u.shape[1],".")})),kc(Vg(n,i),(function(){return"Error in conv1D: Either stride or dilation must be 1. "+"Got stride ".concat(n," and dilation '").concat(i,"'")})),kc(Ug(i),(function(){return"Error in conv1D: Dilated rates should be larger than 0."})),kc(Ug(n),(function(){return"Error in conv1D: Stride should be larger than 0."})),kc("NWC"===a,(function(){return"Error in conv1d: got dataFormat of ".concat(a," but only NWC is currently supported.")}));var d=Gg(u,[1,u.shape[0],u.shape[1],u.shape[2]]),f=Gg(c,[c.shape[0],1,c.shape[1],c.shape[2]]),h=py(f,d,[1,n],r,"NHWC",[1,i],o);return Gg(h,l?[h.shape[2],h.shape[3]]:[h.shape[0],h.shape[2],h.shape[3]])}});var my=Mp({conv2DBackpropInput_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",o=arguments.length>6?arguments[6]:void 0;kc(e.length===t.rank,(function(){return"Length of inShape "+"(".concat(e.length,") and rank of dy (").concat(t.rank,") must match")}));var s=e,u=t,c=!1;3===t.rank&&(c=!0,u=Gg(t,[1,t.shape[0],t.shape[1],t.shape[2]]),s=[1,e[0],e[1],e[2]]),kc(4===s.length,(function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+"".concat(s.length,".")})),kc(4===u.rank,(function(){return"Error in conv2dDerInput: dy must be rank 4, but got "+"rank ".concat(u.rank)})),kc(4===n.rank,(function(){return"Error in conv2dDerInput: filter must be rank 4, but got "+"rank ".concat(n.rank)}));var l="NHWC"===i?s[3]:s[1],d="NHWC"===i?u.shape[3]:u.shape[1];kc(l===n.shape[2],(function(){return"Error in conv2dDerInput: depth of input (".concat(l,") must ")+"match input depth for filter ".concat(n.shape[2],".")})),kc(d===n.shape[3],(function(){return"Error in conv2dDerInput: depth of output (".concat(d,") must ")+"match output depth for filter ".concat(n.shape[3],".")})),jg("conv2dDerInput",a,o);var f={dy:u,filter:n},h={strides:r,pad:a,dataFormat:i,dimRoundingMode:o,inputShape:s},p=Ep.runKernel(Ll,f,h);return c?Gg(p,[p.shape[1],p.shape[2],p.shape[3]]):p}});var gy=Mp({conv2dTranspose_:function(e,t,n,r,a,i){var o=Op(e,"x","conv2dTranspose"),s=Op(t,"filter","conv2dTranspose");return my(n,o,s,r,a,"NHWC",i)}});var yy=Mp({conv3d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NDHWC",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1,1],o=Op(e,"x","conv3d"),s=Op(t,"filter","conv3d"),u=o,c=!1;4===o.rank&&(c=!0,u=Gg(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),kc(5===u.rank,(function(){return"Error in conv3d: input must be rank 5, but got rank ".concat(u.rank,".")})),kc(5===s.rank,(function(){return"Error in conv3d: filter must be rank 5, but got rank "+"".concat(s.rank,".")})),kc(u.shape[4]===s.shape[3],(function(){return"Error in conv3d: depth of input (".concat(u.shape[4],") must match ")+"input depth for filter ".concat(s.shape[3],".")})),kc(Vg(n,i),(function(){return"Error in conv3D: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(i,"'")})),kc("NDHWC"===a,(function(){return"Error in conv3d: got dataFormat of ".concat(a," but only NDHWC is currently supported.")})),kc(Ug(i),(function(){return"Error in conv3D: Dilated rates should be larger than 0."})),kc(Ug(n),(function(){return"Error in conv3D: Strides should be larger than 0."}));var l={x:u,filter:s},d={strides:n,pad:r,dataFormat:a,dilations:i},f=Ep.runKernel(Fl,l,d);return c?Gg(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}});var by=Mp({conv3DBackpropInput_:function(e,t,n,r,a){kc(e.length===t.rank,(function(){return"Length of inShape "+"(".concat(e.length,") and rank of dy (").concat(t.rank,") must match")}));var i=e,o=t,s=!1;4===t.rank&&(s=!0,o=Gg(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]),i=[1,e[0],e[1],e[2],e[3]]);var u=i[4],c=o.shape[4];kc(5===i.length,(function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+"".concat(i.length,".")})),kc(5===o.rank,(function(){return"Error in conv3dDerInput: dy must be rank 5, but got "+"rank ".concat(o.rank)})),kc(5===n.rank,(function(){return"Error in conv3dDerInput: filter must be rank 5, but got "+"rank ".concat(n.rank)})),kc(u===n.shape[3],(function(){return"Error in conv3dDerInput: depth of input (".concat(u,") must ")+"match input depth for filter ".concat(n.shape[3],".")})),kc(c===n.shape[4],(function(){return"Error in conv3dDerInput: depth of output (".concat(c,") must ")+"match output depth for filter ".concat(n.shape[4],".")}));var l={dy:o,filter:n},d={pad:a,strides:r,inputShape:i},f=Ep.runKernel(Pl,l,d);return s?Gg(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}});var ky=Mp({conv3dTranspose_:function(e,t,n,r,a){var i=Op(e,"x","conv3dTranspose"),o=Op(t,"filter","conv3dTranspose");return by(n,i,o,r,a)}});var wy=Mp({cos_:function(e){var t={x:Op(e,"x","cos","float32")};return Ep.runKernel(zl,t)}});var xy=Mp({cosh_:function(e){var t={x:Op(e,"x","cosh","float32")};return Ep.runKernel(Bl,t)}});var Iy=Mp({cumprod_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a={x:Op(e,"x","cumprod")},i={axis:t,exclusive:n,reverse:r};return Ep.runKernel(Vl,a,i)}});var Sy=Mp({cumsum_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a={x:Op(e,"x","cumsum")},i={axis:t,exclusive:n,reverse:r};return Ep.runKernel(Ul,a,i)}});var Ty=Mp({denseBincount_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=Op(e,"x","denseBincount"),i=Op(t,"weights","denseBincount");kc("int32"===a.dtype,(function(){return"Error in denseBincount: input "+"dtype must be int32, but got ".concat(a.dtype)})),kc(a.rank<=2,(function(){return"Error in denseBincount: input must be at most rank 2, but got "+"rank ".concat(a.rank,".")})),kc(n>=0,(function(){return"size must be non-negative, but got ".concat(n,".")})),kc(i.size===a.size||0===i.size,(function(){return"Error in denseBincount: weights must have the same shape as x or "+"0-length, but got x shape: ".concat(a.shape,", weights shape: ")+"".concat(i.shape,".")}));var o={x:a,weights:i},s={size:n,binaryOutput:r};return Ep.runKernel(jl,o,s)}});var Ey=Mp({depthToSpace_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"NHWC",r=Op(e,"x","depthToSpace","float32"),a="NHWC"===n?r.shape[1]:r.shape[2],i="NHWC"===n?r.shape[2]:r.shape[3],o="NHWC"===n?r.shape[3]:r.shape[1];kc(t>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: ".concat(t)})),kc(a*t>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n    ".concat(a," and ").concat(t,"  for depthToSpace with input shape\n    ").concat(r.shape)})),kc(i*t>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n    ".concat(i," and ").concat(t," for depthToSpace with input shape\n        ").concat(r.shape)})),kc(o%(t*t)===0,(function(){return"Dimension size must be evenly divisible by ".concat(t*t," but is ").concat(o," for depthToSpace with input shape ").concat(r.shape)}));var s={x:r},u={blockSize:t,dataFormat:n};return Ep.runKernel(Gl,s,u)}});var Ny=Mp({depthwiseConv2d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],o=arguments.length>6?arguments[6]:void 0,s=Op(e,"x","depthwiseConv2d","float32"),u=Op(t,"filter","depthwiseConv2d","float32"),c=s,l=!1;3===s.rank&&(l=!0,c=Gg(s,[1,s.shape[0],s.shape[1],s.shape[2]])),kc(4===c.rank,(function(){return"Error in depthwiseConv2d: input must be rank 4, but got "+"rank ".concat(c.rank,".")})),kc(4===u.rank,(function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+"".concat(u.rank,".")}));var d="NHWC"===a?c.shape[3]:c.shape[1];kc(d===u.shape[2],(function(){return"Error in depthwiseConv2d: number of input channels "+"(".concat(d,") must match the inChannels dimension in ")+"filter ".concat(u.shape[2],".")})),jg("depthwiseConv2d",r,o);var f={x:c,filter:u},h={strides:n,pad:r,dataFormat:a,dilations:i,dimRoundingMode:o},p=Ep.runKernel(Hl,f,h);return l?Gg(p,[p.shape[1],p.shape[2],p.shape[3]]):p}});var Cy=Mp({diag_:function(e){var t={x:Op(e,"x","diag")};return Ep.runKernel(Kl,t)}});var Zy=Mp({dilation2d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[1,1],i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",o=Op(e,"x","dilation2d"),s=Op(t,"filter","dilation2d");kc(3===o.rank||4===o.rank,(function(){return"Error in dilation2d: input must be rank 3 or 4, but got rank "+"".concat(o.rank,".")})),kc(3===s.rank,(function(){return"Error in dilation2d: filter must be rank 3, but got rank "+"".concat(s.rank,".")})),kc("NHWC"===i,(function(){return"Error in dilation2d: Only NHWC is currently supported, "+"but got dataFormat of ".concat(i)}));var u=o,c=!1;3===o.rank&&(u=Gg(o,[1,o.shape[0],o.shape[1],o.shape[2]]),c=!0),kc(u.shape[3]===s.shape[2],(function(){return"Error in dilation2d:  input and filter must have the same depth: ".concat(u.shape[3]," vs ").concat(s.shape[2])}));var l={x:u,filter:s},d={strides:n,pad:r,dilations:a},f=Ep.runKernel(Xl,l,d);return c?Gg(f,[f.shape[1],f.shape[2],f.shape[3]]):f}});var _y=Mp({equal_:function(e,t){var n=Op(e,"a","equal","string_or_numeric"),r=Op(t,"b","equal","string_or_numeric"),a=gp(n,r),i=(0,ge.Z)(a,2);n=i[0],r=i[1],Zm(n.shape,r.shape);var o={a:n,b:r};return Ep.runKernel(ad,o)}});var Ay=Mp({where_:function(e,t,n){var r=Op(t,"a","where"),a=Op(n,"b","where"),i=Op(e,"condition","where","bool"),o=Zm(Zm(i.shape,r.shape),a.shape),s={condition:sy(i,o),t:sy(r,o),e:sy(a,o)};return Ep.runKernel(Nf,s)}});var Ry=Mp({divNoNan_:function(e,t){var n=Op(e,"a","div"),r=Op(t,"b","div"),a=gp(n,r),i=(0,ge.Z)(a,2);n=i[0],r=i[1];var o=cm(n,r),s=hm(o),u=_y(r,s);return Ay(u,s,o)}});var Dy=Mp({dot_:function(e,t){var n=Op(e,"t1","dot"),r=Op(t,"t2","dot");kc((1===n.rank||2===n.rank)&&(1===r.rank||2===r.rank),(function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+"".concat(n.rank," and ").concat(r.rank,".")}));var a=1===n.rank?n.size:n.shape[1],i=1===r.rank?r.size:r.shape[0];if(kc(a===i,(function(){return"Error in dot: inner dimensions of inputs must match, but got "+"".concat(a," and ").concat(i,".")})),1===n.rank&&1===r.rank){var o=Gg(n,[1,-1]),s=Gg(r,[-1,1]),u=Kg(o,s);return Gg(u,[])}if(1===n.rank&&2===r.rank){var c=Gg(n,[1,-1]),l=Gg(r,[r.shape[0],r.shape[1]]),d=Kg(c,l);return Gg(d,[d.size])}if(2===n.rank&&1===r.rank){var f=Gg(r,[-1,1]),h=Kg(n,f);return Gg(h,[h.size])}var p=Gg(r,[r.shape[0],r.shape[1]]);return Kg(n,p)}});var Oy=Mp({einsum_:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=n.map((function(e,t){return Op(e,"tensors".concat(t),"einsum")})),i={equation:e};return Ep.runKernel(ed,a,i)}});var Ly=Mp({elu_:function(e){var t={x:Op(e,"x","elu","float32")};return Ep.runKernel(td,t)}});var Fy=Mp({erf_:function(e){var t=Op(e,"x","erf");kc("int32"===t.dtype||"float32"===t.dtype,(function(){return"Input dtype must be `int32` or `float32`."})),"int32"===t.dtype&&(t=Qv(t,"float32"));var n={x:t};return Ep.runKernel(rd,n)}});function My(e,t){for(var n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function Py(e,t){for(var n=[],r=e.length,a=0;a<r;a++)-1===t.indexOf(a)&&n.push(e[a]);var i=t.map((function(t){return e[t]}));return[n,i]}function zy(e,t){return function(e,t,n){for(var r=e.length+t.length,a=[],i=0,o=0,s=0;s<r;s++)-1===n.indexOf(s)?a.push(e[i++]):a.push(t[o++]);return a}(e,t.map((function(e){return 1})),t)}function By(e,t,n){kc(My(t,n),(function(){return"".concat(e," supports only inner-most axes for now. ")+"Got axes ".concat(t," and rank-").concat(n," input.")}))}function Vy(e,t){if(My(e,t))return null;for(var n=[],r=0;r<t;++r)-1===e.indexOf(r)&&n.push(r);return e.forEach((function(e){return n.push(e)})),n}function Uy(e){return e.map((function(e,t){return[t,e]})).sort((function(e,t){return e[1]-t[1]})).map((function(e){return e[0]}))}function Wy(e,t){for(var n=[],r=t-e;r<t;++r)n.push(r);return n}var jy=Mp({max_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r={x:Op(e,"x","max")},a={reductionIndices:t,keepDims:n};return Ep.runKernel(Ld,r,a)}});var Gy=Mp({min_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r={x:Op(e,"x","min")},a={axis:t,keepDims:n};return Ep.runKernel(Wd,r,a)}});var Hy=Mp({sum_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Op(e,"x","sum");"bool"===r.dtype&&(r=Qv(r,"int32"));var a={x:r},i={axis:t,keepDims:n};return Ep.runKernel(Ff,a,i)}});function qy(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(0===e.rank)return Em(e);if(1!==e.rank&&null===n)return qy(Gg(e,[-1]),t,n);if(1===e.rank||"number"===typeof n||Array.isArray(n)&&1===n.length){if(1===t)return Hy(Em(e),n);if(t===1/0)return jy(Em(e),n);if(t===-1/0)return Gy(Em(e),n);if("euclidean"===t||2===t)return dm(Hy(Im(Em(e),vm(2,"int32")),n));throw new Error("Error in norm: invalid ord value: ".concat(t))}if(Array.isArray(n)&&2===n.length){if(1===t)return jy(Hy(Em(e),n[0]),n[1]-1);if(t===1/0)return jy(Hy(Em(e),n[1]),n[0]);if(t===-1/0)return Gy(Hy(Em(e),n[1]),n[0]);if("fro"===t||"euclidean"===t)return dm(Hy(fm(e),n));throw new Error("Error in norm: invalid ord value: ".concat(t))}throw new Error("Error in norm: invalid axis: ".concat(n))}var $y=Mp({norm_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"euclidean",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=qy(e=Op(e,"x","norm"),t,n),i=a.shape;if(r){var o=_c(n,e.shape);i=zy(a.shape,o)}return Gg(a,i)}});var Ky=Mp({euclideanNorm_:function(e){return $y(e,"euclidean",arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]&&arguments[2])}});var Xy=Mp({exp_:function(e){var t={x:Op(e,"x","exp")};return Ep.runKernel(id,t)}});var Yy=Mp({expandDims_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Op(e,"x","expandDims","string_or_numeric");kc(t<=n.rank,(function(){return"Axis must be <= rank of the tensor"}));var r={input:n},a={dim:t};return Ep.runKernel(od,r,a)}});var Qy=Mp({expm1_:function(e){var t={x:Op(e,"x","expm1")};return Ep.runKernel(sd,t)}});var Jy=Mp({tile_:function(e,t){var n=Op(e,"x","tile","string_or_numeric");kc(n.rank===t.length,(function(){return"Error in transpose: rank of input ".concat(n.rank," ")+"must match length of reps ".concat(t,".")}));var r={x:n},a={reps:t};return Ep.runKernel(th,r,a)}});var eb=Mp({eye_:function(e,t,n){null==t&&(t=e);for(var r=Yv([e,t],arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32"),a=e<=t?e:t,i=0;i<a;++i)r.set(1,i,i);var o=Gg(r.toTensor(),[e,t]);if(null==n)return o;if(1===n.length)return Jy(Yy(o,0),[n[0],1,1]);if(2===n.length)return Jy(Yy(Yy(o,0),0),[n[0],n[1],1,1]);if(3===n.length)return Jy(Yy(Yy(Yy(o,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D "+"batchShapes, but received ".concat(n.length,"D."))}});var tb=Mp({floor_:function(e){var t={x:Op(e,"x","floor","float32")};return Ep.runKernel(dd,t)}});var nb=Mp({gather_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a={x:Op(e,"x","gather"),indices:Op(t,"indices","gather","int32")},i={axis:n,batchDims:r};return Ep.runKernel(pd,a,i)}});var rb=Mp({greater_:function(e,t){var n=Op(e,"a","greater","string_or_numeric"),r=Op(t,"b","greater","string_or_numeric"),a=gp(n,r),i=(0,ge.Z)(a,2);n=i[0],r=i[1],Zm(n.shape,r.shape);var o={a:n,b:r};return Ep.runKernel(md,o)}});var ab=Mp({greaterEqual_:function(e,t){var n=Op(e,"a","greaterEqual","string_or_numeric"),r=Op(t,"b","greaterEqual","string_or_numeric"),a=gp(n,r),i=(0,ge.Z)(a,2);n=i[0],r=i[1],Zm(n.shape,r.shape);var o={a:n,b:r};return Ep.runKernel(gd,o)}});var ib=Mp({imag_:function(e){var t={input:Op(e,"input","imag")};return Ep.runKernel(kd,t)}});var ob=Mp({isFinite_:function(e){var t={x:Op(e,"x","isFinite")};return Ep.runKernel(wd,t)}});var sb=Mp({isInf_:function(e){var t={x:Op(e,"x","isInf")};return Ep.runKernel(xd,t)}});var ub=Mp({isNaN_:function(e){var t={x:Op(e,"x","isNaN")};return Ep.runKernel(Id,t)}});var cb=Mp({leakyRelu_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2,n={x:Op(e,"x","leakyRelu")},r={alpha:t};return Ep.runKernel(Sd,n,r)}});var lb=Mp({less_:function(e,t){var n=Op(e,"a","less","string_or_numeric"),r=Op(t,"b","less","string_or_numeric"),a=gp(n,r),i=(0,ge.Z)(a,2);n=i[0],r=i[1],Zm(n.shape,r.shape);var o={a:n,b:r};return Ep.runKernel(Td,o)}});var db=Mp({lessEqual_:function(e,t){var n=Op(e,"a","lessEqual","string_or_numeric"),r=Op(t,"b","lessEqual","string_or_numeric"),a=gp(n,r),i=(0,ge.Z)(a,2);n=i[0],r=i[1],Zm(n.shape,r.shape);var o={a:n,b:r};return Ep.runKernel(Ed,o)}});function fb(e,t,n){if(n<=0)throw new Error("The number of values should be positive.");var r={start:e,stop:t,num:n};return Ep.runKernel(Nd,{},r)}var hb=Mp({localResponseNormalization_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5,i=Op(e,"x","localResponseNormalization");kc(4===i.rank||3===i.rank,(function(){return"Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank ".concat(i.rank,".")})),kc(Tc(t),(function(){return"Error in localResponseNormalization: depthRadius must be an "+"integer but got depthRadius ".concat(t,".")}));var o=i,s=!1;3===i.rank&&(s=!0,o=Gg(i,[1,i.shape[0],i.shape[1],i.shape[2]]));var u={x:o},c={depthRadius:t,bias:n,alpha:r,beta:a},l=Ep.runKernel(Dd,u,c);return s?Gg(l,[l.shape[1],l.shape[2],l.shape[3]]):l}});var pb=Mp({log_:function(e){var t={x:Op(e,"x","log","float32")};return Ep.runKernel(Cd,t)}});var vb=Mp({log1p_:function(e){var t={x:Op(e,"x","log1p")};return Ep.runKernel(Zd,t)}});var mb=Mp({neg_:function(e){var t={x:Op(e,"x","neg")};return Ep.runKernel(Kd,t)}});var gb=Mp({softplus_:function(e){var t={x:Op(e,"x","softplus")};return Ep.runKernel(Of,t)}});var yb=Mp({logSigmoid_:function(e){var t=Op(e,"x","logSigmoid"),n=pm((function(e){return{value:mb(gb(mb(e))),gradFunc:function(t){return lm(t,Xg(mb(e)))}}}));return n(t)}});var bb=Mp({logSoftmax_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=Op(e,"logits","logSoftmax");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(n.rank," and axis was ").concat(t));var r=pm((function(e,n){var r=jy(e,t,!0),a=Sm(e,r),i=Sm(Qv(a,"float32"),pb(Hy(Xy(a),t,!0)));n([i]);return{value:i,gradFunc:function(e,n){var r=(0,ge.Z)(n,1)[0],a=Xy(r);return Sm(e,lm(Hy(e,t,!0),a))}}}));return r(n)}});var kb=Mp({logSumExp_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Op(e,"x","logSumExp"),a=_c(t,r.shape),i=jy(r,a,!0),o=Sm(r,i),s=Xy(o),u=Hy(s,a),c=pb(u),l=sm(Gg(i,c.shape),c);if(n){var d=zy(l.shape,a);return Gg(l,d)}return l}});var wb=Mp({logicalAnd_:function(e,t){var n=Op(e,"a","logicalAnd","bool"),r=Op(t,"b","logicalAnd","bool");Zm(n.shape,r.shape);var a={a:n,b:r};return Ep.runKernel(_d,a)}});var xb=Mp({logicalNot_:function(e){var t={x:Op(e,"x","logicalNot","bool")};return Ep.runKernel(Ad,t)}});var Ib=Mp({logicalOr_:function(e,t){var n=Op(e,"a","logicalOr","bool"),r=Op(t,"b","logicalOr","bool");Zm(n.shape,r.shape);var a={a:n,b:r};return Ep.runKernel(Rd,a)}});var Sb=Mp({logicalXor_:function(e,t){var n=Op(e,"a","logicalXor","bool"),r=Op(t,"b","logicalXor","bool");return Zm(n.shape,r.shape),wb(Ib(e,t),xb(wb(e,t)))}}),Tb=2147483648;var Eb=Mp({searchSorted_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"left",r=Op(e,"sortedSequence","searchSorted"),a=Op(t,"values","searchSorted"),i=r.shape[r.shape.length-1],o=a.shape[a.shape.length-1],s=Gg(r,[-1,i]),u=Gg(a,[-1,o]);if(s.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(s.shape[0]!==u.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(Ic(u.shape)>=Tb)throw new Error("values tensor size must less than ".concat(Tb));if(s.shape[1]>=Tb)throw new Error("trailing dim_size must less than ".concat(Tb," for int32 output type, was ").concat(s.shape[1]));var c={sortedSequence:s,values:u},l={side:n};return Ep.runKernel(Ef,c,l)}});function Nb(e,t){return Eb(e,t,"left")}var Cb=Mp({maxPool_:function(e,t,n,r,a){var i=Op(e,"x","maxPool"),o=i,s=!1;3===i.rank&&(s=!0,o=Gg(i,[1,i.shape[0],i.shape[1],i.shape[2]])),kc(4===o.rank,(function(){return"Error in maxPool: input must be rank 4 but got rank ".concat(o.rank,".")})),kc(Vg(n,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(1,"'")})),jg("maxPool",r,a);var u={x:o},c={filterSize:t,strides:n,pad:r,dimRoundingMode:a},l=Ep.runKernel(Md,u,c);return s?Gg(l,[l.shape[1],l.shape[2],l.shape[3]]):l}});var Zb=Mp({maxPool3d_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[1,1,1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC",o=Op(e,"x","maxPool3d"),s=o,u=!1;4===o.rank&&(u=!0,s=Gg(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),kc(5===s.rank,(function(){return"Error in maxPool3d: x must be rank 5 but got rank ".concat(s.rank,".")})),kc("NDHWC"===i,(function(){return"Error in maxPool3d: Only NDHWC is currently supported, "+"but got dataFormat of ".concat(i)})),jg("maxPool3d",r,a);var c={x:s},l={filterSize:t,strides:n,pad:r,dimRoundingMode:a,dataFormat:i},d=Ep.runKernel(zd,c,l);return u?Gg(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}});var _b=Mp({maxPoolWithArgmax_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i={x:Op(e,"x","maxPoolWithArgmax")},o={filterSize:t,strides:n,pad:r,includeBatchInIndex:a},s=Ep.runKernel(Vd,i,o);return{result:s[0],indexes:s[1]}}});var Ab=Mp({mean_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r={x:Op(e,"x","mean")},a={axis:t,keepDims:n};return Ep.runKernel(Ud,r,a)}});function Rb(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if(qc(e),"complex64"===t){var n=Rb(e,"float32"),r=Rb(e,"float32");return Pp(n,r)}var a=Gc(Ic(e),t);return Ep.makeTensor(a,e,t)}function Db(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if(qc(e),"complex64"===t){var n=Db(e,"float32"),r=Rb(e,"float32");return Pp(n,r)}var a=jc(Ic(e),t);return Ep.makeTensor(a,e,t)}function Ob(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).indexing,r=void 0===n?"xy":n;if("xy"!==r&&"ij"!==r)throw new TypeError("".concat(r," is not a valid third argument to meshgrid"));if(void 0===e)return[];var a=Op(e,"x","meshgrid",e instanceof ap?e.dtype:"float32");if(void 0===t)return[a];var i=Op(t,"y","meshgrid",t instanceof ap?t.dtype:"float32"),o=Ic(a.shape),s=Ic(i.shape);return"xy"===r?(a=Gg(a,[1,-1]),i=Gg(i,[-1,1]),[Kg(Db([s,1],a.dtype),a),Kg(i,Db([1,o],i.dtype))]):(a=Gg(a,[-1,1]),i=Gg(i,[1,-1]),[Kg(a,Db([1,s],a.dtype)),Kg(Db([o,1],i.dtype),i)])}var Lb=Mp({minimum_:function(e,t){var n=Op(e,"a","minimum"),r=Op(t,"b","minimum"),a=gp(n,r),i=(0,ge.Z)(a,2);n=i[0],r=i[1],"bool"===n.dtype&&(n=Qv(n,"int32"),r=Qv(r,"int32")),Zm(n.shape,r.shape);var o={a:n,b:r};return Ep.runKernel(jd,o)}});var Fb=Mp({mirrorPad_:function(e,t,n){kc("reflect"===n||"symmetric"===n,(function(){return"Invalid mode. Mode must be either reflect or symmetric. "+"Got ".concat(n,".")}));var r=Op(e,"x","mirrorPad");if(0===r.rank)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");kc(t.length===r.rank,(function(){return"Padding doesn't match input. Must be ".concat(r.rank,". ")+"Got ".concat(t.length,".")}));for(var a="reflect"===n?1:0,i=function(e){kc(2===t[e].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),kc(t[e][0]>=0&&t[e][0]<=r.shape[e]-a&&t[e][1]>=0&&t[e][1]<=r.shape[e]-a,(function(){return"Padding in dimension ".concat(e," cannot be greater than or equal ")+"to ".concat(r.shape[e]-a," or less than 0 for input of ")+"shape ".concat(r.shape)}))},o=0;o<r.rank;o++)i(o);var s={paddings:t,mode:n},u={x:r};return Ep.runKernel(Gd,u,s)}});var Mb=Mp({mod_:function(e,t){var n=Op(e,"a","mod"),r=Op(t,"b","mod"),a=gp(n,r),i=(0,ge.Z)(a,2),o={a:n=i[0],b:r=i[1]};return Ep.runKernel(Hd,o)}});var Pb=Mp({moments_:function(e){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=_c(arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,(e=Op(e,"x","moments")).shape),r=Ab(e,n,t),a=r.shape;t||(a=zy(r.shape,n));var i=fm(Sm(Qv(e,"float32"),Gg(r,a)));return{mean:r,variance:Ab(i,n,t)}}});var zb=Mp({multiRNNCell_:function(e,t,n,r){for(var a=Op(t,"data","multiRNNCell"),i=Lp(n,"c","multiRNNCell"),o=Lp(r,"h","multiRNNCell"),s=a,u=[],c=0;c<e.length;c++){var l=e[c](s,i[c],o[c]);u.push(l[0]),u.push(l[1]),s=l[1]}for(var d=[],f=[],h=0;h<u.length;h+=2)d.push(u[h]),f.push(u[h+1]);return[d,f]}});var Bb=Mp({multinomial_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=Op(e,"logits","multinomial"),i=a.size,o=a.rank;if(i<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+"".concat(i,"."));if(o>2)throw new Error("Rank of probabilities must be 1 or 2, but is ".concat(o));n=n||Math.random();var s={logits:1===o?Gg(a,[1,-1]):a},u={numSamples:t,seed:n,normalized:r},c=Ep.runKernel(qd,s,u);return 1===o?Gg(c,[c.size]):c}});var Vb=Mp({notEqual_:function(e,t){var n=Op(e,"a","notEqual","string_or_numeric"),r=Op(t,"b","notEqual","string_or_numeric"),a=gp(n,r),i=(0,ge.Z)(a,2);n=i[0],r=i[1],Zm(n.shape,r.shape);var o={a:n,b:r};return Ep.runKernel(Xd,o)}});var Ub=Mp({oneHot_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"int32";if(t<2)throw new Error("Error in oneHot: depth must be >=2, but it is ".concat(t));var i={indices:Op(e,"indices","oneHot","int32")},o={dtype:a,depth:t,onValue:n,offValue:r};return Ep.runKernel(tf,i,o)}});var Wb=Mp({onesLike_:function(e){var t={x:Op(e,"x","onesLike")};return Ep.runKernel(ef,t)}});var jb=Mp({outerProduct_:function(e,t){var n=Op(e,"v1","outerProduct"),r=Op(t,"v2","outerProduct");kc(1===n.rank&&1===r.rank,(function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+"".concat(n.rank," and ").concat(r.rank,".")}));var a=Gg(n,[-1,1]),i=Gg(r,[1,-1]);return Kg(a,i)}});var Gb=Mp({pad_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=Op(e,"x","pad");if(0===r.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var a={paddings:t,constantValue:n},i={x:r};return Ep.runKernel(rf,i,a)}});var Hb=Mp({pad1d_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return kc(2===t.length,(function(){return"Invalid number of paddings. Must be length of 2."})),Gb(e,[t],n)}});var qb=Mp({pad2d_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return kc(2===t.length&&2===t[0].length&&2===t[1].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),Gb(e,t,n)}});var $b=Mp({pad3d_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return kc(3===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),Gb(e,t,n)}});var Kb=Mp({pad4d_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return kc(4===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length&&2===t[3].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),Gb(e,t,n)}});var Xb=Mp({spaceToBatchND_:function(e,t,n){var r=Op(e,"x","spaceToBatchND");kc(r.rank>=1+t.length,(function(){return"input rank ".concat(r.rank," should be > than [blockShape] ").concat(t.length)})),kc(n.length===t.length,(function(){return"paddings.shape[0] ".concat(n.length," must be equal to [blockShape] ").concat(t.length)})),kc(r.shape.reduce((function(e,r,a){return a>0&&a<=t.length?e&&(r+n[a-1][0]+n[a-1][1])%t[a-1]===0:e}),!0),(function(){return"input spatial dimensions ".concat(r.shape.slice(1)," with paddings ").concat(n.toString()," must be divisible by blockShapes ").concat(t.toString())}));var a={x:r},i={blockShape:t,paddings:n};return Ep.runKernel(Mf,a,i)}});var Yb=Mp({pool_:function(e,t,n,r,a,i,o){null==a&&(a=[1,1]),null==i&&(i=1),0===r&&(r="valid");var s=Op(e,"x","maxPool"),u=s,c=!1;3===s.rank&&(c=!0,u=Gg(s,[1,s.shape[0],s.shape[1],s.shape[2]])),kc(Vg(i,a),(function(){return"Error in pool: Either strides or dilations must be 1. "+"Got strides ".concat(i," and dilations '").concat(a,"'")}));var l,d=Ag(u.shape,t,i,a,r),f=[d.dilationHeight,d.dilationWidth];l="same"===r?function(e,t){var n=e.map((function(e,n){return e+(e-1)*(t[n]-1)})),r=n.map((function(e){return e-1})),a=r.map((function(e){return Math.floor(e/2)})),i=r.map((function(e,t){return e-a[t]}));return r.map((function(e,t){return[a[t],i[t]]}))}([d.filterHeight,d.filterWidth],f):[[0,0],[0,0]];var h=1===f[0]&&1===f[1],p=function(e,t,n){var r=n.map((function(e){return e[0]})),a=n.map((function(e){return e[1]})),i=e.concat(r,a),o=t.map((function(e,t){return(e-i[t]%e)%e})),s=a.map((function(e,t){return e+o[t]})),u=t.map((function(e,t){return[r[t],s[t]]})),c=t.map((function(e,t){return[0,o[t]]}));return[u,c]}([d.inHeight,d.inWidth],f,l),v=(0,ge.Z)(p,2),m=v[0],g=v[1],y=h?r:"valid",b=h?u:Xb(u,f,m),k=("avg"===n?function(){return Hg(b,t,i,y,o)}:function(){return Cb(b,t,i,y,o)})(),w=h?k:ey(k,f,g);return c?Gg(w,[w.shape[1],w.shape[2],w.shape[3]]):w}});var Qb=Mp({prelu_:function(e,t){var n={x:Op(e,"x","prelu"),alpha:Op(t,"alpha","prelu")};return Ep.runKernel(of,n)}});var Jb=Mp({prod_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Op(e,"x","prod");"bool"===r.dtype&&(r=Qv(r,"int32"));var a={x:r},i={axis:t,keepDims:n};return Ep.runKernel(sf,a,i)}});var ek=Mp({raggedGather_:function(e,t,n,r){var a=e.map((function(e,t){return Op(e,"tensors".concat(t),"raggedGather","int32")})),i={paramsNestedSplits:a,paramsDenseValues:Op(t,"paramsDenseValues","raggedGather"),indices:Op(n,"indices","raggedGather","int32")},o={outputRaggedRank:r},s=Ep.runKernel(uf,i,o);return{outputNestedSplits:s.slice(0,s.length-1),outputDenseValues:s[s.length-1]}}});var tk=Mp({raggedRange_:function(e,t,n){var r=Op(e,"starts","raggedRange"),a={starts:r,limits:Op(t,"limits","raggedRange",r.dtype),deltas:Op(n,"deltas","raggedRange",r.dtype)},i=Ep.runKernel(cf,a);return{rtNestedSplits:i[0],rtDenseValues:i[1]}}});var nk=Mp({raggedTensorToTensor_:function(e,t,n,r,a){var i=Op(e,"shape","raggedTensorToTensor","int32"),o=Op(t,"values","raggedTensorToTensor"),s=Op(n,"defaultValue","raggedTensorToTensor",o.dtype),u=r.map((function(e,t){return Op(e,"tensors".concat(t),"raggedTensorToTensor","int32")})),c={shape:i,values:o,defaultValue:s,rowPartitionTensors:u},l={rowPartitionTypes:a};return Ep.runKernel(lf,c,l)}});var rk=Mp({rand_:function(e,t,n){qc(e);var r=Ic(e),a=null;if(null==n||"float32"===n)a=new Float32Array(r);else if("int32"===n)a=new Int32Array(r);else{if("bool"!==n)throw new Error("Unknown data type ".concat(n));a=new Uint8Array(r)}for(var i=0;i<r;i++)a[i]=t();return Ep.makeTensor(a,e,n)}}),ak=n(6699),ik=function(){function e(t,n,r,a,i){(0,Se.Z)(this,e),this.mean=t,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=a,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var o=i||Math.random();this.random=ak.alea(o.toString())}return(0,Te.Z)(e,[{key:"nextValue",value:function(){if(!isNaN(this.nextVal)){var e=this.nextVal;return this.nextVal=NaN,e}for(var t,n,r=!1;!r;){var a=void 0,i=void 0,o=void 0;do{o=(a=2*this.random()-1)*a+(i=2*this.random()-1)*i}while(o>=1||0===o);var s=Math.sqrt(-2*Math.log(o)/o);t=this.mean+this.stdDev*a*s,n=this.mean+this.stdDev*i*s,this.truncated&&!this.isValidTruncated(t)||(r=!0)}return this.truncated&&!this.isValidTruncated(n)||(this.nextVal=this.convertValue(n)),this.convertValue(t)}},{key:"convertValue",value:function(e){return null==this.dtype||"float32"===this.dtype?e:Math.round(e)}},{key:"isValidTruncated",value:function(e){return e<=this.upper&&e>=this.lower}}]),e}(),ok=function(){function e(t,n,r,a){(0,Se.Z)(this,e),this.alpha=t,this.beta=1/n,this.dtype=r;var i=a||Math.random();this.randu=ak.alea(i.toString()),this.randn=new ik(0,1,r,!1,this.randu()),this.d=t<1?t+2/3:t-1/3,this.c=1/Math.sqrt(9*this.d)}return(0,Te.Z)(e,[{key:"nextValue",value:function(){for(var e,t,n,r,a,i;;){do{r=this.randn.nextValue(),i=1+this.c*r}while(i<=0);if(i*=i*i,t=1-.331*(e=r*r)*e,n=.5*e+this.d*(1-i+Math.log(i)),(a=this.randu())<t||Math.log(a)<n)break}return i=1/this.beta*this.d*i,this.alpha<1&&(i*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(i)}},{key:"convertValue",value:function(e){return"float32"===this.dtype?e:Math.round(e)}}]),e}(),sk=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;if((0,Se.Z)(this,e),this.canReturnFloat=function(){return null==t.dtype||"float32"===t.dtype},this.min=n,this.range=r-n,this.dtype=a,null==i&&(i=Math.random()),"number"===typeof i&&(i=i.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between ".concat(n," - ").concat(r," <= 1 and dtype is not float"));this.random=ak.alea(i)}return(0,Te.Z)(e,[{key:"convertValue",value:function(e){return this.canReturnFloat()?e:Math.round(e)}},{key:"nextValue",value:function(){return this.convertValue(this.min+this.range*this.random())}}]),e}();var uk=Mp({randomGamma_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32",a=arguments.length>4?arguments[4]:void 0;if(qc(e),null==n&&(n=1),null==r&&(r="float32"),"float32"!==r&&"int32"!==r)throw new Error("Unsupported data type ".concat(r));for(var i=new ok(t,n,r,a),o=Yv(e,r),s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}});var ck=Mp({randomNormal_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;if(qc(e),null!=r&&"bool"===r)throw new Error("Unsupported data type ".concat(r));for(var i=new ik(t,n,r,!1,a),o=Yv(e,r),s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}});var lk=Mp({randomStandardNormal_:function(e,t,n){if(null!=t&&"bool"===t)throw new Error("Unsupported data type ".concat(t));return ck(e,0,1,t,n)}});var dk=Mp({randomUniform_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32",a=arguments.length>4?arguments[4]:void 0;qc(e);for(var i=Yv(e,r),o=new sk(t,n,null,a),s=0;s<i.values.length;s++)i.values[s]=o.nextValue();return i.toTensor()}});function fk(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32";if(0===n)throw new Error("Cannot have a step of zero");var a={start:e,stop:t,step:n,dtype:r};return Ep.runKernel(df,{},a)}var hk=Mp({real_:function(e){var t={input:Op(e,"input","real")};return Ep.runKernel(ff,t)}});var pk=Mp({reciprocal_:function(e){var t={x:Op(e,"x","reciprocal")};return Ep.runKernel(hf,t)}});var vk=Mp({relu_:function(e){var t={x:Op(e,"x","relu")};return Ep.runKernel(pf,t)}});var mk=Mp({relu6_:function(e){var t={x:Op(e,"x","relu6")};return Ep.runKernel(kf,t)}});var gk=Mp({reverse_:function(e,t){var n={x:Op(e,"x","reverse")},r={dims:t};return Ep.runKernel(wf,n,r)}});var yk=Mp({reverse1d_:function(e){var t=Op(e,"x","reverse");return kc(1===t.rank,(function(){return"Error in reverse1D: x must be rank 1 but got rank ".concat(t.rank,".")})),gk(t,0)}});var bk=Mp({reverse2d_:function(e,t){var n=Op(e,"x","reverse");return kc(2===n.rank,(function(){return"Error in reverse2D: x must be rank 2 but got rank ".concat(n.rank,".")})),gk(n,t)}});var kk=Mp({reverse3d_:function(e,t){var n=Op(e,"x","reverse");return kc(3===n.rank,(function(){return"Error in reverse3D: x must be rank 3 but got rank ".concat(n.rank,".")})),gk(n,t)}});var wk=Mp({reverse4d_:function(e,t){var n=Op(e,"x","reverse");return kc(4===n.rank,(function(){return"Error in reverse4D: x must be rank 4 but got rank ".concat(n.rank,".")})),gk(n,t)}});var xk=Mp({round_:function(e){var t={x:Op(e,"x","round")};return Ep.runKernel(xf,t)}});var Ik=Mp({rsqrt_:function(e){var t={x:Op(e,"x","rsqrt","float32")};return Ep.runKernel(If,t)}});var Sk=Mp({selu_:function(e){var t={x:Op(e,"x","selu")};return Ep.runKernel(Cf,t)}});var Tk=Mp({separableConv2d_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NHWC",s=Op(e,"x","separableConv2d"),u=Op(t,"depthwiseFilter","separableConv2d"),c=Op(n,"pointwiseFilter","separableConv2d"),l=s,d=!1;if(3===s.rank&&(d=!0,l=Gg(s,[1,s.shape[0],s.shape[1],s.shape[2]])),"NCHW"===o)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");kc(4===l.rank,(function(){return"Error in separableConv2d: input must be rank 4, but got "+"rank ".concat(l.rank,".")})),kc(4===u.rank,(function(){return"Error in separableConv2d: depthwise filter must be rank 4, but "+"got rank ".concat(u.rank,".")})),kc(4===c.rank,(function(){return"Error in separableConv2d: pointwise filter must be rank 4, but "+"got rank ".concat(u.rank,".")})),kc(1===c.shape[0],(function(){return"Error in separableConv2d: the first dimension of pointwise filter "+" must be 1, but got ".concat(c.shape[0],".")})),kc(1===c.shape[1],(function(){return"Error in separableConv2d: the second dimension of pointwise "+"filter must be 1, but got ".concat(c.shape[1],".")}));var f=u.shape[2],h=u.shape[3];kc(c.shape[2]===f*h,(function(){return"Error in separableConv2d: the third dimension of pointwise filter "+"must be ".concat(f*h,", ")+"but got ".concat(c.shape[2],".")}));var p=Ny(l,u,r,a,o,i),v=py(p,c,1,"valid",o);return d?Gg(v,[v.shape[1],v.shape[2],v.shape[3]]):v}});function Ek(){return Ek=(0,ke.Z)((0,be.Z)().mark((function e(t,n){var r,a,i,o,s,u,c,l,d,f,h;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Op(t,"x","setdiff1d"),a=Op(n,"y","setdiff1d"),kc(r.dtype===a.dtype,(function(){return"x and y should have the same dtype, but got x (".concat(r.dtype,") and y (").concat(a.dtype,").")})),kc(1===r.rank,(function(){return"x should be 1D tensor, but got x (".concat(r.shape,").")})),kc(1===a.rank,(function(){return"y should be 1D tensor, but got y (".concat(a.shape,").")})),e.next=7,r.data();case 7:return i=e.sent,e.next=10,a.data();case 10:for(o=e.sent,s=new Set(o),u=0,c=0;c<i.length;c++)s.has(i[c])||u++;for(l=new tp([u],r.dtype),d=new tp([u],"int32"),f=0,h=0;f<i.length;f++)s.has(i[f])||(l.values[h]=i[f],d.values[h]=f,h++);return e.abrupt("return",[l.toTensor(),d.toTensor()]);case 18:case"end":return e.stop()}}),e)}))),Ek.apply(this,arguments)}var Nk=function(e,t){return Ek.apply(this,arguments)};var Ck=Mp({sign_:function(e){var t={x:Op(e,"x","sign")};return Ep.runKernel(Rf,t)}});var Zk=Mp({sin_:function(e){var t={x:Op(e,"x","sin","float32")};return Ep.runKernel(_f,t)}});var _k=Mp({sinh_:function(e){var t={x:Op(e,"x","sinh")};return Ep.runKernel(Af,t)}});var Ak=Mp({slice1d_:function(e,t,n){var r=Op(e,"x","slice1d");return kc(1===r.rank,(function(){return"slice1d expects a rank-1 tensor, but got a rank-".concat(r.rank," tensor")})),Yg(r,[t],[n])}});var Rk=Mp({slice2d_:function(e,t,n){var r=Op(e,"x","slice2d");return kc(2===r.rank,(function(){return"slice2d expects a rank-2 tensor, but got a rank-".concat(r.rank," tensor")})),Yg(r,t,n)}});var Dk=Mp({slice3d_:function(e,t,n){var r=Op(e,"x","slice3d");return kc(3===r.rank,(function(){return"slice3d expects a rank-3 tensor, but got a rank-".concat(r.rank," tensor")})),Yg(r,t,n)}});var Ok=Mp({slice4d_:function(e,t,n){var r=Op(e,"x","slice4d");return kc(4===r.rank,(function(){return"slice4d expects a rank-4 tensor, but got a rank-".concat(r.rank," tensor")})),Yg(r,t,n)}});var Lk=Mp({softmax_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=Op(e,"logits","softmax","float32");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(n.rank," and dim was ").concat(t));var r={logits:n},a={dim:t};return Ep.runKernel(zf,r,a)}});var Fk=Mp({fft_:function(e){kc("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.fft() must be complex64 "+"but got ".concat(e.dtype,".")}));var t={input:e};return Ep.runKernel(ud,t)}});var Mk=Mp({ifft_:function(e){kc("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.ifft() must be complex64 "+"but got ".concat(e.dtype,".")}));var t={input:e};return Ep.runKernel(bd,t)}});var Pk=Mp({irfft_:function(e){var t,n=e.shape[e.shape.length-1],r=e.size/n;if(n<=2){var a=Gg(e,[r,n]);t=Mk(a)}else{var i=[r,2*(n-1)],o=Gg(hk(e),[r,n]),s=Gg(ib(e),[r,n]),u=gk(Yg(o,[0,1],[r,n-2]),1),c=lm(gk(Yg(s,[0,1],[r,n-2]),1),vm(-1)),l=$g([o,u],1),d=$g([s,c],1),f=Gg(Pp(l,d),[i[0],i[1]]);t=Mk(f)}if(t=hk(t),3===e.rank&&0!==e.shape[0]){var h=t,p=e.shape[0];t=Gg(t,[p,t.shape[0]/p,t.shape[1]]),h.dispose()}return t}});var zk=Mp({split_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r={x:Op(e,"x","split")},a={numOrSizeSplits:t,axis:n};return Ep.runKernel(Pf,r,a)}});var Bk=Mp({rfft_:function(e,t){kc("float32"===e.dtype,(function(){return"The dtype for rfft() must be real value but got ".concat(e.dtype)}));var n,r=e.shape[e.shape.length-1],a=e.size/r;if(null!=t&&t<r){var i=e.shape.map((function(e){return 0})),o=e.shape.map((function(e){return e}));o[e.shape.length-1]=t,n=Yg(e,i,o),r=t}else if(null!=t&&t>r){var s=e.shape.map((function(e){return e}));s[e.shape.length-1]=t-r,n=$g([e,Rb(s)],e.shape.length-1),r=t}else n=e;var u=hm(n),c=Gg(Pp(n,u),[a,r]),l=Fk(c),d=Math.floor(r/2)+1,f=hk(l),h=ib(l),p=zk(f,[d,r-d],f.shape.length-1),v=zk(h,[d,r-d],h.shape.length-1),m=n.shape.slice();return m[n.shape.length-1]=d,Gg(Pp(p[0],v[0]),m)}});var Vk=Mp({squaredDifference_:function(e,t){var n=Op(e,"a","squaredDifference"),r=Op(t,"b","squaredDifference"),a=gp(n,r),i=(0,ge.Z)(a,2);n=i[0],r=i[1],Zm(n.shape,r.shape);var o={a:n,b:r};return Ep.runKernel(Gf,o,{})}});var Uk=Mp({squeeze_:function(e,t){var n=Op(e,"x","squeeze","string_or_numeric");return Gg(n,Ac(n.shape,t).newShape)}});var Wk=Mp({stack_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Lp(e,"tensors","stack","string_or_numeric");kc(n.length>=1,(function(){return"Pass at least one tensor to tf.stack"})),n.length>0&&kc(t<=n[0].rank,(function(){return"Axis must be <= rank of the tensor"}));var r=n,a={axis:t};return Ep.runKernel(nf,r,a)}});var jk=Mp({step_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n={x:Op(e,"x","step")},r={alpha:t};return Ep.runKernel(ch,n,r)}});var Gk=Mp({stridedSlice_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,c={x:Op(e,"x","stridedSlice","string_or_numeric")},l={begin:t,end:n,strides:r,beginMask:a,endMask:i,ellipsisMask:o,newAxisMask:s,shrinkAxisMask:u};return Ep.runKernel($f,c,l)}});var Hk=Mp({tan_:function(e){var t={x:Op(e,"x","tan","float32")};return Ep.runKernel(Jf,t)}});function qk(e,t){xc(e);var n=Ap(e,t);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return zp(e,null,n,t)}function $k(e,t,n){if(xc(e),null!=t&&2!==t.length)throw new Error("tensor2d() requires shape to have two numbers");var r=Ap(e,n);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return zp(e,t,r,n)}function Kk(e,t,n){if(xc(e),null!=t&&4!==t.length)throw new Error("tensor4d() requires shape to have four numbers");var r=Ap(e,n);if(4!==r.length&&1!==r.length)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return zp(e,t,r,n)}function Xk(e,t,n){if(xc(e),null!=t&&5!==t.length)throw new Error("tensor5d() requires shape to have five numbers");var r=Ap(e,n);if(5!==r.length&&1!==r.length)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return zp(e,t,r,n)}function Yk(e,t,n){if(xc(e),null!=t&&6!==t.length)throw new Error("tensor6d() requires shape to have six numbers");var r=Ap(e,n);if(6!==r.length&&1!==r.length)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return zp(e,t=t||r,r,n)}function Qk(e,t,n){if(t.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher,"+" but the rank was ".concat(t.rank,"."));if(e.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher,"+" but the rank was ".concat(e.rank,"."));if("int32"!==t.dtype)throw new Error("The dtype of 'indices' should be int32, but got dtype: ".concat(t.dtype));if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: ".concat(n));if(0===n.length){if(0===t.size)throw new Error("Indices specified for empty output. indices shape: ".concat(t.shape));if(0===e.size)throw new Error("Updates specified for empty output. updates shape: ".concat(e.shape))}!function(e,t,n){var r=t.rank>1?t.shape[t.rank-1]:1,a=t.rank>1?t.rank-1:1,i="Must have updates.shape = indices.shape[:batchDim] + "+"shape[sliceDim:], got updates.shape: ".concat(n.shape)+", indices.shape: ".concat(t.shape,", shape: ").concat(e)+", sliceDim: ".concat(r,", and batchDim: ").concat(a,".");if(n.rank<a)throw new Error(i+" update.rank < ".concat(a,". "));if(e.length<r+(n.rank-a))throw new Error(i+" Output shape length < ".concat(r+(n.rank-a)));if(n.rank!==a+e.length-r)throw new Error(i+" update.rank != ".concat(a+e.length-r));for(var o=0;o<a;++o)if(n.shape[o]!==t.shape[o])throw new Error(i+" updates.shape[".concat(o,"] (").concat(n.shape[o],") != indices.shape[").concat(o,"] (").concat(t.shape[o],")."));for(var s=0;s<n.rank-a;++s)if(n.shape[s+a]!==e[s+r])throw new Error(i+" updates.shape[".concat(s+a,"] (").concat(n.shape[s+a],") != shape[").concat(s+a,"] (").concat(e[s+a],")"))}(n,t,e)}function Jk(e,t,n){for(var r=t.shape.length,a=r>1?t.shape[r-1]:1,i=n.length,o=1,s=a;s<i;++s)o*=n[s];var u=a<1?1:a;return{sliceRank:a,numUpdates:Ic(t.shape)/u,sliceSize:o,strides:[].concat((0,me.Z)(Vc(n.slice(0,a))),[1]),outputSize:Ic(n)}}var ew=Mp({tensorScatterUpdate_:function(e,t,n){var r=Op(e,"tensor","tensorScatterupdate"),a=Op(t,"indices","tensorScatterupdate","int32"),i=Op(n,"updates","tensorScatterupdate");if(Qk(i,a,r.shape),r.dtype!==i.dtype)throw new Error("tensor and updates must have the same dtype, instead they are ".concat(r.dtype," and ").concat(i.dtype,"."));var o={tensor:r,indices:a,updates:i};return Ep.runKernel(Tf,o,{})}});var tw=Mp({topk_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=Op(e,"x","topk");if(0===r.rank)throw new Error("topk() expects the input to be of rank 1 or higher");var a=r.shape[r.shape.length-1];if(t<0)throw new Error("'k' passed to topk() must be >= 0 but got ".concat(t));if(t>a)throw new Error("'k' passed to topk() must be <= the last dimension (".concat(a,") ")+"but got ".concat(t));var i={x:r},o={k:t,sorted:n},s=Ep.runKernel(nh,i,o),u=(0,ge.Z)(s,2);return{values:u[0],indices:u[1]}}});var nw=Mp({truncatedNormal_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;if(qc(e),null!=r&&"bool"===r)throw new Error("Unsupported data type $ { dtype }");for(var i=new ik(t,n,r,!0,a),o=Yv(e,r),s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}});var rw=Mp({unique_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Op(e,"x","unique","string_or_numeric");kc(n.rank>0,(function(){return"The input tensor must be at least 1D"}));var r={x:n},a={axis:t},i=Ep.runKernel(ih,r,a),o=(0,ge.Z)(i,2);return{values:o[0],indices:o[1]}}});var aw=Mp({unsortedSegmentSum_:function(e,t,n){var r=Op(e,"x","unsortedSegmentSum"),a=Op(t,"segmentIds","unsortedSegmentSum","int32");kc(Tc(n),(function(){return"numSegments must be of dtype int"}));var i={x:r,segmentIds:a},o={numSegments:n};return Ep.runKernel(sh,i,o)}});var iw=Mp({unstack_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Op(e,"x","unstack","string_or_numeric");kc(t>=-n.shape.length&&t<n.shape.length,(function(){return"Axis = ".concat(t," is not in [-").concat(n.shape.length,", ").concat(n.shape.length,")")}));var r={value:n},a={axis:t};return Ep.runKernel(oh,r,a)}});function ow(e,t){return Eb(e,t,"right")}function sw(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return Ep.makeVariable(e,t,n,r)}function uw(e,t){for(var n=[],r=0;r<t.length;r++)t[r]&&n.push(r);for(var a=Yv(e,"int32"),i=Yv([n.length,e.length],"int32"),o=0;o<n.length;o++){var s=a.indexToLoc(n[o]),u=o*e.length;i.values.set(s,u)}return i.toTensor()}function cw(){return(cw=(0,ke.Z)((0,be.Z)().mark((function e(t){var n,r,a;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Op(t,"condition","whereAsync","bool"),e.next=3,n.data();case 3:return r=e.sent,a=uw(n.shape,r),t!==n&&n.dispose(),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var lw=function(e){return cw.apply(this,arguments)};function dw(){return(dw=(0,ke.Z)((0,be.Z)().mark((function e(t,n,r){var a,i,o,s,u,c,l,d,f,h,p,v,m;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=Op(t,"tensor","boolMask"),i=Op(n,"mask","boolMask","bool"),o=null==r?0:r,s=i.rank,u=a.shape,kc(s>0,(function(){return"mask cannot be scalar"})),wc(u.slice(o,o+s),i.shape,"mask's shape must match the first K dimensions of tensor's shape,"),c=1,l=o;l<o+s;l++)c*=u[l];return d=u.slice(0,o).concat([c],u.slice(o+s)),f=Gg(a,d),h=Gg(i,[-1]),e.next=14,lw(h);case 14:return p=e.sent,v=Uk(p,[1]),m=nb(f,v,o),t!==a&&a.dispose(),n!==i&&i.dispose(),v.dispose(),f.dispose(),h.dispose(),p.dispose(),e.abrupt("return",m);case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var fw=function(e,t,n){return dw.apply(this,arguments)};var hw=Mp({transpose_:function(e,t,n){var r=Op(e,"x","transpose");if(null==t&&(t=r.shape.map((function(e,t){return t})).reverse()),kc(r.rank===t.length,(function(){return"Error in transpose: rank of input ".concat(r.rank," ")+"must match length of perm ".concat(t,".")})),t.forEach((function(e){kc(e>=0&&e<r.rank,(function(){return"All entries in 'perm' must be between 0 and ".concat(r.rank-1)+" but got ".concat(t)}))})),r.rank<=1)return r.clone();var a={x:r},i={perm:t};return"complex64"===r.dtype?rm((function(){var e=hk(r),t=ib(r);return e=Ep.runKernel(ah,{x:e},i),t=Ep.runKernel(ah,{x:t},i),n&&(t=mb(t)),Pp(e,t)})):Ep.runKernel(ah,a,i)}});var pw=Mp({movingAverage_:function(e,t,n,r){var a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=Op(e,"v","movingAverage"),o=Op(t,"x","movingAverage"),s=Op(n,"decay","movingAverage");!function(e,t){kc(e.dtype===t.dtype,(function(){return"The dtypes of the first(".concat(e.dtype,") and")+" second(".concat(t.dtype,") input must match")}))}(i,o),kc(Sc(i.shape,o.shape),(function(){return"Shape mismatch in v and x"}));var u=vm(1),c=Sm(u,s),l=lm(Sm(o,i),c);if(a){kc(null!=r,(function(){return"When using zeroDebias: true, step is required."}));var d=Op(r,"step","movingAverage");l=cm(l,Sm(u,Im(s,d)))}return sm(i,l)}});var vw=Mp({scatterND_:function(e,t,n){qc(n);var r=Op(e,"indices","scatterND","int32"),a=Op(t,"updates","scatterND");Qk(a,r,n);var i={indices:r,updates:a},o={shape:n};return Ep.runKernel(Sf,i,o)}});var mw=Mp({sparseToDense_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;qc(n);var a=Op(e,"sparseIndices","sparseToDense","int32"),i=Op(t,"sparseValues","sparseToDense","string_or_numeric"),o=Op(r,"defaultValue","sparseToDense",i.dtype);!function(e,t,n,r){if("int32"!==e.dtype)throw new Error("tf.sparseToDense() expects the indices to be int32 type,"+" but the dtype was ".concat(e.dtype,"."));if(e.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix,"+" but got shape ".concat(e.shape,"."));var a=e.rank>0?e.shape[0]:1,i=e.rank>1?e.shape[1]:1;if(n.length!==i)throw new Error("outputShape has incorrect number of elements:,"+" ".concat(n.length,", should be: ").concat(i,"."));var o=t.size;if(0!==t.rank&&(1!==t.rank||o!==a))throw new Error("sparseValues has incorrect shape "+"".concat(t.shape,", should be [] or [").concat(a,"]"));if(t.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(a,i,n,o);var s={sparseIndices:a,sparseValues:i,defaultValue:o},u={outputShape:n};return Ep.runKernel(jf,s,u)}});var gw=Mp({gatherND_:function(e,t){var n=Op(t,"indices","gatherND","int32"),r={params:Op(e,"x","gatherND","string_or_numeric"),indices:n};return Ep.runKernel(vd,r)}});var yw=Mp({dropout_:function(e,t,n,r){var a=Op(e,"x","dropout");if(kc("float32"===a.dtype,(function(){return"x has to be a floating point tensor since it's going to be "+"scaled, but got a ".concat(a.dtype," tensor instead.")})),kc(t>=0&&t<1,(function(){return"rate must be a float in the range [0, 1), but got ".concat(t,".")})),0===t)return e instanceof ap?a.clone():a;var i=function(e,t){if(null==t)return e.shape.slice();if(Sc(e.shape,t))return t;if(e.shape.length===t.length){for(var n=[],r=0;r<e.shape.length;r++)null==t[r]&&null!=e.shape[r]?n.push(e.shape[r]):n.push(t[r]);return n}return t}(a,n),o=1-t,s=cm(tb(sm(dk(i,0,1,"float32",r),o)),o);return lm(a,s)}});function bw(e){return Math.floor(Math.pow(2,Math.ceil(Math.log(e)/Math.log(2))))}function kw(e,t,n){for(var r=1-e%2,a=new Float32Array(e),i=0;i<e;++i){var o=2*Math.PI*i/(e+r-1);a[i]=t-n*Math.cos(o)}return qk(a,"float32")}function ww(){return ww=(0,ke.Z)((0,be.Z)().mark((function e(t,n){var r,a,i,o,s,u,c,l,d,f,h,p,v,m,g,y=arguments;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=y.length>2&&void 0!==y[2]?y[2]:1,a=Op(t,"predictions","inTopK"),i=Op(n,"targets","inTopK"),kc(a.rank>1,(function(){return"inTopK() expects the predictions to be of rank 2 or higher, "+"but got ".concat(a.rank)})),kc(a.rank-1===i.rank,(function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+"".concat(a.rank," and targets rank ").concat(i.rank)})),wc(a.shape.slice(0,a.shape.length-1),i.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),o=a.shape[a.shape.length-1],kc(r>0&&r<=o,(function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last "+"dimension (".concat(o,"), but got ").concat(r)})),e.next=10,a.data();case 10:return s=e.sent,e.next=13,i.data();case 13:u=e.sent,c=s.length/o,l=o,d=Rc("bool",c),f=0;case 17:if(!(f<c)){e.next=35;break}for(h=f*l,p=s.subarray(h,h+l),v=[],m=0;m<p.length;m++)v.push({value:p[m],index:m});v.sort((function(e,t){return t.value-e.value})),d[f]=0,g=0;case 25:if(!(g<r)){e.next=32;break}if(v[g].index!==u[f]){e.next=29;break}return d[f]=1,e.abrupt("break",32);case 29:g++,e.next=25;break;case 32:f++,e.next=17;break;case 35:return t!==a&&a.dispose(),n!==i&&i.dispose(),e.abrupt("return",Bp(d,i.shape,"bool"));case 38:case"end":return e.stop()}}),e)}))),ww.apply(this,arguments)}var xw=function(e,t){return ww.apply(this,arguments)};var Iw=Mp({conv2DBackpropFilter_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",o=arguments.length>6?arguments[6]:void 0,s=e;3===e.rank&&(s=Gg(e,[1,e.shape[0],e.shape[1],e.shape[2]]));var u=t;3===u.rank&&(u=Gg(t,[1,t.shape[0],t.shape[1],t.shape[2]])),kc(4===s.rank,(function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+"".concat(s.shape,".")})),kc(4===u.rank,(function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+"".concat(u.shape,".")})),kc(4===n.length,(function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+"".concat(n,".")}));var c="NHWC"===i?s.shape[3]:s.shape[1],l="NHWC"===i?u.shape[3]:u.shape[1];kc(c===n[2],(function(){return"Error in conv2dDerFilter: depth of input ".concat(c,") must ")+"match input depth in filter (".concat(n[2],".")})),kc(l===n[3],(function(){return"Error in conv2dDerFilter: depth of dy (".concat(l,") must ")+"match output depth for filter (".concat(n[3],").")})),jg("conv2dDerFilter",a,o);var d={x:s,dy:u},f={strides:r,pad:a,dataFormat:i,dimRoundingMode:o,filterShape:n};return Ep.runKernel(Ol,d,f)}});function Sw(e,t,n){if(null==n||"linear"===n)return e;if("relu"===n)return lm(e,jk(t));throw new Error("Cannot compute gradient for fused activation ".concat(n,"."))}function Tw(e,t){var n=t,r=Cm(e.shape,t.shape);return r.length>0&&(n=Hy(n,r)),Gg(n,e.shape)}function Ew(e,t,n,r){if("linear"===t)return e;if("relu"===t)return vk(e);if("elu"===t)return Ly(e);if("relu6"===t)return mk(e);if("prelu"===t)return Qb(e,n);if("leakyrelu"===t)return cb(e,r);if("sigmoid"===t)return Xg(e);throw new Error("Unknown fused activation ".concat(t,"."))}var Nw=function(e,t){return!(e>0)||"linear"===t};var Cw=Mp({fusedConv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,a=e.pad,i=e.dataFormat,o=void 0===i?"NHWC":i,s=e.dilations,u=void 0===s?[1,1]:s,c=e.dimRoundingMode,l=e.bias,d=e.activation,f=void 0===d?"linear":d,h=e.preluActivationWeights,p=e.leakyreluAlpha;if(f=f||"linear",!1===Nw(Ep.state.gradientDepth,f)){kc("NHWC"===o,(function(){return"Error in fused conv2d: got dataFormat of ".concat(o," but ")+"only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear."}));var v=py(t,n,r,a,o,u,c);return null!=l&&(v=sm(v,l)),Ew(v,f,h,p)}var m=Op(t,"x","conv2d","float32"),g=Op(n,"filter","conv2d","float32"),y=m,b=!1;3===m.rank&&(b=!0,y=Gg(m,[1,m.shape[0],m.shape[1],m.shape[2]])),kc(4===y.rank,(function(){return"Error in fused conv2d: input must be rank 4, but got rank "+"".concat(y.rank,".")})),kc(4===g.rank,(function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+"".concat(g.rank,".")})),jg("fused conv2d",a,c);var k="NHWC"===o?y.shape[3]:y.shape[1];kc(g.shape[2]===k,(function(){return"Error in conv2d: depth of input (".concat(k,") must match ")+"input depth for filter ".concat(g.shape[2],".")})),kc(Vg(r,u),(function(){return"Error in conv2D: Either strides or dilations must be 1. "+"Got strides ".concat(r," and dilations '").concat(u,"'")}));var w,x,I=Dg(y.shape,g.shape,r,u,a,c);if(null!=l){var S=gp(w=Op(l,"bias","fused conv2d"),m),T=(0,ge.Z)(S,1);w=T[0],"NHWC"===o?Zm(I.outShape,w.shape):(kc(w.shape.length<=1,(function(){return"Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of "+"rank-".concat(w.shape.length,".")})),kc(0===w.shape.length||w.shape[0]===I.outChannels||1===w.shape[0],(function(){return"Error in fused conv2d: bias shape (".concat(w.shape,") is not ")+"compatible with the number of output channels "+"(".concat(I.outChannels,")")})))}if(null!=h){var E=h.shape;if(kc(E.length<=1||3===E.length,(function(){return"Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of "+"rank-".concat(E.length,".")})),1===E.length)kc(1===E[0]||E[0]===I.outChannels,(function(){return"Error in fused conv2d: PReLU activation weights "+"(".concat(E,") is not compatible with the number of output ")+"channels (".concat(I.outChannels,").")}));else if(3===E.length)try{Zm(E,I.outShape)}catch(D){var N="Error in fused conv2d: PReLU activation weights (".concat(E,") ")+"is not compatible with the output shape of the conv2d "+"(".concat(I.outShape,").");throw Error(N)}x=Op(h,"prelu weights","fused conv2d")}var C=function(e,t){kc("NHWC"===o,(function(){return"Error in gradient of fused conv2D: got dataFormat of ".concat(o," but only NHWC is currently supported.")}));var n=(0,ge.Z)(t,4),i=n[0],s=n[1],c=n[2],l=n[3],d=Sw(e,c,f);kc(Bg(u),(function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 "+"are not yet supported in gradients. Got dilations '".concat(u,"'")}));var h=[my(s.shape,d,i,r,a),Iw(s,d,i.shape,r,a)];if(null!=l){var p=Tw(l,d);h.push(p)}return h},Z={x:y,filter:g,bias:w,preluActivationWeights:x},_={strides:r,pad:a,dataFormat:o,dilations:u,dimRoundingMode:c,activation:f,leakyreluAlpha:p};if(null==l){var A=pm((function(e,t,n){var r=Ep.runKernel(hh,Z,_);return n([t,e,r]),b&&(r=Gg(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:C}}));return A(y,g)}var R=pm((function(e,t,n,r){var a=Ep.runKernel(hh,Z,_);return r([t,e,a,n]),b&&(a=Gg(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:C}}));return R(y,g,w)}});var Zw=Mp({depthwiseConv2dNativeBackpropFilter_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],o=arguments.length>6?arguments[6]:void 0,s=e;3===e.rank&&(s=Gg(e,[1,e.shape[0],e.shape[1],e.shape[2]]));var u=t;3===u.rank&&(u=Gg(t,[1,t.shape[0],t.shape[1],t.shape[2]]));var c={x:s,dy:u},l={strides:r,pad:a,dimRoundingMode:o,dilations:i,filterShape:n};return Ep.runKernel(ql,c,l)}});var _w=Mp({depthwiseConv2dNativeBackpropInput_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],o=arguments.length>6?arguments[6]:void 0,s=t,u=!1;3===t.rank&&(u=!0,s=Gg(t,[1,t.shape[0],t.shape[1],t.shape[2]]));var c={dy:s,filter:n},l={strides:r,pad:a,dimRoundingMode:o,dilations:i,inputShape:e},d=Ep.runKernel($l,c,l);return u?Gg(d,[d.shape[1],d.shape[2],d.shape[3]]):d}});var Aw=Mp({fusedDepthwiseConv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,a=e.pad,i=e.dataFormat,o=void 0===i?"NHWC":i,s=e.dilations,u=void 0===s?[1,1]:s,c=e.dimRoundingMode,l=e.bias,d=e.activation,f=void 0===d?"linear":d,h=e.preluActivationWeights,p=e.leakyreluAlpha;if(!1===Nw(Ep.state.gradientDepth,f)){var v=Ny(t,n,r,a,o,u,c);return null!=l&&(v=sm(v,l)),Ew(v,f,h,p)}var m=Op(t,"x","depthwiseConv2d","float32"),g=Op(n,"filter","depthwiseConv2d","float32"),y=m,b=!1;3===m.rank&&(b=!0,y=Gg(m,[1,m.shape[0],m.shape[1],m.shape[2]])),kc(4===y.rank,(function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got "+"rank ".concat(y.rank,".")})),kc(4===g.rank,(function(){return"Error in fused depthwiseConv2d: filter must be rank 4, "+"but got rank ".concat(g.rank,".")})),kc(y.shape[3]===g.shape[2],(function(){return"Error in fused depthwiseConv2d: number of input channels "+"(".concat(y.shape[3],") must match the inChannels dimension in ")+"filter ".concat(g.shape[2],".")})),null==u&&(u=[1,1]),kc(Vg(r,u),(function(){return"Error in fused depthwiseConv2d: Either strides or dilations must "+"be 1. Got strides ".concat(r," and dilations '").concat(u,"'")})),jg("fused depthwiseConv2d",a,c);var k,w,x=Dg(y.shape,g.shape,r,u,a,c,!0);if(null!=l){var I=gp(k=Op(l,"bias","fused conv2d"),m),S=(0,ge.Z)(I,1);k=S[0],Zm(x.outShape,k.shape)}null!=h&&(w=Op(h,"prelu weights","fused depthwiseConv2d"));var T=function(e,t){kc(Bg(u),(function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations "+"'".concat(u,"'")}));var n=(0,ge.Z)(t,4),i=n[0],o=n[1],s=n[2],l=n[3],d=Sw(e,s,f),h=_w(o.shape,d,i,r,a,u,c),p=Zw(o,d,i.shape,r,a,u,c);return null!=l?[h,p,Tw(k,d)]:[h,p]},E={x:y,filter:g,bias:k,preluActivationWeights:w},N={strides:r,pad:a,dataFormat:o,dilations:u,dimRoundingMode:c,activation:f,leakyreluAlpha:p};if(null==l){var C=pm((function(e,t,n){var r=Ep.runKernel(ph,E,N);return n([t,e,r]),b&&(r=Gg(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:T}}));return C(y,g)}var Z=pm((function(e,t,n,r){var a=Ep.runKernel(ph,E,N);return r([t,e,a,n]),b&&(a=Gg(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:T}}));return Z(y,g,k)}});var Rw=Mp({fusedMatMul_:function(e){var t=e.a,n=e.b,r=e.transposeA,a=void 0!==r&&r,i=e.transposeB,o=void 0!==i&&i,s=e.bias,u=e.activation,c=void 0===u?"linear":u,l=e.preluActivationWeights,d=e.leakyreluAlpha,f=void 0===d?.2:d;if(!1===Nw(Ep.state.gradientDepth,c)){var h=Kg(t,n,a,o);return null!=s&&(h=sm(h,s)),Ew(h,c,l,f)}var p=Op(t,"a","fused matMul"),v=Op(n,"b","fused matMul"),m=gp(p,v),g=(0,ge.Z)(m,2);p=g[0],v=g[1];var y=a?p.shape[p.rank-2]:p.shape[p.rank-1],b=o?v.shape[v.rank-1]:v.shape[v.rank-2],k=a?p.shape[p.rank-1]:p.shape[p.rank-2],w=o?v.shape[v.rank-2]:v.shape[v.rank-1],x=p.shape.slice(0,-2),I=v.shape.slice(0,-2),S=Ic(x),T=Ic(I);kc(y===b,(function(){return"Error in fused matMul: inner shapes (".concat(y,") and (")+"".concat(b,") of Tensors with shapes ").concat(p.shape," and ")+"".concat(v.shape," and transposeA=").concat(a)+" and transposeB=".concat(o," must match.")}));var E,N,C=Zm(p.shape.slice(0,-2),v.shape.slice(0,-2)).concat([k,w]),Z=Gg(p,a?[S,y,k]:[S,k,y]),_=Gg(v,o?[T,w,b]:[T,b,w]);if(null!=s){var A=gp(E=Op(s,"bias","fused matMul"),p);E=(0,ge.Z)(A,1)[0],Zm(C,E.shape)}null!=l&&(N=Op(l,"prelu weights","fused matMul"));var R=function(e,t){var n,r,i=(0,ge.Z)(t,4),u=i[0],l=i[1],d=i[2],f=i[3],h=Sw(Gg(e,d.shape),d,c);return a||o?!a&&o?(n=Kg(h,l,!1,!1),r=Kg(h,u,!0,!1)):a&&!o?(n=Kg(l,h,!1,!0),r=Kg(u,h,!1,!1)):(n=Kg(l,h,!0,!0),r=Kg(h,u,!0,!0)):(n=Kg(h,l,!1,!0),r=Kg(u,h,!0,!1)),null!=s?[n,r,Tw(f,h)]:[n,r]},D={a:Z,b:_,bias:E,preluActivationWeights:N},O={transposeA:a,transposeB:o,activation:c,leakyreluAlpha:f};if(null==s){var L=pm((function(e,t,n){var r=Ep.runKernel(fh,D,O);return n([e,t,r]),{value:Gg(r,C),gradFunc:R}}));return L(Z,_)}var F=pm((function(e,t,n,r){var a=Ep.runKernel(fh,D,O);return r([e,t,a,n]),{value:Gg(a,C),gradFunc:R}}));return F(Z,_,E)}});var Dw=Mp({hammingWindow_:function(e){return kw(e,.54,.46)}});var Ow=Mp({hannWindow_:function(e){return kw(e,.5,.5)}});var Lw=Mp({frame_:function(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=0,o=[];i+t<=e.size;)o.push(Yg(e,i,t)),i+=n;if(r)for(;i<e.size;){var s=i+t-e.size,u=$g([Yg(e,i,t-s),wm([s],a)]);o.push(u),i+=n}return 0===o.length?$k([],[0,t]):Gg($g(o),[o.length,t])}});var Fw=Mp({stft_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Ow;null==r&&(r=bw(t));var i=Lw(e,t,n),o=lm(i,a(t));return Bk(o,r)}});var Mw=Mp({cropAndResize_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"bilinear",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=Op(e,"image","cropAndResize"),s=Op(t,"boxes","cropAndResize","float32"),u=Op(n,"boxInd","cropAndResize","int32"),c=s.shape[0];kc(4===o.rank,(function(){return"Error in cropAndResize: image must be rank 4,"+"but got rank ".concat(o.rank,".")})),kc(2===s.rank&&4===s.shape[1],(function(){return"Error in cropAndResize: boxes must be have size [".concat(c,",4] ")+"but had shape ".concat(s.shape,".")})),kc(1===u.rank&&u.shape[0]===c,(function(){return"Error in cropAndResize: boxInd must be have size [".concat(c,"] ")+"but had shape ".concat(s.shape,".")})),kc(2===r.length,(function(){return"Error in cropAndResize: cropSize must be of length 2, but got "+"length ".concat(r.length,".")})),kc(r[0]>=1&&r[1]>=1,(function(){return"cropSize must be atleast [1,1], but was ".concat(r)})),kc("bilinear"===a||"nearest"===a,(function(){return"method must be bilinear or nearest, but was ".concat(a)}));var l={image:o,boxes:s,boxInd:u},d={method:a,extrapolationValue:i,cropSize:r};return Ep.runKernel(Wl,l,d)}});var Pw=Mp({flipLeftRight_:function(e){var t=Op(e,"image","flipLeftRight","float32");kc(4===t.rank,(function(){return"Error in flipLeftRight: image must be rank 4,"+"but got rank ".concat(t.rank,".")}));var n={image:t};return Ep.runKernel(ld,n,{})}});var zw=Mp({grayscaleToRGB_:function(e){var t=Op(e,"image","grayscaleToRGB"),n=t.rank-1,r=t.shape[n];kc(t.rank>=2,(function(){return"Error in grayscaleToRGB: images must be at least rank 2, "+"but got rank ".concat(t.rank,".")})),kc(1===r,(function(){return"Error in grayscaleToRGB: last dimension of a grayscale image "+"should be size 1, but got size ".concat(r,".")}));var a=new Array(t.rank);return a.fill(1,0,n),a[n]=3,Jy(t,a)}});var Bw=Mp({rotateWithOffset_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=Op(e,"image","rotateWithOffset","float32");kc(4===a.rank,(function(){return"Error in rotateWithOffset: image must be rank 4,"+"but got rank ".concat(a.rank,".")}));var i={image:a},o={radians:t,fillValue:n,center:r};return Ep.runKernel(dh,i,o)}});function Vw(e,t,n,r,a,i){null==r&&(r=.5),null==a&&(a=Number.NEGATIVE_INFINITY),null==i&&(i=0);var o=e.shape[0];return n=Math.min(n,o),kc(0<=r&&r<=1,(function(){return"iouThreshold must be in [0, 1], but was '".concat(r,"'")})),kc(2===e.rank,(function(){return"boxes must be a 2D tensor, but was of rank '".concat(e.rank,"'")})),kc(4===e.shape[1],(function(){return"boxes must have 4 columns, but 2nd dimension was ".concat(e.shape[1])})),kc(1===t.rank,(function(){return"scores must be a 1D tensor"})),kc(t.shape[0]===o,(function(){return"scores has incompatible shape with boxes. Expected ".concat(o,", ")+"but was ".concat(t.shape[0])})),kc(0<=i&&i<=1,(function(){return"softNmsSigma must be in [0, 1], but was '".concat(i,"'")})),{maxOutputSize:n,iouThreshold:r,scoreThreshold:a,softNmsSigma:i}}var Uw=Mp({nonMaxSuppression_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,i=Op(e,"boxes","nonMaxSuppression","float32"),o=Op(t,"scores","nonMaxSuppression","float32"),s=Vw(i,o,n,r,a),u={maxOutputSize:n=s.maxOutputSize,iouThreshold:r=s.iouThreshold,scoreThreshold:a=s.scoreThreshold};return Ep.runKernel(Yd,{boxes:i,scores:o},u)}});function Ww(e,t,n){var r=function(e,t,n){return function(e,t,n){var r=0,a=e.length,i=0,o=!1;for(;r<a;){var s=n(t,e[i=r+(a-r>>>1)]);s>0?r=i+1:(a=i,o=!s)}return o?r:-r-1}(e,t,n||jw)}(e,t,n),a=r<0?-(r+1):r;e.splice(a,0,t)}function jw(e,t){return e>t?1:e<t?-1:0}function Gw(e,t,n,r,a){return $w(e,t,n,r,a,0)}function Hw(e,t,n,r,a,i){return $w(e,t,n,r,a,0,!1,i,!0)}function qw(e,t,n,r,a,i){return $w(e,t,n,r,a,i,!0)}function $w(e,t,n,r,a,i){for(var o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7],u=arguments.length>8&&void 0!==arguments[8]&&arguments[8],c=[],l=0;l<t.length;l++)t[l]>a&&c.push({score:t[l],boxIndex:l,suppressBeginIndex:0});c.sort(Yw);for(var d=i>0?-.5/i:0,f=[],h=[];f.length<n&&c.length>0;){var p=c.pop(),v=p.score,m=p.boxIndex,g=p.suppressBeginIndex;if(v<a)break;for(var y=!1,b=f.length-1;b>=g;--b){var k=Kw(e,m,f[b]);if(k>=r){y=!0;break}if(p.score=p.score*Xw(r,d,k),p.score<=a)break}p.suppressBeginIndex=f.length,y||(p.score===v?(f.push(m),h.push(p.score)):p.score>a&&Ww(c,p,Yw))}var w=f.length,x=n-w;s&&x>0&&(f.push.apply(f,(0,me.Z)(new Array(x).fill(0))),h.push.apply(h,(0,me.Z)(new Array(x).fill(0))));var I={selectedIndices:f};return o&&(I.selectedScores=h),u&&(I.validOutputs=w),I}function Kw(e,t,n){var r=e.subarray(4*t,4*t+4),a=e.subarray(4*n,4*n+4),i=Math.min(r[0],r[2]),o=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),c=Math.min(a[0],a[2]),l=Math.min(a[1],a[3]),d=Math.max(a[0],a[2]),f=Math.max(a[1],a[3]),h=(s-i)*(u-o),p=(d-c)*(f-l);if(h<=0||p<=0)return 0;var v=Math.max(i,c),m=Math.max(o,l),g=Math.min(s,d),y=Math.min(u,f),b=Math.max(g-v,0)*Math.max(y-m,0);return b/(h+p-b)}function Xw(e,t,n){var r=Math.exp(t*n*n);return n<=e?r:0}function Yw(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}function Qw(){return Qw=(0,ke.Z)((0,be.Z)().mark((function e(t,n,r){var a,i,o,s,u,c,l,d,f,h,p=arguments;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=p.length>3&&void 0!==p[3]?p[3]:.5,i=p.length>4&&void 0!==p[4]?p[4]:Number.NEGATIVE_INFINITY,o=Op(t,"boxes","nonMaxSuppressionAsync"),s=Op(n,"scores","nonMaxSuppressionAsync"),u=Vw(o,s,r,a,i),r=u.maxOutputSize,a=u.iouThreshold,i=u.scoreThreshold,e.next=10,Promise.all([o.data(),s.data()]);case 10:return c=e.sent,l=c[0],d=c[1],f=Gw(l,d,r,a,i),h=f.selectedIndices,o!==t&&o.dispose(),s!==n&&s.dispose(),e.abrupt("return",qk(h,"int32"));case 17:case"end":return e.stop()}}),e)}))),Qw.apply(this,arguments)}var Jw=function(e,t,n){return Qw.apply(this,arguments)};var ex=Mp({nonMaxSuppressionWithScore_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=Op(e,"boxes","nonMaxSuppression"),s=Op(t,"scores","nonMaxSuppression"),u=Vw(o,s,n,r,a,i),c={boxes:o,scores:s},l={maxOutputSize:n=u.maxOutputSize,iouThreshold:r=u.iouThreshold,scoreThreshold:a=u.scoreThreshold,softNmsSigma:i=u.softNmsSigma},d=Ep.runKernel(Jd,c,l);return{selectedIndices:d[0],selectedScores:d[1]}}});function tx(){return tx=(0,ke.Z)((0,be.Z)().mark((function e(t,n,r){var a,i,o,s,u,c,l,d,f,h,p,v,m=arguments;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=m.length>3&&void 0!==m[3]?m[3]:.5,i=m.length>4&&void 0!==m[4]?m[4]:Number.NEGATIVE_INFINITY,o=m.length>5&&void 0!==m[5]?m[5]:0,s=Op(t,"boxes","nonMaxSuppressionAsync"),u=Op(n,"scores","nonMaxSuppressionAsync"),c=Vw(s,u,r,a,i,o),r=c.maxOutputSize,a=c.iouThreshold,i=c.scoreThreshold,o=c.softNmsSigma,e.next=12,Promise.all([s.data(),u.data()]);case 12:return l=e.sent,d=l[0],f=l[1],h=qw(d,f,r,a,i,o),p=h.selectedIndices,v=h.selectedScores,s!==t&&s.dispose(),u!==n&&u.dispose(),e.abrupt("return",{selectedIndices:qk(p,"int32"),selectedScores:qk(v)});case 19:case"end":return e.stop()}}),e)}))),tx.apply(this,arguments)}var nx=function(e,t,n){return tx.apply(this,arguments)};var rx=Mp({nonMaxSuppressionPadded_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=Op(e,"boxes","nonMaxSuppression"),s=Op(t,"scores","nonMaxSuppression"),u=Vw(o,s,n,r,a,null),c={boxes:o,scores:s},l={maxOutputSize:u.maxOutputSize,iouThreshold:u.iouThreshold,scoreThreshold:u.scoreThreshold,padToMaxOutputSize:i},d=Ep.runKernel(Qd,c,l);return{selectedIndices:d[0],validOutputs:d[1]}}});function ax(){return ax=(0,ke.Z)((0,be.Z)().mark((function e(t,n,r){var a,i,o,s,u,c,l,d,f,h,p,v,m,g,y,b,k=arguments;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=k.length>3&&void 0!==k[3]?k[3]:.5,i=k.length>4&&void 0!==k[4]?k[4]:Number.NEGATIVE_INFINITY,o=k.length>5&&void 0!==k[5]&&k[5],s=Op(t,"boxes","nonMaxSuppressionAsync"),u=Op(n,"scores","nonMaxSuppressionAsync"),c=Vw(s,u,r,a,i,null),l=c.maxOutputSize,d=c.iouThreshold,f=c.scoreThreshold,e.next=11,Promise.all([s.data(),u.data()]);case 11:return h=e.sent,p=(0,ge.Z)(h,2),v=p[0],m=p[1],g=Hw(v,m,l,d,f,o),y=g.selectedIndices,b=g.validOutputs,s!==t&&s.dispose(),u!==n&&u.dispose(),e.abrupt("return",{selectedIndices:qk(y,"int32"),validOutputs:vm(b,"int32")});case 19:case"end":return e.stop()}}),e)}))),ax.apply(this,arguments)}var ix=function(e,t,n){return ax.apply(this,arguments)};var ox=Mp({resizeBilinear_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=Op(e,"images","resizeBilinear");kc(3===a.rank||4===a.rank,(function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got "+"rank ".concat(a.rank,".")})),kc(2===t.length,(function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+"".concat(t,".")})),kc(!1===r||!1===n,(function(){return"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false."}));var i=a,o=!1;3===a.rank&&(o=!0,i=Gg(a,[1,a.shape[0],a.shape[1],a.shape[2]])),(0,ge.Z)(t,0);var s={images:i},u={alignCorners:n,halfPixelCenters:r,size:t},c=Ep.runKernel(yf,s,u);return o?Gg(c,[c.shape[1],c.shape[2],c.shape[3]]):c}});var sx=Mp({resizeNearestNeighbor_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=Op(e,"images","resizeNearestNeighbor");kc(3===a.rank||4===a.rank,(function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got "+"rank ".concat(a.rank,".")})),kc(2===t.length,(function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+"".concat(t,".")})),kc("float32"===a.dtype||"int32"===a.dtype,(function(){return"`images` must have `int32` or `float32` as dtype"})),kc(!1===r||!1===n,(function(){return"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false."}));var i=a,o=!1;3===a.rank&&(o=!0,i=Gg(a,[1,a.shape[0],a.shape[1],a.shape[2]])),(0,ge.Z)(t,0);var s={images:i},u={alignCorners:n,halfPixelCenters:r,size:t},c=Ep.runKernel(mf,s,u);return o?Gg(c,[c.shape[1],c.shape[2],c.shape[3]]):c}});var ux=Mp({threshold_:function(e){var t,n,r,a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"binary",o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,u=Op(e,"image","threshold"),c=u.shape[0]*u.shape[1],l=lm(qk([s]),255);if(kc(3===u.rank,(function(){return"Error in threshold: image must be rank 3,"+"but got rank ".concat(u.rank,".")})),kc(3===u.shape[2]||1===u.shape[2],(function(){return"Error in threshold: image color channel must be equal to 3 or 1"+"but got ".concat(u.shape[2],".")})),kc("int32"===u.dtype||"float32"===u.dtype,(function(){return"Error in dtype: image dtype must be int32 or float32,"+"but got dtype ".concat(u.dtype,".")})),kc("otsu"===i||"binary"===i,(function(){return"Method must be binary or otsu, but was ".concat(i)})),3===u.shape[2]){var d=zk(u,[1,1,1],-1),f=(0,ge.Z)(d,3);t=f[0],n=f[1],r=f[2];var h=lm(t,.2989),p=lm(n,.587),v=lm(r,.114);a=sm(sm(h,p),v)}else a=e;"otsu"===i&&(l=function(e,t){for(var n,r,a,i,o,s,u=qk([-1]),c=qk([0]),l=qk([0]),d=0;d<e.size-1;d++){n=Yg(e,0,d+1),r=Yg(e,d+1),o=cm(Hy(n),t),s=cm(Hy(r),t);var f=Hy(lm(n,fk(0,n.size)));a=cm(f,Hy(n));var h=wm(r.shape,n.size),p=sm(fk(0,r.size),h),v=lm(r,p);i=cm(Hy(v),Hy(r));var m=Sm(a,i),g=Sm(a,i),y=lm(o,s);l=lm(lm(y,m),g);var b=rb(l,c);c=Ay(b,l,c),u=Ay(b,qk([d]),u)}return u}(iy(Qv(xk(a),"int32"),Bp([]),256),c));var m=o?db(a,l):rb(a,l);return Qv(lm(m,255),"int32")}});var cx=Mp({transform_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"nearest",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"constant",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5?arguments[5]:void 0,o=Op(e,"image","transform","float32"),s=Op(t,"transforms","transform","float32");kc(4===o.rank,(function(){return"Error in transform: image must be rank 4,"+"but got rank ".concat(o.rank,".")})),kc(2===s.rank&&(s.shape[0]===o.shape[0]||1===s.shape[0])&&8===s.shape[1],(function(){return"Error in transform: Input transform should be batch x 8 or 1 x 8"})),kc(null==i||2===i.length,(function(){return"Error in transform: outputShape must be [height, width] or null, "+"but got ".concat(i,".")}));var u={image:o,transforms:s},c={interpolation:n,fillMode:r,fillValue:a,outputShape:i};return Ep.runKernel(rh,u,c)}});var lx=Mp({bandPart_:function(e,t,n){var r=Op(e,"a","bandPart");kc(r.rank>=2,(function(){return"bandPart(): Rank must be at least 2, got ".concat(r.rank,".")}));var a,i,o=r.shape,s=r.shape.slice(-2),u=(0,ge.Z)(s,2),c=u[0],l=u[1];"number"===typeof t?(kc(t%1===0,(function(){return"bandPart(): numLower must be an integer, got ".concat(t,".")})),kc(t<=c,(function(){return"bandPart(): numLower (".concat(t,")")+" must not be greater than the number of rows (".concat(c,").")})),a=Op(t<0?c:t,"numLower","bandPart")):(kc("int32"===t.dtype,(function(){return"bandPart(): numLower's dtype must be an int32."})),a=Ay(lb(t,0),c,Lb(t,c))),"number"===typeof n?(kc(n%1===0,(function(){return"bandPart(): numUpper must be an integer, got ".concat(n,".")})),kc(n<=l,(function(){return"bandPart(): numUpper (".concat(n,")")+" must not be greater than the number of columns (".concat(l,").")})),i=Op(n<0?l:n,"numUpper","bandPart")):(kc("int32"===n.dtype,(function(){return"bandPart(): numUpper's dtype must be an int32."})),i=Ay(lb(n,0),l,Lb(n,l)));var d=Gg(fk(0,c,1,"int32"),[-1,1]),f=fk(0,l,1,"int32"),h=Sm(d,f),p=wb(db(h,a),ab(h,mb(i))),v=Rb([c,l],r.dtype);return Gg(Wk(iw(Gg(r,[-1,c,l])).map((function(e){return Ay(p,e,v)}))),o)}});var dx=Mp({gramSchmidt_:function(e){var t;if(Array.isArray(e)){t=!1,kc(null!=e&&e.length>0,(function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"}));for(var n=e[0].shape[0],r=function(t){kc(e[t].shape[0]===n,(function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: "+"(".concat(e[t].shape[0]," vs. ").concat(n,")")}))},a=1;a<e.length;++a)r(a)}else t=!0,e=zk(e,e.shape[0],0).map((function(e){return Uk(e,[0])}));kc(e.length<=e[0].shape[0],(function(){return"Gram-Schmidt: Number of vectors (".concat(e.length,") exceeds ")+"number of dimensions (".concat(e[0].shape[0],").")}));for(var i=[],o=e,s=function(e){i.push(Ep.tidy((function(){var t=o[e];if(e>0)for(var n=0;n<e;++n){var r=lm(Hy(lm(i[n],t)),i[n]);t=Sm(t,r)}return cm(t,$y(t,"euclidean"))})))},u=0;u<e.length;++u)s(u);return t?Wk(i,0):i}});function fx(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Ep.tidy((function(){kc(2===e.shape.length,(function(){return"qr2d() requires a 2D Tensor, but got a ".concat(e.shape.length,"D Tensor.")}));for(var n=e.shape[0],r=e.shape[1],a=eb(n),i=Jv(e),o=$k([[1]],[1,1]),s=Jv(o),u=n>=r?r:n,c=function(e){var t=i,u=s,c=a,l=Ep.tidy((function(){var t=Yg(i,[e,e],[n-e,1]),u=$y(t),c=Yg(i,[e,e],[1,1]),l=Ay(rb(c,0),$k([[-1]]),$k([[1]])),d=Sm(c,lm(l,u)),f=cm(t,d);s=1===f.shape[0]?Jv(o):$g([o,Yg(f,[1,0],[f.shape[0]-1,f.shape[1]])],0);var h=mb(cm(Kg(l,d),u)),p=Yg(i,[e,0],[n-e,r]),v=lm(h,s),m=hw(s);if(0===e)i=Sm(p,Kg(v,Kg(m,p)));else{var g=Sm(p,Kg(v,Kg(m,p)));i=$g([Yg(i,[0,0],[e,r]),g],0)}var y=hw(v),b=Yg(a,[0,e],[n,a.shape[1]-e]);if(0===e)a=Sm(b,Kg(Kg(b,s),y));else{var k=Sm(b,Kg(Kg(b,s),y));a=$g([Yg(a,[0,0],[n,e]),k],1)}return[s,i,a]})),d=(0,ge.Z)(l,3);s=d[0],i=d[1],a=d[2],am([t,u,c])},l=0;l<u;++l)c(l);return!t&&n>r&&(a=Yg(a,[0,0],[n,r]),i=Yg(i,[0,0],[r,r])),[a,i]}))}var hx,px=Mp({qr_:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(kc(e.rank>=2,(function(){return"qr() requires input tensor to have a rank >= 2, but got rank ".concat(e.rank)})),2===e.rank)return fx(e,t);var n=e.shape.slice(0,e.shape.length-2).reduce((function(e,t){return e*t})),r=iw(Gg(e,[n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),a=[],i=[];return r.forEach((function(e){var n=fx(e,t),r=(0,ge.Z)(n,2),o=r[0],s=r[1];a.push(o),i.push(s)})),[Gg(Wk(a,0),e.shape),Gg(Wk(i,0),e.shape)]}});!function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(hx||(hx={}));var vx=Mp({computeWeightedLoss_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:hx.SUM_BY_NONZERO_WEIGHTS,r=Op(e,"losses","computeWeightedLoss"),a=null;null!=t&&(a=Op(t,"weights","computeWeightedLoss"));var i=null==a?r:lm(r,a);if(n===hx.NONE)return i;if(n===hx.SUM)return Hy(i);if(n===hx.MEAN){if(null==a)return Ab(i);var o=r.size/a.size,s=cm(Hy(i),Hy(a));return o>1?cm(s,vm(o)):s}if(n===hx.SUM_BY_NONZERO_WEIGHTS){if(null==a)return cm(Hy(i),vm(r.size));var u=lm(a,Db(r.shape)),c=Qv(Hy(Vb(u,vm(0))),"float32");return cm(Hy(i),c)}throw Error("Unknown reduction: ".concat(n))}});var mx=Mp({absoluteDifference_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:hx.SUM_BY_NONZERO_WEIGHTS,a=Op(e,"labels","absoluteDifference"),i=Op(t,"predictions","absoluteDifference"),o=null;null!=n&&(o=Op(n,"weights","absoluteDifference")),wc(a.shape,i.shape,"Error in absoluteDifference: ");var s=Em(Sm(a,i));return vx(s,o,r)}});var gx=Mp({cosineDistance_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:hx.SUM_BY_NONZERO_WEIGHTS,i=Op(e,"labels","cosineDistance"),o=Op(t,"predictions","cosineDistance"),s=null;null!=r&&(s=Op(r,"weights","cosineDistance")),wc(i.shape,o.shape,"Error in cosineDistance: ");var u=vm(1),c=Sm(u,Hy(lm(i,o),n,!0));return vx(c,s,a)}});var yx=Mp({hingeLoss_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:hx.SUM_BY_NONZERO_WEIGHTS,a=Op(e,"labels","hingeLoss"),i=Op(t,"predictions","hingeLoss"),o=null;null!=n&&(o=Op(n,"weights","hingeLoss")),wc(a.shape,i.shape,"Error in hingeLoss: ");var s=vm(1);a=Sm(lm(vm(2),a),s);var u=vk(Sm(s,lm(a,i)));return vx(u,o,r)}});var bx=Mp({huberLoss_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:hx.SUM_BY_NONZERO_WEIGHTS,i=Op(e,"labels","huberLoss"),o=Op(t,"predictions","huberLoss"),s=null;null!=n&&(s=Op(n,"weights","huberLoss")),wc(i.shape,o.shape,"Error in huberLoss: ");var u=vm(r),c=Em(Sm(o,i)),l=Lb(c,u),d=Sm(c,l),f=sm(lm(vm(.5),fm(l)),lm(u,d));return vx(f,s,a)}});var kx=Mp({logLoss_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-7,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:hx.SUM_BY_NONZERO_WEIGHTS,i=Op(e,"labels","logLoss"),o=Op(t,"predictions","logLoss"),s=null;null!=n&&(s=Op(n,"weights","logLoss")),wc(i.shape,o.shape,"Error in logLoss: ");var u=vm(1),c=vm(r),l=mb(lm(i,pb(sm(o,c)))),d=lm(Sm(u,i),pb(sm(Sm(u,o),c))),f=Sm(l,d);return vx(f,s,a)}});var wx=Mp({meanSquaredError_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:hx.SUM_BY_NONZERO_WEIGHTS,a=Op(e,"labels","meanSquaredError"),i=Op(t,"predictions","meanSquaredError"),o=null;null!=n&&(o=Op(n,"weights","meanSquaredError")),wc(a.shape,i.shape,"Error in meanSquaredError: ");var s=Vk(a,i);return vx(s,o,r)}});var xx=Mp({sigmoidCrossEntropy_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:hx.SUM_BY_NONZERO_WEIGHTS,i=Op(e,"multiClassLabels","sigmoidCrossEntropy"),o=Op(t,"logits","sigmoidCrossEntropy"),s=null;if(null!=n&&(s=Op(n,"weights","sigmoidCrossEntropy")),wc(i.shape,o.shape,"Error in sigmoidCrossEntropy: "),r>0){var u=vm(r),c=vm(1),l=vm(.5);i=sm(lm(i,Sm(c,u)),lm(l,u))}var d=function(e,t){var n=Op(e,"labels","sigmoidCrossEntropyWithLogits"),r=Op(t,"logits","sigmoidCrossEntropyWithLogits");wc(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");var a=vk(r),i=lm(r,n),o=vb(Xy(mb(Em(r))));return sm(Sm(a,i),o)}(i,o);return vx(d,s,a)}});var Ix=Mp({softmaxCrossEntropy_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:hx.SUM_BY_NONZERO_WEIGHTS,i=Op(e,"onehotLabels","softmaxCrossEntropy"),o=Op(t,"logits","softmaxCrossEntropy"),s=null;if(null!=n&&(s=Op(n,"weights","softmaxCrossEntropy")),wc(i.shape,o.shape,"Error in softmaxCrossEntropy: "),r>0){var u=vm(r),c=vm(1),l=vm(i.shape[1]);i=sm(lm(i,Sm(c,u)),cm(u,l))}var d=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(-1===n&&(n=t.rank-1),n!==t.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet "+"supported. Labels / logits was rank ".concat(t.rank," ")+"and dim was ".concat(n));var r=pm((function(e,t,r){var a=kb(t,[n],!0),i=Sm(Qv(t,"float32"),a);r([e,i]);var o=mb(lm(i,e));return{value:Hy(o,[n]),gradFunc:function(e,t){var r=(0,ge.Z)(t,2),a=r[0],i=r[1],o=zy(e.shape,[n]);return[lm(Gg(e,o),Sm(Qv(a,"float32"),Xy(i))),lm(Gg(e,o),Sm(Xy(i),Qv(a,"float32")))]}}}));return r(e,t)}(i,o);return vx(d,s,a)}});var Sx=Mp({sparseFillEmptyRows_:function(e,t,n,r){var a=Op(e,"indices","sparseFillEmptyRows","int32"),i=Op(t,"values","sparseFillEmptyRows"),o=Op(n,"denseShape","sparseFillEmptyRows","int32"),s=Op(r,"defaultValue","sparseFillEmptyRows",i.dtype);if(2!==a.rank)throw new Error("Indices should be Tensor2D but received shape\n        ".concat(a.shape));if(1!==i.rank)throw new Error("Values should be Tensor1D but received shape ".concat(i.shape));if(1!==o.rank)throw new Error("Dense shape should be Tensor1D but received shape ".concat(o.shape));if(0!==s.rank)throw new Error("Default value should be a scalar but received shape ".concat(s.shape));var u={indices:a,values:i,denseShape:o,defaultValue:s},c=Ep.runKernel(Bf,u);return{outputIndices:c[0],outputValues:c[1],emptyRowIndicator:c[2],reverseIndexMap:c[3]}}});var Tx=Mp({sparseReshape_:function(e,t,n){var r=Op(e,"inputIndices","sparseReshape","int32"),a=Op(t,"inputShape","sparseReshape","int32"),i=Op(n,"newShape","sparseReshape","int32");if(2!==r.rank)throw new Error("Input indices should be Tensor2D but received shape\n        ".concat(r.shape));if(1!==a.rank)throw new Error("Input shape should be Tensor1D but received shape ".concat(a.shape));if(1!==i.rank)throw new Error("New shape should be Tensor1D but received shape ".concat(i.shape));var o={inputIndices:r,inputShape:a,newShape:i},s=Ep.runKernel(Vf,o);return{outputIndices:s[0],outputShape:s[1]}}});var Ex=Mp({sparseSegmentMean_:function(e,t,n){var r=Op(e,"data","sparseSegmentMean"),a=Op(t,"indices","sparseSegmentMean","int32"),i=Op(n,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.rank)throw new Error("Indices should be Tensor1D but received shape\n          ".concat(a.shape));if(1!==i.rank)throw new Error("Segment ids should be Tensor1D but received shape\n          ".concat(i.shape));var o={data:r,indices:a,segmentIds:i};return Ep.runKernel(Uf,o)}});var Nx=Mp({sparseSegmentSum_:function(e,t,n){var r=Op(e,"data","sparseSegmentSum"),a=Op(t,"indices","sparseSegmentSum","int32"),i=Op(n,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.rank)throw new Error("Indices should be Tensor1D but received shape\n         ".concat(a.shape));if(1!==i.rank)throw new Error("Segment ids should be Tensor1D but received shape\n         ".concat(i.shape));var o={data:r,indices:a,segmentIds:i};return Ep.runKernel(Wf,o)}});var Cx=Mp({stringNGrams_:function(e,t,n,r,a,i,o,s){var u=Op(e,"data","stringNGrams","string");if("string"!==u.dtype)throw new Error("Data must be of datatype string");if(1!==u.shape.length)throw new Error("Data must be a vector, saw: ".concat(u.shape));var c=Op(t,"dataSplits","stringNGrams");if("int32"!==c.dtype)throw new Error("Data splits must be of datatype int32");var l={separator:n,nGramWidths:r,leftPad:a,rightPad:i,padWidth:o,preserveShortSequences:s},d={data:u,dataSplits:c},f=Ep.runKernel(Kf,d,l);return{nGrams:f[0],nGramsSplits:f[1]}}});var Zx=Mp({stringSplit_:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=Op(e,"input","stringSplit","string"),a=Op(t,"delimiter","stringSplit","string");if(1!==r.rank)throw new Error("Input should be Tensor1D but received shape ".concat(r.shape));if(0!==a.rank)throw new Error("Delimiter should be a scalar but received shape ".concat(a.shape));var i={skipEmpty:n},o={input:r,delimiter:a},s=Ep.runKernel(Xf,o,i);return{indices:s[0],values:s[1],shape:s[2]}}});var _x=Mp({stringToHashBucketFast_:function(e,t){var n=Op(e,"input","stringToHashBucketFast","string"),r={numBuckets:t};if(t<=0)throw new Error("Number of buckets must be at least 1");var a={input:n};return Ep.runKernel(Yf,a,r)}});var Ax,Rx=Mp({staticRegexReplace_:function(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=Op(e,"input","staticRegexReplace","string"),i={pattern:t,rewrite:n,replaceGlobal:r};return Ep.runKernel(qf,{x:a},i)}}),Dx={fft:Fk,ifft:Mk,rfft:Bk,irfft:Pk},Ox={hammingWindow:Dw,hannWindow:Ow,frame:Lw,stft:Fw},Lx={flipLeftRight:Pw,grayscaleToRGB:zw,resizeNearestNeighbor:sx,resizeBilinear:ox,rotateWithOffset:Bw,cropAndResize:Mw,nonMaxSuppression:Uw,nonMaxSuppressionAsync:Jw,nonMaxSuppressionWithScore:ex,nonMaxSuppressionWithScoreAsync:nx,nonMaxSuppressionPadded:rx,nonMaxSuppressionPaddedAsync:ix,threshold:ux,transform:cx},Fx={bandPart:lx,gramSchmidt:dx,qr:px},Mx={absoluteDifference:mx,computeWeightedLoss:vx,cosineDistance:gx,hingeLoss:yx,huberLoss:bx,logLoss:kx,meanSquaredError:wx,sigmoidCrossEntropy:xx,softmaxCrossEntropy:Ix},Px={sparseFillEmptyRows:Sx,sparseReshape:Tx,sparseSegmentMean:Ex,sparseSegmentSum:Nx},zx={stringNGrams:Cx,stringSplit:Zx,stringToHashBucketFast:_x,staticRegexReplace:Rx},Bx=function(){function e(){(0,Se.Z)(this,e)}return(0,Te.Z)(e,null,[{key:"sgd",value:function(e){return new Rm(e)}},{key:"momentum",value:function(e,t){return new Dm(e,t,arguments.length>2&&void 0!==arguments[2]&&arguments[2])}},{key:"rmsprop",value:function(e){return new Om(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,arguments.length>4&&void 0!==arguments[4]&&arguments[4])}},{key:"adam",value:function(){return new Tm(arguments.length>0&&void 0!==arguments[0]?arguments[0]:.001,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,arguments.length>2&&void 0!==arguments[2]?arguments[2]:.999,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null)}},{key:"adadelta",value:function(){return new km(arguments.length>0&&void 0!==arguments[0]?arguments[0]:.001,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.95,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}},{key:"adamax",value:function(){return new Am(arguments.length>0&&void 0!==arguments[0]?arguments[0]:.002,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,arguments.length>2&&void 0!==arguments[2]?arguments[2]:.999,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,arguments.length>4&&void 0!==arguments[4]?arguments[4]:0)}},{key:"adagrad",value:function(e){return new xm(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1)}}]),e}(),Vx=Bx,Ux="undefined"!==typeof requestAnimationFrame?requestAnimationFrame:"undefined"!==typeof setImmediate?setImmediate:function(e){return e()};function Wx(){return new Promise((function(e){return Ux((function(){return e()}))}))}function jx(e,t){var n=e[0].length;e.forEach((function(e,t){kc(e.length===n,(function(){return"Error in concat".concat(n,"D: rank of tensors[").concat(t,"] must be the same ")+"as the rank of the rest (".concat(n,")")}))})),kc(t>=0&&t<n,(function(){return"Error in concat".concat(n,"D: axis must be between 0 and ").concat(n-1,".")}));var r=e[0];e.forEach((function(e,a){for(var i=0;i<n;i++)kc(i===t||e[i]===r[i],(function(){return"Error in concat".concat(n,"D: Shape of tensors[").concat(a,"] (").concat(e,") ")+"does not match the shape of the rest (".concat(r,") ")+"along the non-concatenated axis ".concat(a,".")}))}))}function Gx(e,t){for(var n=e[0].slice(),r=1;r<e.length;r++)n[t]+=e[r][t];return n}!function(e){e[e.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",e[e.VALUE_ROWIDS=1]="VALUE_ROWIDS",e[e.ROW_LENGTHS=2]="ROW_LENGTHS",e[e.ROW_SPLITS=3]="ROW_SPLITS",e[e.ROW_LIMITS=4]="ROW_LIMITS",e[e.ROW_STARTS=5]="ROW_STARTS"}(Ax||(Ax={}));var Hx=30;function qx(e){return e<=Hx?e:Bc(e,Math.floor(Math.sqrt(e)))}function $x(e,t,n){return[n*("number"===typeof e?e:e[0]),t*("number"===typeof e?e:e[1])]}function Kx(e,t,n){var r=[];if(!(arguments.length>3&&void 0!==arguments[3])||arguments[3])(r=r.concat(t.slice(0))).push(e[0]/n),r=r.concat(e.slice(1));else{r=r.concat(e[0]);for(var a=t.length,i=0;i<a;++i)r=r.concat([e[i+1]/t[i],t[i]]);r=r.concat(e.slice(a+1))}return r}function Xx(e,t){var n=[];if(!(arguments.length>2&&void 0!==arguments[2])||arguments[2]){n.push(t);for(var r=t+1;r<e;++r)r<=2*t?(n.push(r),n.push(r-(t+1))):n.push(r)}else{for(var a=[],i=[],o=1;o<e;++o)o>=2*t+1||o%2===1?i.push(o):a.push(o);n.push.apply(n,a),n.push(0),n.push.apply(n,i)}return n}function Yx(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=[];r?a.push(e[0]/n):a.push(e[0]*n);for(var i=1;i<e.length;++i)i<=t.length?r?a.push(t[i-1]*e[i]):a.push(e[i]/t[i-1]):a.push(e[i]);return a}function Qx(e,t){for(var n=[0],r=0;r<t;++r)n.push(e[r][0]);return n}function Jx(e,t,n){for(var r=e.slice(0,1),a=0;a<n;++a)r.push(e[a+1]-t[a][0]-t[a][1]);return r}function eI(e,t){var n=e.shape.length,r=t.shape.length;if(n<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher,"+" but the rank was ".concat(n,"."));if(r<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher,"+" but the rank was ".concat(r,"."));if("int32"!==t.dtype)throw new Error("tf.gatherND() expects the indices to be int32 type,"+" but the dtype was ".concat(t.dtype,"."));if(t.shape[r-1]>n)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+"".concat(t.shape[r-1]," vs. ").concat(n));if(0===Ic(e.shape))throw new Error("Requested more than 0 entries, but input is empty."+" Input shape: ".concat(e.shape,"."));for(var a=t.shape,i=a[a.length-1],o=1,s=0;s<a.length-1;++s)o*=a[s];var u=e.shape,c=a.slice();c.pop();for(var l=1,d=i;d<n;++d)l*=u[d],c.push(u[d]);var f=[].concat((0,me.Z)(Vc(e.shape).map((function(e){return e/l}))),[1]).slice(0,i);return[c,o,l,f]}var tI=1.7580993408473768,nI=1.0507009873554805,rI=.3275911,aI=.254829592,iI=-.284496736,oI=1.421413741,sI=-1.453152027,uI=1.061405429;function cI(e,t){if(e.length!==t.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+"".concat(e.length,", imag: ").concat(t.length,"."));for(var n=new Float32Array(2*e.length),r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function lI(e,t){return{real:e[2*t],imag:e[2*t+1]}}function dI(e,t,n,r){e[2*r]=t,e[2*r+1]=n}function fI(e,t,n){var r=(n?2:-2)*Math.PI*(e/t);return{real:Math.cos(r),imag:Math.sin(r)}}var hI="->",pI=/->/g,vI=",",mI="...";function gI(e,t){var n=((e=e.replace(/\s/g,"")).length-e.replace(pI,"").length)/hI.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error('Equation must contain exactly one arrow ("'.concat(hI,'").'));var r=e.split(hI),a=(0,ge.Z)(r,2),i=a[0],o=a[1];kc(-1===i.indexOf(mI),(function(){return'The ellipsis notation ("'.concat(mI,'") is not supported yet.')}));var s=i.split(vI),u=s.length;if(t!==u)throw new Error("Expected ".concat(u," input tensors, received ").concat(t));if(u>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");for(var c=[],l=function(){var e=o[d];if(!s.some((function(t){return-1!==t.indexOf(e)})))throw new Error("Output subscripts contain the label ".concat(e," ")+"not present in the input subscripts.");-1===c.indexOf(e)&&c.push(e)},d=0;d<o.length;++d)l();for(var f=0;f<i.length;++f){var h=i[f];-1===c.indexOf(h)&&h!==vI&&c.push(h)}for(var p=new Array(s.length),v=0;v<u;++v){if(new Set(s[v].split("")).size!==s[v].length)throw new Error("Found duplicate axes in input component ".concat(s[v],". ")+"Support for duplicate axes in input is not implemented yet.");p[v]=[];for(var m=0;m<s[v].length;++m)p[v].push(c.indexOf(s[v][m]))}for(var g=c.length,y=[],b=o.length;b<g;++b)y.push(b);return{allDims:c,summedDims:y,idDims:p}}function yI(e,t){var n=new Array(e);n.fill(-1);for(var r=0;r<t.length;++r)n[t[r]]=r;for(var a=[],i=0;i<e;++i)-1===n[i]&&a.push(i);return{permutationIndices:n=n.filter((function(e){return-1!==e})),expandDims:a}}function bI(e,t,n){for(var r=new Array(e),a=function(e){for(var a=n[e].shape,i=function(n){void 0===r[t[e][n]]?r[t[e][n]]=a[n]:kc(r[t[e][n]]===a[n],(function(){return"Expected dimension ".concat(r[t[e][n]]," at axis ").concat(n," ")+"of input shaped ".concat(JSON.stringify(a),", ")+"but got dimension ".concat(a[n])}))},o=0;o<t[e].length;++o)i(o)},i=0;i<n.length;++i)a(i)}function kI(e,t){var n,r=e,a=[];0===e.length&&r.push(-1),n=e.length+1;for(var i=0;i<n;++i)a.push([]);for(var o=[],s=0;s<r.length;++s){var u,c=xI(t,r[s]),l=(0,Ht.Z)(c);try{for(l.s();!(u=l.n()).done;){var d=u.value;-1===o.indexOf(d)&&(a[s].push(d),o.push(d))}}catch(yhe){l.e(yhe)}finally{l.f()}}return{path:r,steps:a}}function wI(e){return e.every((function(e,t){return e===t}))}function xI(e,t){for(var n=[],r=0;r<e.length;++r)0!==e[r].length&&-1===e[r].indexOf(t)&&-1!==t||n.push(r);return n}function II(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[];if("number"===typeof t)kc(e.shape[n]%t===0,(function(){return"Number of splits must evenly divide the axis."})),r=new Array(t).fill(e.shape[n]/t);else{var a=t.reduce((function(e,t){return-1===t&&(e+=1),e}),0);kc(a<=1,(function(){return"There should be only one negative value in split array."}));var i=t.indexOf(-1);if(-1!==i){var o=t.reduce((function(e,t){return t>0?e+t:e}));t[i]=e.shape[n]-o}kc(e.shape[n]===t.reduce((function(e,t){return e+t})),(function(){return"The sum of sizes must match the size of the axis dimension."})),r=t}return r}function SI(e,t,n){return"indices(".concat(e,", 0) is invalid: ").concat(t," >= ").concat(n)}function TI(e,t){return"Segment id ".concat(e," out of range [0, ").concat(t,"), possibly because segmentIds input is not sorted.")}function EI(e,t,n){return"Bad: indices[".concat(e,"] == ").concat(t," out of range [0, ").concat(n,")")}function NI(e,t,n,r){var a=t.shape.length,i=e.shape.length;if(0!==r&&(r<-a||r>a))throw new Error("Expect batchDims in the range of [-".concat(a,", ").concat(a,"], but got ").concat(r));if(r<0&&(r+=a),r>i)throw new Error("batchDims (".concat(r,") must be less than rank(x) (\n    ").concat(i,")."));if(n<r)throw new Error("batchDims (".concat(r,") must be less than or equal to axis (").concat(n,")."));for(var o=0;o<r;++o)if(e.shape[o]!==t.shape[o])throw new Error("x.shape[".concat(o,"]: ").concat(e.shape[o]," should be equal to indices.shape[").concat(o,"]: ").concat(t.shape[o],"."));for(var s=e.shape[n],u=[],c=1,l=1,d=1,f=0;f<r;++f)u.push(e.shape[f]),c*=e.shape[f];for(var h=r;h<n;h++)u.push(e.shape[h]),l*=e.shape[h];for(var p=r;p<a;p++)u.push(t.shape[p]);for(var v=n+1;v<i;v++)u.push(e.shape[v]),d*=e.shape[v];return{batchSize:c,sliceSize:d,outerSize:l,dimSize:s,outputShape:u}}function CI(e){try{return e.map((function(e){return Uh(e)}))}catch(yhe){throw new Error("Failed to decode encoded string bytes into utf-8, error: ".concat(yhe))}}!function(){var e,t=(0,Ht.Z)(Lm);try{for(t.s();!(e=t.n()).done;){ym(e.value)}}catch(yhe){t.e(yhe)}finally{t.f()}}();var ZI={kernelName:il,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,ge.Z)(t,1)[0];return{x:function(){return lm(e,jk(Qv(n,"float32"),-1))}}}},_I={kernelName:ol,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,ge.Z)(t,1)[0];return{x:function(){var t=fm(Qv(n,"float32")),r=dm(Sm(vm(1),t));return mb(cm(e,r))}}}},AI={kernelName:sl,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,ge.Z)(t,1)[0];return{x:function(){var t=dm(Sm(fm(Qv(n,"float32")),1));return cm(e,t)}}}},RI={kernelName:ul,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,ge.Z)(t,2),r=n[0],a=n[1],i=Zm(r.shape,a.shape);return{a:function(){var t=e,n=Cm(r.shape,i);return n.length>0&&(t=Hy(t,n)),Gg(t,r.shape)},b:function(){var t=e,n=Cm(a.shape,i);return n.length>0&&(t=Hy(t,n)),Gg(t,a.shape)}}}},DI={kernelName:cl,saveAllInputs:!0,gradFunc:function(e,t){var n={};return t.forEach((function(t,r){n[r]=function(){return e.clone()}})),n}},OI={kernelName:fl,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,ge.Z)(t,1)[0];return{x:function(){return hm(n)}}}},LI={kernelName:hl,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,ge.Z)(t,1)[0];return{x:function(){return hm(n)}}}},FI={kernelName:pl,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,ge.Z)(t,1)[0];return{x:function(){return cm(e,dm(Sm(vm(1),fm(Qv(n,"float32")))))}}}},MI={kernelName:vl,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,ge.Z)(t,1)[0];return{x:function(){var t=dm(sm(vm(1),fm(Qv(n,"float32"))));return cm(e,t)}}}},PI={kernelName:yl,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,ge.Z)(t,2),r=n[0],a=n[1],i=Zm(r.shape,a.shape);return{a:function(){var t=sm(fm(r),fm(a)),n=lm(e,cm(a,t)),o=Cm(r.shape,i);return o.length>0&&(n=Hy(n,o)),Gg(n,r.shape)},b:function(){var t=sm(fm(r),fm(a)),n=mb(lm(e,cm(r,t))),o=Cm(a.shape,i);return o.length>0&&(n=Hy(n,o)),Gg(n,a.shape)}}}},zI={kernelName:ml,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,ge.Z)(t,1)[0];return{x:function(){return cm(e,sm(fm(Qv(n,"float32")),1))}}}},BI={kernelName:gl,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,ge.Z)(t,1)[0];return{x:function(){return cm(e,Sm(vm(1),fm(Qv(n,"float32"))))}}}};var VI=Mp({avgPool3dGrad_:function(e,t,n,r,a,i){var o=Op(e,"dy","avgPool3dGrad"),s=Op(t,"input","avgPool3dGrad"),u=o,c=s,l=!1;4===s.rank&&(l=!0,u=Gg(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]]),c=Gg(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),kc(5===u.rank,(function(){return"Error in avgPool3dGrad: dy must be rank 5 but got rank "+"".concat(u.rank,".")})),kc(5===c.rank,(function(){return"Error in avgPool3dGrad: input must be rank 5 but got rank "+"".concat(c.rank,".")})),jg("avgPool3dGrad",a,i);var d={dy:u,input:c},f={filterSize:n,strides:r,pad:a,dimRoundingMode:i},h=Ep.runKernel(xl,d,f);return l?Gg(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}}),UI={kernelName:wl,inputsToSave:["x"],gradFunc:function(e,t,n){var r=(0,ge.Z)(t,1)[0],a=n.filterSize,i=n.strides,o=n.pad,s=n.dimRoundingMode;return{x:function(){return VI(e,r,a,i,o,s)}}}};var WI=Mp({avgPoolGrad_:function(e,t,n,r,a){var i=Op(e,"dy","avgPoolGrad"),o=Op(t,"input","avgPoolGrad");kc(o.rank===i.rank,(function(){return"Rank of input (".concat(o.rank,") does not match rank of dy (").concat(i.rank,")")}));var s=o,u=i,c=!1;3===o.rank&&(c=!0,s=Gg(o,[1,o.shape[0],o.shape[1],o.shape[2]]),u=Gg(i,[1,i.shape[0],i.shape[1],i.shape[2]])),kc(4===u.rank,(function(){return"Error in avgPoolGrad: dy must be rank 4 but got rank "+"".concat(u.rank,".")})),kc(4===s.rank,(function(){return"Error in avgPoolGrad: input must be rank 4 but got rank "+"".concat(s.rank,".")}));var l={dy:u,input:s},d={filterSize:n,strides:r,pad:a},f=Ep.runKernel(kl,l,d);return c?Gg(f,[f.shape[1],f.shape[2],f.shape[3]]):f}}),jI={kernelName:bl,inputsToSave:["x"],gradFunc:function(e,t,n){var r=(0,ge.Z)(t,1)[0],a=n.filterSize,i=n.strides,o=n.pad;return{x:function(){return WI(e,r,a,i,o)}}}},GI={kernelName:Il,inputsToSave:["a","b"],gradFunc:function(e,t,n){var r=(0,ge.Z)(t,2),a=r[0],i=r[1],o=n.transposeA,s=n.transposeB;return o||s?!o&&s?{a:function(){return Kg(e,i,!1,!1)},b:function(){return Kg(e,a,!0,!1)}}:o&&!s?{a:function(){return Kg(i,e,!1,!0)},b:function(){return Kg(a,e,!1,!1)}}:{a:function(){return Kg(i,e,!0,!0)},b:function(){return Kg(e,a,!0,!0)}}:{a:function(){return Kg(e,i,!1,!0)},b:function(){return Kg(a,e,!0,!1)}}}},HI={kernelName:Sl,gradFunc:function(e,t,n){var r=n.blockShape,a=n.crops;return{x:function(){return Xb(e,r,a)}}}},qI={kernelName:"BroadcastTo",gradFunc:function(e,t,n){for(var r=n,a=r.inputShape,i=r.shape,o=Array.from(i),s=a.length-1;s>=0;s--)if(a[s]===i[s])o[s]=1;else if(1!==a[s])throw new Error("broadcastTo(): [".concat(a,"] cannot be broadcast to [").concat(i,"]."));for(var u=[],c=0;c<o.length;c++)o[c]>1&&u.push(c);return{x:function(){return Hy(e,u,!0)}}}},$I={kernelName:Nl,gradFunc:function(e){return{x:function(){return e.clone()}}}},KI={kernelName:Cl,gradFunc:function(e){return{x:function(){return hm(e)}}}},XI={kernelName:Zl,inputsToSave:["x"],gradFunc:function(e,t,n){var r=(0,ge.Z)(t,1)[0],a=n.clipValueMin,i=n.clipValueMax;return{x:function(){return Ay(wb(ab(r,a),db(r,i)),e,hm(e))}}}},YI={kernelName:Al,inputsToSave:["x"],gradFunc:ZI.gradFunc},QI={kernelName:Rl,saveAllInputs:!0,gradFunc:function(e,t,n){var r=t.map((function(e){return e.shape})),a=_c(n.axis,t[0].shape)[0],i=r.map((function(e){return e[a]}));return zk(e,i,a).map((function(e){return function(){return e}}))}},JI={kernelName:Dl,inputsToSave:["x","filter"],gradFunc:function(e,t,n){var r=(0,ge.Z)(t,2),a=r[0],i=r[1],o=n.dilations,s=n.strides,u=n.pad,c=n.dataFormat;return kc(Bg(o),(function(){return"Error in gradient of conv2D: dilation rates greater than 1 "+"are not yet supported in gradients. Got dilations '".concat(o,"'")})),{x:function(){return my(a.shape,e,i,s,u,c)},filter:function(){return Iw(a,e,i.shape,s,u,c)}}}},eS={kernelName:Ll,inputsToSave:["dy","filter"],gradFunc:function(e,t,n){var r=(0,ge.Z)(t,2),a=r[0],i=r[1],o=n.strides,s=n.pad,u=n.dataFormat,c=n.dimRoundingMode;return{dy:function(){return py(e,i,o,s,u,1,c)},filter:function(){return Iw(e,a,i.shape,o,s,u,c)}}}};var tS=Mp({conv3DBackpropFilter_:function(e,t,n,r,a){var i=e;4===e.rank&&(i=Gg(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]));var o=t;4===o.rank&&(o=Gg(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]])),kc(5===i.rank,(function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+"".concat(i.shape,".")})),kc(5===o.rank,(function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+"".concat(o.shape,".")})),kc(5===n.length,(function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+"".concat(n,".")})),kc(i.shape[4]===n[3],(function(){return"Error in conv3dDerFilter: depth of input ".concat(i.shape[4],") must ")+"match input depth in filter (".concat(n[3],".")})),kc(o.shape[4]===n[4],(function(){return"Error in conv3dDerFilter: depth of dy (".concat(o.shape[4],") must ")+"match output depth for filter (".concat(n[4],").")}));var s={x:i,dy:o},u={strides:r,pad:a,filterShape:n};return Ep.runKernel(Ml,s,u)}}),nS={kernelName:Fl,inputsToSave:["x","filter"],gradFunc:function(e,t,n){var r=n.dilations,a=n.strides,i=n.pad;kc(Bg(r),(function(){return"Error in gradient of conv3D: dilation rates greater than 1 are "+"not yet supported in gradients. Got dilations '".concat(r,"'")}));var o=(0,ge.Z)(t,2),s=o[0],u=o[1];return{x:function(){return by(s.shape,e,u,a,i)},filter:function(){return tS(s,e,u.shape,a,i)}}}},rS={kernelName:zl,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,ge.Z)(t,1)[0];return{x:function(){return lm(mb(Zk(Qv(n,"float32"))),e)}}}},aS={kernelName:Bl,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,ge.Z)(t,1)[0];return{x:function(){return lm(_k(Qv(n,"float32")),e)}}}},iS={kernelName:Ul,inputsToSave:["x"],gradFunc:function(e,t,n){var r=(0,ge.Z)(t,1)[0],a=n.axis,i=n.exclusive,o=n.reverse;return{x:function(){var t=Vy([a],r.rank),n=Sy(e,a,i,!o);return null!=t&&(n=hw(n,t)),n}}}},oS={kernelName:Hl,inputsToSave:["x","filter"],gradFunc:function(e,t,n){var r=n.dilations,a=n.strides,i=n.pad,o=n.dimRoundingMode,s=null==r?[1,1]:r;kc(Bg(s),(function(){return"Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations "+"'".concat(s,"'")}));var u=(0,ge.Z)(t,2),c=u[0],l=u[1];return kc(4===c.rank,(function(){return"Error in gradient of depthwiseConv2dNative: input must be "+"rank 4, but got rank ".concat(c.rank,".")})),kc(4===l.rank,(function(){return"Error in gradient of depthwiseConv2dNative: filter must be "+"rank 4, but got rank ".concat(l.rank,".")})),kc(c.shape[3]===l.shape[2],(function(){return"Error in gradient of depthwiseConv2d: number of input "+"channels (".concat(c.shape[3],") must match the inChannels dimension ")+"in filter ".concat(l.shape[2],".")})),kc(Vg(a,s),(function(){return"Error in gradient of depthwiseConv2d: Either strides or "+"dilations must be  1. Got strides ".concat(a," and dilations ")+"'".concat(s,"'.")})),jg("depthwiseConv2d",i,o),{x:function(){return _w(c.shape,e,l,a,i,s,o)},filter:function(){return Zw(c,e,l.shape,a,i,s,o)}}}},sS={kernelName:Xl,inputsToSave:["x","filter"],gradFunc:function(e,t,n){var r=(0,ge.Z)(t,2),a=r[0],i=r[1],o={x:a,filter:i,dy:e},s={x:a,filter:i,dy:e};return{x:function(){return Ep.runKernel(Yl,o,n)},filter:function(){return Ep.runKernel(Ql,s,n)}}}},uS={kernelName:td,outputsToSave:[!0],gradFunc:function(e,t){var n={dy:e,y:(0,ge.Z)(t,1)[0]};return{x:function(){return Ep.runKernel(nd,n)}}}},cS={kernelName:rd,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,ge.Z)(t,1)[0],r=lm(Xy(mb(fm(n))),2/Math.sqrt(Math.PI));return{x:function(){return lm(e,r)}}}},lS={kernelName:id,outputsToSave:[!0],gradFunc:function(e,t){var n=(0,ge.Z)(t,1)[0];return{x:function(){return lm(e,n)}}}},dS={kernelName:od,inputsToSave:["input"],gradFunc:function(e,t){var n=(0,ge.Z)(t,1)[0];return{input:function(){return Gg(e,n.shape)}}}},fS={kernelName:sd,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,ge.Z)(t,1)[0];return{x:function(){return lm(e,Xy(n))}}}},hS={kernelName:dd,gradFunc:function(e){return{x:function(){return hm(e)}}}},pS={kernelName:fd,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,ge.Z)(t,2),r=n[0],a=n[1],i=Zm(r.shape,a.shape);return{a:function(){var t=cm(e,Qv(a,"float32")),n=Cm(r.shape,i);return n.length>0?Gg(Hy(t,n),r.shape):t},b:function(){var t=lm(e,Qv(r,"float32")),n=Cm(a.shape,i);n.length>0&&(t=Gg(Hy(t,n),a.shape));var o=fm(a);return mb(cm(t,Qv(o,"float32")))}}}},vS={kernelName:hd,inputsToSave:["x","mean","variance","scale"],gradFunc:function(e,t,n){var r=n.varianceEpsilon,a=(0,ge.Z)(t,4),i=a[0],o=a[1],s=a[2],u=a[3],c=null==u?vm(1):u,l=Cm(o.shape,i.shape),d=[];if(1===o.rank){for(var f=0;f<i.shape.length-1;++f)d.push(i.shape[f]);d.push(1)}var h=Sm(i,o),p=lm(e,c),v=Ik(sm(s,vm(r))),m=lm(lm(lm(v,v),v),vm(-.5));return{x:function(){return 1===o.rank?Gg(lm(lm(e,Jy(Gg(v,[1,1,1,o.shape[0]]),d)),c),i.shape):Gg(lm(lm(e,v),c),i.shape)},mean:function(){var e=lm(lm(v,vm(-1)),p);return 1===o.rank&&(e=Hy(e,l)),Gg(e,o.shape)},variance:function(){var e=lm(lm(m,h),p);return 1===o.rank&&(e=Hy(e,l)),Gg(e,o.shape)},scale:function(){var t=lm(h,v),n=lm(e,t);return 1===o.rank&&(n=Hy(n,l)),Gg(n,o.shape)},offset:function(){var t=e;return 1===o.rank&&(t=Hy(t,l)),Gg(t,o.shape)}}}},mS={kernelName:pd,inputsToSave:["x","indices"],gradFunc:function(e,t,n){var r=(0,ge.Z)(t,2),a=r[0],i=r[1],o=n.axis,s=_c(o,a.shape)[0];return{x:function(){var t=a.shape,n=i.size,r=t.slice(0,s),u=r.length,c=t.slice(o,t.length).slice(1),l=c.length,d=gS(0,u),f=gS(u+1,u+1+l),h=yS([r,[n],c]),p=Gg(e,h),v=Gg(i,[n]),m=yS([[u],d,f]),g=hw(p,m),y=aw(g,v,a.shape[s]),b=Uy(m);return y=hw(y,b)},indices:function(){return i}}}};function gS(e,t){for(var n=[],r=e;r<t;++r)n.push(r);return n}function yS(e){for(var t=[],n=0;n<e.length;++n)for(var r=0;r<e[n].length;++r)t.push(e[n][r]);return t}var bS={kernelName:gd,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,ge.Z)(t,2),r=n[0],a=n[1];return{a:function(){return hm(r)},b:function(){return hm(a)}}}},kS={kernelName:yd,gradFunc:function(e){return{x:function(){return Qv(e,"float32")}}}},wS={kernelName:wd,gradFunc:function(e){return{x:function(){return hm(e)}}}},xS={kernelName:xd,gradFunc:function(e){return{x:function(){return hm(e)}}}},IS={kernelName:Id,gradFunc:function(e){return{x:function(){return hm(e)}}}},SS={kernelName:Sd,inputsToSave:["x"],gradFunc:function(e,t,n){var r=(0,ge.Z)(t,1)[0],a=n.alpha,i=rb(r,0);return{x:function(){return Ay(i,e,lm(e,a))}}}},TS={kernelName:Zd,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,ge.Z)(t,1)[0];return{x:function(){return cm(e,sm(n,1))}}}},ES={kernelName:Cd,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,ge.Z)(t,1)[0];return{x:function(){return cm(e,Qv(n,"float32"))}}}},NS={kernelName:"LogSoftmax",inputsToSave:[],outputsToSave:[!0],gradFunc:function(e,t,n){var r=(0,ge.Z)(t,1)[0],a=n.axis;return{logits:function(){var t=Xy(r);return Sm(e,lm(Hy(e,a,!0),t))}}}};var CS=Mp({localResponseNormalizationBackprop_:function(e,t,n){var r={x:e,y:t,dy:n},a={depthRadius:arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,bias:arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,alpha:arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,beta:arguments.length>6&&void 0!==arguments[6]?arguments[6]:.5};return Ep.runKernel(Od,r,a)}}),ZS={kernelName:Dd,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=(0,ge.Z)(t,2),a=r[0],i=r[1],o=n.depthRadius,s=n.bias,u=n.alpha,c=n.beta;return{x:function(){return CS(a,i,e,o,s,u,c)}}}};function _S(e,t,n,r){return t.rank<n.rank&&(t=Gg(t,zy(t.shape,r))),e.rank<n.rank&&(e=Gg(e,zy(e.shape,r))),{x:function(){return lm(e,Qv(_y(n,t),e.dtype))}}}var AS={kernelName:Ld,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=n.reductionIndices,a=t[0],i=_S(e,t[1],a,_c(r,a.shape));return{x:function(){return i.x()}}}},RS={kernelName:Fd,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,ge.Z)(t,2),r=n[0],a=n[1];return{a:function(){return lm(e,Qv(ab(r,a),"float32"))},b:function(){return lm(e,Qv(lb(r,a),"float32"))}}}};var DS=Mp({maxPool3dGrad_:function(e,t,n,r,a,i,o){var s=Op(e,"dy","maxPool3dGrad"),u=Op(t,"input","maxPool3dGrad"),c=Op(n,"output","maxPool3dGrad"),l=s,d=u,f=c,h=!1;4===u.rank&&(h=!0,l=Gg(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]]),d=Gg(u,[1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]]),f=Gg(c,[1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]])),kc(5===l.rank,(function(){return"Error in maxPool3dGrad: dy must be rank 5 but got rank "+"".concat(l.rank,".")})),kc(5===d.rank,(function(){return"Error in maxPool3dGrad: input must be rank 5 but got rank "+"".concat(d.rank,".")})),kc(5===f.rank,(function(){return"Error in maxPool3dGrad: output must be rank 5 but got rank "+"".concat(f.rank,".")})),jg("maxPool3dGrad",i,o);var p={dy:l,input:d,output:f},v={filterSize:r,strides:a,pad:i,dimRoundingMode:o},m=Ep.runKernel(Bd,p,v);return h?Gg(m,[m.shape[1],m.shape[2],m.shape[3],m.shape[4]]):m}}),OS={kernelName:zd,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=(0,ge.Z)(t,2),a=r[0],i=r[1],o=n.filterSize,s=n.strides,u=n.pad,c=n.dimRoundingMode;return{x:function(){return DS(e,a,i,o,s,u,c)}}}};var LS=Mp({maxPoolGrad_:function(e,t,n,r,a,i,o){var s=Op(e,"dy","maxPoolGrad"),u=Op(t,"input","maxPoolGrad"),c=Op(n,"output","maxPoolGrad");kc(u.rank===s.rank,(function(){return"Rank of input (".concat(u.rank,") does not match rank of dy ")+"(".concat(s.rank,")")})),kc(4===s.rank,(function(){return"Error in maxPoolGrad: dy must be rank 4 but got rank "+"".concat(s.rank,".")})),kc(4===u.rank,(function(){return"Error in maxPoolGrad: input must be rank 4 but got rank "+"".concat(u.rank,".")})),jg("maxPoolGrad",i,o);var l={dy:s,input:u,output:c},d={filterSize:r,strides:a,pad:i,dimRoundingMode:o};return Ep.runKernel(Pd,l,d)}}),FS={kernelName:Md,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=(0,ge.Z)(t,2),a=r[0],i=r[1],o=n.filterSize,s=n.strides,u=n.pad;return{x:function(){return LS(e,a,i,o,s,u)}}}},MS={kernelName:Ud,inputsToSave:["x"],gradFunc:function(e,t,n){var r=(0,ge.Z)(t,1)[0],a=_c(n.axis,r.shape),i=Ic(Py(r.shape,a)[1]);return{x:function(){var t=r.shape.slice();a.forEach((function(e){t[e]=1}));var n=Gg(e,t);return cm(lm(n,Db(r.shape,"float32")),i)}}}},PS={kernelName:Wd,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=n.axis,a=(0,ge.Z)(t,2),i=a[0],o=_S(e,a[1],i,_c(r,i.shape));return{x:function(){return o.x()}}}},zS={kernelName:jd,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,ge.Z)(t,2),r=n[0],a=n[1];return{a:function(){return lm(e,Qv(db(r,a),"float32"))},b:function(){return lm(e,Qv(rb(r,a),"float32"))}}}},BS={kernelName:Gd,inputsToSave:["x"],gradFunc:function(e,t,n){var r=t[0],a=n.paddings.map((function(e){return e[0]}));return{x:function(){return Yg(e,a,r.shape)}}}},VS={kernelName:Hd,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,ge.Z)(t,2),r=n[0],a=n[1],i=Zm(r.shape,a.shape);return{a:function(){var t=Cm(r.shape,i);return t.length>0?Gg(Hy(e,t),r.shape):e},b:function(){var t=lm(e,mb(tb(cm(r,a)))),n=Cm(a.shape,i);return n.length>0?Gg(Hy(t,n),a.shape):t}}}},US={kernelName:$d,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,ge.Z)(t,2),r=n[0],a=n[1],i=Zm(r.shape,a.shape);return{a:function(){var t=lm(e,Qv(a,"float32")),n=Cm(r.shape,i);return n.length>0?Gg(Hy(t,n),r.shape):t},b:function(){var t=lm(e,Qv(r,"float32")),n=Cm(a.shape,i);return n.length>0?Gg(Hy(t,n),a.shape):t}}}},WS={kernelName:nf,saveAllInputs:!0,gradFunc:function(e,t,n){var r=n.axis;return iw(e,r).map((function(e){return function(){return e}}))}},jS={kernelName:rf,inputsToSave:["x"],gradFunc:function(e,t,n){var r=t[0],a=n.paddings.map((function(e){return e[0]}));return{x:function(){return Yg(e,a,r.shape)}}}},GS={kernelName:af,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:function(e,t){var n=(0,ge.Z)(t,3),r=n[0],a=n[1],i=n[2],o=r,s=a,u=Zm(o.shape,s.shape);return{a:function(){var t=Qv(s,"float32"),n=lm(e,lm(t,Im(o,Sm(t,vm(1))))),r=Cm(o.shape,u);return r.length>0&&(n=Hy(n,r)),Gg(n,o.shape)},b:function(){var t=rb(o,0),n=Ay(t,pb(o),hm(o)),r=lm(e,lm(i,n)),a=Cm(s.shape,u);return a.length>0&&(r=Hy(r,a)),Gg(r,s.shape)}}}},HS={kernelName:of,inputsToSave:["x","alpha"],gradFunc:function(e,t){var n=(0,ge.Z)(t,2),r=n[0],a=n[1],i=rb(r,0);return{x:function(){return Ay(i,e,lm(e,a))},alpha:function(){var t=Ay(i,hm(e),lm(e,r)),n=Cm(a.shape,e.shape);return n.length>0&&(t=Hy(t,n)),Gg(t,a.shape)}}}};function qS(e,t,n){var r=e.shape.length,a=r-n.length,i=Vy(n,r),o=e;null!=i&&(o=hw(e,i));var s=o.shape.slice(),u=s.splice(r-n.length,n.length).reduce((function(e,t){return e*t}),1);s.push(u);var c=function(e,t,n){var r=e.shape.slice();r[n]=1;var a=Gg(t,r),i=Iy(e,n,!0,!1),o=Iy(e,n,!0,!0),s=lm(i,o);return lm(a,s)}(o.reshape(s),t,a);if(c=c.reshape(o.shape),null!=i){var l=Uy(i);c=hw(c,l)}return c}var $S={kernelName:Jl,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,ge.Z)(t,2),r=n[0],a=n[1],i=Zm(r.shape,a.shape);return{a:function(){var t=cm(e,Qv(a,"float32")),n=Cm(r.shape,i);return n.length>0?Gg(Hy(t,n),r.shape):t},b:function(){var t=lm(e,Qv(r,"float32")),n=Cm(a.shape,i);n.length>0&&(t=Gg(Hy(t,n),a.shape));var o=fm(a);return mb(cm(t,Qv(o,"float32")))}}}},KS={kernelName:kf,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,ge.Z)(t,1)[0],r=lm(db(n,6),jk(n));return{x:function(){return lm(e,Qv(r,"float32"))}}}},XS={kernelName:Cf,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,ge.Z)(t,1)[0];return{x:function(){var t=rb(n,vm(0)),r=vm(tI),a=vm(nI),i=lm(e,a),o=lm(lm(e,r),Xy(Qv(n,"float32")));return Ay(t,i,o)}}}},YS={kernelName:Df,outputsToSave:[!0],gradFunc:function(e,t){var n=(0,ge.Z)(t,1)[0];return{x:function(){return lm(e,lm(n,Sm(vm(1),n)))}}}},QS={kernelName:Zf,inputsToSave:["x"],gradFunc:function(e,t,n){for(var r=(0,ge.Z)(t,1)[0],a=n.begin,i=n.size,o=r.shape,s=vg(r,a,i),u=(0,ge.Z)(s,2),c=u[0],l=u[1],d=[],f=0;f<e.rank;f++)d.push([c[f],o[f]-c[f]-l[f]]);return{x:function(){return Gb(e,d)}}}},JS={kernelName:zf,outputsToSave:[!0],gradFunc:function(e,t,n){var r=(0,ge.Z)(t,1)[0],a=n.dim,i=lm(e,r);return{logits:function(){return Sm(i,lm(Hy(i,[a],true),r))}}}},eT={kernelName:Mf,gradFunc:function(e,t,n){var r=n.blockShape,a=n.paddings;return{x:function(){return ey(e,r,a)}}}},tT={kernelName:Pf,gradFunc:function(e,t,n){var r=n.axis;return{x:function(){return $g(e,r)}}}},nT={kernelName:Gf,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,ge.Z)(t,2),r=n[0],a=n[1],i=vm(2);return{a:function(){return lm(e,lm(i,Sm(r,a)))},b:function(){return lm(e,lm(i,Sm(a,r)))}}}},rT={kernelName:Qf,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,ge.Z)(t,2),r=n[0],a=n[1],i=Zm(r.shape,a.shape);return{a:function(){var t=e,n=Cm(r.shape,i);return n.length>0&&(t=Hy(t,n)),Gg(t,r.shape)},b:function(){var t=e,n=Cm(a.shape,i);return n.length>0&&(t=Hy(t,n)),Gg(mb(t),a.shape)}}}},aT={kernelName:Ff,inputsToSave:["x"],gradFunc:function(e,t,n){var r=(0,ge.Z)(t,1)[0],a=r.shape.slice();_c(n.axis,r.shape).forEach((function(e){a[e]=1}));var i=Gg(e,a),o=lm(i,Db(r.shape,"float32"));return{x:function(){return o}}}},iT={kernelName:eh,outputsToSave:[!0],gradFunc:function(e,t){var n=(0,ge.Z)(t,1)[0];return{x:function(){return lm(Sm(vm(1),fm(n)),e)}}}},oT={kernelName:th,inputsToSave:["x"],gradFunc:function(e,t,n){var r=(0,ge.Z)(t,1)[0],a=n.reps;return{x:function(){var t=hm(r);if(1===r.rank)for(var n=0;n<a[0];++n)t=sm(t,Yg(e,[n*r.shape[0]],[r.shape[0]]));else if(2===r.rank)for(var i=0;i<a[0];++i)for(var o=0;o<a[1];++o)t=sm(t,Yg(e,[i*r.shape[0],o*r.shape[1]],[r.shape[0],r.shape[1]]));else if(3===r.rank)for(var s=0;s<a[0];++s)for(var u=0;u<a[1];++u)for(var c=0;c<a[2];++c)t=sm(t,Yg(e,[s*r.shape[0],u*r.shape[1],c*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else{if(4!==r.rank)throw new Error("Gradient for tile operation is not implemented for rank-"+"".concat(r.rank," tensors yet."));for(var l=0;l<a[0];++l)for(var d=0;d<a[1];++d)for(var f=0;f<a[2];++f)for(var h=0;h<a[3];++h)t=sm(t,Yg(e,[l*r.shape[0],d*r.shape[1],f*r.shape[2],h*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]))}return t}}}},sT={kernelName:sh,inputsToSave:["segmentIds"],gradFunc:function(e,t){var n=(0,ge.Z)(t,1)[0];return{x:function(){return function(e,t){for(var n=_m(t,hm(t)),r=nb(e,n),a=ab(t,vm(0,"int32")),i=r.rank-a.rank,o=0;o<i;++o)a=Yy(a,o+1);a=wb(a,Db(r.shape,"bool"));var s=hm(r);return Ay(a,r,s)}(e,n)}}}};for(var uT=0,cT=[ZI,_I,AI,RI,DI,OI,LI,FI,MI,PI,zI,BI,UI,jI,GI,HI,qI,$I,KI,XI,YI,QI,eS,JI,nS,rS,aS,iS,oS,sS,$S,uS,cS,lS,dS,fS,pS,hS,vS,mS,bS,kS,wS,xS,IS,SS,TS,ES,NS,ZS,AS,AS,RS,OS,FS,MS,PS,zS,BS,VS,US,{kernelName:Kd,gradFunc:function(e){return{x:function(){return mb(e)}}}},{kernelName:tf,inputsToSave:["indices"],gradFunc:function(e,t){var n=t[0];return{indices:function(){return Rb(n.shape,"float32")}}}},{kernelName:ef,gradFunc:function(e){return{x:function(){return hm(e)}}}},WS,jS,jS,GS,HS,{kernelName:sf,inputsToSave:["x"],gradFunc:function(e,t,n){var r=(0,ge.Z)(t,1)[0],a=n.axis,i=[];return i=void 0===a||null===a?r.shape.map((function(e,t){return t})):"number"===typeof a?[a]:a,{x:function(){return qS(r,e,i)}}}},{kernelName:hf,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,ge.Z)(t,1)[0];return{x:function(){return cm(e,mb(fm(n)))}}}},KS,{kernelName:pf,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,ge.Z)(t,1)[0];return{x:function(){return lm(e,Qv(jk(n),"float32"))}}}},{kernelName:vf,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,ge.Z)(t,1)[0];return{x:function(){return Gg(e,n.shape)}}}},{kernelName:yf,inputsToSave:["images"],gradFunc:function(e,t,n){var r={dy:e,images:(0,ge.Z)(t,1)[0]};return{images:function(){return Ep.runKernel(bf,r,n)}}}},{kernelName:mf,inputsToSave:["images"],gradFunc:function(e,t,n){var r={dy:e,images:(0,ge.Z)(t,1)[0]};return{images:function(){return Ep.runKernel(gf,r,n)}}}},{kernelName:wf,gradFunc:function(e,t,n){var r=_c(n.dims,e.shape);return{x:function(){return gk(e,r)}}}},{kernelName:xf,gradFunc:function(e){return{x:function(){return hm(e)}}}},{kernelName:If,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,ge.Z)(t,1)[0];return{x:function(){return mb(cm(e,lm(Im(n,1.5),2)))}}}},{kernelName:Nf,inputsToSave:["condition"],gradFunc:function(e,t){var n=(0,ge.Z)(t,1)[0];return{condition:function(){return Qv(hm(n),"float32")},t:function(){return lm(e,Qv(n,e.dtype))},e:function(){return lm(e,Qv(xb(n),e.dtype))}}}},XS,YS,{kernelName:Rf,gradFunc:function(e){return{x:function(){return hm(e)}}}},{kernelName:_f,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,ge.Z)(t,1)[0];return{x:function(){return lm(wy(Qv(n,"float32")),e)}}}},{kernelName:Af,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,ge.Z)(t,1)[0];return{x:function(){return lm(xy(Qv(n,"float32")),e)}}}},QS,JS,{kernelName:Of,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,ge.Z)(t,1)[0];return{x:function(){return lm(e,Xg(n))}}}},eT,eT,tT,tT,{kernelName:Lf,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,ge.Z)(t,1)[0];return{x:function(){return cm(e,lm(dm(Qv(n,"float32")),2))}}}},nT,{kernelName:Hf,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,ge.Z)(t,1)[0];return{x:function(){return lm(e,lm(Qv(n,"float32"),2))}}}},{kernelName:ch,gradFunc:function(e){return{x:function(){return hm(e)}}}},rT,aT,{kernelName:Jf,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,ge.Z)(t,1)[0];return{x:function(){return cm(e,fm(wy(n)))}}}},iT,oT,{kernelName:ah,gradFunc:function(e,t,n){var r=Uy(n.perm);return{x:function(){return hw(e,r)}}}},{kernelName:oh,gradFunc:function(e,t,n){var r=n.axis;return{value:function(){return Wk(e,r)}}}},sT,{kernelName:uh,gradFunc:function(e){return{x:function(){return hm(e)}}}}];uT<cT.length;uT++){xh(cT[uT])}ip().prototype.abs=function(){return this.throwIfDisposed(),Em(this)},ip().prototype.acos=function(){return this.throwIfDisposed(),yg(this)},ip().prototype.acosh=function(){return this.throwIfDisposed(),bg(this)},ip().prototype.add=function(e){return this.throwIfDisposed(),sm(this,e)},ip().prototype.all=function(e,t){return this.throwIfDisposed(),wg(this,e,t)},ip().prototype.any=function(e,t){return this.throwIfDisposed(),xg(this,e,t)},ip().prototype.argMax=function(e){return this.throwIfDisposed(),Ig(this,e)},ip().prototype.argMin=function(e){return this.throwIfDisposed(),Sg(this,e)},ip().prototype.asScalar=function(){return this.throwIfDisposed(),kc(1===this.size,(function(){return"The array must have only 1 element."})),Gg(this,[])},ip().prototype.asType=function(e){return this.throwIfDisposed(),Qv(this,e)},ip().prototype.as1D=function(){return this.throwIfDisposed(),Gg(this,[this.size])},ip().prototype.as2D=function(e,t){return this.throwIfDisposed(),Gg(this,[e,t])},ip().prototype.as3D=function(e,t,n){return this.throwIfDisposed(),Gg(this,[e,t,n])},ip().prototype.as4D=function(e,t,n,r){return this.throwIfDisposed(),Gg(this,[e,t,n,r])},ip().prototype.as5D=function(e,t,n,r,a){return this.throwIfDisposed(),Gg(this,[e,t,n,r,a])},ip().prototype.asin=function(){return this.throwIfDisposed(),Tg(this)},ip().prototype.asinh=function(){return this.throwIfDisposed(),Eg(this)},ip().prototype.atan=function(){return this.throwIfDisposed(),Ng(this)},ip().prototype.atan2=function(e){return this.throwIfDisposed(),Cg(this,e)},ip().prototype.atanh=function(){return this.throwIfDisposed(),Zg(this)},ip().prototype.avgPool=function(e,t,n,r){return this.throwIfDisposed(),Hg(this,e,t,n,r)},ip().prototype.batchToSpaceND=function(e,t){return this.throwIfDisposed(),ey(this,e,t)},ip().prototype.batchNorm=function(e,t,n,r,a){return this.throwIfDisposed(),ty(this,e,t,n,r,a)},ip().prototype.broadcastTo=function(e){return this.throwIfDisposed(),sy(this,e)},ip().prototype.cast=function(e){return this.throwIfDisposed(),Qv(this,e)},ip().prototype.ceil=function(){return this.throwIfDisposed(),uy(this)},ip().prototype.clipByValue=function(e,t){return this.throwIfDisposed(),cy(this,e,t)},ip().prototype.concat=function(e,t){return this.throwIfDisposed(),e instanceof ap&&(e=[e]),$g([this].concat((0,me.Z)(e)),t)},ip().prototype.conv1d=function(e,t,n,r,a,i){return this.throwIfDisposed(),vy(this,e,t,n,r,a,i)},ip().prototype.conv2dTranspose=function(e,t,n,r,a){return this.throwIfDisposed(),gy(this,e,t,n,r,a)},ip().prototype.conv2d=function(e,t,n,r,a,i){return this.throwIfDisposed(),py(this,e,t,n,r,a,i)},ip().prototype.cos=function(){return this.throwIfDisposed(),wy(this)},ip().prototype.cosh=function(){return this.throwIfDisposed(),xy(this)},ip().prototype.cumprod=function(e,t,n){return this.throwIfDisposed(),Iy(this,e,t,n)},ip().prototype.cumsum=function(e,t,n){return this.throwIfDisposed(),Sy(this,e,t,n)},ip().prototype.depthToSpace=function(e,t){return this.throwIfDisposed(),Ey(this,e,t)},ip().prototype.depthwiseConv2d=function(e,t,n,r,a,i){return this.throwIfDisposed(),Ny(this,e,t,n,r,a,i)},ip().prototype.dilation2d=function(e,t,n,r,a){return this.throwIfDisposed(),Zy(this,e,t,n,r,a)},ip().prototype.divNoNan=function(e){return this.throwIfDisposed(),Ry(this,e)},ip().prototype.div=function(e){return this.throwIfDisposed(),cm(this,e)},ip().prototype.dot=function(e){return this.throwIfDisposed(),Dy(this,e)},ip().prototype.elu=function(){return this.throwIfDisposed(),Ly(this)},ip().prototype.equal=function(e){return this.throwIfDisposed(),_y(this,e)},ip().prototype.erf=function(){return this.throwIfDisposed(),Fy(this)},ip().prototype.euclideanNorm=function(e,t){return this.throwIfDisposed(),Ky(this,e,t)},ip().prototype.exp=function(){return this.throwIfDisposed(),Xy(this)},ip().prototype.expandDims=function(e){return this.throwIfDisposed(),Yy(this,e)},ip().prototype.expm1=function(){return this.throwIfDisposed(),Qy(this)},ip().prototype.fft=function(){return this.throwIfDisposed(),Fk(this)},ip().prototype.flatten=function(){return this.throwIfDisposed(),Gg(this,[this.size])},ip().prototype.floor=function(){return this.throwIfDisposed(),tb(this)},ip().prototype.floorDiv=function(e){return this.throwIfDisposed(),um(this,e)},ip().prototype.gather=function(e,t,n){return this.throwIfDisposed(),nb(this,e,t,n)},ip().prototype.greaterEqual=function(e){return this.throwIfDisposed(),ab(this,e)},ip().prototype.greater=function(e){return this.throwIfDisposed(),rb(this,e)},ip().prototype.ifft=function(){return this.throwIfDisposed(),Mk(this)},ip().prototype.irfft=function(){return this.throwIfDisposed(),Pk(this)},ip().prototype.isFinite=function(){return this.throwIfDisposed(),ob(this)},ip().prototype.isInf=function(){return this.throwIfDisposed(),sb(this)},ip().prototype.isNaN=function(){return this.throwIfDisposed(),ub(this)},ip().prototype.leakyRelu=function(e){return this.throwIfDisposed(),cb(this,e)},ip().prototype.lessEqual=function(e){return this.throwIfDisposed(),db(this,e)},ip().prototype.less=function(e){return this.throwIfDisposed(),lb(this,e)},ip().prototype.localResponseNormalization=function(e,t,n,r){return this.throwIfDisposed(),hb(this,e,t,n,r)},ip().prototype.logSigmoid=function(){return this.throwIfDisposed(),yb(this)},ip().prototype.logSoftmax=function(e){return this.throwIfDisposed(),bb(this,e)},ip().prototype.logSumExp=function(e,t){return this.throwIfDisposed(),kb(this,e,t)},ip().prototype.log=function(){return this.throwIfDisposed(),pb(this)},ip().prototype.log1p=function(){return this.throwIfDisposed(),vb(this)},ip().prototype.logicalAnd=function(e){return this.throwIfDisposed(),wb(this,e)},ip().prototype.logicalNot=function(){return this.throwIfDisposed(),xb(this)},ip().prototype.logicalOr=function(e){return this.throwIfDisposed(),Ib(this,e)},ip().prototype.logicalXor=function(e){return this.throwIfDisposed(),Sb(this,e)},ip().prototype.matMul=function(e,t,n){return this.throwIfDisposed(),Kg(this,e,t,n)},ip().prototype.maxPool=function(e,t,n,r){return this.throwIfDisposed(),Cb(this,e,t,n,r)},ip().prototype.max=function(e,t){return this.throwIfDisposed(),jy(this,e,t)},ip().prototype.maximum=function(e){return this.throwIfDisposed(),_m(this,e)},ip().prototype.mean=function(e,t){return this.throwIfDisposed(),Ab(this,e,t)},ip().prototype.min=function(e,t){return this.throwIfDisposed(),Gy(this,e,t)},ip().prototype.minimum=function(e){return this.throwIfDisposed(),Lb(this,e)},ip().prototype.mirrorPad=function(e,t){return this.throwIfDisposed(),Fb(this,e,t)},ip().prototype.mod=function(e){return this.throwIfDisposed(),Mb(this,e)},ip().prototype.mul=function(e){return this.throwIfDisposed(),lm(this,e)},ip().prototype.neg=function(){return this.throwIfDisposed(),mb(this)},ip().prototype.norm=function(e,t,n){return this.throwIfDisposed(),$y(this,e,t,n)},ip().prototype.notEqual=function(e){return this.throwIfDisposed(),Vb(this,e)},ip().prototype.oneHot=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.throwIfDisposed(),Ub(this,e,t,n)},ip().prototype.onesLike=function(){return this.throwIfDisposed(),Wb(this)},ip().prototype.pad=function(e,t){return this.throwIfDisposed(),Gb(this,e,t)},ip().prototype.pool=function(e,t,n,r,a,i){return this.throwIfDisposed(),Yb(this,e,t,n,r,a,i)},ip().prototype.pow=function(e){return this.throwIfDisposed(),Im(this,e)},ip().prototype.prelu=function(e){return this.throwIfDisposed(),Qb(this,e)},ip().prototype.prod=function(e,t){return this.throwIfDisposed(),Jb(this,e,t)},ip().prototype.reciprocal=function(){return this.throwIfDisposed(),pk(this)},ip().prototype.relu=function(){return this.throwIfDisposed(),vk(this)},ip().prototype.relu6=function(){return this.throwIfDisposed(),mk(this)},ip().prototype.reshapeAs=function(e){return this.throwIfDisposed(),Gg(this,e.shape)},ip().prototype.reshape=function(e){return this.throwIfDisposed(),Gg(this,e)},ip().prototype.resizeBilinear=function(e,t,n){return this.throwIfDisposed(),ox(this,e,t,n)},ip().prototype.resizeNearestNeighbor=function(e,t,n){return this.throwIfDisposed(),sx(this,e,t,n)},ip().prototype.reverse=function(e){return this.throwIfDisposed(),gk(this,e)},ip().prototype.rfft=function(){return this.throwIfDisposed(),Bk(this)},ip().prototype.round=function(){return this.throwIfDisposed(),xk(this)},ip().prototype.rsqrt=function(){return this.throwIfDisposed(),Ik(this)},ip().prototype.selu=function(){return this.throwIfDisposed(),Sk(this)},ip().prototype.separableConv2d=function(e,t,n,r,a,i){return this.throwIfDisposed(),Tk(this,e,t,n,r,a,i)},ip().prototype.sigmoid=function(){return this.throwIfDisposed(),Xg(this)},ip().prototype.sign=function(){return this.throwIfDisposed(),Ck(this)},ip().prototype.sin=function(){return this.throwIfDisposed(),Zk(this)},ip().prototype.sinh=function(){return this.throwIfDisposed(),_k(this)},ip().prototype.slice=function(e,t){return this.throwIfDisposed(),Yg(this,e,t)},ip().prototype.softmax=function(e){return this.throwIfDisposed(),Lk(this,e)},ip().prototype.softplus=function(){return this.throwIfDisposed(),gb(this)},ip().prototype.spaceToBatchND=function(e,t){return this.throwIfDisposed(),Xb(this,e,t)},ip().prototype.split=function(e,t){return this.throwIfDisposed(),zk(this,e,t)},ip().prototype.sqrt=function(){return this.throwIfDisposed(),dm(this)},ip().prototype.square=function(){return this.throwIfDisposed(),fm(this)},ip().prototype.squaredDifference=function(e){return this.throwIfDisposed(),Vk(this,e)},ip().prototype.squeeze=function(e){return this.throwIfDisposed(),Uk(this,e)},ip().prototype.stack=function(e,t){this.throwIfDisposed();var n=e instanceof ap?[this,e]:[this].concat((0,me.Z)(e));return Wk(n,t)},ip().prototype.step=function(e){return this.throwIfDisposed(),jk(this,e)},ip().prototype.stridedSlice=function(e,t,n,r,a,i,o,s){return this.throwIfDisposed(),Gk(this,e,t,n,r,a,i,o,s)},ip().prototype.sub=function(e){return this.throwIfDisposed(),Sm(this,e)},ip().prototype.sum=function(e,t){return this.throwIfDisposed(),Hy(this,e,t)},ip().prototype.tan=function(){return this.throwIfDisposed(),Hk(this)},ip().prototype.tanh=function(){return this.throwIfDisposed(),Qg(this)},ip().prototype.tile=function(e){return this.throwIfDisposed(),Jy(this,e)},ip().prototype.toBool=function(){return this.throwIfDisposed(),Qv(this,"bool")},ip().prototype.toFloat=function(){return this.throwIfDisposed(),Qv(this,"float32")},ip().prototype.toInt=function(){return this.throwIfDisposed(),Qv(this,"int32")},ip().prototype.topk=function(e,t){return this.throwIfDisposed(),tw(this,e,t)},ip().prototype.transpose=function(e){return this.throwIfDisposed(),hw(this,e)},ip().prototype.unique=function(e){return this.throwIfDisposed(),rw(this,e)},ip().prototype.unsortedSegmentSum=function(e,t){return this.throwIfDisposed(),aw(this,e,t)},ip().prototype.unstack=function(e){return this.throwIfDisposed(),iw(this,e)},ip().prototype.where=function(e,t){return this.throwIfDisposed(),Ay(e,this,t)},ip().prototype.zerosLike=function(){return this.throwIfDisposed(),hm(this)};var lT=n(8664),dT=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r;return(0,Se.Z)(this,n),r=t.call(this,e),Object.setPrototypeOf((0,we.Z)(r),n.prototype),r}return(0,Te.Z)(n)}((0,lT.Z)(Error)),fT=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r;return(0,Se.Z)(this,n),r=t.call(this,e),Object.setPrototypeOf((0,we.Z)(r),n.prototype),r}return(0,Te.Z)(n)}((0,lT.Z)(Error)),hT=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r;return(0,Se.Z)(this,n),r=t.call(this,e),Object.setPrototypeOf((0,we.Z)(r),n.prototype),r}return(0,Te.Z)(n)}((0,lT.Z)(Error)),pT=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r;return(0,Se.Z)(this,n),r=t.call(this,e),Object.setPrototypeOf((0,we.Z)(r),n.prototype),r}return(0,Te.Z)(n)}((0,lT.Z)(Error)),vT=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r;return(0,Se.Z)(this,n),r=t.call(this,e),Object.setPrototypeOf((0,we.Z)(r),n.prototype),r}return(0,Te.Z)(n)}((0,lT.Z)(Error)),mT=(Error,function(){function e(t){(0,Se.Z)(this,e),this.maxEntries=t||100,this.cache=new Map}return(0,Te.Z)(e,[{key:"get",value:function(e){var t;return this.cache.has(e)&&(t=this.cache.get(e),this.cache.delete(e),this.cache.set(e,t)),t}},{key:"put",value:function(e,t){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxEntries){var n=this.cache.keys().next().value;this.cache.delete(n)}this.cache.set(e,t)}},{key:"getMaxEntries",value:function(){return this.maxEntries}},{key:"setMaxEntries",value:function(e){if(e<0)throw new Error("The maxEntries of LRU caches must be at least 0, but got ".concat(e,"."));if(this.maxEntries>e)for(var t=0;t<this.maxEntries-e;t++){var n=this.cache.keys().next().value;this.cache.delete(n)}this.maxEntries=e}}]),e}());function gT(e,t){if(Array.isArray(e)){for(var n=[],r=0;r<t;r++)n=n.concat(e);return n}var a=new Array(t);return a.fill(e),a}function yT(e,t){if(!e)throw new vT(t)}function bT(e,t){var n,r=0,a=(0,Ht.Z)(e);try{for(a.s();!(n=a.n()).done;){n.value===t&&r++}}catch(yhe){a.e(yhe)}finally{a.f()}return r}function kT(e){return 1===e.length?e[0]:e}function wT(e){return Array.isArray(e)?e:[e]}function xT(e){var t=e.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return"_"!==t[0]?t:"private"+t}function IT(e){return e.length<=1||-1===e.indexOf("_")?e:e.replace(/[_]+(\w|$)/g,(function(e,t){return t.toUpperCase()}))}var ST={};function TT(e){if(null===e||void 0===e)return null;var t={};return t.className=e.getClassName(),t.config=e.getConfig(),t}function ET(e){if(null!=e&&"object"===typeof e)if(Array.isArray(e))e.forEach((function(e){return ET(e)}));else for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t],a=e[r];null!=a&&"object"===typeof a&&(Array.isArray(a)||"ndarray"!==a.type||"number"!==typeof a.value?ET(a):e[r]=a.value)}}function NT(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"object",a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("string"===typeof e){var i,o=e;if(o in n)i=n[o];else if(o in ST)i=ST[o];else if(null==(i=t[o]))throw new hT("Unknown ".concat(r,": ").concat(e,". ")+"This may be due to one of the following reasons:\n"+"1. The ".concat(r," is defined in Python, in which ")+"case it needs to be ported to TensorFlow.js or your JavaScript code.\n"+"2. The custom ".concat(r," is defined in JavaScript, ")+"but is not registered properly with tf.serialization.registerClass().");return i}var s=e;if(null==s.className||null==s.config)throw new hT("".concat(r,": Improper config format: ")+"".concat(JSON.stringify(s),".\n")+"'className' and 'config' must set.");var u,c,l=s.className;if(l in n){var d=(0,ge.Z)(n[l],2);u=d[0],c=d[1]}else if(l in ST){var f=(0,ge.Z)(ST.className,2);u=f[0],c=f[1]}else if(l in t){var h=(0,ge.Z)(t[l],2);u=h[0],c=h[1]}if(null==u)throw new hT("Unknown ".concat(r,": ").concat(l,". ")+"This may be due to one of the following reasons:\n"+"1. The ".concat(r," is defined in Python, in which ")+"case it needs to be ported to TensorFlow.js or your JavaScript code.\n"+"2. The custom ".concat(r," is defined in JavaScript, ")+"but is not registered properly with tf.serialization.registerClass().");if(null!=c){for(var p={},v=0,m=Object.keys(ST);v<m.length;v++){var g=m[v];p[g]=ST[g]}for(var y=0,b=Object.keys(n);y<b.length;y++){var k=b[y];p[k]=n[k]}s.config.customObjects=p;for(var w=Object.assign({},ST),x=0,I=Object.keys(n);x<I.length;x++){var S=I[x];ST[S]=n[S]}ET(s.config);var T=c(u,s.config,n,a);return ST=Object.assign({},w),T}for(var E=Object.assign({},ST),N=0,C=Object.keys(n);N<C.length;N++){var Z=C[N];ST[Z]=n[Z]}var _=new u(s.config);return ST=Object.assign({},E),_}function CT(e,t){return-1*function(e,t){return e<t?-1:e>t?1:0}(e,t)}function ZT(e){if(null==e)return e;var t,n=[],r=(0,Ht.Z)(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;-1===n.indexOf(a)&&n.push(a)}}catch(yhe){r.e(yhe)}finally{r.f()}return n}function _T(e){if(null==e)throw new hT("Invalid value in obj: ".concat(JSON.stringify(e)));for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function AT(e,t,n){if(null!=n&&e.indexOf(n)<0)throw new hT("".concat(n," is not a valid ").concat(t,".  Valid values are ").concat(e," or null/undefined."))}function RT(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;return yT(n>=0),yT(r>=n),Array.isArray(e)&&e.length>=n&&e.length<=r&&e.every((function(e){return typeof e===t}))}function DT(e,t){Array.isArray(e)?(kc(e.length>0,(function(){return"".concat(t," is unexpectedly an empty array.")})),e.forEach((function(e,n){return DT(e,"element ".concat(n+1," of ").concat(t))}))):kc(Number.isInteger(e)&&e>0,(function(){return"Expected ".concat(t," to be a positive integer, but got ")+"".concat(OT(e),".")}))}function OT(e){return null===e?"null":Array.isArray(e)?"["+e.map((function(e){return OT(e)})).join(",")+"]":"string"===typeof e?'"'.concat(e,'"'):"".concat(e)}function LT(e){return"relu"===e?"relu":"linear"===e?"linear":"elu"===e?"elu":null}var FT=0;function MT(){return FT++}var PT={};function zT(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e in PT||(PT[e]=0),PT[e]+=1,e+PT[e].toString()}var BT=["channelsFirst","channelsLast"],VT=["nearest","bilinear"],UT=["valid","same","causal"],WT=["max","avg"],jT=["sum","mul","concat","ave"],GT=new Map;function HT(e){AT(BT,"DataFormat",e)}function qT(e){AT(UT,"PaddingMode",e)}function $T(e){AT(WT,"PoolMode",e)}var KT=[],XT="/";function YT(e,t){KT.push(e);try{var n=t();return KT.pop(),n}catch(r){throw KT.pop(),r}}function QT(e){if(!nE(e))throw new Error("Not a valid tensor name: '"+e+"'");return(0===KT.length?"":KT.join(XT)+XT)+e}function JT(e){if(!nE(e))throw new Error("Not a valid tensor name: '"+e+"'");GT.has(e)||GT.set(e,0);var t=GT.get(e);if(GT.set(e,GT.get(e)+1),t>0){var n="".concat(e,"_").concat(t);return GT.set(n,1),n}return e}var eE,tE=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function nE(e){return!!e.match(tE)}function rE(e){return e===parseInt(e.toString(),10)}function aE(e,t,n){null==t&&(t=0),null==n&&(n=e.length);for(var r=1,a=t;a<n;++a)r*=e[a];return r}function iE(e){if(0===e.length)return Number.NaN;for(var t=Number.POSITIVE_INFINITY,n=0;n<e.length;n++){var r=e[n];r<t&&(t=r)}return t}function oE(e){if(0===e.length)return Number.NaN;for(var t=Number.NEGATIVE_INFINITY,n=0;n<e.length;n++){var r=e[n];r>t&&(t=r)}return t}function sE(e,t){if(t<e)throw new hT("end (".concat(t,") < begin (").concat(e,") is forbidden."));for(var n=[],r=e;r<t;++r)n.push(r);return n}function uE(){return null==eE&&(eE=Ep.backend.epsilon()),eE}function cE(e,t){return Qv(e,t)}function lE(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=e.shape.slice();return t<0&&(t=n.length+t+1),n.splice(t,0,1),Gg(e,n)}function dE(e,t,n){return rm((function(){switch(e.rank){case 1:return Ak(e,t,n);case 2:return Rk(e,[t,0],[n,e.shape[1]]);case 3:return Dk(e,[t,0,0],[n,e.shape[1],e.shape[2]]);case 4:return Ok(e,[t,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3]]);case 5:return Yg(e,[t,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4]]);case 6:return Yg(e,[t,0,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4],e.shape[5]]);default:throw new hT("sliceAlongFirstAxis() received an unsupported tensor rank: "+"".concat(e.rank))}}))}function fE(e,t,n){return rm((function(){switch(e.rank){case 1:return Ak(e,t,n);case 2:return Rk(e,[0,t],[e.shape[0],n]);case 3:return Dk(e,[0,0,t],[e.shape[0],e.shape[1],n]);case 4:return Ok(e,[0,0,0,t],[e.shape[0],e.shape[1],e.shape[2],n]);default:throw new hT("sliceAlongLastAxis() received an unsupported tensor rank: "+"".concat(e.rank))}}))}function hE(e,t,n,r){return rm((function(){switch(e.rank){case 1:return Ak(e,t,n);case 2:switch(r){case 1:return dE(e,t,n);case 2:return fE(e,t,n);default:throw new hT("The axis is not within the rank of the tensor "+"".concat(r))}case 3:switch(r){case 1:return dE(e,t,n);case 2:return Dk(e,[0,t,0],[e.shape[0],n,e.shape[2]]);case 3:return fE(e,t,n);default:throw new hT("The axis is not within the rank of the tensor "+"".concat(r))}case 4:switch(r){case 1:return dE(e,t,n);case 2:return Ok(e,[0,t,0,0],[e.shape[0],n,e.shape[2],e.shape[3]]);case 3:return Ok(e,[0,0,t,0],[e.shape[0],e.shape[1],n,e.shape[3]]);case 4:return fE(e,t,n);default:throw new hT("The axis is not within the rank of the tensor "+"".concat(r))}default:throw new hT("sliceAlongLastAxis() received an unsupported tensor rank: "+"".concat(e.rank))}}))}function pE(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return n<0&&(n=0!==(t=e[0].rank)?t:0),n===e[0].rank&&(n=-1),$g(e,n)}function vE(e,t){switch(e.rank){case 1:return ly([e,t]);case 2:return dy([e,t],0);case 3:return fy([e,t],0);case 4:return hy([e,t],0);default:throw new hT("concatAlongFirstAxis() received an unsupported "+"tensor rank: ".concat(e.rank))}}function mE(e,t){if(Array.isArray(t)||(t=[t]),e.rank!==t.length)throw new hT("The length of input n (".concat(t.length,") does not match ")+"the number of dimensions in input x (".concat(e.rank,")"));return Jy(e,t)}function gE(e){return ck(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,arguments.length>3?arguments[3]:void 0,arguments.length>4?arguments[4]:void 0)}function yE(e,t,n,r){if(e.rank<2||t.rank<2)throw new pT("dot requires both inputs to be rank >= 2"+" but got x shape = ".concat(e.shape," and y shape = ").concat(t.shape));if(t.rank>=3&&e.shape.slice(-1)[0]!==t.shape.slice(-2)[0])throw new pT("If rank y >= 3, then the second last dim"+" of y must equal the last dim of x but got x shape = ".concat(e.shape," and ")+" y shape = ".concat(t.shape));if(2===e.rank&&2===t.rank){return Rw({a:e,b:t,transposeA:!1,transposeB:!1,bias:r?wE(e.rank,r,"channelsLast"):null,activation:n})}var a=e.shape.slice(),i=a.pop();e=Gg(e,[-1,i]);var o=t.shape.slice(),s=o.pop(),u=o.pop(),c=[].concat((0,me.Z)(o),[s]),l=Array.from({length:t.rank},(function(e,n){return 0===n?t.rank-2:n<=t.rank-2?n-1:n}));t=Gg(hw(t,l),[u,-1]);var d=[].concat((0,me.Z)(a),(0,me.Z)(c));return Gg(Rw({a:e,b:t,transposeA:!1,transposeB:!1,bias:r?wE(e.rank,r,"channelsLast"):null,activation:n}),d)}function bE(e,t,n){return rm((function(){return t=Array.isArray(t)?qk(t,"int32"):Qv(t,"int32"),nb(e,t,n)}))}function kE(e){return lm(e,e)}function wE(e,t,n){var r=t.shape;if(1!==t.rank&&t.rank!==e)throw new hT("Unexpected bias dimensions: ".concat(t.rank)+"; expected it to be 1 or ".concat(e));if(5===e){if("channelsFirst"===n)return 1===r.length?Gg(t,[1,r[0],1,1,1]):Gg(t,[1,r[3],r[0],r[1],r[2]]);if("channelsLast"===n)return 1===r.length?Gg(t,[1,1,1,1,r[0]]):Gg(t,[1].concat(r))}else if(4===e){if("channelsFirst"===n)return 1===r.length?Gg(t,[1,r[0],1,1]):Gg(t,[1,r[2],r[0],r[1]]);if("channelsLast"===n)return 1===r.length?Gg(t,[1,1,1,r[0]]):Gg(t,[1].concat(r))}else if(3===e){if("channelsFirst"===n)return 1===r.length?Gg(t,[1,r[0],1]):Gg(t,[1,r[1],r[0]]);if("channelsLast"===n)return 1===r.length?Gg(t,[1,1,r[0]]):Gg(t,[1].concat(r))}else if(e<3)return t;throw new hT("Unsupported input rank by biasAdd: ".concat(t.rank))}function xE(e,t,n){return rm((function(){return null==n&&(n="channelsLast"),HT(n),sm(e,wE(e.rank,t,n))}))}function IE(e,t,n,r){return rm((function(){return yw(e,t,n,r)}))}function SE(e,t){return arguments.length>2&&void 0!==arguments[2]&&arguments[2]?e():t()}var TE=["fanIn","fanOut","fanAvg"],EE=["normal","uniform","truncatedNormal"];var NE=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(){return(0,Se.Z)(this,n),t.apply(this,arguments)}return(0,Te.Z)(n,[{key:"fromConfigUsesCustomObjects",value:function(){return!1}},{key:"getConfig",value:function(){return{}}}]),n}(mm),CE=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(){return(0,Se.Z)(this,n),t.apply(this,arguments)}return(0,Te.Z)(n,[{key:"apply",value:function(e,t){return Rb(e,t)}}]),n}(NE);CE.className="Zeros",ym(CE);var ZE=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(){return(0,Se.Z)(this,n),t.apply(this,arguments)}return(0,Te.Z)(n,[{key:"apply",value:function(e,t){return Db(e,t)}}]),n}(NE);ZE.className="Ones",ym(ZE);var _E=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r;if((0,Se.Z)(this,n),r=t.call(this),"object"!==typeof e)throw new hT("Expected argument of type ConstantConfig but got ".concat(e));if(void 0===e.value)throw new hT("config must have value set but got ".concat(e));return r.value=e.value,r}return(0,Te.Z)(n,[{key:"apply",value:function(e,t){var n=this;return rm((function(){return lm(vm(n.value),Db(e,t))}))}},{key:"getConfig",value:function(){return{value:this.value}}}]),n}(NE);_E.className="Constant",ym(_E);var AE=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r;return(0,Se.Z)(this,n),(r=t.call(this)).DEFAULT_MINVAL=-.05,r.DEFAULT_MAXVAL=.05,r.minval=e.minval||r.DEFAULT_MINVAL,r.maxval=e.maxval||r.DEFAULT_MAXVAL,r.seed=e.seed,r}return(0,Te.Z)(n,[{key:"apply",value:function(e,t){return dk(e,this.minval,this.maxval,t,this.seed)}},{key:"getConfig",value:function(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}]),n}(NE);AE.className="RandomUniform",ym(AE);var RE=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r;return(0,Se.Z)(this,n),(r=t.call(this)).DEFAULT_MEAN=0,r.DEFAULT_STDDEV=.05,r.mean=e.mean||r.DEFAULT_MEAN,r.stddev=e.stddev||r.DEFAULT_STDDEV,r.seed=e.seed,r}return(0,Te.Z)(n,[{key:"apply",value:function(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new pT("randomNormal does not support dType ".concat(t,"."));return gE(e,this.mean,this.stddev,t,this.seed)}},{key:"getConfig",value:function(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}]),n}(NE);RE.className="RandomNormal",ym(RE);var DE=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r;return(0,Se.Z)(this,n),(r=t.call(this)).DEFAULT_MEAN=0,r.DEFAULT_STDDEV=.05,r.mean=e.mean||r.DEFAULT_MEAN,r.stddev=e.stddev||r.DEFAULT_STDDEV,r.seed=e.seed,r}return(0,Te.Z)(n,[{key:"apply",value:function(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new pT("truncatedNormal does not support dType ".concat(t,"."));return nw(e,this.mean,this.stddev,t,this.seed)}},{key:"getConfig",value:function(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}]),n}(NE);DE.className="TruncatedNormal",ym(DE);var OE=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r;return(0,Se.Z)(this,n),(r=t.call(this)).gain=null!=e.gain?e.gain:1,r}return(0,Te.Z)(n,[{key:"apply",value:function(e,t){var n=this;return rm((function(){if(2!==e.length||e[0]!==e[1])throw new hT("Identity matrix initializer can only be used for 2D square matrices.");return lm(n.gain,eb(e[0]))}))}},{key:"getConfig",value:function(){return{gain:this.gain}}}]),n}(NE);OE.className="Identity",ym(OE);var LE=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r,a;if((0,Se.Z)(this,n),r=t.call(this),e.scale<0)throw new hT("scale must be a positive float. Got: ".concat(e.scale));return r.scale=null==e.scale?1:e.scale,r.mode=null==e.mode?"fanIn":e.mode,a=r.mode,AT(TE,"FanMode",a),r.distribution=null==e.distribution?"normal":e.distribution,function(e){AT(EE,"Distribution",e)}(r.distribution),r.seed=e.seed,r}return(0,Te.Z)(n,[{key:"apply",value:function(e,t){var n=function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"channelsLast";if(HT(r),2===e.length)t=e[0],n=e[1];else if(-1!==[3,4,5].indexOf(e.length)){if("channelsFirst"===r){var a=aE(e,2);t=e[1]*a,n=e[0]*a}else if("channelsLast"===r){var i=aE(e,0,e.length-2);t=e[e.length-2]*i,n=e[e.length-1]*i}}else{var o=aE(e);t=Math.sqrt(o),n=Math.sqrt(o)}return[t,n]}(e),r=n[0],a=n[1],i=this.scale;if("fanIn"===this.mode?i/=Math.max(1,r):"fanOut"===this.mode?i/=Math.max(1,a):i/=Math.max(1,(r+a)/2),"normal"===this.distribution){var o=Math.sqrt(i);if("float32"!==(t=t||"float32")&&"int32"!==t)throw new pT("".concat(this.getClassName()," does not support dType ").concat(t,"."));return nw(e,0,o,t,this.seed)}var s=Math.sqrt(3*i);return dk(e,-s,s,t,this.seed)}},{key:"getConfig",value:function(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}]),n}(NE);LE.className="VarianceScaling",ym(LE);var FE=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){return(0,Se.Z)(this,n),t.call(this,{scale:1,mode:"fanAvg",distribution:"uniform",seed:null==e?null:e.seed})}return(0,Te.Z)(n,[{key:"getClassName",value:function(){return LE.className}}]),n}(LE);FE.className="GlorotUniform",ym(FE);var ME=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){return(0,Se.Z)(this,n),t.call(this,{scale:1,mode:"fanAvg",distribution:"normal",seed:null==e?null:e.seed})}return(0,Te.Z)(n,[{key:"getClassName",value:function(){return LE.className}}]),n}(LE);ME.className="GlorotNormal",ym(ME);var PE=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){return(0,Se.Z)(this,n),t.call(this,{scale:2,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}return(0,Te.Z)(n,[{key:"getClassName",value:function(){return LE.className}}]),n}(LE);PE.className="HeNormal",ym(PE);var zE=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){return(0,Se.Z)(this,n),t.call(this,{scale:2,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}return(0,Te.Z)(n,[{key:"getClassName",value:function(){return LE.className}}]),n}(LE);zE.className="HeUniform",ym(zE);var BE=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){return(0,Se.Z)(this,n),t.call(this,{scale:1,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}return(0,Te.Z)(n,[{key:"getClassName",value:function(){return LE.className}}]),n}(LE);BE.className="LeCunNormal",ym(BE);var VE=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){return(0,Se.Z)(this,n),t.call(this,{scale:1,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}return(0,Te.Z)(n,[{key:"getClassName",value:function(){return LE.className}}]),n}(LE);VE.className="LeCunUniform",ym(VE);var UE=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r;return(0,Se.Z)(this,n),(r=t.call(this)).DEFAULT_GAIN=1,r.ELEMENTS_WARN_SLOW=2e3,r.gain=null==e.gain?r.DEFAULT_GAIN:e.gain,r.seed=e.seed,r}return(0,Te.Z)(n,[{key:"apply",value:function(e,t){var n=this;return rm((function(){if(e.length<2)throw new pT("Shape must be at least 2D.");if("int32"!==t&&"float32"!==t&&void 0!==t)throw new TypeError("Unsupported data type ".concat(t,"."));var r=Ic(e.slice(0,-1)),a=e[e.length-1],i=r*a;i>n.ELEMENTS_WARN_SLOW&&console.warn("Orthogonal initializer is being called on a matrix with more "+"than ".concat(n.ELEMENTS_WARN_SLOW," (").concat(i,") elements: ")+"Slowness may result.");var o=gE([Math.max(a,r),Math.min(a,r)],0,1,t,n.seed),s=Fx.qr(o,!1),u=s[0],c=s[1].flatten().stridedSlice([0],[Math.min(a,r)*Math.min(a,r)],[Math.min(a,r)+1]);return u=lm(u,c.sign()),r<a&&(u=u.transpose()),lm(vm(n.gain),u.reshape(e))}))}},{key:"getConfig",value:function(){return{gain:this.gain,seed:this.seed}}}]),n}(NE);UE.className="Orthogonal",ym(UE);var WE={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function jE(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return NT(e,gm.getMap().classNameMap,t,"initializer")}function GE(e){return TT(e)}function HE(e){if("string"===typeof e){var t=e in WE?WE[e]:e;if("GlorotNormal"===t)return new ME;if("GlorotUniform"===t)return new FE;if("HeNormal"===t)return new PE;if("HeUniform"===t)return new zE;if("LeCunNormal"===t)return new BE;if("LeCunUniform"===t)return new VE;var n={};return n.className=t,n.config={},jE(n)}return e instanceof NE?e:jE(e)}function qE(e){return Array.isArray(e)&&Array.isArray(e[0])}function $E(e){return 0===e.length?[]:Array.isArray(e[0])?e:[e]}function KE(e){var t;if(Array.isArray(e)){if(1!==e.length)throw new hT("Expected Tensor length to be 1; got ".concat(e.length));t=e[0]}else t=e;return t}function XE(e){if(Array.isArray(e)&&Array.isArray(e[0])){if(1===e.length)return e[0];throw new hT("Expected exactly 1 Shape; got ".concat(e.length))}return e}function YE(e){var t,n=0,r=(0,Ht.Z)(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;0===a.shape.length?n+=1:n+=a.shape.reduce((function(e,t){return e*t}))}}catch(yhe){r.e(yhe)}finally{r.f()}return n}var QE="Variable",JE=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:QE,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;(0,Se.Z)(this,e),this.dtype=null==n?"float32":n,this.shape=t.shape,this.id=MT(),r=null==r?QE:r,this.originalName=QT(r),this.name=JT(this.originalName),this.trainable_=a,this.constraint=i,this.val=sw(t,this.trainable_,this.name,this.dtype)}return(0,Te.Z)(e,[{key:"read",value:function(){return this.assertNotDisposed(),this.val}},{key:"write",value:function(e){return this.assertNotDisposed(),function(e,t){if(e.shape.toString()!==t.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(e.shape)+" vs. "+JSON.stringify(t.shape))}(this.val,e),this.val.id!==e.id&&(this.val.assign(e),null!=this.constraint&&this.val.assign(this.constraint.apply(this.val))),this}},{key:"dispose",value:function(){this.assertNotDisposed(),this.val.dispose()}},{key:"assertNotDisposed",value:function(){if(this.val.isDisposed)throw new Error("LayersVariable ".concat(this.name," is already disposed."))}},{key:"trainable",get:function(){return this.trainable_},set:function(e){this.trainable_=e,this.val.trainable=e}}]),e}();function eN(e){return e.map((function(e){return e.read()}))}function tN(e){e.forEach((function(e){e[0].write(e[1])}))}var nN=(0,Te.Z)((function e(t){(0,Se.Z)(this,e),this.dtype=t.dtype,this.shape=t.shape,null!=t.shape?this.ndim=t.shape.length:this.ndim=t.ndim,this.maxNDim=t.maxNDim,this.minNDim=t.minNDim,this.axes=t.axes||{}})),rN=(0,Te.Z)((function e(t,n,r,a,i,o,s){(0,Se.Z)(this,e),this.dtype=t,this.shape=n,this.sourceLayer=r,this.inputs=a,this.callArgs=i,this.outputTensorIndex=s,this.id=MT(),null!=o&&(this.originalName=QT(o),this.name=JT(this.originalName)),this.rank=n.length})),aN=0,iN=function(){function e(t,n){(0,Se.Z)(this,e),this.callArgs=n,this.id=aN++,this.outboundLayer=t.outboundLayer,this.inboundLayers=t.inboundLayers,this.nodeIndices=t.nodeIndices,this.tensorIndices=t.tensorIndices,this.inputTensors=t.inputTensors,this.outputTensors=t.outputTensors,this.inputMasks=t.inputMasks,this.outputMasks=t.outputMasks,this.inputShapes=t.inputShapes,this.outputShapes=t.outputShapes;var r,a=(0,Ht.Z)(t.inboundLayers);try{for(a.s();!(r=a.n()).done;){var i=r.value;null!=i&&i.outboundNodes.push(this)}}catch(yhe){a.e(yhe)}finally{a.f()}t.outboundLayer.inboundNodes.push(this)}return(0,Te.Z)(e,[{key:"getConfig",value:function(){var e,t=[],n=(0,Ht.Z)(this.inboundLayers);try{for(n.s();!(e=n.n()).done;){var r=e.value;null!=r?t.push(r.name):t.push(null)}}catch(yhe){n.e(yhe)}finally{n.f()}return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:t,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}}]),e}(),oN=0,sN=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,Se.Z)(this,n),(e=t.call(this))._callHook=null,e._addedWeightNames=[],e._stateful=!1,e.id=oN++,e.activityRegularizer=null,e.inputSpec=null,e.supportsMasking=!1,e._trainableWeights=[],e._nonTrainableWeights=[],e._losses=[],e._updates=[],e._built=!1,e.inboundNodes=[],e.outboundNodes=[];var a=r.name;if(!a){var i=e.getClassName();a=xT(i)+"_"+zT(i)}if(e.name=a,e.trainable_=null==r.trainable||r.trainable,null!=r.inputShape||null!=r.batchInputShape){var o;if(null!=r.batchInputShape)o=r.batchInputShape;else if(null!=r.inputShape){var s=null;null!=r.batchSize&&(s=r.batchSize),o=[s].concat(r.inputShape)}e.batchInputShape=o;var u=r.dtype;null==u&&(u=r.inputDType),null==u&&(u="float32"),e.dtype=u}return null!=r.weights?e.initialWeights=r.weights:e.initialWeights=null,e._refCount=null,e.fastWeightInitDuringBuild=!1,e}return(0,Te.Z)(n,[{key:"getNodeAtIndex",value:function(e,t){if(0===this.inboundNodes.length)throw new fT("The layer has never been called "+"and thus has no defined ".concat(t,"."));if(this.inboundNodes.length<=e)throw new hT("Asked to get ".concat(t," at node ").concat(e,", ")+"but the layer has only ".concat(this.inboundNodes.length," inbound nodes."));return this.inboundNodes[e]}},{key:"getInputAt",value:function(e){return kT(this.getNodeAtIndex(e,"input").inputTensors)}},{key:"getOutputAt",value:function(e){return kT(this.getNodeAtIndex(e,"output").outputTensors)}},{key:"input",get:function(){if(this.inboundNodes.length>1)throw new dT("Layer ".concat(this.name)+' has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use `getInputAt(nodeIndex)` instead.');if(0===this.inboundNodes.length)throw new dT("Layer ".concat(this.name)+" is not connected, no input to return.");return kT(this.getNodeAtIndex(0,"input").inputTensors)}},{key:"output",get:function(){if(0===this.inboundNodes.length)throw new dT("Layer ".concat(this.name)+" has no inbound nodes.");if(this.inboundNodes.length>1)throw new dT("Layer ".concat(this.name)+' has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use `getOutputAt(nodeIndex)` instead.');return kT(this.getNodeAtIndex(0,"output").outputTensors)}},{key:"losses",get:function(){return this._losses}},{key:"calculateLosses",value:function(){return this.losses.map((function(e){return e()}))}},{key:"updates",get:function(){return this._updates}},{key:"built",get:function(){return this._built},set:function(e){this._built=e}},{key:"trainable",get:function(){return this.trainable_},set:function(e){this._trainableWeights.forEach((function(t){return t.trainable=e})),this.trainable_=e}},{key:"trainableWeights",get:function(){return this.trainable_?this._trainableWeights.filter((function(e){return e.trainable})):[]},set:function(e){this._trainableWeights=e}},{key:"nonTrainableWeights",get:function(){return this.trainable?this._trainableWeights.filter((function(e){return!e.trainable})).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)},set:function(e){this._nonTrainableWeights=e}},{key:"weights",get:function(){return this.trainableWeights.concat(this.nonTrainableWeights)}},{key:"stateful",get:function(){return this._stateful}},{key:"resetStates",value:function(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}},{key:"assertInputCompatibility",value:function(e){if(e=wT(e),null!=this.inputSpec&&0!==this.inputSpec.length){var t=wT(this.inputSpec);if(e.length!==t.length)throw new hT("Layer ".concat(this.name," expects ").concat(t.length," inputs, ")+"but it received ".concat(e.length," input tensors. ")+"Input received: ".concat(e));for(var n=0;n<e.length;n++){var r=e[n],a=t[n];if(null!=a){var i=r.rank;if(null!=a.ndim&&i!==a.ndim)throw new hT("Input ".concat(n," is incompatible with layer ").concat(this.name,": ")+"expected ndim=".concat(a.ndim,", found ndim=").concat(i));if(null!=a.maxNDim&&i>a.maxNDim)throw new hT("Input ".concat(n," is incompatible with layer ").concat(this.name)+": expected max_ndim=".concat(a.maxNDim,", found ndim=").concat(i));if(null!=a.minNDim&&i<a.minNDim)throw new hT("Input ".concat(n," is incompatible with layer ").concat(this.name)+": expected min_ndim=".concat(a.minNDim,", found ndim=").concat(i,"."));if(null!=a.dtype&&r.dtype!==a.dtype)throw new hT("Input ".concat(n," is incompatible with layer ").concat(this.name," ")+": expected dtype=".concat(a.dtype,", found dtype=").concat(r.dtype,"."));if(a.axes){var o=r.shape;for(var s in a.axes){var u=Number(s),c=a.axes[s],l=u>=0?o[u]:o[o.length+u];if(null!=c&&-1===[c,null].indexOf(l))throw new hT("Input ".concat(n," is incompatible with layer ")+"".concat(this.name,": expected axis ").concat(u," of input shape to ")+"have value ".concat(c," but got shape ").concat(o,"."))}}if(null!=a.shape)for(var d=0;d<a.shape.length;++d){var f=a.shape[d],h=r.shape[d];if(null!=f&&null!=h&&f!==h)throw new hT("Input ".concat(n," is incompatible with layer ")+"".concat(this.name,": expected shape=").concat(a.shape,", ")+"found shape=".concat(r.shape,"."))}}}}}},{key:"call",value:function(e,t){return e}},{key:"invokeCallHook",value:function(e,t){null!=this._callHook&&this._callHook(e,t)}},{key:"setCallHook",value:function(e){this._callHook=e}},{key:"clearCallHook",value:function(){this._callHook=null}},{key:"apply",value:function(e,t){var n=this;t=t||{},this.assertNotDisposed();var r,a=wT(e),i=!0,o=(0,Ht.Z)(a);try{for(o.s();!(r=o.n()).done;){if(!(r.value instanceof rN)){i=!1;break}}}catch(yhe){o.e(yhe)}finally{o.f()}var s,u=!0,c=(0,Ht.Z)(a);try{for(c.s();!(s=c.n()).done;){if(s.value instanceof rN){u=!1;break}}}catch(yhe){c.e(yhe)}finally{c.f()}if(i===u)throw new hT("Arguments to apply() must be all SymbolicTensors or all Tensors");return YT(this.name,(function(){if(!n.built){n.assertInputCompatibility(e);var r,i=[],o=(0,Ht.Z)(wT(e));try{for(o.s();!(r=o.n()).done;){var s=r.value;i.push(s.shape)}}catch(yhe){o.e(yhe)}finally{o.f()}n.build(kT(i)),n.built=!0,n.initialWeights&&n.setWeights(n.initialWeights),null===n._refCount&&u&&(n._refCount=1)}if(n.assertInputCompatibility(e),u){var c,l=n.call(e,t),d=wT(l),f=[],h=(0,Ht.Z)(d);try{for(h.s();!(c=h.n()).done;){var p=c.value;-1!==a.indexOf(p)&&(p=p.clone()),f.push(p)}}catch(yhe){h.e(yhe)}finally{h.f()}if(l=kT(f),null!=n.activityRegularizer)throw new pT("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return l}var v,m=function(e){e=wT(e);var t,n=[],r=(0,Ht.Z)(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;n.push(a.shape)}}catch(yhe){r.e(yhe)}finally{r.f()}return kT(n)}(e),g=n.computeOutputShape(m),y="float32";if(n.warnOnIncompatibleInputShape(Array.isArray(e)?m[0]:m),v=null!=g&&g.length>0&&Array.isArray(g[0])?g.map((function(r,a){return new rN(y,r,n,wT(e),t,n.name,a)})):new rN(y,g,n,wT(e),t,n.name),n.addInboundNode(e,v,null,null,m,g,t),n._refCount++,null!=n.activityRegularizer)throw new pT("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return v}))}},{key:"warnOnIncompatibleInputShape",value:function(e){if(null!=this.batchInputShape)if(e.length!==this.batchInputShape.length)console.warn("The rank of the input tensor provided (shape: "+"".concat(JSON.stringify(e),") does not match that of the ")+"batchInputShape (".concat(JSON.stringify(this.batchInputShape),") ")+"of the layer ".concat(this.name));else{var t=!1;this.batchInputShape.forEach((function(n,r){null!=n&&null!=e[r]&&e[r]!==n&&(t=!0)})),t&&console.warn("The shape of the input tensor "+"(".concat(JSON.stringify(e),") does not ")+"match the expectation of layer ".concat(this.name,": ")+"".concat(JSON.stringify(this.batchInputShape)))}}},{key:"outputShape",get:function(){if(null==this.inboundNodes||0===this.inboundNodes.length)throw new dT("The layer ".concat(this.name," has never been called and thus has no ")+"defined output shape.");var e,t=[],n=(0,Ht.Z)(this.inboundNodes);try{for(n.s();!(e=n.n()).done;){var r=e.value,a=JSON.stringify(r.outputShapes);-1===t.indexOf(a)&&t.push(a)}}catch(yhe){n.e(yhe)}finally{n.f()}if(1===t.length){var i=this.inboundNodes[0].outputShapes;return Array.isArray(i)&&Array.isArray(i[0])&&1===i.length?i[0]:i}throw new dT("The layer ".concat(this.name," has multiple inbound nodes with different ")+'output shapes. Hence the notion of "output shape" is ill-defined for the layer.')}},{key:"countParams",value:function(){if(!this.built)throw new fT("You tried to call countParams() on ".concat(this.name,", ")+"but the layer is not built yet. Build it first by calling build(batchInputShape).");return YE(this.weights)}},{key:"build",value:function(e){this.built=!0}},{key:"getWeights",value:function(){return eN(arguments.length>0&&void 0!==arguments[0]&&arguments[0]?this.trainableWeights:this.weights)}},{key:"setWeights",value:function(e){var t=this;rm((function(){var n=t.weights;if(n.length!==e.length)throw new hT('You called setWeights(weights) on layer "'.concat(t.name,'" ')+"with a weight list of length ".concat(e.length,", ")+"but the layer was expecting ".concat(n.length," weights. ")+"Provided weights: ".concat(e,"..."));if(0!==n.length){for(var r=[],a=eN(n),i=0;i<a.length;++i){var o=a[i],s=n[i],u=e[i];if(!Sc(o.shape,u.shape))throw new hT("Layer weight shape ".concat(o.shape," ")+"not compatible with provided weight shape ".concat(u.shape));r.push([s,u])}tN(r)}}))}},{key:"addWeight",value:function(e,t,n,r,a,i,o,s){if(-1!==this._addedWeightNames.indexOf(e))throw new hT("Duplicate weight name ".concat(e," for layer ").concat(this.name));this._addedWeightNames.push(e),null==n&&(n="float32"),this.fastWeightInitDuringBuild&&(r=null!=s?s():HE("zeros"));var u=r.apply(t,n),c=new JE(u,n,e,i,o);return u.dispose(),null!=a&&this.addLoss((function(){return a.apply(c.read())})),null==i&&(i=!0),i?this._trainableWeights.push(c):this._nonTrainableWeights.push(c),c}},{key:"setFastWeightInitDuringBuild",value:function(e){this.fastWeightInitDuringBuild=e}},{key:"addLoss",value:function(e){var t;null==e||Array.isArray(e)&&0===e.length||(e=wT(e),void 0!==this._losses&&null!==this._losses&&(t=this.losses).push.apply(t,(0,me.Z)(e)))}},{key:"computeOutputShape",value:function(e){return e}},{key:"computeMask",value:function(e,t){var n=this;if(!this.supportsMasking){if(null!=t){if(!Array.isArray(t))throw new TypeError("Layer ".concat(this.name," does not support masking, ")+"but was passed an inputMask.");t.forEach((function(e){if(null!=e)throw new TypeError("Layer ".concat(n.name," does not support masking, ")+"but was passed an inputMask.")}))}return null}return t}},{key:"addInboundNode",value:function(e,t,n,r,a,i){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=wT(e);t=wT(t),n=wT(n),r=wT(r),a=$E(a),i=$E(i);var u,c=[],l=[],d=[],f=(0,Ht.Z)(s);try{for(f.s();!(u=f.n()).done;){var h=u.value;c.push(h.sourceLayer),l.push(h.nodeIndex),d.push(h.tensorIndex)}}catch(yhe){f.e(yhe)}finally{f.f()}new iN({outboundLayer:this,inboundLayers:c,nodeIndices:l,tensorIndices:d,inputTensors:s,outputTensors:t,inputMasks:n,outputMasks:r,inputShapes:a,outputShapes:i},o);for(var p=0;p<t.length;p++)t[p].sourceLayer=this,t[p].nodeIndex=this.inboundNodes.length-1,t[p].tensorIndex=p}},{key:"getConfig",value:function(){var e={name:this.name,trainable:this.trainable};return null!=this.batchInputShape&&(e.batchInputShape=this.batchInputShape),null!=this.dtype&&(e.dtype=this.dtype),e}},{key:"disposeWeights",value:function(){return this.weights.forEach((function(e){return e.dispose()})),this.weights.length}},{key:"assertNotDisposed",value:function(){if(0===this._refCount)throw new Error("Layer '".concat(this.name,"' is already disposed."))}},{key:"dispose",value:function(){if(!this.built)throw new Error("Cannot dispose Layer ".concat(this.name," because it has not been ")+"built yet.");if(null===this._refCount)throw new Error("Cannot dispose Layer ".concat(this.name," because it has not been used ")+"yet.");this.assertNotDisposed();var e=0;return 0===--this._refCount&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}}],[{key:"nodeKey",value:function(e,t){return e.name+"_ib-"+t.toString()}}]),n}(mm);function uN(e,t,n){if((null==t||null!=n&&n>0)&&(t=e.sourceLayer,n=e.nodeIndex),0===t.inboundNodes.length)return[e];var r=t.inboundNodes[n];if(0===r.inboundLayers.length)return r.inputTensors;for(var a=[],i=0;i<r.inboundLayers.length;i++){var o,s=uN(r.inputTensors[i],r.inboundLayers[i],r.nodeIndices[i]),u=(0,Ht.Z)(s);try{for(u.s();!(o=u.n()).done;){var c=o.value;-1===a.indexOf(c)&&a.push(c)}}catch(yhe){u.e(yhe)}finally{u.f()}}return a}var cN=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r;if((0,Se.Z)(this,n),r=t.call(this,{dtype:e.dtype,name:null!=e.name?e.name:zT("input").toString()}),null==e.batchSize&&(e.batchSize=null),null==e.sparse&&(e.sparse=!1),r.trainable=!1,r.built=!0,r.sparse=e.sparse,null!=e.inputShape&&null!=e.batchInputShape)throw new hT("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");var a=e.batchInputShape;if(null==a){if(null==e.inputShape)throw new hT("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");a=[e.batchSize].concat(e.inputShape)}else if(null!=e.batchSize)throw new hT("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");var i=e.dtype||"float32";r.batchInputShape=a,r.dtype=i,r.inputSpec=[{shape:a}];var o=new rN(r.dtype,r.batchInputShape,(0,we.Z)(r),[],{},r.name);return o.nodeIndex=0,o.tensorIndex=0,new iN({outboundLayer:(0,we.Z)(r),inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[o],outputTensors:[o],inputMasks:[null],outputMasks:[null],inputShapes:[a],outputShapes:[a]}),r}return(0,Te.Z)(n,[{key:"apply",value:function(e,t){throw new hT("Cannot pass any input to an "+"InputLayer's apply() method. InputLayer name: ".concat(this.name))}},{key:"dispose",value:function(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}},{key:"getConfig",value:function(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}]),n}(sN);cN.className="InputLayer",ym(cN);var lN=function(){function e(t){if((0,Se.Z)(this,e),this.id2Value={},this.id2Mask={},this.name2Id={},t instanceof e)for(var n in t.id2Value)this.id2Value[n]=t.id2Value[n],n in t.id2Mask&&(this.id2Mask[n]=t.id2Mask[n]);else{if(null==t)return;var r,a=(0,Ht.Z)(t);try{for(a.s();!(r=a.n()).done;){var i=r.value;this.add(i.key,i.value)}}catch(yhe){a.e(yhe)}finally{a.f()}}}return(0,Te.Z)(e,[{key:"add",value:function(e,t,n){if(null!=this.id2Value[e.id])throw new hT("Duplicate key: name=".concat(e.name,", id=").concat(e.id));return this.id2Value[e.id]=function(e,t){if(null==e.dtype||e.dtype===t.dtype)return t;try{return Qv(t,e.dtype)}catch(yhe){throw new hT("The dtype of the feed (".concat(t.dtype,") can not be cast to the dtype ")+"of the key '".concat(e.name,"' (").concat(e.dtype,")."))}}(e,t),this.name2Id[e.name]=e.id,null!=n&&(this.id2Mask[e.id]=n),this}},{key:"addFeed",value:function(e){this.add(e.key,e.value)}},{key:"hasKey",value:function(e){return null!=this.id2Value[e.id]}},{key:"names",value:function(){return Object.keys(this.name2Id)}},{key:"getValue",value:function(e){if(e instanceof rN){if(null==this.id2Value[e.id])throw new hT("Nonexistent key: ".concat(e.name));return this.id2Value[e.id]}var t=this.name2Id[e];if(null==t)throw new hT("Feed dict has no SymbolicTensor name: ".concat(e));return this.id2Value[t]}},{key:"getMask",value:function(e){if(e instanceof rN){if(null==this.id2Value[e.id])throw new hT("Nonexistent key: ".concat(e.name));return this.id2Mask[e.id]}var t=this.name2Id[e];if(null==t)throw new hT("Feed dict has no SymbolicTensor name: ".concat(e));return this.id2Mask[t]}},{key:"disposeMasks",value:function(){null!=this.id2Mask&&am(this.id2Mask)}}]),e}(),dN=new mT,fN=new mT;function hN(e,t,n,r){var a,i=null!=n&&n.training,o=Array.isArray(e),s=o?e:[e],u=s.map((function(e){return e.name})),c=[],l=t.names(),d=(0,Ht.Z)(u);try{for(d.s();!(a=d.n()).done;){var f=a.value;-1!==l.indexOf(f)?c.push(t.getValue(f)):c.push(null)}}catch(yhe){d.e(yhe)}finally{d.f()}null!=r&&(r.maxNumTensors=-1/0,r.minNumTensors=1/0);var h,p=u.join(",")+"|"+t.names().sort().join(","),v=dN.get(p);if(null==v){var m=function(e,t){kc(null!=e&&e.length>0,(function(){return"Expected at least one fetch, got none"}));var n=[],r={};if(1===e.length){var a=vN(e[0],t);n=a.sorted,r=a.recipientMap}else{var i,o=new Set,s=(0,Ht.Z)(e);try{for(s.s();!(i=s.n()).done;){var u,c=vN(i.value,t),l=c.sorted,d=c.recipientMap,f=(0,Ht.Z)(l);try{for(f.s();!(u=f.n()).done;){var h=u.value;o.has(h.name)||(n.push(h),o.add(h.name))}}catch(yhe){f.e(yhe)}finally{f.f()}var p=function(e){null==r[e]&&(r[e]=new Set),d[e].forEach((function(t){return r[e].add(t)}))};for(var v in d)p(v)}}catch(yhe){s.e(yhe)}finally{s.f()}}return{sorted:n,recipientCounts:pN(r)}}(s,t);v=m.sorted,h=m.recipientCounts,dN.put(p,v),fN.put(p,h)}h={},i||Object.assign(h,fN.get(p));for(var g=new lN(t),y=0;y<v.length;++y){if(null!=r){var b=nm().numTensors;b>r.maxNumTensors&&(r.maxNumTensors=b),b<r.minNumTensors&&(r.minNumTensors=b)}var k=v[y],w=k.sourceLayer;if(!(w instanceof cN)){var x,I=[],S=[],T=[],E=!1,N=(0,Ht.Z)(k.inputs);try{for(N.s();!(x=N.n()).done;){var C=x.value,Z=g.getValue(C),_=g.getMask(C);I.push(Z),S.push(_),null!=_&&(E=!0),i||(h[C.name]--,0!==h[C.name]||t.hasKey(C)||-1!==u.indexOf(C.name)||Z.isDisposed||!0===C.sourceLayer.stateful||T.push(Z))}}catch(yhe){N.e(yhe)}finally{N.f()}E&&((n=n||{}).mask=S[0]);var A=wT(w.apply(I,n)),R=null;w.supportsMasking&&(R=w.computeMask(I,S));for(var D=mN(k),O=Array.isArray(D)?D:[D],L=0;L<O.length;++L){g.hasKey(O[L])||g.add(O[L],A[L],Array.isArray(R)?R[0]:R);var F=u.indexOf(O[L].name);-1!==F&&(c[F]=A[L])}i||am(T)}}return g.disposeMasks(),o?c:c[0]}function pN(e){var t={};for(var n in e)t[n]=e[n].size;return t}function vN(e,t){var n,r=new Set,a=[],i={},o=(0,Ht.Z)(t.names());try{for(o.s();!(n=o.n()).done;){var s=n.value;r.add(s)}}catch(yhe){o.e(yhe)}finally{o.f()}var u=[],c=[];for(u.push(e);u.length>0;){var l=u[u.length-1];if(r.has(l.name))u.pop();else{var d=c[c.length-1]===u.length-1;if(0===l.inputs.length||d)u.pop(),a.push(l),r.add(l.name),d&&c.pop();else{c.push(u.length-1);var f,h=(0,Ht.Z)(l.inputs);try{for(h.s();!(f=h.n()).done;){var p=f.value;null==i[p.name]&&(i[p.name]=new Set),i[p.name].add(l.name),r.has(p.name)||u.push(p)}}catch(yhe){h.e(yhe)}finally{h.f()}}}}return{sorted:a,recipientMap:i}}function mN(e){var t;if(1===e.sourceLayer.inboundNodes.length)t=e.sourceLayer.output;else{for(var n=null,r=0;r<e.sourceLayer.inboundNodes.length;++r){var a,i=(0,Ht.Z)(e.sourceLayer.inboundNodes[r].outputTensors);try{for(i.s();!(a=i.n()).done;){if(a.value.id===e.id){n=r;break}}}catch(yhe){i.e(yhe)}finally{i.f()}}t=e.sourceLayer.getOutputAt(n)}return t}function gN(e,t){return rm((function(){return dm(Hy(lm(e,e),t,!0))}))}el().registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",(function(){return 100}),(function(e){null!=dN&&dN.setMaxEntries(e),null!=fN&&fN.setMaxEntries(e)}));var yN=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(){return(0,Se.Z)(this,n),t.apply(this,arguments)}return(0,Te.Z)(n,[{key:"getConfig",value:function(){return{}}}]),n}(mm),bN=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r;return(0,Se.Z)(this,n),(r=t.call(this)).defaultMaxValue=2,r.defaultAxis=0,r.maxValue=null!=e.maxValue?e.maxValue:r.defaultMaxValue,r.axis=null!=e.axis?e.axis:r.defaultAxis,r}return(0,Te.Z)(n,[{key:"apply",value:function(e){var t=this;return rm((function(){var n=gN(e,t.axis),r=cy(n,0,t.maxValue);return lm(e,cm(r,sm(uE(),n)))}))}},{key:"getConfig",value:function(){return{maxValue:this.maxValue,axis:this.axis}}}]),n}(yN);bN.className="MaxNorm",ym(bN);var kN=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r;return(0,Se.Z)(this,n),(r=t.call(this)).defaultAxis=0,r.axis=null!=e.axis?e.axis:r.defaultAxis,r}return(0,Te.Z)(n,[{key:"apply",value:function(e){var t=this;return rm((function(){return cm(e,sm(uE(),gN(e,t.axis)))}))}},{key:"getConfig",value:function(){return{axis:this.axis}}}]),n}(yN);kN.className="UnitNorm",ym(kN);var wN=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(){return(0,Se.Z)(this,n),t.apply(this,arguments)}return(0,Te.Z)(n,[{key:"apply",value:function(e){return vk(e)}}]),n}(yN);wN.className="NonNeg",ym(wN);var xN=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r;return(0,Se.Z)(this,n),(r=t.call(this)).defaultMinValue=0,r.defaultMaxValue=1,r.defaultRate=1,r.defaultAxis=0,r.minValue=null!=e.minValue?e.minValue:r.defaultMinValue,r.maxValue=null!=e.maxValue?e.maxValue:r.defaultMaxValue,r.rate=null!=e.rate?e.rate:r.defaultRate,r.axis=null!=e.axis?e.axis:r.defaultAxis,r}return(0,Te.Z)(n,[{key:"apply",value:function(e){var t=this;return rm((function(){var n=gN(e,t.axis),r=sm(lm(t.rate,cy(n,t.minValue,t.maxValue)),lm(1-t.rate,n));return lm(e,cm(r,sm(uE(),n)))}))}},{key:"getConfig",value:function(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}]),n}(yN);xN.className="MinMaxNorm",ym(xN);var IN,SN={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function TN(e){return TT(e)}function EN(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return NT(e,gm.getMap().classNameMap,t,"constraint")}function NN(e){return null==e?null:"string"===typeof e?EN({className:e in SN?SN[e]:e,config:{}}):e instanceof yN?e:EN(e)}function CN(e){return ZN.apply(this,arguments)}function ZN(){return ZN=(0,ke.Z)((0,be.Z)().mark((function e(t){var n,r,a,i,o,s,u,c;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}return e.abrupt("return");case 2:for(i in n=[],r=[],a=[],t)"number"!==typeof(o=t[i])&&(s=o,n.push(s.data()),r.push(i),a.push(s));if(!(n.length>0)){e.next=12;break}return e.next=9,Promise.all(n);case 9:for(u=e.sent,c=0;c<u.length;++c)t[r[c]]=u[c][0];am(a);case 12:case"end":return e.stop()}}),e)}))),ZN.apply(this,arguments)}function _N(e){if(null!=e)for(var t in e){var n=e[t];"number"!==typeof n&&n.dispose()}}!function(e){e[e.SILENT=0]="SILENT",e[e.VERBOSE=1]="VERBOSE"}(IN||(IN={}));var AN=function(){function e(){(0,Se.Z)(this,e),this.validationData=null}return(0,Te.Z)(e,[{key:"setParams",value:function(e){this.params=e}},{key:"onEpochBegin",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t,n){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t,n){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchBegin",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t,n){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchEnd",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t,n){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onTrainBegin",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"onTrainEnd",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"setModel",value:function(e){}}]),e}(),RN=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;(0,Se.Z)(this,e),null==t&&(t=[]),this.callbacks=t,this.queueLength=n}return(0,Te.Z)(e,[{key:"append",value:function(e){this.callbacks.push(e)}},{key:"setParams",value:function(e){var t,n=(0,Ht.Z)(this.callbacks);try{for(n.s();!(t=n.n()).done;){t.value.setParams(e)}}catch(yhe){n.e(yhe)}finally{n.f()}}},{key:"setModel",value:function(e){var t,n=(0,Ht.Z)(this.callbacks);try{for(n.s();!(t=n.n()).done;){t.value.setModel(e)}}catch(yhe){n.e(yhe)}finally{n.f()}}},{key:"onEpochBegin",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t,n){var r,a,i;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=(0,Ht.Z)(this.callbacks),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=10;break}return i=a.value,e.next=8,i.onEpochBegin(t,n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t,n){var r,a,i;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=(0,Ht.Z)(this.callbacks),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=10;break}return i=a.value,e.next=8,i.onEpochEnd(t,n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchBegin",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t,n){var r,a,i;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=(0,Ht.Z)(this.callbacks),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=10;break}return i=a.value,e.next=8,i.onBatchBegin(t,n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchEnd",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t,n){var r,a,i;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=(0,Ht.Z)(this.callbacks),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=10;break}return i=a.value,e.next=8,i.onBatchEnd(t,n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onTrainBegin",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){var n,r,a;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==t&&(t={}),n=(0,Ht.Z)(this.callbacks),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return a=r.value,e.next=8,a.onTrainBegin(t);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onTrainEnd",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){var n,r,a;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==t&&(t={}),n=(0,Ht.Z)(this.callbacks),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return a=r.value,e.next=8,a.onTrainEnd(t);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),DN=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(){return(0,Se.Z)(this,n),t.call(this)}return(0,Te.Z)(n,[{key:"onEpochBegin",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.seen=0,this.totals={};case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onBatchEnd",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t,n){var r,a,i,o=this;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=null==n.size?0:n.size,this.seen+=r,a=(0,be.Z)().mark((function e(t){var a,i,s;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"number"===typeof(a=n[t])?(o.totals.hasOwnProperty(t)||(o.totals[t]=0),o.totals[t]=o.totals[t]+a*r):(t in o.totals?i=o.totals[t]:o.totals[t]=0,s=rm((function(){return sm(o.totals[t],lm(a,r))})),o.totals[t]=s,null!=i&&i.dispose());case 2:case"end":return e.stop()}}),e)})),e.t0=(0,be.Z)().keys(n);case 5:if((e.t1=e.t0()).done){e.next=10;break}return i=e.t1.value,e.delegateYield(a(i),"t2",8);case 8:e.next=5;break;case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t,n){var r,a,i,o=this;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n){e.next=20;break}r=(0,Ht.Z)(this.params.metrics),e.prev=2,i=(0,be.Z)().mark((function e(){var t;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.value,null!=o.totals[t]){e.next=3;break}return e.abrupt("return","continue");case 3:"number"===typeof o.totals[t]?n[t]=o.totals[t]/o.seen:rm((function(){var e=lm(cm(1,o.seen),o.totals[t]);n[t]=e,o.totals[t].dispose(),im(n[t])}));case 4:case"end":return e.stop()}}),e)})),r.s();case 5:if((a=r.n()).done){e.next=12;break}return e.delegateYield(i(),"t0",7);case 7:if("continue"!==e.t0){e.next=10;break}return e.abrupt("continue",10);case 10:e.next=5;break;case 12:e.next=17;break;case 14:e.prev=14,e.t1=e.catch(2),r.e(e.t1);case 17:return e.prev=17,r.f(),e.finish(17);case 20:case"end":return e.stop()}}),e,this,[[2,14,17,20]])})));return function(t,n){return e.apply(this,arguments)}}()}]),n}(AN),ON=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(){return(0,Se.Z)(this,n),t.apply(this,arguments)}return(0,Te.Z)(n,[{key:"onTrainBegin",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.epoch=[],this.history={};case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t,n){var r;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r in null==n&&(n={}),this.epoch.push(t),n)null==this.history[r]&&(this.history[r]=[]),this.history[r].push(n[r]);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"syncData",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){var t,n,r,a,i,o,s,u,c;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a in t=[],n=[],r=[],this.history)for(i=this.history[a],o=0;o<i.length;++o)"number"!==typeof i[o]&&(s=i[o],t.push(s.data()),n.push(a),r.push(o));return e.next=6,Promise.all(t);case 6:for(u=e.sent,c=0;c<u.length;++c)this.history[n[c]][r[c]].dispose(),this.history[n[c]][r[c]]=u[c][0];case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(AN),LN=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e,r){var a;if((0,Se.Z)(this,n),(a=t.call(this)).currentEpoch=0,a.nowFunc=e.nowFunc,a.nextFrameFunc=e.nextFrameFunc||Wx,a.yieldEvery=r||"auto","auto"===a.yieldEvery&&(a.yieldEvery=125),"never"===a.yieldEvery&&null!=e.onYield)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");return Mc(a.yieldEvery)&&(a.maybeWait=function(e,t,n){var r,a=null!=n?n():Bh();return function(){var i=null!=n?n():Bh();return i-a<t?r:(a=i,r=e.apply(void 0,arguments))}}(a.maybeWait.bind((0,we.Z)(a)),a.yieldEvery,a.nowFunc)),a.trainBegin=e.onTrainBegin,a.trainEnd=e.onTrainEnd,a.epochBegin=e.onEpochBegin,a.epochEnd=e.onEpochEnd,a.batchBegin=e.onBatchBegin,a.batchEnd=e.onBatchEnd,a.yield=e.onYield,a}return(0,Te.Z)(n,[{key:"maybeWait",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t,n,r){var a;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=[],null==this.yield){e.next=5;break}return e.next=4,CN(r);case 4:a.push(this.yield(t,n,r));case 5:return a.push(this.nextFrameFunc()),e.next=8,Promise.all(a);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"onEpochBegin",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t,n){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentEpoch=t,null==this.epochBegin){e.next=6;break}return e.next=4,CN(n);case 4:return e.next=6,this.epochBegin(t,n);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t,n){var r;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],null==this.epochEnd){e.next=5;break}return e.next=4,CN(n);case 4:r.push(this.epochEnd(t,n));case 5:return"epoch"===this.yieldEvery&&r.push(this.nextFrameFunc()),e.next=8,Promise.all(r);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchBegin",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t,n){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.batchBegin){e.next=5;break}return e.next=3,CN(n);case 3:return e.next=5,this.batchBegin(t,n);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchEnd",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t,n){var r;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],null==this.batchEnd){e.next=5;break}return e.next=4,CN(n);case 4:r.push(this.batchEnd(t,n));case 5:return"batch"===this.yieldEvery?r.push(this.nextFrameFunc()):Mc(this.yieldEvery)&&r.push(this.maybeWait(this.currentEpoch,t,n)),e.next=8,Promise.all(r);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onTrainBegin",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.trainBegin){e.next=5;break}return e.next=3,CN(t);case 3:return e.next=5,this.trainBegin(t);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onTrainEnd",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.trainEnd){e.next=5;break}return e.next=3,CN(t);case 3:return e.next=5,this.trainEnd(t);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(AN);function FN(e,t){return null==e&&(e={}),e instanceof AN?[e]:Array.isArray(e)&&e[0]instanceof AN?e:wT(e).map((function(e){return new LN(e,t)}))}var MN=function(){function e(){(0,Se.Z)(this,e)}return(0,Te.Z)(e,null,[{key:"registerCallbackConstructor",value:function(t,n){kc(t>=0&&Number.isInteger(t),(function(){return"Verbosity level is expected to be an integer >= 0, "+"but got ".concat(t)})),e.checkForDuplicate(n),null==e.constructors[t]&&(e.constructors[t]=[]),e.constructors[t].push(n)}},{key:"checkForDuplicate",value:function(t){for(var n in e.constructors){e.constructors[+n].forEach((function(e){if(e===t)throw new hT("Duplicate callback constructor.")}))}}},{key:"clear",value:function(){e.constructors={}}},{key:"createCallbacks",value:function(t){var n=[];for(var r in e.constructors){var a=+r;t>=a&&n.push.apply(n,(0,me.Z)(e.constructors[a]))}return n.map((function(e){return new e}))}}]),e}();function PN(e,t,n,r,a,i,o,s,u){var c=new ON,l=[new DN].concat((0,me.Z)(MN.createCallbacks(t)));null!=e&&l.push.apply(l,(0,me.Z)(e)),l.push(c);var d=new RN(l);return d.setParams({epochs:n,initialEpoch:r,samples:a,steps:i,batchSize:o,verbose:t,doValidation:s,metrics:u}),{callbackList:d,history:c}}MN.constructors={};var zN=n(1120);function BN(){return BN="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=(0,zN.Z)(e)););return e}(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(arguments.length<3?e:n):a.value}},BN.apply(this,arguments)}function VN(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return NT(e,gm.getMap().classNameMap,t,"layer",n)}function UN(e,t){return rm((function(){"float32"!==e.dtype&&(e=Qv(e,"float32"));var n=Hy(kE(e),t,!0),r=wm(n.shape,uE()),a=dm(_m(n,r));return cm(e,a)}))}function WN(e,t){return rm((function(){return Ab(kE(Sm(t,e)),-1)}))}function jN(e,t){return rm((function(){return Ab(Em(Sm(t,e)),-1)}))}function GN(e,t){return rm((function(){var n=Sm(e,t),r=cy(Em(e),uE(),Number.MAX_VALUE),a=Em(cm(n,r));return lm(100,Ab(a,-1))}))}function HN(e,t){return rm((function(){var n=cy(t,uE(),Number.MAX_VALUE),r=pb(sm(1,n)),a=cy(e,uE(),Number.MAX_VALUE),i=pb(sm(1,a));return Ab(kE(Sm(r,i)),-1)}))}function qN(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return rm((function(){if(n)t=Lk(t);else{var r=Hy(t,t.shape.length-1,!0);t=cm(t,r)}return t=cy(t,uE(),1-uE()),mb(Hy(lm(Qv(e,"float32"),pb(t)),t.shape.length-1))}))}function $N(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return rm((function(){var r=Qv(tb(function(e){var t=[aE(e.shape)];return Gg(e,t)}(e)),"int32"),a=(t=cy(t,uE(),1-uE())).shape;return qN(Gg(Ub(r,a[a.length-1]),a),t,n)}))}function KN(e,t){return rm((function(){var n;return n=cy(t,uE(),1-uE()),n=pb(cm(n,Sm(1,n))),Ab(function(e,t){if(!Sc(e.shape,t.shape))throw new hT("logits and labels must have the same shape, but got shapes "+"".concat(JSON.stringify(e.shape)," and ").concat(JSON.stringify(t.shape)));return rm((function(){var n=vk(t),r=mb(Em(t));return sm(Sm(n,lm(t,e)),vb(Xy(r)))}))}(e,n),-1)}))}function XN(e,t){return rm((function(){var n=cy(e,uE(),1),r=cy(t,uE(),1);return Hy(lm(e,pb(cm(n,r))),-1)}))}function YN(e,t){return rm((function(){var n=UN(e,-1),r=UN(t,-1),a=lm(n,r);return mb(Hy(a,-1))}))}var QN={meanSquaredError:WN,meanAbsoluteError:jN,meanAbsolutePercentageError:GN,meanSquaredLogarithmicError:HN,squaredHinge:function(e,t){return rm((function(){var n=_m(0,Sm(1,lm(e,t)));return Ab(kE(n),-1)}))},hinge:function(e,t){return rm((function(){var n=_m(0,Sm(1,lm(e,t)));return Ab(n,-1)}))},categoricalHinge:function(e,t){return rm((function(){var n=Hy(lm(e,t),-1),r=jy(lm(Sm(1,e),t),-1);return _m(0,sm(1,Sm(r,n)))}))},logcosh:function(e,t){return rm((function(){var n=Math.log(2),r=Sm(t,e),a=Sm(sm(r,gb(lm(-2,r))),n);return Ab(a,-1)}))},categoricalCrossentropy:qN,sparseCategoricalCrossentropy:$N,binaryCrossentropy:KN,kullbackLeiblerDivergence:XN,poisson:function(e,t){return rm((function(){var n=pb(sm(uE(),t));return Ab(Sm(t,lm(e,n)),-1)}))},cosineProximity:YN};function JN(e){if("string"===typeof e){if(e in QN)return QN[e];var t="Unknown loss ".concat(e);throw e.toLowerCase().includes("softmaxcrossentropy")&&(t="Unknown loss ".concat(e,". ")+'Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy'),new hT(t)}return e}function eC(e,t){return rm((function(){var n=lm(.5,Wb(t)),r=cE(rb(t,n),e.dtype);return Ab(_y(e,r),-1)}))}function tC(e,t){return rm((function(){return cE(_y(Ig(e,-1),Ig(t,-1)),"float32")}))}function nC(e,t){return rm((function(){return Qv(Hy(wb(_y(e,1),_y(t,1))),"float32")}))}function rC(e,t){return KN(e,t)}function aC(e,t){return e.rank===t.rank&&(e=Uk(e,[e.rank-1])),(t=Ig(t,-1)).dtype!==e.dtype&&(t=Qv(t,e.dtype)),Qv(_y(e,t),"float32")}var iC=qN,oC=$N,sC={binaryAccuracy:eC,categoricalAccuracy:tC,precision:function(e,t){return rm((function(){var n=nC(e,t),r=function(e,t){return rm((function(){return Qv(Hy(wb(_y(e,0),_y(t,1))),"float32")}))}(e,t),a=sm(n,r);return Qv(Ay(rb(a,0),cm(n,a),0),"float32")}))},categoricalCrossentropy:iC,sparseCategoricalCrossentropy:oC,mse:WN,MSE:WN,mae:jN,MAE:jN,mape:GN,MAPE:GN,cosine:YN};function uC(e){if(yT(null!==e,"Unknown LossOrMetricFn ".concat(e)),"string"===typeof e)return e;for(var t,n=0,r=Object.keys(QN);n<r.length;n++){var a=r[n];if(QN[a]===e){t=a;break}}if(void 0!==t)return t;for(var i=0,o=Object.keys(sC);i<o.length;i++){var s=o[i];if(sC[s]===e){t=s;break}}return void 0!==t?t:e.name}var cC=1048576;function lC(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==e||"object"!==typeof e||Object.getPrototypeOf(e)!==Object.prototype||!dC(e))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){var r=JSON.stringify(e);r.length>cC&&console.warn('User-defined metadata of model "'.concat(t,'" is too large in ')+"size (length=".concat(r.length," when serialized). It is not ")+"recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= "+"".concat(cC,"."))}}function dC(e){if(null===e)return!0;if("object"===typeof e){if(Object.getPrototypeOf(e)===Object.prototype){for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t];if("string"!==typeof r)return!1;if(!dC(e[r]))return!1}return!0}if(Array.isArray(e)){var a,i=(0,Ht.Z)(e);try{for(i.s();!(a=i.n()).done;){if(!dC(a.value))return!1}}catch(yhe){i.e(yhe)}finally{i.f()}return!0}return!1}var o=typeof e;return"string"===o||"number"===o||"boolean"===o}function fC(e,t,n){var r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:console.log,i=function(e){var t=!0,n=[],r=[];for(var a in e.nodesByDepth)n.push(e.nodesByDepth[a]);for(var i=0,o=n;i<o.length;i++){var s=o[i];if(s.length>1||1===s.length&&s[0].inboundLayers.length>1){t=!1;break}r.push.apply(r,(0,me.Z)(s))}if(t){var u,c=(0,Ht.Z)(e.layers);try{for(c.s();!(u=c.n()).done;){var l,d=u.value,f=!1,h=(0,Ht.Z)(d.inboundNodes);try{for(h.s();!(l=h.n()).done;){var p=l.value;if(-1!==r.indexOf(p)){if(f){t=!1;break}f=!0}}}catch(yhe){h.e(yhe)}finally{h.f()}if(!t)break}}catch(yhe){c.e(yhe)}finally{c.f()}}return t}(e),o=["Layer (type)","Input Shape","Output shape","Param #"];if(i?(t=t||90,n=n||[.32,.61,.89,1]):(t=t||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map((function(e){return Math.floor(t*e)}))),!i)for(var s in o.push("Receives inputs"),r=[],e.nodesByDepth){var u;(u=r).push.apply(u,(0,me.Z)(e.nodesByDepth[s]))}a("_".repeat(t)),hC(o,n,a),a("=".repeat(t));for(var c=e.layers,l=0;l<c.length;++l)i?pC(c[l],n,a):vC(c[l],n,r,a),a((l===c.length-1?"=":"_").repeat(t));e.checkTrainableWeightsConsistency();var d=function(e){var t;t=null!=e.collectedTrainableWeights?YE(e.collectedTrainableWeights):YE(e.trainableWeights);return t}(e),f=YE(e.nonTrainableWeights);a("Total params: ".concat(d+f)),a("Trainable params: ".concat(d)),a("Non-trainable params: ".concat(f)),a("_".repeat(t))}function hC(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log,r="",a=0;a<e.length;++a)a>0&&(r=r.slice(0,r.length-1)+" "),r=(r+=e[a]).slice(0,t[a]),r+=" ".repeat(t[a]-r.length);n(r)}function pC(e,t,n){var r,a;try{a=e.inboundNodes.map((function(e){return JSON.stringify(e.inputShapes)})).join(",")}catch(yhe){a="multiple"}try{r=JSON.stringify(e.outputShape)}catch(yhe){r="multiple"}var i=e.name,o=e.getClassName();hC(["".concat(i," (").concat(o,")"),a,r,e.countParams().toString()],t,n)}function vC(e,t,n,r){var a,i;try{i=e.inboundNodes.map((function(e){return JSON.stringify(e.inputShapes)})).join(",")}catch(yhe){i="multiple"}try{a=JSON.stringify(e.outputShape)}catch(yhe){a="multiple"}var o,s=[],u=(0,Ht.Z)(e.inboundNodes);try{for(u.s();!(o=u.n()).done;){var c=o.value;if(!(null!=n&&n.length>0&&-1===n.indexOf(c)))for(var l=0;l<c.inboundLayers.length;++l){var d=c.inboundLayers[l].name,f=c.nodeIndices[l],h=c.tensorIndices[l];s.push("".concat(d,"[").concat(f,"][").concat(h,"]"))}}}catch(yhe){u.e(yhe)}finally{u.f()}var p=e.name,v=e.getClassName(),m=0===s.length?"":s[0];hC(["".concat(p," (").concat(v,")"),i,a,e.countParams().toString(),m],t,r);for(var g=1;g<s.length;++g)hC(["","","","",s[g]],t,r)}function mC(e,t,n){return("inboundNodes"===e||"outputLayers"===e||"inputLayers"===e)&&0===t&&"string"===typeof n}function gC(e,t){if(null===e)return null;if("string"===typeof e)return IT(e);if("number"===typeof e||"boolean"===typeof e)return e;if(e instanceof Array){for(var n=[],r=e.length,a=0;a<r;++a){var i=e[a];mC(t,a,i)?n.push(i):n.push(gC(i,t))}return n}for(var o={},s=0,u=Object.keys(e);s<u.length;s++){var c=u[s],l=e[c];if("name"===c&&"string"===typeof l)o[c]=l;else{var d=IT(c);o[d]=gC(l,d)}}return o}function yC(e,t){if(null===e||void 0===e)return null;if("string"===typeof e)return xT(e);if("number"===typeof e||"boolean"===typeof e)return e;if(e instanceof Array){for(var n=[],r=e.length,a=0;a<r;++a){var i=e[a];mC(t,a,i)?n.push(i):n.push(yC(i,t))}return n}for(var o={},s=0,u=Object.keys(e);s<u.length;s++){var c=u[s],l=e[c],d=xT(c);o[d]="name"!==c&&"className"!==c||"string"!==typeof l?yC(l,c):l}return o}var bC="4.3.0",kC=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r;if((0,Se.Z)(this,n),(r=t.call(this,{})).containerNodes=new Set,r.name=e.name,null==r.name){var a=r.getClassName().toLowerCase();r.name=zT(a)}if(r.supportsMasking=!1,r.trainable_=!0,Array.isArray(e.inputs)?r.inputs=e.inputs.slice():r.inputs=[e.inputs],Array.isArray(e.outputs)?r.outputs=e.outputs.slice():r.outputs=[e.outputs],ZT(r.inputs).length!==r.inputs.length)throw new hT("The list of inputs passed to the model is redundant. All inputs should only appear once. Found: "+"".concat(r.inputs.map((function(e){return e.name}))));ZT(r.outputs).length!==r.outputs.length&&console.warn("The list of outputs passed to the model is redundant. All outputs should only appear once. Found: "+"".concat(r.outputs.map((function(e){return e.name})))),r.inputLayers=[],r.inputLayersNodeIndices=[],r.inputLayersTensorIndices=[],r.outputLayers=[],r.outputLayersNodeIndices=[],r.outputLayersTensorIndices=[],r.layers=[],r.internalContainerRefs=[];var i,o=(0,Ht.Z)(r.outputs);try{for(o.s();!(i=o.n()).done;){var s=i.value,u=s.sourceLayer,c=s.nodeIndex,l=s.tensorIndex;r.outputLayers.push(u),r.outputLayersNodeIndices.push(c),r.outputLayersTensorIndices.push(l)}}catch(yhe){o.e(yhe)}finally{o.f()}var d,f=(0,Ht.Z)(r.inputs);try{for(f.s();!(d=f.n()).done;){var h=d.value,p=h.sourceLayer,v=h.nodeIndex,m=h.tensorIndex;yT(0===v,"input layer has >1 nodes"),yT(0===m,"input layer has >1 tensors"),r.inputLayers.push(p),r.inputLayersNodeIndices.push(v),r.inputLayersTensorIndices.push(m)}}catch(yhe){f.e(yhe)}finally{f.f()}r.inputNames=[],r.outputNames=[],r.feedInputShapes=[],r.feedInputNames=[],r.feedOutputNames=[];for(var g=0;g<r.inputLayers.length;g++){var y=r.inputLayers[g];if(!(y instanceof cN))throw new TypeError("Input layers to a LayersModel must be InputLayer objects. "+"Received inputs: ".concat(e.inputs,". ")+"Input ".concat(g," (0-based) originates ")+"from layer type ".concat(y.getClassName(),"."));r.inputNames.push(y.name),r.feedInputShapes.push(y.batchInputShape),r.feedInputNames.push(y.name)}var b,k=(0,Ht.Z)(r.outputLayers);try{for(k.s();!(b=k.n()).done;){var w=b.value;r.outputNames.push(w.name)}}catch(yhe){k.e(yhe)}finally{k.f()}r.internalInputShapes=r.inputs.map((function(e){return e.shape})),r.internalOutputShapes=r.outputs.map((function(e){return e.shape}));var x,I={},S={},T={},E={},N={},C=[],Z=function e(t,a,i,o,s,u){null!=o&&null!=s&&null!=u||(o=t.sourceLayer,s=t.nodeIndex,u=t.tensorIndex);var c=o.inboundNodes[s];if(-1!==i.indexOf(c))throw new fT("The tensor ".concat(t.name,' at layer "').concat(o.name,'" ')+"is part of a cycle.");if(-1===a.indexOf(c)){r.containerNodes.add(n.nodeKey(o,s)),o.id in N||(N[o.id]=Object.keys(N).length),-1===i.indexOf(c)&&i.push(c);for(var l=c.inboundLayers.length,d=0;d<l;d++){e(c.inputTensors[d],a,i,c.inboundLayers[d],c.nodeIndices[d],c.tensorIndices[d])}for(a.push(c);i.indexOf(c)>=0;)i.splice(i.indexOf(c),1);C.push(c)}},_=[],A=[],R=(0,Ht.Z)(r.outputs);try{for(R.s();!(x=R.n()).done;){Z(x.value,_,A)}}catch(yhe){R.e(yhe)}finally{R.f()}var D,O=C.slice().reverse(),L=(0,Ht.Z)(O);try{for(L.s();!(D=L.n()).done;){var F=D.value;S[F.id]=F,F.id in I||(I[F.id]=0);var M=I[F.id],P=null==T[F.outboundLayer.id]?0:T[F.outboundLayer.id];M=Math.max(M,P),T[F.outboundLayer.id]=M,E[F.outboundLayer.id]=F.outboundLayer,I[F.id]=M;for(var z=0;z<F.inboundLayers.length;z++){var B=F.inboundLayers[z],V=F.nodeIndices[z],U=B.inboundNodes[V],W=null==I[U.id]?0:I[U.id];I[U.id]=Math.max(M+1,W),S[U.id]=U}}}catch(yhe){L.e(yhe)}finally{L.f()}var j={};for(var G in I){var H=I[G];H in j||(j[H]=[]),j[H].push(S[G])}var q={};for(var $ in T){var K=T[$];K in q||(q[K]=[]),q[K].push(E[$])}var X=Object.keys(q).map((function(e){return parseInt(e,10)})).sort(CT);r.layers=[];var Y,Q=(0,Ht.Z)(X);try{for(Q.s();!(Y=Q.n()).done;){var J=q[Y.value];J.sort((function(e,t){var n=N[e.id],r=N[t.id];return n<r?-1:n>r?1:0}));var ee,te=(0,Ht.Z)(J);try{for(te.s();!(ee=te.n()).done;){var ne=ee.value;ne instanceof n&&r.internalContainerRefs.push(ne),r.layers.push(ne)}}catch(yhe){te.e(yhe)}finally{te.f()}}}catch(yhe){Q.e(yhe)}finally{Q.f()}r.layersByDepth=q,X=Object.keys(j).map((function(e){return parseInt(e,10)})).sort(CT);var re,ae=r.inputs.slice(),ie=[],oe=(0,Ht.Z)(X);try{for(oe.s();!(re=oe.n()).done;){var se,ue=re.value,ce=(0,Ht.Z)(j[ue]);try{for(ce.s();!(se=ce.n()).done;){var le=se.value,de=le.outboundLayer;if(null!=de){var fe,he=(0,Ht.Z)(le.inputTensors);try{for(he.s();!(fe=he.n()).done;){var pe=fe.value;if(-1===ae.indexOf(pe))throw new fT("Graph disconnected: cannot obtain value for tensor ".concat(pe)+' at layer "'.concat(de.name,'". ')+"The following previous layers were accessed without "+"issue: ".concat(ie))}}catch(yhe){he.e(yhe)}finally{he.f()}var ve,me=(0,Ht.Z)(le.outputTensors);try{for(me.s();!(ve=me.n()).done;){var ge=ve.value;ae.push(ge)}}catch(yhe){me.e(yhe)}finally{me.f()}ie.push(de.name)}}}catch(yhe){ce.e(yhe)}finally{ce.f()}}}catch(yhe){oe.e(yhe)}finally{oe.f()}r.nodesByDepth=j;var ye,be=r.layers.map((function(e){return e.name})),ke=(0,Ht.Z)(be);try{var xe=function(){var e=ye.value,t=be.filter((function(t){return t===e})).length;if(1!==t)throw new fT('The name "'.concat(e,'" is used ').concat(t," times ")+"in the model. All layer names should be unique. Layer names: "+JSON.stringify(be))};for(ke.s();!(ye=ke.n()).done;)xe()}catch(yhe){ke.e(yhe)}finally{ke.f()}return r.outboundNodes=[],r.inboundNodes=[],new iN({outboundLayer:(0,we.Z)(r),inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:r.inputs,outputTensors:r.outputs,inputMasks:r.inputs.map((function(e){return null})),outputMasks:r.outputs.map((function(e){return null})),inputShapes:r.inputs.map((function(e){return e.shape})),outputShapes:r.outputs.map((function(e){return e.shape}))}),r.built=!0,r._refCount=1,r}return(0,Te.Z)(n,[{key:"assertNotDisposed",value:function(){if(0===this._refCount)throw new Error("Container '".concat(this.name,"' is already disposed."))}},{key:"dispose",value:function(){this.assertNotDisposed();var e={refCountAfterDispose:null,numDisposedVariables:0};if(0===--this._refCount){var t,n=(0,Ht.Z)(this.layers);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.numDisposedVariables+=r.dispose().numDisposedVariables}}catch(yhe){n.e(yhe)}finally{n.f()}var a,i=(0,Ht.Z)(this.internalContainerRefs);try{for(i.s();!(a=i.n()).done;){var o=a.value;e.numDisposedVariables+=o.dispose().numDisposedVariables}}catch(yhe){i.e(yhe)}finally{i.f()}}return e.refCountAfterDispose=this._refCount,e}},{key:"trainable",get:function(){return this.trainable_},set:function(e){this.layers.forEach((function(t){t._trainableWeights.forEach((function(t){return t.trainable=e}))})),this.trainable_=e}},{key:"trainableWeights",get:function(){if(this._trainableWeights.length>0)throw new hT("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];var e,t=[],n=(0,Ht.Z)(this.layers);try{for(n.s();!(e=n.n()).done;){var r=e.value;t=t.concat(r.trainableWeights)}}catch(yhe){n.e(yhe)}finally{n.f()}return t}},{key:"nonTrainableWeights",get:function(){var e,t=[],n=(0,Ht.Z)(this.layers);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push.apply(t,(0,me.Z)(r.nonTrainableWeights))}}catch(yhe){n.e(yhe)}finally{n.f()}if(!this.trainable){var a,i=[],o=(0,Ht.Z)(this.layers);try{for(o.s();!(a=o.n()).done;){var s=a.value;i.push.apply(i,(0,me.Z)(s.trainableWeights))}}catch(yhe){o.e(yhe)}finally{o.f()}return i.concat(t)}return t}},{key:"weights",get:function(){return this.trainableWeights.concat(this.nonTrainableWeights)}},{key:"loadWeights",value:function(e){var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r={},a=0,i=(0,Ht.Z)(this.layers);try{for(i.s();!(t=i.n()).done;){var o,s=t.value,u=(0,Ht.Z)(s.weights);try{for(u.s();!(o=u.n()).done;){var c=o.value;if(null!=r[c.originalName])throw new hT("Duplicate weight name: ".concat(c.originalName));r[c.originalName]=c,a++}}catch(yhe){u.e(yhe)}finally{u.f()}}}catch(yhe){i.e(yhe)}finally{i.f()}var l=[];for(var d in e){var f=d;if(null==r[d]){var h=d.split("/");f=h.slice(0,-2).concat([h[h.length-1]]).join("/")}if(null!=r[f])l.push([r[f],e[d]]);else if(n)throw new hT("Provided weight data has no target variable: ".concat(d));delete r[f]}if(n){var p=[];for(var v in r)p.push(v);if(p.length>0)throw new hT("".concat(p.length," of ").concat(a," weights are not set: ")+"".concat(p))}tN(l)}},{key:"updatedConfig",value:function(){var e=this.getConfig(),t={};return t.className=this.getClassName(),t.config=e,t.kerasVersion="tfjs-layers ".concat(bC),t.backend="TensorFlow.js",t}},{key:"toJSON",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=yC(this.updatedConfig());return t?JSON.stringify(n):n}},{key:"call",value:function(e,t){var n=this;return rm((function(){e=wT(e);for(var r=new lN,a=0;a<n.inputs.length;++a)r.add(n.inputs[a],e[a]);return hN(n.outputs,r,t)}))}},{key:"computeMask",value:function(e,t){var n=this;return rm((function(){var r;return e=wT(e),r=null==t?gT(null,e.length):wT(t),n.runInternalGraph(e,r)[1]}))}},{key:"computeOutputShape",value:function(e){var t=$E(e);if(t.length!==this.inputLayers.length)throw new hT("Invalid inputShape argument ".concat(e,": ")+"model has ".concat(this.inputLayers.length," tensor inputs."));for(var n={},r=0;r<t.length;r++){var a=this.inputLayers[r],i=t[r];n[a.name+"_0_0"]=i}var o=Object.keys(this.nodesByDepth).map((function(e){return parseInt(e,10)})).sort(CT);if(o.length>1){var s,u=(0,Ht.Z)(o);try{for(u.s();!(s=u.n()).done;){var c,l=s.value,d=this.nodesByDepth[l],f=(0,Ht.Z)(d);try{for(f.s();!(c=f.n()).done;){var h=c.value,p=h.outboundLayer;if(-1===this.inputLayers.map((function(e){return e.id})).indexOf(p.id)){for(var v=[],m=0;m<h.inboundLayers.length;m++){var g=h.inboundLayers[m],y=h.nodeIndices[m],b=h.tensorIndices[m],k=n["".concat(g.name,"_").concat(y,"_").concat(b)];v.push(k)}for(var w=$E(p.computeOutputShape(kT(v))),x=p.inboundNodes.indexOf(h),I=0;I<w.length;I++){n["".concat(p.name,"_").concat(x,"_").concat(I)]=w[I]}}}}catch(yhe){f.e(yhe)}finally{f.f()}}}catch(yhe){u.e(yhe)}finally{u.f()}}for(var S=[],T=[],E=0;E<this.outputLayers.length;E++){var N=this.outputLayers[E],C=this.outputLayersNodeIndices[E],Z=this.outputLayersTensorIndices[E],_="".concat(N.name,"_").concat(C,"_").concat(Z);T.push(_)}for(var A=0;A<T.length;A++){var R=T[A];yT(R in n),S.push(n[R])}return kT(S)}},{key:"runInternalGraph",value:function(e,t){null==t&&(t=gT(null,e.length));for(var n={},r=0;r<this.inputs.length;++r){var a=this.inputs[r],i=e[r],o=t[r];n[a.id]=[i,o]}var s,u=Object.keys(this.nodesByDepth).map((function(e){return parseInt(e,10)})).sort(CT),c=(0,Ht.Z)(u);try{for(c.s();!(s=c.n()).done;){var l,d=s.value,f=this.nodesByDepth[d],h=(0,Ht.Z)(f);try{for(h.s();!(l=h.n()).done;){var p,v=l.value,m=v.outboundLayer,g=v.inputTensors,y=v.outputTensors,b=new Array,k=(0,Ht.Z)(g);try{for(k.s();!(p=k.n()).done;){var w=p.value;w.id in n&&b.push(n[w.id])}}catch(yhe){k.e(yhe)}finally{k.f()}if(b.length===g.length){var x={},I=void 0,S=void 0,T=void 0,E=void 0;if(null!=v.callArgs&&(x=v.callArgs),1===b.length){var N=(0,ge.Z)(b[0],2),C=N[0],Z=N[1];null==x.mask&&(x.mask=Z),T=wT(m.call(C,x)),E=wT(m.computeMask(C,Z)),I=[C],S=[Z]}else I=b.map((function(e){return e[0]})),S=b.map((function(e){return e[1]})),null==x.mask&&(x.mask=S),T=wT(m.call(I,x)),E=wT(m.computeMask(I,S));if(m.activityRegularizer)throw new pT("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(var _=0;_<y.length;++_){var A=y[_],R=T[_],D=E[_];n[A.id]=[R,D]}}}}catch(yhe){h.e(yhe)}finally{h.f()}}}catch(yhe){c.e(yhe)}finally{c.f()}var O,L=[],F=[],M=[],P=(0,Ht.Z)(this.outputs);try{for(P.s();!(O=P.n()).done;){var z=O.value;yT(z.id in n,"Could not compute output ".concat(z.name," : ").concat(z.id));var B=(0,ge.Z)(n[z.id],2),V=B[0],U=B[1];M.push(V.shape),L.push(V),F.push(U)}}catch(yhe){P.e(yhe)}finally{P.f()}return[L,F,M]}},{key:"buildNodeConversionMap",value:function(e){var t,r,a={},i=(0,Ht.Z)(this.layers);try{for(i.s();!(r=i.n()).done;){var o=r.value;t=o instanceof n?1:0;for(var s=0;s<o.inboundNodes.length;s++){var u=n.nodeKey(o,s);this.containerNodes.has(u)&&(a[u]=t,t+=1)}}}catch(yhe){i.e(yhe)}finally{i.f()}return a}},{key:"getLayer",value:function(e,t){if(null!=t){if(this.layers.length<=t)throw new hT("Was asked to retrieve layer at index ".concat(t,", but model only ")+"has ".concat(this.layers.length," layer(s)."));return this.layers[t]}if(null==e)throw new hT("Provide either a layer name or layer index");var n,r=(0,Ht.Z)(this.layers);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(a.name===e)return a}}catch(yhe){r.e(yhe)}finally{r.f()}throw new hT("No such layer: ".concat(e))}},{key:"calculateLosses",value:function(){var e=this;return rm((function(){var t,r=[],a=(0,Ht.Z)(e.layers);try{for(a.s();!(t=a.n()).done;)for(var i=t.value,o=0;o<i.inboundNodes.length;++o){var s=n.nodeKey(i,o);e.containerNodes.has(s)&&r.push.apply(r,(0,me.Z)(i.calculateLosses()))}}catch(yhe){a.e(yhe)}finally{a.f()}return r}))}},{key:"getConfig",value:function(){var e,t={name:this.name},r=this.buildNodeConversionMap(this.layers),a=[],i=(0,Ht.Z)(this.layers);try{for(i.s();!(e=i.n()).done;){for(var o=e.value,s=o.getClassName(),u=o.getConfig(),c=[],l=0;l<o.inboundNodes.length;l++){var d=o.inboundNodes[l],f=n.nodeKey(o,l),h={};if(this.containerNodes.has(f)){if(d.callArgs)try{JSON.stringify(d.callArgs),h=d.callArgs}catch(yhe){console.warn("Layer ".concat(o.name," was passed ")+"non-serializable keyword arguments: "+"".concat(d.callArgs,". They will not be included ")+"in the serialized model (and thus will be missing at deserialization time)."),h={}}if(d.inboundLayers.length>0){for(var p=[],v=0;v<d.inboundLayers.length;v++){var m=d.inboundLayers[v],g=d.nodeIndices[v],y=d.tensorIndices[v],b=r[n.nodeKey(m,g)];null==b&&(b=0),p.push([m.name,b,y,h])}c.push(p)}}}var k={};k.name=o.name,k.className=s,k.config=u,k.inboundNodes=c,a.push(k)}}catch(yhe){i.e(yhe)}finally{i.f()}t.layers=a;for(var w=[],x=0;x<this.inputLayers.length;x++){var I=this.inputLayers[x],S=this.inputLayersNodeIndices[x],T=n.nodeKey(I,S);if(this.containerNodes.has(T)){var E=r[T];null!==E&&void 0!==E||(E=0);var N=this.inputLayersTensorIndices[x];w.push([I.name,E,N])}}t.inputLayers=w;for(var C=[],Z=0;Z<this.outputLayers.length;Z++){var _=this.outputLayers[Z],A=this.outputLayersNodeIndices[Z],R=n.nodeKey(_,A);if(this.containerNodes.has(R)){var D=r[R];null!==D&&void 0!==D||(D=0);var O=this.outputLayersTensorIndices[Z];C.push([_.name,D,O])}}return t.outputLayers=C,t}},{key:"stateful",get:function(){if(this._stateful)throw new hT("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");var e,t=(0,Ht.Z)(this.layers);try{for(t.s();!(e=t.n()).done;){if(e.value.stateful)return!0}}catch(yhe){t.e(yhe)}finally{t.f()}return!1}},{key:"resetStates",value:function(){var e=this;rm((function(){e.layers.forEach((function(e){e.stateful&&e.resetStates()}))}))}}],[{key:"fromConfig",value:function(e,t){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r={},a={};function i(e,t){e.name in a?a[e.name].push(t):a[e.name]=[t]}function o(e,t){var n,a,o=[],s=(0,Ht.Z)(t);try{for(s.s();!(a=s.n()).done;){var u=a.value,c=u[0],l=u[1],d=u[2];if(n=null==u[3]?{}:u[3],!(c in r))return void i(e,t);var f=r[c];if(f.inboundNodes.length<=l)return void i(e,t);var h=f.inboundNodes[l];o.push(h.outputTensors[d])}}catch(yhe){s.e(yhe)}finally{s.f()}o.length>0&&e.apply(kT(o),n)}function s(e){var a=e.name,o=VN(e,null!=t.customObjects?t.customObjects:{});o.setFastWeightInitDuringBuild(n),r[a]=o,e.inboundNodes.forEach((function(e){if(!(e instanceof Array))throw new hT("Corrupted configuration, expected array for nodeData: ".concat(e));i(o,e)}))}var u,c=t.name,l=t.layers,d=(0,Ht.Z)(l);try{for(d.s();!(u=d.n()).done;){s(u.value)}}catch(yhe){d.e(yhe)}finally{d.f()}for(;!_T(a);){var f,h=(0,Ht.Z)(l);try{for(h.s();!(f=h.n()).done;){var p=f.value,v=r[p.name];if(v.name in a){var m=a[v.name];delete a[v.name];var g,y=(0,Ht.Z)(m);try{for(y.s();!(g=y.n()).done;){o(v,g.value)}}catch(yhe){y.e(yhe)}finally{y.f()}}}}catch(yhe){h.e(yhe)}finally{h.f()}}var b,k=[],w=[],x=t.inputLayers,I=(0,Ht.Z)(x);try{for(I.s();!(b=I.n()).done;){var S=b.value,T=S[0],E=S[1],N=S[2];yT(T in r);var C=r[T].inboundNodes[E].outputTensors;k.push(C[N])}}catch(yhe){I.e(yhe)}finally{I.f()}var Z,_=t.outputLayers,A=(0,Ht.Z)(_);try{for(A.s();!(Z=A.n()).done;){var R=Z.value,D=R[0],O=R[1],L=R[2];yT(D in r);var F=r[D].inboundNodes[O].outputTensors;w.push(F[L])}}catch(yhe){A.e(yhe)}finally{A.f()}return new e({inputs:k,outputs:w,name:c})}}]),n}(sN);function wC(e,t,n){var r=t.length;if(null==e||Array.isArray(e)&&0===e.length)return t.map((function(e){return null}));if(1===r)return Array.isArray(e)&&1===e.length?e:"object"===typeof e&&t[0]in e?[e[t[0]]]:[e];if(Array.isArray(e)){if(e.length!==r)throw new Error("Provided ".concat(n," is an array of ").concat(e.length," ")+"element(s), but the model has ".concat(r," outputs. ")+"Make sure a set of weights is provided for each model output.");return e}if("object"===typeof e&&Object.keys(e).length>0&&"object"===typeof e[Object.keys(e)[0]]){var a=[];return t.forEach((function(t){t in e?a.push(e[t]):a.push(null)})),a}throw new Error("The model has multiple (".concat(r,") outputs, ")+"so ".concat(n," must be either an array with ")+"".concat(r," elements or an object with ").concat(t," keys. ")+"Provided ".concat(n," not understood: ").concat(JSON.stringify(e)))}function xC(e,t){return wC(e,t,"classWeight")}function IC(e,t,n,r){return SC.apply(this,arguments)}function SC(){return SC=(0,ke.Z)((0,be.Z)().mark((function e(t,n,r,a){var i,o,s;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n&&null==a){e.next=2;break}throw new Error("Support sampleWeight is not implemented yet");case 2:if(null==r){e.next=15;break}return i=rm((function(){if(1===t.shape.length)return Jv(t);if(2===t.shape.length){if(t.shape[1]>1){return Ig(t,1)}if(1===t.shape[1])return Gg(t,[t.shape[0]]);throw new Error("Encountered unexpected last-dimension size (".concat(t.shape[1],") ")+"during handling of class weights. The size is expected to be >= 1.")}throw new Error("Unexpected rank of target (y) tensor (".concat(t.rank,") during ")+"handling of class weights. The rank is expected to be 1 or 2.")})),e.t0=Array,e.next=7,i.data();case 7:return e.t1=e.sent,o=e.t0.from.call(e.t0,e.t1),am(i),s=[],o.forEach((function(e){if(null==r[e])throw new Error("classWeight must contain all classes in the training data. "+"The class ".concat(e," exists in the data but not in ")+"classWeight");s.push(r[e])})),e.abrupt("return",qk(s,"float32"));case 15:return e.abrupt("return",null);case 16:case"end":return e.stop()}}),e)}))),SC.apply(this,arguments)}function TC(e,t){return lm(e,t)}var EC=32;function NC(e,t){var n,r,a=t;n=a.xs,r=a.ys,kc(null!=n&&null!=r,(function(){return"A Dataset iterator for fitDataset() is expected to generate objects of the form `{xs: xVal, ys: yVal}`, where the two values may be `tf.Tensor`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates "+"".concat(t)}));var i=CC("input",e.inputNames,n),o=CC("output",e.outputNames,r),s=i[0].shape[0];kc(i.length===e.inputs.length,(function(){return"LayersModel has ".concat(e.inputs.length," inputs, but the dataset ")+"provides ".concat(i.length," inputs.  (Expected input keys: ")+"".concat(JSON.stringify(e.inputNames),")")})),kc(o.length===e.outputs.length,(function(){return"LayersModel has ".concat(e.outputs.length," outputs, but the dataset ")+"provides ".concat(o.length," outputs.  (Expected output keys: ")+"".concat(JSON.stringify(e.outputNames),")")}));for(var u=function(t){kc(i[t].shape[0]===s,(function(){return"Batch size mismatch: input "+"".concat(e.inputNames[t]," has ").concat(i[t].shape[0],"; ")+"expected  ".concat(s," based on input ").concat(e.inputNames[0],".")}))},c=0;c<i.length;c++)u(c);for(var l=function(t){kc(o[t].shape[0]===s,(function(){return"Batch size mismatch: output "+"".concat(e.outputNames[t]," has ").concat(o[t].shape[0],"; ")+"expected  ".concat(s," based on input ").concat(e.inputNames[0],".")}))},d=0;d<o.length;d++)l(d);return{xs:i,ys:o}}function CC(e,t,n){if(n instanceof ap)return[n];if(Array.isArray(n))return kc(n.length===t.length,(function(){return"Received an array of ".concat(n.length," Tensors, but expected ").concat(t.length," to match the ").concat(e," keys ").concat(t,".")})),n;var r,a=[],i=(0,Ht.Z)(t);try{for(i.s();!(r=i.n()).done;){var o=r.value;if(null==n[o])throw new hT("The feature data generated by the dataset lacks the required "+"".concat(e," key '").concat(o,"'."));a.push(n[o])}}catch(yhe){i.e(yhe)}finally{i.f()}return a}function ZC(e){if(3===e.length)throw new pT("Validation with sample weights is not implemented yet.");return{xs:e[0],ys:e[1]}}function _C(e,t,n){return AC.apply(this,arguments)}function AC(){return AC=(0,ke.Z)((0,be.Z)().mark((function e(t,n,r){var a,i,o,s,u,c,l,d,f,h,p,v,m,g,y,b,k,w,x,I,S,T,E,N,C,Z,_,A,R,D,O,L,F;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=null!=r.batchesPerEpoch,kc(null!=t.optimizer,(function(){return"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."})),kc(null!=r,(function(){return"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."})),kc(null!=r.epochs&&r.epochs>0&&Number.isInteger(r.epochs),(function(){return"For fitDataset(), config.epochs is expected to be a positive "+"integer, but got ".concat(r.epochs)})),kc(!a||r.batchesPerEpoch>0&&Number.isInteger(r.batchesPerEpoch),(function(){return"For fitDataset(), config.batchesPerEpoch is expected to be a "+"positive integer if specified, but got ".concat(r.batchesPerEpoch)})),kc(null==r.validationSplit,(function(){return"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."})),!t.isTraining){e.next=8;break}throw new Error("Cannot start training because another fit() call is ongoing.");case 8:return t.isTraining=!0,e.prev=9,(i=null!=r.validationData)&&(DC(r.validationData)?kc(null==r.validationBatches||r.validationBatches>0&&Number.isInteger(r.validationBatches),(function(){return"For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, "+"but got ".concat(r.validationBatches)})):(u=ZC(r.validationData),o=u.xs,s=u.ys)),c=t.makeTrainFunction(),l=t.getDedupedMetricsNames(),d=i?l.slice().concat(l.map((function(e){return"val_"+e}))):l.slice(),f=FN(r.callbacks,r.yieldEvery),h=null==r.verbose?1:r.verbose,p=PN(f,h,r.epochs,null,null,RC(n,r),null,i,d),v=p.callbackList,m=p.history,v.setModel(t),t.history=m,e.next=22,v.onTrainBegin();case 22:return t.stopTraining_=!1,g=null==r.initialEpoch?0:r.initialEpoch,e.next=26,n.iterator();case 26:y=e.sent;case 27:if(!(g<r.epochs)){e.next=98;break}return b={},e.next=31,v.onEpochBegin(g);case 31:if(k=0,w=0,a){e.next=37;break}return e.next=36,n.iterator();case 36:y=e.sent;case 37:if(a&&!(k<r.batchesPerEpoch)){e.next=91;break}return e.next=40,y.next();case 40:if(x=e.sent,!a||!x.done){e.next=44;break}return console.warn("You provided `batchesPerEpoch` as "+"".concat(r.batchesPerEpoch,", ")+"but your dataset iterator ran out of data after "+"".concat(k," batches; ")+"interrupting training. Make sure that your dataset can generate at least `batchesPerEpoch * epochs` batches (in this case, "+"".concat(r.batchesPerEpoch*r.epochs," batches). ")+"You may need to use the repeat() function when building your dataset."),e.abrupt("break",91);case 44:if(null==x.value){e.next=73;break}return I=NC(t,x.value),S=I.xs,T=I.ys,(E={}).batch=w,E.size=S[0].shape[0],e.next=51,v.onBatchBegin(w,E);case 51:if(N=[],null==r.classWeight){e.next=64;break}C=xC(r.classWeight,t.outputNames),Z=0;case 55:if(!(Z<C.length)){e.next=64;break}return e.t0=N,e.next=59,IC(T[Z],null,C[Z]);case 59:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 61:++Z,e.next=55;break;case 64:for(_=S.concat(T).concat(N),A=c(_),am(_),R=0;R<l.length;++R)D=l[R],O=A[R],E[D]=O,im(O);return e.next=70,v.onBatchEnd(w,E);case 70:_N(E),w++,k++;case 73:if(!(a?k>=r.batchesPerEpoch:x.done)){e.next=87;break}if(!i){e.next=86;break}if(L=void 0,!DC(r.validationData)){e.next=84;break}return e.t2=wT,e.next=80,t.evaluateDataset(r.validationData,{batches:r.validationBatches});case 80:e.t3=e.sent,L=(0,e.t2)(e.t3),e.next=85;break;case 84:L=wT(t.evaluate(o,s,{batchSize:null==r.validationBatchSize?EC:r.validationBatchSize,verbose:0}));case 85:for(F=0;F<t.metricsNames.length;++F)b["val_".concat(t.metricsNames[F])]=L[F];case 86:return e.abrupt("break",91);case 87:if(!t.stopTraining_){e.next=89;break}return e.abrupt("break",91);case 89:e.next=37;break;case 91:return e.next=93,v.onEpochEnd(g,b);case 93:if(g++,!t.stopTraining_){e.next=96;break}return e.abrupt("break",98);case 96:e.next=27;break;case 98:return e.next=100,v.onTrainEnd();case 100:return e.next=102,t.history.syncData();case 102:return e.abrupt("return",t.history);case 103:return e.prev=103,t.isTraining=!1,e.finish(103);case 106:case"end":return e.stop()}}),e,null,[[9,,103,106]])}))),AC.apply(this,arguments)}function RC(e,t){var n=null;return null!=t.batchesPerEpoch?n=t.batchesPerEpoch:Number.isFinite(e.size)&&(n=e.size),n}function DC(e){return"function"===typeof e.iterator}function OC(e,t,n){return LC.apply(this,arguments)}function LC(){return LC=(0,ke.Z)((0,be.Z)().mark((function e(t,n,r){var a,i,o,s,u,c,l,d,f;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=null!=(r=r||{}).batches,i=t.testFunction,o=[],!(r.verbose>0)){e.next=6;break}throw new pT("Verbose mode is not implemented yet.");case 6:if(kc(!a||r.batches>0&&Number.isInteger(r.batches),(function(){return"Test loop expects `batches` to be a positive integer, but "+"received ".concat(JSON.stringify(r.batches))})),"function"!==typeof n.next){e.next=11;break}e.t0=n,e.next=14;break;case 11:return e.next=13,n.iterator();case 13:e.t0=e.sent;case 14:s=e.t0,u=0,c=0,l=(0,be.Z)().mark((function e(){var n;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.next();case 2:if(n=e.sent,o=rm((function(){if(n.value){var e=NC(t,n.value),r=e.xs,a=e.ys,s=r.concat(a),l=rm((function(){return i(s)}));if(am(s),0===c)for(var d=0;d<l.length;++d)o.push(vm(0));for(var f=s[0].shape[0],h=function(e){var t=l[e],n=o[e];o[e]=rm((function(){return sm(o[e],lm(f,t))})),c>0&&am(n)},p=0;p<l.length;++p)h(p);am(l),u+=f,++c}return o})),!n.done){e.next=7;break}return a&&console.warn("Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least `batches` "+"batches (in this case, ".concat(r.batches," batches). ")+"You may need to use the repeat() function when building your dataset."),e.abrupt("return","break");case 7:case"end":return e.stop()}}),e)}));case 18:if(a&&!(c<r.batches)){e.next=25;break}return e.delegateYield(l(),"t1",20);case 20:if("break"!==e.t1){e.next=23;break}return e.abrupt("break",25);case 23:e.next=18;break;case 25:for(d=0;d<o.length;++d)f=o[d],o[d]=cm(o[d],u),am(f);return e.abrupt("return",kT(o));case 27:case"end":return e.stop()}}),e)}))),LC.apply(this,arguments)}function FC(e){kc(e>0&&Number.isInteger(e),(function(){return"batchSize is required to be a positive integer, but got ".concat(e)}))}function MC(e,t,n){return null==e?[null]:Array.isArray(e)?e.map((function(e){return dE(e,t,n-t)})):dE(e,t,n-t)}function PC(e,t){return rm((function(){return null==e?null:Array.isArray(e)?e.map((function(e){return PC(e,t)})):bE(e,"int32"===t.dtype?t:Qv(t,"int32"))}))}function zC(e,t){for(var n=[],r=0,a=null;r<e;)(a=r+t)>=e&&(a=e),n.push([r,a]),r=a;return n}function BC(e){var t=[];e instanceof ap&&(e=[e]);for(var n=0;n<e.length;++n){var r=e[n];if(1===r.rank)t.push(lE(r,1));else{if(0===r.rank)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");t.push(r)}}return t}function VC(e,t){if(null!=e){var n=[];if(t instanceof ap)n.push(t.id);else if(Array.isArray(t))t.forEach((function(e){return n.push(e.id)}));else if(null!=t)for(var r in t){var a=t[r];n.push(a.id)}var i=[];if(e instanceof ap)-1===n.indexOf(e.id)&&i.push(e);else if(Array.isArray(e))e.forEach((function(e){-1===n.indexOf(e.id)&&i.push(e)}));else if(null!=e)for(var o in e){var s=e[o];-1===n.indexOf(s.id)&&i.push(s)}i.forEach((function(e){e.isDisposed||e.dispose()}))}}function UC(e){return Array.isArray(e)}function WC(e){return!function(e){return e instanceof ap}(e)&&!UC(e)}function jC(e,t,n){var r,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(null==t||0===t.length){if(null!=e){var o=!1;if(UC(e)&&e.length>0)o=!0;else if(WC(e)){for(var s in e)if(e.hasOwnProperty(s)){o=!0;break}}else o=!0;if(o)throw new hT("Error when checking model ".concat(i," expected no data, ")+"but got ".concat(e))}return[]}if(null==e)return t.map((function(e){return null}));if(WC(e)){r=[];var u,c=(0,Ht.Z)(t);try{for(c.s();!(u=c.n()).done;){var l=u.value;if(null==e[l])throw new hT('No data provided for "'.concat(l,'". Need data for each key in: ')+"".concat(t));r.push(e[l])}}catch(yhe){c.e(yhe)}finally{c.f()}}else if(UC(e)){if(e.length!==t.length)throw new hT("Error when checking model ".concat(i,": the Array of ")+"Tensors that you are passing to your model is not the size the "+"model expected. Expected to see ".concat(t.length," Tensor(s), but ")+"instead got the following list of Tensor(s): ".concat(e));r=e}else{if(t.length>1)throw new hT("The model ".concat(i," expects ").concat(t.length," Tensor(s), ")+"but only received one Tensor. Found: Tensor with shape ".concat(e.shape));r=[e]}if(r=BC(r),null!=n)for(var d=0;d<t.length;++d)if(null!=n[d]){var f=r[d];if(f.shape.length!==n[d].length)throw new hT("Error when checking ".concat(i,": expected ").concat(t[d]," ")+"to have ".concat(n[d].length," dimension(s). but got array with ")+"shape ".concat(f.shape));for(var h=0;h<n[d].length;++h)if(0!==h||a){var p=f.shape[h],v=n[d][h];if(null!=v&&v>=0&&p!==v)throw new hT("".concat(i," expected a batch of elements where each ")+"example has shape [".concat(n[d].slice(1,n[d].length),"] ")+"(i.e.,tensor shape [*,".concat(n[d].slice(1,n[d].length),"])")+" but the ".concat(i," received an input with ").concat(f.shape[0])+" examples, each with shape [".concat(f.shape.slice(1,f.shape.length),"]")+" (tensor shape [".concat(f.shape,"])"))}}return r}function GC(e,t,n){var r,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(Array.isArray(e)){if(e.length!==t.length)throw new hT("Error when checking model ".concat(i,": the Array of ")+"Tensors that you are passing to your model is not the size the "+"the model expected. Expected to see ".concat(t.length," Tensor(s),")+" but instead got ".concat(e.length," Tensors(s)."));r=e}else{if(t.length>1)throw new hT("The model expects ".concat(t.length," ").concat(i," Tensors, ")+"but only received one Tensor. Found: array with shape "+"".concat(JSON.stringify(e.shape),"."));r=[e]}if(null!=n)for(var o=0;o<t.length;++o)if(null!=n[o]){var s=r[o];if(s.shape.length!==n[o].length)throw new hT("Error when checking ".concat(i,": expected ").concat(t[o]," ")+"to have ".concat(n[o].length," dimension(s), but got array with ")+"shape ".concat(JSON.stringify(s.shape)));for(var u=0;u<n[o].length;++u)if(0!==u||a){var c=s.shape[u],l=n[o][u];if(null!=l&&l!==c)throw new hT("Error when checking ".concat(i,": expected ")+"".concat(t[o]," to have shape ").concat(JSON.stringify(n[o])," but ")+"got array with shape ".concat(JSON.stringify(s.shape),"."))}}}var HC=function(t){(0,xe.Z)(r,t);var n=(0,Ie.Z)(r);function r(e){var t;return(0,Se.Z)(this,r),(t=n.call(this,e)).isTraining=!1,t}return(0,Te.Z)(r,[{key:"summary",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log;if(!this.built)throw new hT("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");fC(this,e,t,n)}},{key:"compile",value:function(e){var t=this;if(null==e.loss&&(e.loss=[]),this.loss=e.loss,"string"===typeof e.optimizer)this.optimizer_=function(e){var t={Adagrad:function(){return Vx.adagrad(.01)},Adadelta:function(){return Vx.adadelta(1,.95,uE())},Adam:function(){return Vx.adam(.001,.9,.999,uE())},Adamax:function(){return Vx.adamax(.002,.9,.999,uE(),0)},RMSProp:function(){return Vx.rmsprop(.001,.9,0,uE())},SGD:function(){return Vx.sgd(.01)}};if(t.adagrad=t.Adagrad,t.adadelta=t.Adadelta,t.adam=t.Adam,t.adamax=t.Adamax,t.rmsprop=t.RMSProp,t.sgd=t.SGD,e in t)return t[e]();throw new hT("Unknown Optimizer ".concat(e))}(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof bm))throw new hT("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}var n=[];if(Array.isArray(e.loss)||"string"===typeof e.loss||"function"===typeof e.loss)if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new hT("When passing an Array as loss, it should have one entry per "+"model output. The model has ".concat(this.outputs.length," output(s), ")+"but you passed loss=".concat(e.loss,"."));var r=e.loss;n=r.map((function(e){return JN(e)}))}else{var a=JN(e.loss);this.outputs.forEach((function(e){n.push(a)}))}else{for(var i in e.loss=e.loss,e.loss)if(-1===this.outputNames.indexOf(i))throw new hT('Unknown entry in loss dictionary: "'.concat(i,'". ')+"Only expected the following keys: ".concat(this.outputNames));var o,s=(0,Ht.Z)(this.outputNames);try{for(s.s();!(o=s.n()).done;){var u=o.value;null==e.loss[u]&&console.warn('Output "'.concat(u,'" is missing from loss dictionary. We assume ')+"this was done on purpose, and we will not be expecting data "+"to be passed to ".concat(u," during training")),n.push(JN(e.loss[u]))}}catch(yhe){s.e(yhe)}finally{s.f()}}this.lossFunctions=n,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(var c=0;c<this.outputs.length;++c){var l=this.internalOutputShapes[c],d=this.outputNames[c];this.feedOutputNames.push(d),this.feedOutputShapes.push(l),this.feedLossFns.push(this.lossFunctions[c])}var f=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],YT("loss",(function(){for(var e=0;e<t.outputs.length;++e)if(-1===f.indexOf(e)){var n=t.lossFunctions[e];t.outputs.length>1&&(t.metricsTensors.push([n,e]),t.metricsNames.push(t.outputNames[e]+"_loss"))}}));var h=function(e,t){if(null==e||Array.isArray(e)&&0===e.length)return t.map((function(e){return[]}));var n;if("string"===typeof e||"function"===typeof e)n=[e];else{if(!Array.isArray(e)&&"object"!==typeof e)throw new TypeError("Type of metrics argument not understood. Expected an string,"+"function, Array, or Object, found: ".concat(e));n=e}if(Array.isArray(n))return t.map((function(e){return n}));var r,a=[],i=(0,Ht.Z)(t);try{for(i.s();!(r=i.n()).done;){var o=r.value,s=n.hasOwnProperty(o)?n[o]:[];Array.isArray(s)||(s=[s]),a.push(s)}}catch(yhe){i.e(yhe)}finally{i.f()}return a}(e.metrics,this.outputNames);YT("metric",(function(){for(var e=function(e){if(-1!==f.indexOf(e))return"continue";!function(n){var r,a,i,o,s=(0,Ht.Z)(n);try{var u=function(){var n,s=o.value;if("string"===typeof s&&-1!==["accuracy","acc","crossentropy","ce"].indexOf(s)){var u,c=t.internalOutputShapes[e];1===c[c.length-1]||t.lossFunctions[e]===KN?-1!==["accuracy","acc"].indexOf(s)?a=eC:-1!==["crossentropy","ce"].indexOf(s)&&(a=rC):t.lossFunctions[e]===$N?-1!==["accuracy","acc"].indexOf(s)?a=aC:-1!==["crossentropy","ce"].indexOf(s)&&(a=oC):-1!==["accuracy","acc"].indexOf(s)?a=tC:-1!==["crossentropy","ce"].indexOf(s)&&(a=iC),-1!==["accuracy","acc"].indexOf(s)?u="acc":-1!==["crossentropy","ce"].indexOf(s)&&(u="ce"),i=a,r=""+u}else{var l=function(e){if("string"===typeof e&&e in sC)return sC[e];if("string"!==typeof e&&null!=e)return e;throw new hT("Unknown metric ".concat(e))}(s);i=l,r=""+uC(s)}YT(r,(function(){n=i})),function(e,n,r){t.outputNames.length>1&&(n=t.outputNames[e]+"_"+n),t.metricsNames.push(n),t.metricsTensors.push([r,e])}(e,r,n)};for(s.s();!(o=s.n()).done;)u()}catch(yhe){s.e(yhe)}finally{s.f()}}(h[e])},n=0;n<t.outputs.length;++n)e(n)})),this.collectedTrainableWeights=this.trainableWeights}},{key:"checkTrainableWeightsConsistency",value:function(){null!=this.collectedTrainableWeights&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}},{key:"evaluate",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=null==n.batchSize?32:n.batchSize;FC(r);var a=this.standardizeUserDataXY(e,t,!0,r);try{var i=a[0].concat(a[1]);this.makeTestFunction();var o=this.testFunction;return kT(this.testLoop(o,i,r,n.verbose,n.steps))}finally{VC(a[0],e),VC(a[1],t)}}},{key:"evaluateDataset",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t,n){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.makeTestFunction(),e.abrupt("return",OC(this,t,n));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"checkNumSamples",value:function(e,t,n){var r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"steps";if(null!=n){if(r=null,null!=t)throw new hT("If ".concat(a," is set, batchSize must be null or undefined.")+"Got batchSize = ".concat(t))}else{if(null==e)throw new hT("Either the input data should have a defined shape, or "+"".concat(a," shoud be specified."));r=Array.isArray(e)?e[0].shape[0]:e.shape[0]}return r}},{key:"execute",value:function(e,t){if(Array.isArray(t)&&0===t.length)throw new hT("`outputs` is an empty Array, which is not allowed.");var n=Array.isArray(t),r=n?t:[t],a=this.retrieveSymbolicTensors(r),i=new lN;if(e instanceof ap&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new hT("The number of inputs provided (".concat(e.length,") ")+"does not match the number of inputs of this model "+"(".concat(this.inputs.length,")."));for(var o=0;o<this.inputs.length;++o)i.add(this.inputs[o],e[o])}else{var s,u=(0,Ht.Z)(this.inputs);try{for(u.s();!(s=u.n()).done;){var c=s.value,l=e[c.name];if(null==l)throw new hT("No value is provided for the model's input ".concat(c.name));i.add(c,l)}}catch(yhe){u.e(yhe)}finally{u.f()}}var d=hN(a,i);return n?d:d[0]}},{key:"retrieveSymbolicTensors",value:function(e){var t,n=gT(null,e.length),r=e.length,a=(0,Ht.Z)(this.layers);try{for(a.s();!(t=a.n()).done;){for(var i=t.value,o=Array.isArray(i.output)?i.output:[i.output],s=o.map((function(e){return e.name})),u=0;u<e.length;++u){var c=s.indexOf(e[u]);if(-1!==c&&(n[u]=o[c],r--),0===r)break}if(0===r)break}}catch(yhe){a.e(yhe)}finally{a.f()}if(r>0){var l=[];throw n.forEach((function(t,n){null==t&&l.push(e[n])})),new hT("Cannot find SymbolicTensors for output name(s): "+"".concat(JSON.stringify(l)))}return n}},{key:"predictLoop",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return rm((function(){var a=t.checkNumSamples(e);if(r)throw new pT("Verbose predictLoop() is not implemented yet.");for(var i=zC(a,n),o=t.outputs.map((function(e){return[]})),s=function(n){rm((function(){var r=i[n][0],a=i[n][1],o=MC(e,r,a),s=[];if(Array.isArray(o))for(var u=0;u<o.length;++u)s.push({key:t.inputs[u],value:o[u]});else s.push({key:t.inputs[0],value:o});var c=new lN(s);return hN(t.outputs,c)})).forEach((function(e,t){return o[t].push(e)}))},u=0;u<i.length;++u)s(u);return kT(o.map((function(e){return $g(e,0)})))}))}},{key:"predict",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=BC(e);GC(n,this.inputNames,this.feedInputShapes,!1);try{var r=null==t.batchSize?32:t.batchSize;return FC(r),this.predictLoop(n,r)}finally{VC(n,e)}}},{key:"predictOnBatch",value:function(e){GC(e,this.inputNames,this.feedInputShapes,!0);var t=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,t)}},{key:"standardizeUserDataXY",value:function(e,t){var n=arguments.length>3?arguments[3]:void 0;if(null==this.optimizer_)throw new fT("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");for(var r=[],a=0;a<this.feedOutputShapes.length;++a){var i=this.feedOutputShapes[a];this.feedLossFns[a]===$N?r.push(i.slice(0,i.length-1).concat([1])):r.push(i)}if(function(e,t,n){var r=ZT(e.map((function(e){return e.shape[0]})));r.sort();var a=ZT(t.map((function(e){return e.shape[0]})));if(a.sort(),r.length>1)throw new hT("All input Tensors (x) should have the same number of samples. Got array shapes: "+"".concat(JSON.stringify(e.map((function(e){return e.shape})))));if(a.length>1)throw new hT("All target Tensors (y) should have the same number of samples. Got array shapes: "+"".concat(JSON.stringify(t.map((function(e){return e.shape})))));if(r.length>0&&a.length>0&&!Sc(r,a))throw new hT("Input Tensors should have the same number of samples as target "+"Tensors. Found ".concat(r[0]," input sample(s) and ").concat(a[0]," target ")+"sample(s).")}(e=jC(e,this.feedInputNames,this.feedInputShapes,!1,"input"),t=jC(t,this.feedOutputNames,r,!1,"target")),function(e,t,n){for(var r=[WN,KN,qN],a=0;a<e.length;++a){var i=e[a],o=t[a],s=n[a];if(null!=o){if(o===qN&&1===i.shape[i.shape.length-1])throw new hT("You are passing a target array of shape ".concat(i.shape," while using ")+"a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].");if(-1!==r.indexOf(o))for(var u=i.shape.slice(1),c=s.slice(1),l=0;l<u.length;++l){var d=u[l],f=c[l];if(null!=f&&d!==f)throw new hT("A target Tensor with shape ".concat(i.shape," was passed for an ")+"output of shape ".concat(s,", while using a loss function that ")+"expects targets to have the same shape as the output.")}}}}(t,this.feedLossFns,this.feedOutputShapes),this.stateful&&null!=n&&n>0&&e[0].shape[0]%n!==0)throw new hT("In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size "+"".concat(n,". Found: ").concat(e[0].shape[0]," sample(s)."));return[e,t]}},{key:"standardizeUserData",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t,n,r,a){var i,o,s,u,c,l,d,f,h,p=arguments;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=!(p.length>4&&void 0!==p[4])||p[4],o=p.length>5?p[5]:void 0,s=this.standardizeUserDataXY(t,n,i,o),u=(0,ge.Z)(s,2),c=u[0],l=u[1],null==r){e.next=5;break}throw new Error("sample weight is not supported yet.");case 5:if(d=null,null==a){e.next=19;break}f=xC(a,this.outputNames),d=[],h=0;case 10:if(!(h<f.length)){e.next=19;break}return e.t0=d,e.next=14,IC(l[h],null,f[h]);case 14:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 16:++h,e.next=10;break;case 19:return e.abrupt("return",[c,l,d]);case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"testLoop",value:function(e,t,n){var r=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4?arguments[4]:void 0;return rm((function(){var o=r.checkNumSamples(t,n,i,"steps"),s=[];if(a>0)throw new pT("Verbose mode is not implemented yet.");if(null!=i)throw new pT("steps mode in testLoop() is not implemented yet");for(var u=zC(o,n),c=qk(sE(0,o)),l=0;l<u.length;++l){var d=u[l][0],f=u[l][1],h=dE(c,d,f-d),p=PC(t,h),v=e(p);if(0===l)for(var m=0;m<v.length;++m)s.push(vm(0));for(var g=0;g<v.length;++g){var y=v[g];s[g]=sm(s[g],lm(f-d,y))}}for(var b=0;b<s.length;++b)s[b]=cm(s[b],o);return s}))}},{key:"getDedupedMetricsNames",value:function(){for(var e=this.metricsNames,t=[],n=0;n<e.length;++n){var r=e[n],a=r;if(bT(e,r)>1){var i=bT(e.slice(0,n),r);a+="_".concat(i)}t.push(a)}return t}},{key:"makeTrainFunction",value:function(){var e=this;return function(t){var n=[],r=t.slice(0,e.inputs.length),a=t.slice(e.inputs.length,e.inputs.length+e.outputs.length),i=t.slice(e.inputs.length+e.outputs.length,e.inputs.length+2*e.outputs.length),o=[],s=e.collectedTrainableWeights.map((function(e){return e.read()}));return[e.optimizer_.minimize((function(){for(var t=[],s=0;s<e.inputs.length;++s)t.push({key:e.inputs[s],value:r[s]});for(var u,c=new lN(t),l=hN(e.outputs,c,{training:!0}),d=0;d<e.lossFunctions.length;++d){var f=(0,e.lossFunctions[d])(a[d],l[d]);null!=i[d]&&(f=TC(f,i[d]));var h=Ab(f);n.push(h),u=0===d?f:sm(u,f)}for(var p=0;p<e.metricsTensors.length;++p){var v=void 0;if(e.outputs.length>1&&p<e.outputs.length)v=n[p];else{var m=e.metricsTensors[p][0],g=e.metricsTensors[p][1];v=Ab(m(a[g],l[g]))}im(v),o.push(v)}return u=Ab(u),e.calculateLosses().forEach((function(e){u=sm(u,e)})),u}),!0,s)].concat(o)}}},{key:"makeTestFunction",value:function(){var e=this;this.testFunction=function(t){return rm((function(){for(var n,r=[],a=t.slice(0,e.inputs.length),i=t.slice(e.inputs.length,e.inputs.length+e.outputs.length),o=[],s=0;s<e.inputs.length;++s)o.push({key:e.inputs[s],value:a[s]});for(var u=new lN(o),c=hN(e.outputs,u),l=0;l<e.lossFunctions.length;++l){var d=e.lossFunctions[l],f=Ab(d(i[l],c[l]));n=0===l?f:sm(n,f),r.push(n)}for(var h=0;h<e.metricsTensors.length;++h){var p=e.metricsTensors[h][0],v=e.metricsTensors[h][1],m=Ab(p(i[v],c[v]));r.push(m)}return r}))}}},{key:"fit",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t,n){var r,a,i,o,s,u,c,l,d,f,h,p,v,m,g,y,b,k,w,x,I,S,T,E,N=arguments;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=N.length>2&&void 0!==N[2]?N[2]:{},!this.isTraining){e.next=3;break}throw new Error("Cannot start training because another fit() call is ongoing.");case 3:return this.isTraining=!0,e.prev=4,FC(h=null==r.batchSize?32:r.batchSize),!1,e.next=10,this.standardizeUserData(t,n,r.sampleWeight,r.classWeight,false,h);case 10:if(p=e.sent,a=p[0],i=p[1],f=p[2],v=!1,!(null!=r.validationData&&r.validationData.length>0)){e.next=36;break}if(v=!0,2!==r.validationData.length){e.next=22;break}u=r.validationData[0],c=r.validationData[1],e.next=27;break;case 22:if(3!==r.validationData.length){e.next=26;break}throw new pT("validationData including sample weights is not supported yet.");case 26:throw new hT("When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; "+"".concat(r.validationData," is invalid."));case 27:return!0,e.next=30,this.standardizeUserData(u,c,null,null,true,h);case 30:g=e.sent,l=g[0],d=g[1],m=l.concat(d),e.next=37;break;case 36:null!=r.validationSplit&&r.validationSplit>0&&r.validationSplit<1?(v=!0,y=Math.floor(a[0].shape[0]*(1-r.validationSplit)),b=a[0].shape[0],l=MC(a,y,b),o=a,a=MC(a,0,y),d=MC(i,y,b),s=i,i=MC(i,0,y),m=l.concat(d)):null!=r.validationSteps&&(v=!0);case 37:return k=a.concat(i).concat(f),this.checkTrainableWeightsConsistency(),w=this.makeTrainFunction(),x=this.getDedupedMetricsNames(),v?(this.makeTestFunction(),I=this.testFunction,S=x.slice().concat(x.map((function(e){return"val_"+e})))):(I=null,m=[],S=x.slice()),T=FN(r.callbacks,r.yieldEvery),e.next=45,this.fitLoop(w,k,x,h,r.epochs,r.verbose,T,I,m,r.shuffle,S,r.initialEpoch,null,null);case 45:return E=e.sent,e.abrupt("return",E);case 47:return e.prev=47,this.isTraining=!1,VC(a,t),VC(i,n),VC(o,t),VC(s,n),VC(l,u),VC(d,c),null!=f&&am(f),e.finish(47);case 57:case"end":return e.stop()}}),e,this,[[4,,47,57]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fitLoop",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t,n,r,a,i,o,s,u,c,l,d,f,h,p){var v,m,g,y,b,k,w,x,I=this;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==a&&(a=32),null==i&&(i=1),null==l&&(l=!0),null==f&&(f=0),v=!1,null!=u&&null!=c&&(v=!0),null==p){e.next=10;break}if(v=!0,null!=h){e.next=10;break}throw new hT("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");case 10:return null!=(m=this.checkNumSamples(n,a,h,"steps_per_epoch"))&&(g=sE(0,m)),null==o&&(o=1),y=PN(s,o,i,f,m,h,a,v,d),b=y.callbackList,k=y.history,b.setModel(this),this.history=k,e.next=18,b.onTrainBegin();case 18:this.stopTraining_=!1,w=(0,be.Z)().mark((function e(){var i,o,s,d,f;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.onEpochBegin(x);case 2:if(i={},null==h){e.next=7;break}throw new pT("stepsPerEpoch mode is not implemented yet.");case 7:if("batch"!==l){e.next=11;break}throw new pT("batch shuffling is not implemneted yet");case 11:l&&vc(g);case 12:o=qk(g),s=zC(m,a),d=(0,be.Z)().mark((function e(l){var d;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d={},e.next=3,b.onBatchBegin(l,d);case 3:return rm((function(){var e=s[l][0],f=s[l][1],h=dE(o,e,f-e);d.batch=l,d.size=f-e;for(var p=PC(n,h),m=t(p),g=0;g<r.length;++g){var y=r[g],b=m[g];d[y]=b,im(b)}if(l===s.length-1&&v)for(var k=I.testLoop(u,c,a),w=0;w<r.length;++w){var x=r[w],S=k[w];im(S),i["val_"+x]=S}})),e.next=6,b.onBatchEnd(l,d);case 6:if(_N(d),!I.stopTraining_){e.next=9;break}return e.abrupt("return","break");case 9:case"end":return e.stop()}}),e)})),f=0;case 16:if(!(f<s.length)){e.next=24;break}return e.delegateYield(d(f),"t0",18);case 18:if("break"!==e.t0){e.next=21;break}return e.abrupt("break",24);case 21:++f,e.next=16;break;case 24:o.dispose();case 25:return e.next=27,b.onEpochEnd(x,i);case 27:if(!I.stopTraining_){e.next=29;break}return e.abrupt("return","break");case 29:case"end":return e.stop()}}),e)})),x=f;case 21:if(!(x<i)){e.next=29;break}return e.delegateYield(w(),"t0",23);case 23:if("break"!==e.t0){e.next=26;break}return e.abrupt("break",29);case 26:++x,e.next=21;break;case 29:return e.next=31,b.onTrainEnd();case 31:return e.next=33,this.history.syncData();case 33:return e.abrupt("return",this.history);case 34:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a,i,o,s,u,c,l,d,f,h,p){return e.apply(this,arguments)}}()},{key:"fitDataset",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t,n){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_C(this,t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"trainOnBatch",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t,n){var r,a,i,o,s,u,c,l,d,f;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.standardizeUserData(t,n);case 2:r=e.sent,a=r[0],i=r[1],o=this.makeTrainFunction(),s=o(a.concat(i)),u=[],c=(0,Ht.Z)(s),e.prev=9,c.s();case 11:if((l=c.n()).done){e.next=19;break}return d=l.value,e.next=15,d.data();case 15:f=e.sent,u.push(f[0]);case 17:e.next=11;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(9),c.e(e.t0);case 24:return e.prev=24,c.f(),e.finish(24);case 27:return am(s),VC(r[0],t),VC(r[1],n),e.abrupt("return",kT(u));case 31:case"end":return e.stop()}}),e,this,[[9,21,24,27]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getNamedWeights",value:function(e){for(var t=[],n=null!=e&&e.trainableOnly,r=n?this.trainableWeights:this.weights,a=this.getWeights(n),i=0;i<r.length;++i)n&&!r[i].trainable||t.push({name:r[i].originalName,tensor:a[i]});return t}},{key:"stopTraining",get:function(){return this.stopTraining_},set:function(e){this.stopTraining_=e}},{key:"optimizer",get:function(){return this.optimizer_},set:function(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}},{key:"dispose",value:function(){var e=BN((0,zN.Z)(r.prototype),"dispose",this).call(this);if(0===e.refCountAfterDispose&&null!=this.optimizer&&this.isOptimizerOwned){var t=nm().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=t-nm().numTensors}return e}},{key:"getLossIdentifiers",value:function(){var e;if("string"===typeof this.loss)e=xT(this.loss);else if(Array.isArray(this.loss)){var t,n=(0,Ht.Z)(this.loss);try{for(n.s();!(t=n.n()).done;){if("string"!==typeof t.value)throw new Error("Serialization of non-string loss is not supported.")}}catch(yhe){n.e(yhe)}finally{n.f()}e=this.loss.map((function(e){return xT(e)}))}else{var r=Object.keys(this.loss);e={};for(var a=this.loss,i=0,o=r;i<o.length;i++){var s=o[i];if("string"!==typeof a[s])throw new Error("Serialization of non-string loss is not supported.");e[s]=xT(a[s])}}return e}},{key:"getMetricIdentifiers",value:function(){if("string"===typeof this.metrics||"function"===typeof this.metrics)return[xT(uC(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map((function(e){return xT(uC(e))}));var e={};for(var t in this.metrics)e[t]=xT(uC(this.metrics[t]));return e}},{key:"getTrainingConfig",value:function(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}},{key:"loadTrainingConfig",value:function(e){if(null!=e.weighted_metrics)throw new Error("Loading weight_metrics is not supported yet.");if(null!=e.loss_weights)throw new Error("Loading loss_weights is not supported yet.");if(null!=e.sample_weight_mode)throw new Error("Loading sample_weight_mode is not supported yet.");var t,n,r=VN(gC(e.optimizer_config));if("string"===typeof e.loss)t=IT(e.loss);else if(Array.isArray(e.loss))t=e.loss.map((function(e){return IT(e)}));else if(null!=e.loss)for(var a in t={},e.loss)t[a]=IT(e.loss[a]);if(Array.isArray(e.metrics))n=e.metrics.map((function(e){return IT(e)}));else if(null!=e.metrics)for(var i in n={},e.metrics)n[i]=IT(e.metrics[i]);this.compile({loss:t,metrics:n,optimizer:r})}},{key:"save",value:function(){var t=(0,ke.Z)((0,be.Z)().mark((function t(n,r){var a,i,o,s,u,c,l,d,f;return(0,be.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("string"!==typeof n){t.next=9;break}if(0!==(a=cv(n)).length){t.next=6;break}throw new hT("Cannot find any save handlers for URL '".concat(n,"'"));case 6:if(!(a.length>1)){t.next=8;break}throw new hT("Found more than one (".concat(a.length,") save handlers for ")+"URL '".concat(n,"'"));case 8:n=a[0];case 9:if(null!=n.save){t.next=11;break}throw new hT("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");case 11:return t.next=13,Wp(this.getNamedWeights(r));case 13:if(i=t.sent,!1,null,o=this.toJSON(null,false),s={modelTopology:o,format:"layers-model",generatedBy:"TensorFlow.js tfjs-layers v".concat(bC),convertedBy:null},!(null!=r&&r.includeOptimizer)||null==this.optimizer){t.next=34;break}return s.trainingConfig=this.getTrainingConfig(),c="optimizer",t.t0=e,t.next=25,this.optimizer.getWeights();case 25:return t.t1=t.sent,t.t2=c,t.next=29,t.t0.encodeWeights.call(t.t0,t.t1,t.t2);case 29:l=t.sent,d=l.data,f=l.specs,(u=i.specs).push.apply(u,(0,me.Z)(f)),i.data=Yp([i.data,d]);case 34:return null!=this.userDefinedMetadata&&(!0,lC(this.userDefinedMetadata,this.name,true),s.userDefinedMetadata=this.userDefinedMetadata),s.weightData=i.data,s.weightSpecs=i.specs,t.abrupt("return",n.save(s));case 38:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"setUserDefinedMetadata",value:function(e){lC(e,this.name),this.userDefinedMetadata=e}},{key:"getUserDefinedMetadata",value:function(){return this.userDefinedMetadata}}]),r}(kC);HC.className="Model",ym(HC);var qC=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(){return(0,Se.Z)(this,n),t.apply(this,arguments)}return(0,Te.Z)(n)}(HC);qC.className="Functional",ym(qC);var $C=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r;if((0,Se.Z)(this,n),e=e||{},(r=t.call(this,{inputs:[],outputs:[]})).trainable=!0,r.built=!1,r.name=null!=e.name?e.name:zT("sequential_"),null!=e.layers){var a,i=(0,Ht.Z)(e.layers);try{for(i.s();!(a=i.n()).done;){var o=a.value;r.add(o)}}catch(yhe){i.e(yhe)}finally{i.f()}}return r}return(0,Te.Z)(n,[{key:"checkShape",value:function(e){if(e.inboundNodes[0].outputTensors[0].shape.some((function(e){return e<0})))throw new hT("Negative dimension size caused by adding layer "+"".concat(e.name," with input shape [")+"".concat(e.inboundNodes[0].inputTensors[0].shape,"]"))}},{key:"add",value:function(e){var t,r=e instanceof n||e instanceof HC;if(r){if(1!==(t=e).outputs.length)throw new hT("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(1!==t.inputs.length)throw new hT("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(0===this.outputs.length){if(0===e.inboundNodes.length){if(null==e.batchInputShape)throw new hT("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");var a=function(e){if(null==e.batchShape&&null==e.shape)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(null!=e.batchShape&&null!=e.shape)throw new hT("Please provide either a `shape` or `batchShape` argument to Input, but not both.");var t=e.batchShape;null!=e.shape&&null==t&&(t=[null].concat(e.shape));var n=e.dtype;return null==n&&(n="float32"),new cN({batchInputShape:t,name:e.name,dtype:n,sparse:e.sparse}).inboundNodes[0].outputTensors[0]}({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(a)}if(r)this.outputs=t.outputs,this.inputs=t.inputs;else{if(1!==e.inboundNodes.length)throw new hT("A layer added to a Sequential model must not already be "+"connected somewhere else. LayersModel received layer ".concat(e.name," ")+"which has ".concat(e.inboundNodes.length," pre-existing inbound ")+"connections.");if(1!==e.inboundNodes[0].outputTensors.length)throw new hT("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=uN(this.outputs[0])}this.inboundNodes=[],new iN({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:gT(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map((function(e){return e.shape})),outputShapes:this.outputs[0].shape})}else{var i=e.apply(this.outputs[0]);if(Array.isArray(i))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[i],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}},{key:"pop",value:function(){if(0===this.layers.length)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),0===this.layers.length)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{var e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}},{key:"call",value:function(e,t){return null==this.model&&this.build(),this.model.call(e,t)}},{key:"build",value:function(e){if(XE(e),0===this.inputs.length||0===this.outputs.length)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new HC({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}},{key:"countParams",value:function(){return this.built||this.build(),BN((0,zN.Z)(n.prototype),"countParams",this).call(this)}},{key:"summary",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log;this.built||this.build(),BN((0,zN.Z)(n.prototype),"summary",this).call(this,e,t,r)}},{key:"setWeights",value:function(e){null==this.model&&this.build(),this.model.setWeights(e)}},{key:"evaluate",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!this.built)throw new fT("The model needs to be compiled before being used.");return this.model.evaluate(e,t,n)}},{key:"evaluateDataset",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t,n){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.built){e.next=2;break}throw new fT("The model needs to be compiled before being used.");case 2:return e.abrupt("return",this.model.evaluateDataset(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"predict",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null==this.model&&this.build(),this.model.predict(e,t)}},{key:"predictOnBatch",value:function(e){return null==this.model&&this.build(),this.model.predictOnBatch(e)}},{key:"compile",value:function(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}},{key:"optimizer",get:function(){return null==this.model?void 0:this.model.optimizer},set:function(e){this.model.optimizer=e}},{key:"fit",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t,n){var r,a=arguments;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.length>2&&void 0!==a[2]?a[2]:{},this.built){e.next=3;break}throw new fT("The model needs to be compiled before being used.");case 3:return e.abrupt("return",this.model.fit(t,n,r));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fitDataset",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t,n){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.built){e.next=2;break}throw new fT("The model needs to be compiled before being used.");case 2:return e.abrupt("return",this.model.fitDataset(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"trainOnBatch",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t,n){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.model.trainOnBatch(t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"stopTraining",get:function(){if(null==this.model)throw new hT("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining},set:function(e){if(null==this.model)throw new hT("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}},{key:"getConfig",value:function(){var e,t=[],n=(0,Ht.Z)(this.layers);try{for(n.s();!(e=n.n()).done;){var r=e.value,a={};a.className=r.getClassName(),a.config=r.getConfig(),t.push(a)}}catch(yhe){n.e(yhe)}finally{n.f()}return{name:this.name,layers:t}}}],[{key:"fromConfig",value:function(e,t){var r,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i={};if(t instanceof Array){if(null==t[0].className||"Merge"===t[0].className)throw new hT("Legacy serialization format not supported yet.");r=t}else kc(null!=t.layers,(function(){return"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."})),r=t.layers,delete t.layers,i=t;var o=new e(i);if(!(o instanceof n))throw new pT("Sequential.fromConfig called on non-Sequential input: ".concat(o));var s,u=(0,Ht.Z)(r);try{for(u.s();!(s=u.n()).done;){var c=s.value,l=VN(c,undefined,a);a&&l.setFastWeightInitDuringBuild(!0),o.add(l)}}catch(yhe){u.e(yhe)}finally{u.f()}return o}}]),n}(HC);$C.className="Sequential",ym($C);var KC=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(){return(0,Se.Z)(this,n),t.apply(this,arguments)}return(0,Te.Z)(n,[{key:"getConfig",value:function(){return{}}}]),n}(mm),XC=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(){return(0,Se.Z)(this,n),t.apply(this,arguments)}return(0,Te.Z)(n,[{key:"apply",value:function(e){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(1!==t)throw new pT("Support for alpha values other than 1 (".concat(t,") is not implemented ")+"yet.");return Ly(e)}(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1)}}]),n}(KC);XC.className="elu",ym(XC);var YC=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(){return(0,Se.Z)(this,n),t.apply(this,arguments)}return(0,Te.Z)(n,[{key:"apply",value:function(e){return Sk(e)}}]),n}(KC);YC.className="selu",ym(YC);var QC=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(){return(0,Se.Z)(this,n),t.apply(this,arguments)}return(0,Te.Z)(n,[{key:"apply",value:function(e){return vk(e)}}]),n}(KC);QC.className="relu",ym(QC);var JC=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(){return(0,Se.Z)(this,n),t.apply(this,arguments)}return(0,Te.Z)(n,[{key:"apply",value:function(e){return rm((function(){return Lb(6,vk(e))}))}}]),n}(KC);JC.className="relu6",ym(JC);var eZ=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(){return(0,Se.Z)(this,n),t.apply(this,arguments)}return(0,Te.Z)(n,[{key:"apply",value:function(e){return e}}]),n}(KC);eZ.className="linear",ym(eZ);var tZ=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(){return(0,Se.Z)(this,n),t.apply(this,arguments)}return(0,Te.Z)(n,[{key:"apply",value:function(e){return Xg(e)}}]),n}(KC);tZ.className="sigmoid",ym(tZ);var nZ=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(){return(0,Se.Z)(this,n),t.apply(this,arguments)}return(0,Te.Z)(n,[{key:"apply",value:function(e){return function(e){return rm((function(){var t=sm(.5,lm(.2,e));return cy(t,0,1)}))}(e)}}]),n}(KC);nZ.className="hardSigmoid",ym(nZ);var rZ=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(){return(0,Se.Z)(this,n),t.apply(this,arguments)}return(0,Te.Z)(n,[{key:"apply",value:function(e){return gb(e)}}]),n}(KC);rZ.className="softplus",ym(rZ);var aZ=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(){return(0,Se.Z)(this,n),t.apply(this,arguments)}return(0,Te.Z)(n,[{key:"apply",value:function(e){return function(e){return rm((function(){return cm(e,sm(Em(e),1))}))}(e)}}]),n}(KC);aZ.className="softsign",ym(aZ);var iZ=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(){return(0,Se.Z)(this,n),t.apply(this,arguments)}return(0,Te.Z)(n,[{key:"apply",value:function(e){return Qg(e)}}]),n}(KC);iZ.className="tanh",ym(iZ);var oZ=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(){return(0,Se.Z)(this,n),t.apply(this,arguments)}return(0,Te.Z)(n,[{key:"apply",value:function(e){return Lk(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1)}}]),n}(KC);oZ.className="softmax",ym(oZ);var sZ=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(){return(0,Se.Z)(this,n),t.apply(this,arguments)}return(0,Te.Z)(n,[{key:"apply",value:function(e){return bb(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1)}}]),n}(KC);sZ.className="logSoftmax",ym(sZ);var uZ=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(){return(0,Se.Z)(this,n),t.apply(this,arguments)}return(0,Te.Z)(n,[{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return rm((function(){return lm(Xg(lm(e,t)),e)}))}}]),n}(KC);uZ.className="swish",ym(uZ);var cZ=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(){return(0,Se.Z)(this,n),t.apply(this,arguments)}return(0,Te.Z)(n,[{key:"apply",value:function(e){return rm((function(){return lm(e,Qg(gb(e)))}))}}]),n}(KC);function lZ(e){return e.getClassName()}function dZ(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return NT(e,gm.getMap().classNameMap,t,"activation")}function fZ(e){if(null==e){var t={className:"linear",config:{}};return dZ(t)}if("string"===typeof e){var n={};return n.className=e,n.config={},dZ(n)}return e instanceof KC?e:dZ(e)}function hZ(e){if(null!=e&&"object"!==typeof e)throw new Error("Argument to L1L2 regularizer's constructor is expected to be an "+"object, but received: ".concat(e))}cZ.className="mish",ym(cZ);var pZ=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(){return(0,Se.Z)(this,n),t.apply(this,arguments)}return(0,Te.Z)(n)}(mm),vZ=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r;return(0,Se.Z)(this,n),r=t.call(this),hZ(e),r.l1=null==e||null==e.l1?.01:e.l1,r.l2=null==e||null==e.l2?.01:e.l2,r.hasL1=0!==r.l1,r.hasL2=0!==r.l2,r}return(0,Te.Z)(n,[{key:"apply",value:function(e){var t=this;return rm((function(){var n=Rb([1]);return t.hasL1&&(n=sm(n,Hy(lm(t.l1,Em(e))))),t.hasL2&&(n=sm(n,Hy(lm(t.l2,kE(e))))),Gg(n,[])}))}},{key:"getConfig",value:function(){return{l1:this.l1,l2:this.l2}}}],[{key:"fromConfig",value:function(e,t){return new e({l1:t.l1,l2:t.l2})}}]),n}(pZ);vZ.className="L1L2",ym(vZ);var mZ={l1l2:"L1L2"};function gZ(e){return TT(e)}function yZ(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return NT(e,gm.getMap().classNameMap,t,"regularizer")}function bZ(e){return null==e?null:"string"===typeof e?yZ({className:e in mZ?mZ[e]:e,config:{}}):e instanceof pZ?e:yZ(e)}var kZ=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r;return(0,Se.Z)(this,n),(r=t.call(this,null==e?{}:e)).supportsMasking=!0,null!=e&&(r.maxValue=e.maxValue),r}return(0,Te.Z)(n,[{key:"call",value:function(e,t){e=KE(e);var n=vk(e);return null!=this.maxValue&&(n=cy(n,0,this.maxValue)),n}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={maxValue:this.maxValue},t=BN((0,zN.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(sN);kZ.className="ReLU",ym(kZ);var wZ=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r;return(0,Se.Z)(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_ALPHA=.3,null==e&&(e={}),r.alpha=null==e.alpha?r.DEFAULT_ALPHA:e.alpha,r}return(0,Te.Z)(n,[{key:"call",value:function(e,t){var n=KE(e);return cb(n,this.alpha)}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={alpha:this.alpha},t=BN((0,zN.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(sN);wZ.className="LeakyReLU",ym(wZ);var xZ=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r;if((0,Se.Z)(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_ALPHA_INITIALIZER="zeros",null==e&&(e={}),r.supportsMasking=!0,r.alphaInitializer=HE(e.alphaInitializer||r.DEFAULT_ALPHA_INITIALIZER),r.alphaRegularizer=bZ(e.alphaRegularizer),r.alphaConstraint=NN(e.alphaConstraint),null==e.sharedAxes)r.sharedAxes=null;else if(Array.isArray(e.sharedAxes))r.sharedAxes=e.sharedAxes;else{if("number"!==typeof e.sharedAxes)throw new hT("Expected sharedAxes to be a number or an array of numbers, "+"but got ".concat(e.sharedAxes));r.sharedAxes=[e.sharedAxes]}return r}return(0,Te.Z)(n,[{key:"build",value:function(e){var t=(e=XE(e)).slice(1);if(null!=this.sharedAxes){var n,r=(0,Ht.Z)(this.sharedAxes);try{for(r.s();!(n=r.n()).done;){t[n.value-1]=1}}catch(yhe){r.e(yhe)}finally{r.f()}}this.alpha=this.addWeight("alpha",t,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);var a={};if(null!=this.sharedAxes)for(var i=1;i<e.length;++i)a[i]=e[i];this.inputSpec=[new nN({ndim:e.length,axes:a})],this.built=!0}},{key:"call",value:function(e,t){return e=KE(e),Qb(e,this.alpha.read())}},{key:"getConfig",value:function(){var e={alphaInitializer:GE(this.alphaInitializer),alphaRegularizer:gZ(this.alphaRegularizer),alphaConstraint:TN(this.alphaConstraint),sharedAxes:this.sharedAxes},t=BN((0,zN.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(sN);xZ.className="PReLU",ym(xZ);var IZ=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r;if((0,Se.Z)(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_ALPHA=1,null==e&&(e={}),null!=e.alpha&&e.alpha!==r.DEFAULT_ALPHA)throw new pT("Non-default alpha value (".concat(e.alpha,") is not supported by the ")+"ELU layer yet.");return r.alpha=null==e.alpha?r.DEFAULT_ALPHA:e.alpha,r}return(0,Te.Z)(n,[{key:"call",value:function(e,t){var n=KE(e);return Ly(n)}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={alpha:this.alpha},t=BN((0,zN.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(sN);IZ.className="ELU",ym(IZ);var SZ=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r;return(0,Se.Z)(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_THETA=1,null==e&&(e={}),r.theta=null==e.theta?r.DEFAULT_THETA:e.theta,r}return(0,Te.Z)(n,[{key:"call",value:function(e,t){var n=KE(e);return lm(n,Qv(rb(n,this.theta),"float32"))}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={theta:this.theta},t=BN((0,zN.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(sN);SZ.className="ThresholdedReLU",ym(SZ);var TZ=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r;return(0,Se.Z)(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_AXIS=1,null==e&&(e={}),r.softmax=(new oZ).apply,r.axis=null==e.axis?r.DEFAULT_AXIS:e.axis,r}return(0,Te.Z)(n,[{key:"call",value:function(e,t){var n=KE(e);return this.softmax(n,this.axis)}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={axis:this.axis},t=BN((0,zN.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(sN);function EZ(e,t,n){if("number"===typeof e)return gT(e,t);if(e.length!==t)throw new hT("The ".concat(n," argument must be an integer or tuple of ").concat(t," integers.")+" Received: ".concat(e.length," elements."));for(var r=0;r<t;++r){var a=e[r];if(!rE(a))throw new hT("The ".concat(n," argument must be an integer or tuple of ").concat(t)+" integers. Received: ".concat(JSON.stringify(e)," including a")+" non-integer number ".concat(a))}return e}function NZ(e,t,n,r){var a;return null==e?e:(a="same"===n?e:e-(t+(t-1)*((arguments.length>4&&void 0!==arguments[4]?arguments[4]:1)-1))+1,Math.floor((a+r-1)/r))}function CZ(e,t,n,r){if(null==e)return null;if("valid"===r)e=e*t+oE([n-t,0]);else{if("same"!==r)throw new hT("Unsupport padding mode: ".concat(r,"."));e*=t}return e}function ZZ(e,t){return rm((function(){return HT(t),"channelsFirst"===t?hw(e,[0,2,3,1]):e}))}function _Z(e,t){return rm((function(){return HT(t),"channelsFirst"===t?hw(e,[0,2,3,4,1]):e}))}function AZ(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",i=arguments.length>5?arguments[5]:void 0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;return rm((function(){if(null==i&&(i="channelsLast"),HT(i),3!==e.shape.length)throw new hT("The input of a conv1dWithBias operation should be 3, but is "+"".concat(e.shape.length," instead."));if(3!==t.shape.length)throw new hT("The kernel for a conv1dWithBias operation should be 3, but is "+"".concat(t.shape.length," instead"));if(null!=n&&1!==n.shape.length)throw new hT("The bias for a conv1dWithBias operation should be 1, but is "+"".concat(t.shape.length," instead"));if("channelsFirst"===i&&(e=hw(e,[0,2,1])),"causal"===a)throw new pT("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");var s=vy(e,t,r,"same"===a?"same":"valid","NWC",o);return null!=n&&(s=xE(s,n)),s}))}function RZ(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",i=arguments.length>5?arguments[5]:void 0,o=arguments.length>6?arguments[6]:void 0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;return rm((function(){if(null==i&&(i="channelsLast"),HT(i),3!==e.rank&&4!==e.rank)throw new hT("conv2dWithBiasActivation expects input to be of rank 3 or 4, "+"but received ".concat(e.rank,"."));if(3!==t.rank&&4!==t.rank)throw new hT("conv2dWithBiasActivation expects kernel to be of rank 3 or 4, "+"but received ".concat(e.rank,"."));var u=ZZ(e,i);if("causal"===a)throw new pT("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return u=Cw({x:u,filter:t,strides:r,pad:"same"===a?"same":"valid",dilations:o,dataFormat:"NHWC",bias:n,activation:s}),"channelsFirst"===i&&(u=hw(u,[0,3,1,2])),u}))}function DZ(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1,1],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",i=arguments.length>5?arguments[5]:void 0,o=arguments.length>6?arguments[6]:void 0;return rm((function(){if(null==i&&(i="channelsLast"),HT(i),4!==e.rank&&5!==e.rank)throw new hT("conv3dWithBias expects input to be of rank 4 or 5, but received "+"".concat(e.rank,"."));if(4!==t.rank&&5!==t.rank)throw new hT("conv3dWithBias expects kernel to be of rank 4 or 5, but received "+"".concat(e.rank,"."));var s=_Z(e,i);if("causal"===a)throw new pT("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return s=yy(s,t,r,"same"===a?"same":"valid","NDHWC",o),null!=n&&(s=xE(s,n)),"channelsFirst"===i&&(s=hw(s,[0,4,1,2,3])),s}))}TZ.className="Softmax",ym(TZ);var OZ=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e,r){var a;if((0,Se.Z)(this,n),(a=t.call(this,r)).bias=null,a.DEFAULT_KERNEL_INITIALIZER="glorotNormal",a.DEFAULT_BIAS_INITIALIZER="zeros",n.verifyArgs(r),a.rank=e,DT(a.rank,"rank"),1!==a.rank&&2!==a.rank&&3!==a.rank)throw new pT("Convolution layer for rank other than 1, 2, or 3 (".concat(a.rank,") is ")+"not implemented yet.");if(a.kernelSize=EZ(r.kernelSize,e,"kernelSize"),a.strides=EZ(null==r.strides?1:r.strides,e,"strides"),a.padding=null==r.padding?"valid":r.padding,qT(a.padding),a.dataFormat=null==r.dataFormat?"channelsLast":r.dataFormat,HT(a.dataFormat),a.activation=fZ(r.activation),a.useBias=null==r.useBias||r.useBias,a.biasInitializer=HE(r.biasInitializer||a.DEFAULT_BIAS_INITIALIZER),a.biasConstraint=NN(r.biasConstraint),a.biasRegularizer=bZ(r.biasRegularizer),a.activityRegularizer=bZ(r.activityRegularizer),a.dilationRate=EZ(null==r.dilationRate?1:r.dilationRate,e,"dilationRate"),1===a.rank&&Array.isArray(a.dilationRate)&&1!==a.dilationRate.length)throw new hT("dilationRate must be a number or an array of a single number for 1D convolution, but received "+"".concat(JSON.stringify(a.dilationRate)));if(2===a.rank){if("number"===typeof a.dilationRate)a.dilationRate=[a.dilationRate,a.dilationRate];else if(2!==a.dilationRate.length)throw new hT("dilationRate must be a number or array of two numbers for 2D "+"convolution, but received ".concat(JSON.stringify(a.dilationRate)))}else if(3===a.rank)if("number"===typeof a.dilationRate)a.dilationRate=[a.dilationRate,a.dilationRate,a.dilationRate];else if(3!==a.dilationRate.length)throw new hT("dilationRate must be a number or array of three numbers for 3D "+"convolution, but received ".concat(JSON.stringify(a.dilationRate)));return a}return(0,Te.Z)(n,[{key:"getConfig",value:function(){var e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:lZ(this.activation),useBias:this.useBias,biasInitializer:GE(this.biasInitializer),biasRegularizer:gZ(this.biasRegularizer),activityRegularizer:gZ(this.activityRegularizer),biasConstraint:TN(this.biasConstraint)},t=BN((0,zN.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}],[{key:"verifyArgs",value:function(e){if(yT("kernelSize"in e,"required key 'kernelSize' not in config"),"number"!==typeof e.kernelSize&&!RT(e.kernelSize,"number",1,3))throw new hT("BaseConv expects config.kernelSize to be number or number[] with "+"length 1, 2, or 3, but received ".concat(JSON.stringify(e.kernelSize),"."))}}]),n}(sN),LZ=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e,r){var a;return(0,Se.Z)(this,n),(a=t.call(this,e,r)).kernel=null,n.verifyArgs(r),a.filters=r.filters,DT(a.filters,"filters"),a.kernelInitializer=HE(r.kernelInitializer||a.DEFAULT_KERNEL_INITIALIZER),a.kernelConstraint=NN(r.kernelConstraint),a.kernelRegularizer=bZ(r.kernelRegularizer),a}return(0,Te.Z)(n,[{key:"build",value:function(e){e=XE(e);var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new hT("The channel dimension of the input should be defined. "+"Found ".concat(e[t]));var n=e[t],r=this.kernelSize.concat([n,this.filters]);this.kernel=this.addWeight("kernel",r,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:(0,ye.Z)({},t,n)}],this.built=!0}},{key:"call",value:function(e,t){var n=this;return rm((function(){var t;e=KE(e);var r=null==n.bias?null:n.bias.read(),a=LT(n.activation.getClassName());if(null!=a&&2===n.rank)t=RZ(e,n.kernel.read(),r,n.strides,n.padding,n.dataFormat,n.dilationRate,a);else{if(1===n.rank)t=AZ(e,n.kernel.read(),r,n.strides[0],n.padding,n.dataFormat,n.dilationRate[0]);else if(2===n.rank)t=RZ(e,n.kernel.read(),r,n.strides,n.padding,n.dataFormat,n.dilationRate);else{if(3!==n.rank)throw new pT("convolutions greater than 3D are not implemented yet.");t=DZ(e,n.kernel.read(),r,n.strides,n.padding,n.dataFormat,n.dilationRate)}null!=n.activation&&(t=n.activation.apply(t))}return t}))}},{key:"computeOutputShape",value:function(e){e=XE(e);for(var t=[],n="channelsLast"===this.dataFormat?e.slice(1,e.length-1):e.slice(2),r=0;r<n.length;++r){var a=NZ(n[r],this.kernelSize[r],this.padding,this.strides[r],"number"===typeof this.dilationRate?this.dilationRate:this.dilationRate[r]);t.push(a)}var i=[e[0]];return"channelsLast"===this.dataFormat?(i=i.concat(t)).push(this.filters):(i.push(this.filters),i=i.concat(t)),i}},{key:"getConfig",value:function(){var e={filters:this.filters,kernelInitializer:GE(this.kernelInitializer),kernelRegularizer:gZ(this.kernelRegularizer),kernelConstraint:TN(this.kernelConstraint)},t=BN((0,zN.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}],[{key:"verifyArgs",value:function(e){if(!("filters"in e)||"number"!==typeof e.filters||e.filters<1)throw new hT("Convolution layer expected config.filters to be a 'number' > 0 "+"but got ".concat(JSON.stringify(e.filters)))}}]),n}(OZ),FZ=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r;return(0,Se.Z)(this,n),r=t.call(this,2,e),n.verifyArgs(e),r}return(0,Te.Z)(n,[{key:"getConfig",value:function(){var e=BN((0,zN.Z)(n.prototype),"getConfig",this).call(this);return delete e.rank,e}}],[{key:"verifyArgs",value:function(e){if("number"!==typeof e.kernelSize&&!RT(e.kernelSize,"number",1,2))throw new hT("Conv2D expects config.kernelSize to be number or number[] with "+"length 1 or 2, but received ".concat(JSON.stringify(e.kernelSize),"."))}}]),n}(LZ);FZ.className="Conv2D",ym(FZ);var MZ=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r;return(0,Se.Z)(this,n),r=t.call(this,3,e),n.verifyArgs(e),r}return(0,Te.Z)(n,[{key:"getConfig",value:function(){var e=BN((0,zN.Z)(n.prototype),"getConfig",this).call(this);return delete e.rank,e}}],[{key:"verifyArgs",value:function(e){if("number"!==typeof e.kernelSize&&(!Array.isArray(e.kernelSize)||1!==e.kernelSize.length&&3!==e.kernelSize.length))throw new hT("Conv3D expects config.kernelSize to be number or"+" [number, number, number], but received ".concat(JSON.stringify(e.kernelSize),"."))}}]),n}(LZ);MZ.className="Conv3D",ym(MZ);var PZ=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r;if((0,Se.Z)(this,n),(r=t.call(this,e)).inputSpec=[new nN({ndim:4})],"same"!==r.padding&&"valid"!==r.padding)throw new hT("Conv2DTranspose currently supports only padding modes 'same' "+"and 'valid', but received padding mode ".concat(r.padding));return r}return(0,Te.Z)(n,[{key:"build",value:function(e){if(4!==(e=XE(e)).length)throw new hT("Input should have rank 4; Received input shape: "+JSON.stringify(e));var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new hT("The channel dimension of the inputs should be defined. Found `None`.");var n=e[t],r=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new nN({ndim:4,axes:(0,ye.Z)({},t,n)})],this.built=!0}},{key:"call",value:function(e,t){var n=this;return rm((function(){var t=KE(e);if(4!==t.shape.length)throw new hT("Conv2DTranspose.call() expects input tensor to be rank-4, but "+"received a tensor of rank-".concat(t.shape.length));var r,a,i=t.shape,o=i[0];"channelsFirst"===n.dataFormat?(r=2,a=3):(r=1,a=2);var s=i[r],u=i[a],c=n.kernelSize[0],l=n.kernelSize[1],d=n.strides[0],f=n.strides[1],h=[o,CZ(s,d,c,n.padding),CZ(u,f,l,n.padding),n.filters];"channelsLast"!==n.dataFormat&&(t=hw(t,[0,2,3,1]));var p=gy(t,n.kernel.read(),h,n.strides,n.padding);return"channelsLast"!==n.dataFormat&&(p=hw(p,[0,3,1,2])),null!=n.bias&&(p=xE(p,n.bias.read(),n.dataFormat)),null!=n.activation&&(p=n.activation.apply(p)),p}))}},{key:"computeOutputShape",value:function(e){var t,n,r,a=(e=XE(e)).slice();"channelsFirst"===this.dataFormat?(t=1,n=2,r=3):(t=3,n=1,r=2);var i=this.kernelSize[0],o=this.kernelSize[1],s=this.strides[0],u=this.strides[1];return a[t]=this.filters,a[n]=CZ(a[n],s,i,this.padding),a[r]=CZ(a[r],u,o,this.padding),a}},{key:"getConfig",value:function(){var e=BN((0,zN.Z)(n.prototype),"getConfig",this).call(this);return delete e.dilationRate,e}}]),n}(FZ);PZ.className="Conv2DTranspose",ym(PZ);var zZ=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r;if((0,Se.Z)(this,n),(r=t.call(this,e)).inputSpec=[new nN({ndim:5})],"same"!==r.padding&&"valid"!==r.padding)throw new hT("Conv3DTranspose currently supports only padding modes 'same' "+"and 'valid', but received padding mode ".concat(r.padding));return r}return(0,Te.Z)(n,[{key:"build",value:function(e){if(5!==(e=XE(e)).length)throw new hT("Input should have rank 5; Received input shape: "+JSON.stringify(e));var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new hT("The channel dimension of the inputs should be defined. Found `None`.");var n=e[t],r=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new nN({ndim:5,axes:(0,ye.Z)({},t,n)})],this.built=!0}},{key:"call",value:function(e,t){var n=this;return rm((function(){var t=KE(e);if(5!==t.shape.length)throw new hT("Conv3DTranspose.call() expects input tensor to be rank-4, but "+"received a tensor of rank-".concat(t.shape.length));var r,a,i,o=t.shape,s=o[0];"channelsFirst"===n.dataFormat?(i=2,r=3,a=4):(i=1,r=2,a=3);var u=o[i],c=o[r],l=o[a],d=n.kernelSize[0],f=n.kernelSize[1],h=n.kernelSize[2],p=n.strides[0],v=n.strides[1],m=n.strides[2],g=[s,CZ(u,p,d,n.padding),CZ(c,v,f,n.padding),CZ(l,m,h,n.padding),n.filters];"channelsLast"!==n.dataFormat&&(t=hw(t,[0,2,3,4,1]));var y=ky(t,n.kernel.read(),g,n.strides,n.padding);return"channelsLast"!==n.dataFormat&&(y=hw(y,[0,4,1,2,3])),null!==n.bias&&(y=xE(y,n.bias.read(),n.dataFormat)),null!==n.activation&&(y=n.activation.apply(y)),y}))}},{key:"computeOutputShape",value:function(e){var t,n,r,a,i=(e=XE(e)).slice();"channelsFirst"===this.dataFormat?(t=1,n=2,r=3,a=4):(t=4,n=1,r=2,a=3);var o=this.kernelSize[0],s=this.kernelSize[1],u=this.kernelSize[2],c=this.strides[0],l=this.strides[1],d=this.strides[2];return i[t]=this.filters,i[n]=CZ(i[n],c,o,this.padding),i[r]=CZ(i[r],l,s,this.padding),i[a]=CZ(i[a],d,u,this.padding),i}},{key:"getConfig",value:function(){var e=BN((0,zN.Z)(n.prototype),"getConfig",this).call(this);return delete e.dilationRate,e}}]),n}(MZ);zZ.className="Conv3DTranspose",ym(zZ);var BZ=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e,r){var a;if((0,Se.Z)(this,n),(a=t.call(this,e,r)).DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",a.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",a.depthwiseKernel=null,a.pointwiseKernel=null,null==r.filters)throw new hT("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(null!=r.kernelInitializer||null!=r.kernelRegularizer||null!=r.kernelConstraint)throw new hT("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(null!=r.padding&&"same"!==r.padding&&"valid"!==r.padding)throw new hT("SeparableConv".concat(a.rank,"D supports only padding modes: ")+"'same' and 'valid', but received ".concat(JSON.stringify(r.padding)));return a.depthMultiplier=null==r.depthMultiplier?1:r.depthMultiplier,a.depthwiseInitializer=HE(r.depthwiseInitializer||a.DEFAULT_DEPTHWISE_INITIALIZER),a.depthwiseRegularizer=bZ(r.depthwiseRegularizer),a.depthwiseConstraint=NN(r.depthwiseConstraint),a.pointwiseInitializer=HE(r.depthwiseInitializer||a.DEFAULT_POINTWISE_INITIALIZER),a.pointwiseRegularizer=bZ(r.pointwiseRegularizer),a.pointwiseConstraint=NN(r.pointwiseConstraint),a}return(0,Te.Z)(n,[{key:"build",value:function(e){if((e=XE(e)).length<this.rank+2)throw new hT("Inputs to SeparableConv".concat(this.rank,"D should have rank ")+"".concat(this.rank+2,", but received input shape: ")+"".concat(JSON.stringify(e)));var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t]||e[t]<0)throw new hT("The channel dimension of the inputs should be defined, "+"but found ".concat(JSON.stringify(e[t])));for(var n=e[t],r=this.kernelSize.concat([n,this.depthMultiplier]),a=[],i=0;i<this.rank;++i)a.push(1);a.push(n*this.depthMultiplier,this.filters);var o=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",r,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,o,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",a,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,o,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,o,this.biasConstraint):this.bias=null,this.inputSpec=[new nN({ndim:this.rank+2,axes:(0,ye.Z)({},t,n)})],this.built=!0}},{key:"call",value:function(e,t){var n=this;return rm((function(){var t;if(e=KE(e),1===n.rank)throw new pT("1D separable convolution is not implemented yet.");return 2===n.rank&&("channelsFirst"===n.dataFormat&&(e=hw(e,[0,2,3,1])),t=Tk(e,n.depthwiseKernel.read(),n.pointwiseKernel.read(),n.strides,n.padding,n.dilationRate,"NHWC")),n.useBias&&(t=xE(t,n.bias.read(),n.dataFormat)),null!=n.activation&&(t=n.activation.apply(t)),"channelsFirst"===n.dataFormat&&(t=hw(t,[0,3,1,2])),t}))}},{key:"getConfig",value:function(){var e=BN((0,zN.Z)(n.prototype),"getConfig",this).call(this);return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=GE(this.depthwiseInitializer),e.pointwiseInitializer=GE(this.pointwiseInitializer),e.depthwiseRegularizer=gZ(this.depthwiseRegularizer),e.pointwiseRegularizer=gZ(this.pointwiseRegularizer),e.depthwiseConstraint=TN(this.depthwiseConstraint),e.pointwiseConstraint=TN(this.pointwiseConstraint),e}}]),n}(LZ);BZ.className="SeparableConv";var VZ=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){return(0,Se.Z)(this,n),t.call(this,2,e)}return(0,Te.Z)(n)}(BZ);VZ.className="SeparableConv2D",ym(VZ);var UZ=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r;return(0,Se.Z)(this,n),r=t.call(this,1,e),n.verifyArgs(e),r.inputSpec=[{ndim:3}],r}return(0,Te.Z)(n,[{key:"getConfig",value:function(){var e=BN((0,zN.Z)(n.prototype),"getConfig",this).call(this);return delete e.rank,delete e.dataFormat,e}}],[{key:"verifyArgs",value:function(e){if("number"!==typeof e.kernelSize&&!RT(e.kernelSize,"number",1,1))throw new hT("Conv1D expects config.kernelSize to be number or number[] with "+"length 1, but received ".concat(JSON.stringify(e.kernelSize),"."))}}]),n}(LZ);UZ.className="Conv1D",ym(UZ);var WZ=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r;return(0,Se.Z)(this,n),r=t.call(this,e),"number"===typeof e.cropping?r.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:"number"===typeof e.cropping[0]?r.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:r.cropping=e.cropping,r.dataFormat=void 0===e.dataFormat?"channelsLast":e.dataFormat,r.inputSpec=[{ndim:4}],r}return(0,Te.Z)(n,[{key:"computeOutputShape",value:function(e){return"channelsFirst"===this.dataFormat?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}},{key:"call",value:function(e,t){var n=this;return rm((function(){if(e=KE(e),"channelsLast"===n.dataFormat){var t=hE(e,n.cropping[0][0],e.shape[1]-n.cropping[0][0]-n.cropping[0][1],2);return hE(t,n.cropping[1][0],e.shape[2]-n.cropping[1][1]-n.cropping[1][0],3)}var r=hE(e,n.cropping[0][0],e.shape[2]-n.cropping[0][0]-n.cropping[0][1],3);return hE(r,n.cropping[1][0],e.shape[3]-n.cropping[1][1]-n.cropping[1][0],4)}))}},{key:"getConfig",value:function(){var e={cropping:this.cropping,dataFormat:this.dataFormat},t=BN((0,zN.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(sN);WZ.className="Cropping2D",ym(WZ);var jZ=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r,a;return(0,Se.Z)(this,n),(r=t.call(this,e)).DEFAULT_SIZE=[2,2],r.inputSpec=[{ndim:4}],r.size=null==e.size?r.DEFAULT_SIZE:e.size,r.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,HT(r.dataFormat),r.interpolation=null==e.interpolation?"nearest":e.interpolation,a=r.interpolation,AT(VT,"InterpolationFormat",a),r}return(0,Te.Z)(n,[{key:"computeOutputShape",value:function(e){if("channelsFirst"===this.dataFormat){var t=null==e[2]?null:this.size[0]*e[2],n=null==e[3]?null:this.size[1]*e[3];return[e[0],e[1],t,n]}var r=null==e[1]?null:this.size[0]*e[1],a=null==e[2]?null:this.size[1]*e[2];return[e[0],r,a,e[3]]}},{key:"call",value:function(e,t){var n=this;return rm((function(){var t=KE(e),r=t.shape;if("channelsFirst"===n.dataFormat){t=hw(t,[0,2,3,1]);var a=n.size[0]*r[2],i=n.size[1]*r[3],o="nearest"===n.interpolation?Lx.resizeNearestNeighbor(t,[a,i]):Lx.resizeBilinear(t,[a,i]);return hw(o,[0,3,1,2])}var s=n.size[0]*r[1],u=n.size[1]*r[2];return"nearest"===n.interpolation?Lx.resizeNearestNeighbor(t,[s,u]):Lx.resizeBilinear(t,[s,u])}))}},{key:"getConfig",value:function(){var e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},t=BN((0,zN.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(sN);jZ.className="UpSampling2D",ym(jZ);var GZ=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r;return(0,Se.Z)(this,n),(r=t.call(this,2,e)).depthwiseKernel=null,r.depthMultiplier=null==e.depthMultiplier?1:e.depthMultiplier,r.depthwiseInitializer=HE(e.depthwiseInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.depthwiseConstraint=NN(e.depthwiseConstraint),r.depthwiseRegularizer=bZ(e.depthwiseRegularizer),r}return(0,Te.Z)(n,[{key:"build",value:function(e){if((e=XE(e)).length<4)throw new hT("Inputs to DepthwiseConv2D should have rank 4. "+"Received input shape: ".concat(JSON.stringify(e),"."));var t="channelsFirst"===this.dataFormat?1:3;if(null==e[t]||e[t]<0)throw new hT("The channel dimension of the inputs to DepthwiseConv2D should "+"be defined, but is not (".concat(e[t],")."));var n=e[t],r=[this.kernelSize[0],this.kernelSize[1],n,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",r,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[n*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}},{key:"call",value:function(e,t){var n=this;return rm((function(){var t=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[1,1],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"valid",a=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0;return rm((function(){null==a&&(a="channelsLast"),HT(a);var o=ZZ(e,a);if(4!==e.rank)throw new hT("Input for depthwiseConv2d is required to be 4-D, but is instead "+"".concat(e.rank,"-D"));if(4!==t.rank)throw new hT("depthwiseKernel is required to be 4-D, but is instead "+"".concat(t.rank,"-D"));return o=Ny(o,t,n,"same"===r?"same":"valid","NHWC",i),"channelsFirst"===a&&(o=hw(o,[0,3,1,2])),o}))}(e=KE(e),n.depthwiseKernel.read(),n.strides,n.padding,n.dataFormat,null);return n.useBias&&(t=xE(t,n.bias.read(),n.dataFormat)),null!=n.activation&&(t=n.activation.apply(t)),t}))}},{key:"computeOutputShape",value:function(e){e=XE(e);var t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,a=NZ(t,this.kernelSize[0],this.padding,this.strides[0]),i=NZ(n,this.kernelSize[1],this.padding,this.strides[1]);return"channelsFirst"===this.dataFormat?[e[0],r,a,i]:[e[0],a,i,r]}},{key:"getConfig",value:function(){var e=BN((0,zN.Z)(n.prototype),"getConfig",this).call(this);return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=GE(this.depthwiseInitializer),e.depthwiseRegularizer=gZ(this.depthwiseRegularizer),e.depthwiseConstraint=TN(this.depthwiseRegularizer),e}}]),n}(OZ);function HZ(e,t,n,r){if(Array.isArray(e)){if(null!=t||null!=n)throw new hT("When inputs is an array, neither initialState or constants should be provided");null!=r&&(n=e.slice(e.length-r,e.length),e=e.slice(0,e.length-r)),e.length>1&&(t=e.slice(1,e.length)),e=e[0]}function a(e){return null==e||Array.isArray(e)?e:[e]}return{inputs:e,initialState:t=a(t),constants:n=a(n)}}function qZ(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0,o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];return rm((function(){var u=t.shape.length;if(u<3)throw new hT("Input should be at least 3D, but is ".concat(u,"D."));var c=[1,0].concat(sE(2,u));if(t=hw(t,c),null!=i)throw new pT("The rnn() functoin of the deeplearn.js backend does not support constants yet.");o&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),null!=a&&((a=Qv(Qv(a,"bool"),"float32")).rank===u-1&&(a=Yy(a,-1)),a=hw(a,c)),r&&(t=gk(t,0),null!=a&&(a=gk(a,0)));var l,d,f=[],h=n,p=t.shape[0],v=iw(t);null!=a&&(d=iw(a));for(var m,g=function(t){var n=v[t],r=rm((function(){return e(n,h)}));if(null==a)l=r[0],h=r[1];else{var i=rm((function(){var e=d[t],n=Sm(Wb(e),e);return{output:sm(lm(r[0],e),lm(h[0],n)),newStates:h.map((function(t,a){return sm(lm(r[1][a],e),lm(t,n))}))}}));l=i.output,h=i.newStates}s&&f.push(l)},y=0;y<p;++y)g(y);if(s){m=Wk(f,1)}return[l,m,h]}))}GZ.className="DepthwiseConv2D",ym(GZ);var $Z=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r,a;if((0,Se.Z)(this,n),r=t.call(this,e),null==e.cell)throw new hT("cell property is missing for the constructor of RNN.");if(null==(a=Array.isArray(e.cell)?new n_({cells:e.cell}):e.cell).stateSize)throw new hT("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");return r.cell=a,r.returnSequences=null!=e.returnSequences&&e.returnSequences,r.returnState=null!=e.returnState&&e.returnState,r.goBackwards=null!=e.goBackwards&&e.goBackwards,r._stateful=null!=e.stateful&&e.stateful,r.unroll=null!=e.unroll&&e.unroll,r.supportsMasking=!0,r.inputSpec=[new nN({ndim:3})],r.stateSpec=null,r.states_=null,r.numConstants=null,r.keptStates=[],r}return(0,Te.Z)(n,[{key:"getStates",value:function(){return null==this.states_?sE(0,Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1).map((function(e){return null})):this.states_}},{key:"setStates",value:function(e){this.states_=e}},{key:"computeOutputShape",value:function(e){qE(e)&&(e=e[0]);var t=this.cell.stateSize;Array.isArray(t)||(t=[t]);var n,r=t[0];if(n=this.returnSequences?[e[0],e[1],r]:[e[0],r],this.returnState){var a,i=[],o=(0,Ht.Z)(t);try{for(o.s();!(a=o.n()).done;){var s=a.value;i.push([e[0],s])}}catch(yhe){o.e(yhe)}finally{o.f()}return[n].concat(i)}return n}},{key:"computeMask",value:function(e,t){var n=this;return rm((function(){Array.isArray(t)&&(t=t[0]);var e=n.returnSequences?t:null;if(n.returnState){var r=n.states.map((function(e){return null}));return[e].concat(r)}return e}))}},{key:"states",get:function(){if(null==this.states_){for(var e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,t=[],n=0;n<e;++n)t.push(null);return t}return this.states_},set:function(e){this.states_=e}},{key:"build",value:function(e){if(null!=this.numConstants)throw new pT("Constants support is not implemented in RNN yet.");qE(e)&&(e=e[0]);var t=this.stateful?e[0]:null,n=e.slice(2);this.inputSpec[0]=new nN({shape:[t,null].concat((0,me.Z)(n))});var r,a=[e[0]].concat(e.slice(2));if(this.cell.build(a),r=Array.isArray(this.cell.stateSize)?this.cell.stateSize:[this.cell.stateSize],null!=this.stateSpec){if(!Sc(this.stateSpec.map((function(e){return e.shape[e.shape.length-1]})),r))throw new hT("An initialState was passed that is not compatible with "+"cell.stateSize. Received stateSpec=".concat(this.stateSpec,"; ")+"However cell.stateSize is ".concat(this.cell.stateSize))}else this.stateSpec=r.map((function(e){return new nN({shape:[null,e]})}));this.stateful&&this.resetStates()}},{key:"resetStates",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];rm((function(){if(!t.stateful)throw new dT("Cannot call resetStates() on an RNN Layer that is not stateful.");var r=t.inputSpec[0].shape[0];if(null==r)throw new hT("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==t.states_)Array.isArray(t.cell.stateSize)?t.states_=t.cell.stateSize.map((function(e){return Rb([r,e])})):t.states_=[Rb([r,t.cell.stateSize])];else if(null==e)am(t.states_),null!=t.keptStates&&(am(t.keptStates),t.keptStates=[]),Array.isArray(t.cell.stateSize)?t.states_=t.cell.stateSize.map((function(e){return Rb([r,e])})):t.states_[0]=Rb([r,t.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==t.states_.length)throw new hT("Layer ".concat(t.name," expects ").concat(t.states_.length," state(s), ")+"but it received ".concat(e.length," state value(s). Input ")+"received: ".concat(e));!0===n?t.keptStates.push(t.states_.slice()):am(t.states_);for(var a=0;a<t.states_.length;++a){var i=e[a],o=Array.isArray(t.cell.stateSize)?t.cell.stateSize[a]:t.cell.stateSize,s=[r,o];if(!Sc(i.shape,s))throw new hT("State ".concat(a," is incompatible with layer ").concat(t.name,": ")+"expected shape=".concat(s,", received shape=").concat(i.shape));t.states_[a]=i}}t.states_=t.states_.map((function(e){return im(e.clone())}))}))}},{key:"apply",value:function(e,t){var r=null==t?null:t.initialState,a=null==t?null:t.constants;null==t&&(t={});var i=HZ(e,r,a,this.numConstants);e=i.inputs,r=i.initialState,a=i.constants;var o=[],s=[];if(null!=r){t.initialState=r,o=o.concat(r),this.stateSpec=[];var u,c=(0,Ht.Z)(r);try{for(c.s();!(u=c.n()).done;){var l=u.value;this.stateSpec.push(new nN({shape:l.shape}))}}catch(yhe){c.e(yhe)}finally{c.f()}s=s.concat(this.stateSpec)}if(null!=a&&(t.constants=a,o=o.concat(a),this.numConstants=a.length),o[0]instanceof rN){var d=[e].concat(o),f=this.inputSpec.concat(s),h=this.inputSpec;this.inputSpec=f;var p=BN((0,zN.Z)(n.prototype),"apply",this).call(this,d,t);return this.inputSpec=h,p}return BN((0,zN.Z)(n.prototype),"apply",this).call(this,e,t)}},{key:"call",value:function(e,t){var n=this;return rm((function(){var r=null==t?null:t.mask,a=null==t?null:t.training,i=null==t?null:t.initialState;e=KE(e),null==i&&(i=n.stateful?n.states_:n.getInitialState(e));var o=Array.isArray(n.cell.stateSize)?n.cell.stateSize.length:1;if(i.length!==o)throw new hT("RNN Layer has ".concat(o," state(s) but was passed ")+"".concat(i.length," initial state(s)."));n.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");var s={training:a},u=qZ((function(e,t){var r=n.cell.call([e].concat(t),s);return[r[0],r.slice(1)]}),e,i,n.goBackwards,r,null,n.unroll,n.returnSequences),c=u[0],l=u[1],d=u[2];n.stateful&&n.resetStates(d,a);var f=n.returnSequences?l:c;return n.returnState?[f].concat(d):f}))}},{key:"getInitialState",value:function(e){var t=this;return rm((function(){var n=Rb(e.shape);return n=lE(n=Hy(n,[1,2])),Array.isArray(t.cell.stateSize)?t.cell.stateSize.map((function(e){return e>1?mE(n,[1,e]):n})):t.cell.stateSize>1?[mE(n,[1,t.cell.stateSize])]:[n]}))}},{key:"trainableWeights",get:function(){return this.trainable?this.cell.trainableWeights:[]}},{key:"nonTrainableWeights",get:function(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}},{key:"setFastWeightInitDuringBuild",value:function(e){BN((0,zN.Z)(n.prototype),"setFastWeightInitDuringBuild",this).call(this,e),null!=this.cell&&this.cell.setFastWeightInitDuringBuild(e)}},{key:"getConfig",value:function(){var e=BN((0,zN.Z)(n.prototype),"getConfig",this).call(this),t={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};null!=this.numConstants&&(t.numConstants=this.numConstants);var r=this.cell.getConfig();return this.getClassName()===n.className&&(t.cell={className:this.cell.getClassName(),config:r}),Object.assign(Object.assign(Object.assign({},r),e),t)}}],[{key:"fromConfig",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=VN(t.cell,n);return new e(Object.assign(t,{cell:r}))}}]),n}(sN);$Z.className="RNN",ym($Z);var KZ=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(){return(0,Se.Z)(this,n),t.apply(this,arguments)}return(0,Te.Z)(n)}(sN),XZ=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r;return(0,Se.Z)(this,n),(r=t.call(this,e)).DEFAULT_ACTIVATION="tanh",r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_RECURRENT_INITIALIZER="orthogonal",r.DEFAULT_BIAS_INITIALIZER="zeros",r.units=e.units,DT(r.units,"units"),r.activation=fZ(null==e.activation?r.DEFAULT_ACTIVATION:e.activation),r.useBias=null==e.useBias||e.useBias,r.kernelInitializer=HE(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.recurrentInitializer=HE(e.recurrentInitializer||r.DEFAULT_RECURRENT_INITIALIZER),r.biasInitializer=HE(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.kernelRegularizer=bZ(e.kernelRegularizer),r.recurrentRegularizer=bZ(e.recurrentRegularizer),r.biasRegularizer=bZ(e.biasRegularizer),r.kernelConstraint=NN(e.kernelConstraint),r.recurrentConstraint=NN(e.recurrentConstraint),r.biasConstraint=NN(e.biasConstraint),r.dropout=iE([1,oE([0,null==e.dropout?0:e.dropout])]),r.recurrentDropout=iE([1,oE([0,null==e.recurrentDropout?0:e.recurrentDropout])]),r.dropoutFunc=e.dropoutFunc,r.stateSize=r.units,r.dropoutMask=null,r.recurrentDropoutMask=null,r}return(0,Te.Z)(n,[{key:"build",value:function(e){e=XE(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}},{key:"call",value:function(e,t){var n=this;return rm((function(){if(2!==e.length)throw new hT("SimpleRNNCell expects 2 input Tensors, got ".concat(e.length,"."));var r=e[1];e=e[0];var a,i=null!=t.training&&t.training;0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=r_({ones:function(){return Wb(e)},rate:n.dropout,training:i,dropoutFunc:n.dropoutFunc})),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=r_({ones:function(){return Wb(r)},rate:n.recurrentDropout,training:i,dropoutFunc:n.dropoutFunc}));var o=n.dropoutMask,s=n.recurrentDropoutMask;a=yE(null!=o?lm(e,o):e,n.kernel.read()),null!=n.bias&&(a=xE(a,n.bias.read())),null!=s&&(r=lm(r,s));var u=sm(a,yE(r,n.recurrentKernel.read()));return null!=n.activation&&(u=n.activation.apply(u)),[u,u]}))}},{key:"getConfig",value:function(){var e=BN((0,zN.Z)(n.prototype),"getConfig",this).call(this),t={units:this.units,activation:lZ(this.activation),useBias:this.useBias,kernelInitializer:GE(this.kernelInitializer),recurrentInitializer:GE(this.recurrentInitializer),biasInitializer:GE(this.biasInitializer),kernelRegularizer:gZ(this.kernelRegularizer),recurrentRegularizer:gZ(this.recurrentRegularizer),biasRegularizer:gZ(this.biasRegularizer),activityRegularizer:gZ(this.activityRegularizer),kernelConstraint:TN(this.kernelConstraint),recurrentConstraint:TN(this.recurrentConstraint),biasConstraint:TN(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},e),t)}}]),n}(KZ);XZ.className="SimpleRNNCell",ym(XZ);var YZ=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){return(0,Se.Z)(this,n),e.cell=new XZ(e),t.call(this,e)}return(0,Te.Z)(n,[{key:"call",value:function(e,t){var r=this;return rm((function(){null!=r.cell.dropoutMask&&(am(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(am(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null);var a=null==t?null:t.mask,i=null==t?null:t.training,o=null==t?null:t.initialState;return BN((0,zN.Z)(n.prototype),"call",r).call(r,e,{mask:a,training:i,initialState:o})}))}}],[{key:"fromConfig",value:function(e,t){return new e(t)}}]),n}($Z);YZ.className="SimpleRNN",ym(YZ);var QZ=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r;if((0,Se.Z)(this,n),(r=t.call(this,e)).DEFAULT_ACTIVATION="tanh",r.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_RECURRENT_INITIALIZER="orthogonal",r.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new hT("GRUCell does not support reset_after parameter set to true.");return r.units=e.units,DT(r.units,"units"),r.activation=fZ(void 0===e.activation?r.DEFAULT_ACTIVATION:e.activation),r.recurrentActivation=fZ(void 0===e.recurrentActivation?r.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),r.useBias=null==e.useBias||e.useBias,r.kernelInitializer=HE(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.recurrentInitializer=HE(e.recurrentInitializer||r.DEFAULT_RECURRENT_INITIALIZER),r.biasInitializer=HE(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.kernelRegularizer=bZ(e.kernelRegularizer),r.recurrentRegularizer=bZ(e.recurrentRegularizer),r.biasRegularizer=bZ(e.biasRegularizer),r.kernelConstraint=NN(e.kernelConstraint),r.recurrentConstraint=NN(e.recurrentConstraint),r.biasConstraint=NN(e.biasConstraint),r.dropout=iE([1,oE([0,null==e.dropout?0:e.dropout])]),r.recurrentDropout=iE([1,oE([0,null==e.recurrentDropout?0:e.recurrentDropout])]),r.dropoutFunc=e.dropoutFunc,r.implementation=e.implementation,r.stateSize=r.units,r.dropoutMask=null,r.recurrentDropoutMask=null,r}return(0,Te.Z)(n,[{key:"build",value:function(e){var t=(e=XE(e))[e.length-1];this.kernel=this.addWeight("kernel",[t,3*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,3*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[3*this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}},{key:"call",value:function(e,t){var n=this;return rm((function(){if(2!==e.length)throw new hT("GRUCell expects 2 input Tensors (inputs, h, c), got "+"".concat(e.length,"."));var r=null!=t.training&&t.training,a=e[1];e=e[0],0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=r_({ones:function(){return Wb(e)},rate:n.dropout,training:r,count:3,dropoutFunc:n.dropoutFunc})),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=r_({ones:function(){return Wb(a)},rate:n.recurrentDropout,training:r,count:3,dropoutFunc:n.dropoutFunc}));var i,o,s,u=n.dropoutMask,c=n.recurrentDropoutMask;0<n.dropout&&n.dropout<1&&(e=lm(e,u[0]));var l=yE(e,n.kernel.read());n.useBias&&(l=xE(l,n.bias.read())),0<n.recurrentDropout&&n.recurrentDropout<1&&(a=lm(a,c[0]));var d=n.recurrentKernel.read(),f=zk(d,[2*n.units,n.units],d.rank-1),h=(0,ge.Z)(f,2),p=h[0],v=h[1],m=yE(a,p),g=zk(l,3,l.rank-1),y=(0,ge.Z)(g,3),b=y[0],k=y[1],w=y[2],x=zk(m,2,m.rank-1),I=(0,ge.Z)(x,2),S=I[0],T=I[1];i=n.recurrentActivation.apply(sm(b,S)),o=n.recurrentActivation.apply(sm(k,T));var E=yE(lm(o,a),v);s=n.activation.apply(sm(w,E));var N=sm(lm(i,a),lm(sm(1,mb(i)),s));return[N,N]}))}},{key:"getConfig",value:function(){var e=BN((0,zN.Z)(n.prototype),"getConfig",this).call(this),t={units:this.units,activation:lZ(this.activation),recurrentActivation:lZ(this.recurrentActivation),useBias:this.useBias,kernelInitializer:GE(this.kernelInitializer),recurrentInitializer:GE(this.recurrentInitializer),biasInitializer:GE(this.biasInitializer),kernelRegularizer:gZ(this.kernelRegularizer),recurrentRegularizer:gZ(this.recurrentRegularizer),biasRegularizer:gZ(this.biasRegularizer),activityRegularizer:gZ(this.activityRegularizer),kernelConstraint:TN(this.kernelConstraint),recurrentConstraint:TN(this.recurrentConstraint),biasConstraint:TN(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},e),t)}}]),n}(KZ);QZ.className="GRUCell",ym(QZ);var JZ=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){return(0,Se.Z)(this,n),0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new QZ(e),t.call(this,e)}return(0,Te.Z)(n,[{key:"call",value:function(e,t){var r=this;return rm((function(){null!=r.cell.dropoutMask&&(am(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(am(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null);var a=null==t?null:t.mask,i=null==t?null:t.training,o=null==t?null:t.initialState;return BN((0,zN.Z)(n.prototype),"call",r).call(r,e,{mask:a,training:i,initialState:o})}))}}],[{key:"fromConfig",value:function(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)}}]),n}($Z);JZ.className="GRU",ym(JZ);var e_=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r;return(0,Se.Z)(this,n),(r=t.call(this,e)).DEFAULT_ACTIVATION="tanh",r.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_RECURRENT_INITIALIZER="orthogonal",r.DEFAULT_BIAS_INITIALIZER="zeros",r.units=e.units,DT(r.units,"units"),r.activation=fZ(void 0===e.activation?r.DEFAULT_ACTIVATION:e.activation),r.recurrentActivation=fZ(void 0===e.recurrentActivation?r.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),r.useBias=null==e.useBias||e.useBias,r.kernelInitializer=HE(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.recurrentInitializer=HE(e.recurrentInitializer||r.DEFAULT_RECURRENT_INITIALIZER),r.biasInitializer=HE(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.unitForgetBias=e.unitForgetBias,r.kernelRegularizer=bZ(e.kernelRegularizer),r.recurrentRegularizer=bZ(e.recurrentRegularizer),r.biasRegularizer=bZ(e.biasRegularizer),r.kernelConstraint=NN(e.kernelConstraint),r.recurrentConstraint=NN(e.recurrentConstraint),r.biasConstraint=NN(e.biasConstraint),r.dropout=iE([1,oE([0,null==e.dropout?0:e.dropout])]),r.recurrentDropout=iE([1,oE([0,null==e.recurrentDropout?0:e.recurrentDropout])]),r.dropoutFunc=e.dropoutFunc,r.implementation=e.implementation,r.stateSize=[r.units,r.units],r.dropoutMask=null,r.recurrentDropoutMask=null,r}return(0,Te.Z)(n,[{key:"build",value:function(e){var t,n,r=(e=XE(e))[e.length-1];if(this.kernel=this.addWeight("kernel",[r,4*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,4*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){if(this.unitForgetBias){var a=this.biasInitializer,i=this.units;n=new(t=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(){return(0,Se.Z)(this,n),t.apply(this,arguments)}return(0,Te.Z)(n,[{key:"apply",value:function(e,t){var n=a.apply([i]),r=(new ZE).apply([i]),o=a.apply([2*i]);return vE(vE(n,r),o)}}]),n}(NE),t.className="CustomInit",t)}else n=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.units],null,n,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}},{key:"call",value:function(e,t){var n=this;return rm((function(){var r=null!=t.training&&t.training;if(3!==e.length)throw new hT("LSTMCell expects 3 input Tensors (inputs, h, c), got "+"".concat(e.length,"."));var a=e[1],i=e[2];e=e[0],0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=r_({ones:function(){return Wb(e)},rate:n.dropout,training:r,count:4,dropoutFunc:n.dropoutFunc})),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=r_({ones:function(){return Wb(a)},rate:n.recurrentDropout,training:r,count:4,dropoutFunc:n.dropoutFunc}));var o,s,u,c,l=n.dropoutMask,d=n.recurrentDropoutMask;0<n.dropout&&n.dropout<1&&(e=lm(e,l[0]));var f=yE(e,n.kernel.read());0<n.recurrentDropout&&n.recurrentDropout<1&&(a=lm(a,d[0])),f=sm(f,yE(a,n.recurrentKernel.read())),n.useBias&&(f=xE(f,n.bias.read()));var h=zk(f,4,f.rank-1),p=(0,ge.Z)(h,4),v=p[0],m=p[1],g=p[2],y=p[3];o=n.recurrentActivation.apply(v),s=n.recurrentActivation.apply(m),u=sm(lm(s,i),lm(o,n.activation.apply(g))),c=n.recurrentActivation.apply(y);var b=lm(c,n.activation.apply(u));return[b,b,u]}))}},{key:"getConfig",value:function(){var e=BN((0,zN.Z)(n.prototype),"getConfig",this).call(this),t={units:this.units,activation:lZ(this.activation),recurrentActivation:lZ(this.recurrentActivation),useBias:this.useBias,kernelInitializer:GE(this.kernelInitializer),recurrentInitializer:GE(this.recurrentInitializer),biasInitializer:GE(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:gZ(this.kernelRegularizer),recurrentRegularizer:gZ(this.recurrentRegularizer),biasRegularizer:gZ(this.biasRegularizer),activityRegularizer:gZ(this.activityRegularizer),kernelConstraint:TN(this.kernelConstraint),recurrentConstraint:TN(this.recurrentConstraint),biasConstraint:TN(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},e),t)}}]),n}(KZ);e_.className="LSTMCell",ym(e_);var t_=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){return(0,Se.Z)(this,n),0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new e_(e),t.call(this,e)}return(0,Te.Z)(n,[{key:"call",value:function(e,t){var r=this;return rm((function(){null!=r.cell.dropoutMask&&(am(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(am(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null);var a=null==t?null:t.mask,i=null==t?null:t.training,o=null==t?null:t.initialState;return BN((0,zN.Z)(n.prototype),"call",r).call(r,e,{mask:a,training:i,initialState:o})}))}}],[{key:"fromConfig",value:function(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)}}]),n}($Z);t_.className="LSTM",ym(t_);var n_=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r;return(0,Se.Z)(this,n),(r=t.call(this,e)).cells=e.cells,r}return(0,Te.Z)(n,[{key:"stateSize",get:function(){var e,t=[],n=(0,Ht.Z)(this.cells.slice().reverse());try{for(n.s();!(e=n.n()).done;){var r=e.value;Array.isArray(r.stateSize)?t.push.apply(t,(0,me.Z)(r.stateSize)):t.push(r.stateSize)}}catch(yhe){n.e(yhe)}finally{n.f()}return t}},{key:"call",value:function(e,t){var n=this;return rm((function(){var r,a=e.slice(1),i=[],o=(0,Ht.Z)(n.cells.slice().reverse());try{for(o.s();!(r=o.n()).done;){var s=r.value;Array.isArray(s.stateSize)?i.push(a.splice(0,s.stateSize.length)):i.push(a.splice(0,1))}}catch(yhe){o.e(yhe)}finally{o.f()}i.reverse();for(var u,c=[],l=0;l<n.cells.length;++l){var d=n.cells[l];a=i[l],u=0===l?[e[0]].concat(a):[u[0]].concat(a),u=d.call(u,t),c.push(u.slice(1))}a=[];var f,h=(0,Ht.Z)(c.slice().reverse());try{for(h.s();!(f=h.n()).done;){var p,v=f.value;(p=a).push.apply(p,(0,me.Z)(v))}}catch(yhe){h.e(yhe)}finally{h.f()}return[u[0]].concat(a)}))}},{key:"build",value:function(e){var t;qE(e)&&(e=e[0]),this.cells.forEach((function(n,r){YT("RNNCell_".concat(r),(function(){n.build(e),t=Array.isArray(n.stateSize)?n.stateSize[0]:n.stateSize,e=[e[0],t]}))})),this.built=!0}},{key:"getConfig",value:function(){var e=BN((0,zN.Z)(n.prototype),"getConfig",this).call(this),t={cells:this.cells.map((function(e){return{className:e.getClassName(),config:e.getConfig()}}))};return Object.assign(Object.assign({},e),t)}},{key:"trainableWeights",get:function(){if(!this.trainable)return[];var e,t=[],n=(0,Ht.Z)(this.cells);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push.apply(t,(0,me.Z)(r.trainableWeights))}}catch(yhe){n.e(yhe)}finally{n.f()}return t}},{key:"nonTrainableWeights",get:function(){var e,t=[],n=(0,Ht.Z)(this.cells);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push.apply(t,(0,me.Z)(r.nonTrainableWeights))}}catch(yhe){n.e(yhe)}finally{n.f()}if(!this.trainable){var a,i=[],o=(0,Ht.Z)(this.cells);try{for(o.s();!(a=o.n()).done;){var s=a.value;i.push.apply(i,(0,me.Z)(s.trainableWeights))}}catch(yhe){o.e(yhe)}finally{o.f()}return i.concat(t)}return t}},{key:"getWeights",value:function(){var e,t=[],n=(0,Ht.Z)(this.cells);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push.apply(t,(0,me.Z)(r.weights))}}catch(yhe){n.e(yhe)}finally{n.f()}return eN(t)}},{key:"setWeights",value:function(e){var t,n=[],r=(0,Ht.Z)(this.cells);try{for(r.s();!(t=r.n()).done;)for(var a=t.value,i=a.weights.length,o=e.splice(i),s=0;s<a.weights.length;++s)n.push([a.weights[s],o[s]])}catch(yhe){r.e(yhe)}finally{r.f()}tN(n)}}],[{key:"fromConfig",value:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=[],i=(0,Ht.Z)(t.cells);try{for(i.s();!(n=i.n()).done;){var o=n.value;a.push(VN(o,r))}}catch(yhe){i.e(yhe)}finally{i.f()}return new e({cells:a})}}]),n}(KZ);function r_(e){var t=e.ones,n=e.rate,r=e.training,a=void 0!==r&&r,i=e.count,o=void 0===i?1:i,s=e.dropoutFunc,u=function(){return null!=s?s(t(),n):IE(t(),n)},c=function(){return SE(u,t,a)};return!o||o<=1?im(c().clone()):Array(o).fill(void 0).map(c).map((function(e){return im(e.clone())}))}n_.className="StackedRNNCells",ym(n_);var a_=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},i_=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r;if((0,Se.Z)(this,n),e.unroll)throw new pT("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new pT("It is not possible at the moment to stack convolutional cells.");return(r=t.call(this,e)).inputSpec=[new nN({ndim:5})],r}return(0,Te.Z)(n,[{key:"call",value:function(e,t){var r=this;return rm((function(){if(null!=r.cell.dropoutMask&&(am(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(am(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null),t&&t.constants)throw new hT("ConvRNN2D cell does not support constants");var a=null==t?null:t.mask,i=null==t?null:t.training,o=null==t?null:t.initialState;return BN((0,zN.Z)(n.prototype),"call",r).call(r,e,{mask:a,training:i,initialState:o})}))}},{key:"computeOutputShape",value:function(e){var t=this.computeSingleOutputShape(e);return this.returnSequences||(t=[t[0]].concat((0,me.Z)(t.slice(2)))),this.returnState&&(t=[t].concat((0,me.Z)(Array(2).fill([e[0]].concat((0,me.Z)(t.slice(-3))))))),t}},{key:"getInitialState",value:function(e){var t=this;return rm((function(){var n=t.cell.stateSize,r=e.shape,a=t.computeSingleOutputShape(r),i=Rb([a[0]].concat((0,me.Z)(a.slice(2))));return Array.isArray(n)?Array(n.length).fill(i):[i]}))}},{key:"resetStates",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];rm((function(){if(!t.stateful)throw new dT("Cannot call resetStates() on an RNN Layer that is not stateful.");var r=t.inputSpec[0].shape,a=t.computeSingleOutputShape(r),i=[a[0]].concat((0,me.Z)(a.slice(2)));if(null==r[0])throw new hT("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==t.getStates())Array.isArray(t.cell.stateSize)?t.states_=t.cell.stateSize.map((function(){return Rb(i)})):t.states_=[Rb(i)];else if(null==e)am(t.states_),null!=t.keptStates&&(am(t.keptStates),t.keptStates=[]),Array.isArray(t.cell.stateSize)?t.states_=t.cell.stateSize.map((function(){return Rb(i)})):t.states_[0]=Rb(i);else{if(Array.isArray(e)||(e=[e]),e.length!==t.states_.length)throw new hT("Layer ".concat(t.name," expects ").concat(t.states_.length," state(s), ")+"but it received ".concat(e.length," state value(s). Input ")+"received: ".concat(e));n?t.keptStates.push(t.states_.slice()):am(t.states_);for(var o=0;o<t.states_.length;++o){var s=e[o],u=i;if(!Sc(s.shape,u))throw new hT("State ".concat(o," is incompatible with layer ").concat(t.name,": ")+"expected shape=".concat(u,", received shape=").concat(s.shape));t.states_[o]=s}}t.states_=t.states_.map((function(e){return im(e.clone())}))}))}},{key:"computeSingleOutputShape",value:function(e){var t=this.cell,n=t.dataFormat,r=t.filters,a=t.kernelSize,i=t.padding,o=t.strides,s=t.dilationRate,u="channelsFirst"===n,c=e[u?3:2],l=e[u?4:3],d=NZ(c,a[0],i,o[0],s[0]),f=NZ(l,a[1],i,o[1],s[1]);return[].concat((0,me.Z)(e.slice(0,2)),(0,me.Z)(u?[r,d,f]:[d,f,r]))}}]),n}($Z);i_.className="ConvRNN2D";var o_=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r;(0,Se.Z)(this,n);var a=e.filters,i=e.kernelSize,o=e.strides,s=e.padding,u=e.dataFormat,c=e.dilationRate;return(r=t.call(this,Object.assign(Object.assign({},e),{units:a}))).filters=a,DT(r.filters,"filters"),r.kernelSize=EZ(i,2,"kernelSize"),r.kernelSize.forEach((function(e){return DT(e,"kernelSize")})),r.strides=EZ(o||1,2,"strides"),r.strides.forEach((function(e){return DT(e,"strides")})),r.padding=s||"valid",qT(r.padding),r.dataFormat=u||"channelsLast",HT(r.dataFormat),r.dilationRate=EZ(c||1,2,"dilationRate"),r.dilationRate.forEach((function(e){return DT(e,"dilationRate")})),r}return(0,Te.Z)(n,[{key:"build",value:function(e){var t;e=XE(e);var n="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[n])throw new hT("The channel dimension of the input should be defined. "+"Found ".concat(e[n]));var r=e[n],a=this.kernelSize.concat([r,4*this.filters]);this.kernel=this.addWeight("kernel",a,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);var i=this.kernelSize.concat([this.filters,4*this.filters]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",i,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){var o;if(this.unitForgetBias){var s=this.biasInitializer,u=this.filters;o=new(t=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(){return(0,Se.Z)(this,n),t.apply(this,arguments)}return(0,Te.Z)(n,[{key:"apply",value:function(e,t){return pE([s.apply([u]),Db([u]),s.apply([2*u])])}}]),n}(NE),t.className="CustomInit",t)}else o=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.filters],null,o,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}},{key:"call",value:function(e,t){var n=this;return rm((function(){if(3!==e.length)throw new hT("ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got "+"".concat(e.length,"."));var r=t.training||!1,a=e[0],i=e[1],o=e[2];0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=r_({ones:function(){return Wb(a)},rate:n.dropout,training:r,count:4,dropoutFunc:n.dropoutFunc}));var s=n.dropoutMask,u=function(e,t,n){return t&&t[n]?lm(t[n],e):e},c=u(a,s,0),l=u(a,s,1),d=u(a,s,2),f=u(a,s,3);0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=r_({ones:function(){return Wb(i)},rate:n.recurrentDropout,training:r,count:4,dropoutFunc:n.dropoutFunc}));var h=n.recurrentDropoutMask,p=u(i,h,0),v=u(i,h,1),m=u(i,h,2),g=u(i,h,3),y=zk(n.kernel.read(),4,3),b=(0,ge.Z)(y,4),k=b[0],w=b[1],x=b[2],I=b[3],S=n.useBias?zk(n.bias.read(),4):[null,null,null,null],T=(0,ge.Z)(S,4),E=T[0],N=T[1],C=T[2],Z=T[3];c=n.inputConv(c,k,E,n.padding),l=n.inputConv(l,w,N,n.padding),d=n.inputConv(d,x,C,n.padding),f=n.inputConv(f,I,Z,n.padding);var _=zk(n.recurrentKernel.read(),4,3),A=(0,ge.Z)(_,4),R=A[0],D=A[1],O=A[2],L=A[3];p=n.recurrentConv(p,R),v=n.recurrentConv(v,D),m=n.recurrentConv(m,O),g=n.recurrentConv(g,L);var F=n.recurrentActivation.apply(sm(c,p)),M=n.recurrentActivation.apply(sm(l,v)),P=sm(lm(M,o),lm(F,n.activation.apply(sm(d,m)))),z=lm(n.recurrentActivation.apply(sm(f,g)),n.activation.apply(P));return[z,z,P]}))}},{key:"getConfig",value:function(){var e=BN((0,zN.Z)(n.prototype),"getConfig",this).call(this),t=(e.units,a_(e,["units"])),r={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},t),r)}},{key:"inputConv",value:function(e,t,n,r){var a=py(e,t,this.strides,r||"valid","channelsFirst"===this.dataFormat?"NCHW":"NHWC",this.dilationRate);return n?xE(a,n,this.dataFormat):a}},{key:"recurrentConv",value:function(e,t){return py(e,t,1,"same","channelsFirst"===this.dataFormat?"NCHW":"NHWC")}}]),n}(e_);o_.className="ConvLSTM2DCell",ym(o_);var s_=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){(0,Se.Z)(this,n);var r=new o_(e);return t.call(this,Object.assign(Object.assign({},e),{cell:r}))}return(0,Te.Z)(n,null,[{key:"fromConfig",value:function(e,t){return new e(t)}}]),n}(i_);s_.className="ConvLSTM2D",ym(s_);var u_=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r;return(0,Se.Z)(this,n),(r=t.call(this,e)).rate=Math.max(Math.min(e.rate,1),0),r.noiseShape=e.noiseShape,r.seed=e.seed,r.supportsMasking=!0,r}return(0,Te.Z)(n,[{key:"getNoiseShape",value:function(e){if(null==this.noiseShape)return this.noiseShape;for(var t=e.shape,n=[],r=0;r<this.noiseShape.length;++r)n.push(null==this.noiseShape[r]?t[r]:this.noiseShape[r]);return n}},{key:"call",value:function(e,t){var n=this;return rm((function(){n.invokeCallHook(e,t);var r=KE(e);if(0<n.rate&&n.rate<1){var a=null!=t.training&&t.training,i=n.getNoiseShape(r);return SE((function(){return IE(r,n.rate,i,n.seed)}),(function(){return r}),a)}return e}))}},{key:"getConfig",value:function(){var e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},t=BN((0,zN.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}},{key:"dispose",value:function(){return BN((0,zN.Z)(n.prototype),"dispose",this).call(this)}}]),n}(sN);u_.className="Dropout",ym(u_);var c_=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r;return(0,Se.Z)(this,n),(r=t.call(this,e)).inputSpec=[{ndim:3}],r}return(0,Te.Z)(n,[{key:"getNoiseShape",value:function(e){var t=e.shape;return[t[0],1,t[2]]}}]),n}(u_);c_.className="SpatialDropout1D",ym(c_);var l_=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r;if((0,Se.Z)(this,n),(r=t.call(this,e)).activation=null,r.useBias=!0,r.kernel=null,r.bias=null,r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_BIAS_INITIALIZER="zeros",null==e.batchInputShape&&null==e.inputShape&&null!=e.inputDim){var a=null;null!=e.batchSize&&(a=e.batchSize),r.batchInputShape=[a,e.inputDim]}return r.units=e.units,DT(r.units,"units"),r.activation=fZ(e.activation),null!=e.useBias&&(r.useBias=e.useBias),r.kernelInitializer=HE(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.biasInitializer=HE(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.kernelConstraint=NN(e.kernelConstraint),r.biasConstraint=NN(e.biasConstraint),r.kernelRegularizer=bZ(e.kernelRegularizer),r.biasRegularizer=bZ(e.biasRegularizer),r.activityRegularizer=bZ(e.activityRegularizer),r.supportsMasking=!0,r.inputSpec=[{minNDim:2}],r}return(0,Te.Z)(n,[{key:"build",value:function(e){var t=(e=XE(e))[e.length-1];null==this.kernel&&(this.kernel=this.addWeight("kernel",[t,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:(0,ye.Z)({},-1,t)}],this.built=!0}},{key:"computeOutputShape",value:function(e){var t=(e=XE(e)).slice();return t[t.length-1]=this.units,t}},{key:"call",value:function(e,t){var n=this;return rm((function(){n.invokeCallHook(e,t);var r,a=KE(e),i=LT(n.activation.getClassName());return null!=i?r=yE(a,n.kernel.read(),i,n.bias?n.bias.read():null):(r=yE(a,n.kernel.read()),null!=n.bias&&(r=xE(r,n.bias.read())),null!=n.activation&&(r=n.activation.apply(r))),r}))}},{key:"getConfig",value:function(){var e={units:this.units,activation:lZ(this.activation),useBias:this.useBias,kernelInitializer:GE(this.kernelInitializer),biasInitializer:GE(this.biasInitializer),kernelRegularizer:gZ(this.kernelRegularizer),biasRegularizer:gZ(this.biasRegularizer),activityRegularizer:gZ(this.activityRegularizer),kernelConstraint:TN(this.kernelConstraint),biasConstraint:TN(this.biasConstraint)},t=BN((0,zN.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(sN);l_.className="Dense",ym(l_);var d_=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r;return(0,Se.Z)(this,n),e=e||{},(r=t.call(this,e)).inputSpec=[{minNDim:3}],r.dataFormat=e.dataFormat,r}return(0,Te.Z)(n,[{key:"computeOutputShape",value:function(e){e=XE(e);var t,n=(0,Ht.Z)(e.slice(1));try{for(n.s();!(t=n.n()).done;){if(null==t.value)throw new hT('The shape of the input to "Flatten" is not fully defined '+"(got ".concat(e.slice(1),"). Make sure to pass a complete ")+'"input_shape" or "batch_input_shape" argument to the first layer in your model.')}}catch(yhe){n.e(yhe)}finally{n.f()}return[e[0],aE(e,1)]}},{key:"call",value:function(e,t){var n=this;return rm((function(){n.invokeCallHook(e,t);var r=KE(e);if("channelsFirst"===n.dataFormat&&r.rank>1){for(var a=[0],i=2;i<r.rank;++i)a.push(i);a.push(1),r=hw(r,a)}return function(e){if(e.rank<=1)throw new hT("batchFlatten requires a minimum rank of 2. Got rank: ".concat(e.rank,"."));var t=[e.shape[0],aE(e.shape,1)];return Gg(e,t)}(r)}))}},{key:"getConfig",value:function(){var e={};null!=this.dataFormat&&(e.dataFormat=this.dataFormat);var t=BN((0,zN.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(sN);d_.className="Flatten",ym(d_);var f_=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r;return(0,Se.Z)(this,n),(r=t.call(this,e)).supportsMasking=!0,r.activation=fZ(e.activation),r}return(0,Te.Z)(n,[{key:"call",value:function(e,t){var n=this;return rm((function(){n.invokeCallHook(e,t);var r=KE(e);return n.activation.apply(r)}))}},{key:"getConfig",value:function(){var e={activation:lZ(this.activation)},t=BN((0,zN.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(sN);f_.className="Activation",ym(f_);var h_=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r;return(0,Se.Z)(this,n),(r=t.call(this,e)).n=e.n,r.inputSpec=[{ndim:2}],r}return(0,Te.Z)(n,[{key:"computeOutputShape",value:function(e){return[e[0],this.n,e[1]]}},{key:"call",value:function(e,t){var n=this;return rm((function(){return function(e,t){return rm((function(){if(2!==e.shape.length)throw new hT("repeat() expects a rank-2 tensor, but received a "+"rank-".concat(e.shape.length," tensor."));return mE(lE(e,1),[1,t,1])}))}(e=KE(e),n.n)}))}},{key:"getConfig",value:function(){var e={n:this.n},t=BN((0,zN.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(sN);h_.className="RepeatVector",ym(h_);var p_=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r;(0,Se.Z)(this,n),(r=t.call(this,e)).targetShape=e.targetShape;for(var a=0;a<r.targetShape.length;++a)r.isUnknown(r.targetShape[a])&&(r.targetShape[a]=null);return r}return(0,Te.Z)(n,[{key:"isUnknown",value:function(e){return e<0||null==e}},{key:"fixUnknownDimension",value:function(e,t){for(var n="Total size of new array must be unchanged.",r=t.slice(),a=1,i=null,o=0;o<r.length;++o){var s=r[o];if(this.isUnknown(s)){if(null!==i)throw new hT("Can only specifiy one unknown dimension.");i=o}else a*=s}var u=aE(e);if(null!==i){if(0===a||u%a!==0)throw new hT(n);r[i]=u/a}else if(u!==a)throw new hT(n);return r}},{key:"computeOutputShape",value:function(e){for(var t=!1,n=0;n<e.length;++n)if(this.isUnknown(e[n])){t=!0;break}return t?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}},{key:"call",value:function(e,t){var n=this;return rm((function(){n.invokeCallHook(e,t);var r=KE(e),a=r.shape,i=a.slice(0,1).concat(n.fixUnknownDimension(a.slice(1),n.targetShape));return Gg(r,i)}))}},{key:"getConfig",value:function(){var e={targetShape:this.targetShape},t=BN((0,zN.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(sN);p_.className="Reshape",ym(p_);var v_=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r;if((0,Se.Z)(this,n),r=t.call(this,e),null==e.dims)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error("Permute constructor requires `dims` to be an Array, but received "+"".concat(e.dims," instead."));var a=sE(1,e.dims.length+1);if(!Sc(e.dims.slice().sort(),a))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");return r.dims=e.dims,r.dimsIncludingBatch=[0].concat(r.dims),r.inputSpec=[new nN({ndim:r.dims.length+1})],r}return(0,Te.Z)(n,[{key:"computeOutputShape",value:function(e){var t=(e=XE(e)).slice();return this.dims.forEach((function(n,r){t[r+1]=e[n]})),t}},{key:"call",value:function(e,t){return hw(KE(e),this.dimsIncludingBatch)}},{key:"getConfig",value:function(){var e={dims:this.dims},t=BN((0,zN.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(sN);v_.className="Permute",ym(v_);var m_=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r;return(0,Se.Z)(this,n),(r=t.call(this,null==e?{}:e)).supportsMasking=!0,r.maskValue=null!=e?null==e.maskValue?0:e.maskValue:0,r}return(0,Te.Z)(n,[{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e=BN((0,zN.Z)(n.prototype),"getConfig",this).call(this),t={maskValue:this.maskValue};return Object.assign(t,e),t}},{key:"computeMask",value:function(e,t){var n=KE(e);return xg(Vb(n,this.maskValue),-1)}},{key:"call",value:function(e,t){var n=this;return rm((function(){n.invokeCallHook(e,t);var r=KE(e),a=xg(Vb(r,n.maskValue),-1,!0);return lm(r,Qv(a,r.dtype))}))}}]),n}(sN);m_.className="Masking",ym(m_);var g_=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r;if((0,Se.Z)(this,n),(r=t.call(this,e)).embeddings=null,r.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",null==e.batchInputShape&&null==e.inputShape){var a=null;null!=e.batchSize&&(a=e.batchSize),null==e.inputLength?r.batchInputShape=[a,null]:r.batchInputShape=[a].concat(wT(e.inputLength))}return r.inputDim=e.inputDim,DT(r.inputDim,"inputDim"),r.outputDim=e.outputDim,DT(r.outputDim,"outputDim"),r.embeddingsInitializer=HE(e.embeddingsInitializer||r.DEFAULT_EMBEDDINGS_INITIALIZER),r.embeddingsRegularizer=bZ(e.embeddingsRegularizer),r.activityRegularizer=bZ(e.activityRegularizer),r.embeddingsConstraint=NN(e.embeddingsConstraint),r.maskZero=e.maskZero,r.supportsMasking=e.maskZero,r.inputLength=e.inputLength,r}return(0,Te.Z)(n,[{key:"build",value:function(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}},{key:"warnOnIncompatibleInputShape",value:function(e){}},{key:"computeMask",value:function(e,t){var n=this;return rm((function(){return n.maskZero?(e=KE(e),Vb(e,hm(e))):null}))}},{key:"computeOutputShape",value:function(e){if(e=XE(e),null==this.inputLength)return[].concat((0,me.Z)(e),[this.outputDim]);var t=wT(this.inputLength);if(t.length!==e.length-1)throw new hT('"inputLength" is '.concat(this.inputLength,", but received ")+"input shape has shape ".concat(e));for(var n=0,r=0;r<t.length;++r){var a=t[r],i=e[r+1];if(null!=a&&null!=i&&a!==i)throw new hT('"inputLength" is '.concat(this.inputLength,", but received ")+"input shape has shape ".concat(e));null==a&&(t[n]=i),n++}return[e[0]].concat((0,me.Z)(t),[this.outputDim])}},{key:"call",value:function(e,t){var n=this;return rm((function(){n.invokeCallHook(e,t);var r=KE(e);"int32"!==r.dtype&&(r=cE(r,"int32"));var a=bE(n.embeddings.read(),Gg(r,[r.size]));return Gg(a,XE(n.computeOutputShape(r.shape)))}))}},{key:"getConfig",value:function(){var e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:GE(this.embeddingsInitializer),embeddingsRegularizer:gZ(this.embeddingsRegularizer),activityRegularizer:gZ(this.activityRegularizer),embeddingsConstraint:TN(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},t=BN((0,zN.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(sN);g_.className="Embedding",ym(g_);var y_=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r;return(0,Se.Z)(this,n),(r=t.call(this,e||{})).supportsMasking=!0,r}return(0,Te.Z)(n,[{key:"mergeFunction",value:function(e){throw new pT}},{key:"computeElementwiseOpOutputShape",value:function(e,t){if(null==e||null==t)return null;if(e.length<t.length)return this.computeElementwiseOpOutputShape(t,e);if(0===t.length)return e;for(var n=e.slice(0,e.length-t.length),r=0;r<t.length;++r){var a=e[e.length-t.length+r],i=t[r];if(null==a||null==i||a<0||i<0)n.push(null);else if(1===a)n.push(i);else if(1===i)n.push(a);else{if(a!==i)throw new hT("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(t));n.push(a)}}return n}},{key:"build",value:function(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[XE(e)]),e.length<2)throw new hT("A merge layer should be called on an Array of at least 2 inputs."+" Got ".concat(e.length," input(s)."));var t,n=[],r=(0,Ht.Z)(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;null!=a&&null!==a[0]&&n.push(a[0])}}catch(yhe){r.e(yhe)}finally{r.f()}if((n=ZT(n)).length>1)throw new hT("Can not merge tensors with different batch sizes. "+"Got tensors with shapes: ".concat(JSON.stringify(e),"."));for(var i=null==e[0]?null:e[0].slice(1),o=1;o<e.length;++o){var s=null==e[o]?null:e[o].slice(1);i=this.computeElementwiseOpOutputShape(i,s)}var u=e.map((function(e){return e.length}));-1===e.indexOf(null)&&1===ZT(u).length?this.reshapeRequired=!1:this.reshapeRequired=!0}},{key:"call",value:function(e,t){var n=this;return rm((function(){if(n.reshapeRequired){var t=[],r=e.map((function(e){return e.rank}));if(-1===r.indexOf(null)){var a,i=oE(r),o=(0,Ht.Z)(e);try{for(o.s();!(a=o.n()).done;){for(var s=a.value,u=s.rank,c=0;c<i-u;++c)s=lE(s,1);t.push(s)}}catch(yhe){o.e(yhe)}finally{o.f()}return n.mergeFunction(t)}var l,d=!1,f=(0,Ht.Z)(e);try{for(f.s();!(l=f.n()).done;){var h=l.value,p=h.rank;if(null==p){var v=h.shape,m=v[0],g=v.slice(1).concat([m]),y=Gg(h,[m].concat(aE(v.slice(1))));y=hw(y,[1,0]),y=Gg(y,g),t.push(y),d=!0}else if(p>1){var b=sE(1,p).concat([0]);t.push(hw(h,b)),d=!0}else t.push(h)}}catch(yhe){f.e(yhe)}finally{f.f()}var k=n.mergeFunction(t),w=k.rank;if(d)if(null==w){var x=k.shape,I=x[x.length-1],S=[I].concat(x.slice(0,x.length-1));k=Gg(hw(Gg(k,[-1,I]),[1,0]),S)}else if(w>1){var T=[w-1].concat(sE(0,w-1));k=hw(k,T)}return k}return n.mergeFunction(e)}))}},{key:"computeOutputShape",value:function(e){var t;t=null==e[0]?null:e[0].slice(1);for(var n=1;n<e.length;++n){var r=null==e[n]?null:e[n].slice(1);t=this.computeElementwiseOpOutputShape(t,r)}var a,i=[],o=(0,Ht.Z)(e);try{for(o.s();!(a=o.n()).done;){var s=a.value;null!=s&&null!==s[0]&&i.push(s[0])}}catch(yhe){o.e(yhe)}finally{o.f()}return t=1===(i=ZT(i)).length?i.concat(t):[null].concat(t)}},{key:"computeMask",value:function(e,t){return rm((function(){if(null==t)return null;if(!Array.isArray(t))throw new hT("`mask` should be an Array");if(!Array.isArray(e))throw new hT("`inputs` should be an Array");if(t.length!==e.length)throw new hT("The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths "+"(".concat(e.length," vs ").concat(t.length,")"));if(t.every((function(e){return null==e})))return null;for(var n=(t=t.map((function(e){return null==e?e:Yy(e,0)})))[0],r=1;r<t.length-1;++r)n=wb(n,t[r]);return n}))}}]),n}(sN),b_=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){return(0,Se.Z)(this,n),t.call(this,e)}return(0,Te.Z)(n,[{key:"mergeFunction",value:function(e){return rm((function(){for(var t=e[0].clone(),n=1;n<e.length;++n)t=sm(t,e[n]);return t}))}}]),n}(y_);b_.className="Add",ym(b_);var k_=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){return(0,Se.Z)(this,n),t.call(this,e)}return(0,Te.Z)(n,[{key:"mergeFunction",value:function(e){return rm((function(){for(var t=e[0].clone(),n=1;n<e.length;++n)t=lm(t,e[n]);return t}))}}]),n}(y_);k_.className="Multiply",ym(k_);var w_=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){return(0,Se.Z)(this,n),t.call(this,e)}return(0,Te.Z)(n,[{key:"mergeFunction",value:function(e){return rm((function(){for(var t=e[0].clone(),n=1;n<e.length;++n)t=sm(t,e[n]);return lm(1/e.length,t)}))}}]),n}(y_);w_.className="Average",ym(w_);var x_=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){return(0,Se.Z)(this,n),t.call(this,e)}return(0,Te.Z)(n,[{key:"mergeFunction",value:function(e){return rm((function(){for(var t=e[0],n=1;n<e.length;++n)t=_m(t,e[n]);return t}))}}]),n}(y_);x_.className="Maximum",ym(x_);var I_=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){return(0,Se.Z)(this,n),t.call(this,e)}return(0,Te.Z)(n,[{key:"mergeFunction",value:function(e){return rm((function(){for(var t=e[0],n=1;n<e.length;++n)t=Lb(t,e[n]);return t}))}}]),n}(y_);I_.className="Minimum",ym(I_);var S_=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r;return(0,Se.Z)(this,n),(r=t.call(this,e)).DEFAULT_AXIS=-1,null==e&&(e={}),r.axis=null==e.axis?r.DEFAULT_AXIS:e.axis,r.supportsMasking=!0,r.reshapeRequired=!1,r}return(0,Te.Z)(n,[{key:"build",value:function(e){if(!Array.isArray(e)||!Array.isArray(e[0])||1===e.length)throw new hT("A `Concatenate` layer should be called on a list of at least 2 inputs");var t,n=!0,r=(0,Ht.Z)(e);try{for(r.s();!(t=r.n()).done;){if(null!=t.value){n=!1;break}}}catch(yhe){r.e(yhe)}finally{r.f()}if(!n){for(var a=[],i=0;i<e.length;++i){var o=e[i].slice();o.splice(this.axis,1);var s,u=!1,c=(0,Ht.Z)(a);try{for(c.s();!(s=c.n()).done;){if(Sc(s.value,o)){u=!0;break}}}catch(yhe){c.e(yhe)}finally{c.f()}u||a.push(o)}if(a.length>1)throw new hT("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}}},{key:"mergeFunction",value:function(e){var t=this;return rm((function(){return pE(e,t.axis)}))}},{key:"computeOutputShape",value:function(e){if(!Array.isArray(e)||!Array.isArray(e[0]))throw new hT("A `Concatenate` layer should be called on a list of inputs.");var t,n=e,r=n[0].slice(),a=this.axis<0?r.length+this.axis:this.axis,i=(0,Ht.Z)(n.slice(1));try{for(i.s();!(t=i.n()).done;){var o=t.value;if(null==r[a]||null==o[a]){r[a]=null;break}r[a]+=o[a]}}catch(yhe){i.e(yhe)}finally{i.f()}return r}},{key:"computeMask",value:function(e,t){var n=this;if(null==t)return null;if(!Array.isArray(t))throw new hT("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new hT("`inputs` should be an array for Concatenate");if(t.length!==e.length)throw new hT("Mismatch in the length of mask (".concat(t.length,") ")+"and the legnth of inputs (".concat(e.length,")"));return rm((function(){var r=!0;if(t.forEach((function(e){null==e||(r=!1)})),r)return null;for(var a=[],i=0;i<e.length;++i)null==t[i]?a.push(Qv(Wb(e[i]),"bool")):t[i].rank<e[i].rank?a.push(Yy(t[i],-1)):a.push(t[i]);var o=$g(a,n.axis);return wg(o,-1,!1)}))}},{key:"getConfig",value:function(){var e={axis:this.axis},t=BN((0,zN.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(y_);function T_(e,t){for(;e<0;)e+=t;return e}S_.className="Concatenate",ym(S_);var E_=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r;return(0,Se.Z)(this,n),(r=t.call(this,e)).axes=e.axes,r.normalize=null!=e.normalize&&e.normalize,r.supportsMasking=!0,r.reshapeRequired=!1,r}return(0,Te.Z)(n,[{key:"build",value:function(e){kc(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),(function(){return"A `Dot` layer should be called on a list of exactly 2 inputs."}));var t=e[0],n=e[1];if(t.length>3||n.length>3)throw new pT("Dot layer does not support tensors of 4D or higher rank yet.");var r=this.interpretAxes(t,n);if(t[r[0]]!==n[r[1]])throw new hT("Dimension incompatibility: "+"".concat(t[r[0]]," !== ").concat(n[r[1]]))}},{key:"mergeFunction",value:function(e){if(2!==e.length)throw new hT("A `Dot` layer must be called on exactly 2 inputs, "+"but received ".concat(e.length," input(s)."));var t,n=e[0],r=e[1];return t=Array.isArray(this.axes)?this.axes.map((function(t,n){return T_(t,e[n].shape.length)})):[T_(this.axes,n.shape.length),T_(this.axes,r.shape.length)],this.normalize&&(n=UN(n,t[0]),r=UN(r,t[1])),function(e,t,n){if(e.shape.length>3||t.shape.length>3)throw new pT("batchDot is not implemented for tensors of 4D or higher rank yet");if(kc(e.shape.length>=2,(function(){return"batchDot requires the rank of x to be >= 2, "+"but got ".concat(e.shape.length)})),kc(e.shape.length>=2,(function(){return"batchDot requires the rank of y to be >= 2, "+"but got ".concat(t.shape.length)})),"number"===typeof n&&(n=[n,n]),"complex64"===e.dtype||"complex64"===t.dtype)throw new pT("batchDot is not implemented for complex64-type Tensors yet.");var r=e.shape.length,a=t.shape.length;null==n&&(n=[r-1,a-2]);var i=n;return rm((function(){var n,o;if(r>a){n=r-a;for(var s=[],u=0;u<n;++u)s.push(1);t=Gg(t,t.shape.concat(s))}else if(a>r){n=a-r;for(var c=[],l=0;l<n;++l)c.push(1);e=Gg(e,e.shape.concat(c))}else n=0;if(2===e.shape.length&&2===t.shape.length)o=i[0]===i[1]?Hy(lm(e,t),i[0]):Hy(lm(hw(e,[1,0]),t),i[1]);else{var d=i[0]!==e.shape.length-1,f=i[1]===t.shape.length-1;o=Kg(e,t,d,f)}if(n>0){for(var h,p=[],v=h=r>a?r+a-3:r-1;v<h+n;++v)p.push(v);o=Uk(o,p)}return 1===o.shape.length&&(o=Yy(o,1)),o}))}(n,r,t)}},{key:"interpretAxes",value:function(e,t){return Array.isArray(this.axes)?this.axes:[T_(this.axes,e.length),T_(this.axes,t.length)]}},{key:"computeOutputShape",value:function(e){kc(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),(function(){return"A `Dot` layer should be called on a list of exactly 2 inputs."}));var t=e[0].slice(),n=e[1].slice();if(t.length>3||n.length>3)throw new pT("Dot layer does not support tensors of 4D or higher rank yet.");var r=this.interpretAxes(t,n);t.splice(r[0],1),n.splice(r[1],1),n.splice(0,1);var a=t.concat(n);return 1===a.length&&a.push(1),a}},{key:"computeMask",value:function(e,t){return null}},{key:"getConfig",value:function(){var e={axes:this.axes,normalize:this.normalize},t=BN((0,zN.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(y_);E_.className="Dot",ym(E_);var N_=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r;return(0,Se.Z)(this,n),(r=t.call(this,e)).supportsMasking=!0,r.stddev=e.stddev,r}return(0,Te.Z)(n,[{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e=BN((0,zN.Z)(n.prototype),"getConfig",this).call(this),t={stddev:this.stddev};return Object.assign(t,e),t}},{key:"call",value:function(e,t){var n=this;return rm((function(){n.invokeCallHook(e,t);var r=KE(e);return SE((function(){return sm(gE(r.shape,0,n.stddev),r)}),(function(){return r}),t.training||!1)}))}}]),n}(sN);N_.className="GaussianNoise",ym(N_);var C_=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r;return(0,Se.Z)(this,n),(r=t.call(this,e)).supportsMasking=!0,r.rate=e.rate,r}return(0,Te.Z)(n,[{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e=BN((0,zN.Z)(n.prototype),"getConfig",this).call(this),t={rate:this.rate};return Object.assign(t,e),t}},{key:"call",value:function(e,t){var n=this;return rm((function(){n.invokeCallHook(e,t);var r=KE(e);if(n.rate>0&&n.rate<1){return SE((function(){var e=Math.sqrt(n.rate/(1-n.rate));return lm(r,gE(r.shape,1,e))}),(function(){return r}),t.training||!1)}return r}))}}]),n}(sN);C_.className="GaussianDropout",ym(C_);var Z_=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r;return(0,Se.Z)(this,n),(r=t.call(this,e)).supportsMasking=!0,r.rate=e.rate,r.noiseShape=e.noiseShape,r}return(0,Te.Z)(n,[{key:"_getNoiseShape",value:function(e){return this.noiseShape||KE(e).shape}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e=BN((0,zN.Z)(n.prototype),"getConfig",this).call(this),t={rate:this.rate};return Object.assign(t,e),t}},{key:"call",value:function(e,t){var n=this;return rm((function(){if(n.rate<1&&n.rate>0){var r=n._getNoiseShape(e);return SE((function(){var t=KE(e),a=-1.7580993408473766,i=ab(dk(r),n.rate);i=cE(i,"float32");var o=Math.pow((1-n.rate)*(1+n.rate*Math.pow(a,2)),-.5),s=-o*a*n.rate,u=sm(lm(t,i),lm(sm(i,-1),a));return sm(lm(u,o),s)}),(function(){return KE(e)}),t.training||!1)}return e}))}}]),n}(sN);function __(e,t,n,r,a){var i,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.001;if(2===e.rank)i=ny(e,t,n,r,a,o);else if(3===e.rank)i=ry(e,t,n,r,a,o);else{if(4!==e.rank)throw new pT("batchNormalization is not implemented for array of rank ".concat(e.rank," ")+"yet");i=ay(e,t,n,r,a,o)}return i}function A_(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return Sc(r.slice().sort(),sE(0,e.rank-1))?function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return rm((function(){var i=Pb(e,r),o=i.mean,s=i.variance;return[__(e,o,s,n,t,a),o,s]}))}(e,t,n,r,a):function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return rm((function(){var i,o=Pb(e,r),s=o.mean,u=o.variance,c=[],l=(0,Ht.Z)(sE(0,e.rank));try{for(l.s();!(i=l.n()).done;){var d=i.value;-1!==r.indexOf(d)?c.push(1):c.push(e.shape[d])}}catch(yhe){l.e(yhe)}finally{l.f()}var f=Gg(s,c),h=Gg(u,c),p=null==t?null:Gg(t,c),v=null==n?null:Gg(n,c);return[__(e,f,h,v,p,a),s,u]}))}(e,t,n,r,a)}Z_.className="AlphaDropout",ym(Z_);var R_=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r;return(0,Se.Z)(this,n),null==e&&(e={}),(r=t.call(this,e)).supportsMasking=!0,r.axis=null==e.axis?-1:e.axis,r.momentum=null==e.momentum?.99:e.momentum,r.epsilon=null==e.epsilon?.001:e.epsilon,r.center=null==e.center||e.center,r.scale=null==e.scale||e.scale,r.betaInitializer=HE(e.betaInitializer||"zeros"),r.gammaInitializer=HE(e.gammaInitializer||"ones"),r.movingMeanInitializer=HE(e.movingMeanInitializer||"zeros"),r.movingVarianceInitializer=HE(e.movingVarianceInitializer||"ones"),r.betaConstraint=NN(e.betaConstraint),r.gammaConstraint=NN(e.gammaConstraint),r.betaRegularizer=bZ(e.betaRegularizer),r.gammaRegularizer=bZ(e.gammaRegularizer),r}return(0,Te.Z)(n,[{key:"build",value:function(e){e=XE(e);var t=this.axis>=0?this.axis:this.axis+e.length,n=e[t];if(null==n)throw new hT("Axis ".concat(t," of input tensor should have a defined dimension but ")+"the layer received an input with shape "+"".concat(JSON.stringify(e),"."));this.inputSpec=[new nN({ndim:e.length,axes:(0,ye.Z)({},t,n)})];var r=[n];this.scale&&(this.gamma=this.addWeight("gamma",r,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",r,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",r,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",r,null,this.movingVarianceInitializer,null,!1),this.built=!0}},{key:"call",value:function(e,t){var n=this;return rm((function(){var r=null!=t.training&&t.training,a=KE(e),i=a.shape,o=i.length,s=sE(0,o),u=n.axis>=0?n.axis:n.axis+o;s.splice(u,1);var c=gT(1,o);c[u]=i[u];var l=s.slice();l.sort();var d=!Sc(l,sE(0,o).slice(0,o-1));if(!r)return function(){if(d){var e=Gg(n.movingMean.read(),c),t=Gg(n.movingVariance.read(),c),r=n.center?Gg(n.beta.read(),c):null,i=n.scale?Gg(n.gamma.read(),c):null;return __(a,e,t,r,i,n.epsilon)}return __(a,n.movingMean.read(),n.movingVariance.read(),null==n.beta?null:n.beta.read(),null==n.gamma?null:n.gamma.read(),n.epsilon)}();var f=A_(a,n.gamma.read(),n.beta.read(),s,n.epsilon),h=(0,ge.Z)(f,3),p=h[0],v=h[1],m=h[2],g=function(e,t,n){rm((function(){var r=1-n,a=e.read(),i=lm(Sm(a,t),r);e.write(Sm(a,i))}))};return g(n.movingMean,v,n.momentum),g(n.movingVariance,m,n.momentum),p}))}},{key:"getConfig",value:function(){var e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:GE(this.betaInitializer),gammaInitializer:GE(this.gammaInitializer),movingMeanInitializer:GE(this.movingMeanInitializer),movingVarianceInitializer:GE(this.movingVarianceInitializer),betaRegularizer:gZ(this.betaRegularizer),gammaRegularizer:gZ(this.gammaRegularizer),betaConstraint:TN(this.betaConstraint),gammaConstraint:TN(this.gammaConstraint)},t=BN((0,zN.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(sN);R_.className="BatchNormalization",ym(R_);var D_=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r;if((0,Se.Z)(this,n),null==e&&(e={}),(r=t.call(this,e)).axis=null==e.axis?-1:e.axis,"number"===typeof r.axis){if(!Number.isInteger(r.axis))throw new Error("Expected axis to be an integer, but received ".concat(r.axis))}else{if(!Array.isArray(r.axis))throw new Error("Expected axis to be an integer or an array of integers, "+"but received ".concat(JSON.stringify(r.axis)));var a,i=(0,Ht.Z)(r.axis);try{for(i.s();!(a=i.n()).done;){var o=a.value;if(!Number.isInteger(o))throw new Error("Expected axis to be an array of integers, "+"but received ".concat(JSON.stringify(r.axis)))}}catch(yhe){i.e(yhe)}finally{i.f()}}return r.epsilon=null==e.epsilon?.001:e.epsilon,r.center=null==e.center||e.center,r.scale=null==e.scale||e.scale,r.betaInitializer=HE(e.betaInitializer||"zeros"),r.gammaInitializer=HE(e.gammaInitializer||"ones"),r.betaRegularizer=bZ(e.betaRegularizer),r.gammaRegularizer=bZ(e.gammaRegularizer),r.supportsMasking=!0,r}return(0,Te.Z)(n,[{key:"build",value:function(e){var t=(e=XE(e)).length;"number"===typeof this.axis&&(this.axis=[this.axis]);for(var n=0;n<this.axis.length;++n)this.axis[n]<0&&(this.axis[n]+=t);var r,a=(0,Ht.Z)(this.axis);try{for(a.s();!(r=a.n()).done;){var i=r.value;if(i<0||i>=t)throw new Error("Invalid axis: ".concat(i))}}catch(yhe){a.e(yhe)}finally{a.f()}if(this.axis.length!==ZT(this.axis).length)throw new Error("Found duplicate axes in: ".concat(this.axis));var o=this.axis.map((function(t){return e[t]}));this.scale?this.gamma=this.addWeight("gamma",o,"float32",this.gammaInitializer,this.gammaRegularizer,true):this.gamma=null,this.center?this.beta=this.addWeight("beta",o,"float32",this.betaInitializer,this.betaRegularizer,true):this.beta=null,this.built=!0}},{key:"call",value:function(e,t){var n=this,r=KE(e),a=r.shape,i=a.length;return rm((function(){var e,t=Pb(r,n.axis,!0),o=t.mean,s=t.variance,u=gT(1,i),c=(0,Ht.Z)(n.axis);try{for(c.s();!(e=c.n()).done;){var l=e.value;u[l]=a[l]}}catch(yhe){c.e(yhe)}finally{c.f()}for(var d=function(e){return null!=e&&e.shape.length!==i?Gg(e,u):e},f=n.scale?d(n.gamma.read()):null,h=n.center?d(n.beta.read()):null,p=[],v=[],m=0;m<i;++m)-1!==n.axis.indexOf(m)?(p.push(a[m]),v.push(1)):(p.push(1),v.push(a[m]));return o=Jy(o,p),s=Jy(s,p),null!=f&&(f=Jy(f,v)),null!=h&&(h=Jy(h,v)),__(r,o,s,h,f,n.epsilon)}))}},{key:"getConfig",value:function(){var e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:GE(this.betaInitializer),gammaInitializer:GE(this.gammaInitializer),betaRegularizer:gZ(this.betaRegularizer),gammaRegularizer:gZ(this.gammaRegularizer)},t=BN((0,zN.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(sN);D_.className="LayerNormalization",ym(D_);var O_=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r;if((0,Se.Z)(this,n),null==e&&(e={}),(r=t.call(this,e)).dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,null==e.padding)r.padding=[[1,1],[1,1]];else if("number"===typeof e.padding)r.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,2!==e.padding.length)throw new hT("ZeroPadding2D expects padding to be a length-2 array, but "+"received a length-".concat(e.padding.length," array."));var a,i;if("number"===typeof e.padding[0])a=[e.padding[0],e.padding[0]],i=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,2!==e.padding[0].length)throw new hT("ZeroPadding2D expects height padding to be a length-2 array, "+"but received a length-".concat(e.padding[0].length," array."));if(a=e.padding[0],2!==e.padding[1].length)throw new hT("ZeroPadding2D expects width padding to be a length-2 array, "+"but received a length-".concat(e.padding[1].length," array."));i=e.padding[1]}r.padding=[a,i]}return r.inputSpec=[new nN({ndim:4})],r}return(0,Te.Z)(n,[{key:"computeOutputShape",value:function(e){var t,n;return e=XE(e),"channelsFirst"===this.dataFormat?(t=null!=e[2]&&e[2]>=0?e[2]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[3]&&e[3]>=0?e[3]+this.padding[1][0]+this.padding[1][1]:null,[e[0],e[1],t,n]):(t=null!=e[1]&&e[1]>=0?e[1]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[2]&&e[2]>=0?e[2]+this.padding[1][0]+this.padding[1][1]:null,[e[0],t,n,e[3]])}},{key:"call",value:function(e,t){var n=this;return rm((function(){return function(e,t,n){return rm((function(){if(4!==e.rank)throw new hT("temporalPadding expects input tensor to be 4-D, but received a "+"".concat(e.rank,"-D tensor."));if(null==t&&(t=[[1,1],[1,1]]),2!==t.length||2!==t[0].length||2!==t[1].length)throw new hT("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(null==n&&(n="channelsLast"),"channelsLast"!==n&&"channelsFirst"!==n)throw new hT("Unknown data format: ".concat(n,". ")+"Supported data formats are 'channelsLast' and 'channelsFirst.");var r;return r="channelsFirst"===n?[[0,0],[0,0],t[0],t[1]]:[[0,0],t[0],t[1],[0,0]],Gb(e,r)}))}(KE(e),n.padding,n.dataFormat)}))}},{key:"getConfig",value:function(){var e={padding:this.padding,dataFormat:this.dataFormat},t=BN((0,zN.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(sN);function L_(e,t,n,r,a,i){return rm((function(){var o;HT(a),$T(i),qT(r),null==n&&(n=[1,1]),null==r&&(r="valid"),null==a&&(a="channelsLast"),null==i&&(i="max"),e=ZZ(e,a);var s="same"===r?"same":"valid";return o="max"===i?Cb(e,t,n,s):Hg(e,t,n,s),"channelsFirst"===a&&(o=hw(o,[0,3,1,2])),o}))}function F_(e,t,n,r,a,i){return rm((function(){var o;HT(a),$T(i),qT(r),null==n&&(n=[1,1,1]),null==r&&(r="valid"),null==a&&(a="channelsLast"),null==i&&(i="max"),e=_Z(e,a);var s="same"===r?"same":"valid";return o="max"===i?Zb(e,t,n,s):qg(e,t,n,s),"channelsFirst"===a&&(o=hw(o,[0,4,1,2,3])),o}))}O_.className="ZeroPadding2D",ym(O_);var M_=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r;if((0,Se.Z)(this,n),null==e.poolSize&&(e.poolSize=2),r=t.call(this,e),"number"===typeof e.poolSize)r.poolSize=[e.poolSize];else{if(!Array.isArray(e.poolSize)||1!==e.poolSize.length||"number"!==typeof e.poolSize[0])throw new hT("poolSize for 1D convolutional layer must be a number or an Array of a single number, but received "+"".concat(JSON.stringify(e.poolSize)));r.poolSize=e.poolSize}if(DT(r.poolSize,"poolSize"),null==e.strides)r.strides=r.poolSize;else if("number"===typeof e.strides)r.strides=[e.strides];else{if(!Array.isArray(e.strides)||1!==e.strides.length||"number"!==typeof e.strides[0])throw new hT("strides for 1D convolutional layer must be a number or an Array of a single number, but received "+"".concat(JSON.stringify(e.strides)));r.strides=e.strides}return DT(r.strides,"strides"),r.padding=null==e.padding?"valid":e.padding,qT(r.padding),r.inputSpec=[new nN({ndim:3})],r}return(0,Te.Z)(n,[{key:"computeOutputShape",value:function(e){var t=NZ((e=XE(e))[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],t,e[2]]}},{key:"call",value:function(e,t){var n=this;return rm((function(){n.invokeCallHook(e,t),e=lE(KE(e),2);var r=n.poolingFunction(KE(e),[n.poolSize[0],1],[n.strides[0],1],n.padding,"channelsLast");return Uk(r,[2])}))}},{key:"getConfig",value:function(){var e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},t=BN((0,zN.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(sN),P_=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){return(0,Se.Z)(this,n),t.call(this,e)}return(0,Te.Z)(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return HT(a),qT(r),L_(e,t,n,r,a,"max")}}]),n}(M_);P_.className="MaxPooling1D",ym(P_);var z_=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){return(0,Se.Z)(this,n),t.call(this,e)}return(0,Te.Z)(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return HT(a),qT(r),L_(e,t,n,r,a,"avg")}}]),n}(M_);z_.className="AveragePooling1D",ym(z_);var B_=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r;if((0,Se.Z)(this,n),null==e.poolSize&&(e.poolSize=[2,2]),(r=t.call(this,e)).poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],null==e.strides)r.strides=r.poolSize;else if(Array.isArray(e.strides)){if(2!==e.strides.length)throw new hT("If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length "+"".concat(e.strides.length,"."));r.strides=e.strides}else r.strides=[e.strides,e.strides];return DT(r.poolSize,"poolSize"),DT(r.strides,"strides"),r.padding=null==e.padding?"valid":e.padding,r.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,HT(r.dataFormat),qT(r.padding),r.inputSpec=[new nN({ndim:4})],r}return(0,Te.Z)(n,[{key:"computeOutputShape",value:function(e){e=XE(e);var t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2];return t=NZ(t,this.poolSize[0],this.padding,this.strides[0]),n=NZ(n,this.poolSize[1],this.padding,this.strides[1]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n]:[e[0],t,n,e[3]]}},{key:"call",value:function(e,t){var n=this;return rm((function(){return n.invokeCallHook(e,t),n.poolingFunction(KE(e),n.poolSize,n.strides,n.padding,n.dataFormat)}))}},{key:"getConfig",value:function(){var e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=BN((0,zN.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(sN),V_=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){return(0,Se.Z)(this,n),t.call(this,e)}return(0,Te.Z)(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return HT(a),qT(r),L_(e,t,n,r,a,"max")}}]),n}(B_);V_.className="MaxPooling2D",ym(V_);var U_=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){return(0,Se.Z)(this,n),t.call(this,e)}return(0,Te.Z)(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return HT(a),qT(r),L_(e,t,n,r,a,"avg")}}]),n}(B_);U_.className="AveragePooling2D",ym(U_);var W_=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r;if((0,Se.Z)(this,n),null==e.poolSize&&(e.poolSize=[2,2,2]),(r=t.call(this,e)).poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],null==e.strides)r.strides=r.poolSize;else if(Array.isArray(e.strides)){if(3!==e.strides.length)throw new hT("If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length "+"".concat(e.strides.length,"."));r.strides=e.strides}else r.strides=[e.strides,e.strides,e.strides];return DT(r.poolSize,"poolSize"),DT(r.strides,"strides"),r.padding=null==e.padding?"valid":e.padding,r.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,HT(r.dataFormat),qT(r.padding),r.inputSpec=[new nN({ndim:5})],r}return(0,Te.Z)(n,[{key:"computeOutputShape",value:function(e){e=XE(e);var t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[4]:e[3];return t=NZ(t,this.poolSize[0],this.padding,this.strides[0]),n=NZ(n,this.poolSize[1],this.padding,this.strides[1]),r=NZ(r,this.poolSize[2],this.padding,this.strides[2]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n,r]:[e[0],t,n,r,e[4]]}},{key:"call",value:function(e,t){var n=this;return rm((function(){return n.invokeCallHook(e,t),n.poolingFunction(KE(e),n.poolSize,n.strides,n.padding,n.dataFormat)}))}},{key:"getConfig",value:function(){var e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=BN((0,zN.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(sN),j_=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){return(0,Se.Z)(this,n),t.call(this,e)}return(0,Te.Z)(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return HT(a),qT(r),F_(e,t,n,r,a,"max")}}]),n}(W_);j_.className="MaxPooling3D",ym(j_);var G_=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){return(0,Se.Z)(this,n),t.call(this,e)}return(0,Te.Z)(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return HT(a),qT(r),F_(e,t,n,r,a,"avg")}}]),n}(W_);G_.className="AveragePooling3D",ym(G_);var H_=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r;return(0,Se.Z)(this,n),(r=t.call(this,e)).inputSpec=[new nN({ndim:3})],r}return(0,Te.Z)(n,[{key:"computeOutputShape",value:function(e){return[e[0],e[2]]}},{key:"call",value:function(e,t){throw new pT}}]),n}(sN),q_=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){return(0,Se.Z)(this,n),t.call(this,e||{})}return(0,Te.Z)(n,[{key:"call",value:function(e,t){return rm((function(){var t=KE(e);return Ab(t,1)}))}}]),n}(H_);q_.className="GlobalAveragePooling1D",ym(q_);var $_=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){return(0,Se.Z)(this,n),t.call(this,e||{})}return(0,Te.Z)(n,[{key:"call",value:function(e,t){return rm((function(){var t=KE(e);return jy(t,1)}))}}]),n}(H_);$_.className="GlobalMaxPooling1D",ym($_);var K_=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r;return(0,Se.Z)(this,n),(r=t.call(this,e)).dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,HT(r.dataFormat),r.inputSpec=[new nN({ndim:4})],r}return(0,Te.Z)(n,[{key:"computeOutputShape",value:function(e){return"channelsLast"===this.dataFormat?[e[0],e[3]]:[e[0],e[1]]}},{key:"call",value:function(e,t){throw new pT}},{key:"getConfig",value:function(){var e={dataFormat:this.dataFormat},t=BN((0,zN.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(sN),X_=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(){return(0,Se.Z)(this,n),t.apply(this,arguments)}return(0,Te.Z)(n,[{key:"call",value:function(e,t){var n=this;return rm((function(){var t=KE(e);return"channelsLast"===n.dataFormat?Ab(t,[1,2]):Ab(t,[2,3])}))}}]),n}(K_);X_.className="GlobalAveragePooling2D",ym(X_);var Y_=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(){return(0,Se.Z)(this,n),t.apply(this,arguments)}return(0,Te.Z)(n,[{key:"call",value:function(e,t){var n=this;return rm((function(){var t=KE(e);return"channelsLast"===n.dataFormat?jy(t,[1,2]):jy(t,[2,3])}))}}]),n}(K_);Y_.className="GlobalMaxPooling2D",ym(Y_);var Q_=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r;return(0,Se.Z)(this,n),(r=t.call(this,e)).layer=e.layer,r}return(0,Te.Z)(n,[{key:"build",value:function(e){this.built=!0}},{key:"trainable",get:function(){return null!=this.layer&&this.layer.trainable},set:function(e){null!=this.layer&&(this.layer.trainable=e)}},{key:"trainableWeights",get:function(){return this.layer.trainableWeights}},{key:"nonTrainableWeights",get:function(){return this.layer.nonTrainableWeights}},{key:"updates",get:function(){return this.layer._updates}},{key:"losses",get:function(){return this.layer.losses}},{key:"getWeights",value:function(){return this.layer.getWeights()}},{key:"setWeights",value:function(e){this.layer.setWeights(e)}},{key:"getConfig",value:function(){var e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},t=BN((0,zN.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}},{key:"setFastWeightInitDuringBuild",value:function(e){BN((0,zN.Z)(n.prototype),"setFastWeightInitDuringBuild",this).call(this,e),null!=this.layer&&this.layer.setFastWeightInitDuringBuild(e)}}],[{key:"fromConfig",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=VN(t.layer,n);delete t.layer;var a={layer:r};return Object.assign(a,t),new e(a)}}]),n}(sN),J_=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r;return(0,Se.Z)(this,n),(r=t.call(this,e)).supportsMasking=!0,r}return(0,Te.Z)(n,[{key:"build",value:function(e){if((e=XE(e)).length<3)throw new hT("TimeDistributed layer expects an input shape >= 3D, but received "+"input shape ".concat(JSON.stringify(e)));this.inputSpec=[{shape:e}];var t=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(t),this.layer.built=!0),BN((0,zN.Z)(n.prototype),"build",this).call(this,e)}},{key:"computeOutputShape",value:function(e){var t=[(e=XE(e))[0]].concat(e.slice(2)),n=this.layer.computeOutputShape(t),r=e[1];return[n[0],r].concat(n.slice(1))}},{key:"call",value:function(e,t){var n=this;return rm((function(){return qZ((function(e,r){return[KE(n.layer.call(e,t)),[]]}),e=KE(e),[],!1,null,null,!1,!0)[1]}))}}]),n}(Q_);J_.className="TimeDistributed",ym(J_);var eA=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r;(0,Se.Z)(this,n),r=t.call(this,e);var a=e.layer.getConfig(),i={};i.className=e.layer.getClassName(),i.config=a,r.forwardLayer=VN(i),a.goBackwards=!0!==a.goBackwards;var o,s={};if(s.className=e.layer.getClassName(),s.config=a,r.backwardLayer=VN(s),r.forwardLayer.name="forward_"+r.forwardLayer.name,r.backwardLayer.name="backward_"+r.backwardLayer.name,r.mergeMode=void 0===e.mergeMode?"concat":e.mergeMode,o=r.mergeMode,AT(jT,"BidirectionalMergeMode",o),e.weights)throw new pT("weights support is not implemented for Bidirectional layer yet.");return r._stateful=e.layer.stateful,r.returnSequences=e.layer.returnSequences,r.returnState=e.layer.returnState,r.supportsMasking=!0,r._trainable=!0,r.inputSpec=e.layer.inputSpec,r.numConstants=null,r}return(0,Te.Z)(n,[{key:"trainable",get:function(){return this._trainable},set:function(e){this._trainable=e,null!=this.forwardLayer&&(this.forwardLayer.trainable=e),null!=this.backwardLayer&&(this.backwardLayer.trainable=e)}},{key:"getWeights",value:function(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}},{key:"setWeights",value:function(e){var t=e.length,n=Math.floor(t/2);this.forwardLayer.setWeights(e.slice(0,n)),this.backwardLayer.setWeights(e.slice(n))}},{key:"computeOutputShape",value:function(e){var t,n,r,a=this.forwardLayer.computeOutputShape(e);return Array.isArray(a)&&Array.isArray(a[0])||(a=[a]),this.returnState?(r=a.slice(1),t=a[0]):t=a[0],"concat"===this.mergeMode?(t[t.length-1]*=2,n=[t]):n=null==this.mergeMode?[t,t.slice()]:[t],this.returnState?null==this.mergeMode?n.concat(r).concat(r.slice()):[t].concat(r).concat(r.slice()):kT(n)}},{key:"apply",value:function(e,t){var r=null==t?null:t.initialState,a=null==t?null:t.constants;null==t&&(t={});var i=HZ(e,r,a,this.numConstants);if(e=i.inputs,r=i.initialState,a=i.constants,Array.isArray(e)&&(r=e.slice(1),e=e[0]),(null==r||0===r.length)&&null==a)return BN((0,zN.Z)(n.prototype),"apply",this).call(this,e,t);var o=[],s=[];if(null!=r){var u=r.length;if(u%2>0)throw new hT("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");t.initialState=r,o.push.apply(o,(0,me.Z)(r));var c=r.map((function(e){return new nN({shape:e.shape})}));this.forwardLayer.stateSpec=c.slice(0,u/2),this.backwardLayer.stateSpec=c.slice(u/2),s.push.apply(s,(0,me.Z)(c))}if(null!=a)throw new pT("Support for constants in Bidirectional layers is not implemented yet.");for(var l=o[0]instanceof rN,d=0,f=o;d<f.length;d++){if(f[d]instanceof rN!==l)throw new hT("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors")}if(l){var h=[e].concat(o),p=this.inputSpec.concat(s),v=this.inputSpec;this.inputSpec=p;var m=BN((0,zN.Z)(n.prototype),"apply",this).call(this,h,t);return this.inputSpec=v,m}return BN((0,zN.Z)(n.prototype),"apply",this).call(this,e,t)}},{key:"call",value:function(e,t){var n=this;return rm((function(){var r,a,i,o,s=t.initialState;if(null==s)r=n.forwardLayer.call(e,t),a=n.backwardLayer.call(e,t);else{var u=s.slice(0,s.length/2),c=s.slice(s.length/2);r=n.forwardLayer.call(e,Object.assign(t,{initialState:u})),a=n.backwardLayer.call(e,Object.assign(t,{initialState:c}))}return n.returnState&&(Array.isArray(r)&&(i=r.slice(1).concat(a.slice(1))),r=r[0],a=a[0]),n.returnSequences&&(a=gk(a,1)),"concat"===n.mergeMode?o=pE([r,a]):"sum"===n.mergeMode?o=sm(r,a):"ave"===n.mergeMode?o=lm(.5,sm(r,a)):"mul"===n.mergeMode?o=lm(r,a):null==n.mergeMode&&(o=[r,a]),n.returnState?null==n.mergeMode?o.concat(i):[o].concat(i):o}))}},{key:"resetStates",value:function(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}},{key:"build",value:function(e){var t=this;YT(this.forwardLayer.name,(function(){t.forwardLayer.build(e)})),YT(this.backwardLayer.name,(function(){t.backwardLayer.build(e)})),this.built=!0}},{key:"computeMask",value:function(e,t){var n;if(Array.isArray(t)&&(t=t[0]),n=this.returnSequences?null==this.mergeMode?[t,t]:t:null==this.mergeMode?[null,null]:null,this.returnState){var r=this.forwardLayer.states.map((function(e){return null}));return Array.isArray(n)?n.concat(r).concat(r):[n].concat(r).concat(r)}return n}},{key:"trainableWeights",get:function(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}},{key:"nonTrainableWeights",get:function(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}},{key:"setFastWeightInitDuringBuild",value:function(e){BN((0,zN.Z)(n.prototype),"setFastWeightInitDuringBuild",this).call(this,e),null!=this.forwardLayer&&this.forwardLayer.setFastWeightInitDuringBuild(e),null!=this.backwardLayer&&this.backwardLayer.setFastWeightInitDuringBuild(e)}},{key:"getConfig",value:function(){var e={mergeMode:this.mergeMode},t=BN((0,zN.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}],[{key:"fromConfig",value:function(e,t){var n=VN(t.layer);if(delete t.layer,null!=t.numConstants)throw new pT("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");var r=t;return r.layer=n,new e(r)}}]),n}(Q_);eA.className="Bidirectional",ym(eA);var tA=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r;return(0,Se.Z)(this,n),(r=t.call(this,e)).scale=e.scale,e.offset?r.offset=e.offset:r.offset=0,r}return(0,Te.Z)(n,[{key:"getConfig",value:function(){var e={scale:this.scale,offset:this.offset},t=BN((0,zN.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}},{key:"call",value:function(e,t){var n=this;return rm((function(){return"float32"!==(e=KE(e)).dtype&&(e=cE(e,"float32")),sm(lm(e,n.scale),n.offset)}))}}]),n}(sN);tA.className="Rescaling",ym(tA);var nA=Lx.resizeBilinear,rA=Lx.cropAndResize,aA=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r;return(0,Se.Z)(this,n),(r=t.call(this,e)).height=e.height,r.width=e.width,r}return(0,Te.Z)(n,[{key:"centerCrop",value:function(e,t,n,r,a,i,o,s){return rm((function(){var u,c=!1,l=[t/i,n/o,(r+t)/i,(a+n)/o],d=[];3===e.rank?(c=!0,u=Wk([e])):u=e;for(var f=0;f<u.shape[0];f++)d.push(l);var h=Bp(d,[d.length,4]),p=fk(0,d.length,1,"int32"),v=rA(u,h,p,[r,a],"nearest");return cE(c?KE(iw(v)):v,s)}))}},{key:"upsize",value:function(e,t,n,r){return rm((function(){return cE(nA(e,[t,n]),r)}))}},{key:"call",value:function(e,t){var n=this;return rm((function(){var t=KE(e),r=t.dtype,a=t.shape,i=a[a.length-3],o=a[a.length-2],s=0;i!==n.height&&(s=Math.floor((i-n.height)/2));var u=0;return o!==n.width&&0===(u=Math.floor((o-n.width)/2))&&(u=1),s>=0&&u>=0?n.centerCrop(t,s,u,n.height,n.width,i,o,r):n.upsize(e,n.height,n.width,r)}))}},{key:"getConfig",value:function(){var e={height:this.height,width:this.width},t=BN((0,zN.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}},{key:"computeOutputShape",value:function(e){var t=(e=XE(e)).length-3,n=e.length-2;return e[t]=this.height,e[n]=this.width,e}}]),n}(sN);aA.className="CenterCrop",ym(aA);var iA=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r;return(0,Se.Z)(this,n),(r=t.call(this,e)).numTokens=e.numTokens,e.outputMode?r.outputMode=e.outputMode:r.outputMode="multiHot",r}return(0,Te.Z)(n,[{key:"getConfig",value:function(){var e={numTokens:this.numTokens,outputMode:this.outputMode},t=BN((0,zN.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}},{key:"computeOutputShape",value:function(e){return null==(e=XE(e))?[this.numTokens]:"oneHot"===this.outputMode&&1!==e[e.length-1]?(e.push(this.numTokens),e):(e[e.length-1]=this.numTokens,e)}},{key:"call",value:function(e,t){var n=this;return rm((function(){var r;if("int32"!==(e=KE(e)).dtype&&(e=cE(e,"int32")),"undefined"!==typeof t.countWeights){if("count"!==n.outputMode)throw new hT("countWeights is not used when outputMode !== count.\n              Received countWeights=".concat(t.countWeights));r=KE(t.countWeights)}var a=jy(e),i=Gy(e),o=rb(n.numTokens,a).bufferSync().get(0),s=ab(i,0).bufferSync().get(0);if(!o||!s)throw new hT("Input values must be between 0 < values <="+" numTokens with numTokens=".concat(n.numTokens));return function(e,t,n,r){var a=KE(e);if("int32"!==a.dtype&&(a=cE(a,"int32")),"int"===t)return a;var i=a.shape;if(0===a.rank&&(a=Yy(a,-1)),"oneHot"===t&&1!==a.shape[a.shape.length-1]&&(a=Yy(a,-1)),a.rank>2)throw new hT("When outputMode is not int, maximum output rank is 2"+" Received outputMode ".concat(t," and input shape ").concat(i)+" which would result in output rank ".concat(a.rank,"."));var o,s=["multiHot","oneHot"].includes(t),u=a;if(o=Ty(u,"undefined"!==typeof r&&"count"===t?r:[],n,s),"tfIdf"!==t)return o;if(r)return lm(o,r);throw new hT("When outputMode is 'tfIdf', weights must be provided.")}(e,n.outputMode,n.numTokens,r)}))}}]),n}(sN);iA.className="CategoryEncoding",ym(iA);var oA=new Set(["bilinear","nearest"]),sA=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r;if((0,Se.Z)(this,n),(r=t.call(this,e)).height=e.height,r.width=e.width,e.interpolation){if(!oA.has(e.interpolation))throw new hT("Invalid interpolation parameter: ".concat(e.interpolation," is not implemented"));r.interpolation=e.interpolation}else r.interpolation="bilinear";return r.cropToAspectRatio=Boolean(e.cropToAspectRatio),r}return(0,Te.Z)(n,[{key:"computeOutputShape",value:function(e){var t=(e=XE(e))[2];return[this.height,this.width,t]}},{key:"getConfig",value:function(){var e={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},t=BN((0,zN.Z)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}},{key:"call",value:function(e,t){var n=this;return rm((function(){var t=[n.height,n.width];if("bilinear"===n.interpolation)return Lx.resizeBilinear(e,t,!n.cropToAspectRatio);if("nearest"===n.interpolation)return Lx.resizeNearestNeighbor(e,t,!n.cropToAspectRatio);throw new Error("Interpolation is ".concat(n.interpolation," but only ").concat((0,me.Z)(oA)," are supported"))}))}}]),n}(sN);sA.className="Resizing",ym(sA);var uA,cA;el().registerFlag("KEEP_INTERMEDIATE_TENSORS",(function(){return!1}),(function(e){e&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")})),function(e){e[e.DT_INVALID=0]="DT_INVALID",e[e.DT_FLOAT=1]="DT_FLOAT",e[e.DT_DOUBLE=2]="DT_DOUBLE",e[e.DT_INT32=3]="DT_INT32",e[e.DT_UINT8=4]="DT_UINT8",e[e.DT_INT16=5]="DT_INT16",e[e.DT_INT8=6]="DT_INT8",e[e.DT_STRING=7]="DT_STRING",e[e.DT_COMPLEX64=8]="DT_COMPLEX64",e[e.DT_INT64=9]="DT_INT64",e[e.DT_BOOL=10]="DT_BOOL",e[e.DT_QINT8=11]="DT_QINT8",e[e.DT_QUINT8=12]="DT_QUINT8",e[e.DT_QINT32=13]="DT_QINT32",e[e.DT_BFLOAT16=14]="DT_BFLOAT16",e[e.DT_QINT16=15]="DT_QINT16",e[e.DT_QUINT16=16]="DT_QUINT16",e[e.DT_UINT16=17]="DT_UINT16",e[e.DT_COMPLEX128=18]="DT_COMPLEX128",e[e.DT_HALF=19]="DT_HALF",e[e.DT_RESOURCE=20]="DT_RESOURCE",e[e.DT_VARIANT=21]="DT_VARIANT",e[e.DT_UINT32=22]="DT_UINT32",e[e.DT_UINT64=23]="DT_UINT64",e[e.DT_FLOAT_REF=101]="DT_FLOAT_REF",e[e.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",e[e.DT_INT32_REF=103]="DT_INT32_REF",e[e.DT_UINT8_REF=104]="DT_UINT8_REF",e[e.DT_INT16_REF=105]="DT_INT16_REF",e[e.DT_INT8_REF=106]="DT_INT8_REF",e[e.DT_STRING_REF=107]="DT_STRING_REF",e[e.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",e[e.DT_INT64_REF=109]="DT_INT64_REF",e[e.DT_BOOL_REF=110]="DT_BOOL_REF",e[e.DT_QINT8_REF=111]="DT_QINT8_REF",e[e.DT_QUINT8_REF=112]="DT_QUINT8_REF",e[e.DT_QINT32_REF=113]="DT_QINT32_REF",e[e.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",e[e.DT_QINT16_REF=115]="DT_QINT16_REF",e[e.DT_QUINT16_REF=116]="DT_QUINT16_REF",e[e.DT_UINT16_REF=117]="DT_UINT16_REF",e[e.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",e[e.DT_HALF_REF=119]="DT_HALF_REF",e[e.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",e[e.DT_VARIANT_REF=121]="DT_VARIANT_REF",e[e.DT_UINT32_REF=122]="DT_UINT32_REF",e[e.DT_UINT64_REF=123]="DT_UINT64_REF"}(uA||(uA={})),function(e){!function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"}(e.CheckpointFormatVersion||(e.CheckpointFormatVersion={}))}(cA||(cA={}));var lA={};function dA(e){return lA[e]}function fA(e,t,n,r,a){var i=t.inputParams[e];if(i&&void 0!==i.inputIndexStart){var o=i.inputIndexStart,s=0===i.inputIndexEnd?void 0:void 0===i.inputIndexEnd?o+1:i.inputIndexEnd,u=o<0?t.inputNames.length+o:o;if("tensor"===i.type)return hA(t.inputNames[u],n,r,a);if("tensors"===i.type){var c=t.inputs.slice(o,s),l=t.inputNames.slice(o,s).filter((function(e,t){var n;return"NoOp"!==(null===(n=c[t])||void 0===n?void 0:n.op)}));return l.map((function(e){return hA(e,n,r,a)}))}var d=hA(t.inputNames[u],n,r,a),f=d.dataSync();return"number"===i.type?f[0]:Wc(d.shape,f)}var h=t.attrParams[e];return h&&h.value}function hA(e,t,n,r){var a=gA(e,n),i=(0,ge.Z)(a,2),o=i[0],s=i[1];if(null!=r){var u=r.getHashTableHandleByName(o);if(null!=u)return u}var c=n.currentContextIds.find((function(e){return!!t[mA(o,e)]}));return void 0!==c?t[mA(o,c)][s]:void 0}function pA(e,t,n){return t[mA(e,n.currentContextId)]}function vA(e,t){var n=gA(e,t),r=(0,ge.Z)(n,3),a=r[0],i=r[1],o=r[2];return[mA(a,t&&t.currentContextId),i,o]}function mA(e,t){return t?"".concat(e,"-").concat(t):e}function gA(e,t){if(""===e)return["",0,void 0];var n=null!=t&&null!=t.parseNodeNameCache;if(n){var r=t.parseNodeNameCache.get(e);if(null!=r)return r}var a,i=e.split(":");if(1===i.length)a=[e,0,void 0];else{var o=i[0],s=3===i.length?i[1]:void 0;a=[o,Number(i[i.length-1]),s]}return n&&t.parseNodeNameCache.set(e,a),a}function yA(e,t,n){var r=fA("pad",e,t,n);if("explicit"===r){r=fA("explicitPaddings",e,t,n);for(var a=[[0,0],[0,0],[0,0],[0,0]],i=0;i<4;i++)a[i][0]=r[2*i],a[i][1]=r[2*i+1];return a}return r}function bA(e){return e.kept?e:Jv(e)}var kA=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],wA=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Prod",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axes",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsFinite",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsInf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],xA=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}],IA=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],SA=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],TA=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],EA=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],NA=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],CA=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"InitializeTable",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]},{tfOpName:"InitializeTableV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],ZA=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}],_A=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],AA=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"MatrixBandPart",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"numLower",type:"tensor"},{start:1,name:"numUpper",type:"tensor"}]}],RA=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"SparseToDense",category:"normalization",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!0,notSupported:!0}]}],DA=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],OA=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]},{tfOpName:"TensorScatterUpdate",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],LA=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],FA=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],MA=[{tfOpName:"StaticRegexReplace",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"pattern",name:"pattern",type:"string"},{tfName:"rewrite",name:"rewrite",type:"string"},{tfName:"replace_global",name:"replaceGlobal",type:"bool"}]},{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],PA=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}],zA=function(){function e(){var t;(0,Se.Z)(this,e);var n=[r,a,i,o,s,u,c,l,d,f,h,p,v,m,g,y,b,k,w],x=(t=[]).concat.apply(t,(0,me.Z)(n.map((function(e){return e.json}))));this.opMappers=x.reduce((function(e,t){return e[t.tfOpName]=t,e}),{})}return(0,Te.Z)(e,[{key:"transformGraph",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.node,a=[],i=[],o=[],s=r.reduce((function(e,n){return e[n.name]=t.mapNode(n),n.op.startsWith("Placeholder")?a.push(e[n.name]):"Const"===n.op?i.push(e[n.name]):null!=n.input&&0!==n.input.length||o.push(e[n.name]),e}),{}),u=[],c=[],l={},d={};null!=n&&(l=this.mapSignatureEntries(n.inputs),d=this.mapSignatureEntries(n.outputs));var f=Object.keys(s);f.forEach((function(e){var t=s[e];t.inputNames.forEach((function(e,n){var r=vA(e),a=(0,ge.Z)(r,3),i=a[0],o=a[2],u=s[i];if(null!=u.outputs){var c=u.outputs.indexOf(o);if(-1!==c){var l="".concat(i,":").concat(c);t.inputNames[n]=l}}t.inputs.push(u),u.children.push(t)}))})),0===Object.keys(d).length?f.forEach((function(e){var t=s[e];0===t.children.length&&c.push(t)})):Object.keys(d).forEach((function(e){var t=vA(e),n=(0,ge.Z)(t,1)[0],r=s[n];null!=r&&(r.signatureKey=d[e],c.push(r))})),Object.keys(l).length>0?Object.keys(l).forEach((function(e){var t=vA(e),n=(0,ge.Z)(t,1)[0],r=s[n];r&&(r.signatureKey=l[e],u.push(r))})):u=a;var h={};null!=e.library&&null!=e.library.function&&(h=e.library.function.reduce((function(e,n){return e[n.signature.name]=t.mapFunction(n),e}),{}));var p={nodes:s,inputs:u,outputs:c,weights:i,placeholders:a,signature:n,functions:h};return o.length>0&&(p.initNodes=o),p}},{key:"mapSignatureEntries",value:function(e){return Object.keys(e||{}).reduce((function(t,n){return t[e[n].name]=n,t}),{})}},{key:"mapNode",value:function(e){var t=dA(e.op)||this.opMappers[e.op]||{};null==e.attr&&(e.attr={});var n={name:e.name,op:e.op,category:t.category,inputNames:(e.input||[]).map((function(e){return e.startsWith("^")?e.slice(1):e})),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr,outputs:t.outputs};return null!=t.inputs&&(n.inputParams=t.inputs.reduce((function(e,t){return e[t.name]={type:t.type,inputIndexStart:t.start,inputIndexEnd:t.end},e}),{})),null!=t.attrs&&(n.attrParams=t.attrs.reduce((function(t,n){var r=n.type,a=void 0;switch(n.type){case"string":void 0===(a=VA(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=VA(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"string[]":void 0===(a=YA(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=YA(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number":void 0===(a=WA(e.attr,n.tfName,n.defaultValue||0))&&n.tfDeprecatedName&&(a=WA(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number[]":void 0===(a=XA(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=XA(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool":void 0===(a=UA(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=UA(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool[]":void 0===(a=JA(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=JA(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape":void 0===(a=KA(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=KA(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape[]":void 0===(a=QA(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=QA(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype":void 0===(a=HA(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=HA(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype[]":void 0===(a=qA(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=qA(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"func":void 0===(a=GA(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=GA(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error("Unsupported param type: ".concat(n.type," for op: ").concat(e.op))}return t[n.name]={value:a,type:r},t}),{})),n}},{key:"mapFunction",value:function(e){var t=this,n=e.nodeDef,r=[],a={};null!=n&&(a=n.reduce((function(e,n){return e[n.name]=t.mapNode(n),"Const"===n.op&&r.push(e[n.name]),e}),{}));var i=[],o=[];e.signature.inputArg.forEach((function(e){var t=vA(e.name),n=(0,ge.Z)(t,1)[0],r={name:n,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:jA(e.type),type:"dtype"}},children:[]};r.signatureKey=e.name,i.push(r),a[n]=r})),Object.keys(a).forEach((function(e){var t=a[e];t.inputNames.forEach((function(e,n){var r=vA(e),i=(0,ge.Z)(r,3),o=i[0],s=i[2],u=a[o];if(null!=u.outputs){var c=u.outputs.indexOf(s);if(-1!==c){var l="".concat(o,":").concat(c);t.inputNames[n]=l}}t.inputs.push(u),u.children.push(t)}))}));var s=e.ret;e.signature.outputArg.forEach((function(e){var t=vA(s[e.name]),n=(0,ge.Z)(t,2),r=n[0],i=n[1],u=a[r];null!=u&&(u.defaultOutput=i,o.push(u))}));var u=this.mapArgsToSignature(e);return{nodes:a,inputs:i,outputs:o,weights:r,placeholders:[],signature:u}}},{key:"mapArgsToSignature",value:function(e){var t=this;return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce((function(e,n){return e[n.name]=t.mapArgToTensorInfo(n),e}),{}),outputs:e.signature.outputArg.reduce((function(n,r){return n[r.name]=t.mapArgToTensorInfo(r,e.ret),n}),{})}}},{key:"mapArgToTensorInfo",value:function(e,t){var n=e.name;return null!=t&&(n=t[n]),{name:n,dtype:e.type}}}],[{key:"Instance",get:function(){return this._instance||(this._instance=new this)}}]),e}();function BA(e,t){var n=Array.isArray(e)?String.fromCharCode.apply(null,e):function(e){var t=el().global;if("undefined"!==typeof t.atob)return t.atob(e);if("undefined"!==typeof Buffer)return new Buffer(e,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}(e);return t?n:n.toLowerCase()}function VA(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e[t];return null!=a?BA(a.s,r):n}function UA(e,t,n){var r=e[t];return r?r.b:n}function WA(e,t,n){var r=e[t]||{},a=null!=r.i?r.i:null!=r.f?r.f:n;return"number"===typeof a?a:parseInt(a,10)}function jA(e){switch("string"===typeof e&&(e=uA[e]),e){case uA.DT_FLOAT:case uA.DT_HALF:return"float32";case uA.DT_INT32:case uA.DT_INT64:case uA.DT_INT8:case uA.DT_UINT8:return"int32";case uA.DT_BOOL:return"bool";case uA.DT_DOUBLE:return"float32";case uA.DT_STRING:return"string";default:return null}}function GA(e,t,n){var r=e[t];return r&&r.func?r.func.name:n}function HA(e,t,n){var r=e[t];return r&&r.type?jA(r.type):n}function qA(e,t,n){var r=e[t];return r&&r.list&&r.list.type?r.list.type.map((function(e){return jA(e)})):n}function $A(e){if(!e.unknownRank)return null!=e.dim?e.dim.map((function(e){return"number"===typeof e.size?e.size:parseInt(e.size,10)})):[]}function KA(e,t,n){var r=e[t];return r&&r.shape?$A(r.shape):n}function XA(e,t,n){var r=e[t];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map((function(e){return"number"===typeof e?e:parseInt(e,10)})):n}function YA(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e[t];return a&&a.list&&a.list.s?a.list.s.map((function(e){return BA(e,r)})):n}function QA(e,t,n){var r=e[t];return r&&r.list&&r.list.shape?r.list.shape.map((function(e){return $A(e)})):n}function JA(e,t,n){var r=e[t];return r&&r.list&&r.list.b?r.list.b:n}var eR=function(){function e(t,n,r){var a=this;(0,Se.Z)(this,e),this.node=t,this.tensorMap=n,this.context=r,this.inputs=[],this.attrs={},this.inputs=t.inputNames.map((function(e){return a.getInput(e)})),null!=t.rawAttrs&&(this.attrs=Object.keys(t.rawAttrs).reduce((function(e,t){return e[t]=a.getAttr(t),e}),{}))}return(0,Te.Z)(e,[{key:"getInput",value:function(e){return hA(e,this.tensorMap,this.context)}},{key:"getAttr",value:function(e,t){var n=this.node.rawAttrs[e];if(null!=n.tensor)return hA(e,this.tensorMap,this.context);if(null!=n.i||null!=n.f)return WA(this.node.rawAttrs,e,t);if(null!=n.s)return VA(this.node.rawAttrs,e,t);if(null!=n.b)return UA(this.node.rawAttrs,e,t);if(null!=n.shape)return KA(this.node.rawAttrs,e,t);if(null!=n.type)return HA(this.node.rawAttrs,e,t);if(null!=n.list){if(null!=n.list.i||null!=n.list.f)return XA(this.node.rawAttrs,e,t);if(null!=n.list.s)return YA(this.node.rawAttrs,e,t);if(null!=n.list.shape)return QA(this.node.rawAttrs,e,t);if(null!=n.list.b)return JA(this.node.rawAttrs,e,t);if(null!=n.list.type)return qA(this.node.rawAttrs,e,t)}return t}}]),e}(),tR=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:x;switch(e.op){case"BiasAdd":case"AddV2":case"Add":return[r.add(fA("a",e,t,n),fA("b",e,t,n))];case"AddN":return[r.addN(fA("tensors",e,t,n))];case"FloorMod":case"Mod":return[r.mod(fA("a",e,t,n),fA("b",e,t,n))];case"Mul":return[r.mul(fA("a",e,t,n),fA("b",e,t,n))];case"RealDiv":case"Div":return[r.div(fA("a",e,t,n),fA("b",e,t,n))];case"DivNoNan":return[r.divNoNan(fA("a",e,t,n),fA("b",e,t,n))];case"FloorDiv":return[r.floorDiv(fA("a",e,t,n),fA("b",e,t,n))];case"Sub":return[r.sub(fA("a",e,t,n),fA("b",e,t,n))];case"Minimum":return[r.minimum(fA("a",e,t,n),fA("b",e,t,n))];case"Maximum":return[r.maximum(fA("a",e,t,n),fA("b",e,t,n))];case"Pow":return[r.pow(fA("a",e,t,n),fA("b",e,t,n))];case"SquaredDifference":return[r.squaredDifference(fA("a",e,t,n),fA("b",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},nR=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:x;switch(e.op){case"Abs":case"ComplexAbs":return[r.abs(fA("x",e,t,n))];case"Acos":return[r.acos(fA("x",e,t,n))];case"Acosh":return[r.acosh(fA("x",e,t,n))];case"Asin":return[r.asin(fA("x",e,t,n))];case"Asinh":return[r.asinh(fA("x",e,t,n))];case"Atan":return[r.atan(fA("x",e,t,n))];case"Atan2":return[r.atan2(fA("x",e,t,n),fA("y",e,t,n))];case"Atanh":return[r.atanh(fA("x",e,t,n))];case"Ceil":return[r.ceil(fA("x",e,t,n))];case"Complex":return[r.complex(fA("real",e,t,n),fA("imag",e,t,n))];case"Cos":return[r.cos(fA("x",e,t,n))];case"Cosh":return[r.cosh(fA("x",e,t,n))];case"Elu":return[r.elu(fA("x",e,t,n))];case"Erf":return[r.erf(fA("x",e,t,n))];case"Exp":return[r.exp(fA("x",e,t,n))];case"Expm1":return[r.expm1(fA("x",e,t,n))];case"Floor":return[r.floor(fA("x",e,t,n))];case"Log":return[r.log(fA("x",e,t,n))];case"Log1p":return[r.log1p(fA("x",e,t,n))];case"Imag":return[r.imag(fA("x",e,t,n))];case"Neg":return[r.neg(fA("x",e,t,n))];case"Reciprocal":return[r.reciprocal(fA("x",e,t,n))];case"Real":return[r.real(fA("x",e,t,n))];case"Relu":return[r.relu(fA("x",e,t,n))];case"Round":return[r.round(fA("x",e,t,n))];case"Selu":return[r.selu(fA("x",e,t,n))];case"Sigmoid":return[r.sigmoid(fA("x",e,t,n))];case"Sin":return[r.sin(fA("x",e,t,n))];case"Sign":return[r.sign(fA("x",e,t,n))];case"Sinh":return[r.sinh(fA("x",e,t,n))];case"Softplus":return[r.softplus(fA("x",e,t,n))];case"Sqrt":return[r.sqrt(fA("x",e,t,n))];case"Square":return[r.square(fA("x",e,t,n))];case"Tanh":return[r.tanh(fA("x",e,t,n))];case"Tan":return[r.tan(fA("x",e,t,n))];case"ClipByValue":return[r.clipByValue(fA("x",e,t,n),fA("clipValueMin",e,t,n),fA("clipValueMax",e,t,n))];case"Relu6":return[r.relu6(fA("x",e,t,n))];case"Rsqrt":return[r.rsqrt(hA(e.inputNames[0],t,n))];case"Prod":return[r.prod(fA("x",e,t,n),fA("axes",e,t,n))];case"LeakyRelu":return[r.leakyRelu(fA("x",e,t,n),fA("alpha",e,t,n))];case"Prelu":return[r.prelu(fA("x",e,t,n),fA("alpha",e,t,n))];case"IsNan":return[r.isNaN(hA(e.inputNames[0],t,n))];case"IsInf":return[r.isInf(hA(e.inputNames[0],t,n))];case"IsFinite":return[r.isFinite(hA(e.inputNames[0],t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}};function rR(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if("number"!==typeof e&&"number"!==typeof t){kc(e.length===t.length,(function(){return n+" Shapes ".concat(e," and ").concat(t," must match")}));for(var r=0;r<e.length;r++){var a=e[r],i=t[r];kc(a<0||i<0||a===i,(function(){return n+" Shapes ".concat(e," and ").concat(t," must match")}))}}}function aR(e){return"number"!==typeof e&&!e.some((function(e){return e<0}))}function iR(e,t,n){var r=oR(e,n),a=!aR(r);if(a&&0===t.length)throw new Error("Tried to calculate elements of an empty list"+" with non-fully-defined elementShape: ".concat(r));if(a&&t.forEach((function(e){r=oR(e.shape,r)})),!aR(r))throw new Error("Non-fully-defined elementShape: ".concat(r));return r}function oR(e,t){if("number"===typeof e)return t;if("number"===typeof t)return e;if(e.length!==t.length)throw new Error("Incompatible ranks during merge: ".concat(e," vs. ").concat(t));for(var n=[],r=0;r<e.length;++r){var a=e[r],i=t[r];if(a>=0&&i>=0&&a!==i)throw new Error("Incompatible shape during merge: ".concat(e," vs. ").concat(t));n[r]=a>=0?a:i}return n}var sR=function(){function e(t,n,r,a,i,o,s){(0,Se.Z)(this,e),this.name=t,this.dtype=n,this.maxSize=r,this.elementShape=a,this.identicalElementShapes=i,this.dynamicSize=o,this.clearAfterRead=s,this.tensors=[],this.closed_=!1,this.idTensor=vm(0),im(this.idTensor)}return(0,Te.Z)(e,[{key:"id",get:function(){return this.idTensor.id}},{key:"closed",get:function(){return this.closed_}},{key:"clearAndClose",value:function(e){this.tensors.forEach((function(t){null!=e&&e.has(t.tensor.id)||t.tensor.dispose()})),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}},{key:"size",value:function(){return this.tensors.length}},{key:"read",value:function(e){if(this.closed_)throw new Error("TensorArray ".concat(this.name," has already been closed."));if(e<0||e>=this.size())throw new Error("Tried to read from index ".concat(e,", but array size is: ").concat(this.size()));var t=this.tensors[e];if(t.cleared)throw new Error("TensorArray ".concat(this.name,": Could not read index ").concat(e," twice because it was cleared after a previous read ")+"(perhaps try setting clear_after_read = false?).");return this.clearAfterRead&&(t.cleared=!0),t.read=!0,t.tensor}},{key:"readMany",value:function(e){var t=this;return e.map((function(e){return t.read(e)}))}},{key:"write",value:function(e,t){if(this.closed_)throw new Error("TensorArray ".concat(this.name," has already been closed."));if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error("Tried to write to index ".concat(e,", but array is not resizeable and size is: ").concat(this.maxSize));var n=this.tensors[e]||{};if(t.dtype!==this.dtype)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,",\n          because the value dtype is ").concat(t.dtype,", but TensorArray dtype is ").concat(this.dtype,"."));if(0!==this.size()||null!=this.elementShape&&0!==this.elementShape.length||(this.elementShape=t.shape),rR(this.elementShape,t.shape,"TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,".")),n.read)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,", because it has already been read."));if(n.written)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,", because it has already been written."));n.tensor=t,im(t),n.written=!0,this.tensors[e]=n}},{key:"writeMany",value:function(e,t){var n=this;if(e.length!==t.length)throw new Error("TensorArray ".concat(this.name,": could not write multiple tensors,")+"because the index size: ".concat(e.length," is not the same as tensors size: ").concat(t.length,"."));e.forEach((function(e,r){return n.write(e,t[r])}))}},{key:"gather",value:function(e,t){if(t&&t!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but gather requested dtype ").concat(t));if(e)e=e.slice(0,this.size());else{e=[];for(var n=0;n<this.size();n++)e.push(n)}if(0===e.length)return Bp([],[0].concat(this.elementShape));var r=this.readMany(e);return rR(this.elementShape,r[0].shape,"TensorArray shape mismatch: "),Wk(r,0)}},{key:"concat",value:function(e){if(e&&e!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but concat requested dtype ").concat(e));if(0===this.size())return Bp([],[0].concat(this.elementShape));for(var t=[],n=0;n<this.size();n++)t.push(n);var r=this.readMany(t);return rR(this.elementShape,r[0].shape,"TensorArray shape mismatch: tensor array shape (".concat(this.elementShape,") vs first tensor shape (").concat(r[0].shape,")")),$g(r,0)}},{key:"scatter",value:function(e,t){if(t.dtype!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but tensor has dtype ").concat(t.dtype));if(e.length!==t.shape[0])throw new Error("Expected len(indices) == tensor.shape[0], but saw: ".concat(e.length," vs. ").concat(t.shape[0]));var n=Math.max.apply(Math,(0,me.Z)(e));if(!this.dynamicSize&&n>=this.maxSize)throw new Error("Max index must be < array size (".concat(n,"  vs. ").concat(this.maxSize,")"));this.writeMany(e,iw(t,0))}},{key:"split",value:function(e,t){var n=this;if(t.dtype!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but tensor has dtype ").concat(t.dtype));var r=0,a=e.map((function(e){return r+=e}));if(r!==t.shape[0])throw new Error("Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ".concat(r,", and tensor's shape is: ").concat(t.shape));if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error("TensorArray's size is not equal to the size of lengths (".concat(this.maxSize," vs. ").concat(e.length,"), ")+"and the TensorArray is not marked as dynamically resizeable");var i=0===r?0:t.size/r,o=[];rm((function(){t=Gg(t,[1,r,i]);for(var s=0;s<e.length;++s){var u=[0,0===s?0:a[s-1],0],c=[1,e[s],i];o[s]=Gg(Yg(t,u,c),n.elementShape)}return o}));for(var s=[],u=0;u<e.length;u++)s[u]=u;this.writeMany(s,o)}}]),e}(),uR=function(){function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;(0,Se.Z)(this,e),this.tensors=t,this.elementShape=n,this.elementDtype=r,null!=t&&t.forEach((function(e){if(r!==e.dtype)throw new Error("Invalid data types; op elements ".concat(r,", but list elements ").concat(e.dtype));rR(n,e.shape,"TensorList shape mismatch: "),im(e)})),this.idTensor=vm(0),this.maxNumElements=a,im(this.idTensor)}return(0,Te.Z)(e,[{key:"id",get:function(){return this.idTensor.id}},{key:"copy",value:function(){return new e((0,me.Z)(this.tensors),this.elementShape,this.elementDtype)}},{key:"clearAndClose",value:function(e){this.tensors.forEach((function(t){null!=e&&e.has(t.id)||t.dispose()})),this.tensors.length=0,this.idTensor.dispose()}},{key:"size",value:function(){return this.tensors.length}},{key:"stack",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(t!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t,", but list elements ").concat(this.elementDtype));if(-1!==r&&this.tensors.length!==r)throw new Error("Operation expected a list with ".concat(r," elements but got a list with ").concat(this.tensors.length," elements."));rR(e,this.elementShape,"TensorList shape mismatch: ");var a=iR(this.elementShape,this.tensors,e);return rm((function(){var e=n.tensors.map((function(e){return Gg(e,a)}));return Wk(e,0)}))}},{key:"popBack",value:function(e,t){if(t!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t,", but list elements ").concat(this.elementDtype));if(0===this.size())throw new Error("Trying to pop from an empty list.");var n=iR(this.elementShape,this.tensors,e),r=this.tensors.pop();return r.kept=!1,rR(r.shape,e,"TensorList shape mismatch: "),Gg(r,n)}},{key:"pushBack",value:function(e){if(e.dtype!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(e.dtype,", but list elements ").concat(this.elementDtype));if(rR(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");im(e),this.tensors.push(e)}},{key:"resize",value:function(t){if(t<0)throw new Error("TensorListResize expects size to be non-negative. Got: ".concat(t));if(-1!==this.maxNumElements&&t>this.maxNumElements)throw new Error("TensorListResize input size ".concat(t," is greater maxNumElement ").concat(this.maxNumElements,"."));var n=new e([],this.elementShape,this.elementDtype,this.maxNumElements);n.tensors.length=t;for(var r=0;r<Math.min(this.tensors.length,t);++r)n.tensors[r]=this.tensors[r];return n}},{key:"getItem",value:function(e,t,n){if(n!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(n,", but list elements ").concat(this.elementDtype));if(e<0||e>this.tensors.length)throw new Error("Trying to access element ".concat(e," in a list with ").concat(this.tensors.length," elements."));if(null==this.tensors[e])throw new Error("element at index ".concat(e," is null."));rR(this.tensors[e].shape,t,"TensorList shape mismatch: ");var r=iR(this.elementShape,this.tensors,t);return Gg(this.tensors[e],r)}},{key:"setItem",value:function(e,t){if(t.dtype!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t.dtype,", but list elements ").concat(this.elementDtype));if(e<0||-1!==this.maxNumElements&&e>=this.maxNumElements)throw new Error("Trying to set element ".concat(e," in a list with max ").concat(this.maxNumElements," elements."));rR(this.elementShape,t.shape,"TensorList shape mismatch: "),im(t),null!=this.tensors[e]&&(this.tensors[e].kept=!1),this.tensors[e]=t}},{key:"gather",value:function(e,t,n){var r=this;if(t!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t,", but list elements ").concat(this.elementDtype));rR(this.elementShape,n,"TensorList shape mismatch: "),e=e.slice(0,this.size());var a=iR(this.elementShape,this.tensors,n);return 0===e.length?Bp([],[0].concat(a)):rm((function(){var t=e.map((function(e){return Gg(r.tensors[e],a)}));return Wk(t,0)}))}},{key:"concat",value:function(e,t){var n=this;if(e&&e!==this.elementDtype)throw new Error("TensorList dtype is ".concat(this.elementDtype," but concat requested dtype ").concat(e));rR(this.elementShape,t,"TensorList shape mismatch: ");var r=iR(this.elementShape,this.tensors,t);return 0===this.size()?Bp([],[0].concat(r)):rm((function(){var e=n.tensors.map((function(e){return Gg(e,r)}));return $g(e,0)}))}}]),e}();function cR(e,t,n){var r=e.dtype;if(e.shape.length<1)throw new Error("Tensor must be at least a vector, but saw shape: ".concat(e.shape));if(e.dtype!==n)throw new Error("Invalid data types; op elements ".concat(e.dtype,", but list elements ").concat(n));rR(e.shape.slice(1),t,"TensorList shape mismatch: ");var a=iw(e);return new uR(a,t,r)}function lR(e,t,n,r){return new uR([],e,t,r)}function dR(e,t,n,r){if(t.length!==e.shape[0])throw new Error("Expected len(indices) == tensor.shape[0], but saw: ".concat(t.length," vs. ").concat(e.shape[0]));var a=Math.max.apply(Math,(0,me.Z)(t));if(null!=r&&-1!==r&&a>=r)throw new Error("Max index must be < array size (".concat(a,"  vs. ").concat(r,")"));var i=new uR([],n,e.dtype,r),o=iw(e,0);return t.forEach((function(e,t){i.setItem(e,o[t])})),i}function fR(e,t,n){var r=0,a=t.map((function(e){return r+=e}));if(r!==e.shape[0])throw new Error("Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ".concat(r,", and tensor's shape is: ").concat(e.shape));for(var i=oR(e.shape.slice(1),n),o=0===r?0:e.size/r,s=rm((function(){var n=[];e=Gg(e,[1,r,o]);for(var s=0;s<t.length;++s){var u=[0,0===s?0:a[s-1],0],c=[1,t[s],o];n[s]=Gg(Yg(e,u,c),i)}return e.dispose(),n})),u=new uR([],n,e.dtype,t.length),c=0;c<s.length;c++)u.setItem(c,s[c]);return u}var hR=function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t,n,r){var a,i,o,s,u,c,l,d,f,h,p,v,m,g,y,b,k,w,x,I,S,T,E,N,C,Z,_,A,R,D,O,L,F,M,P,z,B,V,U,W,j,G,H,q,$,K,X,Y,Q,J,ee,te,ne,re,ae,ie,oe,se,ue,ce,le,de,fe,he,pe,ve,me,ge,ye,ke,we,xe,Ie,Se,Te,Ee,Ne,Ce,Ze,_e,Ae,Re,De,Oe,Le,Fe,Me,Pe,ze,Be,Ve,Ue,We,je,Ge,He,qe,$e,Ke,Xe,Ye,Qe,Je,et,tt,nt,rt,at,it,ot;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.op,e.next="If"===e.t0||"StatelessIf"===e.t0?3:"While"===e.t0||"StatelessWhile"===e.t0?15:"LoopCond"===e.t0?33:"Switch"===e.t0?35:"Merge"===e.t0?46:"Enter"===e.t0?51:"Exit"===e.t0?55:"NextIteration"===e.t0?58:"TensorArrayV3"===e.t0?61:"TensorArrayWriteV3"===e.t0?71:"TensorArrayReadV3"===e.t0?77:"TensorArrayGatherV3"===e.t0?81:"TensorArrayScatterV3"===e.t0?86:"TensorArrayConcatV3"===e.t0?92:"TensorArraySplitV3"===e.t0?96:"TensorArraySizeV3"===e.t0?102:"TensorArrayCloseV3"===e.t0?105:"TensorListSetItem"===e.t0?109:"TensorListGetItem"===e.t0?115:"TensorListScatterV2"===e.t0||"TensorListScatter"===e.t0?121:"TensorListReserve"===e.t0||"EmptyTensorList"===e.t0?128:"TensorListGather"===e.t0?136:"TensorListStack"===e.t0?142:"TensorListFromTensor"===e.t0?148:"TensorListConcat"===e.t0||"TensorListConcatV2"===e.t0?154:"TensorListPushBack"===e.t0?159:"TensorListPopBack"===e.t0?164:"TensorListSplit"===e.t0?169:"TensorListLength"===e.t0?175:"TensorListResize"===e.t0?178:184;break;case 3:return a=fA("thenBranch",t,n,r),i=fA("elseBranch",t,n,r),o=fA("cond",t,n,r),s=fA("args",t,n,r),e.next=9,o.data();case 9:if(!e.sent[0]){e.next=14;break}return e.abrupt("return",r.functionMap[a].executeFunctionAsync(s,r.tensorArrayMap,r.tensorListMap));case 14:return e.abrupt("return",r.functionMap[i].executeFunctionAsync(s,r.tensorArrayMap,r.tensorListMap));case 15:return u=fA("body",t,n,r),c=fA("cond",t,n,r),l=fA("args",t,n,r),e.next=20,r.functionMap[c].executeFunctionAsync(l,r.tensorArrayMap,r.tensorListMap);case 20:return d=e.sent,f=l.map((function(e){return e.id})),e.next=24,d[0].data();case 24:h=e.sent,d.forEach((function(e){e.kept||-1!==f.indexOf(e.id)||e.dispose()})),p=l,v=(0,be.Z)().mark((function e(){var t,n,a;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p,e.next=3,r.functionMap[u].executeFunctionAsync(p,r.tensorArrayMap,r.tensorListMap);case 3:return p=e.sent,n=p.map((function(e){return e.id})),t.forEach((function(e){e.kept||-1!==f.indexOf(e.id)||-1!==n.indexOf(e.id)||e.dispose()})),e.next=8,r.functionMap[c].executeFunctionAsync(p,r.tensorArrayMap,r.tensorListMap);case 8:return a=e.sent,e.next=11,a[0].data();case 11:h=e.sent,a.forEach((function(e){e.kept||-1!==f.indexOf(e.id)||-1!==n.indexOf(e.id)||e.dispose()}));case 13:case"end":return e.stop()}}),e)}));case 28:if(!h[0]){e.next=32;break}return e.delegateYield(v(),"t1",30);case 30:e.next=28;break;case 32:return e.abrupt("return",p);case 33:return m=fA("pred",t,n,r),e.abrupt("return",[bA(m)]);case 35:return g=fA("pred",t,n,r),(y=fA("data",t,n,r)).kept||(y=bA(y)),e.next=40,g.data();case 40:if(!e.sent[0]){e.next=44;break}e.t2=[void 0,y],e.next=45;break;case 44:e.t2=[y,void 0];case 45:return e.abrupt("return",e.t2);case 46:if(b=t.inputNames.find((function(e){return void 0!==hA(e,n,r)})),!b){e.next=50;break}return k=hA(b,n,r),e.abrupt("return",[bA(k)]);case 50:return e.abrupt("return",void 0);case 51:return w=fA("frameName",t,n,r),x=fA("tensor",t,n,r),r.enterFrame(w),e.abrupt("return",[bA(x)]);case 55:return I=fA("tensor",t,n,r),r.exitFrame(),e.abrupt("return",[bA(I)]);case 58:return S=fA("tensor",t,n,r),r.nextIteration(),e.abrupt("return",[bA(S)]);case 61:return T=fA("size",t,n,r),E=fA("dtype",t,n,r),N=fA("elementShape",t,n,r),C=fA("dynamicSize",t,n,r),Z=fA("clearAfterRead",t,n,r),_=fA("identicalElementShapes",t,n,r),A=fA("name",t,n,r),R=new sR(A,E,T,N,_,C,Z),r.addTensorArray(R),e.abrupt("return",[R.idTensor,vm(1)]);case 71:return D=fA("tensorArrayId",t,n,r),O=fA("index",t,n,r),L=fA("tensor",t,n,r),(F=r.getTensorArray(D.id)).write(O,L),e.abrupt("return",[F.idTensor]);case 77:return M=fA("tensorArrayId",t,n,r),P=fA("index",t,n,r),z=r.getTensorArray(M.id),e.abrupt("return",[z.read(P)]);case 81:return B=fA("tensorArrayId",t,n,r),V=fA("indices",t,n,r),U=fA("dtype",t,n,r),W=r.getTensorArray(B.id),e.abrupt("return",[W.gather(V,U)]);case 86:return j=fA("tensorArrayId",t,n,r),G=fA("indices",t,n,r),H=fA("tensor",t,n,r),(q=r.getTensorArray(j.id)).scatter(G,H),e.abrupt("return",[q.idTensor]);case 92:return $=fA("tensorArrayId",t,n,r),K=r.getTensorArray($.id),X=fA("dtype",t,n,r),e.abrupt("return",[K.concat(X)]);case 96:return Y=fA("tensorArrayId",t,n,r),Q=fA("tensor",t,n,r),J=fA("lengths",t,n,r),(ee=r.getTensorArray(Y.id)).split(J,Q),e.abrupt("return",[ee.idTensor]);case 102:return te=fA("tensorArrayId",t,n,r),ne=r.getTensorArray(te.id),e.abrupt("return",[vm(ne.size(),"int32")]);case 105:return re=fA("tensorArrayId",t,n,r),(ae=r.getTensorArray(re.id)).clearAndClose(),e.abrupt("return",[ae.idTensor]);case 109:return ie=fA("tensorListId",t,n,r),oe=fA("index",t,n,r),se=fA("tensor",t,n,r),(ue=r.getTensorList(ie.id)).setItem(oe,se),e.abrupt("return",[ue.idTensor]);case 115:return ce=fA("tensorListId",t,n,r),le=fA("index",t,n,r),de=fA("elementShape",t,n,r),fe=fA("elementDType",t,n,r),he=r.getTensorList(ce.id),e.abrupt("return",[he.getItem(le,de,fe)]);case 121:return pe=fA("indices",t,n,r),ve=fA("tensor",t,n,r),me=fA("elementShape",t,n,r),ge=fA("numElements",t,n,r),ye=dR(ve,pe,me,ge),r.addTensorList(ye),e.abrupt("return",[ye.idTensor]);case 128:return ke=fA("elementShape",t,n,r),we=fA("elementDType",t,n,r),xe="TensorListReserve"===t.op?"numElements":"maxNumElements",Ie=fA(xe,t,n,r),Se="TensorListReserve"===t.op?-1:Ie,Te=lR(ke,we,0,Se),r.addTensorList(Te),e.abrupt("return",[Te.idTensor]);case 136:return Ee=fA("tensorListId",t,n,r),Ne=fA("indices",t,n,r),Ce=fA("elementShape",t,n,r),Ze=fA("elementDType",t,n,r),_e=r.getTensorList(Ee.id),e.abrupt("return",[_e.gather(Ne,Ze,Ce)]);case 142:return Ae=fA("tensorListId",t,n,r),Re=fA("elementShape",t,n,r),De=fA("elementDType",t,n,r),Oe=fA("numElements",t,n,r),Le=r.getTensorList(Ae.id),e.abrupt("return",[Le.stack(Re,De,Oe)]);case 148:return Fe=fA("tensor",t,n,r),Me=fA("elementShape",t,n,r),Pe=fA("elementDType",t,n,r),ze=cR(Fe,Me,Pe),r.addTensorList(ze),e.abrupt("return",[ze.idTensor]);case 154:return Be=fA("tensorListId",t,n,r),Ve=r.getTensorList(Be.id),Ue=fA("dtype",t,n,r),We=fA("elementShape",t,n,r),e.abrupt("return",[Ve.concat(Ue,We)]);case 159:return je=fA("tensorListId",t,n,r),Ge=fA("tensor",t,n,r),(He=r.getTensorList(je.id)).pushBack(Ge),e.abrupt("return",[He.idTensor]);case 164:return qe=fA("tensorListId",t,n,r),$e=fA("elementShape",t,n,r),Ke=fA("elementDType",t,n,r),Xe=r.getTensorList(qe.id),e.abrupt("return",[Xe.popBack($e,Ke)]);case 169:return Ye=fA("tensor",t,n,r),Qe=fA("elementShape",t,n,r),Je=fA("lengths",t,n,r),et=fR(Ye,Je,Qe),r.addTensorList(et),e.abrupt("return",[et.idTensor]);case 175:return tt=fA("tensorListId",t,n,r),nt=r.getTensorList(tt.id),e.abrupt("return",[vm(nt.size(),"int32")]);case 178:return rt=fA("tensorListId",t,n,r),at=fA("size",t,n,r),it=r.getTensorList(rt.id),ot=it.resize(at),r.addTensorList(ot),e.abrupt("return",[ot.idTensor]);case 184:throw TypeError("Node type ".concat(t.op," is not implemented"));case 185:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();function pR(e,t,n){var r=fA("fusedOps",e,t,n),a=(0,ge.Z)(r,2),i=a[0],o=a[1],s="biasadd"===i,u=!s,c="prelu"===o,l="fusedbatchnorm"===i,d=fA("numArgs",e,t,n);if(s){if(c&&2!==d)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!c&&s&&1!==d)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(l)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");var f=fA("strides",e,t,n),h=yA(e,t,n),p=fA("dataFormat",e,t,n).toUpperCase(),v=fA("dilations",e,t,n),m=fA("args",e,t,n),g=(0,ge.Z)(m,2),y=g[0],b=g[1];return u&&(b=y,y=void 0),{stride:f,pad:h,dataFormat:p,dilations:v,biasArg:y,preluArg:b,activationFunc:o,leakyreluAlpha:fA("leakyreluAlpha",e,t,n)}}var vR=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:x;switch(e.op){case"Conv1D":var a=fA("stride",e,t,n),i=fA("pad",e,t,n),o=fA("dataFormat",e,t,n).toUpperCase(),s=fA("dilation",e,t,n);return[r.conv1d(fA("x",e,t,n),fA("filter",e,t,n),a,i,o,s)];case"Conv2D":var u=fA("strides",e,t,n),c=yA(e,t,n),l=fA("dataFormat",e,t,n).toUpperCase(),d=fA("dilations",e,t,n);return[r.conv2d(fA("x",e,t,n),fA("filter",e,t,n),[u[1],u[2]],c,l,[d[1],d[2]])];case"_FusedConv2D":var f=pR(e,t,n),h=f.stride,p=f.pad,v=f.dataFormat,m=f.dilations,g=f.biasArg,y=f.preluArg,b=f.activationFunc,k=f.leakyreluAlpha;return[r.fused.conv2d({x:fA("x",e,t,n),filter:fA("filter",e,t,n),strides:[h[1],h[2]],pad:p,dataFormat:v,dilations:[m[1],m[2]],bias:g,activation:b,preluActivationWeights:y,leakyreluAlpha:k})];case"FusedDepthwiseConv2dNative":var w=pR(e,t,n),I=w.stride,S=w.pad,T=w.dataFormat,E=w.dilations,N=w.biasArg,C=w.preluArg,Z=w.activationFunc,_=w.leakyreluAlpha;return[r.fused.depthwiseConv2d({x:fA("x",e,t,n),filter:fA("filter",e,t,n),strides:[I[1],I[2]],pad:S,dataFormat:T,dilations:[E[1],E[2]],bias:N,activation:Z,preluActivationWeights:C,leakyreluAlpha:_})];case"Conv2DBackpropInput":case"Conv2dTranspose":var A=fA("outputShape",e,t,n),R=fA("strides",e,t,n),D=yA(e,t,n);return[r.conv2dTranspose(fA("x",e,t,n),fA("filter",e,t,n),A,[R[1],R[2]],D)];case"DepthwiseConv2dNative":case"DepthwiseConv2d":var O=fA("strides",e,t,n),L=yA(e,t,n),F=fA("dilations",e,t,n),M=fA("dataFormat",e,t,n).toUpperCase();return[r.depthwiseConv2d(fA("input",e,t,n),fA("filter",e,t,n),[O[1],O[2]],L,M,[F[1],F[2]])];case"Conv3D":var P=fA("strides",e,t,n),z=fA("pad",e,t,n),B=fA("dataFormat",e,t,n).toUpperCase(),V=fA("dilations",e,t,n);return[r.conv3d(fA("x",e,t,n),fA("filter",e,t,n),[P[1],P[2],P[3]],z,B,[V[1],V[2],V[3]])];case"AvgPool":var U=fA("strides",e,t,n),W=fA("pad",e,t,n),j=fA("kernelSize",e,t,n);return[r.avgPool(fA("x",e,t,n),[j[1],j[2]],[U[1],U[2]],W)];case"MaxPool":var G=fA("strides",e,t,n),H=fA("pad",e,t,n),q=fA("kernelSize",e,t,n);return[r.maxPool(fA("x",e,t,n),[q[1],q[2]],[G[1],G[2]],H)];case"MaxPoolWithArgmax":var $=fA("strides",e,t,n),K=fA("pad",e,t,n),X=fA("kernelSize",e,t,n),Y=fA("includeBatchInIndex",e,t,n),Q=r.maxPoolWithArgmax(fA("x",e,t,n),[X[1],X[2]],[$[1],$[2]],K,Y);return[Q.result,Q.indexes];case"AvgPool3D":var J=fA("strides",e,t,n),ee=fA("pad",e,t,n),te=fA("kernelSize",e,t,n);return[r.avgPool3d(fA("x",e,t,n),[te[1],te[2],te[3]],[J[1],J[2],J[3]],ee)];case"MaxPool3D":var ne=fA("strides",e,t,n),re=fA("pad",e,t,n),ae=fA("kernelSize",e,t,n);return[r.maxPool3d(fA("x",e,t,n),[ae[1],ae[2],ae[3]],[ne[1],ne[2],ne[3]],re)];case"Dilation2D":var ie=fA("strides",e,t,n),oe=fA("pad",e,t,n),se=fA("dilations",e,t,n),ue=ie[1],ce=ie[2],le=se[1],de=se[2];return[r.dilation2d(fA("x",e,t,n),fA("filter",e,t,n),[ue,ce],oe,[le,de],"NHWC")];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},mR=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:x;switch(e.op){case"Fill":var a=fA("shape",e,t,n),i=fA("dtype",e,t,n),o=fA("value",e,t,n);return[r.fill(a,o,i)];case"LinSpace":var s=fA("start",e,t,n),u=fA("stop",e,t,n),c=fA("num",e,t,n);return[r.linspace(s,u,c)];case"Multinomial":var l=fA("logits",e,t,n),d=fA("numSamples",e,t,n),f=fA("seed",e,t,n);return[r.multinomial(l,d,f)];case"OneHot":var h=fA("indices",e,t,n),p=fA("depth",e,t,n),v=fA("onValue",e,t,n),m=fA("offValue",e,t,n),g=fA("dtype",e,t,n);return[r.oneHot(h,p,v,m,g)];case"Ones":return[r.ones(fA("shape",e,t,n),fA("dtype",e,t,n))];case"OnesLike":return[r.onesLike(fA("x",e,t,n))];case"RandomStandardNormal":return[r.randomStandardNormal(fA("shape",e,t,n),fA("dtype",e,t,n),fA("seed",e,t,n))];case"RandomUniform":return[r.randomUniform(fA("shape",e,t,n),fA("minval",e,t,n),fA("maxval",e,t,n),fA("dtype",e,t,n))];case"Range":var y=fA("start",e,t,n),b=fA("stop",e,t,n),k=fA("step",e,t,n);return[r.range(y,b,k,fA("dtype",e,t,n))];case"TruncatedNormal":var w=fA("shape",e,t,n),I=fA("mean",e,t,n),S=fA("stdDev",e,t,n),T=fA("seed",e,t,n);return[r.truncatedNormal(w,I,S,fA("dtype",e,t,n),T)];case"Zeros":return[r.zeros(fA("shape",e,t,n),fA("dtype",e,t,n))];case"ZerosLike":return[r.zerosLike(fA("x",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}};function gR(e,t,n){return{boxes:fA("boxes",e,t,n),scores:fA("scores",e,t,n),maxOutputSize:fA("maxOutputSize",e,t,n),iouThreshold:fA("iouThreshold",e,t,n),scoreThreshold:fA("scoreThreshold",e,t,n),softNmsSigma:fA("softNmsSigma",e,t,n)}}var yR=function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t,n,r,a){var i,o,s,u,c,l,d,f,h,p,v,m,g,y,b,k,w,I,S,T,E,N,C,Z,_,A=arguments;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=A.length>4&&void 0!==A[4]?A[4]:x,e.t0=t.op,e.next="NonMaxSuppressionV5"===e.t0?4:"NonMaxSuppressionV4"===e.t0?9:"NonMaxSuppressionV3"===e.t0||"NonMaxSuppressionV2"===e.t0?15:"Where"===e.t0?20:"ListDiff"===e.t0?27:28;break;case 4:return o=gR(t,n,r),s=o.boxes,u=o.scores,c=o.maxOutputSize,l=o.iouThreshold,d=o.scoreThreshold,f=o.softNmsSigma,e.next=7,i.image.nonMaxSuppressionWithScoreAsync(s,u,c,l,d,f);case 7:return h=e.sent,e.abrupt("return",[h.selectedIndices,h.selectedScores]);case 9:return p=gR(t,n,r),v=p.boxes,m=p.scores,g=p.maxOutputSize,y=p.iouThreshold,b=p.scoreThreshold,k=fA("padToMaxOutputSize",t,n,r),e.next=13,i.image.nonMaxSuppressionPaddedAsync(v,m,g,y,b,k);case 13:return w=e.sent,e.abrupt("return",[w.selectedIndices,w.validOutputs]);case 15:return I=gR(t,n,r),S=I.boxes,T=I.scores,E=I.maxOutputSize,N=I.iouThreshold,C=I.scoreThreshold,e.next=18,i.image.nonMaxSuppressionAsync(S,T,E,N,C);case 18:return e.t1=e.sent,e.abrupt("return",[e.t1]);case 20:return Z=i.cast(fA("condition",t,n,r),"bool"),e.next=23,i.whereAsync(Z);case 23:return e.t2=e.sent,_=[e.t2],Z.dispose(),e.abrupt("return",_);case 27:return e.abrupt("return",i.setdiff1dAsync(fA("x",t,n,r),fA("y",t,n,r)));case 28:throw TypeError("Node type ".concat(t.op," is not implemented"));case 29:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),bR=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:x;switch(e.op){case"LowerBound":var a=fA("sortedSequence",e,t,n),i=fA("values",e,t,n);return[r.lowerBound(a,i)];case"TopKV2":var o=fA("x",e,t,n),s=fA("k",e,t,n),u=fA("sorted",e,t,n),c=r.topk(o,s,u);return[c.values,c.indices];case"UpperBound":var l=fA("sortedSequence",e,t,n),d=fA("values",e,t,n);return[r.upperBound(l,d)];case"Unique":var f=fA("x",e,t,n),h=r.unique(f);return[h.values,h.indices];case"UniqueV2":var p=fA("x",e,t,n),v=fA("axis",e,t,n),m=r.unique(p,v);return[m.values,m.indices];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},kR=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:x;switch(e.op){case"Const":return t[e.name];case"PlaceholderWithDefault":var a=fA("default",e,t,n);return[hA(e.name,t,n)||a];case"Placeholder":return[hA(e.name,t,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":return[bA(fA("x",e,t,n))];case"IdentityN":return fA("x",e,t,n).map((function(e){return bA(e)}));case"Snapshot":return[bA(fA("x",e,t,n))];case"Shape":return[r.tensor1d(fA("x",e,t,n).shape,"int32")];case"ShapeN":return fA("x",e,t,n).map((function(e){return r.tensor1d(e.shape)}));case"Size":return[r.scalar(fA("x",e,t,n).size,"int32")];case"Rank":return[r.scalar(fA("x",e,t,n).rank,"int32")];case"NoOp":return[r.scalar(1)];case"Print":var i=fA("x",e,t,n),o=fA("data",e,t,n),s=fA("message",e,t,n),u=fA("summarize",e,t,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(s);for(var c=0;c<o.length;c++)console.log(Array.prototype.slice.call(o[c].dataSync()).slice(0,u));return[i];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},wR=function(){function e(t,n){(0,Se.Z)(this,e),this.keyDType=t,this.valueDType=n,this.handle=vm(0),this.tensorMap=new Map,im(this.handle)}return(0,Te.Z)(e,[{key:"id",get:function(){return this.handle.id}},{key:"clearAndClose",value:function(){this.tensorMap.forEach((function(e){return e.dispose()})),this.tensorMap.clear(),this.handle.dispose()}},{key:"size",value:function(){return this.tensorMap.size}},{key:"tensorSize",value:function(){return vm(this.size(),"int32")}},{key:"import",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t,n){var r,a=this;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.checkKeyAndValueTensor(t,n),e.next=3,t.data();case 3:return r=e.sent,this.tensorMap.forEach((function(e){return e.dispose()})),this.tensorMap.clear(),e.abrupt("return",rm((function(){var e=iw(n),t=r.length,i=e.length;kc(t===i,(function(){return"The number of elements doesn't match, keys has "+"".concat(t," elements, the values has ").concat(i," ")+"elements."}));for(var o=0;o<t;o++){var s=r[o],u=e[o];im(u),a.tensorMap.set(s,u)}return a.handle})));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"find",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t,n){var r,a=this;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.checkKeyAndValueTensor(t,n),e.next=3,t.data();case 3:return r=e.sent,e.abrupt("return",rm((function(){for(var e=[],t=0;t<r.length;t++){var i=r[t],o=a.findWithDefault(i,n);e.push(o)}return Wk(e)})));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"findWithDefault",value:function(e,t){var n=this.tensorMap.get(e);return null!=n?n:t}},{key:"checkKeyAndValueTensor",value:function(e,t){if(e.dtype!==this.keyDType)throw new Error("Expect key dtype ".concat(this.keyDType,", but got ")+"".concat(e.dtype));if(t.dtype!==this.valueDType)throw new Error("Expect value dtype ".concat(this.valueDType,", but got ")+"".concat(t.dtype))}}]),e}(),xR=function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t,n,r,a){var i,o,s,u,c,l,d,f,h,p,v,m,g,y;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.op,e.next="HashTable"===e.t0||"HashTableV2"===e.t0?3:"InitializeTable"===e.t0||"InitializeTableV2"===e.t0||"LookupTableImport"===e.t0||"LookupTableImportV2"===e.t0?13:"LookupTableFind"===e.t0||"LookupTableFindV2"===e.t0?21:"LookupTableSize"===e.t0||"LookupTableSizeV2"===e.t0?29:32;break;case 3:if(null==(i=a.getHashTableHandleByName(t.name))){e.next=8;break}return e.abrupt("return",[i]);case 8:return o=fA("keyDType",t,n,r),s=fA("valueDType",t,n,r),u=new wR(o,s),a.addHashTable(t.name,u),e.abrupt("return",[u.handle]);case 13:return c=fA("tableHandle",t,n,r,a),l=fA("keys",t,n,r),d=fA("values",t,n,r),f=a.getHashTableById(c.id),e.next=19,f.import(l,d);case 19:return e.t1=e.sent,e.abrupt("return",[e.t1]);case 21:return h=fA("tableHandle",t,n,r,a),p=fA("keys",t,n,r),v=fA("defaultValue",t,n,r),m=a.getHashTableById(h.id),e.next=27,m.find(p,v);case 27:return e.t2=e.sent,e.abrupt("return",[e.t2]);case 29:return g=fA("tableHandle",t,n,r,a),y=a.getHashTableById(g.id),e.abrupt("return",[y.tensorSize()]);case 32:throw TypeError("Node type ".concat(t.op," is not implemented"));case 33:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),IR=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:x;switch(e.op){case"ResizeBilinear":var a=fA("images",e,t,n),i=fA("size",e,t,n),o=fA("alignCorners",e,t,n),s=fA("halfPixelCenters",e,t,n);return[r.image.resizeBilinear(a,[i[0],i[1]],o,s)];case"ResizeNearestNeighbor":var u=fA("images",e,t,n),c=fA("size",e,t,n),l=fA("alignCorners",e,t,n),d=fA("halfPixelCenters",e,t,n);return[r.image.resizeNearestNeighbor(u,[c[0],c[1]],l,d)];case"CropAndResize":var f=fA("image",e,t,n),h=fA("boxes",e,t,n),p=fA("boxInd",e,t,n),v=fA("cropSize",e,t,n),m=fA("method",e,t,n),g=fA("extrapolationValue",e,t,n);return[r.image.cropAndResize(f,h,p,v,m,g)];case"ImageProjectiveTransformV3":var y=fA("images",e,t,n),b=fA("transforms",e,t,n),k=fA("outputShape",e,t,n),w=fA("fillValue",e,t,n),I=fA("interpolation",e,t,n),S=fA("fillMode",e,t,n);return[r.image.transform(y,b,I.toLowerCase(),S.toLowerCase(),w,k)];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},SR=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:x;switch(e.op){case"Equal":return[r.equal(fA("a",e,t,n),fA("b",e,t,n))];case"NotEqual":return[r.notEqual(fA("a",e,t,n),fA("b",e,t,n))];case"Greater":return[r.greater(fA("a",e,t,n),fA("b",e,t,n))];case"GreaterEqual":return[r.greaterEqual(fA("a",e,t,n),fA("b",e,t,n))];case"Less":return[r.less(fA("a",e,t,n),fA("b",e,t,n))];case"LessEqual":return[r.lessEqual(fA("a",e,t,n),fA("b",e,t,n))];case"LogicalAnd":return[r.logicalAnd(fA("a",e,t,n),fA("b",e,t,n))];case"LogicalNot":return[r.logicalNot(fA("a",e,t,n))];case"LogicalOr":return[r.logicalOr(fA("a",e,t,n),fA("b",e,t,n))];case"Select":case"SelectV2":return[r.where(fA("condition",e,t,n),fA("a",e,t,n),fA("b",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},TR=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:x;switch(e.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[r.matMul(fA("a",e,t,n),fA("b",e,t,n),fA("transposeA",e,t,n),fA("transposeB",e,t,n))];case"Einsum":return[r.einsum.apply(r,[fA("equation",e,t,n)].concat((0,me.Z)(fA("tensors",e,t,n))))];case"Transpose":return[r.transpose(fA("x",e,t,n),fA("perm",e,t,n))];case"_FusedMatMul":var a=fA("fusedOps",e,t,n),i=(0,ge.Z)(a,2),o=i[0],s=i[1],u="biasadd"===o,c="prelu"===s,l=fA("numArgs",e,t,n),d=fA("leakyreluAlpha",e,t,n);if(u){if(c&&2!==l)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!c&&1!==l)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}var f=fA("args",e,t,n),h=(0,ge.Z)(f,2),p=h[0],v=h[1];return[r.fused.matMul({a:fA("a",e,t,n),b:fA("b",e,t,n),transposeA:fA("transposeA",e,t,n),transposeB:fA("transposeB",e,t,n),bias:p,activation:s,preluActivationWeights:v,leakyreluAlpha:d})];case"MatrixBandPart":return[r.linalg.bandPart(fA("a",e,t,n),fA("numLower",e,t,n),fA("numUpper",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},ER=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:x;switch(e.op){case"EuclideanNorm":return[r.euclideanNorm(fA("x",e,t,n),fA("axis",e,t,n),fA("keepDims",e,t,n))];case"FusedBatchNorm":case"FusedBatchNormV2":case"FusedBatchNormV3":return[r.batchNorm(fA("x",e,t,n),fA("mean",e,t,n),fA("variance",e,t,n),fA("offset",e,t,n),fA("scale",e,t,n),fA("epsilon",e,t,n))];case"LRN":return[r.localResponseNormalization(fA("x",e,t,n),fA("radius",e,t,n),fA("bias",e,t,n),fA("alpha",e,t,n),fA("beta",e,t,n))];case"Softmax":return[r.softmax(fA("x",e,t,n))];case"LogSoftmax":return[r.logSoftmax(fA("x",e,t,n))];case"SparseToDense":return[r.sparseToDense(fA("sparseIndices",e,t,n),fA("outputShape",e,t,n),fA("sparseValues",e,t,n),fA("defaultValue",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},NR=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:x;switch(e.op){case"RaggedGather":var a=r.raggedGather(fA("paramsNestedSplits",e,t,n),fA("paramsDenseValues",e,t,n),fA("indices",e,t,n),fA("outputRaggedRank",e,t,n)),i=a.outputNestedSplits,o=a.outputDenseValues;return i.concat(o);case"RaggedRange":var s=r.raggedRange(fA("starts",e,t,n),fA("limits",e,t,n),fA("splits",e,t,n));return[s.rtNestedSplits,s.rtDenseValues];case"RaggedTensorToTensor":return[r.raggedTensorToTensor(fA("shape",e,t,n),fA("values",e,t,n),fA("defaultValue",e,t,n),fA("rowPartitionTensors",e,t,n),fA("rowPartitionTypes",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},CR=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:x;switch(e.op){case"Max":var a=fA("axis",e,t,n),i=fA("keepDims",e,t,n);return[r.max(fA("x",e,t,n),a,i)];case"Mean":var o=fA("axis",e,t,n),s=fA("keepDims",e,t,n);return[r.mean(fA("x",e,t,n),o,s)];case"Min":var u=fA("axis",e,t,n),c=fA("keepDims",e,t,n);return[r.min(fA("x",e,t,n),u,c)];case"Sum":var l=fA("axis",e,t,n),d=fA("keepDims",e,t,n);return[r.sum(fA("x",e,t,n),l,d)];case"All":var f=fA("axis",e,t,n),h=fA("keepDims",e,t,n);return[r.all(fA("x",e,t,n),f,h)];case"Any":var p=fA("axis",e,t,n),v=fA("keepDims",e,t,n);return[r.any(fA("x",e,t,n),p,v)];case"ArgMax":var m=fA("axis",e,t,n);return[r.argMax(fA("x",e,t,n),m)];case"ArgMin":var g=fA("axis",e,t,n);return[r.argMin(fA("x",e,t,n),g)];case"Prod":var y=fA("axis",e,t,n),b=fA("keepDims",e,t,n);return[r.prod(fA("x",e,t,n),y,b)];case"Cumprod":var k=fA("axis",e,t,n),w=fA("exclusive",e,t,n),I=fA("reverse",e,t,n);return[r.cumprod(fA("x",e,t,n),k,w,I)];case"Cumsum":var S=fA("axis",e,t,n),T=fA("exclusive",e,t,n),E=fA("reverse",e,t,n);return[r.cumsum(fA("x",e,t,n),S,T,E)];case"Bincount":var N=fA("x",e,t,n),C=fA("weights",e,t,n),Z=fA("size",e,t,n);return[r.bincount(N,C,Z)];case"DenseBincount":var _=fA("x",e,t,n),A=fA("weights",e,t,n),R=fA("size",e,t,n),D=fA("binaryOutput",e,t,n);return[r.denseBincount(_,A,R,D)];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},ZR=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:x;switch(e.op){case"ConcatV2":case"Concat":var a=fA("n",e,t,n),i=fA("axis",e,t,n),o=fA("tensors",e,t,n);return o=o.slice(0,a),[r.concat(o,i)];case"Gather":var s=fA("x",e,t,n),u=fA("indices",e,t,n);return[r.gather(s,r.cast(u,"int32"),0)];case"GatherV2":var c=fA("axis",e,t,n),l=fA("batchDims",e,t,n),d=fA("x",e,t,n),f=fA("indices",e,t,n);return[r.gather(d,r.cast(f,"int32"),c,l)];case"Reverse":for(var h=fA("dims",e,t,n),p=[],v=0;v<h.length;v++)h[v]&&p.push(v);var m=fA("x",e,t,n);return[r.reverse(m,p)];case"ReverseV2":var g=fA("axis",e,t,n),y=fA("x",e,t,n);return[r.reverse(y,g)];case"Slice":var b=fA("begin",e,t,n),k=fA("size",e,t,n);return[r.slice(fA("x",e,t,n),b,k)];case"StridedSlice":var w=fA("begin",e,t,n),I=fA("end",e,t,n),S=fA("strides",e,t,n),T=fA("beginMask",e,t,n),E=fA("endMask",e,t,n),N=fA("ellipsisMask",e,t,n),C=fA("newAxisMask",e,t,n),Z=fA("shrinkAxisMask",e,t,n),_=fA("x",e,t,n);return[r.stridedSlice(_,w,I,S,T,E,N,C,Z)];case"Pack":return rm((function(){var a=fA("axis",e,t,n),i=fA("tensors",e,t,n),o=i[0].shape,s=r.squeeze(i[0]).shape,u=i.map((function(e){var t=Sc(e.shape,o);if(!t&&!Sc(r.squeeze(e).shape,s))throw new Error("the input tensors shape does not match");return t?e:r.reshape(e,o)}));return[r.stack(u,a)]}));case"Unpack":var A=fA("axis",e,t,n),R=fA("tensor",e,t,n);return r.unstack(R,A);case"Tile":var D=fA("reps",e,t,n);return[r.tile(fA("x",e,t,n),D)];case"Split":case"SplitV":var O=fA("axis",e,t,n),L=fA("numOrSizeSplits",e,t,n),F=fA("x",e,t,n);return r.split(F,L,O);case"ScatterNd":var M=fA("indices",e,t,n),P=fA("values",e,t,n),z=fA("shape",e,t,n);return[r.scatterND(M,P,z)];case"GatherNd":var B=fA("x",e,t,n),V=fA("indices",e,t,n);return[r.gatherND(B,V)];case"SparseToDense":var U=fA("sparseIndices",e,t,n),W=fA("outputShape",e,t,n),j=fA("sparseValues",e,t,n),G=fA("defaultValue",e,t,n);return[r.sparseToDense(U,j,W,j.dtype===G.dtype?G:r.cast(G,j.dtype))];case"TensorScatterUpdate":var H=fA("indices",e,t,n),q=fA("values",e,t,n),$=fA("tensor",e,t,n);return[r.tensorScatterUpdate($,H,q)];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},_R=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:x;switch(e.op){case"SparseFillEmptyRows":var a=r.sparse.sparseFillEmptyRows(fA("indices",e,t,n),fA("values",e,t,n),fA("denseShape",e,t,n),fA("defaultValue",e,t,n));return[a.outputIndices,a.outputValues,a.emptyRowIndicator,a.reverseIndexMap];case"SparseReshape":var i=r.sparse.sparseReshape(fA("inputIndices",e,t,n),fA("inputShape",e,t,n),fA("newShape",e,t,n));return[i.outputIndices,i.outputShape];case"SparseSegmentMean":return[r.sparse.sparseSegmentMean(fA("data",e,t,n),fA("indices",e,t,n),fA("segmentIds",e,t,n))];case"SparseSegmentSum":return[r.sparse.sparseSegmentSum(fA("data",e,t,n),fA("indices",e,t,n),fA("segmentIds",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},AR=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:x;switch(e.op){case"FFT":return[r.fft(fA("x",e,t,n))];case"IFFT":return[r.ifft(fA("x",e,t,n))];case"RFFT":return[r.rfft(fA("x",e,t,n))];case"IRFFT":return[r.irfft(fA("x",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},RR=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:x;switch(e.op){case"StaticRegexReplace":return[r.string.staticRegexReplace(fA("input",e,t,n),fA("pattern",e,t,n),fA("rewrite",e,t,n),fA("replaceGlobal",e,t,n))];case"StringNGrams":var a=r.string.stringNGrams(fA("data",e,t,n),fA("dataSplits",e,t,n),fA("separator",e,t,n),fA("nGramWidths",e,t,n),fA("leftPad",e,t,n),fA("rightPad",e,t,n),fA("padWidth",e,t,n),fA("preserveShortSequences",e,t,n));return[a.nGrams,a.nGramsSplits];case"StringSplit":var i=r.string.stringSplit(fA("input",e,t,n),fA("delimiter",e,t,n),fA("skipEmpty",e,t,n));return[i.indices,i.values,i.shape];case"StringToHashBucketFast":return[r.string.stringToHashBucketFast(fA("input",e,t,n),fA("numBuckets",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},DR=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:x;switch(e.op){case"Cast":return[r.cast(fA("x",e,t,n),fA("dtype",e,t,n))];case"ExpandDims":var a=fA("axis",e,t,n);return[r.expandDims(fA("x",e,t,n),a)];case"Squeeze":var i=fA("axis",e,t,n);return[r.squeeze(fA("x",e,t,n),i)];case"Reshape":return[r.reshape(fA("x",e,t,n),fA("shape",e,t,n))];case"MirrorPad":return[r.mirrorPad(fA("x",e,t,n),fA("padding",e,t,n),fA("mode",e,t,n))];case"PadV2":case"Pad":return[r.pad(fA("x",e,t,n),fA("padding",e,t,n),fA("constantValue",e,t,n))];case"SpaceToBatchND":var o=fA("blockShape",e,t,n),s=fA("paddings",e,t,n);return[r.spaceToBatchND(fA("x",e,t,n),o,s)];case"BatchToSpaceND":var u=fA("blockShape",e,t,n),c=fA("crops",e,t,n);return[r.batchToSpaceND(fA("x",e,t,n),u,c)];case"DepthToSpace":var l=fA("blockSize",e,t,n),d=fA("dataFormat",e,t,n).toUpperCase();return[r.depthToSpace(fA("x",e,t,n),l,d)];case"BroadcastTo":return[r.broadcastTo(fA("x",e,t,n),fA("shape",e,t,n))];case"BroadcastArgs":return[r.broadcastArgs(fA("s0",e,t,n),fA("s1",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}};function OR(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:rm,i=function(e,t,n){switch(e.category){case"arithmetic":return a((function(){return tR(e,t,n)}));case"basic_math":return a((function(){return nR(e,t,n)}));case"control":return hR(e,t,n);case"convolution":return a((function(){return vR(e,t,n)}));case"creation":return a((function(){return mR(e,t,n)}));case"dynamic":return yR(e,t,n);case"evaluation":return a((function(){return bR(e,t,n)}));case"image":return a((function(){return IR(e,t,n)}));case"graph":return a((function(){return kR(e,t,n)}));case"logical":return a((function(){return SR(e,t,n)}));case"matrices":return a((function(){return TR(e,t,n)}));case"normalization":return a((function(){return ER(e,t,n)}));case"ragged":return a((function(){return NR(e,t,n)}));case"reduction":return a((function(){return CR(e,t,n)}));case"slice_join":return a((function(){return ZR(e,t,n)}));case"sparse":return a((function(){return _R(e,t,n)}));case"spectral":return a((function(){return AR(e,t,n)}));case"string":return a((function(){return RR(e,t,n)}));case"transformation":return a((function(){return DR(e,t,n)}));case"hash_table":return xR(e,t,n,r);case"custom":var i=dA(e.op);if(i&&i.customExecutor)return i.customExecutor(new eR(e,t,n));throw TypeError("Custom op ".concat(e.op," is not registered."));default:throw TypeError("Unknown op '".concat(e.op,"'. File an issue at ")+"https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()")}}(e,t,n);return Xc(i)?i.then((function(e){return[].concat(e)})):[].concat(i)}var LR=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4?arguments[4]:void 0;(0,Se.Z)(this,e),this.weightMap=t,this.tensorArrayMap=n,this.tensorListMap=r,this.functionMap=a,this.parseNodeNameCache=i,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}return(0,Te.Z)(e,[{key:"newFrame",value:function(e,t){return{id:e,frameName:t,iterationId:0}}},{key:"currentContext",get:function(){return this.contexts},set:function(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}},{key:"currentContextId",get:function(){return this._currentContextIds[0]}},{key:"currentContextIds",get:function(){return this._currentContextIds}},{key:"generateCurrentContextIds",value:function(){for(var e=[],t=0;t<this.contexts.length-1;t++){var n=this.contexts.slice(0,this.contexts.length-t);e.push(this.contextIdforContexts(n))}e.push(""),this._currentContextIds=e}},{key:"contextIdforContexts",value:function(e){return e?e.map((function(e){return 0===e.id&&0===e.iterationId?"":"".concat(e.frameName,"-").concat(e.iterationId)})).join("/"):""}},{key:"enterFrame",value:function(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}},{key:"exitFrame",value:function(){if(!(this.contexts&&this.contexts.length>1))throw new Error("Cannot exit frame, the context is empty");this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift()}},{key:"nextIteration",value:function(){if(!(this.contexts&&this.contexts.length>0))throw new Error("Cannot increase frame iteration, the context is empty");this.contexts=this.contexts.slice(),this.lastId++;var e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}},{key:"getWeight",value:function(e){return this.weightMap[e]}},{key:"addTensorArray",value:function(e){this.tensorArrayMap[e.id]=e}},{key:"getTensorArray",value:function(e){return this.tensorArrayMap[e]}},{key:"addTensorList",value:function(e){this.tensorListMap[e.id]=e}},{key:"getTensorList",value:function(e){return this.tensorListMap[e]}},{key:"dispose",value:function(e){for(var t in this.tensorArrayMap)this.tensorArrayMap[t].clearAndClose(e);for(var n in this.tensorListMap)this.tensorListMap[n].clearAndClose(e)}}]),e}();function FR(e,t,n,r){var a=new Set,i=[],o=null,s=null,u=new Set,c=new Set(Object.keys(e).map((function(e){return gA(e)[0]})));r=r||[];for(var l=new Set(r.map((function(e){return gA(e.name)[0]}))),d=(0,me.Z)(t);d.length>0;){var f=d.pop();(UR(f)||WR(f)||jR(f))&&null==o&&(s=(o=f).children.map((function(e){return e.name})).filter((function(e){return a.has(e)}))),a.add(f.name),null==n[f.name]&&(c.has(f.name)||l.has(f.name)||(0!==f.inputs.length?f.inputs.forEach((function(e){u.has(e.name)||(u.add(e.name),d.push(e))})):i.push(f.name)))}return{inputs:e,outputs:t,usedNodes:a,missingInputs:i,dynamicNode:o,syncInputs:s}}function MR(e,t){var n=t.usedNodes,r=t.inputs,a=Object.keys(r).map((function(e){return gA(e)[0]})).map((function(t){return e.nodes[t]})),i=e.initNodes||[],o=function(e){return n.has("string"===typeof e?e:e.name)};function s(e){return(0,me.Z)(new Map(e.map((function(e){return[e.name,e]}))).values())}var u,c=s([].concat((0,me.Z)(a),(0,me.Z)(e.weights),(0,me.Z)(i))).filter(o),l=s([].concat((0,me.Z)(c),(0,me.Z)(Object.values(e.nodes)))).filter(o),d=new Map(l.map((function(e){return[e.name,e]}))),f={},h=(0,Ht.Z)(l);try{for(h.s();!(u=h.n()).done;){var p=u.value;f[p.name]=f[p.name]||0;var v,m=(0,Ht.Z)(p.children);try{for(m.s();!(v=m.n()).done;){var g=v.value;o(g)||(f[g.name]=Number.POSITIVE_INFINITY),f[g.name]=(f[g.name]||0)+1}}catch(yhe){m.e(yhe)}finally{m.f()}}}catch(yhe){h.e(yhe)}finally{h.f()}for(var y=Object.entries(f).filter((function(e){return 0===(0,ge.Z)(e,2)[1]})).map((function(e){return(0,ge.Z)(e,1)[0]})),b=(0,me.Z)(y);y.length>0;){var k,w=y.pop(),x=d.get(w),I=(0,Ht.Z)(x.children.filter(o));try{for(I.s();!(k=I.n()).done;){var S=k.value;0===--f[S.name]&&(b.push(S.name),y.push(S.name))}}catch(yhe){I.e(yhe)}finally{I.f()}}var T=function(e,t){var n=new Map(e.map((function(e){return[e.name,e]}))),r=t.map((function(e){return e.name})),a=new Set(r);for(;r.length>0;){var i,o=r.pop(),s=n.get(o),u=(0,Ht.Z)(s.children);try{for(u.s();!(i=u.n()).done;){var c=i.value;n.has(c.name)&&!a.has(c.name)&&(a.add(c.name),r.push(c.name))}}catch(yhe){u.e(yhe)}finally{u.f()}}var l=e.filter((function(e){return a.has(e.name)}));return l}(b.map((function(e){return d.get(e)})),c);return function(e,t){var n,r=new Map(e.map((function(e,t){return[e.name,t]}))),a=new Set(t.map((function(e){return e.name}))),i=function(e){return a.has("string"===typeof e?e:e.name)},o=new Set(e.map((function(e){return e.name}))),s=function(e){return o.has("string"===typeof e?e:e.name)},u=(0,Ht.Z)(e);try{for(u.s();!(n=u.n()).done;){var c,l=n.value,d=(0,Ht.Z)(l.children.filter(s));try{for(d.s();!(c=d.n()).done;){var f=c.value;if(!r.has(f.name))throw new PR("Child ".concat(f.name," of node ").concat(l.name," is unreachable."));if(r.get(l.name)>r.get(f.name))throw new PR("Node ".concat(l.name," is scheduled to run after its child ").concat(f.name,"."))}}catch(yhe){d.e(yhe)}finally{d.f()}if(!i(l)){var h,p=(0,Ht.Z)(l.inputs);try{for(p.s();!(h=p.n()).done;){var v=h.value;if(!r.has(v.name))throw new PR("Input ".concat(v.name," of node ").concat(l.name," is unreachable."));if(r.get(v.name)>r.get(l.name))throw new PR("Node ".concat(l.name," is scheduled to run before its input ").concat(v.name,"."))}}catch(yhe){p.e(yhe)}finally{p.f()}}}}catch(yhe){u.e(yhe)}finally{u.f()}}(T,c),T}var PR=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){return(0,Se.Z)(this,n),t.call(this,"NodesExecutionOrderError: ".concat(e))}return(0,Te.Z)(n)}((0,lT.Z)(Error));var zR=new Set(["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"]),BR=new Set(["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"]),VR=new Set(["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"]);function UR(e){return zR.has(e.op)}function WR(e){return BR.has(e.op)}function jR(e){return VR.has(e.op)}var GR=function(){function e(t,n){var r=this;(0,Se.Z)(this,e),this.graph=t,this.parent=n,this.compiledMap=new Map,this.parseNodeNameCache=new Map,this._weightMap={},this.SEPARATOR=",",this._functions={},this._functionExecutorMap={},this.keepIntermediateTensors=!1,this._outputs=t.outputs,this._inputs=t.inputs,this._initNodes=t.initNodes,this._signature=t.signature,this._functions=t.functions,null!=t.functions&&Object.keys(t.functions).forEach((function(n){r._functionExecutorMap[n]=new e(t.functions[n],r)}))}return(0,Te.Z)(e,[{key:"weightIds",get:function(){return this.parent?this.parent.weightIds:this._weightIds}},{key:"functionExecutorMap",get:function(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}},{key:"weightMap",get:function(){return this.parent?this.parent.weightMap:this._weightMap},set:function(e){var t,n=Object.keys(e).map((function(t){return e[t].map((function(e){return e.id}))}));this._weightIds=(t=[]).concat.apply(t,(0,me.Z)(n)),this._weightMap=e}},{key:"resourceManager",set:function(e){this._resourceManager=e}},{key:"inputs",get:function(){return this._inputs.map((function(e){return{name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}}))}},{key:"outputs",get:function(){return this._outputs.map((function(e){return{name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}}))}},{key:"inputNodes",get:function(){return this._inputs.map((function(e){return e.signatureKey||e.name}))}},{key:"outputNodes",get:function(){return this._outputs.map((function(e){var t=e.signatureKey||e.name;return e.defaultOutput?"".concat(t,":").concat(e.defaultOutput):t}))}},{key:"functions",get:function(){var e=this;return Object.keys(this._functions).reduce((function(t,n){return t[n]=e._functions[n].signature,t}),{})}},{key:"getCompilationKey",value:function(e,t){var n=e.map((function(e){return e.name})).sort(),r=t.map((function(e){return e.name})).sort();return n.join(this.SEPARATOR)+"--"+r.join(this.SEPARATOR)}},{key:"compile",value:function(e,t){var n=FR(e,t,this.weightMap,this._initNodes),r=n.missingInputs,a=n.dynamicNode,i=n.syncInputs;if(null!=a)throw new Error("This execution contains the node '".concat(a.name,"', which has ")+"the dynamic op '".concat(a.op,"'. Please use ")+"model.executeAsync() instead. Alternatively, to avoid the "+"dynamic ops, specify the inputs [".concat(i,"]"));if(r.length>0){var o=t.map((function(e){return e.name})),s=Object.keys(e);throw new Error("Cannot compute the outputs [".concat(o,"] from the provided inputs ")+"[".concat(s,"]. Missing the following inputs: [").concat(r,"]"))}var u=MR(this.graph,n),c=function(e){for(var t=new Map(e.map((function(e,t){return[e.name,t]}))),n=Number.MAX_SAFE_INTEGER,r=e.map((function(e,t){return UR(e)?n:t})),a=function(e){var n=r[t.get(e.name)];return null==n?-1:n},i=e.map((function(e,t){return e.children.map(a).reduce((function(e,t){return Math.max(e,t)}),r[t])})),o=new Map,s=0;s<e.length;++s){var u=i[s];if(u!==n){var c=e[s],l=e[u];o.has(l.name)||o.set(l.name,[]),o.get(l.name).push(c.name)}}return o}(u);return{orderedNodes:u,nodeLiveUntilMap:c}}},{key:"cloneAndKeepTensor",value:function(e){if(null==e)return null;var t=e.clone();return im(t),t}},{key:"cloneTensorList",value:function(e){var t=this;return e?e.map((function(e){return t.cloneAndKeepTensor(e)})):null}},{key:"cloneTensorMap",value:function(e){var t=this;return Object.fromEntries(Object.entries(e).map((function(e){var n=(0,ge.Z)(e,2),r=n[0],a=n[1];return[r,t.cloneTensorList(a)]})))}},{key:"execute",value:function(e,t){var n=this;this.disposeIntermediateTensors(),e=this.mapInputs(e);var r=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t);var a=r.map((function(e){return n.graph.nodes[gA(e)[0]]})),i=t.map((function(e){return gA(e)[0]})),o=new Set(i),s=i.map((function(e){return n.graph.nodes[e]}));0===s.length&&(s=this._outputs);var u=this.getCompilationKey(a,s),c=this.compiledMap.get(u);null==c&&(c=this.compile(e,s),this.compiledMap.set(u,c));try{this.keepIntermediateTensors=el().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(f){this.keepIntermediateTensors=!1,console.warn(f.message)}var l={},d={};return rm((function(){var r=new LR(n.weightMap,l,d,n.functionExecutorMap,n.parseNodeNameCache),a=Object.assign({},n.weightMap);n.keepIntermediateTensors&&(n.clonedTensorsMap=n.cloneTensorMap(n.weightMap)),Object.keys(e).forEach((function(t){var i=gA(t,r),o=(0,ge.Z)(i,2),s=o[0],u=[];u[o[1]]=e[t],a[s]=u,n.keepIntermediateTensors&&(n.clonedTensorsMap[s]=n.cloneTensorList(u))}));var i,s=n.getFrozenTensorIds(a),u=c,f=u.orderedNodes,h=u.nodeLiveUntilMap,p=(0,Ht.Z)(f);try{for(p.s();!(i=p.n()).done;){var v=i.value;if(!a[v.name]){var m=OR(v,a,r,n._resourceManager);if(Xc(m))throw new Error("The execution of the op '".concat(v.op,"' returned a promise. ")+"Please use model.executeAsync() instead.");a[v.name]=m,n.keepIntermediateTensors&&(n.clonedTensorsMap[v.name]=n.cloneTensorList(m)),n.checkTensorForDisposalWithNodeLiveUntilInfo(v,a,r,s,o,h.get(v.name))}}}catch(yhe){p.e(yhe)}finally{p.f()}return null==n.parent&&r.dispose(s),t.map((function(e){return hA(e,a,r)}))}))}},{key:"getFrozenTensorIds",value:function(e){var t=[].concat.apply([],Object.keys(e).map((function(t){return e[t]})).map((function(e){return e.map((function(e){return e.id}))})));return new Set(t)}},{key:"checkTensorForDisposal",value:function(e,t,n,r,a,i,o){if(!UR(t)&&!i.has(e)){var s,u=(0,Ht.Z)(n[e]);try{for(u.s();!(s=u.n()).done;){var c=s.value;null!=c&&(o[c.id]=(o[c.id]||0)+t.children.length)}}catch(yhe){u.e(yhe)}finally{u.f()}var l,d=(0,Ht.Z)(t.inputs);try{for(d.s();!(l=d.n()).done;){var f=l.value;if(!UR(f)){var h=pA(f.name,n,r);if(null!=h){var p,v=(0,Ht.Z)(h);try{for(v.s();!(p=v.n()).done;){var m=p.value;if(m&&!m.kept&&!a.has(m.id)){var g=o[m.id];1===g?(m.dispose(),delete o[m.id]):null!=g&&o[m.id]--}}}catch(yhe){v.e(yhe)}finally{v.f()}}}}}catch(yhe){d.e(yhe)}finally{d.f()}}}},{key:"checkTensorForDisposalWithNodeLiveUntilInfo",value:function(e,t,n,r,a,i){if(!UR(e)&&!a.has(e.name)&&null!=i){var o,s=(0,Ht.Z)(i);try{for(s.s();!(o=s.n()).done;){var u,c=pA(o.value,t,n),l=(0,Ht.Z)(c);try{for(l.s();!(u=l.n()).done;){var d=u.value;!d||d.kept||r.has(d.id)||d.dispose()}}catch(yhe){l.e(yhe)}finally{l.f()}}}catch(yhe){s.e(yhe)}finally{s.f()}}}},{key:"executeAsync",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t,n){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._executeAsync(t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"disposeIntermediateTensors",value:function(){this.clonedTensorsMap&&(Object.values(this.clonedTensorsMap).forEach((function(e){var t,n=(0,Ht.Z)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;r&&!r.isDisposed&&r.dispose()}}catch(yhe){n.e(yhe)}finally{n.f()}})),this.clonedTensorsMap=null)}},{key:"getIntermediateTensors",value:function(){return this.clonedTensorsMap}},{key:"_executeAsync",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t,n){var r,a,i,o,s,u,c,l,d,f=arguments;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=f.length>2&&void 0!==f[2]&&f[2],a=f.length>3&&void 0!==f[3]?f[3]:{},i=f.length>4&&void 0!==f[4]?f[4]:{},this.disposeIntermediateTensors(),r||(t=this.mapInputs(t),this.checkInputs(t),this.checkInputShapeAndType(t),n=this.mapOutputs(n),this.checkOutputs(n));try{this.keepIntermediateTensors=el().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(h){this.keepIntermediateTensors=!1,console.warn(h.message)}return o=new LR(this.weightMap,a,i,this.functionExecutorMap,this.parseNodeNameCache),this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap)),e.next=10,this.executeWithControlFlow(t,o,n,r);case 10:return s=e.sent,u=n.map((function(e){return hA(e,s,o)})),c=u.map((function(e){return e.id})),l=Object.keys(t).map((function(e){return t[e].id})),d=new Set([].concat((0,me.Z)(c),(0,me.Z)(l),(0,me.Z)(this.weightIds))),Object.values(s).forEach((function(e){e.forEach((function(e){!e||e.isDisposed||d.has(e.id)||e.dispose()}))})),null==this.parent&&o.dispose(d),e.abrupt("return",u);case 18:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"executeFunctionAsync",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t,n,r){var a,i=this;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.reduce((function(e,t,n){return e[i.inputs[n].name]=t,e}),{}),e.abrupt("return",this._executeAsync(a,this.outputNodes,!0,n,r));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"executeWithControlFlow",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t,n,r,a){var i,o,s,u,c,l,d,f,h,p,v,m,g,y,b,k,w,x,I=this;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=Object.keys(t),o=i.map((function(e){return I.graph.nodes[gA(e)[0]]})),s=r.map((function(e){return gA(e)[0]})),u=new Set(s),0===(c=s.map((function(e){return I.graph.nodes[e]}))).length&&(c=this._outputs),l=FR(t,c,this.weightMap,this._initNodes),d=l.usedNodes,f=l.missingInputs,h=l.dynamicNode,p=l.syncInputs,v=[].concat((0,me.Z)(o),(0,me.Z)(this.graph.weights),(0,me.Z)(this._initNodes||[])).map((function(e){return{node:e,contexts:n.currentContext}})),m=Object.assign({},this.weightMap),Object.keys(t).forEach((function(e){var n=gA(e),r=(0,ge.Z)(n,2),a=r[0],i=[];i[r[1]]=t[e],m[a]=i})),g={},y=this.getFrozenTensorIds(m),b={};case 13:if(!(v.length>0)){e.next=19;break}return k=this.processStack(o,v,n,m,b,y,u,g,d),e.next=17,Promise.all(k);case 17:e.next=13;break;case 19:if(null!=h||a||console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead."),!((w=c.filter((function(e){return!UR(e)&&!hA(e.name,m,n)})).map((function(e){return e.name}))).length>0)){e.next=25;break}throw x="",null!=h&&(x="Alternatively, to avoid the dynamic ops, use model.execute() "+"and specify the inputs [".concat(p,"]")),new Error("Cannot compute the outputs [".concat(w,"] from the provided ")+"inputs [".concat(i,"]. Consider providing the following inputs: ")+"[".concat(f,"]. ").concat(x));case 25:return e.abrupt("return",m);case 26:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"processStack",value:function(e,t,n,r,a,i,o,s,u){for(var c=this,l=[],d=function(){var e=t.pop();n.currentContext=e.contexts;var d="";if("Enter"===e.node.op&&fA("isConstant",e.node,r,n)){var f=vA(e.node.name,n),h=(0,ge.Z)(f,1);d=h[0]}if(null==r[e.node.name]){var p=OR(e.node,r,n,c._resourceManager);if(!d){var v=vA(e.node.name,n),m=(0,ge.Z)(v,1);d=m[0]}var g=n.currentContext;Xc(p)?l.push(p.then((function(l){return r[d]=l,c.keepIntermediateTensors&&(c.clonedTensorsMap[d]=c.cloneTensorList(l)),n.currentContext=g,c.checkTensorForDisposal(d,e.node,r,n,i,o,s),c.processChildNodes(e.node,t,n,r,a,u),l}))):(r[d]=p,c.keepIntermediateTensors&&(c.clonedTensorsMap[d]=c.cloneTensorList(p)),c.checkTensorForDisposal(d,e.node,r,n,i,o,s),c.processChildNodes(e.node,t,n,r,a,u))}else c.processChildNodes(e.node,t,n,r,a,u)};t.length>0;)d();return l}},{key:"processChildNodes",value:function(e,t,n,r,a,i){e.children.forEach((function(e){var o=vA(e.name,n),s=(0,ge.Z)(o,1)[0];!a[s]&&i.has(e.name)&&("Merge"===e.op?e.inputNames.some((function(e){return!!hA(e,r,n)}))&&(a[s]=!0,t.push({contexts:n.currentContext,node:e})):e.inputNames.every((function(e){return!!hA(e,r,n)}))&&(a[s]=!0,t.push({contexts:n.currentContext,node:e})))}))}},{key:"dispose",value:function(){var e=this;Object.keys(this.weightMap).forEach((function(t){return e.weightMap[t].forEach((function(e){return e.dispose()}))}))}},{key:"checkInputShapeAndType",value:function(e){var t=this;Object.keys(e).forEach((function(n){var r=e[n],a=gA(n),i=(0,ge.Z)(a,1)[0],o=t.graph.nodes[i];if(o.attrParams.shape&&o.attrParams.shape.value){var s=o.attrParams.shape.value;kc(s.length===r.shape.length&&r.shape.every((function(e,t){return-1===s[t]||s[t]===e})),(function(){return"The shape of dict['".concat(o.name,"'] provided in ")+"model.execute(dict) must be [".concat(s,"], but was ")+"[".concat(r.shape,"]")}))}o.attrParams.dtype&&o.attrParams.dtype.value&&kc(r.dtype===o.attrParams.dtype.value,(function(){return"The dtype of dict['".concat(o.name,"'] provided in ")+"model.execute(dict) must be "+"".concat(o.attrParams.dtype.value,", but was ").concat(r.dtype)}))}))}},{key:"mapInputs",value:function(e){var t,n,r={};for(var a in e){var i=null===(n=null===(t=this._signature)||void 0===t?void 0:t.inputs)||void 0===n?void 0:n[a];null!=i?r[i.name]=e[a]:r[a]=e[a]}return r}},{key:"checkInputs",value:function(e){var t=this,n=Object.keys(e).filter((function(e){var n=gA(e),r=(0,ge.Z)(n,1)[0];return null==t.graph.nodes[r]}));if(n.length>0)throw new Error("The dict provided in model.execute(dict) has "+"keys: [".concat(n,"] that are not part of graph"))}},{key:"mapOutputs",value:function(e){var t=this;return e.map((function(e){var n,r,a=null===(r=null===(n=t._signature)||void 0===n?void 0:n.outputs)||void 0===r?void 0:r[e];return null!=a?a.name:e}),{})}},{key:"checkOutputs",value:function(e){var t=this;e.forEach((function(e){var n=gA(e),r=(0,ge.Z)(n,1)[0];if(!t.graph.nodes[r])throw new Error("The output '".concat(e,"' is not found in the graph"))}))}}]),e}(),HR=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,Se.Z)(this,e),this.hashTableNameToHandle=t,this.hashTableMap=n}return(0,Te.Z)(e,[{key:"addHashTable",value:function(e,t){this.hashTableNameToHandle[e]=t.handle,this.hashTableMap[t.id]=t}},{key:"getHashTableHandleByName",value:function(e){return this.hashTableNameToHandle[e]}},{key:"getHashTableById",value:function(e){return this.hashTableMap[e]}},{key:"dispose",value:function(){for(var e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(var t in this.hashTableNameToHandle)this.hashTableNameToHandle[t].dispose(),delete this.hashTableNameToHandle[t]}}]),e}(),qR="?tfjs-format=file",$R="model.json",KR=function(){function t(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;(0,Se.Z)(this,t),this.modelUrl=n,this.loadOptions=r,this.version="n/a",this.io=a,null==r&&(this.loadOptions={}),this.resourceManager=new HR}return(0,Te.Z)(t,[{key:"modelVersion",get:function(){return this.version}},{key:"inputNodes",get:function(){return this.executor.inputNodes}},{key:"outputNodes",get:function(){return this.executor.outputNodes}},{key:"inputs",get:function(){return this.executor.inputs}},{key:"outputs",get:function(){return this.executor.outputs}},{key:"weights",get:function(){return this.executor.weightMap}},{key:"metadata",get:function(){return this.artifacts.userDefinedMetadata}},{key:"modelSignature",get:function(){return this.signature}},{key:"modelStructuredOutputKeys",get:function(){return this.structuredOutputKeys}},{key:"findIOHandler",value:function(){var e=this.modelUrl;if(null!=e.load)this.handler=e;else if(null!=this.loadOptions.requestInit)this.handler=this.io.browserHTTPRequest(e,this.loadOptions);else{var t=this.io.getLoadHandlers(e,this.loadOptions);if(0===t.length)t.push(this.io.browserHTTPRequest(e,this.loadOptions));else if(t.length>1)throw new Error("Found more than one (".concat(t.length,") load handlers for ")+"URL '".concat([e],"'"));this.handler=t[0]}}},{key:"load",value:function(){var e=this;if(this.findIOHandler(),null==this.handler.load)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");var t=this.handler.load();return Xc(t)?t.then((function(t){return e.loadSync(t)})):this.loadSync(t)}},{key:"loadSync",value:function(e){this.artifacts=e;var t=this.artifacts.modelTopology,n=this.artifacts.signature;if(null!=this.artifacts.userDefinedMetadata){var r=this.artifacts.userDefinedMetadata;null!=r.signature&&(n=r.signature),null!=r.structuredOutputKeys&&(this.structuredOutputKeys=r.structuredOutputKeys)}this.signature=n,this.version="".concat(t.versions.producer,".").concat(t.versions.minConsumer);var a=this.io.decodeWeights(this.artifacts.weightData,this.artifacts.weightSpecs);if(this.executor=new GR(zA.Instance.transformGraph(t,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(a),this.executor.resourceManager=this.resourceManager,null!=e.modelInitializer&&null!=e.modelInitializer.node){var i=zA.Instance.transformGraph(e.modelInitializer);this.initializer=new GR(i),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializerSignature=e.initializerSignature}return!0}},{key:"save",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t,n){var r;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!==typeof t){e.next=9;break}if(0!==(r=this.io.getSaveHandlers(t)).length){e.next=6;break}throw new Error("Cannot find any save handlers for URL '".concat(t,"'"));case 6:if(!(r.length>1)){e.next=8;break}throw new Error("Found more than one (".concat(r.length,") save handlers for ")+"URL '".concat(t,"'"));case 8:t=r[0];case 9:if(null!=t.save){e.next=11;break}throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");case 11:return e.abrupt("return",t.save(this.artifacts));case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"addStructuredOutputNames",value:function(e){var t=this;if(this.structuredOutputKeys){var n={};return(e instanceof ap?[e]:e).forEach((function(e,r){return n[t.structuredOutputKeys[r]]=e})),n}return e}},{key:"predict",value:function(e,t){var n=this.execute(e,this.outputNodes);return this.addStructuredOutputNames(n)}},{key:"predictAsync",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t,n){var r;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.executeAsync(t,this.outputNodes);case 2:return r=e.sent,e.abrupt("return",this.addStructuredOutputNames(r));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"normalizeInputs",value:function(e){var t,n=this;if(!(e instanceof ap)&&!Array.isArray(e)){var r=null===(t=this.signature)||void 0===t?void 0:t.inputs;if(null!=r)for(var a in r){var i=r[a];null!=i.resourceId&&(e[a]=this.resourceIdToCapturedInput[i.resourceId])}return e}e=Array.isArray(e)?e:[e];var o=Object.keys(this.resourceIdToCapturedInput).length;if(e.length+o!==this.inputNodes.length)throw new Error("Input tensor count mismatch, the graph model has ".concat(this.inputNodes.length-o," non-resource placeholders, while there are ").concat(e.length," input tensors provided."));var s=0;return this.inputNodes.reduce((function(t,r){var a,i,o,u=null===(o=null===(i=null===(a=n.signature)||void 0===a?void 0:a.inputs)||void 0===i?void 0:i[r])||void 0===o?void 0:o.resourceId;return t[r]=null!=u?n.resourceIdToCapturedInput[u]:e[s++],t}),{})}},{key:"normalizeOutputs",value:function(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}},{key:"executeInitializerGraph",value:function(){return null==this.initializer?[]:null==this.initializerSignature?this.initializer.execute({},[]):this.initializer.execute({},Object.keys(this.initializerSignature.outputs))}},{key:"executeInitializerGraphAsync",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.initializer){e.next=2;break}return e.abrupt("return",[]);case 2:if(null!=this.initializerSignature){e.next=6;break}return e.abrupt("return",this.initializer.executeAsync({},[]));case 6:return e.abrupt("return",this.initializer.executeAsync({},Object.keys(this.initializerSignature.outputs)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setResourceIdToCapturedInput",value:function(e){if(this.resourceIdToCapturedInput={},this.initializerSignature)for(var t=this.initializerSignature.outputs,n=Object.keys(t),r=0;r<n.length;r++){var a=t[n[r]];this.resourceIdToCapturedInput[a.resourceId]=e[r]}}},{key:"execute",value:function(e,t){null==this.resourceIdToCapturedInput&&this.setResourceIdToCapturedInput(this.executeInitializerGraph()),e=this.normalizeInputs(e),t=this.normalizeOutputs(t);var n=this.executor.execute(e,t);return n.length>1?n:n[0]}},{key:"executeAsync",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t,n){var r;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.resourceIdToCapturedInput){e.next=6;break}return e.t0=this,e.next=4,this.executeInitializerGraphAsync();case 4:e.t1=e.sent,e.t0.setResourceIdToCapturedInput.call(e.t0,e.t1);case 6:return t=this.normalizeInputs(t),n=this.normalizeOutputs(n),e.next=10,this.executor.executeAsync(t,n);case 10:return r=e.sent,e.abrupt("return",r.length>1?r:r[0]);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getIntermediateTensors",value:function(){return this.executor.getIntermediateTensors()}},{key:"disposeIntermediateTensors",value:function(){this.executor.disposeIntermediateTensors()}},{key:"convertTensorMapToTensorsMap",value:function(e){return Object.keys(e).reduce((function(t,n){return t[n]=[e[n]],t}),{})}},{key:"dispose",value:function(){this.executor.dispose(),this.initializer&&(this.initializer.dispose(),this.resourceIdToCapturedInput&&am(this.resourceIdToCapturedInput)),this.resourceManager.dispose()}}]),t}();function XR(e){return YR.apply(this,arguments)}function YR(){return YR=(0,ke.Z)((0,be.Z)().mark((function t(n){var r,a,i,o=arguments;return(0,be.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=o.length>1&&void 0!==o[1]?o[1]:{},a=o.length>2&&void 0!==o[2]?o[2]:e,null!=n){t.next=4;break}throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");case 4:return null==r&&(r={}),r.fromTFHub&&"string"===typeof n&&(n=QR(n)),i=new KR(n,r,a),t.next=9,i.load();case 9:return t.abrupt("return",i);case 10:case"end":return t.stop()}}),t)}))),YR.apply(this,arguments)}function QR(e){return e.endsWith("/")||(e+="/"),"".concat(e).concat($R).concat(qR)}function JR(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Map,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Set;if(null==e)return null;if("function"===typeof Blob&&e instanceof Blob)return e.slice();if(r.has(e))throw new Error("Circular references are not supported.");if(n.has(e))return n.get(e);var a=t(e);if(a.recurse&&null!==a.value)throw new Error("A deep map function may not return both a value and recurse=true.");if(a.recurse){if(rD(e)){var i=Array.isArray(e)?[]:{};for(var o in r.add(e),e){var s=JR(e[o],t,n,r);i[o]=s}return r.delete(e),e.__proto__&&(i.__proto__=e.__proto__),i}throw new Error("Can't recurse into non-iterable type: ".concat(e))}return n.set(e,a.value),a.value}function eD(e){return tD(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:nD)}function tD(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set,r=e[0];if(n.has(r))throw new Error("Circular references are not supported.");var a=t(e);if(a.recurse&&null!==a.value)throw new Error("A deep zip function may not return both a value and recurse=true.");if(a.recurse){if(rD(r)){var i=Array.isArray(r)?[]:{};n.add(r);var o=function(r){var a=e.map((function(e){return e[r]})),o=tD(a,t,n);i[r]=o};for(var s in r)o(s);return n.delete(r),i}throw new Error("Can't recurse into non-iterable type: ".concat(r))}return a.value}function nD(e){return null===e?null:rD(e[0])?{value:null,recurse:!0}:{value:e,recurse:!1}}function rD(e){var t=!1;el().get("IS_BROWSER")?t=e instanceof TextDecoder:t=e instanceof n(4977).StringDecoder;return null!=e&&!ArrayBuffer.isView(e)&&(Array.isArray(e)||"object"===typeof e&&!(e instanceof ap)&&!(e instanceof Promise)&&!t)}function aD(e){return function(e,t){return JR(e,t)}(e,iD)}function iD(e){return e instanceof ap?{value:e.clone(),recurse:!1}:rD(e)?{value:null,recurse:!0}:{value:e,recurse:!1}}var oD=function(){function e(t){if((0,Se.Z)(this,e),this.capacity=t,this.begin=0,this.end=0,null==t)throw new RangeError("Can't create a ring buffer of unknown capacity.");if(t<1)throw new RangeError("Can't create ring buffer of capacity < 1.");this.data=new Array(t),this.doubledCapacity=2*t}return(0,Te.Z)(e,[{key:"wrap",value:function(e){for(;e<0;)e+=this.doubledCapacity;return e%this.doubledCapacity}},{key:"get",value:function(e){if(e<0)throw new RangeError("Can't get item at a negative index.");return this.data[e%this.capacity]}},{key:"set",value:function(e,t){if(e<0)throw new RangeError("Can't set item at a negative index.");this.data[e%this.capacity]=t}},{key:"length",value:function(){var e=this.end-this.begin;return e<0&&(e=this.doubledCapacity+e),e}},{key:"isFull",value:function(){return this.length()===this.capacity}},{key:"isEmpty",value:function(){return 0===this.length()}},{key:"push",value:function(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.set(this.end,e),this.end=this.wrap(this.end+1)}},{key:"pushAll",value:function(e){var t,n=(0,Ht.Z)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.push(r)}}catch(yhe){n.e(yhe)}finally{n.f()}}},{key:"pop",value:function(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");this.end=this.wrap(this.end-1);var e=this.get(this.end);return this.set(this.end,void 0),e}},{key:"unshift",value:function(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.begin=this.wrap(this.begin-1),this.set(this.begin,e)}},{key:"shift",value:function(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");var e=this.get(this.begin);return this.set(this.begin,void 0),this.begin=this.wrap(this.begin+1),e}},{key:"shuffleExcise",value:function(e){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");var t=this.wrap(this.begin+e),n=this.get(t);return this.set(t,this.pop()),n}}]),e}(),sD=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(){return(0,Se.Z)(this,n),t.call(this,n.INITIAL_CAPACITY)}return(0,Te.Z)(n,[{key:"isFull",value:function(){return!1}},{key:"push",value:function(e){BN((0,zN.Z)(n.prototype),"isFull",this).call(this)&&this.expand(),BN((0,zN.Z)(n.prototype),"push",this).call(this,e)}},{key:"unshift",value:function(e){BN((0,zN.Z)(n.prototype),"isFull",this).call(this)&&this.expand(),BN((0,zN.Z)(n.prototype),"unshift",this).call(this,e)}},{key:"expand",value:function(){for(var e=2*this.capacity,t=new Array(e),n=this.length(),r=0;r<n;r++)t[r]=this.get(this.wrap(this.begin+r));this.data=t,this.capacity=e,this.doubledCapacity=2*this.capacity,this.begin=0,this.end=n}}]),n}(oD);function uD(e){return new hD(e)}function cD(e,t){return new SD(e,t)}sD.INITIAL_CAPACITY=32;var lD,dD=function(){function e(){(0,Se.Z)(this,e)}return(0,Te.Z)(e,[{key:"toArray",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){var t,n;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,this.next();case 3:n=e.sent;case 4:if(n.done){e.next=11;break}return t.push(n.value),e.next=8,this.next();case 8:n=e.sent,e.next=4;break;case 11:return e.abrupt("return",t);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toArrayForTest",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){var t,n,r;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.prefetch(100),n=[],e.next=4,t.next();case 4:r=e.sent;case 5:if(r.done){e.next=12;break}return n.push(r.value),e.next=9,t.next();case 9:r=e.sent,e.next=5;break;case 12:return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"resolveFully",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){var t;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.next();case 2:t=e.sent;case 3:if(t.done){e.next=9;break}return e.next=6,this.next();case 6:t=e.sent,e.next=3;break;case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"resolveWhile",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){var n,r;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.next();case 2:n=e.sent,r=t(n.value);case 4:if(n.done||!r){e.next=11;break}return e.next=7,this.next();case 7:n=e.sent,r=t(n.value),e.next=4;break;case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleErrors",value:function(e){return new kD(this,e)}},{key:"filter",value:function(e){return new yD(this,e)}},{key:"map",value:function(e){return new bD(this,e)}},{key:"mapAsync",value:function(e){return new wD(this,e)}},{key:"serialMapAsync",value:function(e){return new wD(this,e).serial()}},{key:"flatmap",value:function(e){return new ID(this,e)}},{key:"forEachAsync",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.map(t).resolveFully());case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"serialForEach",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.serialMapAsync(t).resolveWhile((function(e){return!0===e})));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"rowMajorBatch",value:function(e){return new gD(this,e,!(arguments.length>1&&void 0!==arguments[1])||arguments[1])}},{key:"columnMajorBatch",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:nD;return this.rowMajorBatch(e,t).map((function(e){return eD(e,n)}))}},{key:"concatenate",value:function(e,t){return new SD(new fD([this,e]),t)}},{key:"take",value:function(e){return e<0||null==e?this:new mD(this,e)}},{key:"skip",value:function(e){return e<0||null==e?this:new vD(this,e)}},{key:"prefetch",value:function(e){return new TD(this,e)}},{key:"shuffle",value:function(e,t){return new ED(this,e,t)}},{key:"serial",value:function(){return new pD(this)}}]),e}(),fD=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r;return(0,Se.Z)(this,n),(r=t.call(this)).items=e,r.trav=0,r}return(0,Te.Z)(n,[{key:"summary",value:function(){return"Array of ".concat(this.items.length," items")}},{key:"next",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){var t;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.trav>=this.items.length)){e.next=2;break}return e.abrupt("return",{value:null,done:!0});case 2:return t=this.items[this.trav],this.trav++,e.abrupt("return",{value:aD(t),done:!1});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(dD),hD=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r;return(0,Se.Z)(this,n),(r=t.call(this)).nextFn=e,r}return(0,Te.Z)(n,[{key:"summary",value:function(){return"Function call"}},{key:"next",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",this.nextFn());case 4:throw e.prev=4,e.t0=e.catch(0),e.t0.message="Error thrown while iterating through a dataset: ".concat(e.t0.message),e.t0;case 8:case"end":return e.stop()}}),e,this,[[0,4]])})));return function(){return e.apply(this,arguments)}}()}]),n}(dD),pD=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r;return(0,Se.Z)(this,n),(r=t.call(this)).upstream=e,r.lastRead=Promise.resolve({value:null,done:!1}),r}return(0,Te.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Serial")}},{key:"next",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){var t=this;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.upstream.next());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(dD),vD=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e,r){var a;return(0,Se.Z)(this,n),(a=t.call(this)).upstream=e,a.maxCount=r,a.count=0,a.lastRead=Promise.resolve({value:null,done:!1}),a}return(0,Te.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Skip")}},{key:"next",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){var t=this;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){var t;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.count++<this.maxCount)){e.next=9;break}return e.next=3,this.upstream.next();case 3:if(!(t=e.sent).done){e.next=6;break}return e.abrupt("return",t);case 6:am(t.value),e.next=0;break;case 9:return e.abrupt("return",this.upstream.next());case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(dD),mD=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e,r){var a;return(0,Se.Z)(this,n),(a=t.call(this)).upstream=e,a.maxCount=r,a.count=0,a}return(0,Te.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Take")}},{key:"next",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.count++>=this.maxCount)){e.next=2;break}return e.abrupt("return",{value:null,done:!0});case 2:return e.abrupt("return",this.upstream.next());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(dD),gD=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e,r){var a,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return(0,Se.Z)(this,n),(a=t.call(this)).upstream=e,a.batchSize=r,a.enableSmallLastBatch=i,a.lastRead=Promise.resolve({value:null,done:!1}),a}return(0,Te.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> RowMajorBatch")}},{key:"next",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){var t=this;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){var t,n;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[];case 1:if(!(t.length<this.batchSize)){e.next=12;break}return e.next=4,this.upstream.next();case 4:if(!(n=e.sent).done){e.next=9;break}if(!(this.enableSmallLastBatch&&t.length>0)){e.next=8;break}return e.abrupt("return",{value:t,done:!1});case 8:return e.abrupt("return",{value:null,done:!0});case 9:t.push(n.value),e.next=1;break;case 12:return e.abrupt("return",{value:t,done:!1});case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(dD),yD=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e,r){var a;return(0,Se.Z)(this,n),(a=t.call(this)).upstream=e,a.predicate=r,a.lastRead=Promise.resolve({value:null,done:!1}),a}return(0,Te.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Filter")}},{key:"next",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){var t=this;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){var t;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,this.upstream.next();case 3:if(!(t=e.sent).done&&!this.predicate(t.value)){e.next=6;break}return e.abrupt("return",t);case 6:am(t.value),e.next=0;break;case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(dD),bD=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e,r){var a;return(0,Se.Z)(this,n),(a=t.call(this)).upstream=e,a.transform=r,a}return(0,Te.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Map")}},{key:"next",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){var t,n,r,a,i,o,s;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done){e.next=5;break}return e.abrupt("return",{value:null,done:!0});case 5:n=bp(t.value),r=this.transform(t.value),a=bp(r),i=(0,Ht.Z)(n);try{for(i.s();!(o=i.n()).done;)yp(s=o.value,a)||s.dispose()}catch(yhe){i.e(yhe)}finally{i.f()}return e.abrupt("return",{value:r,done:!1});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(dD),kD=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e,r){var a;return(0,Se.Z)(this,n),(a=t.call(this)).upstream=e,a.handler=r,a.count=0,a.lastRead=Promise.resolve({value:null,done:!1}),a}return(0,Te.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> handleErrors")}},{key:"next",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){var t=this;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=1,e.next=4,this.upstream.next();case 4:return e.abrupt("return",e.sent);case 7:if(e.prev=7,e.t0=e.catch(1),this.handler(e.t0)){e.next=11;break}return e.abrupt("return",{value:null,done:!0});case 11:e.next=0;break;case 13:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(){return e.apply(this,arguments)}}()}]),n}(dD),wD=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e,r){var a;return(0,Se.Z)(this,n),(a=t.call(this)).upstream=e,a.transform=r,a}return(0,Te.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> AsyncMap")}},{key:"next",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){var t,n,r,a,i,o,s;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done){e.next=5;break}return e.abrupt("return",{value:null,done:!0});case 5:return n=bp(t.value),e.next=8,this.transform(t.value);case 8:r=e.sent,a=bp(r),i=(0,Ht.Z)(n);try{for(i.s();!(o=i.n()).done;)yp(s=o.value,a)||s.dispose()}catch(yhe){i.e(yhe)}finally{i.f()}return e.abrupt("return",{value:r,done:!1});case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(dD),xD=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(){var e;return(0,Se.Z)(this,n),(e=t.call(this)).outputQueue=new sD,e.lastRead=Promise.resolve({value:null,done:!1}),e}return(0,Te.Z)(n,[{key:"next",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){var t=this;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.outputQueue.length()){e.next=7;break}return e.next=3,this.pump();case 3:if(e.sent){e.next=5;break}return e.abrupt("return",{value:null,done:!0});case 5:e.next=0;break;case 7:return e.abrupt("return",{value:this.outputQueue.shift(),done:!1});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(dD),ID=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e,r){var a;return(0,Se.Z)(this,n),(a=t.call(this)).upstream=e,a.transform=r,a}return(0,Te.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Flatmap")}},{key:"pump",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){var t,n,r,a,i,o,s;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done){e.next=5;break}return e.abrupt("return",!1);case 5:n=bp(t.value),r=this.transform(t.value),a=bp(r),this.outputQueue.pushAll(r),i=(0,Ht.Z)(n);try{for(i.s();!(o=i.n()).done;)yp(s=o.value,a)||s.dispose()}catch(yhe){i.e(yhe)}finally{i.f()}return e.abrupt("return",!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(xD),SD=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e,r){var a;return(0,Se.Z)(this,n),(a=t.call(this)).baseErrorHandler=r,a.lastRead=null,a.iterator=null,a.moreIterators=e,a}return(0,Te.Z)(n,[{key:"summary",value:function(){return"".concat("TODO: fill in upstream of chained summaries"," -> Chained")}},{key:"next",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.readFromChain(this.lastRead),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"readFromChain",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){var n,r;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:if(null!=this.iterator){e.next=10;break}return e.next=5,this.moreIterators.next();case 5:if(!(n=e.sent).done){e.next=8;break}return e.abrupt("return",{value:null,done:!0});case 8:this.iterator=n.value,null!=this.baseErrorHandler&&(this.iterator=this.iterator.handleErrors(this.baseErrorHandler));case 10:return e.next=12,this.iterator.next();case 12:if(!(r=e.sent).done){e.next=16;break}return this.iterator=null,e.abrupt("return",this.readFromChain(t));case 16:return e.abrupt("return",r);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(dD);!function(e){e[e.FAIL=0]="FAIL",e[e.SHORTEST=1]="SHORTEST",e[e.LONGEST=2]="LONGEST"}(lD||(lD={}));var TD=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e,r){var a;return(0,Se.Z)(this,n),(a=t.call(this)).upstream=e,a.bufferSize=r,a.buffer=new oD(r),a}return(0,Te.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Prefetch")}},{key:"refill",value:function(){for(;!this.buffer.isFull();){var e=this.upstream.next();this.buffer.push(e)}}},{key:"next",value:function(){return this.refill(),this.buffer.shift()}}]),n}(dD),ED=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e,r,a){var i;return(0,Se.Z)(this,n),(i=t.call(this,e,r)).upstream=e,i.windowSize=r,i.upstreamExhausted=!1,i.random=ak.alea(a||Bh().toString()),i.lastRead=Promise.resolve({value:null,done:!1}),i}return(0,Te.Z)(n,[{key:"next",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){var t=this;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"randomInt",value:function(e){return Math.floor(this.random()*e)}},{key:"chooseIndex",value:function(){return this.randomInt(this.buffer.length())}},{key:"serialNext",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){var t,n;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.upstreamExhausted||this.refill();case 1:if(this.buffer.isEmpty()){e.next=14;break}return t=this.chooseIndex(),e.next=5,this.buffer.shuffleExcise(t);case 5:if(!(n=e.sent).done){e.next=10;break}this.upstreamExhausted=!0,e.next=12;break;case 10:return this.refill(),e.abrupt("return",n);case 12:e.next=1;break;case 14:return e.abrupt("return",{value:null,done:!0});case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(TD),ND=function(){function e(){(0,Se.Z)(this,e),this.size=null}return(0,Te.Z)(e,[{key:"batch",value:function(e){var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this;return kc(e>0,(function(){return"batchSize needs to be positive, but it is\n      ".concat(e)})),t=this.size===1/0||null==this.size?this.size:n?Math.ceil(this.size/e):Math.floor(this.size/e),CD((0,ke.Z)((0,be.Z)().mark((function t(){return(0,be.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.iterator();case 2:return t.abrupt("return",t.sent.columnMajorBatch(e,n,ZD));case 3:case"end":return t.stop()}}),t)}))),t)}},{key:"concatenate",value:function(e){var t,n=this;return t=this.size===1/0||e.size===1/0?1/0:null!=this.size&&null!=e.size?this.size+e.size:null,CD((0,ke.Z)((0,be.Z)().mark((function t(){return(0,be.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.t0=t.sent,t.next=5,e.iterator();case 5:return t.t1=t.sent,t.abrupt("return",t.t0.concatenate.call(t.t0,t.t1));case 7:case"end":return t.stop()}}),t)}))),t)}},{key:"filter",value:function(e){var t,n=this;return t=this.size===1/0?1/0:null,CD((0,ke.Z)((0,be.Z)().mark((function t(){return(0,be.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.abrupt("return",t.sent.filter((function(t){return rm((function(){return e(t)}))})));case 3:case"end":return t.stop()}}),t)}))),t)}},{key:"forEachAsync",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.iterator();case 2:return e.abrupt("return",e.sent.forEachAsync(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"map",value:function(e){var t=this;return CD((0,ke.Z)((0,be.Z)().mark((function n(){return(0,be.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.iterator();case 2:return n.abrupt("return",n.sent.map((function(t){return rm((function(){return e(t)}))})));case 3:case"end":return n.stop()}}),n)}))),this.size)}},{key:"mapAsync",value:function(e){var t=this;return CD((0,ke.Z)((0,be.Z)().mark((function n(){return(0,be.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.iterator();case 2:return n.abrupt("return",n.sent.mapAsync(e));case 3:case"end":return n.stop()}}),n)}))),this.size)}},{key:"prefetch",value:function(e){if(null==e)throw new RangeError("`Dataset.prefetch()` requires bufferSize to be specified.");var t=this;return CD((0,ke.Z)((0,be.Z)().mark((function n(){return(0,be.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.iterator();case 2:return n.abrupt("return",n.sent.prefetch(e));case 3:case"end":return n.stop()}}),n)}))),this.size)}},{key:"repeat",value:function(e){var t,n=this;return t=null!=this.size&&e>0?this.size*e:0===e?0:null!=this.size&&(void 0===e||e<0)?1/0:null,CD((0,ke.Z)((0,be.Z)().mark((function t(){var r;return(0,be.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=uD((0,ke.Z)((0,be.Z)().mark((function e(){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.iterator();case 2:return e.t0=e.sent,e.abrupt("return",{value:e.t0,done:!1});case 4:case"end":return e.stop()}}),e)})))),t.abrupt("return",cD(r.take(e)));case 2:case"end":return t.stop()}}),t)}))),t)}},{key:"skip",value:function(e){var t,n=this;return t=null!=this.size&&e>=0&&this.size>=e?this.size-e:null!=this.size&&(this.size<e||void 0===e||e<0)?0:null,CD((0,ke.Z)((0,be.Z)().mark((function t(){return(0,be.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.abrupt("return",t.sent.skip(e));case 3:case"end":return t.stop()}}),t)}))),t)}},{key:"shuffle",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(null==e||e<0)throw null==this.size?new RangeError("`Dataset.shuffle()` requires bufferSize to be specified."):new RangeError("`Dataset.shuffle()` requires bufferSize to be specified.  If your data fits in main memory (for regular JS objects), and/or GPU memory (for `tf.Tensor`s), consider setting "+"bufferSize to the dataset size (".concat(this.size," elements)"));var r=this,a=ak.alea(t||Bh().toString());return CD((0,ke.Z)((0,be.Z)().mark((function t(){var i;return(0,be.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=a.int32(),n&&(i+=a.int32()),t.next=4,r.iterator();case 4:return t.abrupt("return",t.sent.shuffle(e,i.toString()));case 5:case"end":return t.stop()}}),t)}))),this.size)}},{key:"take",value:function(e){var t,n=this;return t=null!=this.size&&this.size>e?e:null!=this.size&&this.size<=e?this.size:null,CD((0,ke.Z)((0,be.Z)().mark((function t(){return(0,be.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.abrupt("return",t.sent.take(e));case 3:case"end":return t.stop()}}),t)}))),t)}},{key:"toArray",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.size!==1/0){e.next=2;break}throw new Error("Can not convert infinite data stream to array.");case 2:return e.next=4,this.iterator();case 4:return e.abrupt("return",e.sent.toArray());case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toArrayForTest",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.size!==1/0){e.next=2;break}throw new Error("Can not convert infinite data stream to array.");case 2:return e.next=4,this.iterator();case 4:return e.abrupt("return",e.sent.toArrayForTest());case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function CD(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new(function(n){(0,xe.Z)(a,n);var r=(0,Ie.Z)(a);function a(){var e;return(0,Se.Z)(this,a),(e=r.apply(this,arguments)).size=t,e}return(0,Te.Z)(a,[{key:"iterator",value:function(){var t=(0,ke.Z)((0,be.Z)().mark((function t(){return(0,be.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e());case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}]),a}(ND))}function ZD(e){return null===e?null:function(e){return null==e||null===(t=e)||"object"!==typeof t&&"function"!==typeof t||Array.isArray(e)||"object"===typeof e&&e instanceof ap||Wh(e);var t}(e[0])?{value:function(e){if(0===e.length)throw new Error("Can't make a batch of zero elements.");return e[0]instanceof ap?Wk(e):Bp(e)}(e),recurse:!1}:{value:null,recurse:!0}}ND.MAX_BUFFER_SIZE=1e4;Symbol("out"),Symbol("field"),Symbol("quote"),Symbol("quoteafterquote"),Symbol("quoteinquote");function _D(e,t){Array.isArray(e)||(e=[e]),e.forEach((function(e){null!=e&&kc("complex64"!==e.dtype,(function(){return"".concat(t," does not support complex64 tensors in the CPU backend.")}))}))}var AD=uw,RD=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(){var e;return(0,Se.Z)(this,n),(e=t.call(this)).blockSize=48,e.firstUse=!0,e.data=new fc((0,we.Z)(e),tm()),e}return(0,Te.Z)(n,[{key:"nextDataId",value:function(){return n.nextDataId++}},{key:"write",value:function(e,t,n){this.firstUse&&(this.firstUse=!1,el().get("IS_NODE")&&vh("\n============================\nHi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. \n============================"));var r={id:this.nextDataId()};return this.data.set(r,{values:e,dtype:n,refCount:1}),r}},{key:"makeTensorInfo",value:function(e,t,n){var r;if("string"===t&&null!=n&&n.length>0&&Fc(n[0])){var a=n.map((function(e){return Vh(e)}));r=this.write(a,e,t)}else r=this.write(n,e,t);return{dataId:r,shape:e,dtype:t}}},{key:"refCount",value:function(e){return this.data.has(e)?this.data.get(e).refCount:0}},{key:"incRef",value:function(e){this.data.get(e).refCount++}},{key:"decRef",value:function(e){this.data.has(e)&&this.data.get(e).refCount--}},{key:"move",value:function(e,t,n,r,a){this.data.set(e,{values:t,dtype:r,refCount:a})}},{key:"numDataIds",value:function(){return this.data.numDataIds()}},{key:"read",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.readSync(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"readSync",value:function(e){var t=this.data.get(e),n=t.dtype,r=t.complexTensorInfos;return"complex64"===n?cI(this.readSync(r.real.dataId),this.readSync(r.imag.dataId)):function(e,t){if(Array.isArray(e))return e;if("float32"===t)return e instanceof Float32Array?e:new Float32Array(e);if("int32"===t)return e instanceof Int32Array?e:new Int32Array(e);if("bool"===t||"string"===t)return Uint8Array.from(new Int32Array(e));throw new Error("Unknown dtype ".concat(t))}(this.data.get(e).values,n)}},{key:"bufferSync",value:function(e){var t=this.readSync(e.dataId);if("string"===e.dtype)try{var n=t.map((function(e){return Uh(e)}));return Yv(e.shape,e.dtype,n)}catch(rle){throw new Error("Failed to decode encoded string bytes into utf-8")}return Yv(e.shape,e.dtype,t)}},{key:"makeOutput",value:function(e,t,n){return tm().makeTensorFromTensorInfo(this.makeTensorInfo(t,n,e),this)}},{key:"disposeData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.data.has(e)){if(this.data.get(e).refCount--,!t&&this.data.get(e).refCount>0)return!1;var n=this.data.get(e).complexTensorInfos;null!=n&&(this.disposeData(n.real.dataId,!0),this.disposeData(n.imag.dataId,!0)),this.data.delete(e)}return!0}},{key:"disposeIntermediateTensorInfo",value:function(e){this.disposeData(e.dataId)}},{key:"time",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){var n,r;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Bh(),t(),r=Bh()-n,e.abrupt("return",{kernelMs:r});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"memory",value:function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}},{key:"where",value:function(e){_D([e],"where");var t=this.readSync(e.dataId);return AD(e.shape,t)}},{key:"dispose",value:function(){}},{key:"floatPrecision",value:function(){return 32}},{key:"epsilon",value:function(){return BN((0,zN.Z)(n.prototype),"epsilon",this).call(this)}}]),n}(hc);RD.nextDataId=0;function DD(e){return function(t,n,r){for(var a=Dc(n,t.length),i=0;i<t.length;++i)a[i]=e(t[i],r);return a}}function OD(e,t,n){return LD(e,DD(t),n)}function LD(e,t,n){return function(r){var a=r.inputs,i=r.attrs,o=r.backend,s=a.x;_D(s,e);var u,c=o,l=c.data.get(s.dataId).values;if("string"===s.dtype){if(!Array.isArray(l))throw new Error("String tensor's value was not an instance of Array");u=CI(l)}else u=l;var d=n||s.dtype,f=t(u,d,i);return c.makeTensorInfo(s.shape,d,f)}}om("cpu",(function(){return new RD}),1);var FD=OD(td,(function(e){return e>=0?e:Math.exp(e)-1})),MD={kernelName:td,backendName:"cpu",kernelFunc:FD};function PD(e){var t=e.inputs,n=e.backend,r=t.x;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}var zD={kernelName:yd,backendName:"cpu",kernelFunc:PD};function BD(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.alpha;_D([a],"leakyRelu");for(var o=Ic(a.shape),s=n.data.get(a.dataId).values,u=Rc("float32",o),c=0;c<s.length;c++)u[c]=s[c]<0?i*s[c]:s[c];return n.makeTensorInfo(a.shape,"float32",u)}var VD={kernelName:Sd,backendName:"cpu",kernelFunc:BD};function UD(e){return function(t,n,r,a,i){var o=Zm(t,n),s=o.length,u=Vc(o),c=Rc(i,Ic(o)),l=t.length,d=n.length,f=Vc(t),h=Vc(n),p=Nm(t,o),v=Nm(n,o);if(p.length+v.length===0)for(var m=0;m<c.length;++m)c[m]=e(r[m%r.length],a[m%a.length]);else for(var g=function(){var t=Kc(y,s,u),n=t.slice(-l);p.forEach((function(e){return n[e]=0}));var i=$c(n,l,f),o=t.slice(-d);v.forEach((function(e){return o[e]=0}));var m=$c(o,d,h);c[y]=e(r[i],a[m])},y=0;y<c.length;++y)g();return[c,o]}}var WD=UD((function(e,t){return e<0?t*e:e}));function jD(e){var t=e.inputs,n=e.backend,r=t.x,a=t.alpha;_D([r,a],"prelu");var i=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,s=WD(r.shape,a.shape,i,o,"float32"),u=(0,ge.Z)(s,2),c=u[0],l=u[1];return n.makeTensorInfo(l,"float32",c)}var GD={kernelName:of,backendName:"cpu",kernelFunc:jD},HD=OD(pf,(function(e){return Math.max(0,e)})),qD={kernelName:pf,backendName:"cpu",kernelFunc:HD},$D=OD(kf,(function(e){return Math.min(Math.max(0,e),6)})),KD={kernelName:kf,backendName:"cpu",kernelFunc:$D},XD=DD((function(e){return 1/(1+Math.exp(-e))})),YD=OD(Df,(function(e){return 1/(1+Math.exp(-e))})),QD={kernelName:Df,backendName:"cpu",kernelFunc:YD};function JD(e,t,n,r,a){if("linear"===n)return PD({inputs:{x:t},backend:e});if("relu"===n)return HD({inputs:{x:t},backend:e});if("elu"===n)return FD({inputs:{x:t},backend:e});if("relu6"===n)return $D({inputs:{x:t},backend:e});if("prelu"===n)return jD({inputs:{x:t,alpha:r},backend:e});if("leakyrelu"===n)return BD({inputs:{x:t},backend:e,attrs:{alpha:a}});if("sigmoid"===n)return YD({inputs:{x:t},backend:e});throw new Error("Activation ".concat(n," has not been implemented for the CPU backend."))}function eO(e){var t=e.inputs,n=e.backend,r=t.real,a=t.imag,i=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,s=n.makeTensorInfo(r.shape,"complex64");return n.data.get(s.dataId).complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",i),imag:n.makeTensorInfo(a.shape,"float32",o)},s}var tO={kernelName:_l,backendName:"cpu",kernelFunc:eO};function nO(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"float32";if("complex64"===n)return eO({inputs:{real:nO(e,t,"float32"),imag:nO(e,t,"float32")},backend:e});var r=Gc(Ic(t),n);return e.makeTensorInfo(t,n,r)}function rO(e){var t=e.inputs,n=e.backend,r=t.input,a=n.data.get(r.dataId).complexTensorInfos.real,i=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,i)}var aO={kernelName:ff,backendName:"cpu",kernelFunc:rO};function iO(e,t,n,r){if("int32"===r)return[t,"int32",Int32Array.from(e)];if("bool"===r){var a=zh([0],n),i=UD((function(e,t){return e!==t?1:0}))(t,[],e,a,"bool"),o=(0,ge.Z)(i,2),s=o[0];return[o[1],"bool",s]}throw new Error("Error in Cast: failed to cast ".concat(n," to ").concat(r))}function oO(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.dtype;if("complex64"===i){if("complex64"===a.dtype)return PD({inputs:{x:a},backend:n});var o=nO(n,a.shape,a.dtype),s=oO({inputs:{x:a},backend:n,attrs:{dtype:"float32"}}),u=eO({inputs:{real:s,imag:o},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),u}if("complex64"===a.dtype){var c=rO({inputs:{input:a},backend:n}),l=oO({inputs:{x:c},backend:n,attrs:{dtype:i}});return n.disposeIntermediateTensorInfo(c),l}if(!Oc(a.dtype,i)){var d=PD({inputs:{x:a},backend:n});return{dataId:d.dataId,shape:d.shape,dtype:i}}var f=iO(n.data.get(a.dataId).values,a.shape,a.dtype,i),h=(0,ge.Z)(f,3),p=h[0],v=h[1],m=h[2];return n.makeTensorInfo(p,v,m)}var sO={kernelName:Nl,backendName:"cpu",kernelFunc:oO};function uO(e,t,n,r){return null==n?function(n){var a=n.inputs,i=n.backend,o=a.a,s=a.b,u=i;_D([o,s],e);var c=u.data.get(o.dataId).values,l=u.data.get(s.dataId).values,d="string"===o.dtype?CI(c):c,f="string"===o.dtype?CI(l):l,h=r||o.dtype,p=t(o.shape,s.shape,d,f,h),v=(0,ge.Z)(p,2),m=v[0],g=v[1];return u.makeTensorInfo(g,h,m)}:function(e){var a=e.inputs,i=e.backend,o=a.a,s=a.b,u=i;if("complex64"===o.dtype||"complex64"===s.dtype){var c=oO({inputs:{x:o},backend:u,attrs:{dtype:"complex64"}}),l=u.data.get(c.dataId),d=l.complexTensorInfos.real,f=l.complexTensorInfos.imag,h=u.data.get(d.dataId).values,p=u.data.get(f.dataId).values,v=oO({inputs:{x:s},backend:u,attrs:{dtype:"complex64"}}),m=u.data.get(v.dataId),g=m.complexTensorInfos.real,y=m.complexTensorInfos.imag,b=u.data.get(g.dataId).values,k=u.data.get(y.dataId).values,w=n(o.shape,s.shape,h,p,b,k),x=(0,ge.Z)(w,3),I=x[0],S=x[1],T=x[2],E=u.makeTensorInfo(T,"float32",I),N=u.makeTensorInfo(T,"float32",S),C=eO({inputs:{real:E,imag:N},backend:u});return u.disposeIntermediateTensorInfo(c),u.disposeIntermediateTensorInfo(v),u.disposeIntermediateTensorInfo(E),u.disposeIntermediateTensorInfo(N),C}var Z=u.data.get(o.dataId).values,_=u.data.get(s.dataId).values,A=r||o.dtype,R=t(o.shape,s.shape,Z,_,A),D=(0,ge.Z)(R,2),O=D[0],L=D[1];return u.makeTensorInfo(L,A,O)}}function cO(e){return function(t,n,r,a,i,o){var s=Zm(t,n),u=Ic(s),c=s.length,l=Vc(s),d=Rc("float32",u),f=Rc("float32",u),h=Nm(t,s),p=Nm(n,s),v=cI(r,a),m=cI(i,o),g=t.length,y=Vc(t),b=n.length,k=Vc(n);if(h.length+p.length===0)for(var w=0;w<d.length;w++){var x=w%v.length,I=w%m.length,S=e(v[2*x],v[2*x+1],m[2*I],m[2*I+1]);d[w]=S.real,f[w]=S.imag}else for(var T=function(){var t=Kc(E,c,l),n=t.slice(-g);h.forEach((function(e){return n[e]=0}));var r=$c(n,g,y),a=t.slice(-b);p.forEach((function(e){return a[e]=0}));var i=$c(a,b,k),o=e(v[2*r],v[2*r+1],m[2*i],m[2*i+1]);d[E]=o.real,f[E]=o.imag},E=0;E<d.length;E++)T();return[d,f,s]}}var lO=UD((function(e,t){return e+t})),dO=cO((function(e,t,n,r){return{real:e+n,imag:t+r}})),fO=uO(ul,lO,dO),hO={kernelName:ul,backendName:"cpu",kernelFunc:fO};function pO(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.shape,o=Ic(a.shape),s=Zc(i,o),u=Ic(s);kc(o===u,(function(){return"The new shape (".concat(s,") has ").concat(u," elements and the old ")+"shape (".concat(a.shape,") has ").concat(o," elements. The new shape and old ")+"shape must have the same number of elements."})),n.incRef(a.dataId);var c=n.data.get(a.dataId);if(null!=c.complexTensorInfos){var l=c.complexTensorInfos.real,d=c.complexTensorInfos.imag;l.shape=s,d.shape=s}return{dataId:a.dataId,shape:s,dtype:a.dtype}}var vO={kernelName:vf,backendName:"cpu",kernelFunc:pO};function mO(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.a,i=t.b,o=r.transposeA,s=r.transposeB;_D([a,i],"matMul");var u=a.shape.length,c=i.shape.length,l=o?a.shape[u-2]:a.shape[u-1],d=s?i.shape[c-1]:i.shape[c-2],f=o?a.shape[u-1]:a.shape[u-2],h=s?i.shape[c-2]:i.shape[c-1],p=a.shape.slice(0,-2),v=i.shape.slice(0,-2),m=Ic(p),g=Ic(v),y=Zm(a.shape.slice(0,-2),i.shape.slice(0,-2)).concat([f,h]);kc(l===d,(function(){return"Error in matMul: inner shapes (".concat(l,") and (")+"".concat(d,") of Tensors with shapes ").concat(a.shape," and ")+"".concat(i.shape," and transposeA=").concat(o)+" and transposeB=".concat(s," must match.")}));for(var b=s?[g,h,d]:[g,d,h],k=pO({inputs:{x:a},backend:n,attrs:{shape:o?[m,l,f]:[m,f,l]}}),w=pO({inputs:{x:i},backend:n,attrs:{shape:b}}),x=o?k.shape[1]:k.shape[2],I=o?k.shape[2]:k.shape[1],S=s?w.shape[1]:w.shape[2],T=Math.max(m,g),E=n.data.get(k.dataId).values,N=n.data.get(w.dataId).values,C=Vc(k.shape),Z=Vc(w.shape),_=o?[C[0],1,C[1]]:[C[0],C[1],1],A=(0,ge.Z)(_,3),R=A[0],D=A[1],O=A[2],L=s?[1,Z[1],Z[0]]:[Z[1],1,Z[0]],F=(0,ge.Z)(L,3),M=F[0],P=F[1],z=F[2],B=I*S,V=Yv([T,I,S],k.dtype),U=V.values,W=n.blockSize,j=0;j<T;j++)for(var G=j%m,H=j%g,q=0;q<I;q+=W)for(var $=Math.min(q+W,I),K=0;K<S;K+=W)for(var X=Math.min(K+W,S),Y=0;Y<x;Y+=W)for(var Q=Math.min(Y+W,x),J=q;J<$;J++)for(var ee=K;ee<X;ee++){for(var te=0,ne=Y;ne<Q;ne++){te+=E[G*R+J*D+ne*O]*N[ne*M+ee*P+H*z]}U[j*B+(J*S+ee)]+=te}return n.disposeIntermediateTensorInfo(k),n.disposeIntermediateTensorInfo(w),n.makeTensorInfo(y,V.dtype,V.values)}var gO={kernelName:Il,backendName:"cpu",kernelFunc:mO};var yO={kernelName:fh,backendName:"cpu",kernelFunc:function(e){var t,n,r,a=e.inputs,i=e.backend,o=e.attrs,s=a.a,u=a.b,c=a.bias,l=a.preluActivationWeights,d=o.transposeA,f=o.transposeB,h=o.activation,p=o.leakyreluAlpha,v=[];t=mO({inputs:{a:s,b:u},attrs:{transposeA:d,transposeB:f},backend:i}),c&&(n=fO({inputs:{a:t,b:c},backend:i}),v.push(t),t=n),h&&(r=JD(i,t,h,l,p),v.push(t),t=r);for(var m=0,g=v;m<g.length;m++){var y=g[m];i.disposeIntermediateTensorInfo(y)}return t}};function bO(e){for(var t=new Float32Array(e.length),n=0;n<e.length;++n)t[n]=Math.abs(e[n]);return t}var kO={kernelName:il,backendName:"cpu",kernelFunc:function(e){var t=e.inputs.x,n=e.backend;_D(t,"abs");var r=new Float32Array(Ic(t.shape));return r=bO(n.data.get(t.dataId).values),n.makeOutput(r,t.shape,t.dtype)}},wO=OD(ol,(function(e){return Math.acos(e)})),xO={kernelName:ol,backendName:"cpu",kernelFunc:wO},IO=OD(sl,(function(e){return Math.acosh(e)})),SO={kernelName:sl,backendName:"cpu",kernelFunc:IO};var TO={kernelName:cl,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t;_D(t,"addN");for(var a=r.map((function(e){return n.data.get(e.dataId).values})),i=Yv(r[0].shape,r[0].dtype),o=i.values,s=0;s<r.length;s++)for(var u=a[s],c=0;c<o.length;c++)o[c]+=u[c];return n.makeTensorInfo(i.shape,i.dtype,i.values)}};function EO(e,t,n,r,a){for(var i=t.length,o=Ic(t),s=Vc(t),u=Vc(a),c=Rc(n,Ic(a)),l=0;l<o;++l){for(var d=Kc(l,i,s),f=new Array(d.length),h=0;h<f.length;h++)f[h]=d[r[h]];c[$c(f,i,u)]=e[l]}return c}function NO(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=n.perm;_D(a,"transpose");for(var o=a.shape.length,s=new Array(o),u=0;u<s.length;u++)s[u]=a.shape[i[u]];var c=EO(r.data.get(a.dataId).values,a.shape,a.dtype,i,s);return{dataId:r.write(c,s,a.dtype),shape:s,dtype:a.dtype}}var CO={kernelName:ah,backendName:"cpu",kernelFunc:NO};var ZO={kernelName:ll,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims;_D(a,"all");var s=_c(i,a.shape),u=s,c=Vy(u,a.shape.length),l=a;null!=c&&(l=NO({inputs:{x:a},backend:n,attrs:{perm:c}}),u=Wy(u.length,a.shape.length)),By("all",u,l.shape.length);for(var d=Py(l.shape,u),f=(0,ge.Z)(d,2),h=f[0],p=Ic(f[1]),v=Gc(Ic(h),l.dtype),m=n.data.get(l.dataId).values,g=0;g<v.length;++g){for(var y=g*p,b=m[y],k=0;k<p;++k){var w=m[y+k];b=b&&w}v[g]=b}null!=c&&n.disposeIntermediateTensorInfo(l);var x=n.makeTensorInfo(h,l.dtype,v);if(o){var I=pO({inputs:{x:x},backend:n,attrs:{shape:zy(h,s)}});return n.disposeIntermediateTensorInfo(x),I}return x}};var _O={kernelName:dl,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims;_D(a,"any");var s=_c(i,a.shape),u=s,c=Vy(u,a.shape.length),l=a;null!=c&&(l=NO({inputs:{x:a},backend:n,attrs:{perm:c}}),u=Wy(u.length,a.shape.length)),By("any",u,l.shape.length);for(var d=Py(l.shape,u),f=(0,ge.Z)(d,2),h=f[0],p=Ic(f[1]),v=Gc(Ic(h),l.dtype),m=n.data.get(l.dataId).values,g=0;g<v.length;++g){for(var y=g*p,b=m[y],k=0;k<p;++k){var w=m[y+k];b=b||w}v[g]=b}null!=c&&n.disposeIntermediateTensorInfo(l);var x=n.makeTensorInfo(h,l.dtype,v);if(o){var I=pO({inputs:{x:x},backend:n,attrs:{shape:zy(h,s)}});return n.disposeIntermediateTensorInfo(x),I}return x}};var AO={kernelName:fl,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis;_D(a,"argMax");var o=_c(i,a.shape),s=Vy(o,a.shape.length),u=a,c=[];null!=s&&(u=NO({inputs:{x:a},backend:n,attrs:{perm:s}}),c.push(u),o=Wy(o.length,u.shape.length)),By("argMax",o=[o[0]],u.shape.length);for(var l=Py(u.shape,o),d=(0,ge.Z)(l,2),f=d[0],h=d[1],p=Gc(Ic(f),"int32"),v=Ic(h),m=n.data.get(u.dataId).values,g=0;g<p.length;++g){for(var y=g*v,b=m[y],k=0,w=0;w<v;++w){var x=m[y+w];x>b&&(b=x,k=w)}p[g]=k}return c.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(f,"int32",p)}};var RO={kernelName:hl,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis;_D(a,"argMin");var o=_c(i,a.shape),s=Vy(o,a.shape.length),u=a,c=[];null!=s&&(u=NO({inputs:{x:a},backend:n,attrs:{perm:s}}),c.push(u),o=Wy(o.length,u.shape.length)),By("argMin",o=[o[0]],u.shape.length);for(var l=Py(u.shape,o),d=(0,ge.Z)(l,2),f=d[0],h=d[1],p=Gc(Ic(f),"int32"),v=Ic(h),m=n.data.get(u.dataId).values,g=0;g<p.length;++g){for(var y=g*v,b=m[y],k=0,w=0;w<v;++w){var x=m[y+w];x<b&&(b=x,k=w)}p[g]=k}return c.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(f,"int32",p)}},DO=OD(pl,(function(e){return Math.asin(e)})),OO={kernelName:pl,backendName:"cpu",kernelFunc:DO},LO=OD(vl,(function(e){return Math.asinh(e)})),FO={kernelName:vl,backendName:"cpu",kernelFunc:LO},MO=OD(ml,(function(e){return Math.atan(e)})),PO={kernelName:ml,backendName:"cpu",kernelFunc:MO},zO=UD((function(e,t){return Math.atan2(e,t)})),BO=uO(yl,zO),VO={kernelName:yl,backendName:"cpu",kernelFunc:BO},UO=OD(gl,(function(e){return Math.atanh(e)})),WO={kernelName:gl,backendName:"cpu",kernelFunc:UO};function jO(e,t,n,r,a,i){for(var o=a.strideHeight,s=a.strideWidth,u=a.dilationHeight,c=a.dilationWidth,l=a.effectiveFilterHeight,d=a.effectiveFilterWidth,f=a.padInfo.top,h=a.padInfo.left,p="max"===i?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,v=Yv(a.outShape,n),m=v.values,g=a.outShape[1]*a.outShape[2]*a.outShape[3],y=a.outShape[2]*a.outShape[3],b=a.outShape[3],k=0;k<a.batchSize;++k)for(var w=k*g,x=k*r[0],I=0;I<a.inChannels;++I)for(var S=0;S<a.outHeight;++S)for(var T=S*o-f,E=Math.max(0,T),N=Math.min(a.inHeight,l+T),C=w+S*y,Z=0;Z<a.outWidth;++Z){for(var _=Z*s-h,A=Math.max(0,_),R=Math.min(a.inWidth,d+_),D=p,O=0,L=0,F=E;F<N;F+=u){for(var M=x+F*r[1],P=A;P<R;P+=c){var z=e[M+P*r[2]+I];"max"===i&&z>D?D=z:"avg"===i&&(O+=z,L++)}if(isNaN(D))break}m[C+Z*b+I]="avg"===i?O/L:D}return v}function GO(e,t,n,r){for(var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=Yv(r.outShape,"int32"),s=r.strideHeight,u=r.strideWidth,c=r.dilationHeight,l=r.dilationWidth,d=r.effectiveFilterHeight,f=r.effectiveFilterWidth,h=r.padInfo.top,p=r.padInfo.left,v=Yv(t,n,e),m=0;m<r.batchSize;++m)for(var g=0;g<r.inChannels;++g)for(var y=0;y<r.outHeight;++y){for(var b=y*s-h,k=b;k<0;)k+=c;for(var w=Math.min(r.inHeight,d+b),x=0;x<r.outWidth;++x){for(var I=x*u-p,S=I;S<0;)S+=l;for(var T=Math.min(r.inWidth,f+I),E=Number.NEGATIVE_INFINITY,N=-1,C=k;C<w;C+=c)for(var Z=C-b,_=S;_<T;_+=l){var A=_-I,R=v.get(m,C,_,g);R>E&&(E=R,N=a?i?((m*r.inHeight+C)*r.inWidth+_)*r.inChannels+g:(C*r.inWidth+_)*r.inChannels+g:Z*f+A)}o.set(N,m,y,x,g)}}return o}function HO(e,t,n,r,a,i){for(var o=a.strideDepth,s=a.strideHeight,u=a.strideWidth,c=a.dilationDepth,l=a.dilationHeight,d=a.dilationWidth,f=a.effectiveFilterDepth,h=a.effectiveFilterHeight,p=a.effectiveFilterWidth,v=a.padInfo.front,m=a.padInfo.top,g=a.padInfo.left,y="max"===i?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,b=Yv(a.outShape,n),k=b.values,w=a.outShape[1]*a.outShape[2]*a.outShape[3]*a.outShape[4],x=a.outShape[2]*a.outShape[3]*a.outShape[4],I=a.outShape[3]*a.outShape[4],S=a.outShape[4],T=0;T<a.batchSize;++T)for(var E=T*w,N=T*r[0],C=0;C<a.inChannels;++C)for(var Z=0;Z<a.outDepth;++Z){for(var _=Z*o-v,A=_;A<0;)A+=c;for(var R=Math.min(a.inDepth,f+_),D=E+Z*x,O=0;O<a.outHeight;++O){for(var L=O*s-m,F=L;F<0;)F+=l;for(var M=Math.min(a.inHeight,h+L),P=D+O*I,z=0;z<a.outWidth;++z){for(var B=z*u-g,V=B;V<0;)V+=d;for(var U=Math.min(a.inWidth,p+B),W=P+z*S,j=y,G=0,H=0,q=A;q<R;q+=c){for(var $=N+q*r[1],K=F;K<M;K+=l){for(var X=$+K*r[2],Y=V;Y<U;Y+=d){var Q=e[X+Y*r[3]+C];if("max"===i&&Q>j?j=Q:"avg"===i&&(G+=Q,H++),isNaN(j))break}if(isNaN(j))break}if(isNaN(j))break}k[W+C]="avg"===i?G/Math.max(H,1):j}}}return b}var qO={kernelName:bl,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;_D(a,"avgPool");var i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode;kc(Vg(o,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(o," and dilations '").concat(1,"'")}));var c,l=Ag(a.shape,i,o,1,s,u);if(1===l.filterWidth&&1===l.filterHeight&&Sc(l.inShape,l.outShape))c=PD({inputs:{x:a},backend:n});else{var d=n.data.get(a.dataId).values,f=Vc(a.shape),h=jO(d,a.shape,a.dtype,f,l,"avg");c=n.makeTensorInfo(l.outShape,a.dtype,h.values)}return c}};var $O={kernelName:wl,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode,c=r.dataFormat;_D(a,"avgPool3d");var l=Rg(a.shape,i,o,1,s,u,c),d=HO(n.data.get(a.dataId).values,a.shape,a.dtype,Vc(a.shape),l,"avg");return n.makeTensorInfo(d.shape,"float32",d.values)}};var KO={kernelName:xl,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=r.filterSize,s=r.strides,u=r.pad,c=r.dimRoundingMode;_D([a,i],"avgPool3DGrad");for(var l=Rg(i.shape,o,s,1,u,c),d=l.strideDepth,f=l.strideHeight,h=l.strideWidth,p=l.filterDepth,v=l.filterHeight,m=l.filterWidth,g=l.dilationDepth,y=l.dilationHeight,b=l.dilationWidth,k=l.effectiveFilterDepth,w=l.effectiveFilterHeight,x=l.effectiveFilterWidth,I=k-1-l.padInfo.front,S=x-1-l.padInfo.left,T=w-1-l.padInfo.top,E=Yv(i.shape,"float32"),N=1/(p*v*m),C=n.bufferSync(a),Z=0;Z<l.batchSize;++Z)for(var _=0;_<l.inChannels;++_)for(var A=0;A<l.inDepth;++A)for(var R=0;R<l.inHeight;++R)for(var D=0;D<l.inWidth;++D){for(var O=A-I,L=R-T,F=D-S,M=0,P=0;P<k;P+=g){var z=(O+P)/d;if(!(z<0||z>=l.outDepth||Math.floor(z)!==z))for(var B=0;B<w;B+=y){var V=(L+B)/f;if(!(V<0||V>=l.outHeight||Math.floor(V)!==V))for(var U=0;U<x;U+=b){var W=(F+U)/h;if(!(W<0||W>=l.outWidth||Math.floor(W)!==W))M+=C.get(Z,z,V,W,_)}}}E.set(M*N,Z,A,R,D,_)}return n.makeTensorInfo(E.shape,E.dtype,E.values)}};var XO={kernelName:kl,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=i;_D([a,i],"avgPoolGrad");for(var s=r.filterSize,u=r.strides,c=r.pad,l=Ag(o.shape,s,u,1,c),d=l.strideHeight,f=l.strideWidth,h=l.filterHeight,p=l.filterWidth,v=l.dilationHeight,m=l.dilationWidth,g=l.effectiveFilterHeight,y=l.effectiveFilterWidth,b=y-1-l.padInfo.left,k=g-1-l.padInfo.top,w=Yv(o.shape,"float32"),x=1/(h*p),I=n.data.get(a.dataId).values,S=Yv(a.shape,"float32",I),T=0;T<l.batchSize;++T)for(var E=0;E<l.inChannels;++E)for(var N=0;N<l.inHeight;++N)for(var C=0;C<l.inWidth;++C){for(var Z=N-k,_=C-b,A=0,R=0;R<g;R+=v){var D=(Z+R)/d;if(!(D<0||D>=l.outHeight||Math.floor(D)!==D))for(var O=0;O<y;O+=m){var L=(_+O)/f;if(!(L<0||L>=l.outWidth||Math.floor(L)!==L))A+=S.get(T,D,L,E)}}w.set(A*x,T,N,C,E)}return n.makeTensorInfo(w.shape,w.dtype,w.values)}};var YO={kernelName:hd,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.scale,o=t.offset,s=t.mean,u=t.variance;kc(s.shape.length===u.shape.length,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),kc(null==o||s.shape.length===o.shape.length,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),kc(null==i||s.shape.length===i.shape.length,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."})),_D([a,s,u,i,o],"batchNorm");var c=r.varianceEpsilon;null==c&&(c=.001);for(var l=n.data.get(a.dataId).values,d=n.data.get(s.dataId).values,f=n.data.get(u.dataId).values,h=i?n.data.get(i.dataId).values:new Float32Array([1]),p=o?n.data.get(o.dataId).values:new Float32Array([0]),v=new Float32Array(l.length),m=p.length,g=h.length,y=f.length,b=d.length,k=0,w=0,x=0,I=0,S=0;S<l.length;++S)v[S]=p[k++]+(l[S]-d[w++])*h[x++]/Math.sqrt(f[I++]+c),k>=m&&(k=0),w>=b&&(w=0),x>=g&&(x=0),I>=y&&(I=0);return n.makeTensorInfo(a.shape,a.dtype,v)}};function QO(e,t,n,r,a){var i=hg(r,t,n),o=Ic(n),s=Vc(r);if(i){var u=pg(t,s);return"string"===a?e.slice(u,u+o):e.subarray(u,u+o)}for(var c=Yv(r,a,"string"===a?CI(e):e),l=Yv(n,a),d=0;d<l.size;++d){var f=l.indexToLoc(d),h=f.map((function(e,n){return e+t[n]}));l.set.apply(l,[c.get.apply(c,(0,me.Z)(h))].concat((0,me.Z)(f)))}return"string"===a?l.values.map((function(e){return Vh(e)})):l.values}function JO(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.begin,o=r.size;_D(a,"slice");var s=vg(a,i,o),u=(0,ge.Z)(s,2),c=u[0],l=u[1];dg(a,c,l);var d=QO(n.data.get(a.dataId).values,c,l,a.shape,a.dtype);return n.makeTensorInfo(l,a.dtype,d)}var eL={kernelName:Zf,backendName:"cpu",kernelFunc:JO};var tL={kernelName:Sl,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockShape,o=r.crops;_D([a],"batchToSpaceND");var s=i.reduce((function(e,t){return e*t})),u=Kx(a.shape,i,s),c=Xx(u.length,i.length),l=Yx(a.shape,i,s),d=Qx(o,i.length),f=Jx(l,o,i.length),h=pO({inputs:{x:a},backend:n,attrs:{shape:u}}),p=NO({inputs:{x:h},backend:n,attrs:{perm:c}}),v=pO({inputs:{x:p},backend:n,attrs:{shape:l}}),m=JO({inputs:{x:v},backend:n,attrs:{begin:d,size:f}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(v),m}};function nL(e,t,n,r,a){for(var i=Ic(r),o=Gc(a,n),s=0;s<e.length;s++){var u=e[s];if(u<0)throw new Error("Input x must be non-negative!");u>=a||(o[u]+=i>0?t[s]:1)}return o}function rL(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e.shape[0],i=e.shape[1],o=Yv([a,n],t.dtype),s=0;s<a;s++)for(var u=0;u<i;u++){var c=e.get(s,u);if(c<0)throw new Error("Input x must be non-negative!");c>=n||(r?o.set(1,s,c):t.size>0?o.set(o.get(s,c)+t.get(s,u),s,c):o.set(o.get(s,c)+1,s,c))}return o}var aL={kernelName:Tl,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.weights,o=r.size,s=nL(n.data.get(a.dataId).values,n.data.get(i.dataId).values,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,s)}};var iL={kernelName:El,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.s0,a=t.s1,i=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,s=Zm(Array.from(i),Array.from(o));return n.makeTensorInfo([s.length],"int32",Int32Array.from(s))}},oL=DD((function(e){return Math.ceil(e)})),sL=LD(Cl,oL),uL={kernelName:Cl,backendName:"cpu",kernelFunc:sL},cL=OD(Zl,(function(e,t){var n=t;return e>n.clipValueMax?n.clipValueMax:e<n.clipValueMin?n.clipValueMin:e})),lL={kernelName:Zl,backendName:"cpu",kernelFunc:cL},dL={kernelName:Al,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs.x,n=e.backend,r=new Float32Array(Ic(t.shape)),a=n.data.get(t.dataId),i=a.complexTensorInfos.real,o=a.complexTensorInfos.imag,s=n.data.get(i.dataId).values,u=n.data.get(o.dataId).values,c=0;c<s.length;c++){var l=s[c],d=u[c];r[c]=Math.hypot(l,d)}return n.makeOutput(r,t.shape,"float32")}};function fL(e,t,n,r){var a=Dc(n,Ic(t));if(r&&"string"!==n){var i=0;e.forEach((function(e){var t=Ic(e.shape);a.set(e.vals,i),i+=t}))}else{var o=0;e.forEach((function(e){for(var r="string"===n?CI(e.vals):e.vals,i=0,s=0;s<e.shape[0];++s)for(var u=s*t[1]+o,c=0;c<e.shape[1];++c)a[u+c]=r[i++];o+=e.shape[1]}))}return a}function hL(e){var t=e.inputs,n=e.backend,r=t.input,a=n.data.get(r.dataId).complexTensorInfos.imag,i=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,i)}var pL={kernelName:kd,backendName:"cpu",kernelFunc:hL};function vL(e){var t=e.inputs,n=e.backend,r=_c(e.attrs.axis,t[0].shape)[0],a=t.map((function(e){return e.shape}));jx(a,r);var i=Gx(t.map((function(e){return e.shape})),r);if(0===Ic(i))return n.makeTensorInfo(i,t[0].dtype,[]);var o=t.filter((function(e){return Ic(e.shape)>0}));if(1===o.length)return PD({inputs:{x:o[0]},backend:n});if("complex64"===o[0].dtype){var s=o.map((function(e){return rO({inputs:{input:e},backend:n})})),u=o.map((function(e){return hL({inputs:{input:e},backend:n})})),c=vL({inputs:s,backend:n,attrs:{axis:r}}),l=vL({inputs:u,backend:n,attrs:{axis:r}}),d=eO({inputs:{real:c,imag:l},backend:n});return s.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(l),d}var f=o.map((function(e){var t=Ic(e.shape.slice(r));return pO({inputs:{x:e},backend:n,attrs:{shape:[-1,t]}})})),h=f.map((function(e){return{vals:n.data.get(e.dataId).values,shape:e.shape}}));i=Gx(f.map((function(e){return e.shape})),1);var p=1===f[0].shape[0],v=fL(h,i,t[0].dtype,p),m=Gx(o.map((function(e){return e.shape})),r),g=n.makeTensorInfo(m,t[0].dtype,v);return f.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),g}var mL={kernelName:Rl,backendName:"cpu",kernelFunc:vL};function gL(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,u=r.dataFormat,c=r.dilations,l=r.dimRoundingMode;_D([a,i],"conv2d");for(var d=Wg(u),f=Dg(a.shape,i.shape,o,c,s,l,!1,d),h=f.filterHeight,p=f.filterWidth,v=f.dilationHeight,m=f.dilationWidth,g=f.padInfo.left,y=f.padInfo.top,b="channelsLast"===f.dataFormat,k=new tp(f.outShape,a.dtype),w=Vc(a.shape),x=Vc(i.shape),I=w[0],S=b?w[1]:w[2],T=b?w[2]:1,E=b?1:w[1],N=k.strides[0],C=b?k.strides[1]:k.strides[2],Z=b?k.strides[2]:1,_=b?1:k.strides[1],A=n.data.get(a.dataId).values,R=n.data.get(i.dataId).values,D=k.values,O=0;O<f.batchSize;++O)for(var L=O*I,F=O*N,M=0;M<f.outHeight;++M)for(var P=F+M*C,z=M*f.strideHeight-y,B=0;B<h;++B){var V=z+B*v;if(!(V<0||V>=f.inHeight))for(var U=B*x[0],W=L+V*S,j=0;j<f.outWidth;++j)for(var G=P+j*Z,H=j*f.strideWidth-g,q=0;q<p;++q){var $=H+q*m;if(!($<0||$>=f.inWidth))for(var K=W+$*T,X=U+q*x[1],Y=0;Y<f.inChannels;++Y){for(var Q=A[K+Y*E],J=0;J<f.outChannels;++J)D[G+J*_]+=Q*R[X+J];X+=f.outChannels}}}return n.makeTensorInfo(k.shape,k.dtype,D)}var yL={kernelName:Dl,backendName:"cpu",kernelFunc:gL};var bL={kernelName:Ol,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.pad,u=r.dataFormat,c=r.dimRoundingMode,l=r.filterShape;_D([a,i],"conv2dBackpropFilter");for(var d=Wg(u),f=Dg(a.shape,l,o,1,s,c,!1,d),h=f.strideHeight,p=f.strideWidth,v=f.filterHeight,m=f.filterWidth,g="channelsLast"===f.dataFormat,y=new tp(f.filterShape,"float32"),b=f.padInfo.left,k=f.padInfo.top,w=n.data.get(a.dataId).values,x=n.data.get(i.dataId).values,I=new tp(a.shape,a.dtype,w),S=new tp(i.shape,i.dtype,x),T=0;T<v;++T)for(var E=Math.max(0,Math.ceil((k-T)/h)),N=Math.min(f.outHeight,(f.inHeight+k-T)/h),C=0;C<m;++C)for(var Z=Math.max(0,Math.ceil((b-C)/p)),_=Math.min(f.outWidth,(f.inWidth+b-C)/p),A=0;A<f.inChannels;++A)for(var R=0;R<f.outChannels;++R){for(var D=0,O=0;O<f.batchSize;++O)for(var L=E;L<N;++L)for(var F=T+L*h-k,M=Z;M<_;++M){var P=C+M*p-b;D+=g?I.get(O,F,P,A)*S.get(O,L,M,R):I.get(O,A,F,P)*S.get(O,R,L,M)}y.set(D,T,C,A,R)}return n.makeTensorInfo(y.shape,y.dtype,y.values)}};var kL={kernelName:Ll,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.inputShape,s=r.strides,u=r.pad,c=r.dataFormat,l=r.dimRoundingMode;_D([a,i],"conv2dBackpropInput");var d=Vc(i.shape),f=Vc(a.shape),h=Wg(c),p=Dg(o,i.shape,s,1,u,l,!1,h),v=new tp(p.inShape,"float32"),m=v.values,g=n.data.get(a.dataId).values,y=n.data.get(i.dataId).values,b=(0,ge.Z)(d,3),k=b[0],w=b[1],x=b[2],I=p.batchSize,S=p.filterHeight,T=p.filterWidth,E=p.inChannels,N=p.inHeight,C=p.inWidth,Z=p.outChannels,_=p.outHeight,A=p.outWidth,R=p.strideHeight,D=p.strideWidth;h=p.dataFormat;for(var O=S-1-p.padInfo.top,L=T-1-p.padInfo.left,F="channelsLast"===h,M=v.strides[0],P=F?v.strides[1]:v.strides[2],z=F?v.strides[2]:1,B=F?1:v.strides[1],V=f[0],U=F?f[1]:f[2],W=F?f[2]:1,j=F?1:f[1],G=0;G<I;++G)for(var H=0;H<E;++H)for(var q=0;q<N;++q)for(var $=q-O,K=Math.max(0,Math.ceil($/R)),X=Math.min(_,(S+$)/R),Y=0;Y<C;++Y){for(var Q=Y-L,J=Math.max(0,Math.ceil(Q/D)),ee=Math.min(A,(T+Q)/D),te=0,ne=K;ne<X;++ne)for(var re=ne*R-$,ae=J;ae<ee;++ae)for(var ie=V*G+U*ne+W*ae,oe=k*(S-1-re)+w*(T-1-(ae*D-Q))+x*H,se=0;se<Z;++se){te+=g[ie+j*se]*y[oe+se]}m[M*G+P*q+z*Y+B*H]=te}return n.makeTensorInfo(v.shape,v.dtype,v.values)}};var wL={kernelName:Fl,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,u=r.dilations;_D([a,i],"conv3d");for(var c=Og(a.shape,i.shape,o,u,s),l=c.filterDepth,d=c.filterHeight,f=c.filterWidth,h=c.dilationDepth,p=c.dilationHeight,v=c.dilationWidth,m=c.padInfo,g=m.front,y=m.left,b=m.top,k=new tp(c.outShape,a.dtype),w=n.data.get(a.dataId).values,x=n.data.get(i.dataId).values,I=k.values,S=Vc(a.shape),T=Vc(i.shape),E=0;E<c.batchSize;++E)for(var N=E*S[0],C=E*k.strides[0],Z=0;Z<c.outDepth;++Z)for(var _=C+Z*k.strides[1],A=Z*c.strideDepth-g,R=0;R<l;++R){var D=A+R*h;if(!(D<0||D>=c.inDepth))for(var O=R*T[0],L=N+D*S[1],F=0;F<c.outHeight;++F)for(var M=_+F*k.strides[2],P=F*c.strideHeight-b,z=0;z<d;++z){var B=P+z*p;if(!(B<0||B>=c.inHeight))for(var V=O+z*T[1],U=L+B*S[2],W=0;W<c.outWidth;++W)for(var j=M+W*c.outChannels,G=W*c.strideWidth-y,H=0;H<f;++H){var q=G+H*v;if(!(q<0||q>=c.inWidth))for(var $=V+H*T[2],K=U+q*c.inChannels,X=$,Y=0;Y<c.inChannels;++Y){for(var Q=w[K+Y],J=0;J<c.outChannels;++J)I[j+J]+=Q*x[X+J];X+=c.outChannels}}}}return n.makeTensorInfo(k.shape,k.dtype,k.values)}};var xL={kernelName:Ml,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.pad,u=r.filterShape;_D([a,i],"conv3dBackpropFilterV2");for(var c=Vc(a.shape),l=Vc(i.shape),d=Og(a.shape,u,o,1,s),f=d.strideDepth,h=d.strideHeight,p=d.strideWidth,v=d.filterDepth,m=d.filterHeight,g=d.filterWidth,y=new tp(d.filterShape,"float32"),b=y.values,k=(0,ge.Z)(y.strides,4),w=k[0],x=k[1],I=k[2],S=k[3],T=n.data.get(i.dataId).values,E=(0,ge.Z)(l,4),N=E[0],C=E[1],Z=E[2],_=E[3],A=n.data.get(a.dataId).values,R=(0,ge.Z)(c,4),D=R[0],O=R[1],L=R[2],F=R[3],M=d.padInfo.front,P=d.padInfo.left,z=d.padInfo.top,B=0;B<v;++B)for(var V=Math.max(0,Math.ceil((M-B)/f)),U=Math.min(d.outDepth,(d.inDepth+M-B)/f),W=B*w,j=0;j<m;++j)for(var G=Math.max(0,Math.ceil((z-j)/h)),H=Math.min(d.outHeight,(d.inHeight+z-j)/h),q=j*x+W,$=0;$<g;++$)for(var K=Math.max(0,Math.ceil((P-$)/p)),X=Math.min(d.outWidth,(d.inWidth+P-$)/p),Y=$*I+q,Q=0;Q<d.inChannels;++Q)for(var J=Q*S+Y,ee=0;ee<d.outChannels;++ee){for(var te=0,ne=0;ne<d.batchSize;++ne)for(var re=ne*D,ae=ne*N,ie=V;ie<U;++ie)for(var oe=(B+ie*f-M)*O+re,se=ie*C+ae,ue=G;ue<H;++ue)for(var ce=(j+ue*h-z)*L+oe,le=ue*Z+se,de=K;de<X;++de){var fe=de*_+le;te+=A[($+de*p-P)*F+ce+Q]*T[fe+ee]}b[J+ee]=te}return n.makeTensorInfo(y.shape,y.dtype,y.values)}};var IL={kernelName:Pl,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.pad,s=r.strides,u=r.inputShape;_D([a],"conv3dBackpropInputV2");for(var c=Vc(a.shape),l=Vc(i.shape),d=Og(u,i.shape,s,1,o),f=new tp(d.inShape,"float32"),h=f.values,p=(0,ge.Z)(f.strides,4),v=p[0],m=p[1],g=p[2],y=p[3],b=n.data.get(a.dataId).values,k=(0,ge.Z)(c,4),w=k[0],x=k[1],I=k[2],S=k[3],T=n.data.get(i.dataId).values,E=(0,ge.Z)(l,4),N=E[0],C=E[1],Z=E[2],_=E[3],A=d.batchSize,R=d.filterDepth,D=d.filterHeight,O=d.filterWidth,L=d.inChannels,F=d.inDepth,M=d.inHeight,P=d.inWidth,z=d.outChannels,B=d.outDepth,V=d.outHeight,U=d.outWidth,W=d.strideDepth,j=d.strideHeight,G=d.strideWidth,H=R-1-d.padInfo.front,q=D-1-d.padInfo.top,$=O-1-d.padInfo.left,K=0;K<A;++K)for(var X=0;X<L;++X)for(var Y=0;Y<F;++Y)for(var Q=Y-H,J=Math.max(0,Math.ceil(Q/W)),ee=Math.min(B,(R+Q)/W),te=0;te<M;++te)for(var ne=te-q,re=Math.max(0,Math.ceil(ne/j)),ae=Math.min(V,(D+ne)/j),ie=0;ie<P;++ie){for(var oe=ie-$,se=Math.max(0,Math.ceil(oe/G)),ue=Math.min(U,(O+oe)/G),ce=0,le=J;le<ee;++le)for(var de=le*W-Q,fe=re;fe<ae;++fe)for(var he=fe*j-ne,pe=se;pe<ue;++pe)for(var ve=w*K+x*le+I*fe+S*pe,me=N*(R-1-de)+C*(D-1-he)+Z*(O-1-(pe*G-oe))+_*X,ye=0;ye<z;++ye){ce+=b[ve+ye]*T[me+ye]}h[v*K+m*Y+g*te+y*ie+X]=ce}return n.makeTensorInfo(f.shape,f.dtype,f.values)}},SL=OD(zl,(function(e){return Math.cos(e)})),TL={kernelName:zl,backendName:"cpu",kernelFunc:SL},EL=OD(Bl,(function(e){return Math.cosh(e)})),NL={kernelName:Bl,backendName:"cpu",kernelFunc:EL};var CL={kernelName:Wl,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,i=t.boxes,o=t.boxInd,s=r.cropSize,u=r.method,c=r.extrapolationValue,l=(0,ge.Z)(a.shape,4),d=l[0],f=l[1],h=l[2],p=l[3],v=i.shape[0],m=(0,ge.Z)(s,2),g=m[0],y=m[1],b=Yv([v,g,y,p],"float32"),k=n.data.get(i.dataId).values,w=n.data.get(o.dataId).values,x=n.data.get(a.dataId).values,I=Vc(a.shape),S=Vc(b.shape),T=0;T<v;T++){var E=4*T,N=k[E],C=k[E+1],Z=k[E+2],_=k[E+3],A=w[T];if(!(A>=d))for(var R=g>1?(Z-N)*(f-1)/(g-1):0,D=y>1?(_-C)*(h-1)/(y-1):0,O=0;O<g;O++){var L=g>1?N*(f-1)+O*R:.5*(N+Z)*(f-1);if(L<0||L>f-1)for(var F=0;F<y;F++)for(var M=0;M<p;M++){var P=M+F*S[2]+O*S[1]+T*S[0];b.values[P]=c}else if("bilinear"===u)for(var z=Math.floor(L),B=Math.ceil(L),V=L-z,U=0;U<y;U++){var W=y>1?C*(h-1)+U*D:.5*(C+_)*(h-1);if(W<0||W>h-1)for(var j=0;j<p;j++){var G=j+U*S[2]+O*S[1]+T*S[0];b.values[G]=c}else for(var H=Math.floor(W),q=Math.ceil(W),$=W-H,K=0;K<p;K++){var X=K+H*I[2]+z*I[1]+A*I[0],Y=x[X],Q=x[X=K+q*I[2]+z*I[1]+A*I[0]],J=x[X=K+H*I[2]+B*I[1]+A*I[0]],ee=Y+(Q-Y)*$,te=J+(x[X=K+q*I[2]+B*I[1]+A*I[0]]-J)*$;X=K+U*S[2]+O*S[1]+T*S[0],b.values[X]=ee+(te-ee)*V}}else for(var ne=0;ne<y;++ne){var re=y>1?C*(h-1)+ne*D:.5*(C+_)*(h-1);if(re<0||re>h-1)for(var ae=0;ae<p;ae++){var ie=ae+ne*S[2]+O*S[1]+T*S[0];b.values[ie]=c}else for(var oe=Math.round(re),se=Math.round(L),ue=0;ue<p;ue++){var ce=ue+oe*I[2]+se*I[1]+A*I[0],le=ue+ne*S[2]+O*S[1]+T*S[0];b.values[le]=x[ce]}}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}};var ZL={kernelName:Vl,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.exclusive,s=r.reverse;_D(a,"cumprod");var u=Vy([i],a.shape.length),c=a;null!=u&&(c=NO({inputs:{x:a},backend:n,attrs:{perm:u}}));var l=Wy(1,a.shape.length)[0];if(l!==c.shape.length-1)throw new Error("backend.cumprod in CPU expects an inner-most "+"axis=".concat(c.shape.length-1," but got axis=").concat(l));for(var d=hp(c.dtype,"int32"),f=jc(Ic(c.shape),d),h=n.data.get(c.dataId).values,p=c.shape[c.shape.length-1],v=s?function(e,t){return e+p-t-1}:function(e,t){return e+t},m=0;m<h.length;m+=p)for(var g=0;g<p;g++){var y=v(m,g);if(0===g)f[y]=o?1:h[y];else{var b=v(m,g-1);f[y]=o?h[b]*f[b]:h[y]*f[b]}}var k=n.makeTensorInfo(c.shape,d,f);if(null!=u){var w=NO({inputs:{x:k},backend:n,attrs:{perm:Uy(u)}});return n.disposeIntermediateTensorInfo(k),n.disposeIntermediateTensorInfo(c),w}return k}};var _L={kernelName:Ul,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.exclusive,s=r.reverse;_D(a,"cumsum");var u=Vy([i],a.shape.length),c=a;null!=u&&(c=NO({inputs:{x:a},backend:n,attrs:{perm:u}}));var l=Wy(1,a.shape.length)[0];if(l!==c.shape.length-1)throw new Error("backend.cumsum in CPU expects an inner-most "+"axis=".concat(c.shape.length-1," but got axis=").concat(l));for(var d=hp(c.dtype,"int32"),f=Gc(Ic(c.shape),d),h=n.data.get(c.dataId).values,p=c.shape[c.shape.length-1],v=s?function(e,t){return e+p-t-1}:function(e,t){return e+t},m=0;m<h.length;m+=p)for(var g=0;g<p;g++){var y=v(m,g);if(0===g)f[y]=o?0:h[y];else{var b=v(m,g-1);f[y]=o?h[b]+f[b]:h[y]+f[b]}}var k=n.makeTensorInfo(c.shape,d,f);if(null!=u){var w=NO({inputs:{x:k},backend:n,attrs:{perm:Uy(u)}});return n.disposeIntermediateTensorInfo(k),n.disposeIntermediateTensorInfo(c),w}return k}};var AL={kernelName:jl,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.weights,o=r.size,s=r.binaryOutput;if(1===a.shape.length){var u=nL(n.data.get(a.dataId).values,n.data.get(i.dataId).values,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,u)}if(2===a.shape.length){var c=rL(n.bufferSync(a),n.bufferSync(i),o,s);return n.makeTensorInfo(c.shape,i.dtype,c.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank"+"".concat(a.shape.length,"."))}};var RL={kernelName:Gl,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockSize,o=r.dataFormat;kc("NHWC"===o,(function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got ".concat(o)}));for(var s=a.shape[0],u=a.shape[1],c=a.shape[2],l=a.shape[3],d=u*i,f=c*i,h=l/(i*i),p=n.data.get(a.dataId).values,v=new Float32Array(s*d*f*h),m=0,g=0;g<s;++g)for(var y=0;y<d;++y)for(var b=Math.floor(y/i),k=y%i,w=0;w<f;++w)for(var x=Math.floor(w/i),I=(k*i+w%i)*h,S=0;S<h;++S){var T=S+I+l*(x+c*(b+u*g));v[m++]=p[T]}return n.makeTensorInfo([s,d,f,h],a.dtype,v)}};function DL(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,u=r.dilations,c=r.dimRoundingMode;_D([a,i],"depthwiseConv2DNative");var l=Vc(a.shape),d=Vc(i.shape),f=u;null==f&&(f=[1,1]),kc(Vg(o,f),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(o," and dilations '").concat(f,"'")}));for(var h=Dg(a.shape,i.shape,o,f,s,c,!0),p=h.filterHeight,v=h.filterWidth,m=h.dilationHeight,g=h.dilationWidth,y=h.padInfo,b=y.left,k=y.top,w=h.outChannels/h.inChannels,x=new tp(h.outShape,a.dtype),I=n.data.get(a.dataId).values,S=n.data.get(i.dataId).values,T=x.values,E=0;E<h.batchSize;++E)for(var N=E*l[0],C=E*x.strides[0],Z=0;Z<h.outHeight;++Z)for(var _=C+Z*x.strides[1],A=Z*h.strideHeight-k,R=0;R<p;++R){var D=A+R*m;if(!(D<0||D>=h.inHeight))for(var O=R*d[0],L=N+D*l[1],F=0;F<h.outWidth;++F)for(var M=_+F*x.strides[2],P=F*h.strideWidth-b,z=0;z<v;++z){var B=P+z*g;if(!(B<0||B>=h.inWidth))for(var V=O+z*d[1],U=L+B*h.inChannels,W=M,j=V,G=0;G<h.inChannels;++G){for(var H=I[U+G],q=0;q<w;++q)T[W+q]+=H*S[j+q];W+=w,j+=w}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}var OL={kernelName:Hl,backendName:"cpu",kernelFunc:DL};var LL={kernelName:ql,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.dilations,u=r.pad,c=r.dimRoundingMode,l=r.filterShape;_D([a,i],"depthwiseConv2dNativeBackpropFilter");for(var d=Dg(a.shape,l,o,s,u,c,!0),f=d.strideHeight,h=d.strideWidth,p=d.filterHeight,v=d.filterWidth,m=new tp(d.filterShape,"float32"),g=d.padInfo.left,y=d.padInfo.top,b=d.outChannels/d.inChannels,k=n.data.get(a.dataId).values,w=new tp(a.shape,a.dtype,k),x=n.data.get(i.dataId).values,I=new tp(i.shape,i.dtype,x),S=0;S<p;++S)for(var T=Math.max(0,Math.ceil((y-S)/f)),E=Math.min(d.outHeight,(d.inHeight+y-S)/f),N=0;N<v;++N)for(var C=Math.max(0,Math.ceil((g-N)/h)),Z=Math.min(d.outWidth,(d.inWidth+g-N)/h),_=0;_<d.outChannels;++_){for(var A=Math.trunc(_/b),R=_%b,D=0,O=0;O<d.batchSize;++O)for(var L=T;L<E;++L)for(var F=S+L*f-y,M=C;M<Z;++M){var P=N+M*h-g;D+=w.get(O,F,P,A)*I.get(O,L,M,_)}m.set(D,S,N,A,R)}return n.makeTensorInfo(m.shape,m.dtype,m.values)}};var FL={kernelName:$l,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.strides,s=r.dilations,u=r.pad,c=r.dimRoundingMode,l=r.inputShape;_D([a,i],"depthwiseConv2DNativeBackpropInput");for(var d=Vc(a.shape),f=Vc(i.shape),h=Dg(l,i.shape,o,s,u,c,!0),p=new tp(h.inShape,"float32"),v=p.values,m=(0,ge.Z)(p.strides,3),g=m[0],y=m[1],b=m[2],k=n.data.get(a.dataId).values,w=(0,ge.Z)(d,3),x=w[0],I=w[1],S=w[2],T=n.data.get(i.dataId).values,E=(0,ge.Z)(f,3),N=E[0],C=E[1],Z=E[2],_=h.batchSize,A=h.filterHeight,R=h.filterWidth,D=h.inChannels,O=h.inHeight,L=h.inWidth,F=h.outChannels,M=h.outHeight,P=h.outWidth,z=h.strideHeight,B=h.strideWidth,V=A-1-h.padInfo.top,U=R-1-h.padInfo.left,W=F/D,j=0;j<_;++j)for(var G=0;G<D;++G)for(var H=0;H<O;++H)for(var q=H-V,$=Math.max(0,Math.ceil(q/z)),K=Math.min(M,(A+q)/z),X=0;X<L;++X){for(var Y=X-U,Q=Math.max(0,Math.ceil(Y/B)),J=Math.min(P,(R+Y)/B),ee=0,te=$;te<K;++te)for(var ne=te*z-q,re=Q;re<J;++re)for(var ae=x*j+I*te+S*re,ie=N*(A-1-ne)+C*(R-1-(re*B-Y))+Z*G,oe=0;oe<W;++oe){ee+=k[ae+(G*W+oe)]*T[ie+oe]}v[g*j+y*H+b*X+G]=ee}return n.makeTensorInfo(p.shape,p.dtype,p.values)}};var ML={kernelName:Kl,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.backend,r=t.x,a=Ic(r.shape),i=n.data.get(r.dataId).values,o=Yv([a,a],r.dtype),s=o.values,u=0;u<i.length;u++)s[u*a+u]=i[u];var c=[].concat((0,me.Z)(r.shape),(0,me.Z)(r.shape));return n.makeTensorInfo(c,o.dtype,o.values)}},PL={kernelName:Xl,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,u=r.dilations,c=n,l=c.data.get(a.dataId).values,d=a.shape.length,f=c.data.get(i.dataId).values,h=i.shape.length,p=_g(a.shape,i.shape,o,s,"NHWC",u),v=p.batchSize,m=p.inHeight,g=p.inWidth,y=p.inChannels,b=p.outHeight,k=p.outWidth,w=p.padInfo,x=p.strideHeight,I=p.strideWidth,S=p.filterHeight,T=p.filterWidth,E=p.dilationHeight,N=p.dilationWidth,C=p.outShape,Z=Ic(C),_=C.length,A=Dc(a.dtype,Z),R=0;R<v;++R)for(var D=0;D<b;++D)for(var O=D*x-w.top,L=0;L<k;++L)for(var F=L*I-w.left,M=0;M<y;++M){for(var P=Number.MIN_SAFE_INTEGER,z=0;z<S;++z){var B=O+z*E;if(B>=0&&B<m)for(var V=0;V<T;++V){var U=F+V*N;if(U>=0&&U<g){var W=$c([R,B,U,M],d,Vc(a.shape)),j=$c([z,V,M],h,Vc(i.shape)),G=l[W]+f[j];G>P&&(P=G)}}}A[$c([R,D,L,M],_,Vc(C))]=P}return{dataId:c.write(zh(A,a.dtype),C,a.dtype),shape:C,dtype:a.dtype}}},zL={kernelName:Ql,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.dy,s=r.strides,u=r.pad,c=r.dilations,l=n,d=Wc(a.shape,l.data.get(a.dataId).values),f=Wc(i.shape,l.data.get(i.dataId).values),h=_g(a.shape,i.shape,s,u,"NHWC",c),p=h.batchSize,v=h.inHeight,m=h.inWidth,g=h.inChannels,y=h.outHeight,b=h.outWidth,k=h.padInfo,w=h.strideHeight,x=h.strideWidth,I=h.filterHeight,S=h.filterWidth,T=h.dilationHeight,E=h.dilationWidth,N=h.outShape;kc(o.rank===N.length,(function(){return"Error in ".concat(Ql,", dy ")+"must have the same rank as output ".concat(N.length,", but got ")+"".concat(o.rank)}));for(var C=Wc(N,l.data.get(o.dataId).values),Z=Hc(i.shape,i.dtype),_=0;_<p;++_)for(var A=0;A<y;++A)for(var R=A*w-k.top,D=0;D<b;++D)for(var O=D*x-k.left,L=0;L<g;++L){for(var F=Number.MIN_SAFE_INTEGER,M=0,P=0,z=0;z<I;++z){var B=R+z*T;if(B>=0&&B<v)for(var V=0;V<S;++V){var U=O+V*E;if(U>=0&&U<m){var W=d[_][B][U][L]+f[z][V][L];W>F&&(F=W,M=z,P=V)}}}Z[M][P][L]+=C[_][A][D][L]}return{dataId:l.write(zh(Z,a.dtype),i.shape,i.dtype),shape:i.shape,dtype:i.dtype}}},BL={kernelName:Yl,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.dy,s=r.strides,u=r.pad,c=r.dilations,l=n,d=Wc(a.shape,l.data.get(a.dataId).values),f=Wc(i.shape,l.data.get(i.dataId).values),h=_g(a.shape,i.shape,s,u,"NHWC",c),p=h.batchSize,v=h.inHeight,m=h.inWidth,g=h.inChannels,y=h.outHeight,b=h.outWidth,k=h.padInfo,w=h.strideHeight,x=h.strideWidth,I=h.filterHeight,S=h.filterWidth,T=h.dilationHeight,E=h.dilationWidth,N=h.outShape;kc(o.rank===N.length,(function(){return"Error in ".concat(Yl,", dy ")+"must have the same rank as output ".concat(N.length,", but got ")+"".concat(o.rank)}));for(var C=Wc(N,l.data.get(o.dataId).values),Z=Hc(a.shape,a.dtype),_=0;_<p;++_)for(var A=0;A<y;++A)for(var R=A*w-k.top,D=0;D<b;++D)for(var O=D*x-k.left,L=0;L<g;++L){for(var F=Number.MIN_SAFE_INTEGER,M=R<0?0:R,P=O<0?0:O,z=0;z<I;++z){var B=R+z*T;if(B>=0&&B<v)for(var V=0;V<S;++V){var U=O+V*E;if(U>=0&&U<m){var W=d[_][B][U][L]+f[z][V][L];W>F&&(F=W,M=B,P=U)}}}Z[_][M][P][L]+=C[_][A][D][L]}return{dataId:l.write(zh(Z,a.dtype),a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}},VL=UD((function(e,t){return e*t})),UL=cO((function(e,t,n,r){return{real:e*n-t*r,imag:e*r+t*n}})),WL=uO($d,VL,UL),jL={kernelName:$d,backendName:"cpu",kernelFunc:WL};function GL(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.axis,s=a.keepDims;_D(i,"sum");var u=(t="bool"===i.dtype?oO({inputs:{x:i},backend:r,attrs:{dtype:"int32"}}):PD({inputs:{x:i},backend:r})).shape.length,c=_c(o,t.shape),l=Vy(c,u),d=c,f=t;null!=l&&(f=NO({inputs:{x:t},backend:r,attrs:{perm:l}}),d=Wy(d.length,u)),By("sum",d,f.shape.length);for(var h=Py(f.shape,d),p=(0,ge.Z)(h,2),v=p[0],m=p[1],g=nO(r,v,hp(f.dtype,"int32")),y=Ic(m),b=r.data.get(g.dataId).values,k=r.data.get(f.dataId).values,w=0;w<b.length;++w){for(var x=w*y,I=0,S=0;S<y;++S)I+=k[x+S];b[w]=I}if(s){var T=g;g=pO({inputs:{x:g},backend:r,attrs:{shape:zy(g.shape,c)}}),r.disposeIntermediateTensorInfo(T)}return r.disposeIntermediateTensorInfo(t),null!=l&&r.disposeIntermediateTensorInfo(f),g}var HL={kernelName:Ff,backendName:"cpu",kernelFunc:GL};var qL={kernelName:ed,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t,a=gI(e.attrs.equation,r.length),i=a.allDims,o=a.summedDims,s=a.idDims;bI(i.length,s,r);for(var u=kI(o,s),c=u.path,l=u.steps,d=l.length,f=null,h=i.length,p=[],v=0;v<d;++v){var m,g=(0,Ht.Z)(l[v]);try{for(g.s();!(m=g.n()).done;){var y=m.value,b=yI(h,s[y]),k=b.permutationIndices,w=b.expandDims,x=void 0;wI(k)?x=r[y]:(x=NO({inputs:{x:r[y]},backend:n,attrs:{perm:k}}),p.push(x));for(var I=x.shape.slice(),S=0;S<w.length;++S)I.splice(w[S],0,1);Sc(x.shape,I)||(x=pO({inputs:{x:x},backend:n,attrs:{shape:I}}),p.push(x)),null===f?f=x:(f=WL({inputs:{a:x,b:f},backend:n}),p.push(f))}}catch(yhe){g.e(yhe)}finally{g.f()}v<d-1&&(c[v]>=0&&(f=GL({inputs:{x:f},backend:n,attrs:{axis:c[v]-(i.length-h),keepDims:!1}}),p.push(f)),h--)}for(var T=0,E=p;T<E.length;T++){var N=E[T];N!==f&&n.disposeIntermediateTensorInfo(N)}return f}};var $L={kernelName:nd,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.dy,a=t.y;_D([r,a],"eluGrad");for(var i=new Float32Array(Ic(a.shape)),o=n.data.get(a.dataId).values,s=n.data.get(r.dataId).values,u=0;u<o.length;++u){var c=o[u];i[u]=c>=0?s[u]:s[u]*(c+1)}return n.makeTensorInfo(a.shape,"float32",i)}},KL=UD((function(e,t){return e===t?1:0})),XL=uO(ad,KL,null,"bool"),YL={kernelName:ad,backendName:"cpu",kernelFunc:XL},QL=OD(rd,(function(e){var t=Math.sign(e),n=Math.abs(e),r=1/(1+.3275911*n);return t*(1-((((1.061405429*r-1.453152027)*r+1.421413741)*r-.284496736)*r+.254829592)*r*Math.exp(-n*n))})),JL={kernelName:rd,backendName:"cpu",kernelFunc:QL},eF=DD((function(e){return Math.exp(e)})),tF=LD(id,eF,"float32"),nF={kernelName:id,backendName:"cpu",kernelFunc:tF};function rF(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.input,i=r.dim,o=a.shape.length,s=a.shape.slice(),u=i;return i<0&&(kc(-(o+1)<=i,(function(){return"Axis must be in the interval [".concat(-(o+1),", ").concat(o,"]")})),u=o+i+1),s.splice(u,0,1),pO({inputs:{x:a},backend:n,attrs:{shape:s}})}var aF={kernelName:od,backendName:"cpu",kernelFunc:rF},iF=DD((function(e){return Math.expm1(e)})),oF=LD(sd,iF),sF={kernelName:sd,backendName:"cpu",kernelFunc:oF},uF=UD((function(e,t){return e/t})),cF=uO(Jl,uF),lF={kernelName:Jl,backendName:"cpu",kernelFunc:cF},dF=UD((function(e,t){return e-t})),fF=cO((function(e,t,n,r){return{real:e-n,imag:t-r}})),hF=uO(Qf,dF,fF),pF={kernelName:Qf,backendName:"cpu",kernelFunc:hF};function vF(e,t,n){for(var r=e.shape,a=r[0],i=r[1],o=n.data.get(e.dataId),s=o.complexTensorInfos.real,u=o.complexTensorInfos.imag,c=[a,i],l=Ic(c),d=Rc("float32",l),f=Rc("float32",l),h=0;h<a;h++){for(var p=JO({inputs:{x:s},backend:n,attrs:{begin:[h,0],size:[1,i]}}),v=JO({inputs:{x:u},backend:n,attrs:{begin:[h,0],size:[1,i]}}),m=eO({inputs:{real:p,imag:v},backend:n}),g=mF(m,t,n),y=cI(g.real,g.imag),b=0;b<i;b++){var k=lI(y,b);d[h*i+b]=k.real,f[h*i+b]=k.imag}n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(m)}var w=n.makeTensorInfo(c,"float32",d),x=n.makeTensorInfo(c,"float32",f),I=eO({inputs:{real:w,imag:x},backend:n});return n.disposeIntermediateTensorInfo(w),n.disposeIntermediateTensorInfo(x),I}function mF(e,t,n){var r=Ic(e.shape),a=n.data.get(e.dataId),i=n.data.get(a.complexTensorInfos.real.dataId).values,o=n.data.get(a.complexTensorInfos.imag.dataId).values;if(0===((g=r)&g-1)){var s=gF(i,o,r,t,n),u=[e.shape[0],e.shape[1]];if(t){var c=n.makeTensorInfo(u,"float32",s.real),l=n.makeTensorInfo(u,"float32",s.imag),d=n.makeTensorInfo([],"float32",Ph(r,"float32")),f=PD({inputs:{x:d},backend:n}),h=lF.kernelFunc({inputs:{a:c,b:d},backend:n}),p=lF.kernelFunc({inputs:{a:l,b:f},backend:n}),v=n.data.get(h.dataId).values,m=n.data.get(p.dataId).values;return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),{real:v,imag:m}}return s}var g,y=function(e,t,n){for(var r=new Float32Array(2*t),a=0;a<t;a++){for(var i=0,o=0,s=0;s<t;s++){var u=fI(a*s,t,n),c=lI(e,s);i+=c.real*u.real-c.imag*u.imag,o+=c.real*u.imag+c.imag*u.real}n&&(i/=t,o/=t),dI(r,i,o,a)}return r}(cI(i,o),r,t);return function(e){for(var t=new Float32Array(e.length/2),n=new Float32Array(e.length/2),r=0;r<e.length;r+=2)t[r/2]=e[r],n[r/2]=e[r+1];return{real:t,imag:n}}(y)}function gF(e,t,n,r,a){if(1===n)return{real:e,imag:t};var i=cI(e,t),o=n/2,s=function(e){for(var t=Math.ceil(e.length/4),n=new Float32Array(t),r=new Float32Array(t),a=0;a<e.length;a+=4)n[Math.floor(a/4)]=e[a],r[Math.floor(a/4)]=e[a+1];return{real:n,imag:r}}(i),u=s.real,c=s.imag,l=[u.length],d=a.makeTensorInfo(l,"float32",u),f=a.makeTensorInfo(l,"float32",c),h=eO({inputs:{real:d,imag:f},backend:a}),p=function(e){for(var t=Math.floor(e.length/4),n=new Float32Array(t),r=new Float32Array(t),a=2;a<e.length;a+=4)n[Math.floor(a/4)]=e[a],r[Math.floor(a/4)]=e[a+1];return{real:n,imag:r}}(i),v=p.real,m=p.imag,g=[v.length],y=a.makeTensorInfo(g,"float32",v),b=a.makeTensorInfo(g,"float32",m),k=eO({inputs:{real:y,imag:b},backend:a}),w=gF(u,c,o,r,a),x=w.real,I=w.imag,S=[x.length],T=a.makeTensorInfo(S,"float32",x),E=a.makeTensorInfo(S,"float32",I),N=eO({inputs:{real:T,imag:E},backend:a}),C=gF(v,m,o,r,a),Z=C.real,_=C.imag,A=[Z.length],R=a.makeTensorInfo(A,"float32",Z),D=a.makeTensorInfo(A,"float32",_),O=eO({inputs:{real:R,imag:D},backend:a}),L=function(e,t){for(var n=new Float32Array(e/2),r=new Float32Array(e/2),a=0;a<Math.ceil(e/2);a++){var i=(t?2:-2)*Math.PI*(a/e);n[a]=Math.cos(i),r[a]=Math.sin(i)}return{real:n,imag:r}}(n,r),F=[L.real.length],M=a.makeTensorInfo(F,"float32",L.real),P=a.makeTensorInfo(F,"float32",L.imag),z=eO({inputs:{real:M,imag:P},backend:a}),B=WL({inputs:{a:z,b:O},backend:a}),V=fO({inputs:{a:N,b:B},backend:a}),U=hF({inputs:{a:N,b:B},backend:a}),W=rO({inputs:{input:V},backend:a}),j=rO({inputs:{input:U},backend:a}),G=hL({inputs:{input:V},backend:a}),H=hL({inputs:{input:U},backend:a}),q=vL({inputs:[W,j],backend:a,attrs:{axis:0}}),$=vL({inputs:[G,H],backend:a,attrs:{axis:0}}),K=a.data.get(q.dataId).values,X=a.data.get($.dataId).values;return a.disposeIntermediateTensorInfo(d),a.disposeIntermediateTensorInfo(f),a.disposeIntermediateTensorInfo(h),a.disposeIntermediateTensorInfo(y),a.disposeIntermediateTensorInfo(b),a.disposeIntermediateTensorInfo(k),a.disposeIntermediateTensorInfo(T),a.disposeIntermediateTensorInfo(E),a.disposeIntermediateTensorInfo(N),a.disposeIntermediateTensorInfo(R),a.disposeIntermediateTensorInfo(D),a.disposeIntermediateTensorInfo(O),a.disposeIntermediateTensorInfo(M),a.disposeIntermediateTensorInfo(P),a.disposeIntermediateTensorInfo(z),a.disposeIntermediateTensorInfo(B),a.disposeIntermediateTensorInfo(V),a.disposeIntermediateTensorInfo(U),a.disposeIntermediateTensorInfo(W),a.disposeIntermediateTensorInfo(G),a.disposeIntermediateTensorInfo(j),a.disposeIntermediateTensorInfo(H),a.disposeIntermediateTensorInfo(q),a.disposeIntermediateTensorInfo($),{real:K,imag:X}}var yF={kernelName:ud,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.input,a=Ic(r.shape),i=r.shape[r.shape.length-1],o=pO({inputs:{x:r},backend:n,attrs:{shape:[a/i,i]}}),s=vF(o,!1,n),u=pO({inputs:{x:s},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),u}};function bF(e){var t=e.backend,n=e.attrs,r=n.shape,a=n.value,i=n.dtype||Pc(a),o=Dc(i,Ic(r));return function(e,t,n){e.fill(t)}(o,a),t.makeTensorInfo(r,i,o)}var kF={kernelName:cd,backendName:"cpu",kernelFunc:bF};var wF={kernelName:ld,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=(e.attrs,e.backend),r=t.image,a=n,i=Rc(r.dtype,Ic(r.shape)),o=(0,ge.Z)(r.shape,4),s=o[0],u=o[1],c=o[2],l=o[3],d=a.data.get(r.dataId).values,f=0;f<s;f++)for(var h=f*c*u*l,p=0;p<u;p++)for(var v=p*(c*l),m=0;m<c;m++)for(var g=m*l,y=0;y<l;y++){var b=Math.round(c-m-1),k=h+v+g+y,w=d[k];if(b>=0&&b<c)w=d[h+v+b*l+y];i[k]=w}return{dataId:a.write(i,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},xF=DD((function(e){return Math.floor(e)})),IF=LD(dd,xF),SF={kernelName:dd,backendName:"cpu",kernelFunc:IF},TF=UD((function(e,t){return Math.floor(e/t)})),EF=uO(fd,TF,null,"int32"),NF={kernelName:fd,backendName:"cpu",kernelFunc:EF};var CF={kernelName:hh,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.bias,s=t.preluActivationWeights,u=r.strides,c=r.pad,l=r.dataFormat,d=r.dilations,f=r.dimRoundingMode,h=r.activation,p=r.leakyreluAlpha,v=gL({inputs:{x:a,filter:i},backend:n,attrs:{strides:u,pad:c,dataFormat:l,dilations:d,dimRoundingMode:f}});if(o){var m=v;if("NCHW"===l&&1===o.shape.length&&1!==o.shape[0]){var g=pO({inputs:{x:o},backend:n,attrs:{shape:[o.shape[0],1,1]}});v=fO({inputs:{a:v,b:g},backend:n}),n.disposeIntermediateTensorInfo(g)}else v=fO({inputs:{a:v,b:o},backend:n});n.disposeIntermediateTensorInfo(m)}if(h){var y=v;if("NCHW"===l&&"prelu"===h&&1===s.shape.length&&1!==s.shape[0]){var b=pO({inputs:{x:s},backend:n,attrs:{shape:[s.shape[0],1,1]}});v=JD(n,v,h,b,p),n.disposeIntermediateTensorInfo(b)}else v=JD(n,v,h,s,p);n.disposeIntermediateTensorInfo(y)}return v}};var ZF={kernelName:ph,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.bias,s=t.preluActivationWeights,u=r.strides,c=r.pad,l=r.dataFormat,d=r.dilations,f=r.dimRoundingMode,h=r.activation,p=r.leakyreluAlpha,v=DL({inputs:{x:a,filter:i},backend:n,attrs:{strides:u,pad:c,dataFormat:l,dilations:d,dimRoundingMode:f}});if(o){var m=v;v=fO({inputs:{a:v,b:o},backend:n}),n.disposeIntermediateTensorInfo(m)}if(h){var g=v;v=JD(n,v,h,s,p),n.disposeIntermediateTensorInfo(g)}return v}};function _F(e,t,n,r,a,i,o,s,u){for(var c=Yv([r,i],n),l=0;l<r;l++){for(var d=[],f=0,h=0;h<a;h++){var p=e[l*a+h];f+=p*o[h],d.push(p)}if(f<0||f>=u/i)throw new Error("Invalid indices: ".concat(d," does not index into ").concat(s));for(var v=0;v<i;v++)c.values[l*i+v]=t.get.apply(t,(0,me.Z)(t.indexToLoc(f*i+v)))}return c}var AF={kernelName:vd,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.params,a=t.indices,i=Ic(r.shape),o=a.shape,s=o[o.length-1],u=eI(r,a),c=(0,ge.Z)(u,4),l=c[0],d=c[1],f=c[2],h=c[3];if(0===d)return n.makeTensorInfo(l,r.dtype,[]);var p=_F(n.data.get(a.dataId).values,n.bufferSync(r),r.dtype,d,s,f,h,r.shape,i);return n.makeTensorInfo(l,r.dtype,p.values)}};function RF(e,t,n){for(var r=Yv(n,e.dtype),a=0;a<r.size;++a){var i=r.indexToLoc(a).slice(),o=i[0],s=i[2],u=t.locToIndex([o,s]);i[2]=t.values[u];var c=e.locToIndex(i);0<=c&&c<e.values.length&&(r.values[a]=e.values[c])}return r}var DF={kernelName:pd,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.indices,o=r.axis,s=r.batchDims;_D([a,i],"gatherV2");for(var u=_c(o,a.shape)[0],c=n.data.get(i.dataId).values,l=a.shape[u],d=function(){var e=c[f];kc(e<=l-1&&e>=0,(function(){return"GatherV2: the index value ".concat(e," is not in [0, ").concat(l-1,"]")}))},f=0;f<c.length;++f)d();var h=s;null==s&&(h=0);var p=Ic(i.shape),v=NI(a,i,u,h),m=pO({inputs:{x:a},backend:n,attrs:{shape:[v.batchSize,v.outerSize,v.dimSize,v.sliceSize]}}),g=pO({inputs:{x:i},backend:n,attrs:{shape:[v.batchSize,p/v.batchSize]}}),y=[v.batchSize,v.outerSize,p/v.batchSize,v.sliceSize],b=n.bufferSync(g),k=RF(n.bufferSync(m),b,y);return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),n.makeTensorInfo(v.outputShape,k.dtype,k.values)}},OF=UD((function(e,t){return e>t?1:0})),LF=uO(md,OF,null,"bool"),FF={kernelName:md,backendName:"cpu",kernelFunc:LF},MF=UD((function(e,t){return e>=t?1:0})),PF=uO(gd,MF,null,"bool"),zF={kernelName:gd,backendName:"cpu",kernelFunc:PF};var BF={kernelName:bd,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.input,a=Ic(r.shape),i=r.shape[r.shape.length-1],o=pO({inputs:{x:r},backend:n,attrs:{shape:[a/i,i]}}),s=vF(o,!0,n),u=pO({inputs:{x:s},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),u}},VF=OD(wd,(function(e){return Number.isFinite(e)?1:0}),"bool"),UF={kernelName:wd,backendName:"cpu",kernelFunc:VF},WF=OD(xd,(function(e){return Math.abs(e)===1/0?1:0}),"bool"),jF={kernelName:xd,backendName:"cpu",kernelFunc:WF},GF=OD(Id,(function(e){return Number.isNaN(e)?1:0}),"bool"),HF={kernelName:Id,backendName:"cpu",kernelFunc:GF},qF=UD((function(e,t){return e<t?1:0})),$F=uO(Td,qF,null,"bool"),KF={kernelName:Td,backendName:"cpu",kernelFunc:$F},XF=UD((function(e,t){return e<=t?1:0})),YF=uO(Ed,XF,null,"bool"),QF={kernelName:Ed,backendName:"cpu",kernelFunc:YF};function JF(e,t,n){var r=(t-e)/(n-1),a=Gc(n,"float32");a[0]=e;for(var i=1;i<a.length;i++)a[i]=a[i-1]+r;return a}var eM={kernelName:Nd,backendName:"cpu",kernelFunc:function(e){var t=e.backend,n=e.attrs,r=JF(n.start,n.stop,n.num);return t.makeTensorInfo([r.length],"float32",r)}},tM=DD((function(e){return Math.log(e)})),nM=LD(Cd,tM),rM={kernelName:Cd,backendName:"cpu",kernelFunc:nM},aM=OD(Zd,(function(e){return Math.log1p(e)})),iM={kernelName:Zd,backendName:"cpu",kernelFunc:aM},oM=UD((function(e,t){return e&&t})),sM=uO(_d,oM,null,"bool"),uM={kernelName:_d,backendName:"cpu",kernelFunc:sM},cM=OD(Ad,(function(e){return e?0:1}),"bool"),lM={kernelName:Ad,backendName:"cpu",kernelFunc:cM},dM=UD((function(e,t){return e||t})),fM=uO(Rd,dM,null,"bool"),hM={kernelName:Rd,backendName:"cpu",kernelFunc:fM};var pM={kernelName:Dd,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.depthRadius,o=r.bias,s=r.alpha,u=r.beta;_D(a,"LRN");var c=a.shape[3],l=c-1,d=n.data.get(a.dataId).values,f=Ic(a.shape),h=new Float32Array(f);function p(e){for(var t=e%c,n=e-t+Math.max(0,t-i),r=e-t+Math.min(t+i,l),a=0;n<=r;n++){var o=d[n];a+=o*o}return a}for(var v=0;v<f;v++){var m=p(v),g=d[v]*Math.pow(o+s*m,-u);h[v]=g}return n.makeTensorInfo(a.shape,a.dtype,h)}};var vM={kernelName:Od,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.y,o=t.dy,s=r.depthRadius,u=r.bias,c=r.alpha,l=r.beta;_D(o,"LRNGrad");for(var d=Ic(o.shape),f=o.shape[3],h=n.data.get(o.dataId).values,p=n.data.get(a.dataId).values,v=n.data.get(i.dataId).values,m=new Float32Array(d),g=d,y=0;y<g;y++){for(var b=y%f,k=y-b+Math.max(0,b-s),w=y-b+Math.min(f,b+s+1),x=0,I=k;I<w;I++)x+=Math.pow(p[I],2);x=c*x+u;for(var S=k;S<w;S++){var T=-2*c*l*p[S]*v[y]/x;y===S&&(T+=Math.pow(x,-l)),T*=h[y],m[S]+=T}}return n.makeTensorInfo(o.shape,a.dtype,m)}};function mM(e,t,n,r){for(var a=Rc(r,Ic(n)),i=0;i<a.length;++i){for(var o=i*t,s=e[o],u=0;u<t;++u){var c=e[o+u];(Number.isNaN(c)||c>s)&&(s=c)}a[i]=s}return a}function gM(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.reductionIndices,o=r.keepDims,s=n,u=a.shape,c=u.length,l=_c(i,u),d=l,f=Vy(d,c),h=s.data.get(a.dataId).values;if(null!=f){for(var p=new Array(c),v=0;v<p.length;v++)p[v]=u[f[v]];h=EO(h,u,a.dtype,f,p),d=Wy(d.length,c),u=p}_D(a,"max"),By("max",d,c);var m=Py(u,d),g=(0,ge.Z)(m,2),y=g[0],b=mM(h,Ic(g[1]),y,a.dtype),k=s.write(b,y,a.dtype),w=y;o&&(w=zy(y,l));return{dataId:k,shape:w,dtype:a.dtype}}var yM={kernelName:Ld,backendName:"cpu",kernelFunc:gM},bM=UD((function(e,t){return Math.max(e,t)})),kM=uO(Fd,bM),wM={kernelName:Fd,backendName:"cpu",kernelFunc:kM};var xM={kernelName:Md,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;_D(a,"maxPool");var i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode;kc(Vg(o,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(o," and dilations '").concat(1,"'")}));var c,l=Ag(a.shape,i,o,1,s,u);if(1===l.filterWidth&&1===l.filterHeight&&Sc(l.inShape,l.outShape))c=PD({inputs:{x:a},backend:n});else{var d=n.data.get(a.dataId).values,f=Vc(a.shape),h=jO(d,a.shape,a.dtype,f,l,"max");c=n.makeTensorInfo(l.outShape,a.dtype,h.values)}return c}};var IM={kernelName:zd,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode,c=r.dataFormat;_D(a,"maxPool3d");var l=Rg(a.shape,i,o,1,s,u,c),d=HO(n.data.get(a.dataId).values,a.shape,a.dtype,Vc(a.shape),l,"max");return n.makeTensorInfo(d.shape,"float32",d.values)}};var SM={kernelName:Bd,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=r.filterSize,s=r.strides,u=r.pad,c=r.dimRoundingMode;_D([a,i],"maxPool3DGrad");for(var l=Rg(i.shape,o,s,1,u,c),d=function(e,t){for(var n=Yv(t.outShape,"int32"),r=t.strideDepth,a=t.strideHeight,i=t.strideWidth,o=t.dilationDepth,s=t.dilationHeight,u=t.dilationWidth,c=t.effectiveFilterDepth,l=t.effectiveFilterHeight,d=t.effectiveFilterWidth,f=t.padInfo.front,h=t.padInfo.top,p=t.padInfo.left,v=0;v<t.batchSize;++v)for(var m=0;m<t.inChannels;++m)for(var g=0;g<t.outDepth;++g){for(var y=g*r-f,b=y;b<0;)b+=o;for(var k=Math.min(t.inDepth,c+y),w=0;w<t.outHeight;++w){for(var x=w*a-h,I=x;I<0;)I+=s;for(var S=Math.min(t.inHeight,l+x),T=0;T<t.outWidth;++T){for(var E=T*i-p,N=E;N<0;)N+=u;for(var C=Math.min(t.inWidth,d+E),Z=Number.NEGATIVE_INFINITY,_=-1,A=b;A<k;A+=o)for(var R=A-y,D=I;D<S;D+=s)for(var O=D-x,L=N;L<C;L+=u){var F=L-E,M=e.get(v,A,D,L,m);M>=Z&&(Z=M,_=R*l*d+O*l+F)}n.set(_,v,g,w,T,m)}}}return n}(n.bufferSync(i),l),f=l.strideDepth,h=l.strideHeight,p=l.strideWidth,v=l.dilationDepth,m=l.dilationHeight,g=l.dilationWidth,y=l.effectiveFilterDepth,b=l.effectiveFilterHeight,k=l.effectiveFilterWidth,w=y-1-l.padInfo.front,x=k-1-l.padInfo.left,I=b-1-l.padInfo.top,S=Yv(i.shape,"float32"),T=n.bufferSync(a),E=0;E<l.batchSize;++E)for(var N=0;N<l.inChannels;++N)for(var C=0;C<l.inDepth;++C)for(var Z=0;Z<l.inHeight;++Z)for(var _=0;_<l.inWidth;++_){for(var A=C-w,R=Z-I,D=_-x,O=0,L=0;L<y;L+=v){var F=(A+L)/f;if(!(F<0||F>=l.outDepth||Math.floor(F)!==F))for(var M=0;M<b;M+=m){var P=(R+M)/h;if(!(P<0||P>=l.outHeight||Math.floor(P)!==P))for(var z=0;z<k;z+=g){var B=(D+z)/p;if(!(B<0||B>=l.outWidth||Math.floor(B)!==B)){var V=y*b*k-1-d.get(E,F,P,B,N)===L*b*k+M*k+z?1:0;if(0!==V)O+=T.get(E,F,P,B,N)*V}}}}S.set(O,E,C,Z,_,N)}return n.makeTensorInfo(S.shape,S.dtype,S.values)}};var TM={kernelName:Pd,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=i;_D([i,t.output],"maxPoolGrad");for(var s=r.filterSize,u=r.strides,c=r.pad,l=r.dimRoundingMode,d=Ag(o.shape,s,u,1,c,l),f=n.data.get(o.dataId).values,h=Yv(d.outShape,o.dtype,GO(f,o.shape,o.dtype,d).values),p=d.strideHeight,v=d.strideWidth,m=d.dilationHeight,g=d.dilationWidth,y=d.effectiveFilterHeight,b=d.effectiveFilterWidth,k=b-1-d.padInfo.left,w=y-1-d.padInfo.top,x=Yv(o.shape,"float32"),I=n.data.get(a.dataId).values,S=Yv(a.shape,"float32",I),T=0;T<d.batchSize;++T)for(var E=0;E<d.inChannels;++E)for(var N=0;N<d.inHeight;++N)for(var C=0;C<d.inWidth;++C){for(var Z=N-w,_=C-k,A=0,R=0;R<y;R+=m){var D=(Z+R)/p;if(!(D<0||D>=d.outHeight||Math.floor(D)!==D))for(var O=0;O<b;O+=g){var L=(_+O)/v;if(!(L<0||L>=d.outWidth||Math.floor(L)!==L)){var F=y*b-1-h.get(T,D,L,E)===R*b+O?1:0;if(0!==F)A+=S.get(T,D,L,E)*F}}}x.set(A,T,N,C,E)}return n.makeTensorInfo(x.shape,x.dtype,x.values)}};var EM={kernelName:Vd,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=n.filterSize,o=n.strides,s=n.pad,u=n.includeBatchInIndex,c=r;_D(a,"MaxPoolWithArgmax");var l=c.data.get(a.dataId).values,d=Ag(a.shape,i,o,[1,1],s),f=function(e,t,n,r,a){var i=jO(e,0,n,Vc(t),a,"max"),o=GO(e,t,n,a,!0,r);return[i.values,o.values]}(l,a.shape,a.dtype,u,d),h=(0,ge.Z)(f,2),p=h[0],v=h[1],m=c.write(p,d.outShape,a.dtype),g=c.write(v,d.outShape,a.dtype);return[{dataId:m,shape:d.outShape,dtype:a.dtype},{dataId:g,shape:d.outShape,dtype:"int32"}]}};var NM={kernelName:Ud,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims,s=_c(i,a.shape),u=Ic(Py(a.shape,s)[1]),c=[],l=n.makeTensorInfo([],"float32",new Float32Array([u]));c.push(l);var d=oO({inputs:{x:a},backend:n,attrs:{dtype:"float32"}});c.push(d);var f=cF({inputs:{a:d,b:l},backend:n});c.push(f);var h=GL({inputs:{x:f},backend:n,attrs:{axis:i,keepDims:o}});return c.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),h}};var CM={kernelName:Wd,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims;_D(a,"min");var s=_c(i,a.shape),u=s,c=Vy(u,a.shape.length),l=a;null!=c&&(l=NO({inputs:{x:a},backend:n,attrs:{perm:c}}),u=Wy(u.length,a.shape.length)),By("min",u,l.shape.length);for(var d=Py(l.shape,u),f=(0,ge.Z)(d,2),h=f[0],p=Ic(f[1]),v=Gc(Ic(h),l.dtype),m=n.data.get(l.dataId).values,g=0;g<v.length;++g){for(var y=g*p,b=m[y],k=0;k<p;++k){var w=m[y+k];(Number.isNaN(w)||w<b)&&(b=w)}v[g]=b}null!=c&&n.disposeIntermediateTensorInfo(l);var x=n.makeTensorInfo(h,l.dtype,v);if(o){var I=pO({inputs:{x:x},backend:n,attrs:{shape:zy(h,s)}});return n.disposeIntermediateTensorInfo(x),I}return x}},ZM=UD((function(e,t){return Math.min(e,t)})),_M=uO(jd,ZM),AM={kernelName:jd,backendName:"cpu",kernelFunc:_M};var RM={kernelName:Gd,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.paddings,o=r.mode;_D(a,"mirrorPad");for(var s=i.map((function(e,t){return e[0]+a.shape[t]+e[1]})),u=i.map((function(e){return e[0]})),c=i.map((function(e,t){return e[0]+a.shape[t]})),l="reflect"===o?0:1,d=n.data.get(a.dataId).values,f=a.shape.length,h=Vc(a.shape),p=Ic(s),v=s.length,m=Vc(s),g=Rc(a.dtype,p),y=0;y<p;y++){for(var b=Kc(y,v,m),k=0;k<v;k++)b[k]<u[k]?b[k]=2*u[k]-b[k]-l:b[k]>=c[k]&&(b[k]=2*(c[k]-1)-b[k]+l);b=b.map((function(e,t){return e-u[t]}));var w=$c(b,f,h);g[y]=d[w]}return{dataId:n.write(g,s,a.dtype),shape:s,dtype:a.dtype}}},DM=UD((function(e,t){var n=e%t;return e<0&&t<0||e>=0&&t>=0?n:(n+t)%t})),OM=uO(Hd,DM),LM={kernelName:Hd,backendName:"cpu",kernelFunc:OM};function FM(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,i=r.dim,o=a.shape.length,s=i;if(-1===s&&(s=o-1),s!==o-1)throw Error("Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(o," and dim was ").concat(s));var u=_c([s],a.shape),c=gM({inputs:{x:a},backend:n,attrs:{reductionIndices:u,keepDims:!1}}),l=zy(c.shape,u),d=pO({inputs:{x:c},backend:n,attrs:{shape:l}}),f=hF({inputs:{a:a,b:d},backend:n}),h=tF({inputs:{x:f},backend:n}),p=GL({inputs:{x:h},backend:n,attrs:{axis:u,keepDims:!1}}),v=pO({inputs:{x:p},backend:n,attrs:{shape:l}}),m=cF({inputs:{a:h,b:v},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(v),m}var MM={kernelName:zf,backendName:"cpu",kernelFunc:FM};var PM={kernelName:qd,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,i=r.numSamples,o=r.seed,s=r.normalized;_D(a,"multinomial");for(var u=s?a:FM({inputs:{logits:a},backend:n,attrs:{dim:-1}}),c=u.shape[0],l=u.shape[1],d=n.data.get(u.dataId).values,f=[c,i],h=Gc(Ic(f),"int32"),p=0;p<c;++p){var v=p*l,m=new Float32Array(l-1);m[0]=d[v];for(var g=1;g<m.length;++g)m[g]=m[g-1]+d[v+g];for(var y=ak.alea(o.toString()),b=p*i,k=0;k<i;++k){var w=y();h[b+k]=m.length;for(var x=0;x<m.length;x++)if(w<m[x]){h[b+k]=x;break}}}return s||n.disposeIntermediateTensorInfo(u),n.makeTensorInfo(f,"int32",h)}};function zM(e,t,n){var r=Ph(-1,n);return VL([],t,r,e,n)}var BM={kernelName:Kd,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x;_D(r,"neg");var a=zM(n.data.get(r.dataId).values,r.shape,r.dtype),i=(0,ge.Z)(a,2),o=i[0],s=i[1];return n.makeTensorInfo(s,r.dtype,o)}},VM=Gw;var UM={kernelName:Yd,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold;_D(a,"NonMaxSuppression");var c=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values,d=VM(c,l,o,s,u).selectedIndices;return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}},WM=Hw;var jM={kernelName:Qd,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,c=r.padToMaxOutputSize;_D(a,"NonMaxSuppressionPadded");var l=n.data.get(a.dataId).values,d=n.data.get(i.dataId).values,f=WM(l,d,o,s,u,c),h=f.selectedIndices,p=f.validOutputs;return[n.makeTensorInfo([h.length],"int32",new Int32Array(h)),n.makeTensorInfo([],"int32",new Int32Array([p]))]}},GM=qw;var HM={kernelName:Jd,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,c=r.softNmsSigma;_D(a,"NonMaxSuppressionWithScore");var l=n.data.get(a.dataId).values,d=n.data.get(i.dataId).values,f=GM(l,d,o,s,u,c),h=f.selectedIndices,p=f.selectedScores;return[n.makeTensorInfo([h.length],"int32",new Int32Array(h)),n.makeTensorInfo([p.length],"float32",new Float32Array(p))]}},qM=UD((function(e,t){return e!==t?1:0})),$M=uO(Xd,qM,null,"bool"),KM={kernelName:Xd,backendName:"cpu",kernelFunc:$M};var XM={kernelName:tf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,i=r.dtype,o=r.depth,s=r.onValue,u=r.offValue;_D(a,"oneHot");var c=Ic(a.shape),l=new Float32Array(c*o);l.fill(u);for(var d=n.data.get(a.dataId).values,f=0;f<c;++f)d[f]>=0&&d[f]<o&&(l[f*o+d[f]]=s);return n.makeTensorInfo([].concat((0,me.Z)(a.shape),[o]),i,l)}};function YM(e){var t=e.inputs,n=e.backend,r=t.x;if("string"===r.dtype)throw new Error("zerosLike is not supported for string tensors");if("complex64"===r.dtype){var a=rO({inputs:{input:r},backend:n}),i=YM({inputs:{x:a},backend:n}),o=hL({inputs:{input:r},backend:n}),s=YM({inputs:{x:o},backend:n}),u=eO({inputs:{real:i,imag:s},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),u}return bF({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}var QM={kernelName:uh,backendName:"cpu",kernelFunc:YM};var JM={kernelName:ef,backendName:"cpu",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=n.x;if("string"===a.dtype)throw new Error("onesLike is not supported for string tensors");if("complex64"===a.dtype){var i=rO({inputs:{input:a},backend:r}),o=e({inputs:{x:i},backend:r}),s=hL({inputs:{input:a},backend:r}),u=YM({inputs:{x:s},backend:r}),c=eO({inputs:{real:o,imag:u},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(u),c}return bF({backend:r,attrs:{shape:a.shape,value:1,dtype:a.dtype}})}};function eP(e){var t=e.inputs,n=e.backend,r=e.attrs.axis;if(1===t.length)return rF({inputs:{input:t[0]},backend:n,attrs:{dim:r}});var a=t[0].shape,i=t[0].dtype;t.forEach((function(e){wc(a,e.shape,"All tensors passed to stack must have matching shapes"),kc(i===e.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var o=[],s=t.map((function(e){var t=rF({inputs:{input:e},backend:n,attrs:{dim:r}});return o.push(t),t})),u=vL({inputs:s,backend:n,attrs:{axis:r}});return o.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),u}var tP={kernelName:nf,backendName:"cpu",kernelFunc:eP};var nP={kernelName:rf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.paddings,o=r.constantValue;_D(a,"pad");var s=i.map((function(e,t){return e[0]+a.shape[t]+e[1]})),u=i.map((function(e){return e[0]})),c=n.data.get(a.dataId).values,l=Ic(a.shape),d=a.shape.length,f=Vc(a.shape),h=Ic(s),p=s.length,v=Vc(s),m=Rc(a.dtype,h);0!==o&&m.fill(o);for(var g=0;g<l;g++){m[$c(Kc(g,d,f).map((function(e,t){return e+u[t]})),p,v)]=c[g]}return{dataId:n.write(m,s,a.dtype),shape:s,dtype:a.dtype}}},rP=UD((function(e,t){return Math.pow(e,t)})),aP=uO(af,rP),iP={kernelName:af,backendName:"cpu",kernelFunc:aP};function oP(e,t,n,r){for(var a=Py(e,r),i=(0,ge.Z)(a,2),o=i[0],s=i[1],u=hp(t,"int32"),c=Gc(Ic(o),u),l=Ic(s),d=0;d<c.length;++d){for(var f=d*l,h=1,p=0;p<l;++p)h*=n[f+p];c[d]=h}return{outVals:c,outShape:o,outDtype:u}}var sP={kernelName:sf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims;_D(a,"prod");var s=a.shape.length,u=_c(i,a.shape),c=Vy(u,s),l=u,d=a,f=[];null!=c&&(d=NO({inputs:{x:a},backend:n,attrs:{perm:c}}),f.push(d),l=Wy(l.length,s));var h=n.data.get(d.dataId).values,p=oP(d.shape,d.dtype,h,l),v=p.outVals,m=p.outShape,g=p.outDtype,y=m;return o&&(y=zy(m,u)),f.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(y,g,v)}};function uP(e,t,n,r){var a=[],i=0,o=t.length-1+n.length,s=new Array(o).fill(null).map((function(){return[0]}));!function(e,t){for(var n=0;n<e.length;++n){var r=e[n],a=n===e.length-1?t:e[n+1].length;if(0===r.length)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>a)throw new Error("Ragged splits must not point past values");for(var i=1;i<r.length;++i)if(r[i-1]>r[i])throw new Error("Ragged splits must be sorted in ascending order")}}(n,r);for(var u=1,c=0;c<t.length-1;++c){u*=t[c];for(var l=t[c+1],d=1;d<u+1;++d)s[c].push(d*l)}for(var f=0;f<e.length;++f){for(var h=e[f],p=e[f]+1,v=0;v<n.length;++v){var m=n[v],g=v+t.length-1;if(g>=0)for(var y=s[g],b=y[y.length-1]-m[h],k=h;k<p;++k)s[g].push(m[k+1]+b);h=m[h],p=m[p]}p!==h&&(a.push([h,p]),i+=p-h)}return{outSplits:s,valueSlices:a,numValues:i}}function cP(e,t){for(var n=e.slice(0,t);n.length<t;)n.push(1);for(var r=t;r<e.length;r++)n[t-1]*=e[r];return n}function lP(e,t,n,r,a){var i=t.slice();i[0]=a;var o=Dc(n,Ic(i)),s=e.length;return function(e,t,n,r,a,i){var o,s=cP(t,2)[1],u=cP(i,2)[1],c=0,l=(0,Ht.Z)(n);try{for(l.s();!(o=l.n()).done;)for(var d=o.value,f=d[0];f<d[1];++f){for(var h=0;h<r;++h)a[c*u+h]=e[f*s+h];++c}}catch(yhe){l.e(yhe)}finally{l.f()}}(e,t,r,0===s?0:s/t[0],o,i),[o,i]}function dP(e,t,n,r,a,i,o,s){if(0===e.length)throw new Error("paramsNestedSplits must be non empty");if(0===t[0].length)throw new Error("Split tensors must not be scalars");if(function(e,t,n){e.forEach((function(e,r){if(e<0||e>=n){var a=Kc(r,t.length,Vc(t)).join(",");throw new Error("indices[".concat(a,"] = ").concat(e," is not in [0, ").concat(n,")"))}}))}(i,o,t[0][0]-1),0===r.length)throw new Error("params.rank must be nonzero");var u=uP(i,o,e,r[0]),c=u.outSplits,l=u.valueSlices,d=u.numValues,f=function(e){for(var t=[],n=function(){var n=Dc("int32",e[r].length);t.push(n),e[r].forEach((function(e,t){return n[t]=e}))},r=0;r<e.length;++r)n();return t}(c),h=lP(n,r,a,l,d);return[f,h[0],h[1]]}var fP={kernelName:uf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.paramsNestedSplits,i=t.paramsDenseValues,o=t.indices,s=(r.outputRaggedRank,a.map((function(e){return n.data.get(e.dataId).values}))),u=a.map((function(e){return e.shape})),c=n.data.get(i.dataId).values,l=n.data.get(o.dataId).values,d=dP(s,u,c,i.shape,i.dtype,l,o.shape),f=(0,ge.Z)(d,3),h=f[0],p=f[1],v=f[2],m=h.map((function(e){return n.makeTensorInfo([e.length],"int32",e)})),g=n.makeTensorInfo(v,i.dtype,p);return m.concat([g])}},hP=2147483647;function pP(e,t,n,r,a,i,o){if(t.length>1)throw new Error("starts must be a scalar or vector");if(a.length>1)throw new Error("limits must be a scalar or vector");if(o.length>1)throw new Error("deltas must be a scalar or vector");var s=0===t.length,u=0===a.length,c=0===o.length,l=[];s||l.push(t[0]),u||l.push(a[0]),c||l.push(o[0]);for(var d=1;d<l.length;++d)if(l[d]!==l[d-1])throw new Error("starts, limits, and deltas must have the same shape");var f=0===l.length?1:l[0],h=Dc("int32",f+1);h[0]=0;for(var p=0;p<f;++p){var v=s?e[0]:e[p],m=u?r[0]:r[p],g=c?i[0]:i[p];if(0===g)throw new Error("Requires delta != 0");var y=void 0;if(g>0&&m<v||g<0&&m>v)y=0;else if((y=Math.ceil(Math.abs((m-v)/g)))>hP)throw new Error("Requires ((limit - start) / delta) <= ".concat(hP));h[p+1]=h[p]+y}for(var b=Dc(n,h[f]),k=0,w=0;w<f;++w)for(var x=h[w+1]-h[w],I=s?e[0]:e[w],S=c?i[0]:i[w],T=0;T<x;++T)b[k++]=I,I+=S;return[h,b]}var vP={kernelName:cf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.starts,a=t.limits,i=t.deltas,o=n.data.get(r.dataId).values,s=n.data.get(a.dataId).values,u=n.data.get(i.dataId).values,c=pP(o,r.shape,r.dtype,s,a.shape,u,i.shape),l=(0,ge.Z)(c,2),d=l[0],f=l[1];return[n.makeTensorInfo([d.length],"int32",d),n.makeTensorInfo([f.length],r.dtype,f)]}},mP=Ax,gP=function(){function e(t,n,r,a,i,o,s,u,c,l){var d;(0,Se.Z)(this,e),this.shape=t,this.shapeShape=n,this.values=r,this.valuesShape=a,this.valuesDType=i,this.defaultValue=o,this.defaultValueShape=s,this.rowPartitionValues=u,this.rowPartitionValuesShapes=c,this.rowPartitionTypes=function(e){var t,n={FIRST_DIM_SIZE:Ax.FIRST_DIM_SIZE,VALUE_ROWIDS:Ax.VALUE_ROWIDS,ROW_LENGTHS:Ax.ROW_LENGTHS,ROW_SPLITS:Ax.ROW_SPLITS,ROW_LIMITS:Ax.ROW_LIMITS,ROW_STARTS:Ax.ROW_STARTS},r=[],a=(0,Ht.Z)(e);try{for(a.s();!(t=a.n()).done;){var i=t.value;if(!(i in n))break;r.push(n[i])}}catch(yhe){a.e(yhe)}finally{a.f()}return r}(l),this.raggedRank=0===(d=this.rowPartitionTypes).length?0:d[0]===Ax.FIRST_DIM_SIZE?d.length-1:d.length}return(0,Te.Z)(e,[{key:"getRowPartitionTypeByDimension",value:function(e){return this.rowPartitionTypes[0]===mP.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}},{key:"getRowPartitionTensor",value:function(e){return this.rowPartitionTypes[0]===mP.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}},{key:"getMaxWidth",value:function(t){var n=this.getRowPartitionTensor(t-1);switch(this.getRowPartitionTypeByDimension(t-1)){case mP.VALUE_ROWIDS:return e.getMaxWidthValueRowID(n);case mP.ROW_SPLITS:return e.getMaxWidthRowSplit(n);default:throw new Error("Cannot handle partition type ".concat(mP[this.getRowPartitionTypeByDimension(t-1)]))}}},{key:"tensorShapeFromTensor",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(0===t.length){if(-1===e[0])return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return bP(e,n)}},{key:"calculateOutputSize",value:function(e){var t=this.valuesShape;!function(e,t){if(null!=e&&null!=t){var n=e.length,r=t.length;if(n>=r)throw new Error("defaultValue.shape=".concat(e," and ragged tensor flatValues.shape=").concat(t,", are incompatible: defaultValue.rank = ").concat(n," must be less than ragged tensor input flatValues.rank = ").concat(r,")"));for(var a=0;a<Math.min(n,r-1);++a){var i=e[a],o=t[a+1];if(i>=0&&o>=0&&1!==i&&i!==o)throw new Error("defaultValue.shape=".concat(e,", and ragged tensor input flatValues.shape=").concat(t," are incompatible: defaultValue.shape[").concat(a-e.length,"] = ").concat(i," but ragged tensor input.flatValues.shape[").concat(a-e.length,"] = ").concat(o))}}}(this.defaultValueShape,t);var n=this.tensorShapeFromTensor(this.shape,this.shapeShape),r=function(e,t,n){var r=new Array;if(null==n&&null==t)return r;if(null==t)for(;r.length<e+n.length;)r.push(-1);else r=t.slice();if(null==n)return r;if(e+n.length!==r.length)throw new Error("rt input.shape and shape=".concat(t," are incompatible: rt input.rank = ").concat(e+n.length,", but shape.rank = ").concat(r.length));for(var a=1;a<n.length;++a){var i=n[a],o=r[r.length-n.length+a],s=r[o];if(i>=0)if(s>=0){if(s!==i)throw new Error("rt input.shape and shape=".concat(t," are incompatible: rt input.shape[").concat(a+e,"] = ").concat(i," but shape[").concat(a+e,"] = ").concat(s))}else r[o]=i}return r}(this.raggedRank,n,t),a=r;a[0]<0&&(a[0]=e);for(var i=1;i<=this.raggedRank;++i)a[i]<0&&(a[i]=this.getMaxWidth(i));return a}},{key:"calculateFirstParentOutputIndex",value:function(e,t,n){for(var r=Math.min(e,n),a=[],i=0,o=0;o<r;++o,i+=t)a.push(i);for(var s=r;s<e;++s)a.push(-1);return kc(a.length===e,(function(){return"Final length of result must be equal to firstDimension."})),a}},{key:"calculateOutputIndexRowSplit",value:function(e,t,n,r){for(var a=e.length,i=[],o=0;o<a-1;++o){var s=e[o+1]-e[o],u=Math.min(r,s),c=t[o];-1===c&&(u=0);for(var l=0;l<u;++l)i.push(c),c+=n;for(var d=0;d<s-u;++d)i.push(-1)}if(a>0&&i.length!==e[a-1])throw new Error("Invalid row split size.");return i}},{key:"calculateOutputIndexValueRowID",value:function(e,t,n,r){var a=e.length,i=[];if(0===a)return[];var o=0,s=e[0];if(s>=t.length)throw new Error("Got currentValueRowId=".concat(s,", which is not less than ").concat(t.length));var u=t[s];i.push(u);for(var c=1;c<a;++c){var l=e[c];if(l===s)u>=0&&(++o<r?u+=n:u=-1);else{if(o=0,s=l,l>=t.length)throw new Error("Got nextValueRowId=".concat(l," which is not less than ").concat(t.length));u=t[l]}i.push(u)}if(i.length!==e.length)throw new Error("Invalid row ids.");return i}},{key:"calculateOutputIndex",value:function(e,t,n,r){var a=this.getRowPartitionTensor(e),i=this.getRowPartitionTypeByDimension(e);switch(i){case mP.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(a,t,n,r);case mP.ROW_SPLITS:if(a.length-1>t.length)throw new Error("Row partition size is greater than output size: ".concat(a.length-1," > ").concat(t.length));return this.calculateOutputIndexRowSplit(a,t,n,r);default:throw new Error("Unsupported partition type: ".concat(mP[i]))}}},{key:"getFirstDimensionSize",value:function(){var e=this.rowPartitionValues[0];if(0===this.rowPartitionTypes.length)throw new Error("No row_partition_types given.");var t=this.rowPartitionTypes[0];switch(t){case mP.FIRST_DIM_SIZE:return e[0];case mP.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case mP.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error("Cannot handle type ".concat(mP[t]))}}},{key:"compute",value:function(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");var e=this.getFirstDimensionSize(),t=this.calculateOutputSize(e),n=new Array(this.raggedRank+1);n[n.length-1]=1;for(var r=n.length-2;r>=0;--r)n[r]=n[r+1]*t[r+1];var a=bP(t,!1),i=Dc(this.valuesDType,Ic(a));if(n[0]*t[0]>0){for(var o=this.calculateFirstParentOutputIndex(e,n[0],t[0]),s=1;s<=this.raggedRank;++s){o=this.calculateOutputIndex(s-1,o,n[s],t[s])}this.setOutput(this.raggedRank,o,i,a)}return[a,i]}},{key:"setOutput",value:function(e,t,n,r){if(0!==n.length){var a=this.values,i=n,o=r.slice(),s=Ic(o=o.slice(e+1)),u=t.length,c=this.defaultValue;if(c.length!==s&&1!==c.length){var l=this.defaultValueShape;rm((function(){var e=Gg(c,l),t=sy(e,o);c=t.dataSync()}))}for(var d=0,f=0,h=0,p=0;p<=u;++p){var v=p<u?t[p]:-1;if(v!==h){if(f<h){var m=a.subarray(d*s);yP(i.subarray(f*s),m,(h-f)*s)}if(p>=u){var g=n.length;v=Math.floor(g/s)}if(v>h)if(1===this.defaultValue.length)i.subarray(h*s,v*s).fill(this.defaultValue[0]),h=v;else for(;v>h;){yP(i.slice(h*s),c,s),++h}v<0?(d=p+1,f=h):(d=p,h=(f=h)+1)}else++h}}}}],[{key:"getMaxWidthRowSplit",value:function(e){var t=e.length;if(0===t||1===t)return 0;for(var n=0,r=0;r<t-1;++r){var a=e[r+1]-e[r];a>n&&(n=a)}return n}},{key:"getMaxWidthValueRowID",value:function(e){var t=e.length;if(0===t)return 0;for(var n=0,r=e[0],a=0,i=1;i<t;++i){var o=e[i];o!==r&&(r=o,a=Math.max(i-n,a),n=i)}return Math.max(t-n,a)}}]),e}();function yP(e,t,n){for(var r=0;r<n;r++)e[r]=t[r]}function bP(e,t){var n,r=[],a=(0,Ht.Z)(e);try{for(a.s();!(n=a.n()).done;){var i=n.value;if(i<0){if(!t)throw new Error("Dimension ".concat(i," must be >= 0"));if(i<-1)throw new Error("Dimension ".concat(i," must be >= -1"));i=-1}r.push(i)}}catch(yhe){a.e(yhe)}finally{a.f()}return r}function kP(e,t,n,r,a,i,o,s,u,c){return new gP(e,t,n,r,a,i,o,s,u,c).compute()}var wP={kernelName:lf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.shape,i=t.values,o=t.defaultValue,s=t.rowPartitionTensors,u=r.rowPartitionTypes,c=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values,d=n.data.get(o.dataId).values,f=s.map((function(e){return n.data.get(e.dataId).values})),h=s.map((function(e){return e.shape})),p=kP(c,a.shape,l,i.shape,i.dtype,d,o.shape,f,h,u),v=(0,ge.Z)(p,2),m=v[0],g=v[1];return n.makeTensorInfo(m,i.dtype,g)}};function xP(e,t,n,r){if(e===t||e<t&&n<0||t<e&&n>1)return Gc(0,r);var a=Gc(Math.abs(Math.ceil((t-e)/n)),r);t<e&&1===n&&(n=-1),a[0]=e;for(var i=1;i<a.length;i++)a[i]=a[i-1]+n;return a}var IP={kernelName:df,backendName:"cpu",kernelFunc:function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,i=n.dtype,o=xP(r,a,n.step,i);return t.makeTensorInfo([o.length],i,o)}},SP=OD(hf,(function(e){return 1/e})),TP={kernelName:hf,backendName:"cpu",kernelFunc:SP};var EP={kernelName:yf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=r.alignCorners,o=r.halfPixelCenters,s=r.size;_D(a,"resizeBilinear");for(var u=Vc(a.shape),c=(0,ge.Z)(s,2),l=c[0],d=c[1],f=(0,ge.Z)(a.shape,4),h=f[0],p=f[1],v=f[2],m=f[3],g=n.data.get(a.dataId).values,y=new Float32Array(Ic([h,l,d,m])),b=[i&&l>1?p-1:p,i&&d>1?v-1:v],k=[i&&l>1?l-1:l,i&&d>1?d-1:d],w=0,x=b[0]/k[0],I=b[1]/k[1],S=0;S<h;S++)for(var T=0;T<l;T++){var E=void 0;E=o?x*(T+.5)-.5:x*T;for(var N=Math.max(0,Math.floor(E)),C=E-N,Z=Math.min(p-1,Math.ceil(E)),_=S*u[0]+N*u[1],A=S*u[0]+Z*u[1],R=0;R<d;R++){var D=void 0;D=o?I*(R+.5)-.5:I*R;for(var O=Math.max(0,Math.floor(D)),L=D-O,F=Math.min(v-1,Math.ceil(D)),M=_+O*u[2],P=A+O*u[2],z=_+F*u[2],B=A+F*u[2],V=0;V<m;V++){var U=g[M+V],W=g[P+V],j=U+(g[z+V]-U)*L,G=j+(W+(g[B+V]-W)*L-j)*C;y[w++]=G}}}return n.makeTensorInfo([h,l,d,m],"float32",y)}};var NP={kernelName:bf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=t.dy,o=r.alignCorners;_D([i,a],"resizeBilinearGrad");for(var s=Vc(a.shape),u=(0,ge.Z)(a.shape,4),c=u[0],l=u[1],d=u[2],f=u[3],h=(0,ge.Z)(i.shape,3),p=h[1],v=h[2],m=new Float32Array(c*l*d*f),g=[o&&p>1?l-1:l,o&&v>1?d-1:d],y=[o&&p>1?p-1:p,o&&v>1?v-1:v],b=g[0]/y[0],k=g[1]/y[1],w=n.data.get(i.dataId).values,x=0,I=0;I<c;I++)for(var S=I*s[0],T=0;T<p;T++)for(var E=T*b,N=Math.floor(E),C=Math.min(Math.ceil(E),l-1),Z=S+N*s[1],_=S+C*s[1],A=E-N,R=1-A,D=0;D<v;D++)for(var O=D*k,L=Math.floor(O),F=Math.min(Math.ceil(O),d-1),M=O-L,P=1-M,z=Z+L*s[2],B=Z+F*s[2],V=_+L*s[2],U=_+F*s[2],W=R*P,j=R*M,G=A*P,H=A*M,q=0;q<f;q++){var $=w[x++];m[z+q]+=$*W,m[B+q]+=$*j,m[V+q]+=$*G,m[U+q]+=$*H}return n.makeTensorInfo([c,d,l,f],"float32",m)}};var CP={kernelName:mf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=r.alignCorners,o=r.halfPixelCenters,s=r.size;_D(a,"resizeNearestNeighbor");for(var u=Vc(a.shape),c=(0,ge.Z)(s,2),l=c[0],d=c[1],f=(0,ge.Z)(a.shape,4),h=f[0],p=f[1],v=f[2],m=f[3],g=n.data.get(a.dataId).values,y=new Float32Array(h*l*d*m),b=[i&&l>1?p-1:p,i&&d>1?v-1:v],k=[i&&l>1?l-1:l,i&&d>1?d-1:d],w=b[0]/k[0],x=b[1]/k[1],I=0,S=0;S<h;S++)for(var T=S*u[0],E=0;E<l;E++){var N=o?w*(E+.5):w*E,C=Math.min(p-1,i?Math.round(N):Math.floor(N));o&&(C=Math.max(0,C));for(var Z=T+C*u[1],_=0;_<d;_++){var A=o?x*(_+.5):x*_,R=Math.min(v-1,i?Math.round(A):Math.floor(A));o&&(R=Math.max(0,R));for(var D=Z+R*u[2],O=0;O<m;O++){var L=g[D+O];y[I++]=L}}}return n.makeTensorInfo([h,l,d,m],a.dtype,y)}};var ZP={kernelName:gf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=t.dy,o=r.alignCorners;_D([i,a],"resizeNearestNeighborGrad");for(var s=Vc(a.shape),u=Vc(i.shape),c=(0,ge.Z)(a.shape,4),l=c[0],d=c[1],f=c[2],h=c[3],p=(0,ge.Z)(i.shape,3),v=p[1],m=p[2],g=new Float32Array(l*d*f*h),y=n.data.get(i.dataId).values,b=[o&&v>1?d-1:d,o&&m>1?f-1:f],k=[o&&v>1?v-1:v,o&&m>1?m-1:m],w=b[0]/k[0],x=b[1]/k[1],I=1/w,S=1/x,T=2*Math.ceil(I)+2,E=2*Math.ceil(S)+2,N=0;N<l;N++)for(var C=N*s[0],Z=0;Z<d;Z++)for(var _=C+Z*s[1],A=Math.floor(Z*I),R=Math.floor(A-T/2),D=0;D<f;D++)for(var O=_+D*s[2],L=Math.floor(D*S),F=Math.floor(L-E/2),M=0;M<h;M++){for(var P=0,z=0;z<T;z++){var B=z+R;if(!(B<0||B>=v)){var V=C+B*u[1],U=B*w;if(Z===Math.min(d-1,o?Math.round(U):Math.floor(U)))for(var W=0;W<E;W++){var j=W+F;if(!(j<0||j>=m)){var G=V+j*u[2],H=j*x;D===Math.min(f-1,o?Math.round(H):Math.floor(H))&&(P+=y[G+M])}}}}g[O+M]=P}return n.makeTensorInfo(a.shape,a.dtype,g)}};var _P={kernelName:wf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.dims;_D(a,"reverse");var o=a.shape.length,s=_c(i,a.shape);if(0===o)return PD({inputs:{x:a},backend:n});for(var u=new tp(a.shape,a.dtype),c=n.bufferSync(a),l=function(){var e=u.indexToLoc(d),t=e.slice();s.forEach((function(e){return t[e]=a.shape[e]-1-t[e]})),u.set.apply(u,[c.get.apply(c,(0,me.Z)(t))].concat((0,me.Z)(e)))},d=0;d<u.size;d++)l();return n.makeTensorInfo(u.shape,u.dtype,u.values)}},AP={kernelName:dh,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.attrs,r=e.backend,a=t.image,i=n.radians,o=n.fillValue,s=n.center,u=r,c=Rc(a.dtype,Ic(a.shape)),l=(0,ge.Z)(a.shape,4),d=l[0],f=l[1],h=l[2],p=l[3],v=$x(s,f,h),m=(0,ge.Z)(v,2),g=m[0],y=m[1],b=Math.sin(i),k=Math.cos(i),w=u.data.get(a.dataId).values,x=0;x<d;x++)for(var I=x*h*f*p,S=0;S<f;S++)for(var T=S*(h*p),E=0;E<h;E++)for(var N=E*p,C=0;C<p;C++){var Z=[d,S,E,C],_=Z[2],A=Z[1],R=(_-g)*k-(A-y)*b,D=(_-g)*b+(A-y)*k;R=Math.round(R+g),D=Math.round(D+y);var O=o;if("number"!==typeof o&&(O=3===C?255:o[C]),R>=0&&R<h&&D>=0&&D<f)O=w[I+D*(h*p)+R*p+C];c[I+T+N+C]=O}return{dataId:u.write(c,a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}},RP=OD(xf,(function(e){var t=Math.floor(e);return e-t<.5?Math.floor(e):e-t>.5?Math.ceil(e):t%2===0?t:t+1})),DP={kernelName:xf,backendName:"cpu",kernelFunc:RP},OP=DD((function(e){return 1/Math.sqrt(e)})),LP=LD(If,OP),FP={kernelName:If,backendName:"cpu",kernelFunc:LP};function MP(e,t,n,r,a,i,o,s,u,c){var l=[r/a,a],d=e.values,f=t.values;if(0===r)return Yv(n,t.dtype);var h=u instanceof tp?u:Yv(l,t.dtype);"string"===typeof u||"number"===typeof u?h.values.fill(u):"boolean"===typeof u&&h.values.fill(+u);for(var p=0;p<i;p++){for(var v=[],m=0,g=0;g<o;g++){var y=d[p*o+g];v.push(y),m+=y*s[g]}if(m<0||m>=r/a)throw new Error("Invalid indices: ".concat(v," does not index into ").concat(n));for(var b=0;b<a;b++)c?h.values[m*a+b]+=f[p*a+b]:h.values[m*a+b]=0===t.rank?f[0]:f[p*a+b]}return h}var PP={kernelName:Sf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,i=t.updates,o=r.shape,s=Jk(0,a,o),u=s.sliceRank,c=s.numUpdates,l=s.sliceSize,d=s.strides,f=s.outputSize,h=MP(n.bufferSync(a),n.bufferSync(i),o,f,l,c,u,d,0,!0);return n.makeTensorInfo(o,h.dtype,h.values)}};function zP(e,t){for(var n=0,r=e.length,a=0;n<r;)e[a=Math.floor((n+r)/2)]<t?n=a+1:r=a;return r}function BP(e,t){for(var n=0,r=e.length,a=0;n<r;)e[a=Math.floor((n+r)/2)]<=t?n=a+1:r=a;return r}var VP={kernelName:Ef,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.sortedSequence,i=t.values,o=r.side,s=function(e,t,n,r,a,i){for(var o=Dc("int32",n*a),s=0;s<n;++s)for(var u=e.slice(s*r,(s+1)*r),c=s*a,l=0;l<a;++l)o[c+l]="left"===i?zP(u,t[l+c]):BP(u,t[l+c]);return o}(n.data.get(a.dataId).values,n.data.get(i.dataId).values,a.shape[0],a.shape[1],i.shape[1],o);return n.makeTensorInfo(i.shape,"int32",s)}};var UP={kernelName:Nf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.condition,a=t.t,i=t.e;_D([r,a,i],"select");for(var o=r.shape.length,s=n.data.get(r.dataId).values,u=n.data.get(a.dataId).values,c=n.data.get(i.dataId).values,l=hp(a.dtype,i.dtype),d=Gc(Ic(a.shape),l),f=0,h=0===o||o>1||1===a.shape.length?1:Ic(a.shape.slice(1)),p=0;p<s.length;p++)for(var v=0;v<h;v++)1===s[p]?d[f++]=u[p]:d[f++]=c[p];return n.makeTensorInfo(a.shape,l,d)}},WP=OD(Cf,(function(e){return e>=0?1.0507009873554805*e:1.7580993408473768*(Math.exp(e)-1)})),jP={kernelName:Cf,backendName:"cpu",kernelFunc:WP},GP=OD(Rf,(function(e){return e<0?-1:e>0?1:0})),HP={kernelName:Rf,backendName:"cpu",kernelFunc:GP},qP=OD(_f,(function(e){return Math.sin(e)})),$P={kernelName:_f,backendName:"cpu",kernelFunc:qP},KP=OD(Af,(function(e){return Math.sinh(e)})),XP={kernelName:Af,backendName:"cpu",kernelFunc:KP},YP=Math.log(1.1920928955078125e-7)+2,QP=OD(Of,(function(e){var t=e>-YP,n=e<YP,r=Math.exp(e);return n?r:t?e:Math.log(1+r)})),JP={kernelName:Of,backendName:"cpu",kernelFunc:QP};var ez={kernelName:Mf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockShape,o=r.paddings;_D([a],"spaceToBatchND");var s=Ic(i),u=[[0,0]];u.push.apply(u,(0,me.Z)(o));for(var c=1+i.length;c<a.shape.length;++c)u.push([0,0]);var l=nP.kernelFunc({inputs:{x:a},backend:n,attrs:{paddings:u,constantValue:0}}),d=Kx(l.shape,i,s,!1),f=Xx(d.length,i.length,!1),h=Yx(l.shape,i,s,!1),p=pO({inputs:{x:l},backend:n,attrs:{shape:d}}),v=NO({inputs:{x:p},backend:n,attrs:{perm:f}}),m=pO({inputs:{x:v},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(v),m}};function tz(e,t,n,r,a,i,o){var s=t[0],u=i[0],c=new Array(u),l=new Array(s),d=t[1];if(0===u){if(0!==s)throw new Error("Received SparseTensor with denseShape[0] = 0 but\n  indices.shape[0] = ".concat(s));return[Dc(n,0),[0,d],Dc(a,0),c,l]}for(var f,h=!0,p=0,v=new Array(u).fill(0),m=0;m<s;++m){var g=e[m*d];if(g<0)throw new Error((f=g,"indices(".concat(m,", 0) is invalid: ").concat(f," < 0")));if(g>=u)throw new Error(SI(m,g,u));++v[g],h=h&&g>=p,p=g}for(var y=!0,b=0;b<u;++b){var k=0===v[b];c[b]=k,y=y&&!k,v[b]=Math.max(v[b],1),b>0&&(v[b]+=v[b-1])}if(y&&h){for(var w=e,x=r,I=0;I<s;++I)l[I]=I;return[w,[s,d],x,c,l]}for(var S=v[u-1],T=Dc(n,S*d),E=Dc(a,S),N=new Array(u).fill(0),C=0;C<s;++C){var Z=e[C*d],_=N[Z],A=(0===Z?0:v[Z-1])+_;N[Z]++;for(var R=0;R<d;++R)T[A*d+R]=e[C*d+R];E[A]=r[C],l[C]=A}for(var D=0;D<u;++D){if(0===N[D]){var O=0===D?0:v[D-1];T[O*d+0]=D;for(var L=1;L<d;++L)T[O*d+L]=0;E[O]=o}}return[T,[S,d],E,c,l]}var nz={kernelName:Bf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.indices,a=t.values,i=t.denseShape,o=t.defaultValue;if(1!==i.shape.length)throw new Error("Dense shape must be a vector, saw:\n        ".concat(i.shape));if(2!==r.shape.length)throw new Error("Indices must be a matrix, saw:\n        ".concat(r.shape));if(1!==a.shape.length)throw new Error("Values must be a vector, saw:\n        ".concat(a.shape));if(0!==o.shape.length)throw new Error("Default value must be a scalar, saw:\n        ".concat(o.shape));var s=n.data.get(r.dataId).values,u=n.data.get(a.dataId).values,c=n.data.get(i.dataId).values,l=n.data.get(o.dataId).values[0],d=tz(s,r.shape,r.dtype,u,a.dtype,c,l),f=(0,ge.Z)(d,5),h=f[0],p=f[1],v=f[2],m=f[3],g=f[4];return[n.makeTensorInfo(p,r.dtype,h),n.makeTensorInfo([p[0]],a.dtype,v),n.makeTensorInfo([m.length],"bool",new Uint8Array(m.map((function(e){return Number(e)})))),n.makeTensorInfo([g.length],r.dtype,new Int32Array(g))]}};function rz(e,t,n,r,a){for(var i,o,s=Ic(r),u=t[0],c=a.length,l=[],d=1,f=-1,h=0;h<c;++h){var p=a[h];if(-1===p){if(-1!==f)throw new Error((o=h,"only one output dimension may be -1, not both ".concat(f," and ").concat(o)));f=h,l.push(1)}else{if(p<0)throw new Error((i=p,"size ".concat(h," must be non-negative, not ").concat(i)));d*=p,l.push(p)}}if(-1!==f){if(d<=0)throw new Error("reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero");var v=Math.trunc(s/d);if(d*v!==s)throw new Error(function(e,t){var n=Ic(e),r=Ic(t);return"Input to reshape is a SparseTensor with ".concat(n,"\n  dense values, but the requested shape requires a multiple of ").concat(r,". inputShape=").concat(e," outputShape= ").concat(t)}(r,l));l[f]=v}if(Ic(l)!==s)throw new Error(function(e,t){var n=Ic(e),r=Ic(t);return"Input to reshape is a tensor with ".concat(n," dense values, but the requested shape has ").concat(r,". inputShape=").concat(e," outputShape=").concat(t)}(r,l));var m=r.length,g=[];if(m>0){g[m-1]=1;for(var y=m-2;y>=0;--y)g[y]=g[y+1]*r[y+1]}var b=[];if(c>0){b[c-1]=1;for(var k=c-2;k>=0;--k)b[k]=b[k+1]*l[k+1]}for(var w=Dc(n,u*c),x=0;x<u;++x){for(var I=0,S=0;S<m;++S)I+=e[x*m+S]*g[S];for(var T=0;T<c;++T)w[x*c+T]=Math.trunc(I/b[T]),I%=b[T]}return[w,[u,c],l]}var az={kernelName:Vf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.inputIndices,a=t.inputShape,i=t.newShape;if(2!==r.shape.length)throw new Error("Input indices should be a matrix but received shape\n        ".concat(r.shape));if(1!==a.shape.length)throw new Error("Input shape should be a vector but received shape\n        ".concat(a.shape));if(1!==i.shape.length)throw new Error("Target shape should be a vector but received shape ".concat(i.shape));var o=Array.from(n.data.get(a.dataId).values),s=n.data.get(r.dataId).values,u=Array.from(n.data.get(i.dataId).values),c=rz(s,r.shape,r.dtype,o,u),l=(0,ge.Z)(c,3),d=l[0],f=l[1],h=l[2];return[n.makeTensorInfo(f,r.dtype,d),n.makeTensorInfo([h.length],i.dtype,new Int32Array(h))]}};function iz(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=r.length,u=[t[0],e.length/t[0]],c=u[1],l=s>0?a[s-1]+1:0;if(l<0)throw new Error("segment ids must be >= 0");var d=t.slice();d[0]=l;var f=Dc(n,d.reduce((function(e,t){return e*t}),1));if(0===s)return l>0&&f.fill(o),[f,d];if(l<=0)throw new Error("segment ids must be >= 0");for(var h=0,p=1,v=0,m=a[h];;){var g=0;if(p<s){if(m===(g=a[p])){++p;continue}if(m>=g)throw new Error("segment ids are not increasing")}if(m<0||m>=l)throw new Error(TI(m,l));m>v&&f.fill(o,v*c,m*c);for(var y=h;y<p;++y){var b=r[y];if(b<0||b>=u[0])throw new Error(EI(y,r[y],u[0]));for(var k=0;k<c;k++)f[m*c+k]+=e[b*c+k]}if(i)for(var w=0;w<c;w++)f[m*c+w]/=p-h;if(h=p,v=m+1,m=g,++p>s)break}return v<l&&f.fill(o,v*c,l*c),[f,d]}var oz={kernelName:Uf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.data,a=t.indices,i=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n          ".concat(a.shape));if(1!==i.shape.length)throw new Error("Segment ids should be a vector but received shape\n          ".concat(i.shape));if(a.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");var o=n.data.get(r.dataId).values,s=n.data.get(a.dataId).values,u=n.data.get(i.dataId).values,c=iz(o,r.shape,r.dtype,s,u,!0),l=(0,ge.Z)(c,2),d=l[0],f=l[1];return n.makeTensorInfo(f,r.dtype,d)}};var sz={kernelName:Wf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.data,a=t.indices,i=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n         ".concat(a.shape));if(1!==i.shape.length)throw new Error("Segment ids should be a vector but received shape\n         ".concat(i.shape));if(a.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");var o=n.data.get(r.dataId).values,s=n.data.get(a.dataId).values,u=n.data.get(i.dataId).values,c=iz(o,r.shape,r.dtype,s,u),l=(0,ge.Z)(c,2),d=l[0],f=l[1];return n.makeTensorInfo(f,r.dtype,d)}};var uz={kernelName:jf,backendName:"cpu",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.sparseIndices,o=n.sparseValues,s=n.defaultValue,u=a.outputShape,c=Jk(0,i,u),l=c.sliceRank,d=c.numUpdates,f=c.sliceSize,h=c.strides,p=c.outputSize,v=!1,m=r.bufferSync(i);switch(o.dtype){case"bool":t=MP(m,r.bufferSync(o),u,p,f,d,l,h,Boolean(r.data.get(s.dataId).values[0]),v);break;case"float32":t=MP(m,r.bufferSync(o),u,p,f,d,l,h,r.data.get(s.dataId).values[0],v);break;case"int32":t=MP(m,r.bufferSync(o),u,p,f,d,l,h,r.data.get(s.dataId).values[0],v);break;case"string":t=MP(m,r.bufferSync(o),u,p,f,d,l,h,Uh(r.data.get(s.dataId).values[0]),v);break;default:throw new Error("Unsupported type ".concat(o.dtype))}return r.makeTensorInfo(u,t.dtype,t.values)}};var cz={kernelName:Pf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.numOrSizeSplits,o=_c(r.axis,a.shape)[0],s=II(a,i,o),u=new Array(a.shape.length).fill(0),c=a.shape.slice();return s.map((function(e){var t=(0,me.Z)(c);t[o]=e;var r=JO({inputs:{x:a},backend:n,attrs:{begin:u,size:t}});return u[o]+=e,r}))}},lz=DD((function(e){return Math.sqrt(e)})),dz=OD(Lf,(function(e){return Math.sqrt(e)})),fz={kernelName:Lf,backendName:"cpu",kernelFunc:dz},hz={kernelName:Hf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=n;_D(r,"square");for(var i=a.data.get(r.dataId).values,o=new Float32Array(i.length),s=0;s<i.length;++s){var u=i[s];o[s]=u*u}return{dataId:a.write(o,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},pz=UD((function(e,t){var n=e-t;return n*n})),vz=uO(Gf,pz),mz={kernelName:Gf,backendName:"cpu",kernelFunc:vz},gz=DD((function(e,t){var n=t.pattern,r=t.replaceGlobal,a=t.rewrite;return e.replace(new RegExp(n,r?"g":""),a)})),yz=LD(qf,gz),bz={kernelName:qf,backendName:"cpu",kernelFunc:yz},kz=OD(ch,(function(e,t){var n=t;return isNaN(e)?NaN:e>0?1:n.alpha})),wz={kernelName:ch,backendName:"cpu",kernelFunc:kz};function xz(e,t,n,r){for(var a=Yv(e,t.dtype),i=0;i<a.size;i++){for(var o=a.indexToLoc(i),s=new Array(o.length),u=0;u<s.length;u++)s[u]=o[u]*n[u]+r[u];a.set.apply(a,[t.get.apply(t,s)].concat((0,me.Z)(o)))}return a}var Iz={kernelName:$f,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.begin,o=r.end,s=r.strides,u=r.beginMask,c=r.endMask,l=r.ellipsisMask,d=r.newAxisMask,f=r.shrinkAxisMask;_D(a,"stridedSlice");var h,p=mg(a.shape,i,o,s,u,c,l,d,f),v=p.finalShapeSparse,m=p.finalShape,g=p.isIdentity,y=p.sliceDim0,b=p.isSimpleSlice,k=p.begin,w=p.end,x=p.strides;if(g)h=pO({inputs:{x:a},backend:n,attrs:{shape:m}});else if(y||b){kc(a.shape.length>=1,(function(){return"Input must have rank at least 1, got: ".concat(a.shape.length)}));var I=fg(k,w,x),S=JO({inputs:{x:a},backend:n,attrs:{begin:k,size:I}});h=pO({inputs:{x:S},backend:n,attrs:{shape:m}}),n.disposeIntermediateTensorInfo(S)}else{var T=xz(v,n.bufferSync(a),x,k);h=n.makeTensorInfo(m,T.dtype,T.values)}return h}},Sz=function(){function e(t,n,r,a,i,o){(0,Se.Z)(this,e),this.separator=Vh(t),this.nGramWidths=n,this.leftPad=Vh(r),this.rightPad=Vh(a),this.padWidth=i,this.preserveShort=o}return(0,Te.Z)(e,[{key:"getPadWidth",value:function(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}},{key:"getNumNGrams",value:function(e,t){var n=this.getPadWidth(t);return Math.max(0,e+2*n-t+1)}},{key:"createNGrams",value:function(e,t,n,r,a,i){for(var o=this,s=function(){var s=o.getPadWidth(i),c=Math.max(0,s-u),l=Math.max(0,s-(a-(u+1))),d=i-(c+l),f=t+(c>0?0:u-s),h=0;h+=c*o.leftPad.length;for(var p=0;p<d;++p)h+=e[f+p].length;h+=l*o.rightPad.length,h+=(c+l+d-1)*o.separator.length,n[r+u]=new Uint8Array(h);for(var v=n[r+u],m=0,g=function(e){return e.forEach((function(e){return v[m++]=e}))},y=0;y<c;++y)g(o.leftPad),g(o.separator);for(var b=0;b<d-1;++b)g(e[f+b]),g(o.separator);if(d>0){g(e[f+d-1]);for(var k=0;k<l;++k)g(o.separator),g(o.rightPad)}else{for(var w=0;w<l-1;++w)g(o.rightPad),g(o.separator);g(o.rightPad)}},u=0;u<a;++u)s()}},{key:"compute",value:function(e,t){var n=this,r=e.length,a=t.length;if(a>0){var i=t[0];if(0!==i)throw new Error("First split value must be 0, got ".concat(i));for(var o=1;o<a;++o){var s=t[o]>=i;if(!(s=s&&t[o]<=r))throw new Error("Invalid split value ".concat(t[o],", must be in [").concat(i,", ").concat(r,"]"));i=t[o]}if(i!==r)throw new Error("Last split value must be data size. Expected ".concat(r,", got ").concat(i))}var u=a-1,c=Dc("int32",a);if(0===r||0===a){for(var l=new Array(r),d=0;d<=u;++d)c[d]=0;return[l,c]}c[0]=0;for(var f=function(){var e=t[h]-t[h-1],r=0;n.nGramWidths.forEach((function(t){r+=n.getNumNGrams(e,t)})),n.preserveShort&&e>0&&0===r&&(r=1),c[h]=c[h-1]+r},h=1;h<=u;++h)f();for(var p=new Array(c[u]),v=function(r){var a=t[r],i=c[r];if(n.nGramWidths.forEach((function(o){var s=t[r+1]-t[r],u=n.getNumNGrams(s,o);n.createNGrams(e,a,p,i,u,o),i+=u})),n.preserveShort&&i===c[r]){var o=t[r+1]-t[r];if(0===o)return"continue";var s=o+2*n.padWidth;n.createNGrams(e,a,p,i,1,s)}},m=0;m<u;++m)v(m);return[p,c]}}]),e}();function Tz(e,t,n,r,a,i,o,s){return new Sz(n,r,a,i,o,s).compute(e,t)}var Ez={kernelName:Kf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=r.separator,i=r.nGramWidths,o=r.leftPad,s=r.rightPad,u=r.padWidth,c=r.preserveShortSequences,l=t.data,d=t.dataSplits,f=Tz(n.data.get(l.dataId).values,n.data.get(d.dataId).values,a,i,o,s,u,c),h=(0,ge.Z)(f,2),p=h[0],v=h[1];return[n.makeTensorInfo([p.length],"string",p),n.makeTensorInfo(d.shape,"int32",v)]}};function Nz(e,t,n,r){if(e.length)if(0!==t.length)if(1!==t.length){for(var a=0,i=0;i<e.length+1;i++)if(i===e.length||-1!==t.indexOf(e[i])){var o=e.subarray(a,i);n&&0===o.length||r.push(o),a=i+1}}else{for(var s=t[0],u=e.indexOf(s);-1!==u;){var c=e.subarray(0,u);n&&0===c.length||r.push(c),u=(e=e.subarray(u+1)).indexOf(s)}n&&0===e.length||r.push(e)}else for(var l=0;l<e.length;++l)r.push(e.subarray(l,l+1))}function Cz(e,t,n){for(var r=e.length,a=[],i=0,o=0,s=new Array(r),u=0;u<r;++u){var c=a.length;Nz(e[u],t,n,a);var l=a.length-c;s[u]=l,i+=l,o=Math.max(o,l)}for(var d=Dc("int32",2*i),f=new Array(i),h=[r,o],p=0,v=0;v<r;++v)for(var m=0;m<s[v];++m)d[2*p]=v,d[2*p+1]=m,f[p]=a[p],++p;return[d,f,h]}var Zz={kernelName:Xf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.skipEmpty,a=t.input,i=t.delimiter;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(1!==a.shape.length)throw new Error("Input must be a vector, got shape: ".concat(a.shape));if(0!==i.shape.length)throw new Error("Delimiter must be a scalar, got shape: ".concat(i.shape));var o=Cz(n.data.get(a.dataId).values,n.data.get(i.dataId).values[0],r),s=(0,ge.Z)(o,3),u=s[0],c=s[1],l=s[2],d=c.length;return[n.makeTensorInfo([d,2],"int32",u),n.makeTensorInfo([d],"string",c),n.makeTensorInfo([2],"int32",new Int32Array(l))]}};function _z(e,t){for(var n=Dc("int32",e.length),r=0;r<e.length;++r)n[r]=Mh(e[r]).modulo(t).getLowBitsUnsigned();return n}var Az={kernelName:Yf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.numBuckets,a=t.input;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(r<=0)throw new Error("Number of buckets must be at least 1");var i=_z(n.data.get(a.dataId).values,r);return n.makeTensorInfo(a.shape,"int32",i)}},Rz=OD(Jf,(function(e){return Math.tan(e)})),Dz={kernelName:Jf,backendName:"cpu",kernelFunc:Rz},Oz=OD(eh,(function(e){return Math.tanh(e)}));var Lz={kernelName:Tf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.tensor,a=t.indices,i=t.updates,o=Jk(0,a,r.shape),s=o.sliceRank,u=o.numUpdates,c=o.sliceSize,l=o.strides,d=o.outputSize,f=n.bufferSync(a),h=n.bufferSync(i),p=n.bufferSync(r),v=MP(f,h,r.shape,d,c,u,s,l,p,!1);return n.makeTensorInfo(r.shape,v.dtype,v.values)}};function Fz(e,t){for(var n=new Array(e.rank),r=0;r<n.length;r++)n[r]=e.shape[r]*t[r];for(var a=Yv(n,e.dtype),i=0;i<a.values.length;++i){for(var o=a.indexToLoc(i),s=new Array(e.rank),u=0;u<s.length;u++)s[u]=o[u]%e.shape[u];var c=e.locToIndex(s);a.values[i]=e.values[c]}return a}var Mz={kernelName:th,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.reps;_D(a,"tile");var o=Fz(n.bufferSync(a),i);return n.makeTensorInfo(o.shape,o.dtype,o.values)}},Pz=function(e,t){var n=t.value-e.value;return 0===n?e.index-t.index:n};function zz(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length-1;r>n;){if(r-n>600){var a=r-n+1,i=t-n+1,o=Math.log(a),s=.5*Math.exp(2*o/3),u=.5*Math.sqrt(o*s*(a-s)/a)*Math.sign(i-a/2);zz(e,t,Math.max(n,Math.floor(t-i*s/a+u)),Math.min(r,Math.floor(t+(a-i)*s/a+u)))}var c=e[t],l=n,d=r;for(yc(e,n,t),Pz(e[r],c)>0&&yc(e,n,r);l<d;){for(yc(e,l,d),l++,d--;Pz(e[l],c)<0;)l+=1;for(;Pz(e[d],c)>0;)d-=1}0===Pz(e[n],c)?yc(e,n,d):yc(e,d+=1,r),d<=t&&(n=d+1),t<=d&&(r=d-1)}}function Bz(e,t,n,r,a){for(var i=t[t.length-1],o=e.length/i,s=i,u=Rc(n,o*r),c=Rc("int32",o*r),l=function(){var t=d*s,n=e.subarray(t,t+s),i=new Array(n.length);n.forEach((function(e,t){return i[t]={value:e,index:t}})),r<i.length&&(zz(i,r),i=i.slice(0,r)),a&&i.sort(Pz);for(var o=d*r,l=u.subarray(o,o+r),f=c.subarray(o,o+r),h=0;h<r;h++)l[h]=i[h].value,f[h]=i[h].index},d=0;d<o;d++)l();var f=t.slice();return f[f.length-1]=r,[Yv(f,n,u),Yv(f,"int32",c)]}var Vz={kernelName:nh,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.k,o=r.sorted;_D(a,"topk");var s=Bz(n.data.get(a.dataId).values,a.shape,a.dtype,i,o),u=(0,ge.Z)(s,2),c=u[0],l=u[1];return[n.makeTensorInfo(c.shape,c.dtype,c.values),n.makeTensorInfo(l.shape,l.dtype,l.values)]}};var Uz={kernelName:rh,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.image,i=t.transforms,o=n.interpolation,s=n.fillMode,u=n.fillValue,c=n.outputShape,l=(0,ge.Z)(a.shape,4),d=l[0],f=l[1],h=l[2],p=l[3],v=null!=c?c:[f,h],m=(0,ge.Z)(v,2),g=m[0],y=m[1],b=[d,g,y,p],k=Vc(a.shape),w=k[0],x=k[1],I=k[2],S=Vc(b),T=S[0],E=S[1],N=S[2],C=Rc(a.dtype,Ic(b));C.fill(u);for(var Z=r.data.get(a.dataId).values,_=r.data.get(i.dataId).values,A=0;A<d;++A){for(var R=1===i.shape[0]?_:_.subarray(8*A,8*A+8),D=0;D<g;++D)for(var O=0;O<y;++O)for(var L=0;L<p;++L){var F=void 0,M=R[6]*O+R[7]*D+1;if(0!==M){var P=(R[0]*O+R[1]*D+R[2])/M,z=(R[3]*O+R[4]*D+R[5])/M,B=Wz(P,h,s),V=Wz(z,f,s);switch(o){case"nearest":F=Gz(Z,f,h,w,x,I,A,V,B,L,u);break;case"bilinear":F=Hz(Z,f,h,w,x,I,A,V,B,L,u);break;default:throw new Error("Error in Transform: Expect 'nearest' or "+"'bilinear', but got ".concat(o))}C[A*T+D*E+O*N+L]=F}}return r.makeTensorInfo(b,a.dtype,C)}return{dataId:r.write(C,b,a.dtype),shape:a.shape,dtype:a.dtype}}};function Wz(e,t,n){switch(n){case"reflect":return function(e,t){var n=e;if(n<0)if(t<=1)n=0;else{var r=2*t;n<r&&(n=r*Math.trunc(-n/r)+n),n=n<-t?n+r:-n-1}else if(n>t-1)if(t<=1)n=0;else{var a=2*t;(n-=a*Math.trunc(n/a))>=t&&(n=a-n-1)}return mc(0,n,t-1)}(e,t);case"wrap":return function(e,t){var n=e;if(n<0)if(t<=1)n=0;else{var r=t-1;n+=t*(Math.trunc(-n/r)+1)}else if(n>t-1)if(t<=1)n=0;else{var a=t-1;n-=t*Math.trunc(n/a)}return mc(0,n,t-1)}(e,t);case"nearest":return function(e,t){return mc(0,e,t-1)}(e,t);default:return function(e,t){return e}(e)}}function jz(e,t,n,r,a,i,o,s,u,c,l){return 0<=s&&s<t&&0<=u&&u<n?e[o*r+s*a+u*i+c]:l}function Gz(e,t,n,r,a,i,o,s,u,c,l){return jz(e,t,n,r,a,i,o,Math.round(s),Math.round(u),c,l)}function Hz(e,t,n,r,a,i,o,s,u,c,l){var d=Math.floor(s),f=Math.floor(u),h=d+1,p=f+1;return(h-s)*((p-u)*jz(e,t,n,r,a,i,o,d,f,c,l)+(u-f)*jz(e,t,n,r,a,i,o,d,p,c,l))+(s-d)*((p-u)*jz(e,t,n,r,a,i,o,h,f,c,l)+(u-f)*jz(e,t,n,r,a,i,o,h,p,c,l))}function qz(e,t,n,r){for(var a=_c(t,n)[0],i=[1,n[0],1],o=0;o<a;o++)i[0]*=n[o];i[1]=n[a];for(var s=a+1;s<n.length;s++)i[2]*=n[s];for(var u=new Map,c=new Int32Array(n[a]),l=new tp(i,r,e),d=[],f=1===i[0]&&1===i[2],h=0;h<n[a];h++){var p=void 0;if(f)p=e[h].toString();else{for(var v=[],m=0;m<i[0];m++)for(var g=0;g<i[2];g++)v.push(l.get(m,h,g));p=v.join(",")}var y=u.get(p);if(null!=y)c[h]=y;else{var b=u.size;u.set(p,b),c[h]=b,d.push(h)}}var k=i.slice();k[1]=u.size;var w=new tp(k,r);d.forEach((function(e,t){for(var n=0;n<i[0];n++)for(var r=0;r<i[2];r++)w.set(l.get(n,e,r),n,t,r)}));var x=n.slice();return x[a]=k[1],{outputValues:w.values,outputShape:x,indices:c}}var $z={kernelName:ih,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=n.axis,i=t.x;_D(i,"unique");var o=qz(r.data.get(i.dataId).values,a,i.shape,i.dtype),s=o.outputValues,u=o.outputShape,c=o.indices;return[r.makeTensorInfo(u,i.dtype,s),r.makeTensorInfo([c.length],"int32",c)]}};var Kz={kernelName:oh,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.value,i=r.axis;i<0&&(i+=a.shape.length);for(var o=a.shape.length,s=a.shape[i],u=new Array(o-1),c=0,l=0;l<o;l++)l!==i&&(u[c++]=a.shape[l]);var d=new Array(o).fill(0),f=a.shape.slice();f[i]=1;for(var h=new Array(s),p=0;p<h.length;p++){d[i]=p;var v=JO({inputs:{x:a},backend:n,attrs:{begin:d,size:f}});h[p]=pO({inputs:{x:v},backend:n,attrs:{shape:u}}),n.disposeIntermediateTensorInfo(v)}return h}};for(var Xz={kernelName:sh,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.segmentIds,o=r.numSegments;_D(a,"unsortedSegmentSum");for(var s=[],u=[],c=a.shape.length-i.shape.length,l=i,d=0;d<c;++d){var f=rF({inputs:{input:l},backend:n,attrs:{dim:d+1}});l=f,u.push(f)}for(var h=0;h<o;++h){var p=Ph(h,"int32"),v=n.makeTensorInfo([],"int32",p),m=XL({inputs:{a:v,b:l},backend:n}),g=oO({inputs:{x:m},backend:n,attrs:{dtype:"float32"}}),y=WL({inputs:{a:g,b:a},backend:n}),b=GL({inputs:{x:y},backend:n,attrs:{axis:0,keepDims:!1}});s.push(b),u.push(v),u.push(m),u.push(g),u.push(y),u.push(b)}var k=eP({inputs:s,backend:n,attrs:{axis:0}});return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),k}},Yz=0,Qz=[yO,kO,xO,SO,hO,TO,ZO,_O,AO,RO,OO,FO,PO,VO,WO,qO,$O,KO,XO,gO,YO,tL,aL,iL,sO,uL,lL,tO,dL,mL,yL,bL,kL,wL,xL,IL,TL,NL,CL,ZL,_L,AL,RL,OL,LL,FL,ML,PL,zL,BL,qL,MD,$L,YL,JL,nF,aF,sF,yF,kF,wF,SF,NF,CF,ZF,AF,DF,FF,zF,zD,BF,pL,UF,jF,HF,VD,KF,QF,eM,rM,iM,uM,lM,hM,pM,vM,yM,wM,xM,IM,SM,TM,EM,NM,CM,AM,RM,LM,PM,jL,BM,UM,jM,HM,KM,XM,JM,tP,nP,iP,GD,sP,fP,vP,wP,IP,aO,lF,TP,qD,KD,vO,EP,NP,CP,ZP,_P,AP,DP,FP,PP,VP,UP,jP,QD,HP,$P,XP,eL,MM,JP,ez,nz,az,oz,sz,uz,cz,fz,hz,mz,bz,wz,Iz,Ez,Zz,Az,pF,HL,Dz,{kernelName:eh,backendName:"cpu",kernelFunc:Oz},Lz,Mz,Vz,Uz,CO,$z,Kz,Xz,QM];Yz<Qz.length;Yz++){wh(Qz[Yz])}var Jz,eB,tB,nB={},rB={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function aB(e,t){if(!(e in nB)||null!=t){var n=function(e,t){if(1!==e&&2!==e)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var n=null==t?function(e){if(el().getBool("IS_SAFARI")||"undefined"===typeof OffscreenCanvas||2!==e){if("undefined"!==typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}return new OffscreenCanvas(300,150)}(e):t;n.addEventListener("webglcontextlost",(function(t){t.preventDefault(),delete nB[e]}),!1),el().getBool("SOFTWARE_WEBGL_ENABLED")&&(rB.failIfMajorPerformanceCaveat=!1);if(1===e)return n.getContext("webgl",rB)||n.getContext("experimental-webgl",rB);return n.getContext("webgl2",rB)}(e,t);if(null===n)return console.log("Could not get context for WebGL version",e),null;nB[e]=n}var r=nB[e];return null==r||r.isContextLost()?(delete nB[e],aB(e)):(r.disable(r.DEPTH_TEST),r.disable(r.STENCIL_TEST),r.disable(r.BLEND),r.disable(r.DITHER),r.disable(r.POLYGON_OFFSET_FILL),r.disable(r.SAMPLE_COVERAGE),r.enable(r.SCISSOR_TEST),r.enable(r.CULL_FACE),r.cullFace(r.BACK),nB[e])}function iB(e,t){return[t,e]}function oB(e){var t=Ic(e);return Ec(Math.ceil(t/4))}function sB(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function uB(e,t){var n,r,a,i,o,s,u,c,l,d,f=e;return 2===el().getNumber("WEBGL_VERSION")?(n=f.R32F,r=f.R16F,a=f.RGBA16F,i=f.RGBA32F,o=f.RED,u=4,c=1,l=f.HALF_FLOAT,d=f.FLOAT,s=f.RGBA8):(n=e.RGBA,r=e.RGBA,a=e.RGBA,i=f.RGBA,o=e.RGBA,u=4,c=4,l=null!=t?t.HALF_FLOAT_OES:null,d=e.FLOAT,s=e.RGBA),{internalFormatFloat:n,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:a,internalFormatPackedFloat:i,textureFormatFloat:o,downloadTextureFormat:s,downloadUnpackNumChannels:u,defaultNumChannels:c,textureTypeHalfFloat:l,textureTypeFloat:d}}function cB(e,t){var n=t();return el().getBool("DEBUG")&&function(e){var t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+function(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code ".concat(t)}}(e,t))}(e),n}!function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"}(Jz||(Jz={})),function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(eB||(eB={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(tB||(tB={}));var lB=5.96e-8,dB=65504;function fB(e){return!!(el().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===e||lB<Math.abs(e)&&Math.abs(e)<dB)}function hB(e,t){return SB(e,(function(){return e.getExtension(t)}),'Extension "'+t+'" not supported on this browser.')}var pB,vB,mB=/ERROR: [0-9]+:([0-9]+):/g;function gB(e,t){var n=mB.exec(t);if(null==n)return console.log("Couldn't parse line number in error: ".concat(t)),void console.log(e);for(var r=+n[1],a=e.split("\n"),i=a.length.toString().length+2,o=a.map((function(e,t){return Nc((t+1).toString(),i)+e})),s=0,u=0;u<o.length;u++)s=Math.max(o[u].length,s);var c=o.slice(0,r-1),l=o.slice(r-1,r),d=o.slice(r);console.log(c.join("\n")),console.log(t.split("\n")[0]),console.log("%c ".concat(Nc(l[0],s)),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(d.join("\n"))}function yB(e,t){if(cB(e,(function(){return e.validateProgram(t)})),!1===e.getProgramParameter(t,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function bB(e,t,n,r,a,i,o){var s=e.getAttribLocation(t,n);return-1!==s&&(cB(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,r)})),cB(e,(function(){return e.vertexAttribPointer(s,a,e.FLOAT,!1,i,o)})),cB(e,(function(){return e.enableVertexAttribArray(s)})),!0)}function kB(e,t,n,r){cB(e,(function(){return function(e,t,n){TB(e,n),cB(e,(function(){return e.activeTexture(e.TEXTURE0+n)})),cB(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)}))}(e,t,r)})),cB(e,(function(){return e.uniform1i(n,r)}))}function wB(e,t,n){cB(e,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,n)})),cB(e,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)}))}function xB(e,t){cB(e,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,t)})),cB(e,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)}))}function IB(e){var t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+function(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error ".concat(t)}}(e,t))}function SB(e,t,n){var r=cB(e,(function(){return t()}));if(null==r)throw new Error(n);return r}function TB(e,t){var n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n){var a="[gl.TEXTURE0, gl.TEXTURE".concat(n,"]");throw new Error("textureUnit must be in ".concat(a,"."))}}function EB(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return Ic(e.slice(0,e.length-t))}function NB(e){if(0===e.length)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function CB(e){var t=[1,1,1];return 0===e.length||1===e.length&&1===e[0]||(t=[EB(e)].concat((0,me.Z)(NB(e)))),t}function ZB(e){return e%2===0}function _B(e,t){if(Sc(e=e.slice(-2),t=t.slice(-2)))return!0;if(!e.length||!t.length)return!0;if(0===e[0]||0===e[1]||0===t[0]||0===t[1])return!0;if(e.length!==t.length){var n=e[e.length-1],r=t[t.length-1];if(n===r)return!0;if(ZB(n)&&ZB(r)&&(1===e[0]||1===t[0]))return!0}return e[1]===t[1]&&ZB(e[0])&&ZB(t[0])}function AB(e,t){return null!=e.getExtension(t)}function RB(e){try{if(null!=aB(e))return!0}catch(t){return console.log("Error when getting WebGL context: ",t),!1}return!1}function DB(e){if(0===e)return!1;var t=aB(e);if(1!==e){if(AB(t,"EXT_color_buffer_float"))return OB(t);var n="EXT_color_buffer_half_float";if(AB(t,n)){var r=t.getExtension(n);return function(e,t){var n=uB(e,t),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r);var a=1,i=1;e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,a,i,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);var o=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,o),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);var s=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(o),s}(t,r)}return!1}return!!AB(t,"OES_texture_float")&&(!!AB(t,"WEBGL_color_buffer_float")&&OB(t))}function OB(e){var t=uB(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n);e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);var r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);var a=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(r),a}function LB(e,t){Array.isArray(e)||(e=[e]),e.forEach((function(e){null!=e&&kc("complex64"!==e.dtype,(function(){return"".concat(t," does not support complex64 tensors ")+"in the WebGL backend."}))}))}var FB=el();function MB(){var e,t,n,r,a,i,o,s,u,c;return 2===el().getNumber("WEBGL_VERSION")?(e="#version 300 es",t="in",n="out",r="in",a="texture",i="outputColor",o="out vec4 outputColor;",s=el().getBool("WEBGL2_ISNAN_CUSTOM")?"\n      bool isnan_custom(float val) {\n        uint floatToUint = floatBitsToUint(val);\n        return (floatToUint & 0x7fffffffu) > 0x7f800000u;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ":"",u="",c="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(e="",t="attribute",n="varying",r="varying",a="texture2D",i="gl_FragColor",o="",s="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",u="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",c="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:a,output:i,defineOutput:o,defineSpecialNaN:s,defineSpecialInf:u,defineRound:c}}function PB(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index",r=Vc(t);return r.map((function(t,a){var i="int ".concat(e[a]," = ").concat(n," / ").concat(t),o=a===r.length-1?"int ".concat(e[a+1]," = ").concat(n," - ").concat(e[a]," * ").concat(t):"index -= ".concat(e[a]," * ").concat(t);return"".concat(i,"; ").concat(o,";")})).join("")}function zB(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index",r=Vc(t);return r.map((function(t,a){var i="int ".concat(e[a]," = ").concat(n," / outShapeStrides[").concat(a,"]"),o=a===r.length-1?"int ".concat(e[a+1]," = ").concat(n," - ").concat(e[a]," * outShapeStrides[").concat(a,"]"):"index -= ".concat(e[a]," * outShapeStrides[").concat(a,"]");return"".concat(i,"; ").concat(o,";")})).join("")}function BB(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index",r=function(e,t){var n=e.length,r=e.map((function(e){return"".concat(t,"[").concat(e,"]")})),a=new Array(n-1);a[n-2]=r[n-1];for(var i=n-3;i>=0;--i)a[i]="(".concat(a[i+1]," * ").concat(r[i+1],")");return a}(e.map((function(e,t){return t})),t);return r.map((function(t,a){var i="int ".concat(e[a]," = ").concat(n," / ").concat(r[a]),o=a===r.length-1?"int ".concat(e[a+1]," = ").concat(n," - ").concat(e[a]," * ").concat(r[a]):"index -= ".concat(e[a]," * ").concat(r[a]);return"".concat(i,"; ").concat(o,";")})).join("")}function VB(e){var t=Vc(e).map((function(e){return e.toString()}));return"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * ".concat(t[0]," + coords.y * ").concat(t[1]," + coords.z;\n  }\n")}FB.registerFlag("HAS_WEBGL",(function(){return FB.getNumber("WEBGL_VERSION")>0})),FB.registerFlag("WEBGL_VERSION",(function(){return RB(2)?2:RB(1)?1:0})),FB.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",(function(){return!1})),FB.registerFlag("WEBGL_BUFFER_SUPPORTED",(function(){return 2===FB.get("WEBGL_VERSION")})),FB.registerFlag("WEBGL_CPU_FORWARD",(function(){return!0})),FB.registerFlag("WEBGL_FORCE_F16_TEXTURES",(function(){return!1})),FB.registerFlag("WEBGL_PACK",(function(){return FB.getBool("HAS_WEBGL")})),FB.registerFlag("WEBGL_PACK_NORMALIZATION",(function(){return FB.getBool("WEBGL_PACK")})),FB.registerFlag("WEBGL_PACK_CLIP",(function(){return FB.getBool("WEBGL_PACK")})),FB.registerFlag("WEBGL_PACK_DEPTHWISECONV",(function(){return FB.getBool("WEBGL_PACK")})),FB.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",(function(){return FB.getBool("WEBGL_PACK")})),FB.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",(function(){return FB.getBool("WEBGL_PACK")})),FB.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",(function(){return FB.getBool("WEBGL_PACK")})),FB.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",(function(){return FB.getBool("WEBGL_PACK")})),FB.registerFlag("WEBGL_PACK_REDUCE",(function(){return FB.getBool("WEBGL_PACK")})),FB.registerFlag("WEBGL_LAZILY_UNPACK",(function(){return FB.getBool("WEBGL_PACK")})),FB.registerFlag("WEBGL_CONV_IM2COL",(function(){return FB.getBool("WEBGL_PACK")})),FB.registerFlag("WEBGL_MAX_TEXTURE_SIZE",(function(){return function(e){if(null==pB){var t=aB(e);pB=t.getParameter(t.MAX_TEXTURE_SIZE)}return pB}(FB.getNumber("WEBGL_VERSION"))})),FB.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",(function(){return function(e){if(null==vB){var t=aB(e);vB=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,vB)}(FB.getNumber("WEBGL_VERSION"))})),FB.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",(function(){var e=FB.getNumber("WEBGL_VERSION");return 0===e?0:function(e){if(0===e)return 0;var t=aB(e);return AB(t,"EXT_disjoint_timer_query_webgl2")&&2===e?2:AB(t,"EXT_disjoint_timer_query")?1:0}(e)})),FB.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",(function(){return FB.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!Cp()})),FB.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",(function(){return function(e){if(0===e)return!1;var t=aB(e);if(1===e){if(!AB(t,"OES_texture_float"))return!1}else if(!AB(t,"EXT_color_buffer_float"))return!1;return OB(t)}(FB.getNumber("WEBGL_VERSION"))})),FB.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",(function(){return!FB.getBool("WEBGL_FORCE_F16_TEXTURES")&&FB.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")})),FB.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",(function(){return DB(FB.getNumber("WEBGL_VERSION"))})),FB.registerFlag("WEBGL_FENCE_API_ENABLED",(function(){return 2===(e=FB.getNumber("WEBGL_VERSION"))&&null!=aB(e).fenceSync;var e})),FB.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",(function(){return FB.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0})),FB.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",(function(){return-1}),(function(e){if(e<0&&-1!==e)throw new Error("WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never "+"delete) or at least 0, but got ".concat(e,"."))})),FB.registerFlag("WEBGL_FLUSH_THRESHOLD",(function(){return Cp()?1:-1}),(function(e){if(e<0&&-1!==e)throw new Error("WEBGL_FLUSH_THRESHOLD must be -1 (indicating never "+"manual flush) or at least 0, but got ".concat(e,"."))})),FB.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",(function(){return 128})),FB.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",(function(){return!1})),FB.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",(function(){return 1e5})),FB.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",(function(){return 128})),FB.registerFlag("WEBGL_EXP_CONV",(function(){return!1})),FB.registerFlag("SOFTWARE_WEBGL_ENABLED",(function(){return FB.getBool("IS_TEST")})),FB.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",(function(){return 1/0})),FB.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",(function(){return!1})),FB.registerFlag("WEBGL2_ISNAN_CUSTOM",(function(){return!1})),FB.registerFlag("ENGINE_COMPILE_ONLY",(function(){return!1}));var UB="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n",WB=Nm;function jB(e,t,n){var r=[];if(e.forEach((function(e){var t=Ic(e.shapeInfo.logicalShape);if(e.shapeInfo.isUniform?r.push("uniform float ".concat(e.name).concat(t>1?"[".concat(t,"]"):"",";")):(r.push("uniform sampler2D ".concat(e.name,";")),r.push("uniform int offset".concat(e.name,";"))),n.enableShapeUniforms){switch(eV(n.packedInputs,e.shapeInfo.logicalShape,e.shapeInfo.texShape).uniformShape.length){case 1:r.push("uniform int ".concat(e.name,"Shape;"));break;case 2:r.push("uniform ivec2 ".concat(e.name,"Shape;"));break;case 3:r.push("uniform ivec3 ".concat(e.name,"Shape;"));break;case 4:r.push("uniform ivec4 ".concat(e.name,"Shape;"))}r.push("uniform ivec2 ".concat(e.name,"TexShape;"))}})),n.enableShapeUniforms){switch(t.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;")}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach((function(e){r.push("uniform ".concat(e.type," ").concat(e.name).concat(e.arrayIndex?"[".concat(e.arrayIndex,"]"):"",";"))}));var a,i,o=r.join("\n"),s=e.map((function(e){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,a="";a+=n?HB(e,r):GB(e,r);var i=e.shapeInfo.logicalShape,o=t.logicalShape;i.length<=o.length&&(a+=n?function(e,t){var n,r=e.name,a=r.charAt(0).toUpperCase()+r.slice(1),i="get"+a+"AtOutCoords",o=e.shapeInfo.logicalShape.length,s=t.logicalShape.length,u=WB(e.shapeInfo.logicalShape,t.logicalShape),c=JB(s),l=s-o,d=["x","y","z","w","u","v"];n=0===o?"":s<2&&u.length>=1?"coords = 0;":u.map((function(e){return"coords.".concat(d[e+l]," = 0;")})).join("\n");var f="";f=s<2&&o>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords.".concat(d[t+l])})).join(", ");var h="return outputValue;",p=1===Ic(e.shapeInfo.logicalShape),v=Ic(t.logicalShape),m=1===v;if(1!==o||p||m){if(p&&!m)h=1===s?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(u.length){var g=o-2,y=o-1;u.indexOf(g)>-1&&u.indexOf(y)>-1?h="return vec4(outputValue.x);":u.indexOf(g)>-1?h="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":u.indexOf(y)>-1&&(h="return vec4(outputValue.xx, outputValue.zz);")}}else h="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return"\n    vec4 ".concat(i,"() {\n      ").concat(c," coords = getOutputCoords();\n      ").concat(n,"\n      vec4 outputValue = get").concat(a,"(").concat(f,");\n      ").concat(h,"\n    }\n  ")}(e,t):function(e,t){var n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),a="get"+r+"AtOutCoords",i=t.texShape,o=e.shapeInfo.texShape,s=e.shapeInfo.logicalShape.length,u=t.logicalShape.length;if(!e.shapeInfo.isUniform&&s===u&&null==e.shapeInfo.flatOffset&&Sc(o,i))return"\n      float ".concat(a,"() {\n        return sampleTexture(").concat(n,", resultUV);\n      }\n    ");var c,l=JB(u),d=WB(e.shapeInfo.logicalShape,t.logicalShape),f=u-s,h=["x","y","z","w","u","v"];c=0===s?"":u<2&&d.length>=1?"coords = 0;":d.map((function(e){return"coords.".concat(h[e+f]," = 0;")})).join("\n");var p="";p=u<2&&s>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords.".concat(h[t+f])})).join(", ");return"\n    float ".concat(a,"() {\n      ").concat(l," coords = getOutputCoords();\n      ").concat(c,"\n      return get").concat(r,"(").concat(p,");\n    }\n  ")}(e,t));return a}(e,t,n.packedInputs,n.enableShapeUniforms)})).join("\n"),u=t.texShape,c=MB(),l=function(e){return"\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return ".concat(e.texture2D,"(textureSampler, uv).r;\n    }\n  ")}(c),d=function(e){var t="".concat(e.version,"\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    ").concat(e.varyingFs," vec2 resultUV;\n    ").concat(e.defineOutput,"\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    ").concat(e.defineSpecialNaN,"\n    ").concat(e.defineSpecialInf,"\n    ").concat(e.defineRound,"\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    ").concat(qB,"\n    ").concat($B,"\n    ").concat(KB,"\n  ");return t}(c);return t.isPacked?(a=function(e,t,n){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t,n){var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(1===r[0])return n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));\n      }\n    ":"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ".concat(r[1],".0);\n      }\n    ");if(1===r[1])return n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));\n      }\n    ":"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ".concat(r[0],".0);\n      }\n    ");if(n)return"\n    int getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);\n    }\n  ";return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n      return 2 * (resTexRC.x * ").concat(r[1]," + resTexRC.y);\n    }\n  ")}(0,t,n);case 2:return function(e,t,n){var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(Sc(e,t))return n?"\n      ivec2 getOutputCoords() {\n        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2(".concat(r[0],", ").concat(r[1],"));\n      }\n    ");var a=Math.ceil(e[1]/2);if(n)return"\n    ivec2 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec2(r, c);\n    }\n  ";return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec2(r, c);\n    }\n  ")}(e,t,n);case 3:return function(e,t,n){if(n)return"\n    ivec3 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec3(b, r, c);\n    }\n  ";var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],a=Math.ceil(e[2]/2),i=a*Math.ceil(e[1]/2);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n\n      int b = index / ").concat(i,";\n      index -= b * ").concat(i,";\n\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec3(b, r, c);\n    }\n  ")}(e,t,n);default:return function(e,t,n){if(n)return"\n    ivec4 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatchN = texelsInBatch * outShape[1];\n\n      int b2 = index / texelsInBatchN;\n      index -= b2 * texelsInBatchN;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec4(b2, b, r, c);\n    }\n  ";for(var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],a=Math.ceil(e[e.length-1]/2),i=a*Math.ceil(e[e.length-2]/2),o=i,s="",u="b, r, c",c=2;c<e.length-1;c++)o*=e[e.length-c-1],s="\n      int b".concat(c," = index / ").concat(o,";\n      index -= b").concat(c," * ").concat(o,";\n    ")+s,u="b".concat(c,", ")+u;return"\n    ivec".concat(e.length," getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(").concat(r[0],", ").concat(r[1],"));\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n\n      ").concat(s,"\n\n      int b = index / ").concat(i,";\n      index -= b * ").concat(i,";\n\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec").concat(e.length,"(").concat(u,");\n    }\n  ")}(e,t,n)}}(t.logicalShape,u,n.enableShapeUniforms),i=function(e){return"\n    void setOutput(vec4 val) {\n      ".concat(e.output," = val;\n    }\n  ")}(c)):(a=function(e,t,n){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t,n){if(1===t[0])return n?"\n      int getOutputCoords() {\n        return int(resultUV.x * float(outTexShape[1]));\n      }\n    ":"\n      int getOutputCoords() {\n        return int(resultUV.x * ".concat(t[1],".0);\n      }\n    ");if(1===t[1])return n?"\n      int getOutputCoords() {\n        return int(resultUV.y * float(outTexShape[0]));\n      }\n    ":"\n      int getOutputCoords() {\n        return int(resultUV.y * ".concat(t[0],".0);\n      }\n    ");if(n)return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      return resTexRC.x * outTexShape[1] + resTexRC.y;\n    }\n  ";return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      return resTexRC.x * ").concat(t[1]," + resTexRC.y;\n    }\n  ")}(0,t,n);case 2:return function(e,t,n){if(Sc(e,t))return n?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(".concat(t[0],", ").concat(t[1],"));\n      }\n    ");if(1===e[1])return n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n        int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ");if(1===e[0])return n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n        int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ");if(n)return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      int r = index / outShape[1];\n      int c = index - r * outShape[1];\n      return ivec2(r, c);\n    }\n  ";return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      int r = index / ").concat(e[1],";\n      int c = index - r * ").concat(e[1],";\n      return ivec2(r, c);\n    }\n  ")}(e,t,n);case 3:return function(e,t,n){if(n){var r=zB(["r","c","d"],e);return"\n  ivec3 getOutputCoords() {\n    ivec2 resTexRC = ivec2(resultUV.yx *\n                           vec2(outTexShape[0], outTexShape[1]));\n    int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n    ".concat(r,"\n    return ivec3(r, c, d);\n  }\n")}var a=PB(["r","c","d"],e);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      ").concat(a,"\n      return ivec3(r, c, d);\n    }\n  ")}(e,t,n);case 4:return function(e,t,n){if(n){var r=zB(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      ".concat(r,"\n      return ivec4(r, c, d, d2);\n    }\n  ")}var a=PB(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      ").concat(a,"\n      return ivec4(r, c, d, d2);\n    }\n  ")}(e,t,n);case 5:return function(e,t){var n=PB(["r","c","d","d2","d3"],e);return"\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2(".concat(t[0],",\n                             ").concat(t[1],"));\n\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  ")}(e,t);case 6:return function(e,t){var n=PB(["r","c","d","d2","d3","d4"],e);return"\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  ")}(e,t);default:throw new Error("".concat(e.length,"-D output sampling is not yet supported"))}}(t.logicalShape,u,n.enableShapeUniforms),i=function(e){return"\n    void setOutput(float val) {\n      ".concat(e.output," = vec4(val, 0, 0, 0);\n    }\n  ")}(c)),n.packedInputs&&(d+=XB),[d,l,i,o,a,s,n.userCode].join("\n")}function GB(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.shapeInfo.logicalShape;switch(n.length){case 0:return function(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return"float ".concat(r,"() {return ").concat(n,";}");var a=(0,ge.Z)(e.shapeInfo.texShape,2),i=a[0],o=a[1];if(1===i&&1===o)return"\n      float ".concat(r,"() {\n        return sampleTexture(").concat(n,", halfCR);\n      }\n    ");var s=YB(n);if(t)return"\n    float ".concat(r,"() {\n      vec2 uv = uvFromFlat(").concat(n,"TexShape[0], ").concat(n,"TexShape[1], ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ");var u=(0,ge.Z)(e.shapeInfo.texShape,2),c=u[0],l=u[1];return"\n    float ".concat(r,"() {\n      vec2 uv = uvFromFlat(").concat(c,", ").concat(l,", ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(e,t);case 1:return function(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int index) {\n        ").concat(QB(e),"\n      }\n    ");var a=e.shapeInfo.texShape,i=a[0],o=a[1];if(1===o&&1===i)return"\n      float ".concat(r,"(int index) {\n        return sampleTexture(").concat(n,", halfCR);\n      }\n    ");var s=YB(n);if(1===o)return t?"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(s,") + 0.5) / float(").concat(n,"TexShape[0]));\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(s,") + 0.5) / ").concat(i,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(1===i)return t?"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(s,") + 0.5) / float(").concat(n,"TexShape[1]), 0.5);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(s,") + 0.5) / ").concat(o,".0, 0.5);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(t)return"\n    float ".concat(r,"(int index) {\n      vec2 uv = uvFromFlat(").concat(n,"TexShape[0], ").concat(n,"TexShape[1], index + ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ");return"\n    float ".concat(r,"(int index) {\n      vec2 uv = uvFromFlat(").concat(i,", ").concat(o,", index + ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(e,t);case 2:return function(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape;if(null!=i&&Sc(n,i)){if(t)return"\n      float ".concat(a,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");var o=i[0],s=i[1];return"\n    float ".concat(a,"(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(s,".0, ").concat(o,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ")}var u=Ac(n),c=u.newShape,l=u.keptDims,d=c;if(d.length<n.length){var f=tV(e,d),h=["row","col"];return"\n      ".concat(GB(f,t),"\n      float ").concat(a,"(int row, int col) {\n        return ").concat(a,"(").concat(nV(h,l),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2(").concat(n[1],", 1)));\n        ").concat(QB(e),"\n      }\n    ");var p=i[0],v=i[1],m=YB(r);if(1===v)return t?"\n      float ".concat(a,"(int row, int col) {\n        float index = dot(vec3(row, col, ").concat(m,"), vec3(").concat(r,"Shape[1], 1, 1));\n        vec2 uv = vec2(0.5, (index + 0.5) / float(").concat(r,"TexShape[0]));\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(a,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(m,"), vec3(").concat(n[1],", 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / ").concat(p,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ");if(1===p)return t?"\n      float ".concat(a,"(int row, int col) {\n        float index = dot(vec3(row, col, ").concat(m,"), vec3(").concat(r,"Shape[1], 1, 1));\n        vec2 uv = vec2((index + 0.5) / float(").concat(r,"TexShape[1]), 0.5);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(a,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(m,"), vec3(").concat(n[1],", 1, 1));\n      vec2 uv = vec2((index + 0.5) / ").concat(v,".0, 0.5);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ");if(t)return"\n      float ".concat(a,"(int row, int col) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(r,"Shape[1] + col + ").concat(m,";\n        vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");return"\n  float ".concat(a,"(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * ").concat(n[1]," + col + ").concat(m,";\n    vec2 uv = uvFromFlat(").concat(p,", ").concat(v,", index);\n    return sampleTexture(").concat(r,", uv);\n  }\n")}(e,t);case 3:return function(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[1]*n[2],o=n[2],s=Ac(n),u=s.newShape,c=s.keptDims,l=u;if(l.length<n.length){var d=tV(e,l),f=["row","col","depth"];return"\n        ".concat(GB(d,t),"\n        float ").concat(a,"(int row, int col, int depth) {\n          return ").concat(a,"(").concat(nV(f,c),");\n        }\n      ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3(").concat(i,", ").concat(o,", 1)));\n        ").concat(QB(e),"\n      }\n    ");var h=e.shapeInfo.texShape,p=h[0],v=h[1],m=e.shapeInfo.flatOffset;if(v===i&&null==m)return t?"\n      float ".concat(a,"(int row, int col, int depth) {\n        int stride1 = ").concat(r,"Shape[2];\n        float texR = float(row);\n        float texC = dot(vec2(col, depth), vec2(stride1, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n        float ".concat(a,"(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2(").concat(o,", 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2(").concat(v,".0, ").concat(p,".0);\n          return sampleTexture(").concat(r,", uv);\n        }\n      ");if(v===o&&null==m)return t?"\n      float ".concat(a,"(int row, int col, int depth) {\n        float texR = dot(vec2(row, col), vec2(").concat(r,"Shape[1], 1));\n        float texC = float(depth);\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(a,"(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2(").concat(n[1],", 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(v,".0, ").concat(p,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ");var g=YB(r);if(t)return"\n    float ".concat(a,"(int row, int col, int depth) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int stride0 = ").concat(r,"Shape[1] * ").concat(r,"Shape[2];\n      int stride1 = ").concat(r,"Shape[2];\n      int index = row * stride0 + col * stride1 + depth + ").concat(g,";\n      vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index);\n      return sampleTexture(").concat(r,", uv);\n    }\n    ");return"\n      float ".concat(a,"(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(i," + col * ").concat(o," + depth + ").concat(g,";\n        vec2 uv = uvFromFlat(").concat(p,", ").concat(v,", index);\n        return sampleTexture(").concat(r,", uv);\n      }\n  ")}(e,t);case 4:return function(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[3],o=n[2]*i,s=n[1]*o,u=Ac(n),c=u.newShape,l=u.keptDims;if(c.length<n.length){var d=tV(e,c),f=["row","col","depth","depth2"];return"\n      ".concat(GB(d,t),"\n      float ").concat(a,"(int row, int col, int depth, int depth2) {\n        return ").concat(a,"(").concat(nV(f,l),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4(").concat(s,", ").concat(o,", ").concat(i,", 1)));\n        ").concat(QB(e),"\n      }\n    ");var h=e.shapeInfo.flatOffset,p=e.shapeInfo.texShape,v=p[0],m=p[1],g="int stride2 = ".concat(r,"Shape[3];"),y="int stride1 = ".concat(r,"Shape[2] * stride2;"),b="int stride0 = ".concat(r,"Shape[1] * stride1;");if(m===s&&null==h)return t?"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        ").concat(g,"\n        ").concat(y,"\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(stride1, stride2, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(").concat(o,", ").concat(i,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(m,".0, ").concat(v,".0);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");if(m===i&&null==h)return t?"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(r,"Shape[1] * ").concat(r,"Shape[2], ").concat(r,"Shape[2], 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(n[1]*n[2],", ").concat(n[2],", 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(m,".0, ").concat(v,".0);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");var k=YB(r);if(t)return"\n    float ".concat(a,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      ").concat(g,"\n      ").concat(y,"\n      ").concat(b,"\n      int index = row * stride0 + col * stride1 +\n          depth * stride2 + depth2;\n      vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index + ").concat(k,");\n      return sampleTexture(").concat(r,", uv);\n    }\n  ");return"\n    float ".concat(a,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(s," + col * ").concat(o," +\n          depth * ").concat(i," + depth2;\n      vec2 uv = uvFromFlat(").concat(v,", ").concat(m,", index + ").concat(k,");\n      return sampleTexture(").concat(r,", uv);\n    }\n  ")}(e,t);case 5:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=t[4],i=t[3]*a,o=t[2]*i,s=t[1]*o,u=Ac(t),c=u.newShape,l=u.keptDims;if(c.length<t.length){var d=tV(e,c),f=["row","col","depth","depth2","depth3"];return"\n      ".concat(GB(d),"\n      float ").concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        return ").concat(r,"(").concat(nV(f,l),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(s,", ").concat(o,", ").concat(i,", ").concat(a,")) +\n          depth3;\n        ").concat(QB(e),"\n      }\n    ");var h=e.shapeInfo.flatOffset,p=e.shapeInfo.texShape,v=p[0],m=p[1];if(m===s&&null==h)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4(").concat(o,", ").concat(i,", ").concat(a,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(m,".0, ").concat(v,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(m===a&&null==h)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(t[1]*t[2]*t[3],",\n               ").concat(t[2]*t[3],", ").concat(t[3],", 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(m,".0, ").concat(v,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");var g=YB(n);return"\n    float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(s," + col * ").concat(o," + depth * ").concat(i," +\n          depth2 * ").concat(a," + depth3 + ").concat(g,";\n      vec2 uv = uvFromFlat(").concat(v,", ").concat(m,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(e);case 6:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=Ac(t),i=a.newShape,o=a.keptDims;if(i.length<t.length){var s=tV(e,i),u=["row","col","depth","depth2","depth3","depth4"];return"\n      ".concat(GB(s),"\n      float ").concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return ").concat(r,"(").concat(nV(u,o),");\n      }\n    ")}var c=t[5],l=t[4]*c,d=t[3]*l,f=t[2]*d,h=t[1]*f;if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(h,", ").concat(f,", ").concat(d,", ").concat(l,")) +\n          dot(\n            vec2(depth3, depth4),\n            vec2(").concat(c,", 1)));\n        ").concat(QB(e),"\n      }\n    ");var p=e.shapeInfo.flatOffset,v=e.shapeInfo.texShape,m=v[0],g=v[1];if(g===h&&null==p)return"\n      float ".concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4(").concat(f,", ").concat(d,", ").concat(l,", ").concat(c,")) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(g,".0, ").concat(m,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(g===c&&null==p)return"\n      float ".concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4(").concat(t[1]*t[2]*t[3]*t[4],",\n               ").concat(t[2]*t[3]*t[4],",\n               ").concat(t[3]*t[4],",\n               ").concat(t[4],")) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(g,".0, ").concat(m,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");var y=YB(n);return"\n    float ".concat(r,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(h," + col * ").concat(f," + depth * ").concat(d," +\n          depth2 * ").concat(l," + depth3 * ").concat(c," + depth4 + ").concat(y,";\n      vec2 uv = uvFromFlat(").concat(m,", ").concat(g,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(e);default:throw new Error("".concat(n.length,"-D input sampling")+" is not yet supported")}}function HB(e,t){switch(e.shapeInfo.logicalShape.length){case 0:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=MB();return"\n    vec4 ".concat(n,"() {\n      return ").concat(r.texture2D,"(").concat(t,", halfCR);\n    }\n  ")}(e);case 1:return function(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=e.shapeInfo.texShape,i=MB();if(t)return"\n    vec4 ".concat(r,"(int index) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(n,"TexShape[0]) / 2.0), ceil(float(").concat(n,"TexShape[1]) / 2.0));\n      vec2 uv = packedUVfrom1D(\n        packedTexShape[0], packedTexShape[1], index);\n      return ").concat(i.texture2D,"(").concat(n,", uv);\n    }\n  ");var o=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];return"\n    vec4 ".concat(r,"(int index) {\n      vec2 uv = packedUVfrom1D(\n        ").concat(o[0],", ").concat(o[1],", index);\n      return ").concat(i.texture2D,"(").concat(n,", uv);\n    }\n  ")}(e,t);case 2:return function(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape,o=i[0],s=i[1],u=MB();if(null!=i&&Sc(n,i))return t?"\n      vec4 ".concat(a,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n\n        return ").concat(u.texture2D,"(").concat(r,", uv);\n      }\n    "):"\n      vec4 ".concat(a,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(s,".0, ").concat(o,".0);\n\n        return ").concat(u.texture2D,"(").concat(r,", uv);\n      }\n    ");if(t)return"\n    vec4 ".concat(a,"(int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(r,"TexShape[0]) / 2.0), ceil(float(").concat(r,"TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(").concat(r,"Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);\n      return ").concat(u.texture2D,"(").concat(r,", uv);\n    }\n  ");var c=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)],l=Math.ceil(n[1]/2);return"\n    vec4 ".concat(a,"(int row, int col) {\n      vec2 uv = packedUVfrom2D(").concat(l,", ").concat(c[0],", ").concat(c[1],", row, col);\n      return ").concat(u.texture2D,"(").concat(r,", uv);\n    }\n  ")}(e,t);case 3:return function(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape,o=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];if(1===n[0]){var s=[1,2],u=tV(e,n.slice(1)),c=["b","row","col"];return"\n        ".concat(HB(u,t),"\n        vec4 ").concat(a,"(int b, int row, int col) {\n          return ").concat(a,"(").concat(nV(c,s),");\n        }\n      ")}var l=MB();if(t)return"\n    vec4 ".concat(a,"(int b, int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(r,"TexShape[0]) / 2.0), ceil(float(").concat(r,"TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(").concat(r,"Shape[2]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(").concat(r,"Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom3D(\n        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);\n      return ").concat(l.texture2D,"(").concat(r,", uv);\n    }\n  ");var d=o[0],f=o[1],h=Math.ceil(n[2]/2),p=h*Math.ceil(n[1]/2);return"\n    vec4 ".concat(a,"(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        ").concat(d,", ").concat(f,", ").concat(p,", ").concat(h,", b, row, col);\n      return ").concat(l.texture2D,"(").concat(r,", uv);\n    }\n  ")}(e,t);default:return function(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=MB();if(t)return"\n    vec4 ".concat(r,"(int b2, int b, int row, int col) {\n      int valuesPerRow = int(ceil(float(").concat(n,"Shape[3]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(").concat(n,"Shape[2]) / 2.0));\n      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);\n      texelsInBatch *= ").concat(n,"Shape[1];\n      index = b2 * texelsInBatch + index;\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(n,"TexShape[0]) / 2.0), ceil(float(").concat(n,"TexShape[1]) / 2.0));\n      int texR = index / packedTexShape[1];\n      int texC = index - texR * packedTexShape[1];\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ").concat(a.texture2D,"(").concat(n,", uv);\n    }\n  ");for(var i=e.shapeInfo.logicalShape,o=i.length,s=e.shapeInfo.texShape,u=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],c=u[0],l=u[1],d=Math.ceil(i[o-1]/2),f=d*Math.ceil(i[o-2]/2),h="int b, int row, int col",p="b * ".concat(f," + (row / 2) * ").concat(d," + (col / 2)"),v=2;v<o-1;v++)h="int b".concat(v,", ")+h,f*=i[o-v-1],p="b".concat(v," * ").concat(f," + ")+p;return"\n    vec4 ".concat(r,"(").concat(h,") {\n      int index = ").concat(p,";\n      int texR = index / ").concat(l,";\n      int texC = index - texR * ").concat(l,";\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(l,", ").concat(c,");\n      return ").concat(a.texture2D,"(").concat(n,", uv);\n    }\n  ")}(e,t)}}var qB="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",$B="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",KB="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",XB="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function YB(e){return"offset".concat(e)}function QB(e){var t=e.name,n=Ic(e.shapeInfo.logicalShape);return n<2?"return ".concat(t,";"):"\n    for (int i = 0; i < ".concat(n,"; i++) {\n      if (i == index) {\n        return ").concat(t,"[i];\n      }\n    }\n  ")}function JB(e){if(e<=1)return"int";if(2===e)return"ivec2";if(3===e)return"ivec3";if(4===e)return"ivec4";if(5===e)return"ivec5";if(6===e)return"ivec6";throw Error("GPU for rank ".concat(e," is not yet supported"))}function eV(e,t,n){var r=Ac(t),a=r.newShape,i=r.keptDims,o=t.length,s=e&&3===o&&1===t[0],u=s?t.slice(1):a,c=!e&&o>1&&!Sc(t,n)&&a.length<o||s;return{useSqueezeShape:c,uniformShape:c?u:t,keptDims:i}}function tV(e,t){var n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function nV(e,t){return t.map((function(t){return e[t]})).join(", ")}function rV(e,t,n,r){var a=n.map((function(e,n){var r={logicalShape:e.shape,texShape:e.isUniform?null:e.texData.texShape,isUniform:e.isUniform,isPacked:!e.isUniform&&e.texData.isPacked,flatOffset:null};return null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0&&(r.flatOffset=e.texData.slice.flatOffset),{name:t.variableNames[n],shapeInfo:r}})),i=a.map((function(e){return e.shapeInfo})),o={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},s=jB(a,o,t),u=function(e,t){var n=SB(e,(function(){return e.createShader(e.FRAGMENT_SHADER)}),"Unable to create fragment WebGLShader.");if(cB(e,(function(){return e.shaderSource(n,t)})),cB(e,(function(){return e.compileShader(n)})),el().get("ENGINE_COMPILE_ONLY"))return n;if(!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw gB(t,e.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}(e.gl,s),c=e.createProgram(u);return el().get("ENGINE_COMPILE_ONLY")?{program:t,fragmentShader:u,source:s,webGLProgram:c,inShapeInfos:i,outShapeInfo:o,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:Object.assign({program:t,fragmentShader:u,source:s,webGLProgram:c,inShapeInfos:i,outShapeInfo:o},aV(e,t,c))}function aV(e,t,n){var r,a,i,o,s=[],u=[],c=null;o=e.getUniformLocation(n,"NAN",!1),1===el().getNumber("WEBGL_VERSION")&&(c=e.getUniformLocation(n,"INFINITY",!1));var l,d=!1,f=(0,Ht.Z)(t.variableNames);try{for(f.s();!(l=f.n()).done;){var h=l.value,p={name:h,uniform:e.getUniformLocation(n,h,d),offset:e.getUniformLocation(n,"offset".concat(h),d)};t.enableShapeUniforms&&(p.shape=e.getUniformLocation(n,"".concat(h,"Shape"),d),p.texShape=e.getUniformLocation(n,"".concat(h,"TexShape"),d)),s.push(p)}}catch(yhe){f.e(yhe)}finally{f.f()}if(t.enableShapeUniforms&&(r=e.getUniformLocation(n,"outShape",d),i=e.getUniformLocation(n,"outShapeStrides",d),a=e.getUniformLocation(n,"outTexShape",d)),t.customUniforms){var v,m=(0,Ht.Z)(t.customUniforms);try{for(m.s();!(v=m.n()).done;){var g=v.value;u.push(e.getUniformLocation(n,g.name,d))}}catch(yhe){m.e(yhe)}finally{m.f()}}return{variablesLocations:s,customUniformLocations:u,infLoc:c,nanLoc:o,outShapeLocation:r,outShapeStridesLocation:i,outTexShapeLocation:a}}function iV(e,t){if(e.length!==t.length)throw Error("Binary was compiled with ".concat(e.length," inputs, but ")+"was executed with ".concat(t.length," inputs"));e.forEach((function(e,n){var r=e.logicalShape,a=t[n],i=a.shape;if(!Sc(r,i))throw Error("Binary was compiled with different shapes than "+"the current args. Shapes ".concat(r," and ").concat(i," must match"));if(!e.isUniform||!a.isUniform){var o=e.texShape,s=a.isUniform?null:a.texData.texShape;if(!Sc(o,s))throw Error("Binary was compiled with different texture shapes than the"+" current args. Shape ".concat(o," and ").concat(s," must match"))}}))}function oV(e){return el().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&e<=4}var sV=(0,Te.Z)((function e(t){(0,Se.Z)(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=Jz.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];var n=MB();this.outputShape=t,this.enableShapeUniforms=oV(this.outputShape.length),this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(this.enableShapeUniforms?zB(["r","c","d"],t):PB(["r","c","d"],t),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        ").concat(n.output," = result;\n      }\n    ")})),uV=(0,Te.Z)((function e(t){(0,Se.Z)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=Jz.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];var n=MB();this.outputShape=t,this.enableShapeUniforms=oV(this.outputShape.length),this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(this.enableShapeUniforms?zB(["r","c","d"],t):PB(["r","c","d"],t),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        ").concat(n.output," = result;\n      }\n    ")})),cV=(0,Te.Z)((function e(t){(0,Se.Z)(this,e),this.variableNames=["A"],this.outTexUsage=eB.DOWNLOAD;var n=MB();this.outputShape=t,this.userCode="\n      ".concat(UB,"\n\n      void main() {\n        float x = getAAtOutCoords();\n        ").concat(n.output," = encode_float(x);\n      }\n    ")})),lV=(0,Te.Z)((function e(t){(0,Se.Z)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=eB.DOWNLOAD;var n=MB();this.outputShape=t,this.userCode="\n      ".concat(UB,"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        ").concat(n.output," = encode_float(x);\n      }\n    ")})),dV={R:0,G:1,B:2,A:3},fV=(0,Te.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"RGBA";(0,Se.Z)(this,e),this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];var a=MB();this.outputShape=t,this.enableShapeUniforms=oV(this.outputShape.length);var i="result";n&&(i="floor(result * 255. + 0.5)");for(var o="",s=0;s<r.length;s++){var u=r[s];o+="\n          if(offset == ".concat(s,") {\n            result = values[").concat(dV[u],"];\n          }")}this.userCode="\n      ".concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":VB(t),"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int flatIndex = getFlatIndex(coords);\n        float result = 0.;\n        int offset = imod(flatIndex, ").concat(r.length,");\n\n        flatIndex = idiv(flatIndex, ").concat(r.length,", 1.);\n\n        int r = flatIndex / texShape[1];\n        if (r < texShape[0]) {\n          int c = imod(flatIndex, texShape[1]);\n          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n          vec4 values = ").concat(a.texture2D,"(A, uv);\n          ").concat(o,"\n        }\n        ").concat(a.output," = vec4(").concat(i,", 0., 0., 0.);\n      }\n    ")})),hV=(0,Te.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(0,Se.Z)(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];var r=MB();this.outputShape=t,this.enableShapeUniforms=oV(this.outputShape.length);var a="",i="result";n&&(i="floor(result * 255. + 0.5)");for(var o=0;o<=1;o++)for(var s=0;s<=1;s++){var u=2*o+s;a+="\n          localCoords = coords;\n          if(localCoords[2] + ".concat(s," < ").concat(this.enableShapeUniforms?"outShape[2]":"".concat(t[2]),") {\n          localCoords[2] += ").concat(s,";\n          if (localCoords[1] + ").concat(o," < ").concat(this.enableShapeUniforms?"outShape[1]":"".concat(t[1]),") {\n            localCoords[1] += ").concat(o,";\n\n            flatIndex = getFlatIndex(localCoords);\n            offset = imod(flatIndex, 4);\n\n            flatIndex = idiv(flatIndex, 4, 1.);\n\n            int r = flatIndex / texShape[1];\n            int c = imod(flatIndex, texShape[1]);\n            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n            values = ").concat(r.texture2D,"(A, uv);\n\n            if (offset == 0) {\n              result[").concat(u,"] = values[0];\n            } else if (offset == 1) {\n              result[").concat(u,"] = values[1];\n            } else if (offset == 2) {\n              result[").concat(u,"] = values[2];\n            } else {\n              result[").concat(u,"] = values[3];\n            }\n          }\n        }\n        ")}this.userCode="\n        ".concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":VB(t),"\n\n        void main() {\n          ivec3 coords = getOutputCoords();\n\n          vec4 result = vec4(0.);\n          int flatIndex, r, c, offset;\n          ivec3 localCoords;\n          vec2 uv;\n          vec4 values;\n\n          ").concat(a,"\n\n          ").concat(r.output," = ").concat(i,";\n        }\n    ")}));function pV(e){var t=MB();return function(e,t){var n=SB(e,(function(){return e.createShader(e.VERTEX_SHADER)}),"Unable to create vertex WebGLShader.");if(cB(e,(function(){return e.shaderSource(n,t)})),cB(e,(function(){return e.compileShader(n)})),!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}(e,"".concat(t.version,"\n    precision highp float;\n    ").concat(t.attribute," vec3 clipSpacePos;\n    ").concat(t.attribute," vec2 uv;\n    ").concat(t.varyingVs," vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }"))}function vV(e){return function(e,t){var n=SB(e,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return cB(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,n)})),cB(e,(function(){return e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW)})),n}(e,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function mV(e){return function(e,t){var n=SB(e,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return cB(e,(function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n)})),cB(e,(function(){return e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW)})),n}(e,new Uint16Array([0,1,2,2,1,3]))}function gV(e,t,n,r,a,i){!function(e,t){var n=el().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0){var r="[".concat(e,"x").concat(t,"]");throw new Error("Requested texture size "+r+" is invalid.")}if(e>n||t>n){var a="[".concat(e,"x").concat(t,"]"),i="[".concat(n,"x").concat(n,"]");throw new Error("Requested texture size "+a+" greater than WebGL maximum on this browser / GPU "+i+".")}}(t,n);var o=function(e){return SB(e,(function(){return e.createTexture()}),"Unable to create WebGLTexture.")}(e),s=e.TEXTURE_2D;return cB(e,(function(){return e.bindTexture(s,o)})),cB(e,(function(){return e.texParameteri(s,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)})),cB(e,(function(){return e.texParameteri(s,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)})),cB(e,(function(){return e.texParameteri(s,e.TEXTURE_MIN_FILTER,e.NEAREST)})),cB(e,(function(){return e.texParameteri(s,e.TEXTURE_MAG_FILTER,e.NEAREST)})),1===el().getNumber("WEBGL_VERSION")?cB(e,(function(){return e.texImage2D(s,0,r,t,n,0,a,i,null)})):cB(e,(function(){return e.texStorage2D(s,1,r,t,n)})),cB(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)})),{texture:o,texShape:[n,t]}}function yV(e){return e.internalFormatFloat}function bV(e){return e.internalFormatHalfFloat}function kV(e){return e.downloadTextureFormat}function wV(e){return e.internalFormatPackedFloat}function xV(e){return e.internalFormatPackedHalfFloat}function IV(e,t,n,r,a,i,o,s){var u=e,c=new Float32Array(function(e,t){var n=sB(e,t),r=(0,ge.Z)(n,2);return r[0]*r[1]*4}(i,o));return u.bindBuffer(u.PIXEL_PACK_BUFFER,t),u.getBufferSubData(u.PIXEL_PACK_BUFFER,0,c),u.bindBuffer(u.PIXEL_PACK_BUFFER,null),c}var SV=function(){function e(t){(0,Se.Z)(this,e),this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];var n=el().getNumber("WEBGL_VERSION");if(null!=t?(this.gl=t,function(e,t){nB[e]=t}(n,t)):this.gl=aB(n),t=this.gl,2===el().getNumber("WEBGL_VERSION")){var r=t;this.createVertexArray=function(){return cB(r,(function(){return r.createVertexArray()}))},this.bindVertexArray=function(e){return cB(r,(function(){return r.bindVertexArray(e)}))},this.deleteVertexArray=function(e){return cB(r,(function(){return r.deleteVertexArray(e)}))},this.getVertexArray=function(){return cB(r,(function(){return r.getParameter(r.VERTEX_ARRAY_BINDING)}))}}else if(null!=t){var a=t.getExtension("OES_vertex_array_object");if(null==a)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=function(){return cB(t,(function(){return a.createVertexArrayOES()}))},this.bindVertexArray=function(e){return cB(t,(function(){return a.bindVertexArrayOES(e)}))},this.deleteVertexArray=function(e){return cB(t,(function(){return a.deleteVertexArrayOES(e)}))},this.getVertexArray=function(){return cB(t,(function(){return t.getParameter(a.VERTEX_ARRAY_BINDING_OES)}))}}var i="WEBGL_color_buffer_float",o="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),1===el().getNumber("WEBGL_VERSION")){var s="OES_texture_half_float";if(this.textureFloatExtension=hB(this.gl,"OES_texture_float"),AB(this.gl,s))this.textureHalfFloatExtension=hB(this.gl,s);else if(el().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(i),AB(this.gl,o))this.colorBufferHalfFloatExtension=hB(this.gl,o);else if(el().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(i="EXT_color_buffer_float",AB(this.gl,i))this.colorBufferFloatExtension=this.gl.getExtension(i);else{if(!AB(this.gl,o))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension(o)}this.vertexBuffer=vV(this.gl),this.indexBuffer=mV(this.gl),this.framebuffer=function(e){return SB(e,(function(){return e.createFramebuffer()}),"Unable to create WebGLFramebuffer.")}(this.gl),this.textureConfig=uB(this.gl,this.textureHalfFloatExtension)}return(0,Te.Z)(e,[{key:"debug",get:function(){return el().getBool("DEBUG")}},{key:"dispose",value:function(){var e=this;if(!this.disposed){null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var t=this.gl;cB(t,(function(){return t.finish()})),cB(t,(function(){return t.bindFramebuffer(t.FRAMEBUFFER,null)})),cB(t,(function(){return t.deleteFramebuffer(e.framebuffer)})),cB(t,(function(){return t.bindBuffer(t.ARRAY_BUFFER,null)})),cB(t,(function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)})),cB(t,(function(){return t.deleteBuffer(e.indexBuffer)})),this.disposed=!0}}},{key:"createFloat32MatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=iB(t,n),i=(0,ge.Z)(a,2);return gV(e,i[0],i[1],yV(r),r.textureFormatFloat,e.FLOAT)}(this.gl,e,t,this.textureConfig)}},{key:"createFloat16MatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=iB(t,n),i=(0,ge.Z)(a,2);return gV(e,i[0],i[1],bV(r),r.textureFormatFloat,r.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}},{key:"createUnsignedBytesMatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=iB(t,n),i=(0,ge.Z)(a,2);return gV(e,i[0],i[1],kV(r),e.RGBA,e.UNSIGNED_BYTE)}(this.gl,e,t,this.textureConfig)}},{key:"uploadPixelDataToTexture",value:function(e,t){this.throwIfDisposed(),function(e,t,n){cB(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)})),n.data instanceof Uint8Array?2===el().getNumber("WEBGL_VERSION")?cB(e,(function(){return e.texSubImage2D(e.TEXTURE_2D,0,0,0,n.width,n.height,e.RGBA,e.UNSIGNED_BYTE,n.data)})):cB(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n.width,n.height,0,e.RGBA,e.UNSIGNED_BYTE,n.data)})):2===el().getNumber("WEBGL_VERSION")?cB(e,(function(){return e.texSubImage2D(e.TEXTURE_2D,0,0,0,e.RGBA,e.UNSIGNED_BYTE,n)})):cB(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n)})),cB(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}(this.gl,e,t)}},{key:"uploadDenseMatrixToTexture",value:function(e,t,n,r){this.throwIfDisposed(),function(e,t,n,r,a,i){var o,s,u;cB(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)})),a instanceof Uint8Array?(o=new Uint8Array(n*r*4),s=e.UNSIGNED_BYTE,u=e.RGBA):(o=new Float32Array(n*r*4),s=e.FLOAT,u=i.internalFormatPackedFloat),o.set(a),2===el().getNumber("WEBGL_VERSION")?cB(e,(function(){return e.texSubImage2D(e.TEXTURE_2D,0,0,0,n,r,e.RGBA,s,o)})):cB(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,u,n,r,0,e.RGBA,s,o)})),cB(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}(this.gl,e,t,n,r,this.textureConfig)}},{key:"createFloat16PackedMatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=sB(t,n),i=(0,ge.Z)(a,2);return gV(e,i[0],i[1],xV(r),e.RGBA,r.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}},{key:"createPackedMatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=sB(t,n),i=(0,ge.Z)(a,2);return gV(e,i[0],i[1],wV(r),e.RGBA,e.FLOAT)}(this.gl,e,t,this.textureConfig)}},{key:"deleteMatrixTexture",value:function(e){var t=this;this.throwIfDisposed(),this.outputTexture===e&&(xB(this.gl,this.framebuffer),this.outputTexture=null),cB(this.gl,(function(){return t.gl.deleteTexture(e)}))}},{key:"downloadByteEncodedFloatMatrixFromOutputTexture",value:function(e,t,n){var r=this;return this.downloadMatrixDriver(e,(function(){return function(e,t,n,r){var a=iB(t,n),i=(0,ge.Z)(a,2),o=i[0],s=i[1],u=new Uint8Array(t*n*4);return cB(e,(function(){return e.readPixels(0,0,o,s,r.downloadTextureFormat,e.UNSIGNED_BYTE,u)})),new Float32Array(u.buffer)}(r.gl,t,n,r.textureConfig)}))}},{key:"downloadPackedMatrixFromBuffer",value:function(e,t,n,r,a,i){return IV(this.gl,e,0,0,0,a,i,this.textureConfig)}},{key:"downloadFloat32MatrixFromBuffer",value:function(e,t){return function(e,t,n){var r=e,a=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,a),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),a}(this.gl,e,t)}},{key:"createBufferFromTexture",value:function(e,t,n){this.bindTextureToFrameBuffer(e);var r=function(e,t,n,r){var a=e.createBuffer();cB(e,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,a)}));var i=16*t*n;return cB(e,(function(){return e.bufferData(e.PIXEL_PACK_BUFFER,i,e.STREAM_READ)})),cB(e,(function(){return e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,0)})),cB(e,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,null)})),a}(this.gl,t,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),r}},{key:"createAndWaitForFence",value:function(){var e=this.createFence(this.gl);return this.pollFence(e)}},{key:"createFence",value:function(e){var t,n,r=this;if(el().getBool("WEBGL_FENCE_API_ENABLED")){var a=e,i=a.fenceSync(a.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),n=function(){var e=a.clientWaitSync(i,0,0);return e===a.ALREADY_SIGNALED||e===a.CONDITION_SATISFIED},t=i}else el().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),n=function(){return r.isQueryAvailable(t,el().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):n=function(){return!0};return{query:t,isFencePassed:n}}},{key:"downloadMatrixFromPackedTexture",value:function(e,t,n){var r=this;return this.downloadMatrixDriver(e,(function(){return function(e,t,n){var r=new Float32Array(t*n*4);return cB(e,(function(){return e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,r)})),r}(r.gl,t,n)}))}},{key:"createProgram",value:function(e){var t=this;this.throwIfDisposed();var n=this.gl;null==this.vertexShader&&(this.vertexShader=pV(n));var r,a=function(e){return SB(e,(function(){return e.createProgram()}),"Unable to create WebGLProgram.")}(n);return cB(n,(function(){return n.attachShader(a,t.vertexShader)})),cB(n,(function(){return n.attachShader(a,e)})),function(e,t){if(cB(e,(function(){return e.linkProgram(t)})),!el().get("ENGINE_COMPILE_ONLY")&&!1===e.getProgramParameter(t,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}(n,a),r=Object.assign(a,{vao:this.createVertexArray()}),this.bindVertexArray(r.vao),cB(n,(function(){return n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.indexBuffer)})),console.assert(function(e,t,n){return cB(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,n)})),bB(e,t,"clipSpacePos",n,3,20,0)&&bB(e,t,"uv",n,2,20,12)}(n,r,this.vertexBuffer),"gpgpu_util.bindVertexProgramAttributeStreams not fully successful."),this.debug&&yB(n,r),this.setProgram(r),r}},{key:"deleteProgram",value:function(e){var t=this;this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&(cB(this.gl,(function(){return t.gl.deleteProgram(e)})),this.deleteVertexArray(e.vao))}},{key:"setProgram",value:function(e){var t=this;this.throwIfDisposed(),this.program=e,null!=this.program&&(this.bindVertexArray(this.program.vao),this.debug&&yB(this.gl,this.program)),cB(this.gl,(function(){return t.gl.useProgram(e)}))}},{key:"getUniformLocation",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.throwIfDisposed(),n?function(e,t,n){return SB(e,(function(){return e.getUniformLocation(t,n)}),'uniform "'+n+'" not present in program.')}(this.gl,e,t):function(e,t,n){return e.getUniformLocation(t,n)}(this.gl,e,t)}},{key:"getAttributeLocation",value:function(e,t){var n=this;return this.throwIfDisposed(),cB(this.gl,(function(){return n.gl.getAttribLocation(e,t)}))}},{key:"getUniformLocationNoThrow",value:function(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)}},{key:"setInputMatrixTexture",value:function(e,t,n){this.throwIfDisposed(),this.throwIfNoProgram(),kB(this.gl,e,t,n)}},{key:"setOutputMatrixTexture",value:function(e,t,n){this.setOutputMatrixTextureDriver(e,n,t)}},{key:"setOutputPackedMatrixTexture",value:function(e,t,n){this.throwIfDisposed();var r=sB(t,n),a=(0,ge.Z)(r,2),i=a[0],o=a[1];this.setOutputMatrixTextureDriver(e,i,o)}},{key:"setOutputMatrixWriteRegion",value:function(e,t,n,r){this.setOutputMatrixWriteRegionDriver(n,e,r,t)}},{key:"setOutputPackedMatrixWriteRegion",value:function(e,t,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}},{key:"debugValidate",value:function(){null!=this.program&&yB(this.gl,this.program),IB(this.gl)}},{key:"executeProgram",value:function(){this.throwIfDisposed(),this.throwIfNoProgram();var e=this.gl;if(this.debug){var t=this.getVertexArray();console.assert(t===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}cB(e,(function(){return e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)}))}},{key:"blockUntilAllProgramsCompleted",value:function(){var e=this;this.throwIfDisposed(),cB(this.gl,(function(){return e.gl.finish()}))}},{key:"getQueryTimerExtension",value:function(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=hB(this.gl,2===el().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}},{key:"getQueryTimerExtensionWebGL2",value:function(){return this.getQueryTimerExtension()}},{key:"getQueryTimerExtensionWebGL1",value:function(){return this.getQueryTimerExtension()}},{key:"beginQuery",value:function(){if(2===el().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.gl,t=this.getQueryTimerExtensionWebGL2(),n=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,n),n}var r=this.getQueryTimerExtensionWebGL1(),a=r.createQueryEXT();return r.beginQueryEXT(r.TIME_ELAPSED_EXT,a),a}},{key:"endQuery",value:function(){if(2!==el().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}else{var t=this.gl,n=this.getQueryTimerExtensionWebGL2();t.endQuery(n.TIME_ELAPSED_EXT)}}},{key:"waitForQueryAndGetTime",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){var n=this;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Cc((function(){return n.disposed||n.isQueryAvailable(t,el().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}));case 2:return e.abrupt("return",this.getQueryTime(t,el().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getQueryTime",value:function(e,t){if(0===t)return null;if(2===t){var n=this.gl;return n.getQueryParameter(e,n.QUERY_RESULT)/1e6}var r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6}},{key:"isQueryAvailable",value:function(e,t){if(0===t)return!0;if(2===t){var n=this.gl,r=this.getQueryTimerExtensionWebGL2(),a=n.getQueryParameter(e,n.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),a&&!this.disjoint}var i=this.getQueryTimerExtensionWebGL1(),o=i.getQueryObjectEXT(e,i.QUERY_RESULT_AVAILABLE_EXT);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),o&&!this.disjoint}},{key:"pollFence",value:function(e){var t=this;return new Promise((function(n){t.addItemToPoll((function(){return e.isFencePassed()}),(function(){return n()}))}))}},{key:"pollItems",value:function(){for(var e=function(e){for(var t=0;t<e.length;++t){if(!e[t]())break}return t-1}(this.itemsToPoll.map((function(e){return e.isDoneFn}))),t=0;t<=e;++t){(0,this.itemsToPoll[t].resolveFn)()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}},{key:"addItemToPoll",value:function(e,t){var n=this;if(this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),!(this.itemsToPoll.length>1)){var r=void 0;"setTimeoutCustom"in el().platform&&(r=el().platform.setTimeoutCustom.bind(el().platform)),Cc((function(){return n.pollItems(),0===n.itemsToPoll.length}),(function(){return 0}),null,r)}}},{key:"bindTextureToFrameBuffer",value:function(e){this.throwIfDisposed(),wB(this.gl,e,this.framebuffer),this.debug&&IB(this.gl)}},{key:"unbindTextureToFrameBuffer",value:function(){null!=this.outputTexture?(wB(this.gl,this.outputTexture,this.framebuffer),this.debug&&IB(this.gl)):xB(this.gl,this.framebuffer)}},{key:"downloadMatrixDriver",value:function(e,t){this.bindTextureToFrameBuffer(e);var n=t();return this.unbindTextureToFrameBuffer(),n}},{key:"setOutputMatrixTextureDriver",value:function(e,t,n){this.throwIfDisposed();var r=this.gl;wB(r,e,this.framebuffer),this.debug&&IB(r),this.outputTexture=e,cB(r,(function(){return r.viewport(0,0,t,n)})),cB(r,(function(){return r.scissor(0,0,t,n)}))}},{key:"setOutputMatrixWriteRegionDriver",value:function(e,t,n,r){var a=this;this.throwIfDisposed(),cB(this.gl,(function(){return a.gl.scissor(e,t,n,r)}))}},{key:"throwIfDisposed",value:function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}},{key:"throwIfNoProgram",value:function(){if(null==this.program)throw new Error("No GPU program is currently set.")}}]),e}();var TV=lO,EV=nL,NV=rL,CV=iO,ZV=oL,_V=fL,AV=KL,RV=eF,DV=iF,OV=xF,LV=_F,FV=RF,MV=OF,PV=MF,zV=qF,BV=XF,VV=JF,UV=tM,WV=mM,jV=bM,GV=ZM,HV=VL,qV=zM,$V=qM,KV=oP,XV=dP,YV=pP,QV=kP,JV=xP,eU=OP,tU=MP,nU=XD,rU=bO,aU=QO,iU=tz,oU=rz,sU=iz,uU=lz,cU=gz,lU=xz,dU=Tz,fU=Cz,hU=_z,pU=dF,vU=Fz,mU=Bz,gU=EO,yU=qz;function bU(e,t){return["x","y","z","w","u","v"].slice(0,t).map((function(t){return"".concat(e,".").concat(t)}))}function kU(e,t){return 1===t?[e]:bU(e,t)}var wU=function(){function e(t){if((0,Se.Z)(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=t,this.rank=t.length,this.enableShapeUniforms=oV(this.outputShape.length),0===this.rank)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{var n=kU("rc",this.rank),r=JB(this.rank),a=this.getOutOfBoundsCondition(n),i=this.getSetup(n),o=this.getOutput(n);this.userCode="\n        void main() {\n          ".concat(r," rc = getOutputCoords();\n\n          if(").concat(a,") {\n            setOutput(vec4(0));\n          } else {\n            ").concat(i,"\n\n            setOutput(vec4(").concat(o,"));\n          }\n        }\n      ")}}return(0,Te.Z)(e,[{key:"getSourceCoordsArr",value:function(e){for(var t=[],n=0;n<=1;n++)for(var r=0;r<=1;r++){for(var a="".concat(0===n?"r":"rp1",", ").concat(0===r?"c":"cp1"),i=2;i<this.rank;i++)a="".concat(e[e.length-1-i],",")+a;t.push(a)}return t}},{key:"getOutOfBoundsCondition",value:function(e){if(1===this.rank)return"rc > ".concat(this.enableShapeUniforms?"outShape":this.outputShape[0]);for(var t="",n=this.rank-2;n<this.rank;n++)t+="".concat(e[n]," >= ").concat(this.enableShapeUniforms?"outShape[".concat(n,"]"):this.outputShape[n]),n<this.rank-1&&(t+="||");return t}},{key:"getSetup",value:function(e){if(1===this.rank)return"";var t=e.slice(-2),n=this.enableShapeUniforms?"outShape[".concat(this.rank," - 1]"):this.outputShape[this.rank-1],r=this.enableShapeUniforms?"outShape[".concat(this.rank," - 2]"):this.outputShape[this.rank-2];return"\n      int r = ".concat(t[0],";\n      int c = ").concat(t[1],";\n      int rp1 = r + 1;\n      int cp1 = c + 1;\n\n      bool cEdge = cp1 >= ").concat(n,";\n      bool rEdge = rp1 >= ").concat(r,";\n    ")}},{key:"getOutput",value:function(e){var t=this.getSourceCoordsArr(e);if(1===this.rank){var n=this.enableShapeUniforms?"outShape":this.outputShape[0];return"getA(rc), (rc + 1 >= ".concat(n," ? 0. : getA(rc + 1)), 0, 0")}return"getA(".concat(t[0],"),\n            cEdge ? 0. : getA(").concat(t[1],"),\n            rEdge ? 0. : getA(").concat(t[2],"),\n            rEdge || cEdge ? 0. : getA(").concat(t[3],")")}}]),e}(),xU=(0,Te.Z)((function e(t,n){(0,Se.Z)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=t,this.enableShapeUniforms=oV(this.outputShape.length);for(var r="",a=0;a<4;a++){var i="thisRC = rc;";a%2===1&&(i+="thisRC.z += 1;"),a>1&&(i+="thisRC.y += 1;"),r+="\n        ".concat(i,"\n        ").concat(a>0?"if(thisRC.y < rows && thisRC.z < cols){":"","\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[").concat(a,"] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        ").concat(a>0?"}":"","\n      ")}this.userCode="\n      ".concat(function(e,t){var n=t?BB(["r","c","d"],"inputShape"):PB(["r","c","d"],e);return"\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ".concat(n,"\n      return ivec3(r, c, d);\n    }\n  ")}(n,this.enableShapeUniforms),"\n      ").concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":VB(t),"\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = ").concat(this.enableShapeUniforms?"outShape[1]":t[1],";\n        int cols = ").concat(this.enableShapeUniforms?"outShape[2]":t[2],";\n\n        ").concat(r,"\n\n        setOutput(result);\n      }\n    ")}));var IU=function(){function e(t){(0,Se.Z)(this,e),this.gpgpu=t,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}return(0,Te.Z)(e,[{key:"acquireTexture",value:function(e,t,n){var r=TU(t,n),a=EU(e,r,n);a in this.freeTextures||(this.freeTextures[a]=[]),a in this.usedTextures||(this.usedTextures[a]=[]);var i,o=SU(e,r,this.gpgpu.gl,this.gpgpu.textureConfig,n);if(this.freeTextures[a].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=o,this.log();var s=this.freeTextures[a].pop();return this.usedTextures[a].push(s),s}return r===tB.PACKED_2X2_FLOAT32?i=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):r===tB.PACKED_2X2_FLOAT16?i=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):r===tB.UNPACKED_FLOAT32?i=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):r===tB.UNPACKED_FLOAT16?i=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):r===tB.PACKED_4X1_UNSIGNED_BYTE&&(i=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[a].push(i),this.numUsedTextures++,this._numBytesAllocated+=o,this.log(),i}},{key:"releaseTexture",value:function(e,t,n,r){if(null!=this.freeTextures){var a=TU(n,r),i=EU(t,a,r);i in this.freeTextures||(this.freeTextures[i]=[]);var o=SU(t,a,this.gpgpu.gl,this.gpgpu.textureConfig,r),s=el().get("WEBGL_DELETE_TEXTURE_THRESHOLD");-1!==s&&this._numBytesAllocated>s?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=o):(this.freeTextures[i].push(e),this.numFreeTextures++,this._numBytesFree+=o),this.numUsedTextures--;var u=this.usedTextures[i],c=u&&u.indexOf(e);if(null==c||c<0)throw new Error("Cannot release a texture that was never provided by this texture manager");u[c]=u[u.length-1],u.pop(),this.log()}}},{key:"log",value:function(){if(this.logEnabled){var e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used","".concat(this.numFreeTextures," / ").concat(this.numUsedTextures),"(".concat(e,")"));var t=this._numBytesFree/this._numBytesAllocated;console.log("Bytes allocated: ".concat(this._numBytesAllocated)),console.log("Bytes unused: ".concat(this._numBytesFree," (").concat(Math.round(100*t),"%)"))}}},{key:"numBytesAllocated",get:function(){return this._numBytesAllocated}},{key:"numBytesFree",get:function(){return this._numBytesFree}},{key:"getNumUsedTextures",value:function(){return this.numUsedTextures}},{key:"getNumFreeTextures",value:function(){return this.numFreeTextures}},{key:"dispose",value:function(){var e=this;if(null!=this.freeTextures){for(var t in this.freeTextures)this.freeTextures[t].forEach((function(t){e.gpgpu.deleteMatrixTexture(t.texture)}));for(var n in this.usedTextures)this.usedTextures[n].forEach((function(t){e.gpgpu.deleteMatrixTexture(t.texture)}));this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}]),e}();function SU(e,t,n,r,a){var i,o=function(e,t){switch(e){case tB.PACKED_2X2_FLOAT32:return wV(t);case tB.PACKED_2X2_FLOAT16:return xV(t);case tB.UNPACKED_FLOAT32:return yV(t);case tB.UNPACKED_FLOAT16:return bV(t);case tB.PACKED_4X1_UNSIGNED_BYTE:return kV(t);default:throw new Error("Unknown physical texture type ".concat(e))}}(t,r);if(a){var s=sB(e[0],e[1]),u=(0,ge.Z)(s,2);i=u[0]*u[1]}else{var c=iB(e[0],e[1]),l=(0,ge.Z)(c,2);i=l[0]*l[1]}var d=function(e,t){var n=e;if(t===n.R32F)return 4;if(t===n.R16F)return 2;if(t===n.RGBA32F)return 16;if(t===e.RGBA)return 16;if(t===n.RGBA16F)return 8;if(t===n.RGBA8)return 4;throw new Error("Unknown internal format ".concat(t))}(n,o);return i*d}function TU(e,t){if(e===eB.UPLOAD)return tB.PACKED_2X2_FLOAT32;if(e===eB.RENDER||null==e)return function(e){return el().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?tB.PACKED_2X2_FLOAT32:tB.UNPACKED_FLOAT32:e?tB.PACKED_2X2_FLOAT16:tB.UNPACKED_FLOAT16}(t);if(e===eB.DOWNLOAD||e===eB.PIXELS)return tB.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type ".concat(e))}function EU(e,t,n){return"".concat(e[0],"_").concat(e[1],"_").concat(t,"_").concat(n)}var NU=(0,Te.Z)((function e(t,n){(0,Se.Z)(this,e),this.variableNames=["A"],this.outputShape=t,this.enableShapeUniforms=oV(this.outputShape.length),this.userCode="\n      float unaryOperation(float x) {\n        ".concat(n,"\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")})),CU="if (isnan(x)) return x;",ZU="return x;",_U="return abs(x);";var AU="return (x >= 0.0) ? x : (exp(x) - 1.0);",RU=CU+"\n  return (x < 0.0) ? 0.0 : x;\n",DU=CU+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",OU="return x;",LU="return 1.0 / (1.0 + exp(-1.0 * x));",FU="return x;",MU="\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n",PU="\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",zU="\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",BU="return 1.0 / (1.0 + exp(-1.0 * x));",VU=(0,Te.Z)((function e(t,n){(0,Se.Z)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.enableShapeUniforms=oV(this.outputShape.length),this.userCode="\n      vec4 unaryOperation(vec4 x) {\n        ".concat(n,"\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")})),UU=(0,Te.Z)((function e(t){(0,Se.Z)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=t,this.enableShapeUniforms=oV(this.outputShape.length);var n=t.length,r=kU("rc",n),a=JB(n),i=function(e,t){if(1===e)return"rc";for(var n="",r=0;r<e;r++)n+=t[r],r<e-1&&(n+=",");return n}(n,r),o=r.slice(-2),s=n<=1?"rc":"vec2(".concat(o.join(","),")");this.userCode="\n      void main() {\n        ".concat(a," rc = getOutputCoords();\n        vec4 packedInput = getA(").concat(i,");\n\n        setOutput(getChannel(packedInput, ").concat(s,"));\n      }\n    ")})),WU=uw,jU={};var GU=el().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),HU=600;var qU=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r,a,i;if((0,Se.Z)(this,n),(r=t.call(this)).pendingRead=new WeakMap,r.pendingDisposal=new WeakSet,r.dataRefCount=new WeakMap,r.numBytesInGPU=0,r.uploadWaitMs=0,r.downloadWaitMs=0,r.lastGlFlushTime=0,r.warnedAboutMemory=!1,r.pendingDeletes=0,r.disposed=!1,!el().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(null!=e){if(e instanceof SV)a=e;else{var o=aB(el().getNumber("WEBGL_VERSION"),e);a=new SV(o)}r.binaryCache={},r.gpgpuCreatedLocally=!1}else{var s=aB(el().getNumber("WEBGL_VERSION"));a=new SV(s),r.binaryCache=((i=el().getNumber("WEBGL_VERSION"))in jU||(jU[i]={}),jU[i]),r.gpgpuCreatedLocally=!0}return r.gpgpu=a,r.canvas=r.gpgpu.gl.canvas,r.textureManager=new IU(r.gpgpu),r.numMBBeforeWarning=null==el().global.screen?1024:el().global.screen.height*el().global.screen.width*window.devicePixelRatio*HU/1024/1024,r.texData=new fc((0,we.Z)(r),tm()),r}return(0,Te.Z)(n,[{key:"nextDataId",value:function(){return n.nextDataId++}},{key:"numDataIds",value:function(){return this.texData.numDataIds()-this.pendingDeletes}},{key:"writeTexture",value:function(e,t,n,r,a,i){var o=this.makeTensorInfo(t,n),s=this.texData.get(o.dataId);s.isPacked=!1,s.texture={texture:e,texShape:[r,a]},s.texShape=[r,a];var u=CB(t),c=new fV(u,!1,i),l=this.runWebGLProgram(c,[o],n,[[r,a]]);return l.shape=t,s.texture=null,this.disposeIntermediateTensorInfo(o),l.dataId}},{key:"write",value:function(e,t,n){if((el().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||el().getBool("DEBUG"))&&this.checkNumericalProblems(e),"complex64"===n&&null!=e)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var r={id:this.nextDataId()};return this.texData.set(r,{shape:t,dtype:n,values:e,usage:eB.UPLOAD,refCount:1}),r}},{key:"refCount",value:function(e){return this.texData.has(e)?this.texData.get(e).refCount:0}},{key:"incRef",value:function(e){this.texData.get(e).refCount++}},{key:"decRef",value:function(e){this.texData.has(e)&&this.texData.get(e).refCount--}},{key:"move",value:function(e,t,n,r,a){if(el().getBool("DEBUG")&&this.checkNumericalProblems(t),"complex64"===r)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:n,dtype:r,values:t,usage:eB.UPLOAD,refCount:a})}},{key:"disposeIntermediateTensorInfo",value:function(e){this.disposeData(e.dataId)}},{key:"readSync",value:function(e){var t=this.texData.get(e),n=t.values,r=t.dtype,a=t.complexTensorInfos,i=t.slice,o=t.shape,s=t.isPacked;if(null!=i){var u;u=s?new VU(o,OU):new NU(o,OU);var c=this.runWebGLProgram(u,[{dataId:e,shape:o,dtype:r}],r),l=this.readSync(c.dataId);return this.disposeIntermediateTensorInfo(c),l}if(null!=n)return this.convertAndCacheOnCPU(e);if("string"===r)return n;var d,f,h=null!=this.activeTimers;(h&&(d=Bh()),"complex64"===r)?f=cI(this.readSync(a.real.dataId),this.readSync(a.imag.dataId)):f=this.getValuesFromTexture(e);return h&&(this.downloadWaitMs+=Bh()-d),this.convertAndCacheOnCPU(e,f)}},{key:"read",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){var n,r,a,i,o,s,u,c,l,d,f,h,p,v,m,g,y,b,k,w,x,I,S;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.pendingRead.has(t)){e.next=3;break}return n=this.pendingRead.get(t),e.abrupt("return",new Promise((function(e){return n.push(e)})));case 3:if(r=this.texData.get(t),a=r.values,i=r.shape,o=r.slice,s=r.dtype,u=r.complexTensorInfos,c=r.isPacked,null==o){e.next=11;break}return l=c?new VU(i,OU):new NU(i,OU),d=this.runWebGLProgram(l,[{dataId:t,shape:i,dtype:s}],s),f=this.read(d.dataId),this.disposeIntermediateTensorInfo(d),e.abrupt("return",f);case 11:if(null==a){e.next=13;break}return e.abrupt("return",this.convertAndCacheOnCPU(t));case 13:if(!el().getBool("DEBUG")){e.next=16;break}if(el().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")||2!==el().getNumber("WEBGL_VERSION")){e.next=16;break}throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");case 16:if(h=null,"complex64"!==s&&el().get("WEBGL_BUFFER_SUPPORTED")&&(p=this.decode(t),m=this.texData.get(p.dataId),h=(v=this.gpgpu).createBufferFromTexture.apply(v,[m.texture.texture].concat((0,me.Z)(oB(i))))),this.pendingRead.set(t,[]),"complex64"===s){e.next=22;break}return e.next=22,this.gpgpu.createAndWaitForFence();case 22:if("complex64"!==s){e.next=31;break}return e.next=25,Promise.all([this.read(u.real.dataId),this.read(u.imag.dataId)]);case 25:y=e.sent,b=y[0],k=y[1],g=cI(b,k),e.next=32;break;case 31:null==h?g=this.getValuesFromTexture(t):(w=Ic(i),g=this.gpgpu.downloadFloat32MatrixFromBuffer(h,w));case 32:return null!=p&&this.disposeIntermediateTensorInfo(p),null!=h&&cB(x=this.gpgpu.gl,(function(){return x.deleteBuffer(h)})),I=this.convertAndCacheOnCPU(t,g),S=this.pendingRead.get(t),this.pendingRead.delete(t),S.forEach((function(e){return e(I)})),this.pendingDisposal.has(t)&&(this.pendingDisposal.delete(t),this.disposeData(t)&&tm().removeDataId(t,this),this.pendingDeletes--),e.abrupt("return",I);case 40:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"readToGPU",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.texData.get(e),r=n.values,a=n.shape,i=n.slice,o=n.dtype,s=n.isPacked,u=n.texture;if("complex64"===o)throw new Error("Does not support reading texture for complex64 dtype.");if(null!=i){var c;c=s?new VU(a,OU):new NU(a,OU);var l=this.runWebGLProgram(c,[{dataId:e,shape:a,dtype:o}],o),d=this.readToGPU(l,t);return this.disposeIntermediateTensorInfo(l),d}if(null==u)throw null!=r?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");var f=this.decode(e,t.customTexShape),h=tm().makeTensorFromTensorInfo(f),p=this.texData.get(f.dataId);return Object.assign({tensorRef:h},p.texture)}},{key:"bufferSync",value:function(e){var t=this.readSync(e.dataId);if("string"===e.dtype)try{var n=t.map((function(e){return Uh(e)}));return Yv(e.shape,e.dtype,n)}catch(rle){throw new Error("Failed to decode encoded string bytes into utf-8")}return Yv(e.shape,e.dtype,t)}},{key:"checkNumericalProblems",value:function(e){if(null!=e)for(var t=0;t<e.length;t++){var n=e[t];if(!fB(n)){if(el().getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error("The value ".concat(n," cannot be represented with your ")+"current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'");throw Error("The value ".concat(n," cannot be represented on this device."))}}}},{key:"getValuesFromTexture",value:function(e){var t=this.texData.get(e),n=t.shape,r=t.dtype,a=t.isPacked,i=Ic(n);if(el().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var o,s=this.decode(e),u=this.texData.get(s.dataId),c=(o=this.gpgpu).downloadMatrixFromPackedTexture.apply(o,[u.texture.texture].concat((0,me.Z)(oB(n)))).subarray(0,i);return this.disposeIntermediateTensorInfo(s),c}var l=el().getBool("WEBGL_PACK")&&!0===a,d=l?CB(n):n,f=l?new lV(d):new cV(d),h=this.runWebGLProgram(f,[{shape:d,dtype:r,dataId:e}],"float32"),p=this.texData.get(h.dataId),v=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(p.texture.texture,p.texShape[0],p.texShape[1]).subarray(0,i);return this.disposeIntermediateTensorInfo(h),v}},{key:"timerAvailable",value:function(){return el().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}},{key:"time",value:function(e){var t=this,n=this.activeTimers,r=[],a=!1;null==this.programTimersStack?(this.programTimersStack=r,a=!0):this.activeTimers.push(r),this.activeTimers=r,e();var i=jh(this.activeTimers.map((function(e){return e.query}))).filter((function(e){return null!=e})),o=jh(this.activeTimers.map((function(e){return e.name}))).filter((function(e){return null!=e}));this.activeTimers=n,a&&(this.programTimersStack=null);var s={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(0,ke.Z)((0,be.Z)().mark((function e(){var n;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(el().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)){e.next=8;break}return e.next=3,Promise.all(i);case 3:n=e.sent,s.kernelMs=bc(n),s.getExtraProfileInfo=function(){return n.map((function(e,t){return{name:o[t],ms:e}})).map((function(e){return"".concat(e.name,": ").concat(e.ms)})).join(", ")},e.next=9;break;case 8:s.kernelMs={error:"WebGL query timers are not supported in this environment."};case 9:return t.uploadWaitMs=0,t.downloadWaitMs=0,e.abrupt("return",s);case 12:case"end":return e.stop()}}),e)})))()}},{key:"memory",value:function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}},{key:"startTimer",value:function(){return el().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:Bh(),endMs:null}}},{key:"endTimer",value:function(e){return el().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=Bh(),e)}},{key:"getQueryTime",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){var n;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(el().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)){e.next=2;break}return e.abrupt("return",this.gpgpu.waitForQueryAndGetTime(t));case 2:return n=t,e.abrupt("return",n.endMs-n.startMs);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"disposeData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(t?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!t&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);var n=this.texData.get(e).complexTensorInfos;return null!=n&&(this.disposeData(n.real.dataId,t),this.disposeData(n.imag.dataId,t)),this.texData.delete(e),!0}},{key:"releaseGPUData",value:function(e){var t=this.texData.get(e),n=t.texture,r=t.dtype,a=t.texShape,i=t.usage,o=t.isPacked,s=t.slice,u=s&&s.origDataId||e,c=this.dataRefCount.get(u);c>1?this.dataRefCount.set(u,c-1):(this.dataRefCount.delete(u),null!=n&&(this.numBytesInGPU-=this.computeBytes(a,r),this.textureManager.releaseTexture(n,a,i,o)));var l=this.texData.get(e);l.texture=null,l.texShape=null,l.isPacked=!1,l.slice=null}},{key:"getTexture",value:function(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}},{key:"getDataInfo",value:function(e){return this.texData.get(e)}},{key:"shouldExecuteOnCPU",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:GU;return el().getBool("WEBGL_CPU_FORWARD")&&e.every((function(e){return null==t.texData.get(e.dataId).texture&&Ic(e.shape)<n}))}},{key:"getGPGPUContext",value:function(){return this.gpgpu}},{key:"where",value:function(e){vh("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var t=e.dataSync();return WU(e.shape,t)}},{key:"packedUnaryOp",value:function(e,t,n){var r=new VU(e.shape,t),a=this.compileAndRun(r,[e],n);return tm().makeTensorFromTensorInfo(a)}},{key:"abs",value:function(e){if(this.shouldExecuteOnCPU([e])&&"complex64"!==e.dtype){var t=rU(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,t)}if(el().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,_U,e.dtype);var n=new NU(e.shape,_U),r=this.compileAndRun(n,[e]);return tm().makeTensorFromTensorInfo(r)}},{key:"makeTensorInfo",value:function(e,t,n){var r;if("string"===t&&null!=n&&n.length>0&&Fc(n[0])){var a=n.map((function(e){return Vh(e)}));r=this.write(a,e,t)}else r=this.write(n,e,t);return this.texData.get(r).usage=null,{dataId:r,shape:e,dtype:t}}},{key:"makeOutput",value:function(e,t,n){return tm().makeTensorFromTensorInfo(this.makeTensorInfo(e,t,n),this)}},{key:"unpackTensor",value:function(e){var t=new UU(e.shape);return this.runWebGLProgram(t,[e],e.dtype)}},{key:"packTensor",value:function(e){var t=new wU(e.shape);return this.runWebGLProgram(t,[e],e.dtype,null,!0)}},{key:"packedReshape",value:function(e,t){var n=[EB(e.shape)].concat((0,me.Z)(NB(e.shape))),r={dtype:e.dtype,shape:n,dataId:e.dataId},a=[EB(t)].concat((0,me.Z)(NB(t))),i=new xU(a,n),o=[n],s=this.runWebGLProgram(i,[r],e.dtype,o,!0);return{dataId:s.dataId,shape:t,dtype:s.dtype}}},{key:"decode",value:function(e,t){var n=this.texData.get(e),r=n.isPacked,a=n.shape,i=n.dtype;null!=t&&kc(Ic(a)<=t[0]*t[1]*4,(function(){return"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data."}));var o,s=CB(a);o=r?new uV(s):new sV(s);var u=[null!=t?t:oB(s)];return{dtype:i,shape:a,dataId:this.runWebGLProgram(o,[{shape:s,dtype:i,dataId:e}],i,u,!0,t).dataId}}},{key:"runWebGLProgram",value:function(e,t,n,r){var a=this,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5?arguments[5]:void 0,s=this.makeTensorInfo(e.outputShape,n),u=this.texData.get(s.dataId);if(e.packedOutput&&(u.isPacked=!0),e.outPackingScheme===Jz.DENSE){var c=null!=o?o:oB(e.outputShape);u.texShape=c.map((function(e){return 2*e}))}if(null!=e.outTexUsage&&(u.usage=e.outTexUsage),0===Ic(s.shape))return u.values=Rc(s.dtype,0),s;var l=[],d=t.map((function(t){if("complex64"===t.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var n=a.texData.get(t.dataId);if(null==n.texture){if(!e.packedInputs&&Ic(t.shape)<=el().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:t.shape,texData:null,isUniform:!0,uniformValues:n.values};e.packedInputs&&(n.isPacked=!0,n.shape=t.shape)}if(a.uploadToGPU(t.dataId),!!n.isPacked!==!!e.packedInputs)t=n.isPacked?a.unpackTensor(t):a.packTensor(t),l.push(t),n=a.texData.get(t.dataId);else if(n.isPacked&&!_B(n.shape,t.shape)){var r=t,i=t.shape;t.shape=n.shape,t=a.packedReshape(t,i),l.push(t),n=a.texData.get(t.dataId),r.shape=i}return{shape:t.shape,texData:n,isUniform:!1}}));this.uploadToGPU(s.dataId);var f,h={shape:s.shape,texData:u,isUniform:!1},p=function(e,t,n){var r="";t.concat(n).forEach((function(t){var a=null!=t.texData&&null!=t.texData.slice&&t.texData.slice.flatOffset>0;if(e.enableShapeUniforms&&!t.isUniform){var i=t.texData.texShape,o=eV(e.packedInputs,t.shape,i),s=o.useSqueezeShape,u=o.uniformShape,c=o.keptDims,l="",d="",f="";if(1===u.length&&e.packedInputs){var h=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];l="".concat(h[0]>1,"_").concat(h[1]>1)}else if(2!==u.length||e.packedInputs){if(u.length>2&&!e.packedInputs){var p=Vc(u);f="".concat(p[0]===i[1],"_").concat(p[p.length-1]===i[1])}}else d="".concat(u[0]>1,"_").concat(u[1]>1);var v=t.shape.length,m=2===u.length&&Sc(t.shape,i),g=1===Ic(t.shape),y=Nm(t.shape,n.shape),b=!e.packedInputs&&v===n.shape.length&&Sc(i,n.texData.texShape),k=e.packedInputs||u.length>2?"":"".concat(i[0]>1,"_").concat(i[1]>1);r+="".concat(v,"_").concat(b,"_").concat(s?c:"","_").concat(u.length,"_").concat(g,"_").concat(y,"_").concat(m,"_").concat(l,"_").concat(d,"_").concat(f,"_").concat(k,"_").concat(a)}else{var w=t.isUniform?"uniform":t.texData.texShape;r+="".concat(t.shape,"_").concat(w,"_").concat(a)}}));var a=e.userCode,i=e.constructor.name;return i+"_"+r+"_"+a+"".concat(el().getNumber("WEBGL_VERSION"))}(e,d,h),v=this.getAndSaveBinary(p,(function(){return rV(a.gpgpu,e,d,h)})),m=null!=this.activeTimers;m&&(f=this.startTimer()),el().get("ENGINE_COMPILE_ONLY")||function(e,t,n,r,a){t.program.enableShapeUniforms||(iV(t.inShapeInfos,n),iV([t.outShapeInfo],[r]));var i=r.texData.texture,o=r.texData.texShape;r.texData.isPacked?e.setOutputPackedMatrixTexture(i.texture,o[0],o[1]):e.setOutputMatrixTexture(i.texture,o[0],o[1]),e.setProgram(t.webGLProgram),1===el().getNumber("WEBGL_VERSION")&&null!==t.infLoc&&e.gl.uniform1f(t.infLoc,1/0),null!==t.nanLoc&&e.gl.uniform1f(t.nanLoc,NaN);for(var s=0;s<n.length;++s){var u=n[s],c=t.variablesLocations[s],l=c.uniform,d=c.offset,f=c.shape,h=c.texShape;if(f){var p=eV(t.program.packedInputs,u.shape,u.texData.texShape).uniformShape;switch(p.length){case 1:e.gl.uniform1iv(f,new Int32Array(p));break;case 2:e.gl.uniform2iv(f,new Int32Array(p));break;case 3:e.gl.uniform3iv(f,new Int32Array(p));break;case 4:e.gl.uniform4iv(f,new Int32Array(p))}}if(h&&e.gl.uniform2i(h,u.texData.texShape[0],u.texData.texShape[1]),null!=l)if(u.isUniform)if(Ic(u.shape)<2)e.gl.uniform1f(l,u.uniformValues[0]);else{var v=u.uniformValues;v instanceof Float32Array||(v=new Float32Array(v)),e.gl.uniform1fv(l,v)}else null!=u.texData.slice&&null!=d&&e.gl.uniform1i(d,u.texData.slice.flatOffset),e.setInputMatrixTexture(u.texData.texture.texture,l,s)}var m=t.outShapeLocation;if(m)switch(r.shape.length){case 1:e.gl.uniform1iv(m,new Int32Array(r.shape));break;case 2:e.gl.uniform2iv(m,new Int32Array(r.shape));break;case 3:e.gl.uniform3iv(m,new Int32Array(r.shape));break;case 4:e.gl.uniform4iv(m,new Int32Array(r.shape))}if(t.outShapeStridesLocation){var g=Vc(r.shape);switch(r.shape.length){case 2:e.gl.uniform1iv(t.outShapeStridesLocation,new Int32Array(g));break;case 3:e.gl.uniform2iv(t.outShapeStridesLocation,new Int32Array(g));break;case 4:e.gl.uniform3iv(t.outShapeStridesLocation,new Int32Array(g))}}if(t.outTexShapeLocation&&e.gl.uniform2i(t.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),t.program.customUniforms&&a)for(var y=0;y<t.program.customUniforms.length;++y){var b=t.program.customUniforms[y],k=t.customUniformLocations[y],w=a[y];if("float"===b.type)e.gl.uniform1fv(k,w);else if("vec2"===b.type)e.gl.uniform2fv(k,w);else if("vec3"===b.type)e.gl.uniform3fv(k,w);else if("vec4"===b.type)e.gl.uniform4fv(k,w);else if("int"===b.type)e.gl.uniform1iv(k,w);else if("ivec2"===b.type)e.gl.uniform2iv(k,w);else if("ivec3"===b.type)e.gl.uniform3iv(k,w);else{if("ivec4"!==b.type)throw Error("uniform type ".concat(b.type," is not supported yet."));e.gl.uniform4iv(k,w)}}e.executeProgram()}(this.gpgpu,v,d,h,r),l.forEach((function(e){return a.disposeIntermediateTensorInfo(e)})),m&&(f=this.endTimer(f),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(f)}));var g=el().get("WEBGL_FLUSH_THRESHOLD");if(g>0){var y=Bh();y-this.lastGlFlushTime>g&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=y)}if(!el().getBool("WEBGL_LAZILY_UNPACK")&&u.isPacked&&!1===i){var b=this.unpackTensor(s);return this.disposeIntermediateTensorInfo(s),b}return s}},{key:"compileAndRun",value:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return n=n||t[0].dtype,this.runWebGLProgram(e,t,n,r,a)}},{key:"getAndSaveBinary",value:function(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]}},{key:"getTextureManager",value:function(){return this.textureManager}},{key:"dispose",value:function(){var e=this;if(!this.disposed){if(!el().getBool("IS_TEST"))Object.keys(this.binaryCache).forEach((function(t){e.gpgpu.deleteProgram(e.binaryCache[t].webGLProgram),delete e.binaryCache[t]}));this.textureManager.dispose(),null!=this.canvas&&"undefined"!==typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0}}},{key:"floatPrecision",value:function(){var e=this;return null==this.floatPrecisionValue&&(this.floatPrecisionValue=rm((function(){if(!el().get("WEBGL_RENDER_FLOAT32_ENABLED")){var t=el().getBool("DEBUG");el().set("DEBUG",!1);var n=e.abs(vm(1e-8)).dataSync()[0];if(el().set("DEBUG",t),n>0)return 32}return 16}))),this.floatPrecisionValue}},{key:"epsilon",value:function(){return 32===this.floatPrecision()?1e-7:1e-4}},{key:"uploadToGPU",value:function(e){var t=this.texData.get(e),n=t.shape,r=t.dtype,a=t.values,i=t.texture,o=t.usage,s=t.isPacked;if(null==i){var u,c=null!=this.activeTimers;c&&(u=Bh());var l=t.texShape;if(null==l&&(l=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=el().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=el().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");if(r===1/0&&el().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=n/2),t&&(n*=2,r*=2,1===(e=e.map((function(t,n){return n>=e.length-2?gc(e[n]):e[n]}))).length&&(e=[2,e[0]])),2!==e.length){var a=Ac(e);e=a.newShape}var i=Ic(e),o=null;e.length<=1&&i<=n?o=[1,i]:2===e.length&&e[0]<=n&&e[1]<=n?o=e:3===e.length&&e[0]*e[1]<=n&&e[2]<=n?o=[e[0]*e[1],e[2]]:3===e.length&&e[0]<=n&&e[1]*e[2]<=n?o=[e[0],e[1]*e[2]]:4===e.length&&e[0]*e[1]*e[2]<=n&&e[3]<=n?o=[e[0]*e[1]*e[2],e[3]]:4===e.length&&e[0]<=n&&e[1]*e[2]*e[3]<=n&&(o=[e[0],e[1]*e[2]*e[3]]);var s=null!=o&&Math.max.apply(Math,(0,me.Z)(o))>r&&Math.min.apply(Math,(0,me.Z)(o))<=(t?2:1)&&Math.min.apply(Math,(0,me.Z)(o))>0;if(null==o||s)if(t){var u=EB(e),c=2,l=2;if(e.length){var d=NB(e),f=(0,ge.Z)(d,2);c=f[0],l=f[1]}o=Ec(i=u*(c/2)*(l/2)).map((function(e){return 2*e}))}else o=Ec(i);return o}(n,s),t.texShape=l),null!=a){var d,f=CB(n),h=l[1],p=l[0],v=a instanceof Uint8Array||a instanceof Uint8ClampedArray;if(s||!v){var m=sB(l[0],l[1]),g=(0,ge.Z)(m,2);h=g[0],p=g[1]}d=s?new hV(f,v):new fV(f,v);var y=v?[p,h]:l,b=this.makeTensorInfo(y,r),k=this.texData.get(b.dataId);k.usage=v?eB.PIXELS:eB.UPLOAD,k.texShape=y,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(b.dataId),h,p,a);var w=[[p,h]],x=this.runWebGLProgram(d,[b],r,w,!0),I=this.texData.get(x.dataId);t.texShape=I.texShape,t.isPacked=I.isPacked,t.usage=I.usage,el().get("ENGINE_COMPILE_ONLY")?this.disposeData(x.dataId):(t.texture=I.texture,t.values=null,this.texData.delete(x.dataId)),this.disposeIntermediateTensorInfo(b),c&&(this.uploadWaitMs+=Bh()-u)}else{var S=this.acquireTexture(l,o,r,s);t.texture=S}}}},{key:"convertAndCacheOnCPU",value:function(e,t){var n=this.texData.get(e),r=n.dtype;return null!=t&&(n.values=function(e,t){if("float32"===t||"complex64"===t)return e;if("int32"===t||"bool"===t){for(var n="int32"===t?new Int32Array(e.length):new Uint8Array(e.length),r=0;r<n.length;++r)n[r]=Math.round(e[r]);return n}throw new Error("Unknown dtype ".concat(t))}(t,r)),n.values}},{key:"acquireTexture",value:function(e,t,n,r){if(this.numBytesInGPU+=this.computeBytes(e,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var a=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: ".concat(a," MB, ")+"most likely due to a memory leak")}return this.textureManager.acquireTexture(e,t,r)}},{key:"computeBytes",value:function(e,t){return e[0]*e[1]*Lc(t)}},{key:"checkCompileCompletion",value:function(){for(var e=0,t=Object.entries(this.binaryCache);e<t.length;e++){var n=(0,ge.Z)(t[e],2)[1];this.checkCompletion_(n)}}},{key:"checkCompileCompletionAsync",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){var t,n,r,a,i,o,s,u,c=this;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],!this.gpgpu.parallelCompilationExtension){e.next=6;break}for(n=0,r=Object.entries(this.binaryCache);n<r.length;n++)a=(0,ge.Z)(r[n],2),i=a[1],t.push(this.checkCompletionAsync_(i));return e.abrupt("return",Promise.all(t));case 6:o=(0,be.Z)().mark((function e(){var n,r,a;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=(0,ge.Z)(u[s],2),r=n[1],a=new Promise((function(e){try{c.checkCompletion_(r),e(!0)}catch(t){throw t}})),t.push(a);case 3:case"end":return e.stop()}}),e)})),s=0,u=Object.entries(this.binaryCache);case 8:if(!(s<u.length)){e.next=13;break}return e.delegateYield(o(),"t0",10);case 10:s++,e.next=8;break;case 13:return e.abrupt("return",Promise.all(t));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"checkCompletionAsync_",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.gpgpu.gl.getProgramParameter(t.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)){e.next=4;break}return e.abrupt("return",this.checkCompletion_(t));case 4:return e.next=6,Wx();case 6:return e.abrupt("return",this.checkCompletionAsync_(t));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"checkCompletion_",value:function(e){if(!1===this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)){if(console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),!1===this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS))throw gB(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.");throw new Error("Failed to link vertex and fragment shaders.")}return!0}},{key:"getUniformLocations",value:function(){for(var e=0,t=Object.values(this.binaryCache);e<t.length;e++){var n=t[e],r=aV(this.gpgpu,n.program,n.webGLProgram),a=r.variablesLocations,i=r.customUniformLocations,o=r.infLoc,s=r.nanLoc,u=r.outShapeLocation,c=r.outShapeStridesLocation,l=r.outTexShapeLocation;n.variablesLocations=a,n.customUniformLocations=i,n.infLoc=o,n.nanLoc=s,n.outShapeLocation=u,n.outShapeStridesLocation=c,n.outTexShapeLocation=l}}},{key:"createTensorFromGPUData",value:function(e,t,n){e.channels=e.channels||"RGBA";var r=e.texture,a=e.height,i=e.width,o=e.channels,s=tm().backend;if(!s.gpgpu.gl.isTexture(r))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");var u=s.writeTexture(r,t,n,a,i,o);return tm().makeTensorFromDataId(u,t,n,s)}}]),n}(hc);qU.nextDataId=0;Zp()&&om("webgl",(function(){return new qU}),2);var $U="\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n",KU=(0,Te.Z)((function e(t,n,r){(0,Se.Z)(this,e),this.variableNames=["A","B"],this.outputShape=Zm(n,r),this.enableShapeUniforms=oV(this.outputShape.length),this.userCode="\n      float binaryOperation(float a, float b) {\n        ".concat(t,"\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    ")})),XU="\n  result.r = isNaN.r ? NAN : result.r;\n  result.g = isNaN.g ? NAN : result.g;\n  result.b = isNaN.b ? NAN : result.b;\n  result.a = isNaN.a ? NAN : result.a;\n",YU=(0,Te.Z)((function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];(0,Se.Z)(this,e),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=Zm(n,r);var i=this.outputShape.length;this.enableShapeUniforms=oV(i);var o="";if(a)if(0===i||1===Ic(this.outputShape))o="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else{var s=JB(i);if(o="\n          ".concat(s," coords = getOutputCoords();\n        "),1===i)this.enableShapeUniforms?o+="\n            result.y = (coords + 1) >= outShape ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ":o+="\n            result.y = (coords + 1) >= ".concat(this.outputShape[0]," ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ");else{var u=kU("coords",i);this.enableShapeUniforms?o+="\n            bool nextRowOutOfBounds =\n              (".concat(u[i-2]," + 1) >= outShape[").concat(i," - 2];\n            bool nextColOutOfBounds =\n              (").concat(u[i-1]," + 1) >= outShape[").concat(i," - 1];\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          "):o+="\n            bool nextRowOutOfBounds =\n              (".concat(u[i-2]," + 1) >= ").concat(this.outputShape[i-2],";\n            bool nextColOutOfBounds =\n              (").concat(u[i-1]," + 1) >= ").concat(this.outputShape[i-1],";\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          ")}}this.userCode="\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        ".concat(t,"\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        ").concat(o,"\n\n        setOutput(result);\n      }\n    ")}));function QU(e){var t=e.inputs,n=e.backend,r=t.x;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}var JU={kernelName:yd,backendName:"webgl",kernelFunc:QU};function eW(e){var t=e.inputs,n=e.backend,r=t.real,a=t.imag,i=n.makeTensorInfo(r.shape,"complex64"),o=n.texData.get(i.dataId),s=QU({inputs:{x:r},backend:n}),u=QU({inputs:{x:a},backend:n});return o.complexTensorInfos={real:s,imag:u},i}var tW={kernelName:_l,backendName:"webgl",kernelFunc:eW},nW="return (a < 0.) ? b * a : a;",rW="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";var aW={kernelName:Sd,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.alpha,o=n.makeTensorInfo([],"float32",Ph(i,"float32")),s=el().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new YU(rW,a.shape,o.shape):new KU(nW,a.shape,o.shape),u=n.runWebGLProgram(s,[a,o],"float32");return n.disposeIntermediateTensorInfo(o),u}},iW="return (a < 0.) ? b * a : a;",oW="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";var sW={kernelName:of,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=t.alpha,i=el().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new YU(oW,r.shape,a.shape):new KU(iW,r.shape,a.shape);return n.runWebGLProgram(i,[r,a],"float32")}},uW="if (isnan(x)) return x;";function cW(e){var t=e.opSnippet,n=e.packedOpSnippet,r=e.cpuKernelImpl,a=e.dtype;return function(e){var i,o=e.inputs,s=e.backend,u=o.x,c=s,l=a||u.dtype;if(c.shouldExecuteOnCPU([u])&&null!=r){var d=c.texData.get(u.dataId),f=r(d.values,l);return c.makeTensorInfo(u.shape,l,f)}return i=el().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&null!=n?new VU(u.shape,n):new NU(u.shape,t),c.runWebGLProgram(i,[u],l)}}function lW(e){var t=e.opSnippet,n=e.packedOpSnippet,r=e.checkOutOfBounds,a=void 0!==r&&r,i=e.supportsComplex,o=void 0!==i&&i,s=e.cpuKernelImpl,u=e.dtype;return function(e){var r=e.inputs,i=e.backend,c=r.a,l=r.b,d=i;if(o&&"complex64"===c.dtype){var f=d.texData.get(c.dataId),h=d.texData.get(l.dataId),p=[[f.complexTensorInfos.real,h.complexTensorInfos.real],[f.complexTensorInfos.imag,h.complexTensorInfos.imag]].map((function(e){var n=(0,ge.Z)(e,2),r=n[0],a=n[1],i={dataId:r.dataId,dtype:r.dtype,shape:c.shape},o={dataId:a.dataId,dtype:a.dtype,shape:l.shape},s=new KU(t,c.shape,l.shape);return d.runWebGLProgram(s,[i,o],hp(r.dtype,a.dtype))})),v=(0,ge.Z)(p,2),m=v[0],g=v[1],y=eW({inputs:{real:m,imag:g},backend:d});return d.disposeIntermediateTensorInfo(m),d.disposeIntermediateTensorInfo(g),y}var b,k=u||hp(c.dtype,l.dtype);if(("string"===c.dtype||"string"===l.dtype||d.shouldExecuteOnCPU([c,l]))&&null!=s){var w=d.texData.get(c.dataId).values,x=d.texData.get(l.dataId).values,I="string"===c.dtype?CI(w):w,S="string"===c.dtype?CI(x):x,T=s(c.shape,l.shape,I,S,k),E=(0,ge.Z)(T,2),N=E[0],C=E[1],Z=d.makeTensorInfo(C,k);return d.texData.get(Z.dataId).values=N,Z}return b=el().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&null!=n?new YU(n,c.shape,l.shape,a):new KU(t,c.shape,l.shape),d.runWebGLProgram(b,[c,l],k)}}function dW(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("linear"===e)return t?FU:ZU;if("relu"===e)return t?PU:RU;if("elu"===e)return t?MU:AU;if("relu6"===e)return t?zU:DU;if("prelu"===e)return t?oW:iW;if("leakyrelu"===e)return t?rW:nW;if("sigmoid"===e)return t?BU:LU;throw new Error("Activation ".concat(e," has not been implemented for the WebGL backend."))}var fW=(0,Te.Z)((function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]&&arguments[7],c=arguments.length>8&&void 0!==arguments[8]&&arguments[8];(0,Se.Z)(this,e),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=oV(this.outputShape.length);var l=a?t[1]:t[2],d=Math.ceil(l/2),f=a?"i * 2, rc.y":"rc.y, i * 2",h=i?"rc.z, i * 2":"i * 2, rc.z",p=a?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],v=i?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],m="",g="";s&&(m=u?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(s,"\n        }"):c?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(s,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(s,"\n        }"),g="result = activation(result);");var y=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),u&&this.variableNames.push("preluActivationWeights"),c&&this.variableNames.push("leakyreluAlpha");var b="rc.x",k="rc.x";t[0]<n[0]?b="imod(rc.x, ".concat(t[0],")"):n[0]<t[0]&&(k="imod(rc.x, ".concat(n[0],")")),this.userCode="\n      ".concat(m,"\n      // Don't use uniform for sharedDimensionPacked for performance.\n      const float sharedDimension = ").concat(d,".0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        int batchA = ").concat(b,";\n        int batchB = ").concat(k,";\n        for (int i = 0; i < ").concat(d,"; i++) {\n          vec4 a = getMatrixA(batchA, ").concat(f,");\n          vec4 b = getMatrixB(batchB, ").concat(h,");\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += (").concat(p[0]," * ").concat(v[0],");\n          result += (").concat(p[1]," * ").concat(v[1],");\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        ").concat(y,"\n\n        ").concat(g,"\n\n        setOutput(result);\n      }\n    ")})),hW={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"},pW=(0,Te.Z)((function e(t,n,r){(0,Se.Z)(this,e),this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=Zm(n,r),this.userCode="\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        ".concat(t,"\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    ")})),vW="return a * b;";function mW(e){var t,n=e.inputs,r=e.backend,a=n.a,i=n.b,o=hp(a.dtype,i.dtype);if("complex64"===a.dtype){var s=r.texData.get(a.dataId),u=r.texData.get(i.dataId),c=new pW(hW.REAL,a.shape,i.shape),l=new pW(hW.IMAG,a.shape,i.shape),d=[{dataId:s.complexTensorInfos.real.dataId,dtype:s.complexTensorInfos.real.dtype,shape:a.shape},{dataId:s.complexTensorInfos.imag.dataId,dtype:s.complexTensorInfos.imag.dtype,shape:a.shape},{dataId:u.complexTensorInfos.real.dataId,dtype:u.complexTensorInfos.real.dtype,shape:i.shape},{dataId:u.complexTensorInfos.imag.dataId,dtype:u.complexTensorInfos.imag.dtype,shape:i.shape}],f=r.runWebGLProgram(c,d,"float32"),h=r.runWebGLProgram(l,d,"float32"),p=eW({inputs:{real:f,imag:h},backend:r});return r.disposeIntermediateTensorInfo(f),r.disposeIntermediateTensorInfo(h),p}if(r.shouldExecuteOnCPU([a,i])){var v=r.texData.get(a.dataId),m=r.texData.get(i.dataId),g=HV(a.shape,i.shape,v.values,m.values,o),y=(0,ge.Z)(g,2),b=y[0],k=y[1],w=r.makeTensorInfo(k,o);return r.texData.get(w.dataId).values=b,w}return t=el().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new YU(vW,a.shape,i.shape):new KU(vW,a.shape,i.shape),r.runWebGLProgram(t,[a,i],o)}var gW={kernelName:$d,backendName:"webgl",kernelFunc:mW};function yW(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.shape,o=n,s=Ic(a.shape),u=Zc(i,s),c=Ic(u);kc(s===c,(function(){return"The new shape (".concat(u,") has ").concat(c," elements and the old ")+"shape (".concat(a.shape,") has ").concat(s," elements. The new shape and old ")+"shape must have the same number of elements."}));var l=o.texData.get(a.dataId);return!l.isPacked||_B(a.shape,u)||null!==l.texture&&_B(l.shape,u)?(o.incRef(a.dataId),{dataId:a.dataId,shape:u,dtype:a.dtype}):function(e,t,n){var r=[EB(e.shape)].concat((0,me.Z)(NB(e.shape))),a={dtype:e.dtype,shape:r,dataId:e.dataId},i=[EB(t)].concat((0,me.Z)(NB(t))),o=new xU(i,r),s=[r],u=n.runWebGLProgram(o,[a],e.dtype,s,!0);return{dataId:u.dataId,shape:t,dtype:u.dtype}}(a,u,o)}var bW={kernelName:vf,backendName:"webgl",kernelFunc:yW},kW=(0,Te.Z)((function e(t,n){(0,Se.Z)(this,e),this.variableNames=["x"];var r=t.windowSize,a=t.batchSize,i=t.inSize,o=t.outSize;this.outputShape=[a,o];var s=4*Math.floor(r/4),u=r%4,c="sumValue += dot(values, ones);";if(null!=n){var l=1/n;c="sumValue += dot(values * ".concat(Tc(l)?l.toPrecision(2):l,", ones);")}var d="";i%r>0&&(d="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return 0.0;\n        }\n      ")),this.userCode="\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ".concat(d,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(r,";\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(s,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(c,"\n        }\n\n        int inIdx = inOffset + ").concat(s,";\n        if (").concat(1===u,") {\n          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);\n\n          ").concat(c,"\n        } else if (").concat(2===u,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1), 0.0, 0.0);\n\n          ").concat(c,"\n        } else if (").concat(3===u,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2), 0.0);\n\n          ").concat(c,"\n        }\n        setOutput(sumValue);\n      }\n    ")})),wW=(0,Te.Z)((function e(t,n){(0,Se.Z)(this,e),this.variableNames=["x"];var r=t.windowSize,a=t.batchSize,i=t.inSize,o=t.outSize;this.outputShape=[a,o];var s="0.0",u="";"prod"===n?s="1.0":"min"===n?(s="1.0 / 1e-20",u="min"):"max"===n&&(s="-1.0 / 1e-20",u="max");var c="".concat(n,"(").concat(n,"(").concat(n,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"sum"===n?c="sumValue":"prod"===n?c="prodValue":"all"===n?c="allValue":"any"===n&&(c="anyValue");var l=4*Math.floor(r/4),d=r%4,f="\n      if (".concat("sum"===n,") {\n        sumValue += dot(values, ones);\n      } else if (").concat("prod"===n,") {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = ").concat(u,"(values, minMaxValue);\n        if (").concat("min"===n," || ").concat("max"===n,") {\n          minMaxValue = ").concat(u,"(values, minMaxValue);\n          bvec4 isNaN = isnan(values);\n          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {\n            minMaxValue = vec4(NAN);\n          }\n        }\n      }\n    "),h="vec4";"all"===n?(s="1.0",f="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",h="bvec4"):"any"===n&&(s="0.0",f="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",h="bvec4");var p="";i%r>0&&(p="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return initializationValue;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat(s,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ").concat(p,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(r,";\n\n        vec4 minMaxValue = vec4(").concat(s,");\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < ").concat(l,"; i += 4) {\n          int inIdx = inOffset + i;\n          ").concat(h," values = ").concat(h,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(f,"\n        }\n\n        int inIdx = inOffset + ").concat(l,";\n        if (").concat(1===d,") {\n          ").concat(h," values = ").concat(h,"(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(f,"\n        } else if (").concat(2===d,") {\n          ").concat(h," values = ").concat(h,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(f,"\n        } else if (").concat(3===d,") {\n          ").concat(h," values = ").concat(h,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          ").concat(f,"\n        }\n        setOutput(").concat(c,");\n      }\n    ")}));function xW(e,t,n,r){for(var a=function(e){for(var t=[];0===t.length||1!==t[t.length-1].outSize;){var n=t.length?t[t.length-1].outSize:e[1],r=qx(n);t.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return t}(e.shape),i=e,o=0;o<a.length;o++){var s,u=a[o],c=u.inSize,l=u.windowSize,d=u.outSize,f=void 0;f="mean"===n?0===o?new kW({windowSize:l,inSize:c,batchSize:e.shape[0],outSize:d},c):new kW({windowSize:l,inSize:c,batchSize:e.shape[0],outSize:d}):new wW({windowSize:l,inSize:c,batchSize:e.shape[0],outSize:d},n),s=i,i=r.runWebGLProgram(f,[i],t),s.dataId!==e.dataId&&r.disposeIntermediateTensorInfo(s)}return i}var IW=(0,Te.Z)((function e(t,n){(0,Se.Z)(this,e),this.variableNames=["A"];for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[n[a]];this.outputShape=r,this.rank=r.length;var i=JB(this.rank),o=function(e){var t=e.length;if(t>6)throw Error("Transpose for rank ".concat(t," is not yet supported"));for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(t),a=0;a<e.length;a++)r[e[a]]=n[a];return r.join()}(n);this.userCode="\n    void main() {\n      ".concat(i," resRC = getOutputCoords();\n      setOutput(getA(").concat(o,"));\n    }\n    ")}));var SW=(0,Te.Z)((function e(t,n){(0,Se.Z)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[n[a]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error("Packed transpose for rank ".concat(this.rank," is not yet supported."));for(var i=JB(this.rank),o=bU("rc",this.rank),s=new Array(this.rank),u=0;u<n.length;u++)s[n[u]]=o[u];var c="vec2(".concat(s.slice(-2).join(),")"),l="++".concat(o[this.rank-1]," < ").concat(r[this.rank-1]),d="getChannel(getA(".concat(s.join(),"), ").concat(c,")");this.userCode="\n    void main() {\n      ".concat(i," rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = ").concat(d,";\n      if(").concat(l,") {\n        result[1] = ").concat(d,";\n      }\n      --").concat(o[this.rank-1],";\n      if(++").concat(o[this.rank-2]," < ").concat(r[this.rank-2],") {\n        result[2] = ").concat(d,";\n        if(").concat(l,") {\n          result[3] = ").concat(d,";\n        }\n      }\n      setOutput(result);\n    }\n    ")}));function TW(e,t,n){var r=el().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new SW(e.shape,t):new IW(e.shape,t);return n.runWebGLProgram(r,[e],e.dtype)}function EW(e){var t=e.inputs,n=e.backend,r=e.attrs;return function(e,t,n,r){var a=t,i=e.shape.length,o=_c(a,e.shape),s=o,u=Vy(s,i),c=null!=u,l=e;c&&(l=TW(e,u,r),s=Wy(s.length,i)),By("sum",s,i);var d=Py(l.shape,s),f=(0,ge.Z)(d,2),h=f[0],p=f[1],v=h;n&&(v=zy(h,o));var m=Ic(p),g=yW({inputs:{x:l},attrs:{shape:[Ic(e.shape)/m,m]},backend:r}),y=xW(g,pp(e.dtype),"sum",r),b=yW({inputs:{x:y},attrs:{shape:v},backend:r});return r.disposeIntermediateTensorInfo(g),r.disposeIntermediateTensorInfo(y),c&&r.disposeIntermediateTensorInfo(l),b}(t.x,r.axis,r.keepDims,n)}var NW={kernelName:Ff,backendName:"webgl",kernelFunc:EW};function CW(e){for(var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.perm,s=r,u=i.shape.length,c=new Array(u),l=0;l<c.length;l++)c[l]=i.shape[o[l]];if(s.shouldExecuteOnCPU([i])){var d=s.texData.get(i.dataId).values,f=gU(d,i.shape,i.dtype,o,c);t=s.makeTensorInfo(c,i.dtype),s.texData.get(t.dataId).values=f}else t=TW(i,o,s);return t}var ZW={kernelName:ah,backendName:"webgl",kernelFunc:CW},_W=1e3;function AW(e){var t=e.a,n=e.b,r=e.transposeA,a=e.transposeB,i=e.backend,o=e.bias,s=void 0===o?null:o,u=e.preluActivationWeights,c=void 0===u?null:u,l=e.leakyreluAlpha,d=void 0===l?0:l,f=e.activation,h=void 0===f?null:f,p=t.shape.length,v=n.shape.length,m=r?t.shape[p-2]:t.shape[p-1],g=a?n.shape[v-1]:n.shape[v-2],y=r?t.shape[p-1]:t.shape[p-2],b=a?n.shape[v-2]:n.shape[v-1],k=t.shape.slice(0,-2),w=n.shape.slice(0,-2),x=Ic(k),I=Ic(w),S=Zm(t.shape.slice(0,-2),n.shape.slice(0,-2)).concat([y,b]);kc(m===g,(function(){return"Error in matMul: inner shapes (".concat(m,") and (")+"".concat(g,") of Tensors with shapes ").concat(t.shape," and ")+"".concat(n.shape," and transposeA=").concat(r)+" and transposeB=".concat(a," must match.")}));var T,E=r?[x,m,y]:[x,y,m],N=a?[I,b,g]:[I,g,b],C=yW({inputs:{x:t},backend:i,attrs:{shape:E}}),Z=yW({inputs:{x:n},backend:i,attrs:{shape:N}}),_=[C,Z],A=Math.max(x,I),R=r?C.shape[1]:C.shape[2],D=null!=s,O=null!=c,L="leakyrelu"===h,F=null!=h?dW(h,!0):null;if((1===y||1===b)&&R>_W&&!1===(D||O||L||null!=F)){var M=C,P=Z;r&&(M=CW({inputs:{x:C},backend:i,attrs:{perm:[0,2,1]}}),_.push(M)),a&&(P=CW({inputs:{x:Z},backend:i,attrs:{perm:[0,2,1]}}),_.push(P));var z=1===b,B=M;1!==b&&(B=yW({inputs:{x:M},backend:i,attrs:{shape:[A,R,1]}}),_.push(B));var V=1===b?2:1,U=P;z&&(U=yW({inputs:{x:P},backend:i,attrs:{shape:[A,1,R]}}),_.push(U));var W=mW({inputs:{a:B,b:U},backend:i});T=EW({inputs:{x:W},backend:i,attrs:{axis:V,keepDims:!0}}),_.push(W)}else{var j=hp(t.dtype,n.dtype),G=new fW(E,N,[A,y,b],r,a,D,F,O,L),H=[C,Z];if(null!=s&&H.push(s),O&&H.push(c),L){var q=i.makeTensorInfo([],"float32",Ph(d,"float32"));H.push(q),_.push(q)}T=i.runWebGLProgram(G,H,j)}var $=yW({inputs:{x:T},backend:i,attrs:{shape:S}});_.push(T);for(var K=0,X=_;K<X.length;K++){var Y=X[K];i.disposeIntermediateTensorInfo(Y)}return $}var RW={kernelName:fh,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.a,i=t.b,o=t.bias,s=t.preluActivationWeights,u=r.transposeA,c=r.transposeB,l=r.activation;return AW({a:a,b:i,transposeA:u,transposeB:c,backend:n,bias:o,preluActivationWeights:s,leakyreluAlpha:r.leakyreluAlpha,activation:l})}},DW="return abs(x);";var OW={kernelName:il,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=n.x;if(r.shouldExecuteOnCPU([a])&&"complex64"!==a.dtype){var i=r.texData.get(a.dataId),o=rU(i.values);return r.makeTensorInfo(a.shape,a.dtype,o)}return t=el().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new VU(a.shape,DW):new NU(a.shape,DW),r.runWebGLProgram(t,[a],a.dtype)}},LW=cW({opSnippet:CU+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n"}),FW={kernelName:ol,backendName:"webgl",kernelFunc:LW},MW=cW({opSnippet:CU+"\n  if (x < 1.0) return NAN;\nreturn log(x + sqrt(x * x - 1.0));"}),PW={kernelName:sl,backendName:"webgl",kernelFunc:MW},zW="return a + b;",BW=lW({opSnippet:zW,packedOpSnippet:zW,supportsComplex:!0,cpuKernelImpl:TV}),VW={kernelName:ul,backendName:"webgl",kernelFunc:BW},UW=(0,Te.Z)((function e(t,n){(0,Se.Z)(this,e),this.outputShape=[],this.outputShape=t,this.variableNames=n.map((function(e,t){return"T".concat(t)}));var r=[];this.variableNames.forEach((function(e){r.push("float v".concat(e," = get").concat(e,"AtOutCoords();"))}));var a=this.variableNames.map((function(e){return"v".concat(e)})).join(" + ");this.userCode="\n      void main() {\n        ".concat(r.join("\n        "),"\n\n        float result = ").concat(a,";\n        setOutput(result);\n      }\n    ")})),WW=(0,Te.Z)((function e(t,n){(0,Se.Z)(this,e),this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.variableNames=n.map((function(e,t){return"T".concat(t)}));var r=[];this.variableNames.forEach((function(e){r.push("vec4 v".concat(e," = get").concat(e,"AtOutCoords();"))}));var a=this.variableNames.map((function(e){return"v".concat(e)})).join(" + ");this.userCode="\n      void main() {\n        ".concat(r.join("\n        "),"\n\n        vec4 result = ").concat(a,";\n        setOutput(result);\n      }\n    ")}));var jW={kernelName:cl,backendName:"webgl",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=n;if(1===a.length)return QU({inputs:{x:a[0]},backend:r});if(a.length>el().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var i=Math.floor(a.length/2),o=e({inputs:a.slice(0,i),backend:r}),s=e({inputs:a.slice(i),backend:r});return e({inputs:[o,s],backend:r})}var u=a.map((function(e){return e.dtype})).reduce((function(e,t){return hp(e,t)})),c=a.map((function(e){return e.shape})),l=el().getBool("WEBGL_PACK")?new WW(a[0].shape,c):new UW(a[0].shape,c);return r.runWebGLProgram(l,a,u)}};var GW={kernelName:ll,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims,s=a.shape.length,u=_c(i,a.shape),c=u,l=Vy(c,s),d=a;null!=l&&(d=CW({inputs:{x:a},backend:n,attrs:{perm:l}}),c=Wy(c.length,s)),By("all",c,s);var f,h=Py(d.shape,c),p=(0,ge.Z)(h,2),v=p[0],m=yW({inputs:{x:d},backend:n,attrs:{shape:[-1,Ic(p[1])]}}),g=xW(m,m.dtype,"all",n);return f=yW(o?{inputs:{x:g},backend:n,attrs:{shape:zy(v,u)}}:{inputs:{x:g},backend:n,attrs:{shape:v}}),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),null!=l&&n.disposeIntermediateTensorInfo(d),f}};var HW={kernelName:dl,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims,s=a.shape.length,u=_c(i,a.shape),c=u,l=Vy(c,s),d=a;null!=l&&(d=CW({inputs:{x:a},backend:n,attrs:{perm:l}}),c=Wy(c.length,s)),By("any",c,s);var f,h=Py(d.shape,c),p=(0,ge.Z)(h,2),v=p[0],m=yW({inputs:{x:d},backend:n,attrs:{shape:[-1,Ic(p[1])]}}),g=xW(m,m.dtype,"any",n);return f=yW(o?{inputs:{x:g},backend:n,attrs:{shape:zy(v,u)}}:{inputs:{x:g},backend:n,attrs:{shape:v}}),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),null!=l&&n.disposeIntermediateTensorInfo(d),f}},qW=(0,Te.Z)((function e(t,n,r){(0,Se.Z)(this,e),this.variableNames=["A"];var a=t.windowSize,i=t.batchSize,o=t.outSize;r||this.variableNames.push("bestIndicesA"),this.outputShape=[i,o];var s="max"===n?">":"<",u=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ".concat(a,";\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < ").concat(a,"; i++) {\n          int inIdx = ").concat(u,";\n          float candidate = getA(batch, inIdx);\n          if (candidate ").concat(s," bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    ")})),$W=(0,Te.Z)((function e(t,n,r,a){(0,Se.Z)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,kc(t.length>2,(function(){return"Packed arg".concat(r.charAt(0).toUpperCase()+r.slice(1)," supports only inputs with rank above 2.")}));var i=t[t.length-1],o=Math.ceil(i/n);this.outputShape=t.slice(0,-1),o>1&&this.outputShape.push(o),a||this.variableNames.push("bestIndicesA");var s,u,c=this.outputShape,l=c.length,d=JB(l),f=kU("coords",l);if(1===o){var h=JB(u=l+1);s="\n        ".concat(h," sourceLocR = ").concat(h,"(").concat(f.join(),", 0);\n        ++").concat(f[l-1],";\n        ").concat(h," sourceLocG = ").concat(h,"(").concat(f.join(),", 0);\n        ++").concat(f[l-2],";\n        ").concat(h," sourceLocA = ").concat(h,"(").concat(f.join(),", 0);\n        --").concat(f[l-1],";\n        ").concat(h," sourceLocB = ").concat(h,"(").concat(f.join(),", 0);\n        --").concat(f[l-2],";")}else u=l,s="\n        ".concat(d," sourceLocR = coords;\n        ++").concat(f[l-1],";\n        ").concat(d," sourceLocG = coords;\n        ++").concat(f[l-2],";\n        ").concat(d," sourceLocA = coords;\n        --").concat(f[l-1],";\n        ").concat(d," sourceLocB = coords;\n        --").concat(f[l-2],";");var p=["x","y","z","w","u","v"].slice(0,u),v="."+p[u-1],m=p.map((function(e){return"int "+e})),g=kU("sourceLocR",u-1).concat("inIdx.r"),y=kU("sourceLocG",u-1).concat("inIdx.g"),b=kU("sourceLocB",u-1).concat("inIdx.b"),k=kU("sourceLocA",u-1).concat("inIdx.a"),w="max"===r?"greaterThan":"lessThan",x=a?"":"\n          inIdx = round(vec4(getBestIndicesAChannel(".concat(g.join(),"),\n                             getBestIndicesAChannel(").concat(y.join(),"),\n                             getBestIndicesAChannel(").concat(b.join(),"),\n                             getBestIndicesAChannel(").concat(k.join(),")));"),I="vec4(\n            getAChannel(".concat(g.join(),"),\n            hasNextCol ? getAChannel(").concat(y.join(),") : 0.,\n            hasNextRow ? getAChannel(").concat(b.join(),") : 0.,\n            hasNextRow && hasNextCol ? getAChannel(").concat(k.join(),") : 0.)"),S=a?"":"\n      float getBestIndicesAChannel(".concat(m.join(),") {\n        return getChannel(getBestIndicesA(").concat(p.join(),"),\n                                          vec2(").concat(p.slice(-2).join(),"));\n      }");this.userCode="\n      float getAChannel(".concat(m.join(),") {\n        return getChannel(getA(").concat(p.join(),"),\n                               vec2(").concat(p.slice(-2).join(),"));\n      }\n      ").concat(S,"\n      void main() {\n        ").concat(d," coords = getOutputCoords();\n        bool hasNextCol = ").concat(f[l-1]," < ").concat(c[l-1]-1,";\n        bool hasNextRow = ").concat(f[l-2]," < ").concat(c[l-2]-1,";\n        ").concat(s,"\n        ivec4 srcIdx = ivec4(sourceLocR").concat(v,", sourceLocG").concat(v,",\n          sourceLocB").concat(v,", sourceLocA").concat(v,") * ").concat(n,";\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = ").concat(I,";\n\n        for (int i = 0; i < ").concat(n,"; i++) {\n          inIdx = srcIdx;\n          ").concat(x,"\n          vec4 candidate = ").concat(I,";\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4(").concat(w,"(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    ")}));function KW(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=t.shape[0],i=t.shape[1];null!=r&&(a=r.shape[0],i=r.shape[1]);var o=qx(i),s={windowSize:o,inSize:i,batchSize:a,outSize:Math.ceil(i/o)},u=new qW(s,n,null==r),c=[t];null!=r&&c.push(r);var l=e.runWebGLProgram(u,c,"int32");if(1===l.shape[1])return l;var d=KW(e,t,n,l);return e.disposeIntermediateTensorInfo(l),d}function XW(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=null!=r?r.shape:t.shape,i=qx(a[a.length-1]),o=new $W(a,i,n,null==r),s=null==r?[t]:[t,r],u=e.runWebGLProgram(o,s,"int32");if(u.shape.length===t.shape.length){var c=XW(e,t,n,u);return e.disposeIntermediateTensorInfo(u),c}return u}function YW(e,t,n,r){var a=[n];if(By("arg"+r.charAt(0).toUpperCase()+r.slice(1),a,t.shape.length),!el().getBool("WEBGL_PACK_REDUCE")||t.shape.length<=2){var i=[],o=e.texData.get(t.dataId),s=t;null!==o&&o.isPacked&&(s=e.unpackTensor(t),i.push(s));var u=Py(s.shape,a),c=(0,ge.Z)(u,2),l=c[0],d=Ic(c[1]),f=yW({inputs:{x:s},backend:e,attrs:{shape:[-1,d]}});i.push(f);var h=KW(e,f,r);i.push(h);var p=yW({inputs:{x:h},backend:e,attrs:{shape:l}});return i.forEach((function(t){return e.disposeIntermediateTensorInfo(t)})),p}return XW(e,t,r)}var QW={kernelName:fl,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=_c(r.axis,a.shape),o=Vy(i,a.shape.length),s=a,u=[];null!=o&&(s=CW({inputs:{x:a},backend:n,attrs:{perm:o}}),u.push(s),i=Wy(i.length,s.shape.length)),By("argMax",[i[0]],s.shape.length);var c=YW(n,s,i[0],"max");return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),c}};var JW={kernelName:hl,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=_c(r.axis,a.shape),o=Vy(i,a.shape.length),s=a,u=[];null!=o&&(s=CW({inputs:{x:a},backend:n,attrs:{perm:o}}),u.push(s),i=Wy(i.length,s.shape.length)),By("argMin",[i[0]],s.shape.length);var c=YW(n,s,i[0],"min");return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),c}},ej=cW({opSnippet:CU+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n"}),tj={kernelName:pl,backendName:"webgl",kernelFunc:ej},nj=cW({opSnippet:CU+"return log(x + sqrt(x * x + 1.0));"}),rj={kernelName:vl,backendName:"webgl",kernelFunc:nj},aj=cW({opSnippet:CU+"\n  return atan(x);\n"}),ij={kernelName:ml,backendName:"webgl",kernelFunc:aj},oj=lW({opSnippet:$U+"\n  return atan(a, b);\n",packedOpSnippet:"\n  vec4 result = atan(a, b);\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  "+XU+"\n  return result;\n"}),sj={kernelName:yl,backendName:"webgl",kernelFunc:oj},uj=cW({opSnippet:CU+"\n  if ((x < -1.0) || (x > 1.0)) return NAN;\nreturn (log(1.0 + x) - log(1.0 - x)) / 2.0;"}),cj={kernelName:gl,backendName:"webgl",kernelFunc:uj},lj=(0,Te.Z)((function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if((0,Se.Z)(this,e),this.variableNames=["x"],"avg"===n&&r)throw new Error("Cannot compute positions for average pool.");var o=t.filterWidth,s=t.strideHeight,u=t.strideWidth,c=t.dilationHeight,l=t.dilationWidth,d=t.effectiveFilterHeight,f=t.effectiveFilterWidth,h=t.padInfo.top,p=t.padInfo.left;this.outputShape=t.outShape;var v="avg"===n,m="((batch  * ".concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + d"),g="(xR * ".concat(t.inWidth," + xC) * ").concat(t.inChannels," + d"),y="0.0";if(v||(y="-1.0 / 1e-20"),r){this.userCode="\n        const ivec2 strides = ivec2(".concat(s,", ").concat(u,");\n        const ivec2 pads = ivec2(").concat(h,", ").concat(p,");\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < ").concat(d,";\n              wR += ").concat(c,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(f,";\n                wC += ").concat(l,") {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value ").concat(">="," currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = ").concat(a?i?m:g:"wR * ".concat(f," + wC"),";\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ")}else{var b="".concat(n,"(").concat(n,"(").concat(n,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===n&&(b="avgValue / max(count, 1.0)");var k=4*Math.floor(o/4),w=o%4,x="\n      if (".concat(v,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ").concat("max","(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec2 strides = ivec2(".concat(s,", ").concat(u,");\n      const ivec2 pads = ivec2(").concat(h,", ").concat(p,");\n      const float initializationValue = ").concat(y,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= ").concat(t.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(y,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < ").concat(d,";\n            wR += ").concat(c,") {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= ").concat(t.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(k,"; wC += 4) {\n            int xC = xCCorner + wC * ").concat(l,";\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(l,", d),\n              getValue(batch, xR, xC + 2 * ").concat(l,", d),\n              getValue(batch, xR, xC + 3 * ").concat(l,", d)\n            );\n\n            ").concat(x,"\n          }\n\n          int xC = xCCorner + ").concat(k,";\n          if (").concat(1===w,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(x,"\n          } else if (").concat(2===w,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(l,", d),\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(x,"\n          } else if (").concat(3===w,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(l,", d),\n              getValue(batch, xR, xC + 2 * ").concat(l,", d),\n              initializationValue\n            );\n\n            ").concat(x,"\n          }\n        }\n        setOutput(").concat(b,");\n      }\n    ")}})),dj=(0,Te.Z)((function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if((0,Se.Z)(this,e),this.variableNames=["x"],"avg"===n&&r)throw new Error("Cannot compute positions for average pool.");var o=t.filterWidth,s=t.strideDepth,u=t.strideHeight,c=t.strideWidth,l=t.dilationDepth,d=t.dilationHeight,f=t.dilationWidth,h=t.effectiveFilterDepth,p=t.effectiveFilterHeight,v=t.effectiveFilterWidth,m=t.padInfo.front,g=t.padInfo.top,y=t.padInfo.left;this.outputShape=t.outShape;var b="avg"===n,k="0.0";if(b||(k="-1.0 / 1e-20"),r){this.userCode="\n        const ivec3 strides =\n            ivec3(".concat(s,", ").concat(u,", ").concat(c,");\n        const ivec3 pads = ivec3(").concat(m,", ").concat(g,", ").concat(y,");\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < ").concat(h,";\n              wD += ").concat(l,") {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= ").concat(t.inDepth,") {\n              continue;\n            }\n\n            for (int wR = 0; wR < ").concat(p,";\n                wR += ").concat(d,") {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= ").concat(t.inHeight,") {\n                continue;\n              }\n\n              for (int wC = 0; wC < ").concat(v,";\n                  wC += ").concat(f,") {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value ").concat(">="," currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition = ").concat(a?i?"(((batch * ".concat(t.inDepth," + xD) * ").concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + ch"):"((xD * ".concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + ch"):"wD * ".concat(p," * ").concat(v," +\n                      wR * ").concat(v," + wC"),";\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ")}else{var w="".concat(n,"(").concat(n,"(").concat(n,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===n&&(w="avgValue / max(count, 1.0)");var x=4*Math.floor(o/4),I=o%4,S="\n      if (".concat(b,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ").concat("max","(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec3 strides =\n        ivec3(".concat(s,", ").concat(u,", ").concat(c,");\n      const ivec3 pads = ivec3(").concat(m,", ").concat(g,", ").concat(y,");\n      const float initializationValue = ").concat(k,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= ").concat(t.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(k,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < ").concat(h,";\n            wD += ").concat(l,") {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= ").concat(t.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(p,";\n            wR += ").concat(d,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(x,"; wC += 4) {\n              int xC = xCCorner + wC * ").concat(f,";\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(f,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(f,", ch),\n                getValue(batch, xD, xR, xC + 3 * ").concat(f,", ch)\n              );\n\n              ").concat(S,"\n            }\n\n            int xC = xCCorner + ").concat(x,";\n            if (").concat(1===I,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(S,"\n            } else if (").concat(2===I,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(f,", ch),\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(S,"\n            } else if (").concat(3===I,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(f,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(f,", ch),\n                initializationValue\n              );\n\n              ").concat(S,"\n            }\n          }\n        }\n        setOutput(").concat(w,");\n      }\n    ")}}));var fj={kernelName:bl,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;LB(a,"avgPool");var i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode;kc(Vg(o,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(o," and dilations '").concat(1,"'")}));var c=Ag(a.shape,i,o,1,s,u);if(1===c.filterWidth&&1===c.filterHeight&&Sc(c.inShape,c.outShape))return QU({inputs:{x:a},backend:n});var l=new lj(c,"avg",!1);return n.runWebGLProgram(l,[a],"float32")}};var hj={kernelName:wl,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode,c=r.dataFormat,l=Rg(a.shape,i,o,[1,1,1],s,u,c),d=new dj(l,"avg",!1);return n.runWebGLProgram(d,[a],"float32")}},pj=(0,Te.Z)((function e(t){(0,Se.Z)(this,e),this.variableNames=["dy"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a=t.strideHeight,i=t.strideWidth,o=t.dilationHeight,s=t.dilationWidth,u=t.effectiveFilterHeight,c=t.effectiveFilterWidth,l=u-1-t.padInfo.top,d=c-1-t.padInfo.left,f=1/(n*r);this.userCode="\n      const ivec2 pads = ivec2(".concat(l,", ").concat(d,");\n      const float avgMultiplier = float(").concat(f,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(u,";\n            wR += ").concat(o,") {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(c,";\n            wC+= ").concat(s,") {\n            float dyC = float(dyCCorner + wC) / ").concat(i,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),vj=(0,Te.Z)((function e(t){(0,Se.Z)(this,e),this.variableNames=["dy"],this.outputShape=t.inShape;var n=t.filterDepth,r=t.filterHeight,a=t.filterWidth,i=t.strideDepth,o=t.strideHeight,s=t.strideWidth,u=t.dilationDepth,c=t.dilationHeight,l=t.dilationWidth,d=t.effectiveFilterDepth,f=t.effectiveFilterHeight,h=t.effectiveFilterWidth,p=d-1-t.padInfo.front,v=f-1-t.padInfo.top,m=h-1-t.padInfo.left,g=1/(n*r*a);this.userCode="\n      const ivec3 pads = ivec3(".concat(p,", ").concat(v,", ").concat(m,");\n      const float avgMultiplier = float(").concat(g,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(d,";\n            wD += ").concat(u,") {\n          float dyD = float(dyDCorner + wD) / ").concat(i,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(t.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(f,";\n              wR += ").concat(c,") {\n            float dyR = float(dyRCorner + wR) / ").concat(o,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(h,";\n                wC += ").concat(l,") {\n              float dyC = float(dyCCorner + wC) / ").concat(s,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}));var mj={kernelName:xl,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=r.filterSize,s=r.strides,u=r.pad,c=r.dimRoundingMode,l=Rg(i.shape,o,s,[1,1,1],u,c),d=new vj(l);return n.runWebGLProgram(d,[a],i.dtype)}};var gj={kernelName:kl,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=i;LB([a,i],"avgPoolGrad");var s=r.filterSize,u=r.strides,c=r.pad,l=Ag(o.shape,s,u,1,c),d=new pj(l);return n.runWebGLProgram(d,[a],o.dtype)}};var yj={kernelName:Il,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs;return AW({a:t.a,b:t.b,transposeA:r.transposeA,transposeB:r.transposeB,backend:n})}},bj=(0,Te.Z)((function e(t,n,r,a,i,o){(0,Se.Z)(this,e),this.outputShape=[],this.variableNames=["x","mean","variance"],Zm(t,n),Zm(t,r);var s="0.0";null!=a&&(Zm(t,a),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");var u="1.0";null!=i&&(Zm(t,i),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=t,this.userCode="\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = ".concat(s,";\n        float scale = ").concat(u,";\n        float inv = scale * inversesqrt(variance + float(").concat(o,"));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    ")})),kj=(0,Te.Z)((function e(t,n,r,a,i,o){(0,Se.Z)(this,e),this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],Zm(t,n),Zm(t,r);var s="vec4(0.0)";null!=a&&(Zm(t,a),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");var u="vec4(1.0)";null!=i&&(Zm(t,i),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=t,this.userCode="\n      void main() {\n        vec4 offset = ".concat(s,";\n        vec4 scale = ").concat(u,";\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4(").concat(o,"));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    ")})),wj={kernelName:hd,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.mean,o=t.variance,s=t.offset,u=t.scale;kc(i.shape.length===o.shape.length,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),kc(null==s||i.shape.length===s.shape.length,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),kc(null==u||i.shape.length===u.shape.length,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}));var c=r.varianceEpsilon;null==c&&(c=.001);var l=[a,i,o],d=null;null!=s&&(d=s.shape,l.push(s));var f=null;null!=u&&(f=u.shape,l.push(u));var h=el().getBool("WEBGL_PACK_NORMALIZATION")?new kj(a.shape,i.shape,o.shape,d,f,c):new bj(a.shape,i.shape,o.shape,d,f,c);return n.runWebGLProgram(h,l,l[0].dtype)}},xj=(0,Te.Z)((function e(t){(0,Se.Z)(this,e),this.variableNames=["source"],this.outputShape=t,this.rank=t.length;var n=JB(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];var r,a=function(e){if(1===e)return"sourceLoc";if(e<=6)return Ij.slice(0,e).map((function(e){return"sourceLoc."+e})).join(",");throw Error("Slicing for rank ".concat(e," is not yet supported"))}(this.rank),i=t.map((function(e,t){return"sourceLoc.".concat(Ij[t]," = start[").concat(t,"] + coords.").concat(Ij[t],";")}));r="\n        ".concat(n," sourceLoc;\n        ").concat(n," coords = getOutputCoords();\n        ").concat(i.join("\n"),"\n      "),this.userCode="\n      void main() {\n        ".concat(r,"\n        setOutput(getSource(").concat(a,"));\n      }\n    ")})),Ij=["x","y","z","w","u","v"];var Sj=(0,Te.Z)((function e(t){(0,Se.Z)(this,e),this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.rank=t.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];var n=JB(this.rank),r=kU("coords",this.rank),a=kU("sourceLoc",this.rank),i=1===this.rank?"sourceLoc":"vec2(".concat(a.slice(-2).join(),")"),o="getChannel(getSource(".concat(a.join(),"), ").concat(i,")"),s="\n      result.x = ".concat(o,";\n      if (++").concat(r[this.rank-1]," < ").concat(t[this.rank-1],") {\n        ++").concat(a[this.rank-1],";\n        result.y = ").concat(o,";\n        --").concat(a[this.rank-1],";\n      }\n    "),u=1===this.rank?"":"\n      --".concat(r[this.rank-1],";\n      if (++").concat(r[this.rank-2]," < ").concat(t[this.rank-2],") {\n        ++").concat(a[this.rank-2],";\n        result.z = ").concat(o,";\n        if (++").concat(r[this.rank-1]," < ").concat(t[this.rank-1],") {\n          ++").concat(a[this.rank-1],";\n          result.w = ").concat(o,";\n        }\n      }\n    "),c=this.rank<=4?"sourceLoc = coords +\n            ".concat(n,"(").concat(t.map((function(e,t){return"start[".concat(t,"]")})).join(),");"):t.map((function(e,t){return"".concat(a[t]," = ").concat(r[t]," + start[").concat(t,"];")})).join("\n");this.userCode="\n      void main() {\n        ".concat(n," coords = getOutputCoords();\n        ").concat(n," sourceLoc;\n        ").concat(c,"\n        vec4 result = vec4(0.);\n        ").concat(s,"\n        ").concat(u,"\n        setOutput(result);\n      }\n    ")}));function Tj(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=vg(a,r.begin,r.size),o=(0,ge.Z)(i,2),s=o[0],u=o[1];if(dg(a,s,u),0===Ic(u))return n.makeTensorInfo(u,a.dtype,[]);if(n.shouldExecuteOnCPU([a])||"string"===a.dtype){var c=n.texData.get(a.dataId),l=aU(c.values,s,u,a.shape,a.dtype);return n.makeTensorInfo(u,a.dtype,l)}var d=n.texData.get(a.dataId).isPacked,f=hg(a.shape,s,u);if(d||!f){var h=el().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Sj(u):new xj(u),p=[s];return n.runWebGLProgram(h,[a],a.dtype,p)}return n.uploadToGPU(a.dataId),function(e,t,n,r){var a=r.texData.get(e.dataId),i=r.makeTensorInfo(n,e.dtype),o=r.texData.get(i.dataId);Object.assign(o,a),o.refCount=1,o.shape=n,o.dtype=e.dtype;var s=pg(t,Vc(e.shape));a.slice&&(s+=a.slice.flatOffset),o.slice={flatOffset:s,origDataId:a.slice&&a.slice.origDataId||e.dataId};var u=r.dataRefCount.get(o.slice.origDataId)||1;return r.dataRefCount.set(o.slice.origDataId,u+1),i}(a,s,u,n)}var Ej={kernelName:Zf,backendName:"webgl",kernelFunc:Tj},Nj={kernelName:Sl,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockShape,o=r.crops;kc(a.shape.length<=4,(function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"}));var s=i.reduce((function(e,t){return e*t})),u=Kx(a.shape,i,s),c=Xx(u.length,i.length),l=Yx(a.shape,i,s),d=Qx(o,i.length),f=Jx(l,o,i.length),h=[],p=yW({inputs:{x:a},backend:n,attrs:{shape:u}}),v=CW({inputs:{x:p},backend:n,attrs:{perm:c}}),m=yW({inputs:{x:v},backend:n,attrs:{shape:l}}),g=Tj({inputs:{x:m},backend:n,attrs:{begin:d,size:f}});return h.push(p),h.push(v),h.push(m),h.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),g}};var Cj={kernelName:Tl,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.weights,o=r.size,s=n.readSync(a.dataId),u=n.readSync(i.dataId),c=EV(s,u,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,c)}};var Zj={kernelName:El,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.s0,a=t.s1,i=n.readSync(r.dataId),o=n.readSync(a.dataId),s=Zm(Array.from(i),Array.from(o));return n.makeTensorInfo([s.length],"int32",Int32Array.from(s))}},_j=lW({opSnippet:"return float(a != b);",cpuKernelImpl:$V,dtype:"bool"}),Aj={kernelName:Xd,backendName:"webgl",kernelFunc:_j};function Rj(e){var t=e.inputs,n=e.backend,r=t.input;return QU({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.real},backend:n})}var Dj={kernelName:ff,backendName:"webgl",kernelFunc:Rj},Oj="return float(int(x));";var Lj={kernelName:Nl,backendName:"webgl",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=t.attrs,i=n.x,o=a.dtype;if("complex64"===o){if("complex64"===i.dtype)return QU({inputs:{x:i},backend:r});var s=Rb(i.shape),u=e({inputs:{x:i},backend:r,attrs:{dtype:"float32"}}),c=eW({inputs:{real:u,imag:s},backend:r});return s.dispose(),r.disposeIntermediateTensorInfo(u),c}if("complex64"===i.dtype){var l=Rj({inputs:{input:i},backend:r}),d=e({inputs:{x:l},backend:r,attrs:{dtype:o}});return r.disposeIntermediateTensorInfo(l),d}if(!Oc(i.dtype,o)){var f=QU({inputs:{x:i},backend:r});return{dataId:f.dataId,shape:f.shape,dtype:o}}if(r.shouldExecuteOnCPU([i])){var h=r.texData.get(i.dataId).values,p=CV(h,i.shape,i.dtype,o),v=(0,ge.Z)(p,3),m=v[0],g=v[1],y=v[2];return r.makeTensorInfo(m,g,y)}if("int32"===o)return function(e,t){var n=new NU(e.shape,Oj),r=t.runWebGLProgram(n,[e],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}(i,r);if("bool"===o){var b=r.makeTensorInfo([],"bool",Rc("bool",1)),k=_j({inputs:{a:i,b:b},backend:r});return r.disposeIntermediateTensorInfo(b),k}throw new Error("Error in Cast: failed to cast ".concat(i.dtype," to ").concat(o))}},Fj="return ceil(x);",Mj=cW({opSnippet:Fj,packedOpSnippet:Fj,cpuKernelImpl:ZV}),Pj={kernelName:Cl,backendName:"webgl",kernelFunc:Mj},zj=(0,Te.Z)((function e(t){(0,Se.Z)(this,e),this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=t,this.userCode="\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "})),Bj=(0,Te.Z)((function e(t){(0,Se.Z)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=t,this.userCode="\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}));var Vj={kernelName:Zl,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.clipValueMin,s=a.clipValueMax;t=el().getBool("WEBGL_PACK_CLIP")?new Bj(i.shape):new zj(i.shape);var u=[[o],[s]];return r.runWebGLProgram(t,[i],i.dtype,u)}},Uj=(0,Te.Z)((function e(t){(0,Se.Z)(this,e),this.variableNames=["real","imag"],this.outputShape=t,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "}));function Wj(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}}var jj={kernelName:Al,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=n.texData.get(r.dataId),i=new Uj(r.shape),o=[Wj(r,a.complexTensorInfos.real),Wj(r,a.complexTensorInfos.imag)];return n.runWebGLProgram(i,o,o[0].dtype)}},Gj=(0,Te.Z)((function e(t){(0,Se.Z)(this,e),this.outputShape=[],this.outputShape=Gx(t,1),this.variableNames=t.map((function(e,t){return"T".concat(t)}));var n=new Array(t.length-1);n[0]=t[0][1];for(var r=1;r<n.length;r++)n[r]=n[r-1]+t[r][1];for(var a=["if (yC < ".concat(n[0],") setOutput(getT0(yR, yC));")],i=1;i<n.length;i++){var o=n[i-1];a.push("else if (yC < ".concat(n[i],") ")+"setOutput(getT".concat(i,"(yR, yC-").concat(o,"));"))}var s=n.length,u=n[n.length-1];a.push("else setOutput(getT".concat(s,"(yR, yC-").concat(u,"));")),this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        ".concat(a.join("\n        "),"\n      }\n    ")})),Hj=(0,Te.Z)((function e(t,n){(0,Se.Z)(this,e),this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=Gx(t,n);var r=this.outputShape,a=r.length,i=JB(a),o=kU("coords",a),s=["x","y","z","w","u","v"].slice(0,a);this.variableNames=t.map((function(e,t){return"T".concat(t)}));var u=new Array(t.length-1);u[0]=t[0][n];for(var c=1;c<u.length;c++)u[c]=u[c-1]+t[c][n];for(var l=s[n],d=s.slice(-2),f=s.join(),h="if (".concat(l," < ").concat(u[0],") {\n        return getChannel(\n            getT0(").concat(f,"), vec2(").concat(d.join(),"));\n        }"),p=1;p<u.length;p++){var v=u[p-1];h+="\n        if (".concat(l," < ").concat(u[p],"  && ").concat(l," >= ").concat(u[p-1],") {\n          return getChannel(\n            getT").concat(p,"(").concat(qj(s,l,v),"),\n            vec2(").concat(qj(d,l,v),"));\n        }")}var m=u.length,g=u[u.length-1];h+="\n        return getChannel(\n          getT".concat(m,"(").concat(qj(s,l,g),"),\n          vec2(").concat(qj(d,l,g),"));"),this.userCode="\n      float getValue(".concat(s.map((function(e){return"int "+e})),") {\n        ").concat(h,"\n      }\n\n      void main() {\n        ").concat(i," coords = getOutputCoords();\n        vec4 result = vec4(getValue(").concat(o,"), 0., 0., 0.);\n\n        ").concat(o[a-1]," = ").concat(o[a-1]," + 1;\n        if (").concat(o[a-1]," < ").concat(r[a-1],") {\n          result.g = getValue(").concat(o,");\n        }\n\n        ").concat(o[a-2]," = ").concat(o[a-2]," + 1;\n        if (").concat(o[a-2]," < ").concat(r[a-2],") {\n          result.a = getValue(").concat(o,");\n        }\n\n        ").concat(o[a-1]," = ").concat(o[a-1]," - 1;\n        if (").concat(o[a-2]," < ").concat(r[a-2]," &&\n            ").concat(o[a-1]," < ").concat(r[a-1],") {\n          result.b = getValue(").concat(o,");\n        }\n        setOutput(result);\n      }\n    ")}));function qj(e,t,n){var r=e.indexOf(t);return e.map((function(e,t){return t===r?"".concat(e," - ").concat(n):e})).join()}function $j(e){var t=e.inputs,n=e.backend,r=t.input;return QU({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.imag},backend:n})}var Kj={kernelName:kd,backendName:"webgl",kernelFunc:$j};function Xj(e,t,n){var r=e[0].dtype;if("complex64"===r){var a=e.map((function(e){return Rj({inputs:{input:e},backend:n})})),i=e.map((function(e){return $j({inputs:{input:e},backend:n})})),o=Xj(a,t,n),s=Xj(i,t,n),u=eW({inputs:{real:o,imag:s},backend:n});return a.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),i.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),u}var c=n.shouldExecuteOnCPU(e);if("string"===r&&(c=!0),c){var l=e.map((function(e){var r=Ic(e.shape.slice(t));return yW({inputs:{x:e},backend:n,attrs:{shape:[-1,r]}})})),d=l.map((function(e){return{vals:n.readSync(e.dataId),shape:e.shape}})),f=Gx(l.map((function(e){return e.shape})),1),h=1===l[0].shape[0],p=_V(d,f,r,h),v=Gx(e.map((function(e){return e.shape})),t),m=n.makeTensorInfo(v,r,p);return l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),m}var g=e.filter((function(e){return Ic(e.shape)>0})),y=el().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&g[0].shape.length>1;if(1===g.length){var b=y?new NU(e[0].shape,OU):new VU(e[0].shape,OU);return n.runWebGLProgram(b,e,r)}var k=el().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(g.length>k){for(var w=[],x=0;x<g.length;x+=k){var I=g.slice(x,x+k);w.push(Xj(I,t,n))}for(var S=Xj(w,t,n),T=0,E=w;T<E.length;T++){var N=E[T];n.disposeIntermediateTensorInfo(N)}return S}if(y){var C=new Hj(g.map((function(e){return e.shape})),t);return n.runWebGLProgram(C,g,r)}var Z=function(e,t,n){var r=Gx(e.map((function(e){return e.shape})),t),a=e.map((function(e){return yW({inputs:{x:e},attrs:{shape:[-1,Ic(e.shape.slice(t))]},backend:n})}));return{tensors2D:a,outShape:r}}(g,t,n),_=Z.tensors2D,A=Z.outShape,R=new Gj(_.map((function(e){return e.shape}))),D=n.runWebGLProgram(R,_,r);_.forEach((function(e){return n.disposeIntermediateTensorInfo(e)}));var O=yW({inputs:{x:D},attrs:{shape:A},backend:n});return n.disposeIntermediateTensorInfo(D),O}function Yj(e){var t=e.inputs,n=e.backend,r=_c(e.attrs.axis,t[0].shape)[0],a=t.map((function(e){return e.shape}));jx(a,r);var i=Gx(t.map((function(e){return e.shape})),r);if(0===Ic(i))return n.makeTensorInfo(i,t[0].dtype,[]);var o=t.filter((function(e){return Ic(e.shape)>0}));return 1===o.length?QU({inputs:{x:o[0]},backend:n}):Xj(o,r,n)}var Qj={kernelName:Rl,backendName:"webgl",kernelFunc:Yj},Jj=(0,Te.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];(0,Se.Z)(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var o=t.padInfo.top,s=t.padInfo.left,u=t.strideHeight,c=t.strideWidth,l=t.dilationHeight,d=t.dilationWidth,f=t.filterHeight,h=t.filterWidth,p=4*Math.floor(t.inChannels/4),v=t.inChannels%4,m="channelsLast"===t.dataFormat,g=m?1:2,y=m?2:3,b=m?3:1,k="",w="";r&&(k=a?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):i?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"\n          float activation(float x) {\n            ".concat(r,"\n          }\n        "),w="result = activation(result);");var x=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(k,"\n\n      const ivec2 strides = ivec2(").concat(u,", ").concat(c,");\n      const ivec2 pads = ivec2(").concat(o,", ").concat(s,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[").concat(b,"];\n\n        ivec2 xRCCorner =\n            ivec2(coords[").concat(g,"], coords[").concat(y,"]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(f,"; wR++) {\n          int xR = xRCorner + wR * ").concat(l,";\n\n          if (xR < 0 || xR >= ").concat(t.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(h,"; wC++) {\n            int xC = xCCorner + wC * ").concat(d,";\n\n            if (xC < 0 || xC >= ").concat(t.inWidth,") {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < ").concat(p,"; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if (").concat(m,") {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if (").concat(1===v,") {\n\n              if (").concat(m,") {\n                dotProd +=\n                    getX(batch, xR, xC, ").concat(p,") *\n                    getW(wR, wC, ").concat(p,", d2);\n              } else {\n                dotProd +=\n                    getX(batch, ").concat(p,", xR, xC) *\n                    getW(wR, wC, ").concat(p,", d2);\n              }\n\n            } else if (").concat(2===v,") {\n              vec2 wValues = vec2(\n                getW(wR, wC, ").concat(p,", d2),\n                getW(wR, wC, ").concat(p," + 1, d2)\n              );\n\n              if (").concat(m,") {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, ").concat(p,"),\n                  getX(batch, xR, xC, ").concat(p," + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, ").concat(p,", xR, xC),\n                  getX(batch, ").concat(p," + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if (").concat(3===v,") {\n              vec3 wValues = vec3(\n                getW(wR, wC, ").concat(p,", d2),\n                getW(wR, wC, ").concat(p," + 1, d2),\n                getW(wR, wC, ").concat(p," + 2, d2)\n              );\n\n              if (").concat(m,") {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, ").concat(p,"),\n                  getX(batch, xR, xC, ").concat(p," + 1),\n                  getX(batch, xR, xC, ").concat(p," + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, ").concat(p,", xR, xC),\n                  getX(batch, ").concat(p," + 1, xR, xC),\n                  getX(batch, ").concat(p," + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        ").concat(x,"\n        ").concat(w,"\n        setOutput(result);\n      }\n    ")})),eG=(0,Te.Z)((function e(t){(0,Se.Z)(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var n=t.padInfo.front,r=t.padInfo.top,a=t.padInfo.left,i=t.strideDepth,o=t.strideHeight,s=t.strideWidth,u=t.dilationDepth,c=t.dilationHeight,l=t.dilationWidth,d=t.filterDepth,f=t.filterHeight,h=t.filterWidth,p=4*Math.floor(t.inChannels/4),v=t.inChannels%4;this.userCode="\n      const ivec3 strides = ivec3(".concat(i,", ").concat(o,", ").concat(s,");\n      const ivec3 pads = ivec3(").concat(n,", ").concat(r,", ").concat(a,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(d,"; wF++) {\n          int xF = xFCorner + wF * ").concat(u,";\n\n          if (xF < 0 || xF >= ").concat(t.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(f,"; wR++) {\n            int xR = xRCorner + wR * ").concat(c,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(h,"; wC++) {\n              int xC = xCCorner + wC * ").concat(l,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < ").concat(p,"; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if (").concat(1===v,") {\n                dotProd +=\n                  getX(batch, xF, xR, xC, ").concat(p,") *\n                  getW(wF, wR, wC, ").concat(p,", d2);\n              } else if (").concat(2===v,") {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, ").concat(p,"),\n                  getX(batch, xF, xR, xC, ").concat(p," + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, ").concat(p,", d2),\n                  getW(wF, wR, wC, ").concat(p," + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if (").concat(3===v,") {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, ").concat(p,"),\n                  getX(batch, xF, xR, xC, ").concat(p," + 1),\n                  getX(batch, xF, xR, xC, ").concat(p," + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, ").concat(p,", d2),\n                  getW(wF, wR, wC, ").concat(p," + 1, d2),\n                  getW(wF, wR, wC, ").concat(p," + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),tG=(0,Te.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];(0,Se.Z)(this,e),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=oV(this.outputShape.length);for(var o=t.padInfo.left,s=t.strideWidth,u=t.dilationWidth,c=t.filterHeight,l=t.filterWidth,d=l,f="\n       int xR; int xC; int xCOffset;\n       vec4 wTexel; vec4 previous; vec4 final;",h=0;h<l;h++)f+="\n           vec4 xTexelC".concat(2*h,";\n           int xTexelC").concat(2*h,"Ready;\n           vec4 xTexelC").concat(2*h+1,";\n           int xTexelC").concat(2*h+1,"Ready;\n           vec4 xC").concat(h,";");f+="\n     for (int r = 0; r < ".concat(c,"; r++) {\n      for (int d1 = 0; d1 < ").concat(t.inChannels,"; d1 += 2) {\n       ");for(var p=0;p<l;p++)f+="\n           xTexelC".concat(2*p," = vec4(0.0);\n           xTexelC").concat(2*p,"Ready = 0;\n           xTexelC").concat(2*p+1," = vec4(0.0);\n           xTexelC").concat(2*p+1,"Ready = 0;\n           xC").concat(p," = vec4(0.0);");f+="\n         xR = xRCorner + r * dilations[0];\n         if (xR >=0 && xR < inDims[0]) {\n       ";for(var v=0;v<(d+1)/2;v++){var m=2*v;if(f+="\n           xC = xCCorner + ".concat(m*u,";\n           "),1===s){if(m<l&&(o%2===1?(f+="\n                 xCOffset = xC + 1;\n                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(m,"Ready == 0) {\n                   xTexelC").concat(m," = getX(batch, xR, xCOffset, d1);\n\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC").concat(m,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(m,"Ready = 1;\n                 }\n               "),f+=1===u&&m>0?"\n                 xC".concat(m," = vec4(xTexelC").concat(m-2,".zw, xTexelC").concat(m,".xy);\n                 "):"\n                   xCOffset = xC + 1 - 2;\n\n                   if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                     previous = getX(batch, xR, xCOffset, d1);\n\n                     // Need to manually clear unused channels in case\n                     // we're reading from recycled texture.\n                     if (xCOffset + 1 >= inDims[1]) {\n                       previous.zw = vec2(0.0);\n                     }\n\n                     xC".concat(m," = vec4(previous.zw, xTexelC").concat(m,".xy);\n                   } else {\n                     xC").concat(m," = vec4(0.0, 0.0, xTexelC").concat(m,".xy);\n                   }\n                   ")):f+="\n                 if (xC >= 0 && xC < inDims[1] && xTexelC".concat(m,"Ready == 0) {\n                   xTexelC").concat(m," = getX(batch, xR, xC, d1);\n                   if (xC + 1 >= inDims[1]) {\n                     xTexelC").concat(m,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(m,"Ready = 1;\n                 }\n\n                 xC").concat(m," = xTexelC").concat(m,";\n                 "),m+1<l)){var g=o%2===0?gc(u):u;u%2===0&&o%2===1||u%2!==0&&o%2!==1?(f+="\n                   xCOffset = xC + imod(pads[1], 2) + ".concat(g,";\n\n                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(m+1,"Ready == 0) {\n                     xTexelC").concat(m+1," = getX(batch, xR, xCOffset, d1);\n\n                     // Need to manually clear unused channels in case\n                     // we're reading from recycled texture.\n                     if (xCOffset + 1 >= inDims[1]) {\n                       xTexelC").concat(m+1,".zw = vec2(0.0);\n                     }\n                     xTexelC").concat(m+1,"Ready = 1;\n                   }\n                   "),f+=u>1?"\n                     xCOffset -= 2;\n                     if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                      previous = getX(batch, xR, xCOffset, d1);\n                      xC".concat(m+1," = vec4(previous.zw, xTexelC").concat(m+1,".xy);\n                     } else {\n                      xC").concat(m+1," = vec4(0.0, 0.0, xTexelC").concat(m+1,".xy);\n                     }\n                     "):"\n                     xC".concat(m+1," = vec4(xTexelC").concat(m,".zw, xTexelC").concat(m+1,".xy);\n                     ")):f+=1===g?"\n                     xC".concat(m+1," = xTexelC").concat(m,";\n                     "):"\n                     xCOffset = xC + ".concat(g,";\n\n                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(m+1,"Ready == 0) {\n                       xTexelC").concat(m+1," = getX(batch, xR, xCOffset, d1);\n                       if (xCOffset + 1 >= inDims[1]) {\n                         xTexelC").concat(m+1,".zw = vec2(0.0);\n                       }\n                       xTexelC").concat(m+1,"Ready = 1;\n                     }\n\n                     xC").concat(m+1," = xTexelC").concat(m+1,";\n                     ")}}else m<l&&(o%2===1?(f+="\n                 xCOffset = xC + 1 - strides[1];\n                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(m,"Ready == 0) {\n                   xTexelC").concat(m," = getX(batch, xR, xCOffset, d1);\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC").concat(m,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(m,"Ready = 1;\n                 }\n\n                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC").concat(m+1,"Ready == 0) {\n                   xTexelC").concat(m+1," = getX(batch, xR, xC + 1, d1);\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xC + 2 >= inDims[1]) {\n                     xTexelC").concat(m+1,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(m+1,"Ready = 1;\n                 }\n\n                 xC").concat(m," = vec4(xTexelC").concat(m,".zw, xTexelC").concat(m+1,".zw);\n               "),m+1<l&&(f+="\n                   final = vec4(0.0);\n                   xCOffset = xC + 1 + strides[1];\n                   if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                     final = getX(batch, xR, xCOffset, d1);\n                   }\n                   xC".concat(m+1," = vec4(xTexelC").concat(m+1,".xy, final.xy);\n                 "))):(f+="\n                 if(xC >= 0 && xC < inDims[1] && xTexelC".concat(m,"Ready == 0) {\n                   xTexelC").concat(m," = getX(batch, xR, xC, d1);\n                   if (xC + 1 >= inDims[1]) {\n                     xTexelC").concat(m,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(m,"Ready = 1;\n                 }\n\n                 xCOffset = xC + strides[1];\n                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(m+1,"Ready == 0) {\n                   xTexelC").concat(m+1," = getX(batch, xR, xCOffset, d1);\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC").concat(m+1,".zw = vec2(0.);\n                   }\n                   xTexelC").concat(m+1,"Ready = 1;\n                 }\n\n                 xC").concat(m," = vec4(\n                   xTexelC").concat(m,".xy, xTexelC").concat(m+1,".xy);\n               "),m+1<l&&(f+="\n                   xC".concat(m+1," = vec4(xTexelC").concat(m,".zw, xTexelC").concat(m+1,".zw);\n                 "))));m<l&&(f+="\n             wTexel = getW(r, ".concat(m,", d1, d2);\n             dotProd += xC").concat(m,".xxzz * vec4(wTexel.xy, wTexel.xy);\n             if(d1 + 1 < ").concat(t.inChannels,") {\n               dotProd += xC").concat(m,".yyww * vec4(wTexel.zw, wTexel.zw);\n             }\n           "),m+1<l&&(f+="\n               wTexel = getW(r, ".concat(m+1,", d1, d2);\n               dotProd += xC").concat(m+1,".xxzz * vec4(wTexel.xy, wTexel.xy);\n               if(d1 + 1 < ").concat(t.inChannels,") {\n                 dotProd += xC").concat(m+1,".yyww * vec4(wTexel.zw, wTexel.zw);\n               }\n             ")))}f+="\n     }\n   ",f+="\n     }\n   ",f+="\n     }\n   ";var y="",b="";r&&(y=a?"vec4 activation(vec4 a) {\n           vec4 b = getPreluActivationWeightsAtOutCoords();\n           ".concat(r,"\n         }"):i?"vec4 activation(vec4 a) {\n           vec4 b = getLeakyreluAlphaAtOutCoords();\n           ".concat(r,"\n         }"):"vec4 activation(vec4 x) {\n           ".concat(r,"\n         }"),b="result = activation(result);");var k=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n       ".concat(y,"\n\n       void main() {\n         ivec4 coords = getOutputCoords();\n         int batch = coords.x;\n         ivec2 xRCCorner = coords.yz * strides - pads;\n         int d2 = coords.w;\n         int xRCorner = xRCCorner.x;\n         int xCCorner = xRCCorner.y;\n\n         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n         vec4 dotProd = vec4(0.000000000000001);\n\n         ").concat(f,"\n\n         vec4 result = dotProd - vec4(0.000000000000001);\n         ").concat(k,"\n         ").concat(b,"\n         setOutput(result);\n       }\n     ")})),nG=(0,Te.Z)((function e(t,n){(0,Se.Z)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=t,this.enableShapeUniforms=oV(this.outputShape.length);for(var r=n.dataFormat,a=MB(),i="channelsLast"===r,o=i?1:2,s=i?2:3,u=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":"if(blockIndex < ".concat(t[2]," && pos < ").concat(t[1],") {"),c="",l=0;l<=1;l++)for(var d=0;d<=1;d++)c+="\n          blockIndex = rc.z + ".concat(d,";\n          pos = rc.y + ").concat(l,";\n\n          ").concat(u,"\n            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];\n            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);\n\n            if(d0 < inputShape[").concat(o,"] && d0 >= 0) {\n              // Use custom imod instead mod. On Intel GPU, mod may generate\n              // unexpected value.\n              // https://github.com/tensorflow/tfjs/issues/5447\n              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];\n              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /\n                  inChannels);\n\n              if(d1 < inputShape[").concat(s,"] && d1 >= 0) {\n\n                ch = imod(pos, inChannels);\n\n                if (").concat(i,") {\n                  innerDims = vec2(d1, ch);\n                  result[").concat(2*l+d,"] = getChannel(\n                    getA(rc.x, d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result[").concat(2*l+d,"] = getChannel(\n                    getA(rc.x, ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        ");this.userCode="\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        ".concat(c,"\n\n        ").concat(a.output," = result;\n      }\n    ")}));function rG(e,t){var n=e.length;return n>=3?[].concat((0,me.Z)(e.slice(0,-3)),t?[e[n-3]*e[n-2],e[n-1]]:[e[n-3],e[n-2]*e[n-1]]):!t&&1===n&&e[0]>1?[e[0],1]:null}function aG(e){var t,n=e.x,r=e.filter,a=e.convInfo,i=e.backend,o=e.bias,s=void 0===o?null:o,u=e.preluActivationWeights,c=void 0===u?null:u,l=e.leakyreluAlpha,d=void 0===l?0:l,f=e.activation,h=void 0===f?null:f,p=n.shape,v=i.texData.get(n.dataId),m=a.inChannels,g=p[0]*p[1]*p[2],y=a.outChannels,b="channelsLast"===a.dataFormat,k=[];if(null!=c){var w=rG(c.shape,b);null!=w&&(c=yW({inputs:{x:c},backend:i,attrs:{shape:w}}),k.push(c))}if(null!=s){var x=rG(s.shape,b);null!=x&&(s=yW({inputs:{x:s},backend:i,attrs:{shape:x}}),k.push(s))}if(!((1===g||1===y)&&m>_W)&&v.isPacked&&b&&null!=v.texture&&p[2]%2!==0&&Sc(v.shape.slice(-3),p.slice(-3))){var I=p[0]*p[1]*(p[2]+1),S={dataId:n.dataId,shape:[1,I,a.inChannels],dtype:n.dtype},T=v.shape;v.shape=v.shape.slice(),v.shape[v.shape.length-2]++,kc(_B(v.shape,S.shape),(function(){return"packed reshape ".concat(v.shape," to ").concat(S.shape," isn't free")}));var E=yW({inputs:{x:r},backend:i,attrs:{shape:[1,a.inChannels,a.outChannels]}});k.push(E);var N=AW({a:S,b:E,backend:i,transposeA:!1,transposeB:false,bias:s,activation:h,preluActivationWeights:c,leakyreluAlpha:d}),C=i.texData.get(N.dataId);kc(C.isPacked,(function(){return"batchMatMul result is expected to be packed"})),v.shape=T,C.shape=a.outShape,(t=QU({inputs:{x:N},backend:i})).shape=a.outShape,k.push(N)}else{var Z=a.outHeight*a.outWidth,_=yW({inputs:{x:n},backend:i,attrs:{shape:b?[a.batchSize,Z,a.inChannels]:[a.batchSize,a.inChannels,Z]}}),A=yW({inputs:{x:r},backend:i,attrs:{shape:[1,a.inChannels,a.outChannels]}}),R=AW({a:b?_:A,b:b?A:_,transposeA:!b,transposeB:false,backend:i,bias:s,activation:h,preluActivationWeights:c,leakyreluAlpha:d});t=yW({inputs:{x:R},backend:i,attrs:{shape:a.outShape}}),k.push(_),k.push(A),k.push(R)}for(var D=0,O=k;D<O.length;D++){var L=O[D];i.disposeIntermediateTensorInfo(L)}return t}function iG(e){var t=e.x,n=e.filter,r=e.convInfo,a=e.backend,i=e.bias,o=void 0===i?null:i,s=e.preluActivationWeights,u=void 0===s?null:s,c=e.leakyreluAlpha,l=void 0===c?0:c,d=e.activation,f=void 0===d?null:d,h=r.filterWidth,p=r.filterHeight,v=r.inChannels,m=r.outWidth,g=r.outHeight,y="channelsLast"===r.dataFormat,b=h*p*v,k=g*m,w=[r.batchSize,b,k],x=[];if(null!=u){var I=rG(u.shape,y);null!=I&&(u=yW({inputs:{x:u},backend:a,attrs:{shape:I}}),x.push(u))}if(null!=o){var S=rG(o.shape,y);null!=S&&(o=yW({inputs:{x:o},backend:a,attrs:{shape:S}}),x.push(o))}var T=yW({inputs:{x:n},backend:a,attrs:{shape:[1,b,Ic(n.shape)/b]}});x.push(T);var E=new nG(w,r),N=[t.shape,[r.padInfo.top,r.padInfo.left],[r.strideHeight,r.strideWidth],[r.dilationHeight,r.dilationWidth],[r.inChannels],[r.filterWidth*r.inChannels],[r.outWidth]],C=a.runWebGLProgram(E,[t],"float32",N),Z=yW({inputs:{x:C},backend:a,attrs:{shape:w}});x.push(C),x.push(Z);var _=null!=o,A=null!=u,R="leakyrelu"===f,D=f?dW(f,!0):null,O=new fW(y?Z.shape:T.shape,y?T.shape:Z.shape,y?[r.batchSize,k,r.outChannels]:[r.batchSize,r.outChannels,k],!0,!1,_,D,A,R),L=y?[Z,T]:[T,Z];if(o&&L.push(o),A&&L.push(u),R){var F=a.makeTensorInfo([],"float32",Ph(l,"float32"));L.push(F),x.push(F)}var M=a.runWebGLProgram(O,L,"float32"),P=yW({inputs:{x:M},backend:a,attrs:{shape:r.outShape}});x.push(M);for(var z=0,B=x;z<B.length;z++){var V=B[z];a.disposeIntermediateTensorInfo(V)}return P}var oG={kernelName:Dl,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=n.filter,s=a.strides,u=a.pad,c=a.dataFormat,l=a.dilations,d=a.dimRoundingMode,f=Wg(c),h=Dg(i.shape,o.shape,s,l,u,d,!1,f);if(1!==h.filterHeight||1!==h.filterWidth||1!==h.dilationHeight||1!==h.dilationWidth||1!==h.strideHeight||1!==h.strideWidth||"SAME"!==h.padInfo.type&&"VALID"!==h.padInfo.type)if(h.strideWidth<=2&&"channelsLast"===f&&el().getBool("WEBGL_EXP_CONV")){var p=new tG(h),v=[[h.padInfo.top,h.padInfo.left],[h.strideHeight,h.strideWidth],[h.dilationHeight,h.dilationWidth],[h.inHeight,h.inWidth]];t=r.runWebGLProgram(p,[i,o],"float32",v)}else if(el().getBool("WEBGL_CONV_IM2COL"))t=iG({x:i,filter:o,convInfo:h,backend:r});else{var m=new Jj(h);t=r.runWebGLProgram(m,[i,o],"float32")}else t=aG({x:i,filter:o,convInfo:h,backend:r});var g=yW({inputs:{x:t},backend:r,attrs:{shape:h.outShape}});return r.disposeIntermediateTensorInfo(t),g}},sG=(0,Te.Z)((function e(t){(0,Se.Z)(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideHeight,r=t.strideWidth,a=t.padInfo.top,i=t.padInfo.left,o="channelsLast"===t.dataFormat;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(t.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(n," - ").concat(a,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(r," - ").concat(i,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              ").concat(o?"float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);":"float dyValue = getDy(b, d2, yR, yC);\n              float xValue = getX(b, d1, xR, xC);\n              dotProd += (xValue * dyValue);","\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),uG=(0,Te.Z)((function e(t){(0,Se.Z)(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a=t.strideHeight,i=t.strideWidth,o="channelsLast"===t.dataFormat,s=n-1-t.padInfo.top,u=r-1-t.padInfo.left,c=o?1:2,l=o?2:3,d=o?3:1;this.userCode="\n      const ivec2 pads = ivec2(".concat(s,", ").concat(u,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[").concat(d,"];\n\n        ivec2 dyCorner = ivec2(coords[").concat(c,"], coords[").concat(l,"]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(n,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(n," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(r,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(i,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(r," - 1 - wC;\n\n            for (int d2 = 0; d2 < ").concat(t.outChannels,"; d2++) {\n\n              if (").concat(o,") {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),cG=(0,Te.Z)((function e(t){(0,Se.Z)(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideDepth,r=t.strideHeight,a=t.strideWidth,i=t.padInfo.front,o=t.padInfo.top,s=t.padInfo.left;this.userCode="\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(t.batchSize,"; b++) {\n          for (int yF = 0; yF < ").concat(t.outDepth,"; yF++) {\n            int xF = wF + yF * ").concat(n," - ").concat(i,";\n\n            if (xF < 0 || xF >= ").concat(t.inDepth,") {\n              continue;\n            }\n\n            for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n              int xR = wR + yR * ").concat(r," - ").concat(o,";\n\n              if (xR < 0 || xR >= ").concat(t.inHeight,") {\n                continue;\n              }\n\n              for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n                int xC = wC + yC * ").concat(a," - ").concat(s,";\n\n                if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),lG=(0,Te.Z)((function e(t){(0,Se.Z)(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterDepth,r=t.filterHeight,a=t.filterWidth,i=t.strideDepth,o=t.strideHeight,s=t.strideWidth,u=n-1-t.padInfo.front,c=r-1-t.padInfo.top,l=a-1-t.padInfo.left;this.userCode="\n      const ivec3 pads = ivec3(".concat(u,", ").concat(c,", ").concat(l,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(n,"; wF++) {\n          float dyF = float(dyFCorner + wF) / ").concat(i,".0;\n\n          if (dyF < 0.0 || dyF >= ").concat(t.outDepth,".0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = ").concat(n," - 1 - wF;\n\n          for (int wR = 0; wR < ").concat(r,"; wR++) {\n            float dyR = float(dyRCorner + wR) / ").concat(o,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = ").concat(r," - 1 - wR;\n\n            for (int wC = 0; wC < ").concat(a,"; wC++) {\n              float dyC = float(dyCCorner + wC) / ").concat(s,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = ").concat(a," - 1 - wC;\n\n              for (int d2 = 0; d2 < ").concat(t.outChannels,"; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}));var dG={kernelName:Ol,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.pad,u=r.dataFormat,c=r.dimRoundingMode,l=r.filterShape,d=Wg(u),f=Dg(a.shape,l,o,1,s,c,!1,d),h=new sG(f);return n.runWebGLProgram(h,[a,i],"float32")}},fG=(0,Te.Z)((function e(t){(0,Se.Z)(this,e),this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=t.inShape,this.enableShapeUniforms=oV(this.outputShape.length);var n=t.filterHeight,r=t.filterWidth,a=n-1-t.padInfo.top,i=r-1-t.padInfo.left;this.userCode="\n      const ivec2 pads = ivec2(".concat(a,", ").concat(i,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n\n        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        vec4 result = vec4(0.);\n        for (int wR = 0; wR < ").concat(n,"; wR++) {\n          float dyR = float(dyRCorner + wR) / strides[0];\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n          int wRPerm = ").concat(n," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(r,"; wC++) {\n            int wCPerm = ").concat(r," - 1 - wC;\n\n            float dyC = float(dyCCorner + wC) / strides[1];\n            bool idyCVal = (dyC >= 0.0) && (dyC < ").concat(t.outWidth,".0)\n              && (fract(dyC) == 0.0);\n            int idyC = int(dyC);\n\n            float dyC2 = float(dyCCorner + wC + 1) / strides[1];\n            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ").concat(t.outWidth,".0)\n              && (fract(dyC2) == 0.0);\n            int idyC2 = int(dyC2);\n\n            if (idyCVal && idyCVal2) {\n              for (int d2 = 0; d2 < ").concat(t.outChannels,"; d2 += 2) {\n                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);\n                vec4 dySample = getDy(batch, idyR, idyC, d2);\n                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?\n                  dySample : getDy(batch, idyR, idyC2, d2);\n\n                vec2 dyValue = mod(float(idyC), 2.) == 0. ?\n                  dySample.xy : dySample.zw;\n                result.xy += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n\n                dyValue = mod(float(idyC2), 2.) == 0. ?\n                  dySample2.xy : dySample2.zw;\n                result.zw += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n              }\n            } else if (idyCVal) {\n              for (int d2 = 0; d2 < ").concat(t.outChannels,"; d2 += 2) {\n                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);\n                vec4 dySample = getDy(batch, idyR, idyC, d2);\n                vec2 dyValue = mod(float(idyC), 2.) == 0. ?\n                  dySample.xy : dySample.zw;\n                result.xy += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n              }\n            } else if (idyCVal2) {\n              for (int d2 = 0; d2 < ").concat(t.outChannels,"; d2 += 2) {\n                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);\n                vec4 dySample = getDy(batch, idyR, idyC2, d2);\n                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?\n                  dySample.xy : dySample.zw;\n                result.zw += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n              }\n            }\n          }\n        }\n        setOutput(result);\n      }\n    ")}));var hG={kernelName:Ll,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.inputShape,s=r.strides,u=r.pad,c=r.dataFormat,l=r.dimRoundingMode,d=Wg(c),f=Dg(o,i.shape,s,1,u,l,!1,d);if(el().getBool("WEBGL_PACK")&&"channelsLast"===d){var h=[[f.strideHeight,f.strideWidth]],p=new fG(f);return n.runWebGLProgram(p,[a,i],"float32",h)}var v=new uG(f);return n.runWebGLProgram(v,[a,i],"float32")}};var pG={kernelName:Fl,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,u=r.dilations,c=Og(a.shape,i.shape,o,u,s),l=new eG(c);return n.runWebGLProgram(l,[a,i],"float32")}};var vG={kernelName:Ml,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.pad,u=r.filterShape,c=Og(a.shape,u,o,1,s),l=new cG(c);return n.runWebGLProgram(l,[a,i],"float32")}};var mG,gG={kernelName:Pl,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.pad,s=r.strides,u=Og(r.inputShape,i.shape,s,1,o),c=new lG(u);return n.runWebGLProgram(c,[a,i],"float32")}},yG=cW({opSnippet:uW+"\n  return cos(x);\n",packedOpSnippet:"\n  vec4 result = cos(x);\n  bvec4 isNaN = isnan(x);\n  ".concat(XU,"\n  return result;\n")}),bG={kernelName:zl,backendName:"webgl",kernelFunc:yG},kG=cW({opSnippet:"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n"}),wG={kernelName:Bl,backendName:"webgl",kernelFunc:kG},xG=(0,Te.Z)((function e(t,n,r,a,i){(0,Se.Z)(this,e),this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var o=(0,ge.Z)(t,4),s=o[0],u=o[1],c=o[2],l=o[3],d=(0,ge.Z)(n,1)[0],f=(0,ge.Z)(r,2),h=f[0],p=f[1];this.outputShape=[d,h,p,l];var v="bilinear"===a?1:0,m="".concat(u-1,".0"),g="".concat(c-1,".0"),y=h>1?["".concat((u-1)/(h-1)),"(y2-y1) * height_ratio","y1*".concat(m," + float(y)*(height_scale)")]:["0.0","0.0","0.5 * (y1+y2) * ".concat(m)],b=(0,ge.Z)(y,3),k=b[0],w=b[1],x=b[2],I=p>1?["".concat((c-1)/(p-1)),"(x2-x1) * width_ratio","x1*".concat(g," + float(x)*(width_scale)")]:["0.0","0.0","0.5 * (x1+x2) * ".concat(g)],S=(0,ge.Z)(I,3),T=S[0],E=S[1],N=S[2];this.userCode="\n      const float height_ratio = float(".concat(k,");\n      const float width_ratio = float(").concat(T,");\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= ").concat(s,") {\n          return;\n        }\n\n        float height_scale = ").concat(w,";\n        float width_scale = ").concat(E,";\n\n        float in_y = ").concat(x,";\n        if( in_y < 0.0 || in_y > ").concat(m," ) {\n          setOutput(float(").concat(i,"));\n          return;\n        }\n        float in_x = ").concat(N,";\n        if( in_x < 0.0 || in_x > ").concat(g," ) {\n          setOutput(float(").concat(i,"));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if(").concat(v," == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    ")})),IG={kernelName:Wl,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,i=t.boxes,o=t.boxInd,s=r.cropSize,u=r.method,c=r.extrapolationValue,l=new xG(a.shape,i.shape,s,u,c);return n.runWebGLProgram(l,[a,i,o],"float32")}};!function(e){e.Prod="*",e.Sum="+"}(mG||(mG={}));var SG=(0,Te.Z)((function e(t,n,r,a){(0,Se.Z)(this,e),this.op=t,this.outputShape=n,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];var i=this.outputShape.length,o=this.op===mG.Prod?"1.0":"0.0",s=r?o:"getX(".concat(TG(i,"coords",this.op),")"),u=this.outputShape[this.outputShape.length-1],c="",l="";r?(c=a?"end != ".concat(u-1):"end != 0",l=a?"end + 1":"end - 1"):(c=a?"end + pow2 < ".concat(u):"end >= pow2",l=a?"end + pow2":"end - pow2"),this.userCode="\n      void main() {\n        ".concat(JB(i)," coords = getOutputCoords();\n        int end = ").concat(EG(i,"coords",this.op),";\n        float val = ").concat(s,";\n        int pow2 = int(pow(2.0, index));\n        if (").concat(c,") {\n          int idx = ").concat(l,";\n          ").concat(EG(i,"coords",this.op)," = idx;\n          val ").concat(this.op,"= getX(").concat(TG(i,"coords",this.op),");\n        }\n        setOutput(val);\n      }\n    ")}));function TG(e,t,n){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".x, ").concat(t,".y");if(3===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z");if(4===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z, ").concat(t,".w");throw new Error("Cumulative ".concat(n," for rank ").concat(e," is not yet supported"))}function EG(e,t,n){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".y");if(3===e)return"".concat(t,".z");if(4===e)return"".concat(t,".w");throw new Error("Cumulative ".concat(n," for rank ").concat(e," is not yet supported"))}function NG(e,t,n,r,a,i){var o=t.shape.length,s=Vy([r],o),u=t;null!=s&&(u=CW({inputs:{x:t},backend:n,attrs:{perm:s}}));var c=Wy(1,o)[0];if(c!==o-1)throw new Error("WebGL cumprod shader expects an inner-most axis=".concat(t.shape.length-1," ")+"but got axis=".concat(r));for(var l=u.shape[c],d=QU({inputs:{x:u},backend:n}),f=0;f<=Math.ceil(Math.log2(l))-1;f++){var h=new SG(e,u.shape,!1,i),p=[[f]],v=d;d=n.runWebGLProgram(h,[d],d.dtype,p),n.disposeIntermediateTensorInfo(v)}if(a){var m=new SG(e,u.shape,a,i),g=d;d=n.runWebGLProgram(m,[d],d.dtype),n.disposeIntermediateTensorInfo(g)}if(null!=s){var y=CW({inputs:{x:d},backend:n,attrs:{perm:Uy(s)}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(u),y}return d}var CG={kernelName:Vl,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.exclusive,s=r.reverse;return NG(mG.Prod,a,n,i,o,s)}};var ZG={kernelName:Ul,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.exclusive,s=r.reverse;return NG(mG.Sum,a,n,i,o,s)}};var _G={kernelName:jl,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.weights,o=r.size,s=r.binaryOutput;if(1===a.shape.length){var u=n.readSync(a.dataId),c=n.readSync(i.dataId),l=EV(u,c,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,l)}if(2===a.shape.length){var d=n.bufferSync(a),f=n.bufferSync(i),h=NV(d,f,o,s);return n.makeTensorInfo(h.shape,i.dtype,h.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank"+"".concat(a.shape.length,"."))}},AG=function(){function e(t,n,r){(0,Se.Z)(this,e),this.variableNames=["x"],this.outputShape=[],this.outputShape=t,this.blockSize=n,this.dataFormat=r,this.userCode="\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = ".concat(this.getHeightCoordString(),";\n      int w = ").concat(this.getWidthCoordString(),";\n      int d = ").concat(this.getDepthCoordString(),";\n\n      int in_h = h / ").concat(n,";\n      int offset_h = imod(h, ").concat(n,");\n      int in_w = w / ").concat(n,";\n      int offset_w = imod(w, ").concat(n,");\n      int offset_d = (offset_h * ").concat(n," + offset_w) *\n        ").concat(this.getOutputDepthSize(),";\n      int in_d = d + offset_d;\n\n      float result = ").concat(this.getInputSamplingString(),";\n      setOutput(result);\n    }\n  ")}return(0,Te.Z)(e,[{key:"getHeightCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"}},{key:"getWidthCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"}},{key:"getDepthCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"}},{key:"getOutputDepthSize",value:function(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]}},{key:"getInputSamplingString",value:function(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}]),e}();var RG={kernelName:Gl,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockSize,o=r.dataFormat,s=a.shape[0],u=("NHWC"===o?a.shape[1]:a.shape[2])*i,c=("NHWC"===o?a.shape[2]:a.shape[3])*i,l=("NHWC"===o?a.shape[3]:a.shape[1])/(i*i),d=new AG("NHWC"===o?[s,u,c,l]:[s,l,u,c],i,o);return n.runWebGLProgram(d,[a],a.dtype)}},DG=(0,Te.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];(0,Se.Z)(this,e),this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=oV(this.outputShape.length);var o=t.filterHeight,s=t.filterWidth,u=t.outChannels/t.inChannels,c="",l="";r&&(c=a?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):i?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"\n          float activation(float x) {\n            ".concat(r,"\n          }\n        "),l="result = activation(result);");var d=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(c,"\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(u,";\n        int q = d2 - d1 * ").concat(u,";\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < ").concat(o,"; wR++) {\n          int xR = xRCorner + wR * dilations[0];\n\n          if (xR < 0 || xR >= inDims[0]) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(s,"; wC++) {\n            int xC = xCCorner + wC * dilations[1];\n\n            if (xC < 0 || xC >= inDims[1]) {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        ").concat(d,"\n        ").concat(l,"\n        setOutput(result);\n      }\n    ")})),OG=(0,Te.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];(0,Se.Z)(this,e),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=oV(this.outputShape.length);for(var o=t.outChannels/t.inChannels,s=t.padInfo.left,u=t.strideWidth,c=t.dilationWidth,l=t.filterHeight,d=t.filterWidth,f=d,h="\n      int xR; int xC; int xCOffset;\n      vec4 wTexel; vec4 previous; vec4 final;",p=0;p<d;p++)h+="\n          vec4 xTexelC".concat(2*p,";\n          int xTexelC").concat(2*p,"Ready;\n          vec4 xTexelC").concat(2*p+1,";\n          int xTexelC").concat(2*p+1,"Ready;\n          vec4 xC").concat(p,";");h+="\n    for (int r = 0; r < ".concat(l,"; r++) {\n      ");for(var v=0;v<d;v++)h+="\n          xTexelC".concat(2*v," = vec4(0.0);\n          xTexelC").concat(2*v,"Ready = 0;\n          xTexelC").concat(2*v+1," = vec4(0.0);\n          xTexelC").concat(2*v+1,"Ready = 0;\n          xC").concat(v," = vec4(0.0);");h+="\n        xR = xRCorner + r * dilations[0];\n        if (xR >=0 && xR < inDims[0]) {\n      ";for(var m=0;m<(f+1)/2;m++){var g=2*m;if(h+="\n          xC = xCCorner + ".concat(g*c,";\n          "),1===u){if(g<d&&(s%2===1?(h+="\n                xCOffset = xC + 1;\n                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(g,"Ready == 0) {\n                  xTexelC").concat(g," = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(g,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(g,"Ready = 1;\n                }\n              "),h+=1===c&&g>0?"\n                xC".concat(g," = vec4(xTexelC").concat(g-2,".zw, xTexelC").concat(g,".xy);\n                "):"\n                  xCOffset = xC + 1 - 2;\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                    previous = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      previous.zw = vec2(0.0);\n                    }\n\n                    xC".concat(g," = vec4(previous.zw, xTexelC").concat(g,".xy);\n                  } else {\n                    xC").concat(g," = vec4(0.0, 0.0, xTexelC").concat(g,".xy);\n                  }\n                  ")):h+="\n                if (xC >= 0 && xC < inDims[1] && xTexelC".concat(g,"Ready == 0) {\n                  xTexelC").concat(g," = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC").concat(g,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(g,"Ready = 1;\n                }\n\n                xC").concat(g," = xTexelC").concat(g,";\n                "),g+1<d)){var y=s%2===0?gc(c):c;c%2===0&&s%2===1||c%2!==0&&s%2!==1?(h+="\n                  xCOffset = xC + imod(pads[1], 2) + ".concat(y,";\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(g+1,"Ready == 0) {\n                    xTexelC").concat(g+1," = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      xTexelC").concat(g+1,".zw = vec2(0.0);\n                    }\n                    xTexelC").concat(g+1,"Ready = 1;\n                  }\n                  "),h+=c>1?"\n                    xCOffset -= 2;\n                    if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                     previous = getX(batch, xR, xCOffset, d1);\n                     xC".concat(g+1," = vec4(previous.zw, xTexelC").concat(g+1,".xy);\n                    } else {\n                     xC").concat(g+1," = vec4(0.0, 0.0, xTexelC").concat(g+1,".xy);\n                    }\n                    "):"\n                    xC".concat(g+1," = vec4(xTexelC").concat(g,".zw, xTexelC").concat(g+1,".xy);\n                    ")):h+=1===y?"\n                    xC".concat(g+1," = xTexelC").concat(g,";\n                    "):"\n                    xCOffset = xC + ".concat(y,";\n\n                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(g+1,"Ready == 0) {\n                      xTexelC").concat(g+1," = getX(batch, xR, xCOffset, d1);\n                      if (xCOffset + 1 >= inDims[1]) {\n                        xTexelC").concat(g+1,".zw = vec2(0.0);\n                      }\n                      xTexelC").concat(g+1,"Ready = 1;\n                    }\n\n                    xC").concat(g+1," = xTexelC").concat(g+1,";\n                    ")}}else g<d&&(s%2===1?(h+="\n                xCOffset = xC + 1 - strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(g,"Ready == 0) {\n                  xTexelC").concat(g," = getX(batch, xR, xCOffset, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(g,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(g,"Ready = 1;\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC").concat(g+1,"Ready == 0) {\n                  xTexelC").concat(g+1," = getX(batch, xR, xC + 1, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xC + 2 >= inDims[1]) {\n                    xTexelC").concat(g+1,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(g+1,"Ready = 1;\n                }\n\n                xC").concat(g," = vec4(xTexelC").concat(g,".zw, xTexelC").concat(g+1,".zw);\n              "),g+1<d&&(h+="\n                  final = vec4(0.0);\n                  xCOffset = xC + 1 + strides[1];\n                  if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xC".concat(g+1," = vec4(xTexelC").concat(g+1,".xy, final.xy);\n                "))):(h+="\n                if(xC >= 0 && xC < inDims[1] && xTexelC".concat(g,"Ready == 0) {\n                  xTexelC").concat(g," = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC").concat(g,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(g,"Ready = 1;\n                }\n\n                xCOffset = xC + strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(g+1,"Ready == 0) {\n                  xTexelC").concat(g+1," = getX(batch, xR, xCOffset, d1);\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(g+1,".zw = vec2(0.);\n                  }\n                  xTexelC").concat(g+1,"Ready = 1;\n                }\n\n                xC").concat(g," = vec4(\n                  xTexelC").concat(g,".xy, xTexelC").concat(g+1,".xy);\n              "),g+1<d&&(h+="\n                  xC".concat(g+1," = vec4(xTexelC").concat(g,".zw, xTexelC").concat(g+1,".zw);\n                "))));g<d&&(h+="\n            wTexel = getW(r, ".concat(g,", d1, q);\n            dotProd += xC").concat(g," * vec4(wTexel.xz, wTexel.xz);\n          "),g+1<d&&(h+="\n              wTexel = getW(r, ".concat(g+1,", d1, q);\n              dotProd += xC").concat(g+1," * vec4(wTexel.xz, wTexel.xz);\n            ")))}h+="\n    }\n  ",h+="\n      }\n    ";var b="",k="";r&&(b=a?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):i?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(r,"\n        }"),k="result = activation(result);");var w=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(b,"\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(o,";\n        int q = d2 - d1 * ").concat(o,";\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n        vec4 dotProd = vec4(0.000000000000001);\n\n        ").concat(h,"\n\n        vec4 result = dotProd - vec4(0.000000000000001);\n        ").concat(w,"\n        ").concat(k,"\n        setOutput(result);\n      }\n    ")}));var LG={kernelName:Hl,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,u=r.dilations,c=r.dimRoundingMode,l=u;null==l&&(l=[1,1]),kc(Vg(o,l),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(o," and dilations '").concat(l,"'")}));var d,f=Dg(a.shape,i.shape,o,l,s,c,!0);d=el().getBool("WEBGL_PACK_DEPTHWISECONV")&&f.strideWidth<=2&&f.outChannels/f.inChannels===1?new OG(f):new DG(f);var h=[[f.padInfo.top,f.padInfo.left],[f.strideHeight,f.strideWidth],[f.dilationHeight,f.dilationWidth],[f.inHeight,f.inWidth]];return n.runWebGLProgram(d,[a,i],"float32",h)}},FG=(0,Te.Z)((function e(t){(0,Se.Z)(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideHeight,r=t.strideWidth,a=t.padInfo.top,i=t.padInfo.left,o=t.outChannels/t.inChannels;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * ".concat(o," + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < ").concat(t.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(n," - ").concat(a,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(r," - ").concat(i,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),MG=(0,Te.Z)((function e(t){(0,Se.Z)(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a=t.strideHeight,i=t.strideWidth,o=n-1-t.padInfo.top,s=r-1-t.padInfo.left,u=t.outChannels/t.inChannels;this.userCode="\n      const ivec2 pads = ivec2(".concat(o,", ").concat(s,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < ").concat(n,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(n," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(r,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(i,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(r," - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < ").concat(u,"; dm++) {\n              int d2 = d1 * ").concat(u," + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}));var PG={kernelName:ql,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.dilations,u=r.pad,c=r.dimRoundingMode,l=r.filterShape,d=Dg(a.shape,l,o,s,u,c,!0),f=new FG(d);return n.runWebGLProgram(f,[a,i],"float32")}};var zG={kernelName:$l,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.strides,s=r.dilations,u=r.pad,c=r.dimRoundingMode,l=Dg(r.inputShape,i.shape,o,s,u,c,!0),d=new MG(l);return n.runWebGLProgram(d,[a,i],"float32")}},BG=(0,Te.Z)((function e(t){(0,Se.Z)(this,e),this.variableNames=["X"],this.outputShape=[t,t],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "}));var VG={kernelName:Kl,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=[].concat((0,me.Z)(r.shape),(0,me.Z)(r.shape)),i=Ic(r.shape),o=yW({inputs:{x:r},backend:n,attrs:{shape:[i]}}),s=new BG(i),u=n.runWebGLProgram(s,[o],o.dtype),c=yW({inputs:{x:u},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(u),c}},UG=(0,Te.Z)((function e(t){(0,Se.Z)(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var n=t.inHeight,r=t.inWidth,a=t.padInfo,i=t.strideHeight,o=t.strideWidth,s=t.filterHeight,u=t.filterWidth,c=t.dilationHeight,l=t.dilationWidth,d=a.top,f=a.left;this.userCode="\n      const ivec2 strides = ivec2(".concat(i,", ").concat(o,");\n      const ivec2 pads = ivec2(").concat(d,", ").concat(f,");\n      const float neg_infinity = -3.4e38;\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.w;\n        ivec2 outTopLeftCorner =\n            coords.yz * strides - pads;\n        int hBeg = outTopLeftCorner.x;\n        int wBeg = outTopLeftCorner.y;\n\n        float curVal = neg_infinity;\n        for (int h = 0; h < ").concat(s,"; h++) {\n          int hIn = hBeg + h * ").concat(c,";\n\n          if (hIn >= 0 && hIn < ").concat(n,") {\n            for (int w = 0; w < ").concat(u,"; w++) {\n              int wIn = wBeg + w * ").concat(l,";\n\n              if (wIn >= 0 && wIn < ").concat(r,") {\n                float xVal = getX(batch, hIn, wIn, d1);\n                float wVal = getW(h, w, d1);\n\n                float val = xVal + wVal;\n                if (val > curVal) {\n                  curVal = val;\n                }\n              }\n            }\n          }\n        }\n\n        float result = curVal;\n        setOutput(result);\n      }\n    ")}));var WG={kernelName:Xl,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=n.filter,s=a.strides,u=a.pad,c=a.dilations,l=_g(i.shape,o.shape,s,u,"NHWC",c),d=new UG(l),f=yW({inputs:{x:t=r.runWebGLProgram(d,[i,o],"float32")},backend:r,attrs:{shape:l.outShape}});return r.disposeIntermediateTensorInfo(t),f}};var jG={kernelName:ed,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t,a=gI(e.attrs.equation,r.length),i=a.allDims,o=a.summedDims,s=a.idDims;bI(i.length,s,r);for(var u=kI(o,s),c=u.path,l=u.steps,d=l.length,f=null,h=i.length,p=[],v=0;v<d;++v){var m,g=(0,Ht.Z)(l[v]);try{for(g.s();!(m=g.n()).done;){var y=m.value,b=yI(h,s[y]),k=b.permutationIndices,w=b.expandDims,x=void 0;wI(k)?x=r[y]:(x=CW({inputs:{x:r[y]},backend:n,attrs:{perm:k}}),p.push(x));for(var I=x.shape.slice(),S=0;S<w.length;++S)I.splice(w[S],0,1);Sc(x.shape,I)||(x=yW({inputs:{x:x},backend:n,attrs:{shape:I}}),p.push(x)),null===f?f=x:(f=mW({inputs:{a:x,b:f},backend:n}),p.push(f))}}catch(yhe){g.e(yhe)}finally{g.f()}v<d-1&&(c[v]>=0&&(f=EW({inputs:{x:f},backend:n,attrs:{axis:c[v]-(i.length-h),keepDims:!1}}),p.push(f)),h--)}for(var T=0,E=p;T<E.length;T++){var N=E[T];N!==f&&n.disposeIntermediateTensorInfo(N)}return f}},GG=cW({opSnippet:"return (x >= 0.0) ? x : (exp(x) - 1.0);",packedOpSnippet:"\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n"}),HG={kernelName:td,backendName:"webgl",kernelFunc:GG},qG={kernelName:nd,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.dy,a=t.y,i=el().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new YU("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",r.shape,a.shape):new KU("return (b >= 0.0) ? a : a * (b + 1.0);",r.shape,a.shape);return n.runWebGLProgram(i,[r,a],r.dtype)}},$G=lW({opSnippet:"return float(a == b);",packedOpSnippet:"\n  return vec4(equal(a, b));\n",dtype:"bool",cpuKernelImpl:AV}),KG={kernelName:ad,backendName:"webgl",kernelFunc:$G},XG=cW({opSnippet:'\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = '.concat(rI,";\n  float a1 = ").concat(aI,";\n  float a2 = ").concat(iI,";\n  float a3 = ").concat(oI,";\n  float a4 = ").concat(sI,";\n  float a5 = ").concat(uI,";\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n")}),YG={kernelName:rd,backendName:"webgl",kernelFunc:XG},QG=cW({opSnippet:uW+"\n  return exp(x);\n",packedOpSnippet:"\n  vec4 result = exp(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:RV,dtype:"float32"}),JG={kernelName:id,backendName:"webgl",kernelFunc:QG};function eH(e){var t=e.inputs,n=e.attrs,r=e.backend,a=n.dim,i=t.input,o=i.shape.length,s=i.shape.slice(),u=a;return a<0&&(kc(-(o+1)<=a,(function(){return"Axis must be in the interval [".concat(-(o+1),", ").concat(o,"]")})),u=o+a+1),s.splice(u,0,1),yW({inputs:{x:i},backend:r,attrs:{shape:s}})}var tH={kernelName:od,backendName:"webgl",kernelFunc:eH},nH="return exp(x) - 1.0;",rH=cW({opSnippet:nH,packedOpSnippet:nH,cpuKernelImpl:DV}),aH={kernelName:sd,backendName:"webgl",kernelFunc:rH},iH=(0,Te.Z)((function e(t,n,r){(0,Se.Z)(this,e),this.variableNames=["real","imag"];var a=n[1];this.outputShape=n;var i,o=r?"2.0 * ".concat(Math.PI):"-2.0 * ".concat(Math.PI),s=r?"".concat(a,".0"):"1.0";if("real"===t)i="return real * expR - imag * expI;";else{if("imag"!==t)throw new Error('FFT component must be either "real" or "imag", got '.concat(t,"."));i="return real * expI + imag * expR;"}this.userCode="\n      const float exponentMultiplier = ".concat(o,";\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        ").concat(i,"\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float(").concat(a,");\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < ").concat(a,"; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / ").concat(s,";\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    ")}));function oH(e,t,n){var r=n.texData.get(e.dataId),a=Ic(e.shape),i=e.shape[e.shape.length-1],o=yW({inputs:{x:e},backend:n,attrs:{shape:[a/i,i]}}),s=o.shape,u=new iH("real",s,t),c=new iH("imag",s,t),l=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:s},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:s}],d=n.runWebGLProgram(u,l,"float32"),f=n.runWebGLProgram(c,l,"float32"),h=eW({inputs:{real:d,imag:f},backend:n});n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f);var p=yW({inputs:{x:h},backend:n,attrs:{shape:e.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(h),p}var sH={kernelName:ud,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend;return oH(t.input,!1,n)}},uH=(0,Te.Z)((function e(t,n){(0,Se.Z)(this,e),this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=t,this.userCode="\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}));function cH(e){var t=e.backend,n=e.attrs,r=n.shape,a=n.value,i=n.dtype;if("string"===(i=i||Pc(a))){var o=Dc(i,Ic(r));return o.fill(a),t.makeTensorInfo(r,i,o)}var s=new uH(r,a),u=[[a]];return t.runWebGLProgram(s,[],i,u)}var lH,dH={kernelName:cd,backendName:"webgl",kernelFunc:cH},fH=(0,Te.Z)((function e(t){(0,Se.Z)(this,e),this.variableNames=["Image"],this.outputShape=[];var n=t[2];this.outputShape=t,this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n\n          int coordX = ".concat(n," - x - 1;\n          float outputValue;\n          if(coordX >= 0 && coordX < ").concat(n,") {\n            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);\n          } else {\n            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")})),hH={kernelName:ld,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.image,a=n,i=new fH(r.shape);return a.runWebGLProgram(i,[r],r.dtype)}},pH="return floor(x);",vH=cW({opSnippet:pH,packedOpSnippet:pH,cpuKernelImpl:OV}),mH={kernelName:dd,backendName:"webgl",kernelFunc:vH},gH=lW({opSnippet:"\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",packedOpSnippet:"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n",dtype:"int32"}),yH={kernelName:fd,backendName:"webgl",kernelFunc:gH},bH=(0,Te.Z)((function e(t){(0,Se.Z)(this,e),this.variableNames=["A"];var n=MB(),r=(0,ge.Z)(t,2),a=r[0],i=r[1];this.outputShape=t,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(".concat(i,".0, ").concat(a,".0);\n\n        vec4 values = ").concat(n.texture2D,"(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    ")})),kH=(0,Te.Z)((function e(t){(0,Se.Z)(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var n=MB(),r=(0,ge.Z)(t,2),a=r[0],i=r[1];this.outputShape=t,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2(".concat(i,".0, ").concat(a,".0);\n            vec4 values = ").concat(n.texture2D,"(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        ").concat(n.output," = result;\n      }\n    ")})),wH={kernelName:lh,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.pixels,i=r.numChannels,o="undefined"!==typeof HTMLVideoElement&&a instanceof HTMLVideoElement,s="undefined"!==typeof HTMLImageElement&&a instanceof HTMLImageElement,u=o?[a.videoWidth,a.videoHeight]:[a.width,a.height],c=(0,ge.Z)(u,2),l=c[0],d=c[1],f=[d,l],h=[d,l,i];if(s||o){var p=el().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");null!=lH&&p===xH||(xH=p,lH=document.createElement("canvas").getContext("2d",{willReadFrequently:xH})),lH.canvas.width=l,lH.canvas.height=d,lH.drawImage(a,0,0,l,d),a=lH.canvas}var v=n.makeTensorInfo(f,"int32");n.texData.get(v.dataId).usage=eB.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(v.dataId),a);var m=el().getBool("WEBGL_PACK")?new kH(h):new bH(h),g=n.runWebGLProgram(m,[v],"int32");return n.disposeData(v.dataId),g}},xH=el().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");var IH={kernelName:hh,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=n.filter,s=n.bias,u=n.preluActivationWeights,c=a.strides,l=a.pad,d=a.dataFormat,f=a.dilations,h=a.dimRoundingMode,p=a.activation,v=a.leakyreluAlpha,m=Wg(d),g=Dg(i.shape,o.shape,c,f,l,h,!1,m),y=[],b=null!=s,k=null!=u,w="leakyrelu"===p,x=function(){var e=[i,o],t=function(e,t){if("NCHW"===t&&1===e.shape.length&&1!==e.shape[0]){var n=yW({inputs:{x:e},backend:r,attrs:{shape:[e.shape[0],1,1]}});return y.push(n),n}return e};if(b&&e.push(t(s,d)),k&&e.push(t(u,d)),w){var n=r.makeTensorInfo([],"float32",Ph(v,"float32"));e.push(n),y.push(n)}return e};if(1!==g.filterHeight||1!==g.filterWidth||1!==g.dilationHeight||1!==g.dilationWidth||1!==g.strideHeight||1!==g.strideWidth||"SAME"!==g.padInfo.type&&"VALID"!==g.padInfo.type)if(g.strideWidth<=2&&"channelsLast"===m&&el().getBool("WEBGL_EXP_CONV")){var I=p?dW(p,!0):null,S=new tG(g,b,I,k,w),T=[[g.padInfo.top,g.padInfo.left],[g.strideHeight,g.strideWidth],[g.dilationHeight,g.dilationWidth],[g.inHeight,g.inWidth]],E=x();t=r.runWebGLProgram(S,E,"float32",T)}else if(el().getBool("WEBGL_CONV_IM2COL"))t=iG({x:i,filter:o,convInfo:g,backend:r,bias:s,activation:p,preluActivationWeights:u,leakyreluAlpha:v});else{var N=p?dW(p,!1):null,C=new Jj(g,b,N,k,w),Z=x();t=r.runWebGLProgram(C,Z,"float32")}else t=aG({x:i,filter:o,convInfo:g,backend:r,bias:s,activation:p,preluActivationWeights:u,leakyreluAlpha:v});var _=yW({inputs:{x:t},backend:r,attrs:{shape:g.outShape}});return y.push(t),y.forEach((function(e){return r.disposeIntermediateTensorInfo(e)})),_}};var SH={kernelName:ph,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.bias,s=t.preluActivationWeights,u=r.strides,c=r.pad,l=r.dilations,d=r.dimRoundingMode,f=r.activation,h=r.leakyreluAlpha,p=[],v=l;null==v&&(v=[1,1]),kc(Vg(u,v),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(u," and dilations '").concat(v,"'")}));var m,g=Dg(a.shape,i.shape,u,v,c,d,!0),y=el().getBool("WEBGL_PACK_DEPTHWISECONV")&&g.strideWidth<=2&&g.outChannels/g.inChannels===1,b=f?dW(f,y):null,k=[a,i],w=null!=o,x=null!=s,I="leakyrelu"===f;if(w&&k.push(o),x&&k.push(s),I){var S=n.makeTensorInfo([],"float32",Ph(h,"float32"));k.push(S),p.push(S)}m=y?new OG(g,w,b,x,I):new DG(g,w,b,x,I);var T=[[g.padInfo.top,g.padInfo.left],[g.strideHeight,g.strideWidth],[g.dilationHeight,g.dilationWidth],[g.inHeight,g.inWidth]],E=n.runWebGLProgram(m,k,"float32",T);return p.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),E}},TH=(0,Te.Z)((function e(t,n,r,a){(0,Se.Z)(this,e),this.sliceDim=t,this.strides=n,this.paramsShape=a,this.variableNames=["x","indices"],this.outputShape=r;for(var i=JB(r.length),o="\n    int index;",s=0;s<this.sliceDim;s++)o+="\n          index = round(getIndices(coords[0], ".concat(s,"));\n          out_of_bounds = out_of_bounds || index < 0;\n          out_of_bounds = out_of_bounds || index >= ").concat(this.paramsShape[s],";\n          flattenIndex += index * ").concat(this.strides[s],";");this.userCode="\n         void main() {\n          ".concat(i," coords = getOutputCoords();\n          int flattenIndex = 0;\n          bool out_of_bounds = false;\n\n          ").concat(o,"\n\n          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));\n        }\n      ")}));var EH={kernelName:vd,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.params,a=t.indices,i=a.shape,o=i[i.length-1],s=Ic(r.shape),u=eI(r,a),c=(0,ge.Z)(u,4),l=c[0],d=c[1],f=c[2],h=c[3],p=yW({inputs:{x:a},backend:n,attrs:{shape:[d,o]}}),v=yW({inputs:{x:r},backend:n,attrs:{shape:[Ic(r.shape)/f,f]}});if(n.shouldExecuteOnCPU([r,a])||"string"===r.dtype){var m=n.readSync(a.dataId),g=n.bufferSync(r),y=LV(m,g,r.dtype,d,o,f,h,r.shape,s);return n.makeTensorInfo(l,r.dtype,y.values)}var b=new TH(o,h,[d,f],r.shape),k=n.runWebGLProgram(b,[v,p],v.dtype),w=yW({inputs:{x:k},backend:n,attrs:{shape:l}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(k),w}},NH=(0,Te.Z)((function e(t,n){(0,Se.Z)(this,e),this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;var r=JB(this.rank),a=function(e,t){for(var n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[],a=0;a<e.length;a++)2===a?r.push("index"):r.push("".concat(n[a]));return r.join()}(t);this.userCode="\n      void main() {\n        ".concat(r," resRC = getOutputCoords();\n        int index = int(getIndices(resRC.x, resRC.z));\n        float inBounds = (index >= 0) && (index < ").concat(t[2],") ? 1.0 : 0.0;\n        setOutput(inBounds * getA(").concat(a,"));\n      }\n    ")}));function CH(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.indices,o=r.axis,s=r.batchDims,u=_c(o,a.shape)[0];if(el().get("DEBUG"))for(var c=n.readSync(i.dataId),l=a.shape[u],d=function(){var e=c[f];kc(e<=l-1&&e>=0,(function(){return"GatherV2: the index value ".concat(e," is not in [0, ").concat(l-1,"]")}))},f=0;f<c.length;++f)d();var h=NI(a,i,u,s),p=Ic(i.shape),v=[],m=yW({inputs:{x:a},backend:n,attrs:{shape:[h.batchSize,h.outerSize,h.dimSize,h.sliceSize]}}),g=yW({inputs:{x:i},backend:n,attrs:{shape:[h.batchSize,p/h.batchSize]}});v.push(m),v.push(g);var y=[h.batchSize,h.outerSize,p/h.batchSize,h.sliceSize];if(n.shouldExecuteOnCPU([a,i])||"string"===a.dtype){var b=n.bufferSync(g),k=n.bufferSync(m),w=FV(k,b,y);return v.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(h.outputShape,w.dtype,w.values)}var x=new NH(m.shape,y),I=n.runWebGLProgram(x,[m,g],m.dtype);v.push(I);var S=yW({inputs:{x:I},backend:n,attrs:{shape:h.outputShape}});return v.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),S}var ZH={kernelName:pd,backendName:"webgl",kernelFunc:CH},_H=lW({opSnippet:"return float(a > b);",packedOpSnippet:"\n  return vec4(greaterThan(a, b));\n",cpuKernelImpl:MV,dtype:"bool"}),AH={kernelName:md,backendName:"webgl",kernelFunc:_H},RH=lW({opSnippet:"return float(a >= b);",packedOpSnippet:"\n  return vec4(greaterThanEqual(a, b));\n",dtype:"bool",cpuKernelImpl:PV}),DH={kernelName:gd,backendName:"webgl",kernelFunc:RH};var OH={kernelName:bd,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend;return oH(t.input,!0,n)}},LH=cW({opSnippet:"return float(!isnan(x) && !isinf(x));",dtype:"bool"}),FH={kernelName:wd,backendName:"webgl",kernelFunc:LH},MH=cW({opSnippet:"return float(isinf(x));",dtype:"bool"}),PH={kernelName:xd,backendName:"webgl",kernelFunc:MH},zH=cW({opSnippet:"return float(isnan(x));",dtype:"bool"}),BH={kernelName:Id,backendName:"webgl",kernelFunc:zH},VH=lW({opSnippet:"return float(a < b);",packedOpSnippet:"\n  return vec4(lessThan(a, b));\n",cpuKernelImpl:zV,dtype:"bool"}),UH={kernelName:Td,backendName:"webgl",kernelFunc:VH},WH=lW({opSnippet:"return float(a <= b);",packedOpSnippet:"\n  return vec4(lessThanEqual(a, b));\n",cpuKernelImpl:BV,dtype:"bool"}),jH={kernelName:Ed,backendName:"webgl",kernelFunc:WH};var GH={kernelName:Nd,backendName:"webgl",kernelFunc:function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,i=n.num,o=VV(r,a,i);return t.makeTensorInfo([o.length],"float32",o)}},HH=cW({opSnippet:uW+"\n  return x < 0.0 ? 0./0. : log(x);\n",packedOpSnippet:"\n  vec4 result = log(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);\n  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);\n  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);\n  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);\n  return result;\n",cpuKernelImpl:UV}),qH={kernelName:Cd,backendName:"webgl",kernelFunc:HH},$H=cW({opSnippet:uW+"\n  return log(1.0 + x);\n"}),KH={kernelName:Zd,backendName:"webgl",kernelFunc:$H},XH=lW({opSnippet:"return float(a >= 1.0 && b >= 1.0);",packedOpSnippet:"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n",dtype:"bool"}),YH={kernelName:_d,backendName:"webgl",kernelFunc:XH},QH=cW({opSnippet:"return float(!(x >= 1.0));"}),JH={kernelName:Ad,backendName:"webgl",kernelFunc:QH},eq=lW({opSnippet:"return float(a >= 1.0 || b >= 1.0);",packedOpSnippet:"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n",dtype:"bool"}),tq={kernelName:Rd,backendName:"webgl",kernelFunc:eq},nq=(0,Te.Z)((function e(t,n,r,a,i){(0,Se.Z)(this,e),this.variableNames=["x"],this.outputShape=[];var o,s=n,u=t[3]-1;this.outputShape=t;var c="float(".concat(r,") + float(").concat(a,") * sum");o=.5===i?"inversesqrt(".concat(c,")"):1===i?"1.0/(".concat(c,")"):"exp(log(".concat(c,") * float(-").concat(i,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -".concat(s,"; j <= ").concat(s,"; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  ").concat(u,") {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * ").concat(o,";\n        setOutput(val);\n      }\n    ")})),rq=(0,Te.Z)((function e(t,n,r,a,i){(0,Se.Z)(this,e),this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var o,s=n,u=t[3]-1;this.outputShape=t;var c="float(".concat(r,") + float(").concat(a,") * sum");o=.5===i?"inversesqrt(".concat(c,")"):1===i?"1.0/(".concat(c,")"):"exp(log(".concat(c,") * float(-").concat(i,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < ".concat(this.outputShape[3],";\n        bool hasNextRow = c < ").concat(this.outputShape[2],";\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - ").concat(s,";\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - ").concat(s,"; j <= ").concat(s,"; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(").concat(u,"));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * ").concat(o,";\n        setOutput(result);\n      }\n    ")})),aq={kernelName:Dd,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.depthRadius,o=r.bias,s=r.alpha,u=r.beta,c=el().getBool("WEBGL_PACK_NORMALIZATION")?new rq(a.shape,i,o,s,u):new nq(a.shape,i,o,s,u);return n.runWebGLProgram(c,[a],a.dtype)}},iq=(0,Te.Z)((function e(t,n,r,a,i){(0,Se.Z)(this,e),this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=t,this.depth=t[3],this.depthRadius=n,this.bias=r,this.alpha=a,this.beta=i,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < ".concat(this.depth,"; ++d) {\n          int depthBegin = int(max(0.0, float(d - ").concat(n,")));\n          int depthEnd = int(min(float(").concat(this.depth,"),\n              float(d + ").concat(n," + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = ").concat(this.depth,";\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float(").concat(a,") * norm + float(").concat(r,");\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float(").concat(a,")\n                * float(").concat(i,")\n                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * ").concat(i,");\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    ")})),oq={kernelName:Od,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.y,o=t.dy,s=r.depthRadius,u=r.bias,c=r.alpha,l=r.beta,d=new iq(a.shape,s,u,c,l);return n.runWebGLProgram(d,[a,i,o],a.dtype)}};function sq(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.reductionIndices,o=r.keepDims,s=a.shape.length,u=_c(i,a.shape),c=u,l=Vy(c,s),d=null!=l,f=n.shouldExecuteOnCPU([a]),h=a;if(d){if(f){for(var p=n.texData.get(h.dataId).values,v=new Array(s),m=0;m<v.length;m++)v[m]=a.shape[l[m]];var g=gU(p,a.shape,a.dtype,l,v);h=n.makeTensorInfo(v,a.dtype),n.texData.get(h.dataId).values=g}else h=TW(a,l,n);c=Wy(c.length,s)}By("max",c,s);var y,b=Py(h.shape,c),k=(0,ge.Z)(b,2),w=k[0],x=k[1],I=w;if(o&&(I=zy(w,u)),f){var S=n.texData.get(h.dataId).values,T=WV(S,Ic(x),I,a.dtype);y=n.makeTensorInfo(I,a.dtype),n.texData.get(y.dataId).values=T}else y=function(e,t,n,r){var a=Ic(t),i=yW({inputs:{x:e},attrs:{shape:[Ic(e.shape)/a,a]},backend:r}),o=xW(i,e.dtype,"max",r),s=yW({inputs:{x:o},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(o),s}(h,x,I,n);return d&&n.disposeIntermediateTensorInfo(h),y}var uq={kernelName:Ld,backendName:"webgl",kernelFunc:sq},cq=lW({opSnippet:$U+"\n  return max(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(max(a, b));\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  "+XU+"\n  return result;\n",cpuKernelImpl:jV}),lq={kernelName:Fd,backendName:"webgl",kernelFunc:cq};var dq={kernelName:Md,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;LB(a,"maxPool");var i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode;kc(Vg(o,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(o," and dilations '").concat(1,"'")}));var c=Ag(a.shape,i,o,1,s,u);if(1===c.filterWidth&&1===c.filterHeight&&Sc(c.inShape,c.outShape))return QU({inputs:{x:a},backend:n});var l=new lj(c,"max",!1);return n.runWebGLProgram(l,[a],a.dtype)}};var fq={kernelName:zd,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.filterSize,o=r.strides,s=r.pad,u=r.dataFormat,c=r.dimRoundingMode,l=Rg(a.shape,i,o,[1,1,1],s,c,u),d=new dj(l,"max",!1);return n.runWebGLProgram(d,[a],a.dtype)}},hq=(0,Te.Z)((function e(t){(0,Se.Z)(this,e),this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var n=t.strideHeight,r=t.strideWidth,a=t.dilationHeight,i=t.effectiveFilterHeight,o=t.effectiveFilterWidth,s=i-1-t.padInfo.top,u=o-1-t.padInfo.left,c=i*o-1;this.userCode="\n      const ivec2 pads = ivec2(".concat(s,", ").concat(u,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(i,";\n          wR += ").concat(a,") {\n          float dyR = float(dyRCorner + wR) / ").concat(n,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(o,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(r,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = ").concat(c," - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * ").concat(o," + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),pq=(0,Te.Z)((function e(t){(0,Se.Z)(this,e),this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var n=t.strideDepth,r=t.strideHeight,a=t.strideWidth,i=t.dilationDepth,o=t.dilationHeight,s=t.dilationWidth,u=t.effectiveFilterDepth,c=t.effectiveFilterHeight,l=t.effectiveFilterWidth,d=u-1-t.padInfo.front,f=c-1-t.padInfo.top,h=l-1-t.padInfo.left,p=u*c*l-1;this.userCode="\n      const ivec3 pads = ivec3(".concat(d,", ").concat(f,", ").concat(h,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(u,";\n           wD += ").concat(i,") {\n          float dyD = float(dyDCorner + wD) / ").concat(n,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(t.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(c,";\n              wR += ").concat(o,") {\n            float dyR = float(dyRCorner + wR) / ").concat(r,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(l,";\n                wC += ").concat(s,") {\n              float dyC = float(dyCCorner + wC) / ").concat(a,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = ").concat(p," -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * ").concat(c," * ").concat(l," +\n                  wR * ").concat(l," + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}));var vq={kernelName:Bd,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=r.filterSize,s=r.strides,u=r.pad,c=r.dimRoundingMode,l=Rg(i.shape,o,s,[1,1,1],u,c),d=new dj(l,"max",!0),f=n.runWebGLProgram(d,[i],i.dtype),h=new pq(l),p=n.runWebGLProgram(h,[a,f],i.dtype);return n.disposeIntermediateTensorInfo(f),p}};var mq={kernelName:Pd,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=i;LB([i,t.output],"maxPoolGrad");var s=r.filterSize,u=r.strides,c=r.pad,l=r.dimRoundingMode,d=Ag(o.shape,s,u,1,c,l),f=new lj(d,"max",!0),h=n.runWebGLProgram(f,[o],o.dtype),p=new hq(d),v=n.runWebGLProgram(p,[a,h],o.dtype);return n.disposeIntermediateTensorInfo(h),v}};var gq={kernelName:Vd,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=n.filterSize,o=n.strides,s=n.pad,u=n.includeBatchInIndex,c=r;kc(4===a.shape.length,(function(){return"Error in maxPool: input must be rank 4 but got rank ".concat(a.shape.length,".")}));var l=[1,1];kc(Vg(o,l),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(o," and dilations '").concat(l,"'")}));var d=Ag(a.shape,i,o,l,s),f=function(e,t,n,r){var a=new lj(n,"max",!1),i=r.runWebGLProgram(a,[e],"float32");return a=new lj(n,"max",!0,!0,t),[i,r.runWebGLProgram(a,[e],"float32")]}(a,u,d,c),h=(0,ge.Z)(f,2);return[h[0],h[1]]}};var yq={kernelName:Ud,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=n.keepDims,o=n.axis,s=r,u=a.shape.length,c=_c(o,a.shape),l=c,d=Vy(l,u),f=null!=d,h=s.shouldExecuteOnCPU([a]),p=[],v=a;if(f){if(h){for(var m=s.texData.get(v.dataId).values,g=new Array(u),y=0;y<g.length;y++)g[y]=a.shape[d[y]];var b=gU(m,a.shape,a.dtype,d,g);v=s.makeTensorInfo(g,a.dtype),s.texData.get(v.dataId).values=b}else v=TW(a,d,s);p.push(v),l=Wy(l.length,u)}By("sum",l,u);var k=Py(v.shape,l),w=(0,ge.Z)(k,2),x=w[0],I=w[1],S=x;i&&(S=zy(x,c));for(var T=function(e,t,n,r){var a=Ic(t),i=yW({inputs:{x:e},attrs:{shape:[Ic(e.shape)/a,a]},backend:r}),o=xW(i,"float32","mean",r),s=yW({inputs:{x:o},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(o),s}(v,I,S,s),E=0,N=p;E<N.length;E++){var C=N[E];s.disposeIntermediateTensorInfo(C)}return T}};var bq={kernelName:Wd,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims,s=a.shape.length,u=_c(i,a.shape),c=u,l=Vy(c,s),d=a;null!=l&&(d=CW({inputs:{x:a},backend:n,attrs:{perm:l}}),c=Wy(c.length,a.shape.length)),By("min",c,s);var f,h=Py(d.shape,c),p=(0,ge.Z)(h,2),v=p[0],m=yW({inputs:{x:d},backend:n,attrs:{shape:[-1,Ic(p[1])]}}),g=xW(m,m.dtype,"min",n);return f=yW(o?{inputs:{x:g},backend:n,attrs:{shape:zy(v,u)}}:{inputs:{x:g},backend:n,attrs:{shape:v}}),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),null!=l&&n.disposeIntermediateTensorInfo(d),f}},kq=lW({opSnippet:$U+"\n  return min(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(min(a, b));\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  "+XU+"\n  return result;\n",cpuKernelImpl:GV}),wq={kernelName:jd,backendName:"webgl",kernelFunc:kq},xq=(0,Te.Z)((function e(t,n,r){(0,Se.Z)(this,e),this.variableNames=["x"],this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var a=t.length,i=JB(a),o=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a),c="reflect"===r?0:1;this.userCode=1!==a?"\n      ".concat(i," start = ").concat(i,"(").concat(o,");\n      ").concat(i," end = ").concat(i,"(").concat(s,");\n\n      void main() {\n        ").concat(i," outC = getOutputCoords();\n        for (int i = 0; i < ").concat(a,"; i++) {\n          if (outC[i] < start[i]) {\n            outC[i] = start[i] * 2 - outC[i] - ").concat(c,";\n          } else if(outC[i] >= end[i]) {\n            outC[i] = (end[i] - 1) * 2 - outC[i] + ").concat(c,";\n          }\n        }\n        ").concat(i," coords = outC - start;\n        setOutput(getX(").concat(u,"));\n      }\n    "):"\n        int start = ".concat(o,";\n        int end = ").concat(s,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start) {\n            outC = start * 2 - outC - ").concat(c,";\n          } else if(outC >= end) {\n            outC = (end - 1) * 2 - outC + ").concat(c,";\n          }\n          setOutput(getX(outC - start));\n        }\n      ")})),Iq=(0,Te.Z)((function e(t,n,r){(0,Se.Z)(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var a=t.length,i=JB(a),o=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=kU("rc",a),c=kU("source",a),l="".concat(u[a-1]," < ").concat(this.outputShape[a-1]),d=1===a?"source":"vec2(".concat(c.slice(-2).join(),")"),f="reflect"===r?0:1,h="";if(1===a){var p="\n        ".concat(i," source = rc;\n        if (source < start) {\n          source = start * 2 - source - ").concat(f,";\n        } else if (source >= end) {\n          source = (end - 1) * 2 - source + ").concat(f,";\n        }\n        source -= start;\n      ");h="\n        ".concat(i," rc = outputLoc;\n        ").concat(p,"\n        result[0] = getChannel(getX(").concat(c.join(),"), ").concat(d,");\n        ").concat(u[a-1]," += 1;\n        if(").concat(l,") {\n          ").concat(p,"\n          result[1] = getChannel(getX(").concat(c.join(),"), ").concat(d,");\n        }\n      ")}else{var v="\n        ".concat(i," source = rc;\n        ").concat(i," lt = ").concat(i,"(lessThan(source, start));\n        ").concat(i," gte = ").concat(i,"(greaterThanEqual(source, end));\n        ").concat(i," orig = 1 - (lt + gte);\n        source = orig * source +\n                lt * (start * 2 - source - ").concat(f,") +\n                gte * ((end - 1) * 2 - source + ").concat(f,");\n        source -= start;\n      ");h="\n        ".concat(i," rc = outputLoc;\n        ").concat(v,"\n        result[0] = getChannel(getX(").concat(c.join(),"), ").concat(d,");\n        ").concat(u[a-1]," += 1;\n        if(").concat(l,") {\n          ").concat(v,"\n          result[1] = getChannel(getX(").concat(c.join(),"), ").concat(d,");\n        }\n        rc = outputLoc;\n        ").concat(u[a-2]," += 1;\n        if(").concat(u[a-2]," < ").concat(this.outputShape[a-2],") {\n          ").concat(v,"\n          result[2] = getChannel(getX(").concat(c.join(),"), ").concat(d,");\n          ").concat(u[a-1]," += 1;\n          if(").concat(l,") {\n            ").concat(v,"\n            result[3] = getChannel(getX(").concat(c.join(),"), ").concat(d,");\n          }\n        }\n      ")}this.userCode="\n      const ".concat(i," start = ").concat(i,"(").concat(o,");\n      const ").concat(i," end = ").concat(i,"(").concat(s,");\n\n      void main() {\n        ").concat(i," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(h,"\n        setOutput(result);\n      }\n    ")})),Sq={kernelName:Gd,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.paddings,o=r.mode,s=el().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Iq(a.shape,i,o):new xq(a.shape,i,o);return n.runWebGLProgram(s,[a],a.dtype)}},Tq=lW({opSnippet:"if (b == 0.0) return NAN;\n  return mod(a, b);",packedOpSnippet:"\n  vec4 result = mod(a, b);\n  bvec4 isNaN = equal(b, vec4(0.0));\n  "+XU+"\n  return result;\n"}),Eq={kernelName:Hd,backendName:"webgl",kernelFunc:Tq},Nq=(0,Te.Z)((function e(t,n,r){(0,Se.Z)(this,e),this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[t,r],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < ".concat(n-1,"; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float(").concat(n-1,"));\n      }\n    ")})),Cq=lW({opSnippet:"\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",packedOpSnippet:"\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n",checkOutOfBounds:!0}),Zq={kernelName:Jl,backendName:"webgl",kernelFunc:Cq},_q="return a - b;",Aq=lW({opSnippet:_q,packedOpSnippet:_q,supportsComplex:!0,cpuKernelImpl:pU}),Rq={kernelName:Qf,backendName:"webgl",kernelFunc:Aq};function Dq(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,i=_c([r.dim],a.shape),o=sq({inputs:{x:a},backend:n,attrs:{reductionIndices:i,keepDims:!1}}),s=zy(o.shape,i),u=yW({inputs:{x:o},backend:n,attrs:{shape:s}}),c=Aq({inputs:{a:a,b:u},backend:n}),l=QG({inputs:{x:c},backend:n}),d=EW({inputs:{x:l},backend:n,attrs:{axis:i,keepDims:!1}}),f=yW({inputs:{x:d},backend:n,attrs:{shape:s}}),h=Cq({inputs:{a:l,b:f},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),h}var Oq={kernelName:zf,backendName:"webgl",kernelFunc:Dq};var Lq={kernelName:qd,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,i=r.numSamples,o=r.seed,s=r.normalized,u=s?a:Dq({inputs:{logits:a},backend:n,attrs:{dim:a.shape.length-1}}),c=u.shape[0],l=u.shape[1],d=new Nq(c,l,i),f=[[o]],h=n.runWebGLProgram(d,[u],"int32",f);return s||n.disposeIntermediateTensorInfo(u),h}},Fq=CU+"\n  return -x;\n",Mq="\n  vec4 result = -x;\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n";var Pq={kernelName:Kd,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=n.x;if(r.shouldExecuteOnCPU([a])){var i=r.texData.get(a.dataId),o=qV(i.values,a.shape,a.dtype),s=(0,ge.Z)(o,2),u=s[0],c=s[1];return r.makeTensorInfo(c,a.dtype,u)}return t=el().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new VU(a.shape,Mq):new NU(a.shape,Fq),r.runWebGLProgram(t,[a],a.dtype)}},zq=Gw;var Bq={kernelName:Yd,backendName:"webgl",kernelFunc:function(e){vh("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,c=n.readSync(a.dataId),l=n.readSync(i.dataId),d=zq(c,l,o,s,u).selectedIndices;return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}},Vq=Hw;var Uq={kernelName:Qd,backendName:"webgl",kernelFunc:function(e){vh("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,c=r.padToMaxOutputSize,l=n.readSync(a.dataId),d=n.readSync(i.dataId),f=Vq(l,d,o,s,u,c),h=f.selectedIndices,p=f.validOutputs;return[n.makeTensorInfo([h.length],"int32",new Int32Array(h)),n.makeTensorInfo([],"int32",new Int32Array([p]))]}},Wq=qw;var jq={kernelName:Jd,backendName:"webgl",kernelFunc:function(e){vh("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,c=r.softNmsSigma,l=n.readSync(a.dataId),d=n.readSync(i.dataId),f=Wq(l,d,o,s,u,c),h=f.selectedIndices,p=f.selectedScores;return[n.makeTensorInfo([h.length],"int32",new Int32Array(h)),n.makeTensorInfo([p.length],"float32",new Float32Array(p))]}},Gq=(0,Te.Z)((function e(t,n,r,a){(0,Se.Z)(this,e),this.variableNames=["indices"],this.outputShape=[t,n],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float(".concat(a,"), float(").concat(r,"),\n                      float(index == coords.y)));\n      }\n    ")})),Hq={kernelName:tf,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,i=r.dtype,o=r.depth,s=r.onValue,u=r.offValue,c=Ic(a.shape),l=new Gq(c,o,s,u),d=yW({inputs:{x:a},backend:n,attrs:{shape:[c]}}),f=n.runWebGLProgram(l,[d],i);n.disposeIntermediateTensorInfo(d);var h=yW({inputs:{x:f},backend:n,attrs:{shape:[].concat((0,me.Z)(a.shape),[o])}});return n.disposeIntermediateTensorInfo(f),h}};function qq(e){var t=e.inputs,n=e.backend,r=t.x;if("complex64"===r.dtype){var a=Rj({inputs:{input:r},backend:n}),i=qq({inputs:{x:a},backend:n}),o=$j({inputs:{input:r},backend:n}),s=qq({inputs:{x:o},backend:n}),u=eW({inputs:{real:i,imag:s},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),u}return cH({attrs:{shape:r.shape,dtype:r.dtype,value:"string"===r.dtype?"":0},backend:n})}var $q={kernelName:uh,backendName:"webgl",kernelFunc:qq};var Kq={kernelName:ef,backendName:"webgl",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=n.x;if("string"===a.dtype)throw new Error("onesLike is not supported under string dtype");if("complex64"===a.dtype){var i=Rj({inputs:{input:a},backend:r}),o=e({inputs:{x:i},backend:r}),s=$j({inputs:{input:a},backend:r}),u=qq({inputs:{x:s},backend:r}),c=eW({inputs:{real:o,imag:u},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(u),c}return cH({attrs:{shape:a.shape,dtype:a.dtype,value:1},backend:r})}};var Xq={kernelName:nf,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.axis;if(1===t.length)return eH({inputs:{input:t[0]},backend:n,attrs:{dim:r}});var a=t[0].shape,i=t[0].dtype;t.forEach((function(e){wc(a,e.shape,"All tensors passed to stack must have matching shapes"),kc(i===e.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var o=[],s=t.map((function(e){var t=eH({inputs:{input:e},backend:n,attrs:{dim:r}});return o.push(t),t})),u=Yj({inputs:s,backend:n,attrs:{axis:r}});return o.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),u}},Yq=(0,Te.Z)((function e(t,n,r){(0,Se.Z)(this,e),this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var a=t.length,i=JB(a),o=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a);this.userCode=1!==a?"\n      ".concat(i," start = ").concat(i,"(").concat(o,");\n      ").concat(i," end = ").concat(i,"(").concat(s,");\n\n      void main() {\n        ").concat(i," outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(value);\n        } else {\n          ").concat(i," coords = outC - start;\n          setOutput(getX(").concat(u,"));\n        }\n      }\n    "):"\n        int start = ".concat(o,";\n        int end = ").concat(s,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(value);\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      ")})),Qq=(0,Te.Z)((function e(t,n,r){(0,Se.Z)(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));for(var a=t.length,i=JB(a),o=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=kU("rc",a),c=kU("source",a),l="".concat(u[a-1]," < ").concat(this.outputShape[a-1]),d=1===a?"source":"vec2(".concat(c.slice(-2).join(),")"),f=["".concat(i," rc = outputLoc;"),"".concat(u[a-1]," += 1;\n       if(").concat(l,") {\n      "),1===a?"":"}\n       rc = outputLoc;\n       ".concat(u[a-2]," += 1;\n       if(").concat(u[a-2]," < ").concat(this.outputShape[a-2],") {"),1===a?"":"  ".concat(u[a-1]," += 1;\n         if(").concat(l,") {")],h=1===a?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",p="",v=0,m=1===a?2:4;v<m;v++)p+="\n        ".concat(f[v],"\n        if (").concat(h,") {\n          result[").concat(v,"] = float(value);\n        } else {\n          ").concat(i," source = rc - start;\n          result[").concat(v,"] = getChannel(getX(").concat(c.join(),"), ").concat(d,");\n        }\n      ");p+=1===a?"} ":"}}",this.userCode="\n      const ".concat(i," start = ").concat(i,"(").concat(o,");\n      const ").concat(i," end = ").concat(i,"(").concat(s,");\n\n      void main() {\n        ").concat(i," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(p,"\n        setOutput(result);\n      }\n    ")})),Jq=function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.paddings,o=r.constantValue;if(0===Ic(a.shape)){var s=i.map((function(e,t){return e[0]+a.shape[t]+e[1]}));return cH({backend:n,attrs:{shape:s,value:o,dtype:a.dtype}})}var u=el().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Qq(a.shape,i,o):new Yq(a.shape,i,o),c=[[o]];return n.runWebGLProgram(u,[a],a.dtype,c)},e$={kernelName:rf,backendName:"webgl",kernelFunc:Jq},t$=lW({opSnippet:"\n  if(a < 0.0 && floor(b) < b){\n    return NAN;\n  }\n  if (b == 0.0) {\n    return 1.0;\n  }\n  return (round(mod(b, 2.0)) != 1) ?\n      pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",packedOpSnippet:"\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  bvec4 isNaN1 = lessThan(a, vec4(0.0));\n  bvec4 isNaN2 = lessThan(floor(b), b);\n  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);\n  "+XU+"\n  return result;\n"}),n$={kernelName:af,backendName:"webgl",kernelFunc:t$};var r$={kernelName:sf,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.axis,s=a.keepDims,u=i.shape.length,c=[],l=_c(o,i.shape),d=l,f=Vy(d,u),h=i;if(null!=f&&(h=CW({inputs:{x:i},backend:r,attrs:{perm:f}}),d=Wy(d.length,u),c.push(h)),By("prod",d,u),r.shouldExecuteOnCPU([h])){var p=r.texData.get(h.dataId).values,v=KV(h.shape,h.dtype,p,d),m=v.outVals,g=v.outShape,y=v.outDtype;t=r.makeTensorInfo(g,y,m)}else{var b=Py(h.shape,d),k=(0,ge.Z)(b,2),w=k[0],x=Ic(k[1]),I=yW({inputs:{x:h},backend:r,attrs:{shape:[-1,x]}}),S=xW(I,pp(i.dtype),"prod",r);t=yW({inputs:{x:S},backend:r,attrs:{shape:w}}),c.push(I),c.push(S)}if(s){c.push(t);var T=zy(t.shape,l);t=yW({inputs:{x:t},backend:r,attrs:{shape:T}})}return c.forEach((function(e){return r.disposeIntermediateTensorInfo(e)})),t}};var a$={kernelName:uf,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.paramsNestedSplits,i=t.paramsDenseValues,o=t.indices,s=r.outputRaggedRank,u=a.map((function(e){return n.readSync(e.dataId)})),c=a.map((function(e){return e.shape})),l=n.readSync(i.dataId),d=n.readSync(o.dataId),f=XV(u,c,l,i.shape,i.dtype,d,o.shape,s),h=(0,ge.Z)(f,3),p=h[0],v=h[1],m=h[2],g=p.map((function(e){return n.makeTensorInfo([e.length],"int32",e)})),y=n.makeTensorInfo(m,i.dtype,v);return g.concat([y])}};var i$={kernelName:cf,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.starts,a=t.limits,i=t.deltas,o=n.readSync(r.dataId),s=n.readSync(a.dataId),u=n.readSync(i.dataId),c=YV(o,r.shape,r.dtype,s,a.shape,u,i.shape),l=(0,ge.Z)(c,2),d=l[0],f=l[1];return[n.makeTensorInfo([d.length],"int32",d),n.makeTensorInfo([f.length],r.dtype,f)]}};var o$={kernelName:lf,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.shape,i=t.values,o=t.defaultValue,s=t.rowPartitionTensors,u=r.rowPartitionTypes,c=n.readSync(a.dataId),l=n.readSync(i.dataId),d=n.readSync(o.dataId),f=s.map((function(e){return n.readSync(e.dataId)})),h=s.map((function(e){return e.shape})),p=QV(c,a.shape,l,i.shape,i.dtype,d,o.shape,f,h,u),v=(0,ge.Z)(p,2),m=v[0],g=v[1];return n.makeTensorInfo(m,i.dtype,g)}},s$=function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,i=n.step,o=n.dtype,s=JV(r,a,i,o);return t.makeTensorInfo([s.length],o,s)},u$={kernelName:df,backendName:"webgl",kernelFunc:s$},c$=cW({opSnippet:"return 1.0 / x;"}),l$={kernelName:hf,backendName:"webgl",kernelFunc:c$},d$=cW({opSnippet:CU+"\n  return (x < 0.0) ? 0.0 : x;\n",packedOpSnippet:"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),f$={kernelName:pf,backendName:"webgl",kernelFunc:d$},h$=cW({opSnippet:CU+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",packedOpSnippet:"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),p$={kernelName:kf,backendName:"webgl",kernelFunc:h$},v$=(0,Te.Z)((function e(t,n,r,a,i){(0,Se.Z)(this,e),this.variableNames=["A"],this.outputShape=[];var o=(0,ge.Z)(t,4),s=o[0],u=o[1],c=o[2],l=o[3];this.outputShape=[s,n,r,l];var d,f=[a&&n>1?u-1:u,a&&r>1?c-1:c],h=[a&&n>1?n-1:n,a&&r>1?r-1:r];d=i?"(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(f[0]/h[0],",\n          ").concat(f[1]/h[1],");\n      const vec2 inputShapeRC = vec2(").concat(u,".0, ").concat(c,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(d,";\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    ")})),m$=(0,Te.Z)((function e(t,n,r,a,i){(0,Se.Z)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var o=(0,ge.Z)(t,4),s=o[0],u=o[1],c=o[2],l=o[3];this.outputShape=[s,n,r,l];var d,f=[a&&n>1?u-1:u,a&&r>1?c-1:c],h=[a&&n>1?n-1:n,a&&r>1?r-1:r];d=i?"(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(f[0]/h[0],",\n          ").concat(f[1]/h[1],",\n          ").concat(f[1]/h[1],");\n      const vec3 inputShapeRC = vec3(").concat(u,".0, ").concat(c,".0,\n                                     ").concat(c,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ").concat(d,";\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(l-1,";\n        bool hasNextRow = coords.z < ").concat(r-1,";\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    ")}));var g$={kernelName:yf,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=r.alignCorners,o=r.halfPixelCenters,s=r.size,u=(0,ge.Z)(s,2),c=u[0],l=u[1],d=el().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new m$(a.shape,c,l,i,o):new v$(a.shape,c,l,i,o);return n.runWebGLProgram(d,[a],"float32")}},y$=(0,Te.Z)((function e(t,n,r){(0,Se.Z)(this,e),this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;var a=(0,ge.Z)(n,3),i=a[1],o=a[2],s=(0,ge.Z)(t,3),u=s[1],c=s[2],l=[r&&u>1?i-1:i,r&&c>1?o-1:o],d=[r&&u>1?u-1:u,r&&c>1?c-1:c],f=l[0]/d[0],h=l[1]/d[1],p=1/f,v=1/h,m=2*Math.ceil(p)+2,g=2*Math.ceil(v)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(f,");\n        const float widthScale = float(").concat(h,");\n\n        const float invHeightScale = float(").concat(p,");\n        const float invWidthScale = float(").concat(v,");\n\n        const int winHeight = int(").concat(m,");\n        const int winWidth = int(").concat(g,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(u,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(c,") {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), ").concat(i-1,".0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), ").concat(o-1,".0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")}));var b$={kernelName:bf,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=t.dy,o=r.alignCorners,s=new y$(i.shape,a.shape,o);return n.runWebGLProgram(s,[i],i.dtype)}},k$=(0,Te.Z)((function e(t,n,r,a,i){(0,Se.Z)(this,e),this.variableNames=["A"],this.outputShape=[];var o=(0,ge.Z)(t,4),s=o[0],u=o[1],c=o[2],l=o[3];this.outputShape=[s,n,r,l];var d,f=[a&&n>1?u-1:u,a&&r>1?c-1:c],h=[a&&n>1?n-1:n,a&&r>1?r-1:r],p=a?"0.5":"0.0";d=i?"max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(f[0]/h[0],",\n          ").concat(f[1]/h[1],");\n      const vec2 inputShapeRC = vec2(").concat(u,".0, ").concat(c,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(d,";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(p,")));\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    ")})),w$=(0,Te.Z)((function e(t,n,r,a,i){(0,Se.Z)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var o=(0,ge.Z)(t,4),s=o[0],u=o[1],c=o[2],l=o[3];this.outputShape=[s,n,r,l];var d,f=[a&&n>1?u-1:u,a&&r>1?c-1:c],h=[a&&n>1?n-1:n,a&&r>1?r-1:r],p=a?"0.5":"0.0";d=i?"max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(f[0]/h[0],",\n          ").concat(f[1]/h[1],",\n          ").concat(f[1]/h[1],");\n      const vec3 inputShapeRC = vec3(").concat(u,".0, ").concat(c,".0,\n                                     ").concat(c,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ").concat(d,";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec3 sourceNearestRC = ivec3(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(p,")));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(l-1,";\n        bool hasNextRow = coords.z < ").concat(r-1,";\n\n        vec4 newValue = vec4(\n          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),\n          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);\n\n        setOutput(newValue);\n      }\n    ")}));var x$={kernelName:mf,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=r.alignCorners,o=r.halfPixelCenters,s=r.size,u=(0,ge.Z)(s,2),c=u[0],l=u[1],d=el().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new w$(a.shape,c,l,i,o):new k$(a.shape,c,l,i,o);return n.runWebGLProgram(d,[a],a.dtype)}},I$=(0,Te.Z)((function e(t,n,r){(0,Se.Z)(this,e),this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;var a=(0,ge.Z)(n,3),i=a[1],o=a[2],s=(0,ge.Z)(t,3),u=s[1],c=s[2],l=[r&&u>1?i-1:i,r&&c>1?o-1:o],d=[r&&u>1?u-1:u,r&&c>1?c-1:c],f=l[0]/d[0],h=l[1]/d[1],p=1/f,v=1/h,m=2*Math.ceil(p)+2,g=2*Math.ceil(v)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(f,");\n        const float widthScale = float(").concat(h,");\n\n        const float invHeightScale = float(").concat(p,");\n        const float invWidthScale = float(").concat(v,");\n\n        const int winHeight = int(").concat(m,");\n        const int winWidth = int(").concat(g,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(u,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(c,") {\n              continue;\n            }\n\n            float sourceFracRow =\n              float(").concat(l[0],") *\n                (float(dyR) / float(").concat(d[0],"));\n\n            float sourceFracCol =\n                float(").concat(l[1],") *\n                  (float(dyC) / float(").concat(d[1],"));\n\n            int sourceNearestRow = int(min(\n                float(int(").concat(i,") - 1),\n                ").concat(r," ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int(").concat(o,") - 1),\n                ").concat(r," ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")}));var S$={kernelName:gf,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=t.dy,o=r.alignCorners,s=new I$(i.shape,a.shape,o);return n.runWebGLProgram(s,[i],i.dtype)}},T$=(0,Te.Z)((function e(t,n){(0,Se.Z)(this,e),this.variableNames=["x"];var r=t.length;if(r>4)throw new Error("WebGL backend: Reverse of rank-".concat(r," tensor is not yet supported"));if(this.outputShape=t,1!==r){var a=t.map((function(e,r){return function(e){return-1!==n.indexOf(e)&&1!==t[e]?"".concat(t[e]," - coords[").concat(e,"] - 1"):"coords[".concat(e,"]")}(r)})).join(","),i=JB(r);this.userCode="\n      void main() {\n        ".concat(i," coords = getOutputCoords();\n        setOutput(getX(").concat(a,"));\n      }\n    ")}else this.userCode="\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX(".concat(t[0]," - coord - 1));\n        }\n      ")})),E$=(0,Te.Z)((function e(t,n){(0,Se.Z)(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var r=t.length;if(r>4)throw new Error("WebGL backend: Reverse of rank-".concat(r," tensor is not yet supported"));this.outputShape=t;var a=kU("rc",r),i="".concat(a[r-1]," + 1 < ").concat(this.outputShape[r-1]),o="".concat(a[r-2]," + 1 < ").concat(this.outputShape[r-2]),s=JB(r);function u(e){var r=t.map((function(r,a){return function(e,r){return-1!==n.indexOf(e)&&1!==t[e]?"".concat(t[e]," - ").concat(r[e]," - 1"):"".concat(r[e])}(a,e)})),a=r.join(","),i=r.slice(-2).join(",");return"getChannel(getX(".concat(a,"), vec2(").concat(i,"))")}this.userCode=1===r?"\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX(".concat(t[0]," - rc - 1),\n            ").concat(t[0]," - rc - 1);\n          if(").concat(i,"){\n              result.g = getChannel(getX(").concat(t[0]," - (rc  + 1) - 1),\n                ").concat(t[0]," - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      "):"\n        void main() {\n          ".concat(s," rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = ").concat(function(e){return u(e)}(a.slice()),";\n          if(").concat(i,"){\n            result.g = ").concat(function(e){return e[r-1]="("+e[r-1]+" + 1)",u(e)}(a.slice()),";\n          }\n          if(").concat(o,") {\n            result.b = ").concat(function(e){return e[r-2]="("+e[r-2]+" + 1)",u(e)}(a.slice()),";\n            if(").concat(i,") {\n              result.a = ").concat(function(e){return e[r-1]="("+e[r-1]+" + 1)",e[r-2]="("+e[r-2]+" + 1)",u(e)}(a.slice()),";\n            }\n          }\n          setOutput(result);\n        }\n    ")}));var N$={kernelName:wf,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.dims,o=a.shape.length,s=_c(i,a.shape);if(0===o)return QU({inputs:{x:a},backend:n});var u=el().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new E$(a.shape,s):new T$(a.shape,s);return n.runWebGLProgram(u,[a],a.dtype)}},C$=(0,Te.Z)((function e(t,n){(0,Se.Z)(this,e),this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];var r=t[1],a=t[2];this.outputShape=t;var i="";i="number"===typeof n?"float outputValue = ".concat(n.toFixed(2),";"):"\n        vec3 fill = vec3(".concat(n.join(","),");\n        float outputValue = fill[coords[3]];"),this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n          int y = coords[1];\n          float coordXFloat = (float(x) - params[0]) * params[3] -\n            (float(y) - params[1]) * params[2];\n          float coordYFloat = (float(x) - params[0]) * params[2] +\n            (float(y) - params[1]) * params[3];\n          int coordX = int(round(coordXFloat + params[0]));\n          int coordY = int(round(coordYFloat + params[1]));\n          ".concat(i,"\n          if(coordX >= 0 && coordX < ").concat(a," && coordY >= 0 && coordY < ").concat(r,") {\n            outputValue = getImage(coords[0], coordY, coordX, coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")})),Z$={kernelName:dh,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.image,i=n.radians,o=n.fillValue,s=n.center,u=r,c=new C$(a.shape,o),l=$x(s,a.shape[1],a.shape[2]),d=(0,ge.Z)(l,2),f=[[d[0],d[1],Math.sin(i),Math.cos(i)]];return u.runWebGLProgram(c,[a],a.dtype,f)}},_$=cW({opSnippet:"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n"}),A$={kernelName:xf,backendName:"webgl",kernelFunc:_$},R$=cW({opSnippet:"return inversesqrt(x);",cpuKernelImpl:eU}),D$={kernelName:If,backendName:"webgl",kernelFunc:R$},O$=(0,Te.Z)((function e(t,n,r,a,i,o){var s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];(0,Se.Z)(this,e),this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;var u=JB(i.length),c=JB(o.length),l="";1===r?l="i":2===r&&(l="i, j");var d="getIndices(".concat(l,")"),f="";1===a?f="i":2===a&&(f="i, coords[1]");var h="getUpdates(".concat(f,")"),p="";s&&(p="coords[0], coords[1]");var v="getDefaultValue(".concat(p,")"),m=n>1?"strides[j]":"strides";this.userCode="\n        ".concat(u," strides = ").concat(u,"(").concat(i,");\n\n        void main() {\n          ").concat(c," coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < ").concat(t,"; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < ").concat(n,"; j++) {\n              int index = round(").concat(d,");\n              flattenedIndex += index * ").concat(m,";\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += ").concat(h,";\n              found = true;\n            }\n          }\n          setOutput(mix(").concat(v,", sum, float(found)));\n        }\n      ")})),L$=(0,Te.Z)((function e(t,n,r,a,i,o){var s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];(0,Se.Z)(this,e),this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=o;var u=JB(i.length),c=JB(o.length),l="";1===r?l="i":2===r&&(l="i, j");var d="getIndices(".concat(l,")"),f="";1===a?f="i":2===a&&(f="i, coords[1]");var h="getUpdates(".concat(f,")"),p="";s&&(p="coords[0], coords[1]");var v="getDefaultValue(".concat(p,")"),m=n>1?"strides[j]":"strides",g=n>1?"strides[j + 1]":"strides";this.userCode="\n        ".concat(u," strides = ").concat(u,"(").concat(i,");\n\n        void main() {\n          ").concat(c," coords = getOutputCoords();\n          vec4 sum = vec4(0.);\n          vec4 found = vec4(0.);\n          for (int i = 0; i < ").concat(t,"; i+=2) {\n            ivec2 flattenedIndex = ivec2(0);\n            for (int j = 0; j < ").concat(n,"; j+=2) {\n              ivec4 index = round(").concat(d,");\n              flattenedIndex += index.xz * ").concat(m,";\n              if (j + 1 < ").concat(n,") {\n                flattenedIndex += index.yw * ").concat(g,";\n              }\n            }\n            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||\n                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {\n              vec4 updVals = ").concat(h,";\n              if (flattenedIndex[0] == coords[0]) {\n                sum.xy += updVals.xy;\n                found.xy = vec2(1.);\n              } else if (flattenedIndex[0] == coords[0] + 1) {\n                sum.zw += updVals.xy;\n                found.zw = vec2(1.);\n              }\n              if (flattenedIndex[1] == coords[0]) {\n                sum.xy += updVals.zw;\n                found.xy = vec2(1.);\n              } else if (flattenedIndex[1] == coords[0] + 1) {\n                sum.zw += updVals.zw;\n                found.zw = vec2(1.);\n              }\n            }\n          }\n          setOutput(mix(").concat(v,", sum, found));\n        }\n      ")}));var F$={kernelName:Sf,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,i=t.updates,o=r.shape,s=Jk(0,a,o),u=s.sliceRank,c=s.numUpdates,l=s.sliceSize,d=s.strides,f=s.outputSize,h=[f/l,l];if(0===f)return n.makeTensorInfo(o,a.dtype);var p,v=yW({inputs:{x:a},backend:n,attrs:{shape:[c,u]}}),m=yW({inputs:{x:i},backend:n,attrs:{shape:[c,l]}}),g=n.makeTensorInfo([],"float32",new Float32Array([0]));p=el().getBool("WEBGL_PACK")?new L$(c,u,v.shape.length,m.shape.length,d,h):new O$(c,u,v.shape.length,m.shape.length,d,h);var y=n.runWebGLProgram(p,[m,v,g],m.dtype),b=yW({inputs:{x:y},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(g),b}},M$=(0,Te.Z)((function e(t,n,r,a){(0,Se.Z)(this,e),this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[t,r];var i="for (int i = 0; i < ".concat(Math.ceil(Math.log2(n+1)),"; ++i) { if (left >= right) break;"),o=2===el().getNumber("WEBGL_VERSION")?"while (left < right) {":i,s="left"===a?"<":"<=";this.userCode="\n       int findBound(int batch, float value) {\n         int left = 0;\n         int right = numInputs;\n         int mid;\n         ".concat(o,"\n           mid = (left + right) / 2;\n           if (getSortedSequence(batch, mid) ").concat(s," value) {\n             left = mid + 1;\n           } else {\n             right = mid;\n           }\n         }\n         return right;\n       }\n\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int valueIndex = coords[1];\n\n         float value = getValues(batch, valueIndex);\n\n         setOutput(float(findBound(batch, value)));\n       }\n     ")}));var P$={kernelName:Ef,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.sortedSequence,i=t.values,o=r.side,s=new M$(a.shape[0],a.shape[1],i.shape[1],o),u=[[a.shape[1]]];return n.runWebGLProgram(s,[a,i],"int32",u)}},z$=(0,Te.Z)((function e(t,n,r){var a,i;if((0,Se.Z)(this,e),this.variableNames=["c","a","b"],this.outputShape=n,r>4)throw Error("Where for rank ".concat(r," is not yet supported"));if(1===r)i="resRC",a="resRC";else{for(var o=["resRC.x","resRC.y","resRC.z","resRC.w"],s=[],u=[],c=0;c<n.length;c++)u.push("".concat(o[c])),c<t&&s.push("".concat(o[c]));a=s.join(),i=u.join()}var l=JB(r);this.userCode="\n      void main() {\n        ".concat(l," resRC = getOutputCoords();\n        float cVal = getC(").concat(a,");\n        if (cVal >= 1.0) {\n          setOutput(getA(").concat(i,"));\n        } else {\n          setOutput(getB(").concat(i,"));\n        }\n      }\n    ")}));var B$={kernelName:Nf,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.condition,a=t.t,i=t.e,o=new z$(r.shape.length,a.shape,a.shape.length);return n.runWebGLProgram(o,[r,a,i],hp(a.dtype,i.dtype))}},V$=cW({opSnippet:"\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = ".concat(tI,";\n  float scale = ").concat(nI,";\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n")}),U$={kernelName:Cf,backendName:"webgl",kernelFunc:V$},W$=cW({opSnippet:uW+"\n  return 1.0 / (1.0 + exp(-1.0 * x));\n",packedOpSnippet:"\n  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:nU}),j$={kernelName:Df,backendName:"webgl",kernelFunc:W$},G$=cW({opSnippet:"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n"}),H$={kernelName:Rf,backendName:"webgl",kernelFunc:G$},q$=cW({opSnippet:uW+"\n  return sin(x);\n",packedOpSnippet:"\n  vec4 result = sin(x);\n  bvec4 isNaN = isnan(x);\n  ".concat(XU,"\n  return result;\n")}),$$={kernelName:_f,backendName:"webgl",kernelFunc:q$},K$=cW({opSnippet:"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n"}),X$={kernelName:Af,backendName:"webgl",kernelFunc:K$},Y$=cW({opSnippet:"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n"}),Q$={kernelName:Of,backendName:"webgl",kernelFunc:Y$},J$={kernelName:Mf,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockShape,o=r.paddings;kc(a.shape.length<=4,(function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"}));var s=i.reduce((function(e,t){return e*t})),u=[[0,0]];u.push.apply(u,(0,me.Z)(o));for(var c=1+i.length;c<a.shape.length;++c)u.push([0,0]);var l=[],d=Jq({inputs:{x:a},backend:n,attrs:{paddings:u,constantValue:0}}),f=Kx(d.shape,i,s,!1),h=Xx(f.length,i.length,!1),p=Yx(d.shape,i,s,!1),v=yW({inputs:{x:d},backend:n,attrs:{shape:f}}),m=CW({inputs:{x:v},backend:n,attrs:{perm:h}}),g=yW({inputs:{x:m},backend:n,attrs:{shape:p}});return l.push(d),l.push(v),l.push(m),l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),g}};var eK={kernelName:Bf,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.indices,a=t.values,i=t.denseShape,o=t.defaultValue;if(1!==i.shape.length)throw new Error("Dense shape must be a vector, saw:\n         ".concat(i.shape));if(2!==r.shape.length)throw new Error("Indices must be a matrix, saw:\n         ".concat(r.shape));if(1!==a.shape.length)throw new Error("Values must be a vector, saw:\n         ".concat(a.shape));if(0!==o.shape.length)throw new Error("Default value must be a scalar, saw:\n        ".concat(o.shape));var s=n.readSync(r.dataId),u=n.readSync(a.dataId),c=n.readSync(i.dataId),l=n.readSync(o.dataId)[0],d=iU(s,r.shape,r.dtype,u,a.dtype,c,l),f=(0,ge.Z)(d,5),h=f[0],p=f[1],v=f[2],m=f[3],g=f[4];return[n.makeTensorInfo(p,r.dtype,h),n.makeTensorInfo([p[0]],a.dtype,v),n.makeTensorInfo([m.length],"bool",new Uint8Array(m.map((function(e){return Number(e)})))),n.makeTensorInfo([g.length],r.dtype,new Int32Array(g))]}};var tK={kernelName:Vf,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.inputIndices,a=t.inputShape,i=t.newShape;if(2!==r.shape.length)throw new Error("Input indices should be a matrix but received shape ".concat(r.shape));if(1!==a.shape.length)throw new Error("Input shape should be a vector but received shape ".concat(a.shape));if(1!==i.shape.length)throw new Error("Target shape should be a vector but received shape ".concat(i.shape));var o=Array.from(n.readSync(a.dataId)),s=n.readSync(r.dataId),u=Array.from(n.readSync(i.dataId)),c=oU(s,r.shape,r.dtype,o,u),l=(0,ge.Z)(c,3),d=l[0],f=l[1],h=l[2];return[n.makeTensorInfo(f,r.dtype,d),n.makeTensorInfo([h.length],i.dtype,new Int32Array(h))]}};var nK={kernelName:Uf,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.data,a=t.indices,i=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n              ".concat(a.shape));if(1!==i.shape.length)throw new Error("Segment ids should be a vector but received shape\n              ".concat(i.shape));var o=n.readSync(r.dataId),s=n.readSync(a.dataId),u=n.readSync(i.dataId),c=sU(o,r.shape,r.dtype,s,u,!0),l=(0,ge.Z)(c,2),d=l[0],f=l[1];return n.makeTensorInfo(f,r.dtype,d)}};var rK={kernelName:Wf,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.data,a=t.indices,i=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n             ".concat(a.shape));if(1!==i.shape.length)throw new Error("Segment ids should be a vector but received shape\n             ".concat(i.shape));var o=n.readSync(r.dataId),s=n.readSync(a.dataId),u=n.readSync(i.dataId),c=sU(o,r.shape,r.dtype,s,u),l=(0,ge.Z)(c,2),d=l[0],f=l[1];return n.makeTensorInfo(f,r.dtype,d)}};var aK={kernelName:jf,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.sparseIndices,i=t.sparseValues,o=t.defaultValue,s=r.outputShape,u=Jk(0,a,s),c=u.sliceRank,l=u.numUpdates,d=u.sliceSize,f=u.strides,h=u.outputSize;if("string"===i.dtype){var p=n.bufferSync(a),v=n.bufferSync(i),m=Uh(n.readSync(o.dataId)[0]),g=tU(p,v,s,h,d,l,c,f,m,false);return n.makeTensorInfo(s,g.dtype,g.values)}var y=new O$(l,c,a.shape.length,i.shape.length,f,[h,1],false),b=n.runWebGLProgram(y,[i,a,o],i.dtype),k=yW({inputs:{x:b},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(b),k}};var iK={kernelName:Pf,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.numOrSizeSplits,o=_c(r.axis,a.shape)[0],s=II(a,i,o),u=a.shape.length,c=new Array(u).fill(0),l=a.shape.slice();return s.map((function(e){var t=(0,me.Z)(l);t[o]=e;var r=Tj({inputs:{x:a},backend:n,attrs:{begin:c,size:t}});return c[o]+=e,r}))}},oK="return sqrt(x);",sK=cW({opSnippet:oK,packedOpSnippet:oK,cpuKernelImpl:uU}),uK={kernelName:Lf,backendName:"webgl",kernelFunc:sK},cK={kernelName:Hf,backendName:"webgl",kernelFunc:cW({opSnippet:"return x * x;"})},lK="return (a - b) * (a - b);",dK=lW({opSnippet:lK,packedOpSnippet:lK}),fK={kernelName:Gf,backendName:"webgl",kernelFunc:dK};var hK={kernelName:qf,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;if("string"!==a.dtype)throw new Error("Input must be of datatype string");var i=CI(n.readSync(a.dataId)),o=cU(i,"string",r);return n.makeTensorInfo(a.shape,"string",o)}};var pK={kernelName:ch,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=CU+"\n    return x > 0.0 ? 1.0 : float(".concat(n.alpha,");\n  "),o=new NU(a.shape,i);return r.runWebGLProgram(o,[a],a.dtype)}},vK=(0,Te.Z)((function e(t,n,r){(0,Se.Z)(this,e),this.variableNames=["x"],this.outputShape=r;var a=r.length,i=JB(r.length),o=JB(r.length),s="";if(1===a)s="coords * strides + begin";else{var u=0;s=r.map((function(e,t){return u++,1===r.length?"coords * strides[".concat(t,"] + begin[").concat(t,"]"):"coords[".concat(u-1,"] * strides[").concat(t,"] + begin[").concat(t,"]")})).join(",")}this.userCode="\n      ".concat(i," begin = ").concat(i,"(").concat(t,");\n      ").concat(i," strides = ").concat(i,"(").concat(n,");\n\n      void main() {\n        ").concat(o," coords = getOutputCoords();\n        setOutput(getX(").concat(s,"));\n      }\n    ")}));var mK={kernelName:$f,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.begin,s=a.end,u=a.strides,c=a.beginMask,l=a.endMask,d=a.ellipsisMask,f=a.newAxisMask,h=a.shrinkAxisMask,p=mg(i.shape,o,s,u,c,l,d,f,h),v=p.finalShapeSparse,m=p.finalShape,g=p.isIdentity,y=p.sliceDim0,b=p.isSimpleSlice,k=p.begin,w=p.end,x=p.strides;if(g)t=yW({inputs:{x:i},backend:r,attrs:{shape:m}});else if(y||b){kc(i.shape.length>=1,(function(){return"Input must have rank at least 1, got: ".concat(i.shape.length)}));var I=fg(k,w,x),S=Tj({inputs:{x:i},backend:r,attrs:{begin:k,size:I}});t=yW({inputs:{x:S},backend:r,attrs:{shape:m}}),r.disposeIntermediateTensorInfo(S)}else{if(r.shouldExecuteOnCPU([i])){var T=r.readSync(i.dataId),E=Yv(i.shape,i.dtype,T),N=lU(v,E,x,k);t=r.makeTensorInfo(m,i.dtype,N.values)}else{var C=new vK(k,x,v);t=r.runWebGLProgram(C,[i],i.dtype)}}var Z=yW({inputs:{x:t},backend:r,attrs:{shape:m}});return r.disposeIntermediateTensorInfo(t),Z}};var gK={kernelName:Kf,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=r.separator,i=r.nGramWidths,o=r.leftPad,s=r.rightPad,u=r.padWidth,c=r.preserveShortSequences,l=t.data,d=t.dataSplits,f=n.readSync(l.dataId),h=n.readSync(d.dataId),p=dU(f,h,a,i,o,s,u,c),v=(0,ge.Z)(p,2),m=v[0],g=v[1];return[n.makeTensorInfo([m.length],"string",m),n.makeTensorInfo(d.shape,"int32",g)]}};var yK={kernelName:Xf,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.skipEmpty,a=t.input,i=t.delimiter;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(1!==a.shape.length)throw new Error("Input must be a vector, got shape: ".concat(a.shape));if(0!==i.shape.length)throw new Error("Delimiter must be a scalar, got shape: ".concat(i.shape));var o=n.readSync(a.dataId),s=n.readSync(i.dataId)[0],u=fU(o,s,r),c=(0,ge.Z)(u,3),l=c[0],d=c[1],f=c[2],h=d.length;return[n.makeTensorInfo([h,2],"int32",l),n.makeTensorInfo([h],"string",d),n.makeTensorInfo([2],"int32",new Int32Array(f))]}};var bK={kernelName:Yf,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.numBuckets,a=t.input;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(r<=0)throw new Error("Number of buckets must be at least 1");var i=n.readSync(a.dataId),o=hU(i,r);return n.makeTensorInfo(a.shape,"int32",o)}},kK=cW({opSnippet:"return tan(x);"}),wK={kernelName:Jf,backendName:"webgl",kernelFunc:kK},xK=cW({opSnippet:"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n"}),IK={kernelName:eh,backendName:"webgl",kernelFunc:xK};var SK={kernelName:Tf,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.tensor,i=t.indices,o=t.updates;!function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(r);var s=Jk(0,i,a.shape),u=s.sliceRank,c=s.numUpdates,l=s.sliceSize,d=s.strides,f=s.outputSize,h=[f/l,l];if(0===f)return n.makeTensorInfo(a.shape,i.dtype);var p=yW({inputs:{x:i},backend:n,attrs:{shape:[c,u]}}),v=yW({inputs:{x:o},backend:n,attrs:{shape:[c,l]}}),m=yW({inputs:{x:a},backend:n,attrs:{shape:h}}),g=new O$(c,u,p.shape.length,v.shape.length,d,h,!1,!0),y=n.runWebGLProgram(g,[v,p,m],m.dtype),b=yW({inputs:{x:y},backend:n,attrs:{shape:a.shape}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),b}},TK=(0,Te.Z)((function e(t,n){(0,Se.Z)(this,e),this.variableNames=["A"];for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[a]*n[a];this.outputShape=r,this.rank=r.length;var i=JB(this.rank),o=function(e){var t=e.length;if(t>5)throw Error("Tile for rank ".concat(t," is not yet supported"));if(1===t)return"imod(resRC, ".concat(e[0],")");for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[],a=0;a<e.length;a++)r.push("imod(".concat(n[a],", ").concat(e[a],")"));return r.join()}(t);this.userCode="\n      void main() {\n        ".concat(i," resRC = getOutputCoords();\n        setOutput(getA(").concat(o,"));\n      }\n    ")}));function EK(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.reps;if("string"===a.dtype||a.shape.length>5){var o=n.readSync(a.dataId),s="string"===a.dtype?o.map((function(e){return Uh(e)})):o,u=Yv(a.shape,a.dtype,s),c=vU(u,i);return n.makeTensorInfo(c.shape,c.dtype,c.values)}var l=new TK(a.shape,i);return n.runWebGLProgram(l,[a],a.dtype)}var NK={kernelName:th,backendName:"webgl",kernelFunc:EK},CK=(0,Te.Z)((function e(t){(0,Se.Z)(this,e),this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=t,this.userCode="\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // We compare elements pair-wise within a group of size 2 * inc.\n         // The comparing rule for each group alternates between ascending\n         // and descending. Within each group, we compare each pair at\n         // positions i and i+inc. To decide whether an element at position i\n         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than\n         // inc, it is in the first half of the group, we denote it as x0,\n         // otherwise we denote it as x1.\n         // For example, as shown in the Bitonic top K paper referenced above,\n         // Figure5(a) shows that element[1] is in the\n         // second half of the group when group size is 2, but it is in the\n         // first half of the group when group size is 4.\n\n         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;\n         int i = isFirstInPair ? elemIdx : elemIdx - inc;\n\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));\n         float x0 = i0 < n ? getX(batch, i0) : negativeInf;\n         float x1 = i1 < n ? getX(batch, i1) : negativeInf;\n\n         // Denotes which direction indices are in (ascending or descending).\n         bool reverse = imod(elemIdx, 2 * dir) >= dir;\n         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);\n         if (reverse == isGreater) { // Elements in opposite order of direction\n           int iTemp = i0;\n           i0 = i1;\n           i1 = iTemp;\n         }\n         if (isFirstInPair) {\n            setOutput(float(i0));\n         } else {\n            setOutput(float(i1));\n         }\n       }\n     "})),ZK=(0,Te.Z)((function e(t){(0,Se.Z)(this,e),this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=t,this.userCode="\n    void main() {\n         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // The output size is half of the previous size.\n         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),\n         // we only need to output the indices at positions |, the indices at\n         // positions _ can be thrown away, see Figure5(b) After Phase 2\n         // (Merge phase) in the Bitonic Top K paper referenced above.\n         // For example, the paper shows we only need to output the orange bars.\n         // The output sequence should look like this | | | | | | | |.\n         // Because the sequence is halved, to map the output index back\n         // to the previous sequence to find the corresponding value,\n         // we need to double the index. When we double the index,\n         // we basically interpolate a position, so 2i looks like\n         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position\n         // of each 2k positions by - elemIdx % k. E.g. for output at\n         // index 4,5,6,7, we want to get the corresponding element at\n         // original index 8,9,10,11, for output at index 8,9,10,11,\n         // we want to get the corresponding element at original index\n         // 16,17,18,19, so on and so forth.\n\n         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));\n\n         float x0 = getX(batch, i0);\n         float x1 = i1 < n ? getX(batch, i1) : x0;\n\n         setOutput(x0 >= x1 ? float(i0) : float(i1));\n       }\n     "}));function _K(e,t){null!==t&&e.disposeIntermediateTensorInfo(t)}function AK(e){for(var t=1;t<e;)t*=2;return t}var RK={kernelName:nh,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.k,o=r.sorted,s=el().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),u=el().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),c=a.shape,l=c[c.length-1];if(n.shouldExecuteOnCPU([a])||l<s||i>u){var d=n.readSync(a.dataId),f=mU(d,c,a.dtype,i,o),h=(0,ge.Z)(f,2),p=h[0],v=h[1];return[n.makeTensorInfo(p.shape,p.dtype,p.values),n.makeTensorInfo(v.shape,v.dtype,v.values)]}if(0===i)return c[c.length-1]=0,[n.makeTensorInfo(c,a.dtype,[]),n.makeTensorInfo(c,"int32",[])];if(1===l)return[a,cH({attrs:{shape:c,dtype:"int32",value:0},backend:n})];var m=n.texData.get(a.dataId),g=null!==m&&m.isPacked,y=g?n.unpackTensor(a):a,b=Ic(c)/l,k=yW({inputs:{x:y},attrs:{shape:[b,l]},backend:n});g&&_K(n,y);for(var w=AK(i),x=AK(l),I=null,S=function(){return null===I?[k,k]:[k,I]},T=function(e,t,r){var a=S(),i=new CK(r),o=[[l],[null===I?1:0],[Number.NEGATIVE_INFINITY],[e],[t]],s=I;I=n.runWebGLProgram(i,a,"int32",o),_K(n,s)},E=1;E<w;E*=2)for(var N=2*E,C=E;C>=1;C/=2)T(N,C,[b,x]);for(var Z=x;Z>w;Z/=2){var _=S(),A=new ZK([b,Z/2]),R=[[l],[null===I?1:0],[w]],D=I;I=n.runWebGLProgram(A,_,"int32",R),_K(n,D);for(var O=w/2,L=2*O,F=O;F>=1;F/=2)T(L,F,I.shape)}var M=I;I=Tj({inputs:{x:I},backend:n,attrs:{begin:0,size:[b,i]}}),_K(n,M);var P=CH({inputs:{x:k,indices:I},backend:n,attrs:{axis:1,batchDims:1}});_K(n,k);var z=c.slice(0,-1);z.push(i),M=I,I=yW({inputs:{x:I},attrs:{shape:z},backend:n}),_K(n,M);var B=P;return P=yW({inputs:{x:P},attrs:{shape:z},backend:n}),_K(n,B),[P,I]}},DK=(0,Te.Z)((function e(t,n,r,a,i,o){(0,Se.Z)(this,e),this.variableNames=["Image","Transforms"],this.outputShape=o;var s,u="nearest"===r?1:2;switch(a){case"constant":default:s=1;break;case"reflect":s=2;break;case"wrap":s=3;break;case"nearest":s=4}this.userCode="\n            float mapCoord(float outCoord, float len) {\n              float inCoord = outCoord;\n              if(".concat(s," == 2) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    if (inCoord < sz2) {\n                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +\n                      inCoord;\n                    }\n                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    inCoord -= sz2 * float(int(float(inCoord / sz2)));\n                    if (inCoord >= len) {\n                      inCoord = sz2 - inCoord - 1.0;\n                    }\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (").concat(s," == 3) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord -= len * float(int(float(inCoord / sz)));\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (").concat(s," == 4) {\n                return clamp(outCoord, 0.0, len - 1.0);\n              } else {\n                return outCoord;\n              }\n            }\n\n            float readWithFillValue(int batch, int coordY, int coordX,\n              int channel) {\n              float outputValue;\n              if (0 <= coordY && coordY < ").concat(t," && 0 <= coordX && coordX < ").concat(n,") {\n                  outputValue = getImage(batch, coordY, coordX, channel);\n              } else {\n                outputValue = float(").concat(i,");\n              }\n              return outputValue;\n            }\n\n            void main() {\n              ivec4 coords = getOutputCoords();\n              float outputValue;\n              int batch = coords[0];\n              int x = coords[2];\n              int y = coords[1];\n              int channel = coords[3];\n              float xf = float(x);\n              float yf = float(y);\n              float a1 = getTransforms(batch, 0);\n              float a2 = getTransforms(batch, 1);\n              float a3 = getTransforms(batch, 2);\n              float b1 = getTransforms(batch, 3);\n              float b2 = getTransforms(batch, 4);\n              float b3 = getTransforms(batch, 5);\n              float c1 = getTransforms(batch, 6);\n              float c2 = getTransforms(batch, 7);\n              float projection = c1 * xf + c2 * yf + 1.0;\n              if (projection == 0.0) {\n                outputValue = float(").concat(i,");\n              } else {\n                float inX = (a1 * xf + a2 * yf + a3) / projection;\n                float inY = (b1 * xf + b2 * yf + b3) / projection;\n                float mapX = mapCoord(inX, float(").concat(n,"));\n                float mapY = mapCoord(inY, float(").concat(t,"));\n\n                if (").concat(u," == 1) {\n                  int coordY = int(round(mapY));\n                  int coordX = int(round(mapX));\n                  outputValue = readWithFillValue(batch, coordY, coordX,\n                    channel);\n                } else {\n                  float yFloor = floor(mapY);\n                  float xFloor = floor(mapX);\n                  float yCeil = yFloor + 1.0;\n                  float xCeil = xFloor + 1.0;\n                  float valueYFloor = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);\n                  float valueYCeil = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);\n                  outputValue = (yCeil - mapY) * valueYFloor +\n                  (mapY - yFloor) * valueYCeil;\n                }\n              }\n              setOutput(outputValue);\n            }\n        ")}));var OK={kernelName:rh,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,i=t.transforms,o=r.interpolation,s=r.fillMode,u=r.fillValue,c=r.outputShape,l=(0,ge.Z)(a.shape,4),d=l[0],f=l[1],h=l[2],p=l[3],v=null!=c?c:[f,h],m=(0,ge.Z)(v,2),g=m[0],y=m[1],b=new DK(f,h,o,s,u,[d,g,y,p]);return n.runWebGLProgram(b,[a,i],"float32")}};var LK={kernelName:ih,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=n.axis,i=t.x;LB(i,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");var o=r.readSync(i.dataId),s=yU(o,a,i.shape,i.dtype),u=s.outputValues,c=s.outputShape,l=s.indices;return[r.makeTensorInfo(c,i.dtype,u),r.makeTensorInfo([l.length],"int32",l)]}};var FK={kernelName:oh,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.value,i=r.axis;i<0&&(i+=a.shape.length);for(var o=a,s=o.shape.length,u=a.shape[i],c=new Array(s-1),l=0,d=0;d<s;d++)d!==i&&(c[l++]=o.shape[d]);var f=[],h=new Array(s).fill(0),p=o.shape.slice();p[i]=1;for(var v=new Array(u),m=0;m<v.length;m++){h[i]=m;var g=Tj({inputs:{x:o},backend:n,attrs:{begin:h,size:p}}),y=yW({inputs:{x:g},backend:n,attrs:{shape:c}});v[m]=y,f.push(g)}return f.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),v}},MK=(0,Te.Z)((function e(t,n){(0,Se.Z)(this,e),this.variableNames=["x","segmentIds"];var r=t.windowSize,a=t.batchSize,i=t.inSize,o=t.numSegments,s=o*Math.ceil(i/r);this.outputShape=[a,s];var u=4*Math.floor(r/4),c=r%4,l="\n        sumValue += dot(values, segFilter);\n    ",d="";i%r>0&&(d="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return initializationValue;\n        }\n      "));var f="";i%r>0&&(f="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return -1.0;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat("0.0",";\n\n      float getValue(int batch, int inIdx) {\n        ").concat(d,"\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        ").concat(f,"\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          ").concat(o,")) * float(").concat(r,"));\n        int currentSeg = int(mod(float(outIdx), float(").concat(o,")));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(u,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          ").concat(l,"\n        }\n\n        int inIdx = inOffset + ").concat(u,";\n        if (").concat(1===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          ").concat(l,"\n        } else if (").concat(2===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          ").concat(l,"\n        } else if (").concat(3===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          ").concat(l,"\n        }\n        setOutput(").concat("sumValue",");\n      }\n    ")}));for(var PK={kernelName:sh,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.segmentIds,o=r.numSegments,s=a.shape.length,u=[],c=0,l=Vy([c],s),d=a;null!=l&&(d=CW({inputs:{x:a},backend:n,attrs:{perm:l}}),u.push(d),c=Wy(1,s)[0]);var f=function(e,t,n){for(var r=[],a=e.length,i=0;i<a;i++)i!==t?r.push(e[i]):r.push(n);return r}(d.shape,c,o),h=Ic([d.shape[c]]),p=yW({inputs:{x:d},backend:n,attrs:{shape:[-1,h]}});u.push(p);var v=function e(t,r,a,i,o){var s=t.shape[0],c=t.shape[1],l=function(e,t){var n,r=!1;for(e<=Hx?(n=e,r=!0):n=Bc(e,Math.floor(Math.sqrt(e)));!r;)n>t||n===e?r=!0:n=Bc(e,n+1);return n}(c,o),d=new MK({windowSize:l,inSize:c,batchSize:s,numSegments:o},r),f=n.compileAndRun(d,[t,a],i);if(u.push(f),f.shape[1]===o)return f;var h=s$({backend:n,attrs:{start:0,stop:o,step:1,dtype:"float32"}}),p=EK({inputs:{x:h},backend:n,attrs:{reps:[c/l]}});return u.push(h),u.push(p),e(f,r,p,i,o)}(p,"unsortedSegmentSum",i,pp(a.dtype),o),m=yW({inputs:{x:v},backend:n,attrs:{shape:f}}),g=m;if(null!=l){u.push(m);var y=Uy(l);g=CW({inputs:{x:g},backend:n,attrs:{perm:y}})}return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),g}},zK=0,BK=[RW,OW,FW,PW,VW,jW,GW,HW,QW,JW,tj,rj,ij,sj,cj,fj,hj,mj,gj,yj,wj,Nj,Cj,Zj,Lj,Pj,Vj,tW,jj,Qj,oG,dG,hG,pG,vG,gG,bG,wG,IG,CG,ZG,_G,RG,LG,PG,zG,VG,WG,jG,HG,qG,KG,YG,JG,tH,aH,sH,dH,hH,mH,yH,wH,IH,SH,EH,ZH,AH,DH,JU,OH,Kj,FH,PH,BH,aW,UH,jH,GH,qH,KH,YH,JH,tq,aq,oq,uq,lq,dq,fq,vq,mq,gq,yq,bq,wq,Sq,Eq,Lq,gW,Pq,Bq,Uq,jq,Aj,Hq,Kq,Xq,e$,n$,sW,r$,a$,i$,o$,u$,Dj,Zq,l$,f$,p$,bW,g$,b$,x$,S$,N$,Z$,A$,D$,F$,P$,B$,U$,j$,H$,$$,X$,Ej,Oq,Q$,J$,eK,tK,nK,rK,aK,iK,uK,cK,fK,hK,pK,mK,gK,yK,bK,Rq,NW,wK,IK,SK,NK,RK,OK,ZW,LK,FK,PK,$q];zK<BK.length;zK++){wh(BK[zK])}var VK=["Abra","Aerodactyl","Alakazam","Alolan Sandslash","Arbok","Arcanine","Articuno","Beedrill","Bellsprout","Blastoise","Bulbasaur","Butterfree","Caterpie","Chansey","Charizard","Charmander","Charmeleon","Clefable","Clefairy","Cloyster","Cubone","Dewgong","Diglett","Ditto","Dodrio","Doduo","Dragonair","Dragonite","Dratini","Drowzee","Dugtrio","Eevee","Ekans","Electabuzz","Electrode","Exeggcute","Exeggutor","Farfetchd","Fearow","Flareon","Gastly","Gengar","Geodude","Gloom","Golbat","Goldeen","Golduck","Golem","Graveler","Grimer","Growlithe","Gyarados","Haunter","Hitmonchan","Hitmonlee","Horsea","Hypno","Ivysaur","Jigglypuff","Jolteon","Jynx","Kabuto","Kabutops","Kadabra","Kakuna","Kangaskhan","Kingler","Koffing","Krabby","Lapras","Lickitung","Machamp","Machoke","Machop","Magikarp","Magmar","Magnemite","Magneton","Mankey","Marowak","Meowth","Metapod","Mew","Mewtwo","Moltres","MrMime","Muk","Nidoking","Nidoqueen","Nidorina","Nidorino","Ninetales","Oddish","Omanyte","Omastar","Onix","Paras","Parasect","Persian","Pidgeot","Pidgeotto","Pidgey","Pikachu","Pinsir","Poliwag","Poliwhirl","Poliwrath","Ponyta","Porygon","Primeape","Psyduck","Raichu","Rapidash","Raticate","Rattata","Rhydon","Rhyhorn","Sandshrew","Sandslash","Scyther","Seadra","Seaking","Seel","Shellder","Slowbro","Slowpoke","Snorlax","Spearow","Squirtle","Starmie","Staryu","Tangela","Tauros","Tentacool","Tentacruel","Vaporeon","Venomoth","Venonat","Venusaur","Victreebel","Vileplume","Voltorb","Vulpix","Wartortle","Weedle","Weepinbell","Weezing","Wigglytuff","Zapdos","Zubat"],UK=function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){var n,r,a,i;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,XR("https://raw.githubusercontent.com/Jawny/pokemon-cnn/master/server/src/static/tfjs/model.json");case 2:return n=e.sent,(r=new Image).src=t,e.next=7,r.decode();case 7:return console.log("webpath:",t),a=ug(r).resizeNearestNeighbor([300,300]).toFloat().expandDims(),e.next=11,n.predict(a).argMax(1).arraySync();case 11:return i=e.sent,console.log("infernce res:",VK[i[0]]),e.abrupt("return",VK[i[0]]);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),WK=n(3878),jK=n(9199),GK=n(181),HK=n(5267);function qK(e){return(0,WK.Z)(e)||(0,jK.Z)(e)||(0,GK.Z)(e)||(0,HK.Z)()}var $K=n(1842),KK=n.n($K),XK=JSON.parse('[["getBerry","name","berry/:id/"],["getBerryFirmness","name","berry-firmness/:id/"],["getBerryFlavor","name","berry-flavor/:id/"],["getContestType","name","contest-type/:id/"],["getContestEffect","id","contest-effect/:id/"],["getSuperContestEffect","id","super-contest-effect/:id/"],["getEncounterMethod","name","encounter-method/:id/"],["getEncounterCondition","name","encounter-condition/:id/"],["getEncounterConditionValue","name","encounter-condition-value/:id/"],["getEvolutionChain","id","evolution-chain/:id/"],["getEvolutionTrigger","name","evolution-trigger/:id/"],["getGeneration","name","generation/:id/"],["getPokedex","name","pokedex/:id/"],["getVersion","name","version/:id/"],["getVersionGroup","name","version-group/:id/"],["getItem","name","item/:id/"],["getItemAttribute","name","item-attribute/:id/"],["getItemCategory","name","item-category/:id/"],["getItemFlingEffect","name","item-fling-effect/:id/"],["getItemPocket","name","item-pocket/:id/"],["getMachine","id","machine/:id/"],["getMove","name","move/:id/"],["getMoveAilment","name","move-ailment/:id/"],["getMoveBattleStyle","name","move-battle-style/:id/"],["getMoveCategory","name","move-category/:id/"],["getMoveDamageClass","name","move-damage-class/:id/"],["getMoveLearnMethod","name","move-learn-method/:id/"],["getMoveTarget","name","move-target/:id/"],["getLocation","name","location/:id/"],["getLocationArea","name","location-area/:id/"],["getPalParkArea","name","pal-park-area/:id/"],["getRegion","name","region/:id/"],["getAbility","name","ability/:id/"],["getCharacteristic","id","characteristic/:id/"],["getEggGroup","name","egg-group/:id/"],["getGender","name","gender/:id/"],["getGrowthRate","name","growth-rate/:id/"],["getNature","name","nature/:id/"],["getPokeathlonStat","name","pokeathlon-stat/:id/"],["getPokemon","name","pokemon/:id/"],["getPokemonEncounterAreas","name","pokemon/:id/encounters/"],["getPokemonColor","name","pokemon-color/:id/"],["getPokemonForm","name","pokemon-form/:id/"],["getPokemonHabitat","name","pokemon-habitat/:id/"],["getPokemonShape","name","pokemon-shape/:id/"],["getPokemonSpecies","name","pokemon-species/:id/"],["getStat","name","stat/:id/"],["getType","name","type/:id/"],["getLanguage","name","language/:id/"]]'),YK=JSON.parse('[["getEndpoints",""],["getBerries","berry/"],["getBerriesFirmnesss","berry-firmness/"],["getBerriesFlavors","berry-flavor/"],["getContestTypes","contest-type/"],["getContestEffects","contest-effect/"],["getSuperContestEffects","super-contest-effect/"],["getEncounterMethods","encounter-method/"],["getEncounterConditions","encounter-condition/"],["getEncounterConditionValues","encounter-condition-value/"],["getEvolutionChains","evolution-chain/"],["getEvolutionTriggers","evolution-trigger/"],["getGenerations","generation/"],["getPokedexs","pokedex/"],["getVersions","version/"],["getVersionGroups","version-group/"],["getItems","item/"],["getItemAttributes","item-attribute/"],["getItemCategories","item-category/"],["getItemFlingEffects","item-fling-effect/"],["getItemPockets","item-pocket/"],["getMachines","machine/"],["getMoves","move/"],["getMoveAilments","move-ailment/"],["getMoveBattleStyles","move-battle-style/"],["getMoveCategories","move-category/"],["getMoveDamageClasses","move-damage-class/"],["getMoveLearnMethods","move-learn-method/"],["getMoveTargets","move-target/"],["getLocations","location/"],["getLocationAreas","location-area/"],["getPalParkAreas","pal-park-area/"],["getRegions","region/"],["getAbilities","ability/"],["getCharacteristics","characteristic/"],["getEggGroups","egg-group/"],["getGenders","gender/"],["getGrowthRates","growth-rate/"],["getNatures","nature/"],["getPokeathlonStats","pokeathlon-stat/"],["getPokemons","pokemon/"],["getPokemonColors","pokemon-color/"],["getPokemonForms","pokemon-form/"],["getPokemonHabitats","pokemon-habitat/"],["getPokemonShapes","pokemon-shape/"],["getPokemonSpecies","pokemon-species/"],["getStats","stat/"],["getTypes","type/"],["getLanguages","language/"]]'),QK=n(4569),JK=n.n(QK),eX="pokeapi-js-wrapper-";function tX(e,t){return new Promise((function(n,r){KK().ready().then((function(){KK().getItem("".concat(eX).concat(t)).then((function(a){null===a?nX(e,t).then((function(e){n(e)})).catch((function(e){r(e)})):n(addCacheMark(a))})).catch((function(a){nX(e,t).then((function(e){n(e)})).catch((function(e){r(e)}))}))})).catch((function(a){nX(e,t).then((function(e){n(e)})).catch((function(e){r(e)}))}))}))}function nX(e,t){return new Promise((function(n,r){var a={baseURL:"".concat(e.protocol,"://").concat(e.hostName,"/"),timeout:e.timeout};JK().get(t,a).then((function(a){a.status>=400?r(a):(e.cache&&KK().setItem("".concat(eX).concat(t),a.data),n(a.data))})).catch((function(e){r(e)}))}))}var rX=(0,Te.Z)((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,Se.Z)(this,e),this.protocol="https",this.hostName="pokeapi.co",this.versionPath="/api/v2/",this.offset=0,this.limit=1e5,this.timeout=1e4,this.cache=!0,this.cacheImages=!1,t.hasOwnProperty("protocol")&&(this.protocol=t.protocol),t.hasOwnProperty("hostName")&&(this.hostName=t.hostName),t.hasOwnProperty("versionPath")&&(this.versionPath=t.versionPath),t.hasOwnProperty("offset")&&(this.offset=t.offset-1),t.hasOwnProperty("limit")&&(this.limit=t.limit),t.hasOwnProperty("timeout")&&(this.timeout=t.timeout),t.hasOwnProperty("cache")&&(this.cache=t.cache),t.hasOwnProperty("cacheImages")&&(this.cacheImages=t.cacheImages)}));KK().config({name:"pokeapi-js-wrapper"});var aX=function(){function e(t){var n=this;(0,Se.Z)(this,e),this.config=new rX(t),XK.forEach((function(e){var t=function(e){return"".concat(e[0],"By").concat(function(e){var t=qK(e),n=t[0],r=t.slice(1);return n.toUpperCase()+r.join("").toLowerCase()}(e[1]))}(e);n[t]=function(t){if(t){if("number"===typeof t||"string"===typeof t)return tX(n.config,"".concat(n.config.versionPath).concat(e[2].replace(":id",t)));if("object"===typeof t)return Promise.all(function(e,t,n){return n.map((function(n){return tX(e,"".concat(e.versionPath).concat(t[2].replace(":id",n)))}))}(n.config,e,t))}},n[function(e){return"".concat(e[0])}(e)]=n[t]})),YK.forEach((function(e){var t="".concat(e[0],"List");n[t]=function(t){var r=n.config.limit,a=n.config.offset;return t&&(t.hasOwnProperty("offset")&&(a=t.offset),t.hasOwnProperty("limit")&&(r=t.limit)),tX(n.config,"".concat(n.config.versionPath).concat(e[1],"?limit=").concat(r,"&offset=").concat(a))},n[e[0]]=n[t]})),this.config.cacheImages&&navigator&&window&&"serviceWorker"in navigator&&window.addEventListener("load",(function(){navigator.serviceWorker.register("./pokeapi-js-wrapper-sw.js",{scope:"./"}).catch((function(e){console.log("Pokeapi-js-wrapper SW installation failed with the following error:"),console.error(e)}))}))}return(0,Te.Z)(e,[{key:"getConfig",value:function(){return this.config}},{key:"getCacheLength",value:function(){return KK().length()}},{key:"clearCache",value:function(){return KK().clear()}},{key:"resource",value:function(e){var t=this;return"string"===typeof e?tX(this.config,e):Array.isArray(e)?Promise.all(e.map((function(e){return tX(t.config,e)}))):"String or Array is required"}}]),e}();var iX=function(e){return e.replace(/[^0-9a-z]/gi,"").toLowerCase()},oX=new aX({protocol:"https",hostName:"pokeapi.co",versionPath:"/api/v2/",cache:!0,timeout:5e3,cacheImages:!0}),sX=function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){var t,n=arguments;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:151,e.next=3,oX.getPokemonsList({limit:t});case 3:return e.next=5,e.sent.results;case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),uX=function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,oX.getPokemonByName(iX(t));case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),cX=function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){var n,r;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,oX.getPokemonByName(iX(t));case 3:return n=e.sent,r=n.sprites.other["official-artwork"].front_default,e.abrupt("return",r);case 8:return e.prev=8,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),lX=function(e){return e.map((function(e){return e.ability.name}))},dX=function(e){return e.map((function(e){return{baseStat:e.base_stat,effort:e.effort,statName:e.stat.name}}))},fX=function(e){return e.map((function(e){return e.type.name}))},hX=n(184);var pX=function(){var e=(0,S.useState)(null),t=(0,ge.Z)(e,2),n=t[0],r=t[1],a=(0,S.useState)(!1),i=(0,ge.Z)(a,2),o=i[0],s=i[1],u=(0,S.useState)(!1),c=(0,ge.Z)(u,2),l=c[0],d=c[1],f=(0,S.useState)(""),h=(0,ge.Z)(f,2),p=h[0],v=h[1],m=(0,S.useState)(""),g=(0,ge.Z)(m,2),y=g[0],b=g[1],k=(0,S.useRef)(!1),w=function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){var n,r,a;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),e.next=3,UK(t);case 3:return n=e.sent,v(n),e.next=7,uX(n);case 7:return r=e.sent,e.next=10,cX(n);case 10:a=e.sent,b(null!==a&&void 0!==a?a:""),console.log("pokeapi: ",r),s(!1);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,dc.getPhoto({quality:90,allowEditing:!1,resultType:lc.dk.Uri,source:lc.oK.Camera});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,S.useEffect)((function(){function e(){return(e=(0,ke.Z)((0,be.Z)().mark((function e(){var t,n;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(k.current){e.next=6;break}return k.current=!0,e.next=4,x();case 4:n=e.sent,r(null!==(t=n.webPath)&&void 0!==t?t:null);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[l]),(0,hX.jsx)(Uu,{children:n?(0,hX.jsxs)(hX.Fragment,{children:[(0,hX.jsx)(pu,{children:(0,hX.jsxs)(vu,{children:[(0,hX.jsx)(ku,{className:"ion-justify-content-center ion-margin",children:(0,hX.jsx)(gu,{className:"taken-photo",src:n,alt:"Captured Photo"})}),y?(0,hX.jsxs)(hX.Fragment,{children:[(0,hX.jsx)(ku,{className:"ion-justify-content-center ion-margin",children:(0,hX.jsx)(gu,{className:"predicted-pokemon",src:y,alt:"pokemon img"})}),(0,hX.jsx)(ku,{className:"ion-justify-content-center ion-margin",children:(0,hX.jsx)(xu,{className:"ion-text-center",children:p})})]}):(0,hX.jsx)(hX.Fragment,{}),(0,hX.jsx)(hX.Fragment,{children:(0,hX.jsxs)(ku,{className:"ion-justify-content-center ion-margin",children:[(0,hX.jsx)(Eu,{disabled:o,onClick:function(){k.current=!1,d(!l)},children:"retake Photo"}),(0,hX.jsx)(Eu,{disabled:o,onClick:function(){return w(n)},children:"Analyze Pokemon"})]})})]})}),(0,hX.jsx)(hX.Fragment,{children:o?(0,hX.jsx)(bu,{type:"indeterminate"}):(0,hX.jsx)(hX.Fragment,{})})]}):(0,hX.jsx)(bu,{type:"indeterminate"})})},vX=function(e){var t=e.name;return(0,hX.jsxs)("div",{className:"container",children:[(0,hX.jsx)("strong",{children:t}),(0,hX.jsxs)("p",{children:["Explore"," ",(0,hX.jsx)("a",{target:"_blank",rel:"noopener noreferrer",href:"https://ionicframework.com/docs/components",children:"UI Components"})]})]})};function mX(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gX(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mX(Object(n),!0).forEach((function(t){(0,ye.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mX(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var yX=(0,S.createContext)({pokemonData:{},updatePokemonData:function(){},handleAddPokemon:function(){return Promise}}),bX=function(e){var t=e.children,n=(0,S.useState)({}),r=(0,ge.Z)(n,2),a=r[0],i=r[1],o=function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){var n,r,a,i,o,u,c,l,d,f,h,p;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.toLowerCase(),e.next=3,uX(n);case 3:if(null==(r=e.sent)){e.next=12;break}return a=r.abilities,i=r.name,o=r.height,u=r.weight,c=r.stats,l=r.types,d=lX(a),f=dX(c),h=fX(l),s((p={name:i,height:o,stats:f,abilities:d,types:h,weight:u}).name,p),e.abrupt("return",p);case 12:return e.abrupt("return",null);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=function(e,t){i((function(n){return gX(gX({},n),{},(0,ye.Z)({},e,t))}))};return(0,hX.jsx)(yX.Provider,{value:{pokemonData:a,updatePokemonData:s,handleAddPokemon:o},children:t})},kX=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var a=e.charCodeAt(r);a<128?t[n++]=a:a<2048?(t[n++]=a>>6|192,t[n++]=63&a|128):55296===(64512&a)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(a=65536+((1023&a)<<10)+(1023&e.charCodeAt(++r)),t[n++]=a>>18|240,t[n++]=a>>12&63|128,t[n++]=a>>6&63|128,t[n++]=63&a|128):(t[n++]=a>>12|224,t[n++]=a>>6&63|128,t[n++]=63&a|128)}return t},wX={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],a=0;a<e.length;a+=3){var i=e[a],o=a+1<e.length,s=o?e[a+1]:0,u=a+2<e.length,c=u?e[a+2]:0,l=i>>2,d=(3&i)<<4|s>>4,f=(15&s)<<2|c>>6,h=63&c;u||(h=64,o||(f=64)),r.push(n[l],n[d],n[f],n[h])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(kX(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var a=e[n++];if(a<128)t[r++]=String.fromCharCode(a);else if(a>191&&a<224){var i=e[n++];t[r++]=String.fromCharCode((31&a)<<6|63&i)}else if(a>239&&a<365){var o=((7&a)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var s=e[n++],u=e[n++];t[r++]=String.fromCharCode((15&a)<<12|(63&s)<<6|63&u)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],a=0;a<e.length;){var i=n[e.charAt(a++)],o=a<e.length?n[e.charAt(a)]:0,s=++a<e.length?n[e.charAt(a)]:64,u=++a<e.length?n[e.charAt(a)]:64;if(++a,null==i||null==o||null==s||null==u)throw new xX;var c=i<<2|o>>4;if(r.push(c),64!==s){var l=o<<4&240|s>>2;if(r.push(l),64!==u){var d=s<<6&192|u;r.push(d)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},xX=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(){var e;return(0,Se.Z)(this,n),(e=t.apply(this,arguments)).name="DecodeBase64StringError",e}return(0,Te.Z)(n)}((0,lT.Z)(Error)),IX=function(e){return function(e){var t=kX(e);return wX.encodeByteArray(t,!0)}(e).replace(/\./g,"")},SX=function(e){try{return wX.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function TX(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&EX(n)&&(e[n]=TX(e[n],t[n]));return e}function EX(e){return"__proto__"!==e}var NX=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},CX=function(){try{return NX()||function(){if("undefined"!==typeof process){var e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||function(){if("undefined"!==typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}var t=e&&SX(e[1]);return t&&JSON.parse(t)}}()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},ZX=function(){var e;return null===(e=CX())||void 0===e?void 0:e.config},_X=function(){function e(){var t=this;(0,Se.Z)(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return(0,Te.Z)(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function AX(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function RX(){var e,t=null===(e=CX())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function DX(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function OX(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function LX(){var e=AX();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function FX(){try{return"object"===typeof indexedDB}catch(e){return!1}}var MX=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e,r,a){var i;return(0,Se.Z)(this,n),(i=t.call(this,r)).code=e,i.customData=a,i.name="FirebaseError",Object.setPrototypeOf((0,we.Z)(i),n.prototype),Error.captureStackTrace&&Error.captureStackTrace((0,we.Z)(i),PX.prototype.create),i}return(0,Te.Z)(n)}((0,lT.Z)(Error)),PX=function(){function e(t,n,r){(0,Se.Z)(this,e),this.service=t,this.serviceName=n,this.errors=r}return(0,Te.Z)(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],a=r?function(e,t){return e.replace(zX,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",i="".concat(this.serviceName,": ").concat(a," (").concat(n,").");return new MX(n,i,t)}}]),e}();var zX=/\{\$([^}]+)}/g;function BX(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function VX(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),a=0,i=n;a<i.length;a++){var o=i[a];if(!r.includes(o))return!1;var s=e[o],u=t[o];if(UX(s)&&UX(u)){if(!VX(s,u))return!1}else if(s!==u)return!1}for(var c=0,l=r;c<l.length;c++){var d=l[c];if(!n.includes(d))return!1}return!0}function UX(e){return null!==e&&"object"===typeof e}function WX(e){for(var t=[],n=function(){var e=(0,ge.Z)(a[r],2),n=e[0],i=e[1];Array.isArray(i)?i.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))},r=0,a=Object.entries(e);r<a.length;r++)n();return t.length?"&"+t.join("&"):""}function jX(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=e.split("="),r=(0,ge.Z)(n,2),a=r[0],i=r[1];t[decodeURIComponent(a)]=decodeURIComponent(i)}})),t}function GX(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function HX(e,t){var n=new qX(e,t);return n.subscribe.bind(n)}var qX=function(){function e(t,n){var r=this;(0,Se.Z)(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return(0,Te.Z)(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,a=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=(0,Ht.Z)(t);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(a in e&&"function"===typeof e[a])return!0}}catch(yhe){r.e(yhe)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=$X),void 0===r.error&&(r.error=$X),void 0===r.complete&&(r.complete=$X);var i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{a.finalError?r.error(a.finalError):r.complete()}catch(e){}})),this.observers.push(r),i}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function $X(){}function KX(e){return e&&e._delegate?e._delegate:e}var XX=function(){function e(t,n,r){(0,Se.Z)(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return(0,Te.Z)(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),YX="[DEFAULT]",QX=function(){function e(t,n){(0,Se.Z)(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return(0,Te.Z)(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new _X;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(a){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(a){if(r)return null;throw a}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:YX})}catch(u){}var t,n=(0,Ht.Z)(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=(0,ge.Z)(t.value,2),a=r[0],i=r[1],o=this.normalizeInstanceIdentifier(a);try{var s=this.getOrInitializeService({instanceIdentifier:o});i.resolve(s)}catch(u){}}}catch(yhe){n.e(yhe)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:YX;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){var t;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat((0,me.Z)(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),(0,me.Z)(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:YX;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:YX;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var a,i=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=(0,Ht.Z)(this.instancesDeferred.entries());try{for(o.s();!(a=o.n()).done;){var s=(0,ge.Z)(a.value,2),u=s[0],c=s[1];r===this.normalizeInstanceIdentifier(u)&&c.resolve(i)}}catch(yhe){o.e(yhe)}finally{o.f()}return i}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),a=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;a.add(e),this.onInitCallbacks.set(r,a);var i=this.instances.get(r);return i&&e(i,r),function(){a.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,a=(0,Ht.Z)(n);try{for(a.s();!(r=a.n()).done;){var i=r.value;try{i(e,t)}catch(rle){}}}catch(yhe){a.e(yhe)}finally{a.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,a=void 0===r?{}:r,i=this.instances.get(n);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===YX?void 0:t),options:a}),this.instances.set(n,i),this.instancesOptions.set(n,a),this.invokeOnInitCallbacks(i,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,i)}catch(rle){}return i||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:YX;return this.component?this.component.multipleInstances?e:YX:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var JX,eY,tY=function(){function e(t){(0,Se.Z)(this,e),this.name=t,this.providers=new Map}return(0,Te.Z)(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new QX(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),nY=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(eY||(eY={}));var rY={debug:eY.DEBUG,verbose:eY.VERBOSE,info:eY.INFO,warn:eY.WARN,error:eY.ERROR,silent:eY.SILENT},aY=eY.INFO,iY=(JX={},(0,ye.Z)(JX,eY.DEBUG,"log"),(0,ye.Z)(JX,eY.VERBOSE,"log"),(0,ye.Z)(JX,eY.INFO,"info"),(0,ye.Z)(JX,eY.WARN,"warn"),(0,ye.Z)(JX,eY.ERROR,"error"),JX),oY=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=iY[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var a,i=arguments.length,o=new Array(i>2?i-2:0),s=2;s<i;s++)o[s-2]=arguments[s];(a=console)[r].apply(a,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},sY=function(){function e(t){(0,Se.Z)(this,e),this.name=t,this._logLevel=aY,this._logHandler=oY,this._userLogHandler=null,nY.push(this)}return(0,Te.Z)(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in eY))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?rY[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,eY.DEBUG].concat(t)),this._logHandler.apply(this,[this,eY.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,eY.VERBOSE].concat(t)),this._logHandler.apply(this,[this,eY.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,eY.INFO].concat(t)),this._logHandler.apply(this,[this,eY.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,eY.WARN].concat(t)),this._logHandler.apply(this,[this,eY.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,eY.ERROR].concat(t)),this._logHandler.apply(this,[this,eY.ERROR].concat(t))}}]),e}();var uY,cY,lY=function(e,t){return t.some((function(t){return e instanceof t}))};var dY=new WeakMap,fY=new WeakMap,hY=new WeakMap,pY=new WeakMap,vY=new WeakMap;var mY={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return fY.get(e);if("objectStoreNames"===t)return e.objectStoreNames||hY.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return bY(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function gY(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(cY||(cY=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(kY(this),n),bY(dY.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return bY(e.apply(kY(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];var i=e.call.apply(e,[kY(this),t].concat(r));return hY.set(i,t.sort?t.sort():[t]),bY(i)}}function yY(e){return"function"===typeof e?gY(e):(e instanceof IDBTransaction&&function(e){if(!fY.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",a),e.removeEventListener("error",i),e.removeEventListener("abort",i)},a=function(){t(),r()},i=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",a),e.addEventListener("error",i),e.addEventListener("abort",i)}));fY.set(e,t)}}(e),lY(e,uY||(uY=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,mY):e)}function bY(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",a),e.removeEventListener("error",i)},a=function(){t(bY(e.result)),r()},i=function(){n(e.error),r()};e.addEventListener("success",a),e.addEventListener("error",i)}));return t.then((function(t){t instanceof IDBCursor&&dY.set(t,e)})).catch((function(){})),vY.set(t,e),t}(e);if(pY.has(e))return pY.get(e);var t=yY(e);return t!==e&&(pY.set(e,t),vY.set(t,e)),t}var kY=function(e){return vY.get(e)};var wY,xY,IY=["get","getKey","getAll","getAllKeys","count"],SY=["put","add","delete","clear"],TY=new Map;function EY(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(TY.get(t))return TY.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,a=SY.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(a||IY.includes(n))){var i=function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){var i,o,s,u,c,l,d=arguments;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,a?"readwrite":"readonly"),s=o.store,u=d.length,c=new Array(u>1?u-1:0),l=1;l<u;l++)c[l-1]=d[l];return r&&(s=s.index(c.shift())),e.next=6,Promise.all([(i=s)[n].apply(i,c),a&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return TY.set(t,i),i}}}mY=function(e){return gX(gX({},e),{},{get:function(t,n,r){return EY(t,n)||e.get(t,n,r)},has:function(t,n){return!!EY(t,n)||e.has(t,n)}})}(mY);var NY=function(){function e(t){(0,Se.Z)(this,e),this.container=t}return(0,Te.Z)(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var CY="@firebase/app",ZY="0.9.7",_Y=new sY("@firebase/app"),AY="[DEFAULT]",RY=(wY={},(0,ye.Z)(wY,CY,"fire-core"),(0,ye.Z)(wY,"@firebase/app-compat","fire-core-compat"),(0,ye.Z)(wY,"@firebase/analytics","fire-analytics"),(0,ye.Z)(wY,"@firebase/analytics-compat","fire-analytics-compat"),(0,ye.Z)(wY,"@firebase/app-check","fire-app-check"),(0,ye.Z)(wY,"@firebase/app-check-compat","fire-app-check-compat"),(0,ye.Z)(wY,"@firebase/auth","fire-auth"),(0,ye.Z)(wY,"@firebase/auth-compat","fire-auth-compat"),(0,ye.Z)(wY,"@firebase/database","fire-rtdb"),(0,ye.Z)(wY,"@firebase/database-compat","fire-rtdb-compat"),(0,ye.Z)(wY,"@firebase/functions","fire-fn"),(0,ye.Z)(wY,"@firebase/functions-compat","fire-fn-compat"),(0,ye.Z)(wY,"@firebase/installations","fire-iid"),(0,ye.Z)(wY,"@firebase/installations-compat","fire-iid-compat"),(0,ye.Z)(wY,"@firebase/messaging","fire-fcm"),(0,ye.Z)(wY,"@firebase/messaging-compat","fire-fcm-compat"),(0,ye.Z)(wY,"@firebase/performance","fire-perf"),(0,ye.Z)(wY,"@firebase/performance-compat","fire-perf-compat"),(0,ye.Z)(wY,"@firebase/remote-config","fire-rc"),(0,ye.Z)(wY,"@firebase/remote-config-compat","fire-rc-compat"),(0,ye.Z)(wY,"@firebase/storage","fire-gcs"),(0,ye.Z)(wY,"@firebase/storage-compat","fire-gcs-compat"),(0,ye.Z)(wY,"@firebase/firestore","fire-fst"),(0,ye.Z)(wY,"@firebase/firestore-compat","fire-fst-compat"),(0,ye.Z)(wY,"fire-js","fire-js"),(0,ye.Z)(wY,"firebase","fire-js-all"),wY),DY=new Map,OY=new Map;function LY(e,t){try{e.container.addComponent(t)}catch(n){_Y.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function FY(e,t){e.container.addOrOverwriteComponent(t)}function MY(e){var t=e.name;if(OY.has(t))return _Y.debug("There were multiple attempts to register component ".concat(t,".")),!1;OY.set(t,e);var n,r=(0,Ht.Z)(DY.values());try{for(r.s();!(n=r.n()).done;){LY(n.value,e)}}catch(yhe){r.e(yhe)}finally{r.f()}return!0}function PY(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function zY(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:AY;PY(e,t).clearInstance(n)}function BY(){OY.clear()}var VY=(xY={},(0,ye.Z)(xY,"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),(0,ye.Z)(xY,"bad-app-name","Illegal App name: '{$appName}"),(0,ye.Z)(xY,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),(0,ye.Z)(xY,"app-deleted","Firebase App named '{$appName}' already deleted"),(0,ye.Z)(xY,"no-options","Need to provide options, when not being deployed to hosting via source."),(0,ye.Z)(xY,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),(0,ye.Z)(xY,"invalid-log-argument","First argument to `onLog` must be null or a function."),(0,ye.Z)(xY,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),(0,ye.Z)(xY,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),(0,ye.Z)(xY,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),(0,ye.Z)(xY,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),xY),UY=new PX("app","Firebase",VY),WY=function(){function e(t,n,r){var a=this;(0,Se.Z)(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new XX("app",(function(){return a}),"PUBLIC"))}return(0,Te.Z)(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw UY.create("app-deleted",{appName:this._name})}}]),e}(),jY="9.19.1";function GY(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;"object"!==typeof t&&(t={name:t});var r=Object.assign({name:AY,automaticDataCollectionEnabled:!1},t),a=r.name;if("string"!==typeof a||!a)throw UY.create("bad-app-name",{appName:String(a)});if(n||(n=ZX()),!n)throw UY.create("no-options");var i=DY.get(a);if(i){if(VX(n,i.options)&&VX(r,i.config))return i;throw UY.create("duplicate-app",{appName:a})}var o,s=new tY(a),u=(0,Ht.Z)(OY.values());try{for(u.s();!(o=u.n()).done;){var c=o.value;s.addComponent(c)}}catch(yhe){u.e(yhe)}finally{u.f()}var l=new WY(n,r,s);return DY.set(a,l),l}function HY(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:AY,t=DY.get(e);if(!t&&e===AY)return GY();if(!t)throw UY.create("no-app",{appName:e});return t}function qY(){return Array.from(DY.values())}function $Y(e){return KY.apply(this,arguments)}function KY(){return(KY=(0,ke.Z)((0,be.Z)().mark((function e(t){var n;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!DY.has(n)){e.next=6;break}return DY.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function XY(e,t,n){var r,a=null!==(r=RY[e])&&void 0!==r?r:e;n&&(a+="-".concat(n));var i=a.match(/\s|\//),o=t.match(/\s|\//);if(i||o){var s=['Unable to register library "'.concat(a,'" with version "').concat(t,'":')];return i&&s.push('library name "'.concat(a,'" contains illegal characters (whitespace or "/")')),i&&o&&s.push("and"),o&&s.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void _Y.warn(s.join(" "))}MY(new XX("".concat(a,"-version"),(function(){return{library:a,version:t}}),"VERSION"))}function YY(e,t){if(null!==e&&"function"!==typeof e)throw UY.create("invalid-log-argument");!function(e,t){var n,r=(0,Ht.Z)(nY);try{var a=function(){var r=n.value,a=null;t&&t.level&&(a=rY[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];var s=i.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==a&&void 0!==a?a:t.logLevel)&&e({level:eY[n].toLowerCase(),message:s,args:i,type:t.name})}};for(r.s();!(n=r.n()).done;)a()}catch(yhe){r.e(yhe)}finally{r.f()}}(e,t)}function QY(e){var t;t=e,nY.forEach((function(e){e.setLogLevel(t)}))}var JY="firebase-heartbeat-database",eQ=1,tQ="firebase-heartbeat-store",nQ=null;function rQ(){return nQ||(nQ=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,a=n.upgrade,i=n.blocking,o=n.terminated,s=indexedDB.open(e,t),u=bY(s);return a&&s.addEventListener("upgradeneeded",(function(e){a(bY(s.result),e.oldVersion,e.newVersion,bY(s.transaction))})),r&&s.addEventListener("blocked",(function(){return r()})),u.then((function(e){o&&e.addEventListener("close",(function(){return o()})),i&&e.addEventListener("versionchange",(function(){return i()}))})).catch((function(){})),u}(JY,eQ,{upgrade:function(e,t){if(0===t)e.createObjectStore(tQ)}}).catch((function(e){throw UY.create("idb-open",{originalErrorMessage:e.message})}))),nQ}function aQ(e){return iQ.apply(this,arguments)}function iQ(){return iQ=(0,ke.Z)((0,be.Z)().mark((function e(t){var n,r;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,rQ();case 3:return n=e.sent,e.abrupt("return",n.transaction(tQ).objectStore(tQ).get(uQ(t)));case 7:e.prev=7,e.t0=e.catch(0),e.t0 instanceof MX?_Y.warn(e.t0.message):(r=UY.create("idb-get",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),_Y.warn(r.message));case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),iQ.apply(this,arguments)}function oQ(e,t){return sQ.apply(this,arguments)}function sQ(){return sQ=(0,ke.Z)((0,be.Z)().mark((function e(t,n){var r,a,i,o;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,rQ();case 3:return r=e.sent,a=r.transaction(tQ,"readwrite"),i=a.objectStore(tQ),e.next=8,i.put(n,uQ(t));case 8:return e.abrupt("return",a.done);case 11:e.prev=11,e.t0=e.catch(0),e.t0 instanceof MX?_Y.warn(e.t0.message):(o=UY.create("idb-set",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),_Y.warn(o.message));case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),sQ.apply(this,arguments)}function uQ(e){return"".concat(e.name,"!").concat(e.options.appId)}var cQ=1024,lQ=function(){function e(t){var n=this;(0,Se.Z)(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new vQ(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return(0,Te.Z)(e,[{key:"triggerHeartbeat",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){var t,n,r;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=dQ(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){var t,n,r,a,i;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=dQ(),n=fQ(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,a=n.unsentEntries,i=IX(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(a.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=a,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",i);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function dQ(){return(new Date).toISOString().substring(0,10)}function fQ(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:cQ,r=[],a=e.slice(),i=(0,Ht.Z)(e);try{var o=function(){var e=t.value,i=r.find((function(t){return t.agent===e.agent}));if(i){if(i.dates.push(e.date),mQ(r)>n)return i.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),mQ(r)>n)return r.pop(),"break";a=a.slice(1)};for(i.s();!(t=i.n()).done;){if("break"===o())break}}catch(yhe){i.e(yhe)}finally{i.f()}return{heartbeatsToSend:r,unsentEntries:a}}var hQ,pQ,vQ=function(){function e(t){(0,Se.Z)(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return(0,Te.Z)(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(FX()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=function(){a.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},a.onupgradeneeded=function(){n=!1},a.onerror=function(){var e;t((null===(e=a.error)||void 0===e?void 0:e.message)||"")}}catch(i){t(i)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){var t;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,aQ(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){var n,r;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",oQ(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){var n,r;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",oQ(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat((0,me.Z)(r.heartbeats),(0,me.Z)(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function mQ(e){return IX(JSON.stringify({version:2,heartbeats:e})).length}hQ="",MY(new XX("platform-logger",(function(e){return new NY(e)}),"PRIVATE")),MY(new XX("heartbeat",(function(e){return new lQ(e)}),"PRIVATE")),XY(CY,ZY,hQ),XY(CY,ZY,"esm2017"),XY("fire-js","");var gQ=function(){function e(t,n){var r=this;(0,Se.Z)(this,e),this._delegate=t,this.firebase=n,LY(t,new XX("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return(0,Te.Z)(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),$Y(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:AY;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:AY;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){LY(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){FY(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),yQ=(pQ={},(0,ye.Z)(pQ,"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),(0,ye.Z)(pQ,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),pQ),bQ=new PX("app-compat","Firebase",yQ);var kQ=function e(){var t=function(e){var t={},n={__esModule:!0,initializeApp:function(r){var a=GY(r,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(BX(t,a.name))return t[a.name];var i=new e(a,n);return t[a.name]=i,i},app:r,registerVersion:XY,setLogLevel:QY,onLog:YY,apps:null,SDK_VERSION:jY,INTERNAL:{registerComponent:function(t){var a=t.name,i=a.replace("-compat","");if(MY(t)&&"PUBLIC"===t.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r();if("function"!==typeof e[i])throw bQ.create("invalid-app-argument",{appName:a});return e[i]()};void 0!==t.serviceProps&&TX(o,t.serviceProps),n[i]=o,e.prototype[i]=function(){for(var e=this._getService.bind(this,a),n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e.apply(this,t.multipleInstances?r:[])}}return"PUBLIC"===t.type?n[i]:null},removeApp:function(e){delete t[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:I}};function r(e){if(!BX(t,e=e||AY))throw bQ.create("no-app",{appName:e});return t[e]}return n.default=n,Object.defineProperty(n,"apps",{get:function(){return Object.keys(t).map((function(e){return t[e]}))}}),r.App=e,n}(gQ);return t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){TX(t,e)},createSubscribe:HX,ErrorFactory:PX,deepExtend:TX}),t}(),wQ=new sY("@firebase/app-compat"),xQ="@firebase/app-compat",IQ="0.2.7";if("object"===typeof self&&self.self===self&&void 0!==self.firebase){wQ.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var SQ=self.firebase.SDK_VERSION;SQ&&SQ.indexOf("LITE")>=0&&wQ.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var TQ=kQ;!function(e){XY(xQ,IQ,e)}();var EQ;TQ.registerVersion("firebase","9.19.1","app-compat");var NQ={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},CQ={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};function ZQ(){return(0,ye.Z)({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var _Q=function(){var e;return e={},(0,ye.Z)(e,"admin-restricted-operation","This operation is restricted to administrators only."),(0,ye.Z)(e,"argument-error",""),(0,ye.Z)(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),(0,ye.Z)(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),(0,ye.Z)(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),(0,ye.Z)(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),(0,ye.Z)(e,"cordova-not-ready","Cordova framework is not ready."),(0,ye.Z)(e,"cors-unsupported","This browser is not supported."),(0,ye.Z)(e,"credential-already-in-use","This credential is already associated with a different user account."),(0,ye.Z)(e,"custom-token-mismatch","The custom token corresponds to a different audience."),(0,ye.Z)(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),(0,ye.Z)(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),(0,ye.Z)(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),(0,ye.Z)(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),(0,ye.Z)(e,"email-already-in-use","The email address is already in use by another account."),(0,ye.Z)(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),(0,ye.Z)(e,"expired-action-code","The action code has expired."),(0,ye.Z)(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),(0,ye.Z)(e,"internal-error","An internal AuthError has occurred."),(0,ye.Z)(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),(0,ye.Z)(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),(0,ye.Z)(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),(0,ye.Z)(e,"invalid-auth-event","An internal AuthError has occurred."),(0,ye.Z)(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),(0,ye.Z)(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),(0,ye.Z)(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),(0,ye.Z)(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),(0,ye.Z)(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),(0,ye.Z)(e,"invalid-email","The email address is badly formatted."),(0,ye.Z)(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),(0,ye.Z)(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),(0,ye.Z)(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),(0,ye.Z)(e,"invalid-credential","The supplied auth credential is malformed or has expired."),(0,ye.Z)(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),(0,ye.Z)(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),(0,ye.Z)(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),(0,ye.Z)(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),(0,ye.Z)(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),(0,ye.Z)(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),(0,ye.Z)(e,"wrong-password","The password is invalid or the user does not have a password."),(0,ye.Z)(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),(0,ye.Z)(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),(0,ye.Z)(e,"invalid-provider-id","The specified provider ID is invalid."),(0,ye.Z)(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),(0,ye.Z)(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),(0,ye.Z)(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),(0,ye.Z)(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),(0,ye.Z)(e,"login-blocked","Login blocked by user-provided method: {$originalMessage}"),(0,ye.Z)(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),(0,ye.Z)(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),(0,ye.Z)(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),(0,ye.Z)(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),(0,ye.Z)(e,"missing-continue-uri","A continue URL must be provided in the request."),(0,ye.Z)(e,"missing-iframe-start","An internal AuthError has occurred."),(0,ye.Z)(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),(0,ye.Z)(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),(0,ye.Z)(e,"missing-password","A non-empty password must be provided"),(0,ye.Z)(e,"missing-multi-factor-info","No second factor identifier is provided."),(0,ye.Z)(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),(0,ye.Z)(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),(0,ye.Z)(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),(0,ye.Z)(e,"app-deleted","This instance of FirebaseApp has been deleted."),(0,ye.Z)(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),(0,ye.Z)(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),(0,ye.Z)(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),(0,ye.Z)(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),(0,ye.Z)(e,"no-auth-event","An internal AuthError has occurred."),(0,ye.Z)(e,"no-such-provider","User was not linked to an account with the given provider."),(0,ye.Z)(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),(0,ye.Z)(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),(0,ye.Z)(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),(0,ye.Z)(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),(0,ye.Z)(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),(0,ye.Z)(e,"provider-already-linked","User can only be linked to one identity for the given provider."),(0,ye.Z)(e,"quota-exceeded","The project's quota for this operation has been exceeded."),(0,ye.Z)(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),(0,ye.Z)(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),(0,ye.Z)(e,"rejected-credential","The request contains malformed or mismatching credentials."),(0,ye.Z)(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),(0,ye.Z)(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),(0,ye.Z)(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),(0,ye.Z)(e,"timeout","The operation has timed out."),(0,ye.Z)(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),(0,ye.Z)(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),(0,ye.Z)(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),(0,ye.Z)(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),(0,ye.Z)(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),(0,ye.Z)(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),(0,ye.Z)(e,"unverified-email","The operation requires a verified email."),(0,ye.Z)(e,"user-cancelled","The user did not grant your application the permissions it requested."),(0,ye.Z)(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),(0,ye.Z)(e,"user-disabled","The user account has been disabled by an administrator."),(0,ye.Z)(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),(0,ye.Z)(e,"user-signed-out",""),(0,ye.Z)(e,"weak-password","The password must be 6 characters long or more."),(0,ye.Z)(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),(0,ye.Z)(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),e},AQ=ZQ,RQ=new PX("auth","Firebase",ZQ()),DQ=new sY("@firebase/auth");function OQ(e){if(DQ.logLevel<=eY.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];DQ.error.apply(DQ,["Auth (".concat(jY,"): ").concat(e)].concat(n))}}function LQ(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw zQ.apply(void 0,[e].concat(n))}function FQ(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return zQ.apply(void 0,[e].concat(n))}function MQ(e,t,n){var r=Object.assign(Object.assign({},AQ()),(0,ye.Z)({},t,n));return new PX("auth","Firebase",r).create(t,{appName:e.name})}function PQ(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&LQ(e,"argument-error"),MQ(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function zQ(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var a,i=n[0],o=(0,me.Z)(n.slice(1));return o[0]&&(o[0].appName=e.name),(a=e._errorFactory).create.apply(a,[i].concat((0,me.Z)(o)))}return RQ.create.apply(RQ,[e].concat(n))}function BQ(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];throw zQ.apply(void 0,[t].concat(r))}}function VQ(e){var t="INTERNAL ASSERTION FAILED: "+e;throw OQ(t),new Error(t)}function UQ(e,t){e||VQ(t)}var WQ=new Map;function jQ(e){UQ(e instanceof Function,"Expected a class definition");var t=WQ.get(e);return t?(UQ(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,WQ.set(e,t),t)}function GQ(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function HQ(){return"http:"===qQ()||"https:"===qQ()}function qQ(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var $Q=function(){function e(t,n){(0,Se.Z)(this,e),this.shortDelay=t,this.longDelay=n,UQ(n>t,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(AX())||OX()}return(0,Te.Z)(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(HQ()||DX()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function KQ(e,t){UQ(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var XQ=function(){function e(){(0,Se.Z)(this,e)}return(0,Te.Z)(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void VQ("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void VQ("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void VQ("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),YQ=(EQ={},(0,ye.Z)(EQ,"CREDENTIAL_MISMATCH","custom-token-mismatch"),(0,ye.Z)(EQ,"MISSING_CUSTOM_TOKEN","internal-error"),(0,ye.Z)(EQ,"INVALID_IDENTIFIER","invalid-email"),(0,ye.Z)(EQ,"MISSING_CONTINUE_URI","internal-error"),(0,ye.Z)(EQ,"INVALID_PASSWORD","wrong-password"),(0,ye.Z)(EQ,"MISSING_PASSWORD","missing-password"),(0,ye.Z)(EQ,"EMAIL_EXISTS","email-already-in-use"),(0,ye.Z)(EQ,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),(0,ye.Z)(EQ,"INVALID_IDP_RESPONSE","invalid-credential"),(0,ye.Z)(EQ,"INVALID_PENDING_TOKEN","invalid-credential"),(0,ye.Z)(EQ,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),(0,ye.Z)(EQ,"MISSING_REQ_TYPE","internal-error"),(0,ye.Z)(EQ,"EMAIL_NOT_FOUND","user-not-found"),(0,ye.Z)(EQ,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),(0,ye.Z)(EQ,"EXPIRED_OOB_CODE","expired-action-code"),(0,ye.Z)(EQ,"INVALID_OOB_CODE","invalid-action-code"),(0,ye.Z)(EQ,"MISSING_OOB_CODE","internal-error"),(0,ye.Z)(EQ,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),(0,ye.Z)(EQ,"INVALID_ID_TOKEN","invalid-user-token"),(0,ye.Z)(EQ,"TOKEN_EXPIRED","user-token-expired"),(0,ye.Z)(EQ,"USER_NOT_FOUND","user-token-expired"),(0,ye.Z)(EQ,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),(0,ye.Z)(EQ,"INVALID_CODE","invalid-verification-code"),(0,ye.Z)(EQ,"INVALID_SESSION_INFO","invalid-verification-id"),(0,ye.Z)(EQ,"INVALID_TEMPORARY_PROOF","invalid-credential"),(0,ye.Z)(EQ,"MISSING_SESSION_INFO","missing-verification-id"),(0,ye.Z)(EQ,"SESSION_EXPIRED","code-expired"),(0,ye.Z)(EQ,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),(0,ye.Z)(EQ,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),(0,ye.Z)(EQ,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),(0,ye.Z)(EQ,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),(0,ye.Z)(EQ,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),(0,ye.Z)(EQ,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),(0,ye.Z)(EQ,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),(0,ye.Z)(EQ,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),(0,ye.Z)(EQ,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),(0,ye.Z)(EQ,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),(0,ye.Z)(EQ,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),EQ),QQ=new $Q(3e4,6e4);function JQ(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function eJ(e,t,n,r){return tJ.apply(this,arguments)}function tJ(){return tJ=(0,ke.Z)((0,be.Z)().mark((function e(t,n,r,a){var i,o=arguments;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",nJ(t,i,(0,ke.Z)((0,be.Z)().mark((function e(){var i,o,s,u;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={},o={},a&&("GET"===n?o=a:i={body:JSON.stringify(a)}),s=WX(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(u=e.sent)["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",XQ.fetch()(oJ(t,t.config.apiHost,r,s),Object.assign({method:n,headers:u,referrerPolicy:"no-referrer"},i)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),tJ.apply(this,arguments)}function nJ(e,t,n){return rJ.apply(this,arguments)}function rJ(){return rJ=(0,ke.Z)((0,be.Z)().mark((function e(t,n,r){var a,i,o,s,u,c,l,d,f,h;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,a=Object.assign(Object.assign({},YQ),n),e.prev=2,i=new sJ(t),e.next=6,Promise.race([r(),i.promise]);case 6:return o=e.sent,i.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(s=e.sent))){e.next=13;break}throw uJ(t,"account-exists-with-different-credential",s);case 13:if(!o.ok||"errorMessage"in s){e.next=17;break}return e.abrupt("return",s);case 17:if(u=o.ok?s.errorMessage:s.error.message,c=u.split(" : "),l=(0,ge.Z)(c,2),d=l[0],f=l[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==d){e.next=23;break}throw uJ(t,"credential-already-in-use",s);case 23:if("EMAIL_EXISTS"!==d){e.next=27;break}throw uJ(t,"email-already-in-use",s);case 27:if("USER_DISABLED"!==d){e.next=29;break}throw uJ(t,"user-disabled",s);case 29:if(h=a[d]||d.toLowerCase().replace(/[_\s]+/g,"-"),!f){e.next=34;break}throw MQ(t,h,f);case 34:LQ(t,h);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof MX)){e.next=41;break}throw e.t0;case 41:LQ(t,"network-request-failed",{message:String(e.t0)});case 42:case"end":return e.stop()}}),e,null,[[2,37]])}))),rJ.apply(this,arguments)}function aJ(e,t,n,r){return iJ.apply(this,arguments)}function iJ(){return iJ=(0,ke.Z)((0,be.Z)().mark((function e(t,n,r,a){var i,o,s=arguments;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=s.length>4&&void 0!==s[4]?s[4]:{},e.next=3,eJ(t,n,r,a,i);case 3:return"mfaPendingCredential"in(o=e.sent)&&LQ(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),iJ.apply(this,arguments)}function oJ(e,t,n,r){var a="".concat(t).concat(n,"?").concat(r);return e.config.emulator?KQ(e.config,a):"".concat(e.config.apiScheme,"://").concat(a)}var sJ=function(){function e(t){var n=this;(0,Se.Z)(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(FQ(n.auth,"network-request-failed"))}),QQ.get())}))}return(0,Te.Z)(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function uJ(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var a=FQ(e,t,r);return a.customData._tokenResponse=n,a}function cJ(e,t){return lJ.apply(this,arguments)}function lJ(){return(lJ=(0,ke.Z)((0,be.Z)().mark((function e(t,n){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",eJ(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function dJ(e,t){return fJ.apply(this,arguments)}function fJ(){return(fJ=(0,ke.Z)((0,be.Z)().mark((function e(t,n){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",eJ(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hJ(e,t){return pJ.apply(this,arguments)}function pJ(){return(pJ=(0,ke.Z)((0,be.Z)().mark((function e(t,n){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",eJ(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vJ(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function mJ(){return mJ=(0,ke.Z)((0,be.Z)().mark((function e(t){var n,r,a,i,o,s,u=arguments;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]&&u[1],r=KX(t),e.next=4,r.getIdToken(n);case 4:return a=e.sent,BQ((i=yJ(a))&&i.exp&&i.auth_time&&i.iat,r.auth,"internal-error"),o="object"===typeof i.firebase?i.firebase:void 0,s=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:i,token:a,authTime:vJ(gJ(i.auth_time)),issuedAtTime:vJ(gJ(i.iat)),expirationTime:vJ(gJ(i.exp)),signInProvider:s||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),mJ.apply(this,arguments)}function gJ(e){return 1e3*Number(e)}function yJ(e){var t=e.split("."),n=(0,ge.Z)(t,3),r=n[0],a=n[1],i=n[2];if(void 0===r||void 0===a||void 0===i)return OQ("JWT malformed, contained fewer than 3 sections"),null;try{var o=SX(a);return o?JSON.parse(o):(OQ("Failed to decode base64 JWT payload"),null)}catch(s){return OQ("Caught error parsing JWT payload as JSON",null===s||void 0===s?void 0:s.toString()),null}}function bJ(e,t){return kJ.apply(this,arguments)}function kJ(){return kJ=(0,ke.Z)((0,be.Z)().mark((function e(t,n){var r=arguments;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof MX&&wJ(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),kJ.apply(this,arguments)}function wJ(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var xJ=function(){function e(t){(0,Se.Z)(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return(0,Te.Z)(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout((0,ke.Z)((0,be.Z)().mark((function t(){return(0,be.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),IJ=function(){function e(t,n){(0,Se.Z)(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return(0,Te.Z)(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=vJ(this.lastLoginAt),this.creationTime=vJ(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function SJ(e){return TJ.apply(this,arguments)}function TJ(){return TJ=(0,ke.Z)((0,be.Z)().mark((function e(t){var n,r,a,i,o,s,u,c,l,d,f;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,e.next=6,bJ(t,hJ(r,{idToken:a}));case 6:BQ(null===(i=e.sent)||void 0===i?void 0:i.users.length,r,"internal-error"),o=i.users[0],t._notifyReloadListener(o),s=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?o.providerUserInfo.map((function(e){var t=e.providerId,n=xt(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[],u=NJ(t.providerData,s),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===u||void 0===u?void 0:u.length),d=!!c&&l,f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new IJ(o.createdAt,o.lastLoginAt),isAnonymous:d},Object.assign(t,f);case 17:case"end":return e.stop()}}),e)}))),TJ.apply(this,arguments)}function EJ(){return(EJ=(0,ke.Z)((0,be.Z)().mark((function e(t){var n;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=KX(t),e.next=3,SJ(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function NJ(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat((0,me.Z)(n),(0,me.Z)(t))}function CJ(e,t){return ZJ.apply(this,arguments)}function ZJ(){return ZJ=(0,ke.Z)((0,be.Z)().mark((function e(t,n){var r;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nJ(t,{},(0,ke.Z)((0,be.Z)().mark((function e(){var r,a,i,o,s,u;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=WX({grant_type:"refresh_token",refresh_token:n}).slice(1),a=t.config,i=a.tokenApiHost,o=a.apiKey,s=oJ(t,i,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(u=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",XQ.fetch()(s,{method:"POST",headers:u,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)}))),ZJ.apply(this,arguments)}var _J=function(){function e(){(0,Se.Z)(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return(0,Te.Z)(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){BQ(e.idToken,"internal-error"),BQ("undefined"!==typeof e.idToken,"internal-error"),BQ("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=yJ(e);return BQ(t,"internal-error"),BQ("undefined"!==typeof t.exp,"internal-error"),BQ("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){var n,r=arguments;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],BQ(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t,n){var r,a,i,o;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,CJ(t,n);case 2:r=e.sent,a=r.accessToken,i=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(a,i,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return VQ("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,a=n.accessToken,i=n.expirationTime,o=new e;return r&&(BQ("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),a&&(BQ("string"===typeof a,"internal-error",{appName:t}),o.accessToken=a),i&&(BQ("number"===typeof i,"internal-error",{appName:t}),o.expirationTime=i),o}}]),e}();function AJ(e,t){BQ("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var RJ=function(){function e(t){(0,Se.Z)(this,e);var n=t.uid,r=t.auth,a=t.stsTokenManager,i=xt(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new xJ(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?(0,me.Z)(i.providerData):[],this.metadata=new IJ(i.createdAt||void 0,i.lastLoginAt||void 0)}return(0,Te.Z)(e,[{key:"getIdToken",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){var n;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bJ(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(BQ(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return mJ.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return EJ.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(BQ(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){var n=new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}},{key:"_onReload",value:function(e){BQ(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){var n,r,a=arguments;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.length>1&&void 0!==a[1]&&a[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,SJ(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){var t;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,bJ(this,cJ(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,a,i,o,s,u,c,l,d=null!==(r=n.displayName)&&void 0!==r?r:void 0,f=null!==(a=n.email)&&void 0!==a?a:void 0,h=null!==(i=n.phoneNumber)&&void 0!==i?i:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(s=n.tenantId)&&void 0!==s?s:void 0,m=null!==(u=n._redirectEventId)&&void 0!==u?u:void 0,g=null!==(c=n.createdAt)&&void 0!==c?c:void 0,y=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,b=n.uid,k=n.emailVerified,w=n.isAnonymous,x=n.providerData,I=n.stsTokenManager;BQ(b&&I,t,"internal-error");var S=_J.fromJSON(this.name,I);BQ("string"===typeof b,t,"internal-error"),AJ(d,t.name),AJ(f,t.name),BQ("boolean"===typeof k,t,"internal-error"),BQ("boolean"===typeof w,t,"internal-error"),AJ(h,t.name),AJ(p,t.name),AJ(v,t.name),AJ(m,t.name),AJ(g,t.name),AJ(y,t.name);var T=new e({uid:b,auth:t,email:f,emailVerified:k,displayName:d,isAnonymous:w,photoURL:p,phoneNumber:h,tenantId:v,stsTokenManager:S,createdAt:g,lastLoginAt:y});return x&&Array.isArray(x)&&(T.providerData=x.map((function(e){return Object.assign({},e)}))),m&&(T._redirectEventId=m),T}},{key:"_fromIdTokenResponse",value:function(){var t=(0,ke.Z)((0,be.Z)().mark((function t(n,r){var a,i,o,s=arguments;return(0,be.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=s.length>2&&void 0!==s[2]&&s[2],(i=new _J).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:i,isAnonymous:a}),t.next=6,SJ(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),DJ=function(){function e(){(0,Se.Z)(this,e),this.type="NONE",this.storage={}}return(0,Te.Z)(e,[{key:"_isAvailable",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t,n){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){var n;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();DJ.type="NONE";var OJ=DJ;function LJ(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var FJ=function(){function e(t,n,r){(0,Se.Z)(this,e),this.persistence=t,this.auth=n,this.userKey=r;var a=this.auth,i=a.config,o=a.name;this.fullUserKey=LJ(this.userKey,i.apiKey,o),this.fullPersistenceKey=LJ("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return(0,Te.Z)(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){var t;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?RJ._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){var n;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=(0,ke.Z)((0,be.Z)().mark((function t(n,r){var a,i,o,s,u,c,l,d,f,h,p,v=arguments;return(0,be.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(jQ(OJ),n,a));case 3:return t.next=5,Promise.all(r.map(function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:i=t.sent.filter((function(e){return e})),o=i[0]||jQ(OJ),s=LJ(a,n.config.apiKey,n.name),u=null,c=(0,Ht.Z)(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return d=l.value,t.prev=14,t.next=17,d._get(s);case 17:if(!(f=t.sent)){t.next=23;break}return h=RJ._fromJSON(n,f),d!==o&&(u=h),o=d,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=i.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,a));case 40:if(o=p[0],!u){t.next=44;break}return t.next=44,o._set(s,u.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(s);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,a));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function MJ(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(VJ(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(PJ(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(WJ(t))return"Blackberry";if(jJ(t))return"Webos";if(zJ(t))return"Safari";if((t.includes("chrome/")||BJ(t))&&!t.includes("edge/"))return"Chrome";if(UJ(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function PJ(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:AX();return/firefox\//i.test(e)}function zJ(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:AX()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function BJ(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:AX();return/crios\//i.test(e)}function VJ(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:AX();return/iemobile/i.test(e)}function UJ(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:AX();return/android/i.test(e)}function WJ(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:AX();return/blackberry/i.test(e)}function jJ(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:AX();return/webos/i.test(e)}function GJ(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:AX();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function HJ(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:AX();return GJ(e)||UJ(e)||jJ(e)||WJ(e)||/windows phone/i.test(e)||VJ(e)}function qJ(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=MJ(AX());break;case"Worker":t="".concat(MJ(AX()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(jY,"/").concat(r)}var $J=function(){function e(t){(0,Se.Z)(this,e),this.auth=t,this.queue=[]}return(0,Te.Z)(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(a){r(a)}}))};r.onAbort=t,this.queue.push(r);var a=this.queue.length-1;return function(){n.queue[a]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){var n,r,a,i,o,s,u;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:n=[],e.prev=3,r=(0,Ht.Z)(this.queue),e.prev=5,r.s();case 7:if((a=r.n()).done){e.next=14;break}return i=a.value,e.next=11,i(t);case 11:i.onAbort&&n.push(i.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),r.e(e.t0);case 19:return e.prev=19,r.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),n.reverse(),o=(0,Ht.Z)(n);try{for(o.s();!(s=o.n()).done;){u=s.value;try{u()}catch(c){}}}catch(yhe){o.e(yhe)}finally{o.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===e.t1||void 0===e.t1?void 0:e.t1.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),KJ=function(){function e(t,n,r){(0,Se.Z)(this,e),this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new YJ(this),this.idTokenSubscription=new YJ(this),this.beforeStateQueue=new $J(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=RQ,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return(0,Te.Z)(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=jQ(t)),this._initializationPromise=this.queue((0,ke.Z)((0,be.Z)().mark((function r(){var a,i;return(0,be.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,FJ.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(a=n._popupRedirectResolver)||void 0===a?void 0:a._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(i=n.currentUser)||void 0===i?void 0:i.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){var t;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){var n,r,a,i,o,s,u;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,a=r,i=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,s=null===a||void 0===a?void 0:a._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:u=e.sent,o&&o!==s||!(null===u||void 0===u?void 0:u.user)||(a=u.user,i=!0);case 14:if(a){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(a._redirectEventId){e.next=32;break}if(!i){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(a);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),a=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!a){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(a));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return BQ(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==a._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(a));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(a));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){var n;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,SJ(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){var n;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?KX(t):null)&&BQ(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){var n,r=this,a=arguments;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.length>1&&void 0!==a[1]&&a[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&BQ(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue((0,ke.Z)((0,be.Z)().mark((function e(){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue((0,ke.Z)((0,be.Z)().mark((function n(){return(0,be.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(jQ(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new PX("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t,n){var r;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){var n;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return BQ(n=t&&jQ(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,FJ.create(this,[jQ(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){var n,r;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue((0,ke.Z)((0,be.Z)().mark((function e(){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){var n=this;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue((0,ke.Z)((0,be.Z)().mark((function e(){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var a=this;if(this._deleted)return function(){};var i="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return BQ(o,this,"internal-error"),o.then((function(){return i(a.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,!t){e.next=8;break}return e.next=6,this.assertedPersistence.setCurrentUser(t);case 6:e.next=10;break;case 8:return e.next=10,this.assertedPersistence.removeCurrentUser();case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return BQ(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=qJ(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){var t,n,r;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,ye.Z)({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function XJ(e){return KX(e)}var YJ=function(){function e(t){var n=this;(0,Se.Z)(this,e),this.auth=t,this.observer=null,this.addObserver=HX((function(e){return n.observer=e}))}return(0,Te.Z)(e,[{key:"next",get:function(){return BQ(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function QJ(e,t,n){var r=XJ(e);BQ(r._canInitEmulator,r,"emulator-config-failed"),BQ(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var a=!!(null===n||void 0===n?void 0:n.disableWarnings),i=JJ(t),o=function(e){var t=JJ(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(r);if(a){var i=a[1];return{host:i,port:e0(r.substr(i.length+1))}}var o=r.split(":"),s=(0,ge.Z)(o,2);return{host:s[0],port:e0(s[1])}}(t),s=o.host,u=o.port,c=null===u?"":":".concat(u);r.config.emulator={url:"".concat(i,"//").concat(s).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:u,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:a})}),a||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function JJ(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function e0(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var t0=function(){function e(t,n){(0,Se.Z)(this,e),this.providerId=t,this.signInMethod=n}return(0,Te.Z)(e,[{key:"toJSON",value:function(){return VQ("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return VQ("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return VQ("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return VQ("not implemented")}}]),e}();function n0(e,t){return r0.apply(this,arguments)}function r0(){return(r0=(0,ke.Z)((0,be.Z)().mark((function e(t,n){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",eJ(t,"POST","/v1/accounts:resetPassword",JQ(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function a0(e,t){return i0.apply(this,arguments)}function i0(){return(i0=(0,ke.Z)((0,be.Z)().mark((function e(t,n){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",eJ(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function o0(e,t){return s0.apply(this,arguments)}function s0(){return(s0=(0,ke.Z)((0,be.Z)().mark((function e(t,n){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",eJ(t,"POST","/v1/accounts:update",JQ(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u0(e,t){return c0.apply(this,arguments)}function c0(){return(c0=(0,ke.Z)((0,be.Z)().mark((function e(t,n){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",aJ(t,"POST","/v1/accounts:signInWithPassword",JQ(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l0(e,t){return d0.apply(this,arguments)}function d0(){return(d0=(0,ke.Z)((0,be.Z)().mark((function e(t,n){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",eJ(t,"POST","/v1/accounts:sendOobCode",JQ(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f0(e,t){return h0.apply(this,arguments)}function h0(){return(h0=(0,ke.Z)((0,be.Z)().mark((function e(t,n){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",l0(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p0(e,t){return v0.apply(this,arguments)}function v0(){return(v0=(0,ke.Z)((0,be.Z)().mark((function e(t,n){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",l0(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m0(e,t){return g0.apply(this,arguments)}function g0(){return(g0=(0,ke.Z)((0,be.Z)().mark((function e(t,n){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",l0(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y0(e,t){return b0.apply(this,arguments)}function b0(){return(b0=(0,ke.Z)((0,be.Z)().mark((function e(t,n){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",l0(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k0(e,t){return w0.apply(this,arguments)}function w0(){return(w0=(0,ke.Z)((0,be.Z)().mark((function e(t,n){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",aJ(t,"POST","/v1/accounts:signInWithEmailLink",JQ(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x0(e,t){return I0.apply(this,arguments)}function I0(){return(I0=(0,ke.Z)((0,be.Z)().mark((function e(t,n){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",aJ(t,"POST","/v1/accounts:signInWithEmailLink",JQ(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var S0=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e,r,a){var i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return(0,Se.Z)(this,n),(i=t.call(this,"password",a))._email=e,i._password=r,i._tenantId=o,i}return(0,Te.Z)(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",u0(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",k0(t,{email:this._email,oobCode:this._password}));case 5:LQ(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t,n){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",a0(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",x0(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:LQ(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){return new n(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(t0);function T0(e,t){return E0.apply(this,arguments)}function E0(){return(E0=(0,ke.Z)((0,be.Z)().mark((function e(t,n){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",aJ(t,"POST","/v1/accounts:signInWithIdp",JQ(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var N0=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(){var e;return(0,Se.Z)(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return(0,Te.Z)(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return T0(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,T0(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,T0(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=WX(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):LQ("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,a=t.signInMethod,i=xt(t,["providerId","signInMethod"]);if(!r||!a)return null;var o=new n(r,a);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}}]),n}(t0);function C0(e,t){return Z0.apply(this,arguments)}function Z0(){return(Z0=(0,ke.Z)((0,be.Z)().mark((function e(t,n){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",eJ(t,"POST","/v1/accounts:sendVerificationCode",JQ(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _0(){return(_0=(0,ke.Z)((0,be.Z)().mark((function e(t,n){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",aJ(t,"POST","/v1/accounts:signInWithPhoneNumber",JQ(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A0(){return(A0=(0,ke.Z)((0,be.Z)().mark((function e(t,n){var r;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,aJ(t,"POST","/v1/accounts:signInWithPhoneNumber",JQ(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw uJ(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var R0=(0,ye.Z)({},"USER_NOT_FOUND","user-not-found");function D0(){return(D0=(0,ke.Z)((0,be.Z)().mark((function e(t,n){var r;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",aJ(t,"POST","/v1/accounts:signInWithPhoneNumber",JQ(t,r),R0));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var O0=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r;return(0,Se.Z)(this,n),(r=t.call(this,"phone","phone")).params=e,r}return(0,Te.Z)(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return _0.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return A0.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return D0.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,a=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:a}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,a=t.verificationCode,i=t.phoneNumber,o=t.temporaryProof;return a||r||i||o?new n({verificationId:r,verificationCode:a,phoneNumber:i,temporaryProof:o}):null}}]),n}(t0);var L0=function(){function e(t){var n,r,a,i,o,s;(0,Se.Z)(this,e);var u=jX(GX(t)),c=null!==(n=u.apiKey)&&void 0!==n?n:null,l=null!==(r=u.oobCode)&&void 0!==r?r:null,d=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(a=u.mode)&&void 0!==a?a:null);BQ(c&&l&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=l,this.continueUrl=null!==(i=u.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(o=u.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(s=u.tenantId)&&void 0!==s?s:null}return(0,Te.Z)(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=jX(GX(e)).link,n=t?jX(GX(t)).deep_link_id:null,r=jX(GX(e)).deep_link_id;return(r?jX(GX(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(rle){return null}}}]),e}();var F0=function(){function e(){(0,Se.Z)(this,e),this.providerId=e.PROVIDER_ID}return(0,Te.Z)(e,null,[{key:"credential",value:function(e,t){return S0._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=L0.parseLink(t);return BQ(n,"argument-error"),S0._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();F0.PROVIDER_ID="password",F0.EMAIL_PASSWORD_SIGN_IN_METHOD="password",F0.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var M0=function(){function e(t){(0,Se.Z)(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return(0,Te.Z)(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),P0=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(){var e;return(0,Se.Z)(this,n),(e=t.apply(this,arguments)).scopes=[],e}return(0,Te.Z)(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return(0,me.Z)(this.scopes)}}]),n}(M0),z0=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(){return(0,Se.Z)(this,n),t.apply(this,arguments)}return(0,Te.Z)(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return BQ(e.idToken||e.accessToken,"argument-error"),N0._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return BQ("providerId"in t&&"signInMethod"in t,"argument-error"),N0._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,a=t.oauthAccessToken,i=t.oauthTokenSecret,o=t.pendingToken,s=t.nonce,u=t.providerId;if(!a&&!i&&!r&&!o)return null;if(!u)return null;try{return new n(u)._credential({idToken:r,accessToken:a,nonce:s,pendingToken:o})}catch(c){return null}}}]),n}(P0),B0=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(){return(0,Se.Z)(this,n),t.call(this,"facebook.com")}return(0,Te.Z)(n,null,[{key:"credential",value:function(e){return N0._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(rle){return null}}}]),n}(P0);B0.FACEBOOK_SIGN_IN_METHOD="facebook.com",B0.PROVIDER_ID="facebook.com";var V0=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(){var e;return(0,Se.Z)(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return(0,Te.Z)(n,null,[{key:"credential",value:function(e,t){return N0._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,a=t.oauthAccessToken;if(!r&&!a)return null;try{return n.credential(r,a)}catch(rle){return null}}}]),n}(P0);V0.GOOGLE_SIGN_IN_METHOD="google.com",V0.PROVIDER_ID="google.com";var U0=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(){return(0,Se.Z)(this,n),t.call(this,"github.com")}return(0,Te.Z)(n,null,[{key:"credential",value:function(e){return N0._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(rle){return null}}}]),n}(P0);U0.GITHUB_SIGN_IN_METHOD="github.com",U0.PROVIDER_ID="github.com";var W0=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e,r){var a;return(0,Se.Z)(this,n),(a=t.call(this,e,e)).pendingToken=r,a}return(0,Te.Z)(n,[{key:"_getIdTokenResponse",value:function(e){return T0(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,T0(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,T0(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,a=t.signInMethod,i=t.pendingToken;return r&&a&&i&&r===a?new n(r,i):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(t0),j0=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){return(0,Se.Z)(this,n),BQ(e.startsWith("saml."),"argument-error"),t.call(this,e)}return(0,Te.Z)(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=W0.fromJSON(e);return BQ(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return W0._create(r,n)}catch(a){return null}}}]),n}(M0),G0=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(){return(0,Se.Z)(this,n),t.call(this,"twitter.com")}return(0,Te.Z)(n,null,[{key:"credential",value:function(e,t){return N0._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,a=t.oauthTokenSecret;if(!r||!a)return null;try{return n.credential(r,a)}catch(rle){return null}}}]),n}(P0);function H0(e,t){return q0.apply(this,arguments)}function q0(){return(q0=(0,ke.Z)((0,be.Z)().mark((function e(t,n){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",aJ(t,"POST","/v1/accounts:signUp",JQ(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}G0.TWITTER_SIGN_IN_METHOD="twitter.com",G0.PROVIDER_ID="twitter.com";var $0=function(){function e(t){(0,Se.Z)(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return(0,Te.Z)(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=(0,ke.Z)((0,be.Z)().mark((function t(n,r,a){var i,o,s,u,c=arguments;return(0,be.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=c.length>3&&void 0!==c[3]&&c[3],t.next=3,RJ._fromIdTokenResponse(n,a,i);case 3:return o=t.sent,s=K0(a),u=new e({user:o,providerId:s,_tokenResponse:a,operationType:r}),t.abrupt("return",u);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=(0,ke.Z)((0,be.Z)().mark((function t(n,r,a){var i;return(0,be.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(a,!0);case 2:return i=K0(a),t.abrupt("return",new e({user:n,providerId:i,_tokenResponse:a,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function K0(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function X0(){return X0=(0,ke.Z)((0,be.Z)().mark((function e(t){var n,r,a,i;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=XJ(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new $0({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,H0(r,{returnSecureToken:!0});case 7:return a=e.sent,e.next=10,$0._fromIdTokenResponse(r,"signIn",a,!0);case 10:return i=e.sent,e.next=13,r._updateCurrentUser(i.user);case 13:return e.abrupt("return",i);case 14:case"end":return e.stop()}}),e)}))),X0.apply(this,arguments)}var Y0=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e,r,a,i){var o,s;return(0,Se.Z)(this,n),(o=t.call(this,r.code,r.message)).operationType=a,o.user=i,Object.setPrototypeOf((0,we.Z)(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:r.customData._serverResponse,operationType:a},o}return(0,Te.Z)(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,a){return new n(e,t,r,a)}}]),n}(MX);function Q0(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw Y0._fromErrorAndOperation(e,n,t,r);throw n}))}function J0(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function e1(e,t){return t1.apply(this,arguments)}function t1(){return t1=(0,ke.Z)((0,be.Z)().mark((function e(t,n){var r,a,i,o;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=KX(t),e.next=3,a1(!0,r,n);case 3:return e.t0=dJ,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return a=e.sent,i=a.providerUserInfo,o=J0(i||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),t1.apply(this,arguments)}function n1(e,t){return r1.apply(this,arguments)}function r1(){return r1=(0,ke.Z)((0,be.Z)().mark((function e(t,n){var r,a,i=arguments;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>2&&void 0!==i[2]&&i[2],e.t0=bJ,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return a=e.sent,e.abrupt("return",$0._forOperation(t,"link",a));case 14:case"end":return e.stop()}}),e)}))),r1.apply(this,arguments)}function a1(e,t,n){return i1.apply(this,arguments)}function i1(){return i1=(0,ke.Z)((0,be.Z)().mark((function e(t,n,r){var a,i;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,SJ(n);case 2:a=J0(n.providerData),i=!1===t?"provider-already-linked":"no-such-provider",BQ(a.has(r)===t,n.auth,i);case 5:case"end":return e.stop()}}),e)}))),i1.apply(this,arguments)}function o1(e,t){return s1.apply(this,arguments)}function s1(){return s1=(0,ke.Z)((0,be.Z)().mark((function e(t,n){var r,a,i,o,s,u,c=arguments;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],a=t.auth,i="reauthenticate",e.prev=3,e.next=6,bJ(t,Q0(a,i,n,t),r);case 6:return BQ((o=e.sent).idToken,a,"internal-error"),BQ(s=yJ(o.idToken),a,"internal-error"),u=s.sub,BQ(t.uid===u,a,"user-mismatch"),e.abrupt("return",$0._forOperation(t,i,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&LQ(a,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),s1.apply(this,arguments)}function u1(e,t){return c1.apply(this,arguments)}function c1(){return c1=(0,ke.Z)((0,be.Z)().mark((function e(t,n){var r,a,i,o,s=arguments;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],a="signIn",e.next=4,Q0(t,a,n);case 4:return i=e.sent,e.next=7,$0._fromIdTokenResponse(t,a,i);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),c1.apply(this,arguments)}function l1(e,t){return d1.apply(this,arguments)}function d1(){return(d1=(0,ke.Z)((0,be.Z)().mark((function e(t,n){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",u1(XJ(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f1(e,t){return h1.apply(this,arguments)}function h1(){return(h1=(0,ke.Z)((0,be.Z)().mark((function e(t,n){var r;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=KX(t),e.next=3,a1(!1,r,n.providerId);case 3:return e.abrupt("return",n1(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p1(e,t){return v1.apply(this,arguments)}function v1(){return(v1=(0,ke.Z)((0,be.Z)().mark((function e(t,n){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",o1(KX(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m1(e,t){return g1.apply(this,arguments)}function g1(){return(g1=(0,ke.Z)((0,be.Z)().mark((function e(t,n){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",aJ(t,"POST","/v1/accounts:signInWithCustomToken",JQ(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y1(){return(y1=(0,ke.Z)((0,be.Z)().mark((function e(t,n){var r,a,i;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=XJ(t),e.next=3,m1(r,{token:n,returnSecureToken:!0});case 3:return a=e.sent,e.next=6,$0._fromIdTokenResponse(r,"signIn",a);case 6:return i=e.sent,e.next=9,r._updateCurrentUser(i.user);case 9:return e.abrupt("return",i);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var b1=function(){function e(t,n){(0,Se.Z)(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return(0,Te.Z)(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?k1._fromServerResponse(e,t):"totpInfo"in t?w1._fromServerResponse(e,t):LQ(e,"internal-error")}}]),e}(),k1=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r;return(0,Se.Z)(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return(0,Te.Z)(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(b1),w1=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){return(0,Se.Z)(this,n),t.call(this,"totp",e)}return(0,Te.Z)(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(b1);function x1(e,t,n){var r;BQ((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),BQ("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(BQ(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(BQ(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function I1(){return(I1=(0,ke.Z)((0,be.Z)().mark((function e(t,n,r){var a,i;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=KX(t),i={requestType:"PASSWORD_RESET",email:n},r&&x1(a,i,r),e.next=5,p0(a,i);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S1(){return(S1=(0,ke.Z)((0,be.Z)().mark((function e(t,n,r){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n0(KX(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T1(){return(T1=(0,ke.Z)((0,be.Z)().mark((function e(t,n){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o0(KX(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E1(e,t){return N1.apply(this,arguments)}function N1(){return(N1=(0,ke.Z)((0,be.Z)().mark((function e(t,n){var r,a,i,o;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=KX(t),e.next=3,n0(r,{oobCode:n});case 3:a=e.sent,BQ(i=a.requestType,r,"internal-error"),e.t0=i,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return BQ(a.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:BQ(a.mfaInfo,r,"internal-error");case 13:BQ(a.email,r,"internal-error");case 14:return o=null,a.mfaInfo&&(o=b1._fromServerResponse(XJ(r),a.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===a.requestType?a.newEmail:a.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===a.requestType?a.email:a.newEmail)||null,multiFactorInfo:o},operation:i});case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C1(){return C1=(0,ke.Z)((0,be.Z)().mark((function e(t,n){var r,a;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E1(KX(t),n);case 2:return r=e.sent,a=r.data,e.abrupt("return",a.email);case 5:case"end":return e.stop()}}),e)}))),C1.apply(this,arguments)}function Z1(e,t,n){return _1.apply(this,arguments)}function _1(){return(_1=(0,ke.Z)((0,be.Z)().mark((function e(t,n,r){var a,i,o;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=XJ(t),e.next=3,H0(a,{returnSecureToken:!0,email:n,password:r});case 3:return i=e.sent,e.next=6,$0._fromIdTokenResponse(a,"signIn",i);case 6:return o=e.sent,e.next=9,a._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A1(){return(A1=(0,ke.Z)((0,be.Z)().mark((function e(t,n,r){var a,i;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=KX(t),i={requestType:"EMAIL_SIGNIN",email:n},BQ(r.handleCodeInApp,a,"argument-error"),r&&x1(a,i,r),e.next=6,m0(a,i);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R1(){return(R1=(0,ke.Z)((0,be.Z)().mark((function e(t,n,r){var a,i;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=KX(t),BQ((i=F0.credentialWithLink(n,r||GQ()))._tenantId===(a.tenantId||null),a,"tenant-id-mismatch"),e.abrupt("return",l1(a,i));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D1(e,t){return O1.apply(this,arguments)}function O1(){return(O1=(0,ke.Z)((0,be.Z)().mark((function e(t,n){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",eJ(t,"POST","/v1/accounts:createAuthUri",JQ(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L1(){return(L1=(0,ke.Z)((0,be.Z)().mark((function e(t,n){var r,a,i,o;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=HQ()?GQ():"http://localhost",a={identifier:n,continueUri:r},e.next=4,D1(KX(t),a);case 4:return i=e.sent,o=i.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F1(){return(F1=(0,ke.Z)((0,be.Z)().mark((function e(t,n){var r,a,i,o;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=KX(t),e.next=3,t.getIdToken();case 3:return a=e.sent,i={requestType:"VERIFY_EMAIL",idToken:a},n&&x1(r.auth,i,n),e.next=8,f0(r.auth,i);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M1(){return(M1=(0,ke.Z)((0,be.Z)().mark((function e(t,n,r){var a,i,o,s;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=KX(t),e.next=3,t.getIdToken();case 3:return i=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:i,newEmail:n},r&&x1(a.auth,o,r),e.next=8,y0(a.auth,o);case 8:if(s=e.sent,s.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P1(e,t){return z1.apply(this,arguments)}function z1(){return(z1=(0,ke.Z)((0,be.Z)().mark((function e(t,n){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",eJ(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B1(){return(B1=(0,ke.Z)((0,be.Z)().mark((function e(t,n){var r,a,i,o,s,u,c;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,a=n.photoURL,void 0!==r||void 0!==a){e.next=3;break}return e.abrupt("return");case 3:return i=KX(t),e.next=6,i.getIdToken();case 6:return o=e.sent,s={idToken:o,displayName:r,photoUrl:a,returnSecureToken:!0},e.next=10,bJ(i,P1(i.auth,s));case 10:return u=e.sent,i.displayName=u.displayName||null,i.photoURL=u.photoUrl||null,(c=i.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=i.displayName,c.photoURL=i.photoURL),e.next=17,i._updateTokensIfNecessary(u);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V1(e,t,n){return U1.apply(this,arguments)}function U1(){return(U1=(0,ke.Z)((0,be.Z)().mark((function e(t,n,r){var a,i,o,s;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,o={idToken:i,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,bJ(t,a0(a,o));case 9:return s=e.sent,e.next=12,t._updateTokensIfNecessary(s,!0);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var W1=(0,Te.Z)((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,Se.Z)(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),j1=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e,r,a,i){var o;return(0,Se.Z)(this,n),(o=t.call(this,e,r,a)).username=i,o}return(0,Te.Z)(n)}(W1),G1=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e,r){return(0,Se.Z)(this,n),t.call(this,e,"facebook.com",r)}return(0,Te.Z)(n)}(W1),H1=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e,r){return(0,Se.Z)(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return(0,Te.Z)(n)}(j1),q1=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e,r){return(0,Se.Z)(this,n),t.call(this,e,"google.com",r)}return(0,Te.Z)(n)}(W1),$1=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e,r,a){return(0,Se.Z)(this,n),t.call(this,e,"twitter.com",r,a)}return(0,Te.Z)(n)}(j1);function K1(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,a=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},i=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=yJ(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new W1(i,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new G1(i,a);case"github.com":return new H1(i,a);case"google.com":return new q1(i,a);case"twitter.com":return new $1(i,a,e.screenName||null);case"custom":case"anonymous":return new W1(i,null);default:return new W1(i,r,a)}}(n)}var X1=function(){function e(t,n,r){(0,Se.Z)(this,e),this.type=t,this.credential=n,this.auth=r}return(0,Te.Z)(e,[{key:"toJSON",value:function(){var e="enroll"===this.type?"idToken":"pendingCredential";return{multiFactorSession:(0,ye.Z)({},e,this.credential)}}}],[{key:"_fromIdtoken",value:function(t,n){return new e("enroll",t,n)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),Y1=function(){function e(t,n,r){(0,Se.Z)(this,e),this.session=t,this.hints=n,this.signInResolver=r}return(0,Te.Z)(e,[{key:"resolveSignIn",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){var n;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=XJ(t),a=n.customData._serverResponse,i=(a.mfaInfo||[]).map((function(e){return b1._fromServerResponse(r,e)}));BQ(a.mfaPendingCredential,r,"internal-error");var o=X1._fromMfaPendingCredential(a.mfaPendingCredential);return new e(o,i,function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){var i,s,u;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:i=e.sent,delete a.mfaInfo,delete a.mfaPendingCredential,s=Object.assign(Object.assign({},a),{idToken:i.idToken,refreshToken:i.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,$0._fromIdTokenResponse(r,n.operationType,s);case 11:return u=e.sent,e.next=14,r._updateCurrentUser(u.user);case 14:return e.abrupt("return",u);case 15:return BQ(n.user,r,"internal-error"),e.abrupt("return",$0._forOperation(n.user,n.operationType,s));case 17:LQ(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function Q1(e,t){return eJ(e,"POST","/v2/accounts/mfaEnrollment:start",JQ(e,t))}function J1(e,t){return eJ(e,"POST","/v2/accounts/mfaEnrollment:finalize",JQ(e,t))}var e2=function(){function e(t){var n=this;(0,Se.Z)(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return b1._fromServerResponse(t.auth,e)})))}))}return(0,Te.Z)(e,[{key:"getSession",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=X1,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.t2=this.user.auth,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1,e.t2));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t,n){var r,a,i;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return a=e.sent,e.next=6,bJ(this.user,r._process(this.user.auth,a,n));case 6:return i=e.sent,e.next=9,this.user._updateTokensIfNecessary(i);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){var n,r,a;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.prev=4,e.next=7,bJ(this.user,eJ(i=this.user.auth,"POST","/v2/accounts/mfaEnrollment:withdraw",JQ(i,{idToken:r,mfaEnrollmentId:n})));case 7:return a=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=11,this.user._updateTokensIfNecessary(a);case 11:return e.next=13,this.user.reload();case 13:e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(4),e.t0;case 18:case"end":return e.stop()}var i}),e,this,[[4,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),t2=new WeakMap;var n2="__sak",r2=function(){function e(t,n){(0,Se.Z)(this,e),this.storageRetriever=t,this.type=n}return(0,Te.Z)(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(n2,"1"),this.storage.removeItem(n2),Promise.resolve(!0)):Promise.resolve(!1)}catch(rle){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var a2=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(){var e;return(0,Se.Z)(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=AX();return zJ(e)||GJ(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=HJ(),e._shouldAllowMigration=!0,e}return(0,Te.Z)(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],a=this.storage.getItem(r),i=this.localCache[r];a!==i&&e(r,i,a)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var a=this.storage.getItem(r);if(e.newValue!==a)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var i=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);LX()&&10===document.documentMode&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,10):i()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,a=Array.from(n);r<a.length;r++){(0,a[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t,r){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,BN((0,zN.Z)(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){var r;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,BN((0,zN.Z)(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,BN((0,zN.Z)(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(r2);a2.type="LOCAL";var i2=a2,o2=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(){return(0,Se.Z)(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return(0,Te.Z)(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(r2);o2.type="SESSION";var s2=o2;function u2(e){return Promise.all(e.map(function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){var n;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var c2=function(){function e(t){(0,Se.Z)(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return(0,Te.Z)(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){var n,r,a,i,o,s,u,c;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,a=r.eventId,i=r.eventType,o=r.data,null===(s=this.handlersMap[i])||void 0===s?void 0:s.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:a,eventType:i}),u=Array.from(s).map(function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,u2(u);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:a,eventType:i,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function l2(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}c2.receivers=[];var d2=function(){function e(t){(0,Se.Z)(this,e),this.target=t,this.handlers=new Set}return(0,Te.Z)(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t,n){var r,a,i,o,s=this,u=arguments;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>2&&void 0!==u[2]?u[2]:50,a="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,u){var c=l2("",20);a.port1.start();var l=setTimeout((function(){u(new Error("unsupported_event"))}),r);o={messageChannel:a,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),i=setTimeout((function(){u(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),e(n.data.response);break;default:clearTimeout(l),clearTimeout(i),u(new Error("invalid_response"))}}},s.handlers.add(o),a.port1.addEventListener("message",o.onMessage),s.target.postMessage({eventType:t,eventId:c,data:n},[a.port2])})).finally((function(){o&&s.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function f2(){return window}function h2(){return"undefined"!==typeof f2().WorkerGlobalScope&&"function"===typeof f2().importScripts}function p2(){return v2.apply(this,arguments)}function v2(){return(v2=(0,ke.Z)((0,be.Z)().mark((function e(){var t;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function m2(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var g2="firebaseLocalStorageDb",y2=1,b2="firebaseLocalStorage",k2="fbase_key",w2=function(){function e(t){(0,Se.Z)(this,e),this.request=t}return(0,Te.Z)(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function x2(e,t){return e.transaction([b2],t?"readwrite":"readonly").objectStore(b2)}function I2(){var e=indexedDB.deleteDatabase(g2);return new w2(e).toPromise()}function S2(){var e=indexedDB.open(g2,y2);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(b2,{keyPath:k2})}catch(r){n(r)}})),e.addEventListener("success",(0,ke.Z)((0,be.Z)().mark((function n(){var r;return(0,be.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(b2)){n.next=12;break}return r.close(),n.next=5,I2();case 5:return n.t0=t,n.next=8,S2();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function T2(e,t,n){return E2.apply(this,arguments)}function E2(){return E2=(0,ke.Z)((0,be.Z)().mark((function e(t,n,r){var a,i;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=x2(t,!0).put((a={},(0,ye.Z)(a,k2,n),(0,ye.Z)(a,"value",r),a)),e.abrupt("return",new w2(i).toPromise());case 2:case"end":return e.stop()}}),e)}))),E2.apply(this,arguments)}function N2(e,t){return C2.apply(this,arguments)}function C2(){return C2=(0,ke.Z)((0,be.Z)().mark((function e(t,n){var r,a;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=x2(t,!1).get(n),e.next=3,new w2(r).toPromise();case 3:return a=e.sent,e.abrupt("return",void 0===a?null:a.value);case 5:case"end":return e.stop()}}),e)}))),C2.apply(this,arguments)}function Z2(e,t){var n=x2(e,!0).delete(t);return new w2(n).toPromise()}var _2=function(){function e(){(0,Se.Z)(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return(0,Te.Z)(e,[{key:"_openDb",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,S2();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){var n,r;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",h2()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){var t=this;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=c2._getInstance(h2()?self:null),this.receiver._subscribe("keyChanged",function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(n,r){var a;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return a=e.sent,e.abrupt("return",{keyProcessed:a.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t,n){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){var t,n,r;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p2();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new d2(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&m2()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){var t;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,S2();case 5:return t=e.sent,e.next=8,T2(t,n2,"1");case 8:return e.next=10,Z2(t,n2);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t,n){var r=this;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite((0,ke.Z)((0,be.Z)().mark((function e(){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return T2(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){var n;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return N2(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){var n=this;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite((0,ke.Z)((0,be.Z)().mark((function e(){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return Z2(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){var t,n,r,a,i,o,s,u,c,l,d;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=x2(e,!1).getAll();return new w2(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,a=(0,Ht.Z)(t);try{for(a.s();!(i=a.n()).done;)o=i.value,s=o.fbase_key,u=o.value,r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(u)&&(this.notifyListeners(s,u),n.push(s))}catch(yhe){a.e(yhe)}finally{a.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)d=l[c],this.localCache[d]&&!r.has(d)&&(this.notifyListeners(d,null),n.push(d));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,a=Array.from(n);r<a.length;r++){(0,a[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((0,ke.Z)((0,be.Z)().mark((function t(){return(0,be.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();_2.type="LOCAL";var A2=_2;function R2(e,t){return eJ(e,"POST","/v2/accounts/mfaSignIn:start",JQ(e,t))}function D2(e,t){return eJ(e,"POST","/v2/accounts/mfaSignIn:finalize",JQ(e,t))}function O2(e){return L2.apply(this,arguments)}function L2(){return(L2=(0,ke.Z)((0,be.Z)().mark((function e(t){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,eJ(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F2(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=FQ("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function M2(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var P2=1e12,z2=function(){function e(t){(0,Se.Z)(this,e),this.auth=t,this.counter=P2,this._widgets=new Map}return(0,Te.Z)(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new B2(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||P2;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||P2;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){var n,r;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||P2,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),B2=function(){function e(t,n,r){var a=this;(0,Se.Z)(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){a.execute()};var i="string"===typeof t?document.getElementById(t):t;BQ(i,"argument-error",{appName:n}),this.container=i,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return(0,Te.Z)(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(a){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(a){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var V2=M2("rcb"),U2=new $Q(3e4,6e4),W2=function(){function e(){var t;(0,Se.Z)(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(t=f2().grecaptcha)||void 0===t?void 0:t.render)}return(0,Te.Z)(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return BQ(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(f2().grecaptcha):new Promise((function(r,a){var i=f2().setTimeout((function(){a(FQ(e,"network-request-failed"))}),U2.get());f2()[V2]=function(){f2().clearTimeout(i),delete f2()[V2];var o=f2().grecaptcha;if(o){var s=o.render;o.render=function(e,n){var r=s(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else a(FQ(e,"internal-error"))},F2("".concat("https://www.google.com/recaptcha/api.js?","?").concat(WX({onload:V2,render:"explicit",hl:n}))).catch((function(){clearTimeout(i),a(FQ(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){var t;return!!(null===(t=f2().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();var j2=function(){function e(){(0,Se.Z)(this,e)}return(0,Te.Z)(e,[{key:"load",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new z2(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),G2="recaptcha",H2={theme:"light",type:"image"},q2=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},H2),r=arguments.length>2?arguments[2]:void 0;(0,Se.Z)(this,e),this.parameters=n,this.type=G2,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=XJ(r),this.isInvisible="invisible"===this.parameters.size,BQ("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var a="string"===typeof t?document.getElementById(t):t;BQ(a,this.auth,"argument-error"),this.container=a,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new j2:new W2,this.validateStartingState()}return(0,Te.Z)(e,[{key:"verify",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){var t,n,r,a=this;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){a.tokenChangeListeners.add((function t(n){n&&(a.tokenChangeListeners.delete(t),e(n))})),a.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){BQ(!this.parameters.sitekey,this.auth,"argument-error"),BQ(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),BQ("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=f2()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){BQ(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){var t,n;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){var t;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return BQ(HQ()&&!h2(),this.auth,"internal-error"),e.next=3,$2();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,O2(this.auth);case 8:BQ(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return BQ(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function $2(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var K2=function(){function e(t,n){(0,Se.Z)(this,e),this.verificationId=t,this.onConfirmation=n}return(0,Te.Z)(e,[{key:"confirm",value:function(e){var t=O0._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function X2(){return(X2=(0,ke.Z)((0,be.Z)().mark((function e(t,n,r){var a,i;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=XJ(t),e.next=3,e3(a,n,KX(r));case 3:return i=e.sent,e.abrupt("return",new K2(i,(function(e){return l1(a,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y2(e,t,n){return Q2.apply(this,arguments)}function Q2(){return(Q2=(0,ke.Z)((0,be.Z)().mark((function e(t,n,r){var a,i;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=KX(t),e.next=3,a1(!1,a,"phone");case 3:return e.next=5,e3(a.auth,n,KX(r));case 5:return i=e.sent,e.abrupt("return",new K2(i,(function(e){return f1(a,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J2(){return(J2=(0,ke.Z)((0,be.Z)().mark((function e(t,n,r){var a,i;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=KX(t),e.next=3,e3(a.auth,n,KX(r));case 3:return i=e.sent,e.abrupt("return",new K2(i,(function(e){return p1(a,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function e3(e,t,n){return t3.apply(this,arguments)}function t3(){return t3=(0,ke.Z)((0,be.Z)().mark((function e(t,n,r){var a,i,o,s,u,c,l,d,f;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(i=e.sent,e.prev=3,BQ("string"===typeof i,t,"argument-error"),BQ(r.type===G2,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(s=o.session,!("phoneNumber"in o)){e.next=17;break}return BQ("enroll"===s.type,t,"internal-error"),e.next=13,Q1(t,{idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:i}});case 13:return u=e.sent,e.abrupt("return",u.phoneSessionInfo.sessionInfo);case 17:return BQ("signin"===s.type,t,"internal-error"),BQ(c=(null===(a=o.multiFactorHint)||void 0===a?void 0:a.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,R2(t,{mfaPendingCredential:s.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:i}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,C0(t,{phoneNumber:o.phoneNumber,recaptchaToken:i});case 28:return d=e.sent,f=d.sessionInfo,e.abrupt("return",f);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),t3.apply(this,arguments)}function n3(){return(n3=(0,ke.Z)((0,be.Z)().mark((function e(t,n){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n1(KX(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var r3=function(){function e(t){(0,Se.Z)(this,e),this.providerId=e.PROVIDER_ID,this.auth=XJ(t)}return(0,Te.Z)(e,[{key:"verifyPhoneNumber",value:function(e,t){return e3(this.auth,e,KX(t))}}],[{key:"credential",value:function(e,t){return O0._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?O0._fromTokenResponse(n,r):null}}]),e}();function a3(e,t){return t?jQ(t):(BQ(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}r3.PROVIDER_ID="phone",r3.PHONE_SIGN_IN_METHOD="phone";var i3=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r;return(0,Se.Z)(this,n),(r=t.call(this,"custom","custom")).params=e,r}return(0,Te.Z)(n,[{key:"_getIdTokenResponse",value:function(e){return T0(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return T0(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return T0(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(t0);function o3(e){return u1(e.auth,new i3(e),e.bypassAuthState)}function s3(e){var t=e.auth,n=e.user;return BQ(n,t,"internal-error"),o1(n,new i3(e),e.bypassAuthState)}function u3(e){return c3.apply(this,arguments)}function c3(){return(c3=(0,ke.Z)((0,be.Z)().mark((function e(t){var n,r;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,BQ(r=t.user,n,"internal-error"),e.abrupt("return",n1(r,new i3(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var l3=function(){function e(t,n,r,a){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];(0,Se.Z)(this,e),this.auth=t,this.resolver=r,this.user=a,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return(0,Te.Z)(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=(0,ke.Z)((0,be.Z)().mark((function t(n,r){return(0,be.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){var n,r,a,i,o,s,u;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,a=t.postBody,i=t.tenantId,o=t.error,s=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(s)(u);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return o3;case"linkViaPopup":case"linkViaRedirect":return u3;case"reauthViaPopup":case"reauthViaRedirect":return s3;default:LQ(this.auth,"internal-error")}}},{key:"resolve",value:function(e){UQ(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){UQ(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),d3=new $Q(2e3,1e4);function f3(e,t,n){return h3.apply(this,arguments)}function h3(){return(h3=(0,ke.Z)((0,be.Z)().mark((function e(t,n,r){var a,i,o;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=XJ(t),PQ(t,n,M0),i=a3(a,r),o=new g3(a,"signInViaPopup",n,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p3(){return(p3=(0,ke.Z)((0,be.Z)().mark((function e(t,n,r){var a,i,o;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return PQ((a=KX(t)).auth,n,M0),i=a3(a.auth,r),o=new g3(a.auth,"reauthViaPopup",n,i,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v3(e,t,n){return m3.apply(this,arguments)}function m3(){return(m3=(0,ke.Z)((0,be.Z)().mark((function e(t,n,r){var a,i,o;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return PQ((a=KX(t)).auth,n,M0),i=a3(a.auth,r),o=new g3(a.auth,"linkViaPopup",n,i,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var g3=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e,r,a,i,o){var s;return(0,Se.Z)(this,n),(s=t.call(this,e,r,i,o)).provider=a,s.authWindow=null,s.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=(0,we.Z)(s),s}return(0,Te.Z)(n,[{key:"executeNotNull",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){var t;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return BQ(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){var t,n=this;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return UQ(1===this.filter.length,"Popup operations only handle one event"),t=l2(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(FQ(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(FQ(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(FQ(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,d3.get())}()}}]),n}(l3);g3.currentPopupAction=null;var y3="pendingRedirect",b3=new Map,k3=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e,r){var a,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,Se.Z)(this,n),(a=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,i)).eventId=null,a}return(0,Te.Z)(n,[{key:"execute",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){var t,r;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=b3.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,w3(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,BN((0,zN.Z)(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:b3.set(this.auth._key(),t);case 21:return this.bypassAuthState||b3.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){var r;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",BN((0,zN.Z)(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",BN((0,zN.Z)(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(l3);function w3(e,t){return x3.apply(this,arguments)}function x3(){return x3=(0,ke.Z)((0,be.Z)().mark((function e(t,n){var r,a,i;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=N3(n),a=E3(t),e.next=4,a._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,a._get(r);case 8:return e.t0=e.sent,i="true"===e.t0,e.next=12,a._remove(r);case 12:return e.abrupt("return",i);case 13:case"end":return e.stop()}}),e)}))),x3.apply(this,arguments)}function I3(e,t){return S3.apply(this,arguments)}function S3(){return(S3=(0,ke.Z)((0,be.Z)().mark((function e(t,n){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",E3(t)._set(N3(n),"true"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T3(e,t){b3.set(e._key(),t)}function E3(e){return jQ(e._redirectPersistence)}function N3(e){return LJ(y3,e.config.apiKey,e.name)}function C3(e,t,n){return function(e,t,n){return Z3.apply(this,arguments)}(e,t,n)}function Z3(){return(Z3=(0,ke.Z)((0,be.Z)().mark((function e(t,n,r){var a,i;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=XJ(t),PQ(t,n,M0),e.next=4,a._initializationPromise;case 4:return i=a3(a,r),e.next=7,I3(i,a);case 7:return e.abrupt("return",i._openRedirect(a,n,"signInViaRedirect"));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _3(e,t,n){return function(e,t,n){return A3.apply(this,arguments)}(e,t,n)}function A3(){return(A3=(0,ke.Z)((0,be.Z)().mark((function e(t,n,r){var a,i,o;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return PQ((a=KX(t)).auth,n,M0),e.next=4,a.auth._initializationPromise;case 4:return i=a3(a.auth,r),e.next=7,I3(i,a.auth);case 7:return e.next=9,P3(a);case 9:return o=e.sent,e.abrupt("return",i._openRedirect(a.auth,n,"reauthViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R3(e,t,n){return function(e,t,n){return D3.apply(this,arguments)}(e,t,n)}function D3(){return(D3=(0,ke.Z)((0,be.Z)().mark((function e(t,n,r){var a,i,o;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return PQ((a=KX(t)).auth,n,M0),e.next=4,a.auth._initializationPromise;case 4:return i=a3(a.auth,r),e.next=7,a1(!1,a,n.providerId);case 7:return e.next=9,I3(i,a.auth);case 9:return e.next=11,P3(a);case 11:return o=e.sent,e.abrupt("return",i._openRedirect(a.auth,n,"linkViaRedirect",o));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O3(e,t){return L3.apply(this,arguments)}function L3(){return(L3=(0,ke.Z)((0,be.Z)().mark((function e(t,n){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,XJ(t)._initializationPromise;case 2:return e.abrupt("return",F3(t,n,!1));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F3(e,t){return M3.apply(this,arguments)}function M3(){return M3=(0,ke.Z)((0,be.Z)().mark((function e(t,n){var r,a,i,o,s,u=arguments;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],a=XJ(t),i=a3(a,n),o=new k3(a,i,r),e.next=6,o.execute();case 6:if(!(s=e.sent)||r){e.next=13;break}return delete s.user._redirectEventId,e.next=11,a._persistUserIfCurrent(s.user);case 11:return e.next=13,a._setRedirectUser(null,n);case 13:return e.abrupt("return",s);case 14:case"end":return e.stop()}}),e)}))),M3.apply(this,arguments)}function P3(e){return z3.apply(this,arguments)}function z3(){return(z3=(0,ke.Z)((0,be.Z)().mark((function e(t){var n;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l2("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var B3=function(){function e(t){(0,Se.Z)(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return(0,Te.Z)(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return U3(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!U3(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(FQ(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(V3(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(V3(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function V3(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function U3(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function W3(e){return j3.apply(this,arguments)}function j3(){return j3=(0,ke.Z)((0,be.Z)().mark((function e(t){var n,r=arguments;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",eJ(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),j3.apply(this,arguments)}var G3=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,H3=/^https?/;function q3(){return(q3=(0,ke.Z)((0,be.Z)().mark((function e(t){var n,r,a,i,o;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,W3(t);case 4:n=e.sent,r=n.authorizedDomains,a=(0,Ht.Z)(r),e.prev=7,a.s();case 9:if((i=a.n()).done){e.next=20;break}if(o=i.value,e.prev=11,!$3(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),a.e(e.t1);case 25:return e.prev=25,a.f(),e.finish(25);case 28:LQ(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])})))).apply(this,arguments)}function $3(e){var t=GQ(),n=new URL(t),r=n.protocol,a=n.hostname;if(e.startsWith("chrome-extension://")){var i=new URL(e);return""===i.hostname&&""===a?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&i.hostname===a}if(!H3.test(r))return!1;if(G3.test(e))return a===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)}var K3=new $Q(3e4,6e4);function X3(){var e=f2().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=(0,me.Z)(e.H[r].L),e.CP)for(var a=0;a<e.CP.length;a++)e.CP[a]=null}}var Y3=null;function Q3(e){return Y3=Y3||function(e){return new Promise((function(t,n){var r,a,i;function o(){X3(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){X3(),n(FQ(e,"network-request-failed"))},timeout:K3.get()})}if(null===(a=null===(r=f2().gapi)||void 0===r?void 0:r.iframes)||void 0===a?void 0:a.Iframe)t(gapi.iframes.getContext());else{if(!(null===(i=f2().gapi)||void 0===i?void 0:i.load)){var s=M2("iframefcb");return f2()[s]=function(){gapi.load?o():n(FQ(e,"network-request-failed"))},F2("https://apis.google.com/js/api.js?onload=".concat(s)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw Y3=null,e}))}(e),Y3}var J3=new $Q(5e3,15e3),e4="__/auth/iframe",t4="emulator/auth/iframe",n4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},r4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function a4(e){var t=e.config;BQ(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?KQ(t,t4):"https://".concat(e.config.authDomain,"/").concat(e4),r={apiKey:t.apiKey,appName:e.name,v:jY},a=r4.get(e.config.apiHost);a&&(r.eid=a);var i=e._getFrameworks();return i.length&&(r.fw=i.join(",")),"".concat(n,"?").concat(WX(r).slice(1))}function i4(e){return o4.apply(this,arguments)}function o4(){return o4=(0,ke.Z)((0,be.Z)().mark((function e(t){var n,r;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q3(t);case 2:return n=e.sent,BQ(r=f2().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:a4(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:n4,dontclear:!0},(function(e){return new Promise(function(){var n=(0,ke.Z)((0,be.Z)().mark((function n(r,a){var i,o,s;return(0,be.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=function(){f2().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:i=FQ(t,"network-request-failed"),o=f2().setTimeout((function(){a(i)}),J3.get()),e.ping(s).then(s,(function(){a(i)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),o4.apply(this,arguments)}var s4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},u4=500,c4=600,l4="_blank",d4="http://localhost",f4=function(){function e(t){(0,Se.Z)(this,e),this.window=t,this.associatedEvent=null}return(0,Te.Z)(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function h4(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:u4,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:c4,i=Math.max((window.screen.availHeight-a)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),s="",u=Object.assign(Object.assign({},s4),{width:r.toString(),height:a.toString(),top:i,left:o}),c=AX().toLowerCase();n&&(s=BJ(c)?l4:n),PJ(c)&&(t=t||d4,u.scrollbars="yes");var l=Object.entries(u).reduce((function(e,t){var n=(0,ge.Z)(t,2),r=n[0],a=n[1];return"".concat(e).concat(r,"=").concat(a,",")}),"");if(function(){var e;return GJ(arguments.length>0&&void 0!==arguments[0]?arguments[0]:AX())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==s)return function(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",s),new f4(null);var d=window.open(t||"",s,l);BQ(d,e,"popup-blocked");try{d.focus()}catch(f){}return new f4(d)}var p4="__/auth/handler",v4="emulator/auth/handler";function m4(e,t,n,r,a,i){BQ(e.config.authDomain,e,"auth-domain-config-required"),BQ(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:jY,eventId:a};if(t instanceof M0){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var s=0,u=Object.entries(i||{});s<u.length;s++){var c=(0,ge.Z)(u[s],2),l=c[0],d=c[1];o[l]=d}}if(t instanceof P0){var f=t.getScopes().filter((function(e){return""!==e}));f.length>0&&(o.scopes=f.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var h=o,p=0,v=Object.keys(h);p<v.length;p++){var m=v[p];void 0===h[m]&&delete h[m]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(p4);return KQ(t,v4)}(e),"?").concat(WX(h).slice(1))}var g4="webStorageSupport",y4=function(){function e(){(0,Se.Z)(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=s2,this._completeRedirectFn=F3,this._overrideRedirectResult=T3}return(0,Te.Z)(e,[{key:"_openPopup",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t,n,r,a){var i,o;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return UQ(null===(i=this.eventManagers[t._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()"),o=m4(t,n,r,GQ(),a),e.abrupt("return",h4(t,o,l2()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t,n,r,a){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return i=m4(t,n,r,GQ(),a),f2().location.href=i,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var i}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],a=r.manager,i=r.promise;return a?Promise.resolve(a):(UQ(i,"If manager is not set, promise should be"),i)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){var n,r;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i4(t);case 2:return n=e.sent,r=new B3(t),n.register("authEvent",(function(e){return BQ(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(g4,{type:g4},(function(n){var r,a=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[g4];void 0!==a&&t(!!a),LQ(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return q3.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return HJ()||zJ()||GJ()}}]),e}(),b4=y4,k4=function(){function e(t){(0,Se.Z)(this,e),this.factorId=t}return(0,Te.Z)(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return VQ("unexpected MultiFactorSessionType")}}}]),e}(),w4=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r;return(0,Se.Z)(this,n),(r=t.call(this,"phone")).credential=e,r}return(0,Te.Z)(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return eJ(e,"POST","/v2/accounts/mfaEnrollment:finalize",JQ(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return eJ(e,"POST","/v2/accounts/mfaSignIn:finalize",JQ(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(k4),x4=function(){function e(){(0,Se.Z)(this,e)}return(0,Te.Z)(e,null,[{key:"assertion",value:function(e){return w4._fromCredential(e)}}]),e}();x4.FACTOR_ID="phone";var I4=function(){function e(){(0,Se.Z)(this,e)}return(0,Te.Z)(e,null,[{key:"assertionForEnrollment",value:function(e,t){return S4._fromSecret(e,t)}},{key:"assertionForSignIn",value:function(e,t){return S4._fromEnrollmentId(e,t)}},{key:"generateSecret",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){var n,r;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return BQ("undefined"!==typeof(n=t).auth,"internal-error"),e.next=4,a=n.auth,i={idToken:n.credential,totpEnrollmentInfo:{}},eJ(a,"POST","/v2/accounts/mfaEnrollment:start",JQ(a,i));case 4:return r=e.sent,e.abrupt("return",T4._fromStartTotpMfaEnrollmentResponse(r,n.auth));case 6:case"end":return e.stop()}var a,i}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}();I4.FACTOR_ID="totp";var S4=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e,r,a){var i;return(0,Se.Z)(this,n),(i=t.call(this,"totp")).otp=e,i.enrollmentId=r,i.secret=a,i}return(0,Te.Z)(n,[{key:"_finalizeEnroll",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t,n,r){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return BQ("undefined"!==typeof this.secret,t,"argument-error"),e.abrupt("return",J1(t,{idToken:n,displayName:r,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)}));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"_finalizeSignIn",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t,n){var r;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return BQ(void 0!==this.enrollmentId&&void 0!==this.otp,t,"argument-error"),r={verificationCode:this.otp},e.abrupt("return",D2(t,{mfaPendingCredential:n,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:r}));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}],[{key:"_fromSecret",value:function(e,t){return new n(t,void 0,e)}},{key:"_fromEnrollmentId",value:function(e,t){return new n(t,e)}}]),n}(k4),T4=function(){function e(t,n,r,a,i,o,s){(0,Se.Z)(this,e),this.sessionInfo=o,this.auth=s,this.secretKey=t,this.hashingAlgorithm=n,this.codeLength=r,this.codeIntervalSeconds=a,this.enrollmentCompletionDeadline=i}return(0,Te.Z)(e,[{key:"_makeTotpVerificationInfo",value:function(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}},{key:"generateQrCodeUrl",value:function(e,t){var n,r=!1;return(E4(e)||E4(t))&&(r=!0),r&&(E4(e)&&(e=(null===(n=this.auth.currentUser)||void 0===n?void 0:n.email)||"unknownuser"),E4(t)&&(t=this.auth.name)),"otpauth://totp/".concat(t,":").concat(e,"?secret=").concat(this.secretKey,"&issuer=").concat(t,"&algorithm=").concat(this.hashingAlgorithm,"&digits=").concat(this.codeLength)}}],[{key:"_fromStartTotpMfaEnrollmentResponse",value:function(t,n){return new e(t.totpSessionInfo.sharedSecretKey,t.totpSessionInfo.hashingAlgorithm,t.totpSessionInfo.verificationCodeLength,t.totpSessionInfo.periodSec,new Date(t.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),t.totpSessionInfo.sessionInfo,n)}}]),e}();function E4(e){return"undefined"===typeof e||0===(null===e||void 0===e?void 0:e.length)}var N4="@firebase/auth",C4="0.22.0",Z4=function(){function e(t){(0,Se.Z)(this,e),this.auth=t,this.internalListeners=new Map}return(0,Te.Z)(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){var n;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){BQ(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();var _4;!function(e){var t;null===(t=CX())||void 0===t||t["_".concat(e)]}("authIdTokenMaxAge");function A4(){return window}_4="Browser",MY(new XX("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),i=r.options,o=i.apiKey,s=i.authDomain;return function(e,t){BQ(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),BQ(!(null===s||void 0===s?void 0:s.includes(":")),"argument-error",{appName:e.name});var r={apiKey:o,authDomain:s,clientPlatform:_4,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:qJ(_4)},a=new KJ(e,t,r);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(jQ);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(a,n),a}(r,a)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),MY(new XX("auth-internal",(function(e){return function(e){return new Z4(e)}(XJ(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),XY(N4,C4,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(_4)),XY(N4,C4,"esm2017");var R4=2e3;function D4(e,t,n){return O4.apply(this,arguments)}function O4(){return O4=(0,ke.Z)((0,be.Z)().mark((function e(t,n,r){var a,i,o,s,u;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=A4(),o=i.BuildInfo,UQ(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,B4(n.sessionId);case 4:return s=e.sent,u={},GJ()?u.ibi=o.packageName:UJ()?u.apn=o.packageName:LQ(t,"operation-not-supported-in-this-environment"),o.displayName&&(u.appDisplayName=o.displayName),u.sessionId=s,e.abrupt("return",m4(t,r,n.type,void 0,null!==(a=n.eventId)&&void 0!==a?a:void 0,u));case 10:case"end":return e.stop()}}),e)}))),O4.apply(this,arguments)}function L4(){return(L4=(0,ke.Z)((0,be.Z)().mark((function e(t){var n,r,a;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=A4(),r=n.BuildInfo,a={},GJ()?a.iosBundleId=r.packageName:UJ()?a.androidPackageName=r.packageName:LQ(t,"operation-not-supported-in-this-environment"),e.next=5,W3(t,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F4(e){var t=A4().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var a=null;r?t.plugins.browsertab.openUrl(e):a=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:AX();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(a)}))}))}function M4(e,t,n){return P4.apply(this,arguments)}function P4(){return P4=(0,ke.Z)((0,be.Z)().mark((function e(t,n,r){var a,i,o;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=A4(),i=a.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,a){var s=null;function u(){var t;e();var n=null===(t=i.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){s||(s=window.setTimeout((function(){a(FQ(t,"redirect-cancelled-by-user"))}),R4))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(u),document.addEventListener("resume",c,!1),UJ()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(u),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),s&&window.clearTimeout(s)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),P4.apply(this,arguments)}function z4(e){var t,n,r,a,i,o,s,u,c,l,d=A4();BQ("function"===typeof(null===(t=null===d||void 0===d?void 0:d.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),BQ("undefined"!==typeof(null===(n=null===d||void 0===d?void 0:d.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),BQ("function"===typeof(null===(i=null===(a=null===(r=null===d||void 0===d?void 0:d.cordova)||void 0===r?void 0:r.plugins)||void 0===a?void 0:a.browsertab)||void 0===i?void 0:i.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),BQ("function"===typeof(null===(u=null===(s=null===(o=null===d||void 0===d?void 0:d.cordova)||void 0===o?void 0:o.plugins)||void 0===s?void 0:s.browsertab)||void 0===u?void 0:u.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),BQ("function"===typeof(null===(l=null===(c=null===d||void 0===d?void 0:d.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function B4(e){return V4.apply(this,arguments)}function V4(){return(V4=(0,ke.Z)((0,be.Z)().mark((function e(t){var n,r,a;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=U4(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,a=Array.from(new Uint8Array(r)),e.abrupt("return",a.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U4(e){if(UQ(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var W4=20,j4=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(){var e;return(0,Se.Z)(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return(0,Te.Z)(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),BN((0,zN.Z)(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(B3);function G4(e,t){return{type:t,eventId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,urlResponse:null,sessionId:X4(),postBody:null,tenantId:e.tenantId,error:FQ(e,"no-auth-event")}}function H4(e,t){return Y4()._set(Q4(e),t)}function q4(e){return $4.apply(this,arguments)}function $4(){return($4=(0,ke.Z)((0,be.Z)().mark((function e(t){var n;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y4()._get(Q4(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,Y4()._remove(Q4(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function K4(e,t){var n,r,a=function(e){var t=J4(e),n=t.link?decodeURIComponent(t.link):void 0,r=J4(n).link,a=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return J4(a).link||a||r||n||e}(t);if(a.includes("/__/auth/callback")){var i=J4(a),o=i.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(i.firebaseError)):null,s=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],u=s?FQ(s):null;return u?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:u,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:a,postBody:null}}return null}function X4(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<W4;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function Y4(){return jQ(i2)}function Q4(e){return LJ("authEvent",e.config.apiKey,e.name)}function J4(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t=qK(e.split("?"));t[0];return jX(t.slice(1).join("?"))}var e5=function(){function e(){(0,Se.Z)(this,e),this._redirectPersistence=s2,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=F3,this._overrideRedirectResult=T3}return(0,Te.Z)(e,[{key:"_initialize",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){var n,r;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new j4(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){LQ(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t,n,r,a){var i,o,s,u;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return z4(t),e.next=3,this._initialize(t);case 3:return i=e.sent,e.next=6,i.initialized();case 6:return i.resetRedirect(),b3.clear(),e.next=10,this._originValidation(t);case 10:return o=G4(t,r,a),e.next=13,H4(t,o);case 13:return e.next=15,D4(t,o,n);case 15:return s=e.sent,e.next=18,F4(s);case 18:return u=e.sent,e.abrupt("return",M4(t,i,u));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return L4.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=A4(),r=n.universalLinks,a=n.handleOpenURL,i=n.BuildInfo,o=setTimeout((0,ke.Z)((0,be.Z)().mark((function n(){return(0,be.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,q4(e);case 2:t.onEvent(n5());case 3:case"end":return n.stop()}}),n)}))),500),s=function(){var n=(0,ke.Z)((0,be.Z)().mark((function n(r){var a,i;return(0,be.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,q4(e);case 3:a=n.sent,i=null,a&&(null===r||void 0===r?void 0:r.url)&&(i=K4(a,r.url)),t.onEvent(i||n5());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,s);var u=a,c="".concat(i.packageName.toLowerCase(),"://");A4().handleOpenURL=function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&s({url:t}),"function"===typeof u)try{u(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),t5=e5;function n5(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:FQ("no-auth-event")}}var r5="@firebase/auth-compat",a5="0.3.7",i5=1e3;function o5(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function s5(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:AX();return!("file:"!==o5()&&"ionic:"!==o5()&&"capacitor:"!==o5()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function u5(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:AX();return LX()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:AX();return/Edge\/\d+/.test(e)}(e)}function c5(){try{var e=self.localStorage,t=l2();if(e)return e.setItem(t,"1"),e.removeItem(t),!u5()||FX()}catch(n){return l5()&&FX()}return!1}function l5(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function d5(){return("http:"===o5()||"https:"===o5()||DX()||s5())&&!(OX()||RX())&&c5()&&!l5()}function f5(){return s5()&&"undefined"!==typeof document}function h5(){return p5.apply(this,arguments)}function p5(){return(p5=(0,ke.Z)((0,be.Z)().mark((function e(){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f5()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),i5);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var v5={LOCAL:"local",NONE:"none",SESSION:"session"},m5=BQ,g5="persistence";function y5(e,t){m5(Object.values(v5).includes(t),e,"invalid-persistence-type"),OX()?m5(t!==v5.SESSION,e,"unsupported-persistence-type"):RX()?m5(t===v5.NONE,e,"unsupported-persistence-type"):l5()?m5(t===v5.NONE||t===v5.LOCAL&&FX(),e,"unsupported-persistence-type"):m5(t===v5.NONE||c5(),e,"unsupported-persistence-type")}function b5(e){return k5.apply(this,arguments)}function k5(){return k5=(0,ke.Z)((0,be.Z)().mark((function e(t){var n,r;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=w5(),r=LJ(g5,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)}))),k5.apply(this,arguments)}function w5(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var x5=BQ,I5=function(){function e(){(0,Se.Z)(this,e),this.browserResolver=jQ(b4),this.cordovaResolver=jQ(t5),this.underlyingResolver=null,this._redirectPersistence=s2,this._completeRedirectFn=F3,this._overrideRedirectResult=T3}return(0,Te.Z)(e,[{key:"_initialize",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t,n,r,a){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,a));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t,n,r,a){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,a));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return f5()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return x5(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){var t;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,h5();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function S5(e){return e.unwrap()}function T5(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code))t.resolver=new _5(e,function(e,t){var n,r=KX(e),a=t;return BQ(t.customData.operationType,r,"argument-error"),BQ(null===(n=a.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),Y1._fromError(r,a)}(e,t));else if(r){var a=E5(t),i=t;a&&(i.credential=a,i.tenantId=r.tenantId||void 0,i.email=r.email||void 0,i.phoneNumber=r.phoneNumber||void 0)}}function E5(e){var t=(e instanceof MX?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof MX)&&"temporaryProof"in t&&"phoneNumber"in t)return r3.credentialFromResult(e);var n,r=t.providerId;if(!r||r===NQ.PASSWORD)return null;switch(r){case NQ.GOOGLE:n=V0;break;case NQ.FACEBOOK:n=B0;break;case NQ.GITHUB:n=U0;break;case NQ.TWITTER:n=G0;break;default:var a=t.oauthIdToken,i=t.oauthAccessToken,o=t.oauthTokenSecret,s=t.pendingToken,u=t.nonce;return i||o||a||s?s?r.startsWith("saml.")?W0._create(r,s):N0._fromParams({providerId:r,signInMethod:r,pendingToken:s,idToken:a,accessToken:i}):new z0(r).credential({idToken:a,accessToken:i,rawNonce:u}):null}return e instanceof MX?n.credentialFromError(e):n.credentialFromResult(e)}function N5(e,t){return t.catch((function(t){throw t instanceof MX&&T5(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,E5(t)),additionalUserInfo:K1(e),user:A5.getOrCreate(r)}}))}function C5(e,t){return Z5.apply(this,arguments)}function Z5(){return(Z5=(0,ke.Z)((0,be.Z)().mark((function e(t,n){var r;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return N5(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var _5=function(){function e(t,n){(0,Se.Z)(this,e),this.resolver=n,this.auth=t.wrapped()}return(0,Te.Z)(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return N5(S5(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),A5=function(){function e(t){(0,Se.Z)(this,e),this._delegate=t,this.multiFactor=function(e){var t=KX(e);return t2.has(t)||t2.set(t,e2._fromUser(t)),t2.get(t)}(t)}return(0,Te.Z)(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",N5(this.auth,f1(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t,n){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",C5(this.auth,Y2(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",N5(this.auth,v3(this._delegate,t,I5)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b5(XJ(this.auth));case 2:return e.abrupt("return",R3(this._delegate,t,I5));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",N5(this.auth,p1(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return C5(this.auth,function(e,t,n){return J2.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return N5(this.auth,function(e,t,n){return p3.apply(this,arguments)}(this._delegate,e,I5))}},{key:"reauthenticateWithRedirect",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b5(XJ(this.auth));case 2:return e.abrupt("return",_3(this._delegate,t,I5));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return F1.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,e1(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return V1(KX(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return V1(KX(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return n3.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return B1.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return M1.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();A5.USER_MAP=new WeakMap;var R5=BQ,D5=function(){function e(t,n){if((0,Se.Z)(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;R5(r,"invalid-api-key",{appName:t.name}),R5(r,"invalid-api-key",{appName:t.name});var a="undefined"!==typeof window?I5:void 0;this._delegate=n.initialize({options:{persistence:L5(r,t.name),popupRedirectResolver:a}}),this._delegate._updateErrorMap(_Q),this.linkUnderlyingAuth()}return(0,Te.Z)(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?A5.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){QJ(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return T1.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return E1(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return S1.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t,n){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",N5(this._delegate,Z1(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return L1.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=L0.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){var t;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return R5(d5(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,O3(this._delegate,I5);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",N5(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){XJ(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=O5(e,t,n),a=r.next,i=r.error,o=r.complete;return this._delegate.onAuthStateChanged(a,i,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=O5(e,t,n),a=r.next,i=r.error,o=r.complete;return this._delegate.onIdTokenChanged(a,i,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return A1.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return I1.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){var n,r;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:y5(this._delegate,t),e.t0=t,e.next=e.t0===v5.SESSION?4:e.t0===v5.LOCAL?6:e.t0===v5.NONE?11:13;break;case 4:return n=s2,e.abrupt("break",14);case 6:return e.next=8,jQ(A2)._isAvailable();case 8:return r=e.sent,n=r?A2:i2,e.abrupt("break",14);case 11:return n=OJ,e.abrupt("break",14);case 13:return e.abrupt("return",LQ("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return N5(this._delegate,function(e){return X0.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return N5(this._delegate,l1(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return N5(this._delegate,function(e,t){return y1.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return N5(this._delegate,function(e,t,n){return l1(KX(e),F0.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return N5(this._delegate,function(e,t,n){return R1.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return C5(this._delegate,function(e,t,n){return X2.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return R5(d5(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",N5(this._delegate,f3(this._delegate,t,I5)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return R5(d5(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,b5(this._delegate);case 3:return e.abrupt("return",C3(this._delegate,t,I5));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return C1.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function O5(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var a=r;return{next:function(e){return a(e&&A5.getOrCreate(e))},error:t,complete:n}}function L5(e,t){var n=function(e,t){var n=w5();if(!n)return[];var r=LJ(g5,e,t);switch(n.getItem(r)){case v5.NONE:return[OJ];case v5.LOCAL:return[A2,s2];case v5.SESSION:return[s2];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(A2)||n.push(A2),"undefined"!==typeof window)for(var r=0,a=[i2,s2];r<a.length;r++){var i=a[r];n.includes(i)||n.push(i)}return n.includes(OJ)||n.push(OJ),n}D5.Persistence=v5;var F5=function(){function e(){(0,Se.Z)(this,e),this.providerId="phone",this._delegate=new r3(S5(TQ.auth()))}return(0,Te.Z)(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return r3.credential(e,t)}}]),e}();F5.PHONE_SIGN_IN_METHOD=r3.PHONE_SIGN_IN_METHOD,F5.PROVIDER_ID=r3.PROVIDER_ID;var M5,P5=BQ,z5=function(){function e(t,n){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:TQ.app();(0,Se.Z)(this,e),P5(null===(r=a.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:a.name}),this._delegate=new q2(t,n,a.auth()),this.type=this._delegate.type}return(0,Te.Z)(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}(),B5="auth-compat";(M5=TQ).INTERNAL.registerComponent(new XX(B5,(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new D5(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:CQ.EMAIL_SIGNIN,PASSWORD_RESET:CQ.PASSWORD_RESET,RECOVER_EMAIL:CQ.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:CQ.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:CQ.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:CQ.VERIFY_EMAIL}},EmailAuthProvider:F0,FacebookAuthProvider:B0,GithubAuthProvider:U0,GoogleAuthProvider:V0,OAuthProvider:z0,SAMLAuthProvider:j0,PhoneAuthProvider:F5,PhoneMultiFactorGenerator:x4,RecaptchaVerifier:z5,TwitterAuthProvider:G0,Auth:D5,AuthCredential:t0,Error:MX}).setInstantiationMode("LAZY").setMultipleInstances(!1)),M5.registerVersion(r5,a5);var V5,U5=n(5647),W5="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},j5={},G5=G5||{},H5=W5||self;function q5(){}function $5(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function K5(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var X5="closure_uid_"+(1e9*Math.random()>>>0),Y5=0;function Q5(e,t,n){return e.call.apply(e.bind,arguments)}function J5(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function e6(e,t,n){return(e6=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Q5:J5).apply(null,arguments)}function t6(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function n6(e,t){function n(){}n.prototype=t.prototype,e.X=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Wb=function(e,n,r){for(var a=Array(arguments.length-2),i=2;i<arguments.length;i++)a[i-2]=arguments[i];return t.prototype[n].apply(e,a)}}function r6(){this.s=this.s,this.o=this.o}r6.prototype.s=!1,r6.prototype.na=function(){var e;!this.s&&(this.s=!0,this.M(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,X5)&&e[X5]||(e[X5]=++Y5))},r6.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var a6=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function i6(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function o6(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if($5(r)){var a=e.length||0,i=r.length||0;e.length=a+i;for(var o=0;o<i;o++)e[a+o]=r[o]}else e.push(r)}}function s6(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}s6.prototype.h=function(){this.defaultPrevented=!0};var u6=function(){if(!H5.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{H5.addEventListener("test",q5,t),H5.removeEventListener("test",q5,t)}catch(n){}return e}();function c6(e){return/^[\s\xa0]*$/.test(e)}var l6=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function d6(e,t){return e<t?-1:e>t?1:0}function f6(){var e=H5.navigator;return e&&(e=e.userAgent)?e:""}function h6(e){return-1!=f6().indexOf(e)}function p6(e){return p6[" "](e),e}p6[" "]=q5;var v6,m6=h6("Opera"),g6=h6("Trident")||h6("MSIE"),y6=h6("Edge"),b6=y6||g6,k6=h6("Gecko")&&!(-1!=f6().toLowerCase().indexOf("webkit")&&!h6("Edge"))&&!(h6("Trident")||h6("MSIE"))&&!h6("Edge"),w6=-1!=f6().toLowerCase().indexOf("webkit")&&!h6("Edge");function x6(){var e=H5.document;return e?e.documentMode:void 0}e:{var I6="",S6=function(){var e=f6();return k6?/rv:([^\);]+)(\)|;)/.exec(e):y6?/Edge\/([\d\.]+)/.exec(e):g6?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):w6?/WebKit\/(\S+)/.exec(e):m6?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(S6&&(I6=S6?S6[1]:""),g6){var T6=x6();if(null!=T6&&T6>parseFloat(I6)){v6=String(T6);break e}}v6=I6}var E6,N6={};function C6(){return function(e){var t=N6;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=l6(String(v6)).split("."),n=l6("9").split("."),r=Math.max(t.length,n.length),a=0;0==e&&a<r;a++){var i=t[a]||"",o=n[a]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==i[0].length&&0==o[0].length)break;e=d6(0==i[1].length?0:parseInt(i[1],10),0==o[1].length?0:parseInt(o[1],10))||d6(0==i[2].length,0==o[2].length)||d6(i[2],o[2]),i=i[3],o=o[3]}while(0==e)}return 0<=e}))}if(H5.document&&g6){var Z6=x6();E6=Z6||(parseInt(v6,10)||void 0)}else E6=void 0;var _6=E6;function A6(e,t){if(s6.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(k6){e:{try{p6(t.nodeName);var a=!0;break e}catch(i){}a=!1}a||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:R6[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&A6.X.h.call(this)}}n6(A6,s6);var R6={2:"touch",3:"pen",4:"mouse"};A6.prototype.h=function(){A6.X.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var D6="closure_listenable_"+(1e6*Math.random()|0),O6=0;function L6(e,t,n,r,a){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=a,this.key=++O6,this.ba=this.ea=!1}function F6(e){e.ba=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function M6(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function P6(e){var t={};for(var n in e)t[n]=e[n];return t}var z6="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function B6(e,t){for(var n,r,a=1;a<arguments.length;a++){for(n in r=arguments[a])e[n]=r[n];for(var i=0;i<z6.length;i++)n=z6[i],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function V6(e){this.src=e,this.g={},this.h=0}function U6(e,t){var n=t.type;if(n in e.g){var r,a=e.g[n],i=a6(a,t);(r=0<=i)&&Array.prototype.splice.call(a,i,1),r&&(F6(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function W6(e,t,n,r){for(var a=0;a<e.length;++a){var i=e[a];if(!i.ba&&i.listener==t&&i.capture==!!n&&i.ha==r)return a}return-1}V6.prototype.add=function(e,t,n,r,a){var i=e.toString();(e=this.g[i])||(e=this.g[i]=[],this.h++);var o=W6(e,t,r,a);return-1<o?(t=e[o],n||(t.ea=!1)):((t=new L6(t,this.src,i,!!r,a)).ea=n,e.push(t)),t};var j6="closure_lm_"+(1e6*Math.random()|0),G6={};function H6(e,t,n,r,a){if(r&&r.once)return $6(e,t,n,r,a);if(Array.isArray(t)){for(var i=0;i<t.length;i++)H6(e,t[i],n,r,a);return null}return n=t8(n),e&&e[D6]?e.N(t,n,K5(r)?!!r.capture:!!r,a):q6(e,t,n,!1,r,a)}function q6(e,t,n,r,a,i){if(!t)throw Error("Invalid event type");var o=K5(a)?!!a.capture:!!a,s=J6(e);if(s||(e[j6]=s=new V6(e)),(n=s.add(t,n,r,o,i)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=Q6;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)u6||(a=o),void 0===a&&(a=!1),e.addEventListener(t.toString(),r,a);else if(e.attachEvent)e.attachEvent(Y6(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function $6(e,t,n,r,a){if(Array.isArray(t)){for(var i=0;i<t.length;i++)$6(e,t[i],n,r,a);return null}return n=t8(n),e&&e[D6]?e.O(t,n,K5(r)?!!r.capture:!!r,a):q6(e,t,n,!0,r,a)}function K6(e,t,n,r,a){if(Array.isArray(t))for(var i=0;i<t.length;i++)K6(e,t[i],n,r,a);else r=K5(r)?!!r.capture:!!r,n=t8(n),e&&e[D6]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=W6(i=e.g[t],n,r,a))&&(F6(i[n]),Array.prototype.splice.call(i,n,1),0==i.length&&(delete e.g[t],e.h--)))):e&&(e=J6(e))&&(t=e.g[t.toString()],e=-1,t&&(e=W6(t,n,r,a)),(n=-1<e?t[e]:null)&&X6(n))}function X6(e){if("number"!==typeof e&&e&&!e.ba){var t=e.src;if(t&&t[D6])U6(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Y6(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=J6(t))?(U6(n,e),0==n.h&&(n.src=null,t[j6]=null)):F6(e)}}}function Y6(e){return e in G6?G6[e]:G6[e]="on"+e}function Q6(e,t){if(e.ba)e=!0;else{t=new A6(t,this);var n=e.listener,r=e.ha||e.src;e.ea&&X6(e),e=n.call(r,t)}return e}function J6(e){return(e=e[j6])instanceof V6?e:null}var e8="__closure_events_fn_"+(1e9*Math.random()>>>0);function t8(e){return"function"===typeof e?e:(e[e8]||(e[e8]=function(t){return e.handleEvent(t)}),e[e8])}function n8(){r6.call(this),this.i=new V6(this),this.P=this,this.I=null}function r8(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new s6(t,e);else if(t instanceof s6)t.target=t.target||e;else{var a=t;B6(t=new s6(r,e),a)}if(a=!0,n)for(var i=n.length-1;0<=i;i--){var o=t.g=n[i];a=a8(o,r,!0,t)&&a}if(a=a8(o=t.g=e,r,!0,t)&&a,a=a8(o,r,!1,t)&&a,n)for(i=0;i<n.length;i++)a=a8(o=t.g=n[i],r,!1,t)&&a}function a8(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var a=!0,i=0;i<t.length;++i){var o=t[i];if(o&&!o.ba&&o.capture==n){var s=o.listener,u=o.ha||o.src;o.ea&&U6(e.i,o),a=!1!==s.call(u,r)&&a}}return a&&!r.defaultPrevented}n6(n8,r6),n8.prototype[D6]=!0,n8.prototype.removeEventListener=function(e,t,n,r){K6(this,e,t,n,r)},n8.prototype.M=function(){if(n8.X.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)F6(n[r]);delete t.g[e],t.h--}}this.I=null},n8.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},n8.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var i8=H5.JSON.stringify;function o8(){var e=p8,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var s8,u8=function(){function e(){(0,Se.Z)(this,e),this.h=this.g=null}return(0,Te.Z)(e,[{key:"add",value:function(e,t){var n=c8.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),c8=new(function(){function e(t,n){(0,Se.Z)(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return(0,Te.Z)(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new l8}),(function(e){return e.reset()})),l8=function(){function e(){(0,Se.Z)(this,e),this.next=this.g=this.h=null}return(0,Te.Z)(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function d8(e){H5.setTimeout((function(){throw e}),0)}function f8(e,t){s8||function(){var e=H5.Promise.resolve(void 0);s8=function(){e.then(v8)}}(),h8||(s8(),h8=!0),p8.add(e,t)}var h8=!1,p8=new u8;function v8(){for(var e;e=o8();){try{e.h.call(e.g)}catch(n){d8(n)}var t=c8;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}h8=!1}function m8(e,t){n8.call(this),this.h=e||1,this.g=t||H5,this.j=e6(this.lb,this),this.l=Date.now()}function g8(e){e.ca=!1,e.R&&(e.g.clearTimeout(e.R),e.R=null)}function y8(e,t,n){if("function"===typeof e)n&&(e=e6(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=e6(e.handleEvent,e)}return 2147483647<Number(t)?-1:H5.setTimeout(e,t||0)}function b8(e){e.g=y8((function(){e.g=null,e.i&&(e.i=!1,b8(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}n6(m8,n8),(V5=m8.prototype).ca=!1,V5.R=null,V5.lb=function(){if(this.ca){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-e):(this.R&&(this.g.clearTimeout(this.R),this.R=null),r8(this,"tick"),this.ca&&(g8(this),this.start()))}},V5.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},V5.M=function(){m8.X.M.call(this),g8(this),delete this.g};var k8=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e,r){var a;return(0,Se.Z)(this,n),(a=t.call(this)).m=e,a.j=r,a.h=null,a.i=!1,a.g=null,a}return(0,Te.Z)(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:b8(this)}},{key:"M",value:function(){BN((0,zN.Z)(n.prototype),"M",this).call(this),this.g&&(H5.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(r6);function w8(e){r6.call(this),this.h=e,this.g={}}n6(w8,r6);var x8=[];function I8(e,t,n,r){Array.isArray(n)||(n&&(x8[0]=n.toString()),n=x8);for(var a=0;a<n.length;a++){var i=H6(t,n[a],r||e.handleEvent,!1,e.h||e);if(!i)break;e.g[i.key]=i}}function S8(e){M6(e.g,(function(e,t){this.g.hasOwnProperty(t)&&X6(e)}),e),e.g={}}function T8(){this.g=!0}function E8(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var a=r[1];if(Array.isArray(a)&&!(1>a.length)){var i=a[0];if("noop"!=i&&"stop"!=i&&"close"!=i)for(var o=1;o<a.length;o++)a[o]=""}}}return i8(n)}catch(s){return t}}(e,n)+(r?" "+r:"")}))}w8.prototype.M=function(){w8.X.M.call(this),S8(this)},w8.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},T8.prototype.Aa=function(){this.g=!1},T8.prototype.info=function(){};var N8={},C8=null;function Z8(){return C8=C8||new n8}function _8(e){s6.call(this,N8.Pa,e)}function A8(e){var t=Z8();r8(t,new _8(t))}function R8(e,t){s6.call(this,N8.STAT_EVENT,e),this.stat=t}function D8(e){var t=Z8();r8(t,new R8(t,e))}function O8(e,t){s6.call(this,N8.Qa,e),this.size=t}function L8(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return H5.setTimeout((function(){e()}),t)}N8.Pa="serverreachability",n6(_8,s6),N8.STAT_EVENT="statevent",n6(R8,s6),N8.Qa="timingevent",n6(O8,s6);var F8={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},M8={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function P8(){}function z8(e){return e.h||(e.h=e.i())}function B8(){}P8.prototype.h=null;var V8,U8={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function W8(){s6.call(this,"d")}function j8(){s6.call(this,"c")}function G8(){}function H8(e,t,n,r){this.l=e,this.j=t,this.m=n,this.U=r||1,this.S=new w8(this),this.O=$8,e=b6?125:void 0,this.T=new m8(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new q8}function q8(){this.i=null,this.g="",this.h=!1}n6(W8,s6),n6(j8,s6),n6(G8,P8),G8.prototype.g=function(){return new XMLHttpRequest},G8.prototype.i=function(){return{}},V8=new G8;var $8=45e3,K8={},X8={};function Y8(e,t,n){e.K=1,e.v=m7(d7(t)),e.s=n,e.P=!0,Q8(e,null)}function Q8(e,t){e.F=Date.now(),n7(e),e.A=d7(e.v);var n=e.A,r=e.U;Array.isArray(r)||(r=[String(r)]),Z7(n.i,"t",r),e.C=0,n=e.l.H,e.h=new q8,e.g=_9(e.l,n?t:null,!e.s),0<e.N&&(e.L=new k8(e6(e.La,e,e.g),e.N)),I8(e.S,e.g,"readystatechange",e.ib),t=e.H?P6(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.da(e.A,e.u,e.s,t)):(e.u="GET",e.g.da(e.A,e.u,null,t)),A8(),function(e,t,n,r,a,i){e.info((function(){if(e.g)if(i)for(var o="",s=i.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var l=c[0];c=c[1];var d=l.split("_");o=2<=d.length&&"type"==d[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=i;return"XMLHTTP REQ ("+r+") [attempt "+a+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.U,e.s)}function J8(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Da)}function e7(e,t,n){for(var r,a=!0;!e.I&&e.C<n.length;){if((r=t7(e,n))==X8){4==t&&(e.o=4,D8(14),a=!1),E8(e.j,e.m,null,"[Incomplete Response]");break}if(r==K8){e.o=4,D8(15),E8(e.j,e.m,n,"[Invalid Chunk]"),a=!1;break}E8(e.j,e.m,r,null),s7(e,r)}J8(e)&&r!=X8&&r!=K8&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,D8(16),a=!1),e.i=e.i&&a,a?0<n.length&&!e.$&&(e.$=!0,(t=e.l).g==e&&t.$&&!t.K&&(t.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),x9(t),t.K=!0,D8(11))):(E8(e.j,e.m,n,"[Invalid Chunked Response]"),o7(e),i7(e))}function t7(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?X8:(n=Number(t.substring(n,r)),isNaN(n)?K8:(r+=1)+n>t.length?X8:(t=t.substr(r,n),e.C=r+n,t))}function n7(e){e.V=Date.now()+e.O,r7(e,e.O)}function r7(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=L8(e6(e.gb,e),t)}function a7(e){e.B&&(H5.clearTimeout(e.B),e.B=null)}function i7(e){0==e.l.G||e.I||T9(e.l,e)}function o7(e){a7(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,g8(e.T),S8(e.S),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function s7(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||M7(n.h,e)))if(!e.J&&M7(n.h,e)&&3==n.G){try{var r=n.Fa.g.parse(t)}catch(i){r=null}if(Array.isArray(r)&&3==r.length){var a=r;if(0==a[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;S9(n),p9(n)}w9(n),D8(18)}}else n.Ba=a[1],0<n.Ba-n.T&&37500>a[2]&&n.L&&0==n.A&&!n.v&&(n.v=L8(e6(n.cb,n),6e3));if(1>=F7(n.h)&&n.ja){try{n.ja()}catch(i){}n.ja=void 0}}else N9(n,11)}else if((e.J||n.g==e)&&S9(n),!c6(t))for(a=n.Fa.g.parse(t),t=0;t<a.length;t++){var i=a[t];if(n.T=i[0],i=i[1],2==n.G)if("c"==i[0]){n.I=i[1],n.ka=i[2];var o=i[3];null!=o&&(n.ma=o,n.j.info("VER="+n.ma));var s=i[4];null!=s&&(n.Ca=s,n.j.info("SVER="+n.Ca));var u=i[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.J=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var d=r.h;d.g||-1==l.indexOf("spdy")&&-1==l.indexOf("quic")&&-1==l.indexOf("h2")||(d.j=d.l,d.g=new Set,d.h&&(P7(d,d.h),d.h=null))}if(r.D){var f=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.za=f,v7(r.F,r.D,f))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-e.F,n.j.info("Handshake RTT: "+n.P+"ms"));var h=e;if((r=n).sa=Z9(r,r.H?r.ka:null,r.V),h.J){z7(r.h,h);var p=h,v=r.J;v&&p.setTimeout(v),p.B&&(a7(p),n7(p)),r.g=h}else k9(r);0<n.i.length&&m9(n)}else"stop"!=i[0]&&"close"!=i[0]||N9(n,7);else 3==n.G&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?N9(n,7):h9(n):"noop"!=i[0]&&n.l&&n.l.wa(i),n.A=0)}A8()}catch(i){}}function u7(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if($5(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.oa&&"function"==typeof e.oa)return e.oa();if(!e.W||"function"!=typeof e.W){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if($5(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.W&&"function"==typeof e.W)return e.W();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if($5(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),a=r.length,i=0;i<a;i++)t.call(void 0,r[i],n&&n[i],e)}(V5=H8.prototype).setTimeout=function(e){this.O=e},V5.ib=function(e){e=e.target;var t=this.L;t&&3==s9(e)?t.l():this.La(e)},V5.La=function(e){try{if(e==this.g)e:{var t=s9(this.g),n=this.g.Ea();this.g.aa();if(!(3>t)&&(3!=t||b6||this.g&&(this.h.h||this.g.fa()||u9(this.g)))){this.I||4!=t||7==n||A8(),a7(this);var r=this.g.aa();this.Y=r;t:if(J8(this)){var a=u9(this.g);e="";var i=a.length,o=4==s9(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){o7(this),i7(this);var s="";break t}this.h.i=new H5.TextDecoder}for(n=0;n<i;n++)this.h.h=!0,e+=this.h.i.decode(a[n],{stream:o&&n==i-1});a.splice(0,i),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.fa();if(this.i=200==r,function(e,t,n,r,a,i,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+a+"]: "+t+"\n"+n+"\n"+i+" "+o}))}(this.j,this.u,this.A,this.m,this.U,t,r),this.i){if(this.Z&&!this.J){t:{if(this.g){var u,c=this.g;if((u=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!c6(u)){var l=u;break t}}l=null}if(!(r=l)){this.i=!1,this.o=3,D8(12),o7(this),i7(this);break e}E8(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,s7(this,r)}this.P?(e7(this,t,s),b6&&this.i&&3==t&&(I8(this.S,this.T,"tick",this.hb),this.T.start())):(E8(this.j,this.m,s,null),s7(this,s)),4==t&&o7(this),this.i&&!this.I&&(4==t?T9(this.l,this):(this.i=!1,n7(this)))}else 400==r&&0<s.indexOf("Unknown SID")?(this.o=3,D8(12)):(this.o=0,D8(13)),o7(this),i7(this)}}}catch(t){}},V5.hb=function(){if(this.g){var e=s9(this.g),t=this.g.fa();this.C<t.length&&(a7(this),e7(this,e,t),this.i&&4!=e&&n7(this))}},V5.cancel=function(){this.I=!0,o7(this)},V5.gb=function(){this.B=null;var e=Date.now();0<=e-this.V?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(A8(),D8(17)),o7(this),this.o=2,i7(this)):r7(this,this.V-e)};var c7=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function l7(e,t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof l7){this.h=void 0!==t?t:e.h,f7(this,e.j),this.s=e.s,this.g=e.g,h7(this,e.m),this.l=e.l,t=e.i;var n=new T7;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),p7(this,n),this.o=e.o}else e&&(n=String(e).match(c7))?(this.h=!!t,f7(this,n[1]||"",!0),this.s=g7(n[2]||""),this.g=g7(n[3]||"",!0),h7(this,n[4]),this.l=g7(n[5]||"",!0),p7(this,n[6]||"",!0),this.o=g7(n[7]||"")):(this.h=!!t,this.i=new T7(null,this.h))}function d7(e){return new l7(e)}function f7(e,t,n){e.j=n?g7(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function h7(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function p7(e,t,n){t instanceof T7?(e.i=t,function(e,t){t&&!e.j&&(E7(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(N7(this,t),Z7(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=y7(t,I7)),e.i=new T7(t,e.h))}function v7(e,t,n){e.i.set(t,n)}function m7(e){return v7(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function g7(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function y7(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,b7),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function b7(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}l7.prototype.toString=function(){var e=[],t=this.j;t&&e.push(y7(t,k7,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(y7(t,k7,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(y7(n,"/"==n.charAt(0)?x7:w7,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",y7(n,S7)),e.join("")};var k7=/[#\/\?@]/g,w7=/[#\?:]/g,x7=/[#\?]/g,I7=/[#\?@]/g,S7=/#/g;function T7(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function E7(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),a=null;if(0<=r){var i=e[n].substring(0,r);a=e[n].substring(r+1)}else i=e[n];t(i,a?decodeURIComponent(a.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function N7(e,t){E7(e),t=_7(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function C7(e,t){return E7(e),t=_7(e,t),e.g.has(t)}function Z7(e,t,n){N7(e,t),0<n.length&&(e.i=null,e.g.set(_7(e,t),i6(n)),e.h+=n.length)}function _7(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(V5=T7.prototype).add=function(e,t){E7(this),this.i=null,e=_7(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},V5.forEach=function(e,t){E7(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},V5.oa=function(){E7(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var a=e[r],i=0;i<a.length;i++)n.push(t[r]);return n},V5.W=function(e){E7(this);var t=[];if("string"===typeof e)C7(this,e)&&(t=t.concat(this.g.get(_7(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},V5.set=function(e,t){return E7(this),this.i=null,C7(this,e=_7(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},V5.get=function(e,t){return e&&0<(e=this.W(e)).length?String(e[0]):t},V5.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],a=encodeURIComponent(String(r)),i=this.W(r);for(r=0;r<i.length;r++){var o=a;""!==i[r]&&(o+="="+encodeURIComponent(String(i[r]))),e.push(o)}}return this.i=e.join("&")};var A7=(0,Te.Z)((function e(t,n){(0,Se.Z)(this,e),this.h=t,this.g=n}));function R7(e){this.l=e||O7,H5.PerformanceNavigationTiming?e=0<(e=H5.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(H5.g&&H5.g.Ga&&H5.g.Ga()&&H5.g.Ga().$b),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var D7,O7=10;function L7(e){return!!e.h||!!e.g&&e.g.size>=e.j}function F7(e){return e.h?1:e.g?e.g.size:0}function M7(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function P7(e,t){e.g?e.g.add(t):e.h=t}function z7(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function B7(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=(0,Ht.Z)(e.g.values());try{for(r.s();!(t=r.n()).done;){var a=t.value;n=n.concat(a.D)}}catch(yhe){r.e(yhe)}finally{r.f()}return n}return i6(e.i)}function V7(){}function U7(){this.g=new V7}function W7(e,t,n){var r=n||"";try{u7(e,(function(e,n){var a=e;K5(e)&&(a=i8(e)),t.push(r+n+"="+encodeURIComponent(a))}))}catch(a){throw t.push(r+"type="+encodeURIComponent("_badmap")),a}}function j7(e,t,n,r,a){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,a(r)}catch(i){}}function G7(e){this.l=e.ac||null,this.j=e.jb||!1}function H7(e,t){n8.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=q7,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}R7.prototype.cancel=function(){if(this.i=B7(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=(0,Ht.Z)(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(yhe){t.e(yhe)}finally{t.f()}this.g.clear()}},V7.prototype.stringify=function(e){return H5.JSON.stringify(e,void 0)},V7.prototype.parse=function(e){return H5.JSON.parse(e,void 0)},n6(G7,P8),G7.prototype.g=function(){return new H7(this.l,this.j)},G7.prototype.i=(D7={},function(){return D7}),n6(H7,n8);var q7=0;function $7(e){e.j.read().then(e.Ta.bind(e)).catch(e.ga.bind(e))}function K7(e){e.readyState=4,e.l=null,e.j=null,e.A=null,X7(e)}function X7(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(V5=H7.prototype).open=function(e,t){if(this.readyState!=q7)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,X7(this)},V5.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||H5).fetch(new Request(this.B,t)).then(this.Wa.bind(this),this.ga.bind(this))},V5.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,K7(this)),this.readyState=q7},V5.Wa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,X7(this)),this.g&&(this.readyState=3,X7(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if("undefined"!==typeof H5.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;$7(this)}else e.text().then(this.Va.bind(this),this.ga.bind(this))},V5.Ta=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?K7(this):X7(this),3==this.readyState&&$7(this)}},V5.Va=function(e){this.g&&(this.response=this.responseText=e,K7(this))},V5.Ua=function(e){this.g&&(this.response=e,K7(this))},V5.ga=function(){this.g&&K7(this)},V5.setRequestHeader=function(e,t){this.v.append(e,t)},V5.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},V5.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(H7.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Y7=H5.JSON.parse;function Q7(e){n8.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=J7,this.K=this.L=!1}n6(Q7,n8);var J7="",e9=/^https?$/i,t9=["POST","PUT"];function n9(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,r9(e),i9(e)}function r9(e){e.D||(e.D=!0,r8(e,"complete"),r8(e,"error"))}function a9(e){if(e.h&&"undefined"!=typeof G5&&(!e.C[1]||4!=s9(e)||2!=e.aa()))if(e.v&&4==s9(e))y8(e.Ha,0,e);else if(r8(e,"readystatechange"),4==s9(e)){e.h=!1;try{var t,n=e.aa();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var a;if(a=0===n){var i=String(e.H).match(c7)[1]||null;if(!i&&H5.self&&H5.self.location){var o=H5.self.location.protocol;i=o.substr(0,o.length-1)}a=!e9.test(i?i.toLowerCase():"")}t=a}if(t)r8(e,"complete"),r8(e,"success");else{e.m=6;try{var s=2<s9(e)?e.g.statusText:""}catch(u){s=""}e.j=s+" ["+e.aa()+"]",r9(e)}}finally{i9(e)}}}function i9(e,t){if(e.g){o9(e);var n=e.g,r=e.C[0]?q5:null;e.g=null,e.C=null,t||r8(e,"ready");try{n.onreadystatechange=r}catch(a){}}}function o9(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(H5.clearTimeout(e.A),e.A=null)}function s9(e){return e.g?e.g.readyState:0}function u9(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case J7:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(q9){return null}}function c9(e){var t="";return M6(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function l9(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=c9(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):v7(e,t,n))}function d9(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function f9(e){this.Ca=0,this.i=[],this.j=new T8,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=d9("failFast",!1,e),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=d9("baseRetryDelayMs",5e3,e),this.bb=d9("retryDelaySeedMs",1e4,e),this.$a=d9("forwardChannelMaxRetries",2,e),this.ta=d9("forwardChannelRequestTimeoutMs",2e4,e),this.ra=e&&e.xmlHttpFactory||void 0,this.Da=e&&e.Zb||!1,this.J=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.I="",this.h=new R7(e&&e.concurrentRequestLimit),this.Fa=new U7,this.O=e&&e.fastHandshake||!1,this.N=e&&e.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=e&&e.Xb||!1,e&&e.Aa&&this.j.Aa(),e&&e.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&e&&e.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function h9(e){if(v9(e),3==e.G){var t=e.U++,n=d7(e.F);v7(n,"SID",e.I),v7(n,"RID",t),v7(n,"TYPE","terminate"),y9(e,n),(t=new H8(e,e.j,t,void 0)).K=2,t.v=m7(d7(n)),n=!1,H5.navigator&&H5.navigator.sendBeacon&&(n=H5.navigator.sendBeacon(t.v.toString(),"")),!n&&H5.Image&&((new Image).src=t.v,n=!0),n||(t.g=_9(t.l,null),t.g.da(t.v)),t.F=Date.now(),n7(t)}C9(e)}function p9(e){e.g&&(x9(e),e.g.cancel(),e.g=null)}function v9(e){p9(e),e.u&&(H5.clearTimeout(e.u),e.u=null),S9(e),e.h.cancel(),e.m&&("number"===typeof e.m&&H5.clearTimeout(e.m),e.m=null)}function m9(e){L7(e.h)||e.m||(e.m=!0,f8(e.Ja,e),e.C=0)}function g9(e,t){var n;n=t?t.m:e.U++;var r=d7(e.F);v7(r,"SID",e.I),v7(r,"RID",n),v7(r,"AID",e.T),y9(e,r),e.o&&e.s&&l9(r,e.o,e.s),n=new H8(e,e.j,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.i=t.D.concat(e.i)),t=b9(e,n,1e3),n.setTimeout(Math.round(.5*e.ta)+Math.round(.5*e.ta*Math.random())),P7(e.h,n),Y8(n,r,t)}function y9(e,t){e.ia&&M6(e.ia,(function(e,n){v7(t,n,e)})),e.l&&u7({},(function(e,n){v7(t,n,e)}))}function b9(e,t,n){n=Math.min(e.i.length,n);var r=e.l?e6(e.l.Ra,e.l,e):null;e:for(var a=e.i,i=-1;;){var o=["count="+n];-1==i?0<n?(i=a[0].h,o.push("ofs="+i)):i=0:o.push("ofs="+i);for(var s=!0,u=0;u<n;u++){var c=a[u].h,l=a[u].g;if(0>(c-=i))i=Math.max(0,a[u].h-100),s=!1;else try{W7(l,o,"req"+c+"_")}catch(ree){r&&r(l)}}if(s){r=o.join("&");break e}}return e=e.i.splice(0,n),t.D=e,r}function k9(e){e.g||e.u||(e.Z=1,f8(e.Ia,e),e.A=0)}function w9(e){return!(e.g||e.u||3<=e.A)&&(e.Z++,e.u=L8(e6(e.Ia,e),E9(e,e.A)),e.A++,!0)}function x9(e){null!=e.B&&(H5.clearTimeout(e.B),e.B=null)}function I9(e){e.g=new H8(e,e.j,"rpc",e.Z),null===e.o&&(e.g.H=e.s),e.g.N=0;var t=d7(e.sa);v7(t,"RID","rpc"),v7(t,"SID",e.I),v7(t,"CI",e.L?"0":"1"),v7(t,"AID",e.T),v7(t,"TYPE","xmlhttp"),y9(e,t),e.o&&e.s&&l9(t,e.o,e.s),e.J&&e.g.setTimeout(e.J);var n=e.g;e=e.ka,n.K=1,n.v=m7(d7(t)),n.s=null,n.P=!0,Q8(n,e)}function S9(e){null!=e.v&&(H5.clearTimeout(e.v),e.v=null)}function T9(e,t){var n=null;if(e.g==t){S9(e),x9(e),e.g=null;var r=2}else{if(!M7(e.h,t))return;n=t.D,z7(e.h,t),r=1}if(0!=e.G)if(e.pa=t.Y,t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var a=e.C;r8(r=Z8(),new O8(r,n)),m9(e)}else k9(e);else if(3==(a=t.o)||0==a&&0<e.pa||!(1==r&&function(e,t){return!(F7(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.C>=(e.Za?0:e.$a))&&(e.m=L8(e6(e.Ja,e,t),E9(e,e.C)),e.C++,!0))}(e,t)||2==r&&w9(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),a){case 1:N9(e,5);break;case 4:N9(e,10);break;case 3:N9(e,6);break;default:N9(e,2)}}function E9(e,t){var n=e.Xa+Math.floor(Math.random()*e.bb);return e.l||(n*=2),n*t}function N9(e,t){if(e.j.info("Error code "+t),2==t){var n=null;e.l&&(n=null);var r=e6(e.kb,e);n||(n=new l7("//www.google.com/images/cleardot.gif"),H5.location&&"http"==H5.location.protocol||f7(n,"https"),m7(n)),function(e,t){var n=new T8;if(H5.Image){var r=new Image;r.onload=t6(j7,n,r,"TestLoadImage: loaded",!0,t),r.onerror=t6(j7,n,r,"TestLoadImage: error",!1,t),r.onabort=t6(j7,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=t6(j7,n,r,"TestLoadImage: timeout",!1,t),H5.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else D8(2);e.G=0,e.l&&e.l.va(t),C9(e),v9(e)}function C9(e){if(e.G=0,e.la=[],e.l){var t=B7(e.h);0==t.length&&0==e.i.length||(o6(e.la,t),o6(e.la,e.i),e.h.i.length=0,i6(e.i),e.i.length=0),e.l.ua()}}function Z9(e,t,n){var r=n instanceof l7?d7(n):new l7(n,void 0);if(""!=r.g)t&&(r.g=t+"."+r.g),h7(r,r.m);else{var a=H5.location;r=a.protocol,t=t?t+"."+a.hostname:a.hostname,a=+a.port;var i=new l7(null,void 0);r&&f7(i,r),t&&(i.g=t),a&&h7(i,a),n&&(i.l=n),r=i}return n=e.D,t=e.za,n&&t&&v7(r,n,t),v7(r,"VER",e.ma),y9(e,r),r}function _9(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Da&&!e.ra?new Q7(new G7({jb:!0})):new Q7(e.ra)).Ka(e.H),t}function A9(){}function R9(){if(g6&&!(10<=Number(_6)))throw Error("Environmental error: no available transport.")}function D9(e,t){n8.call(this),this.g=new f9(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.S=e,(e=t&&t.Yb)&&!c6(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!c6(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new F9(this)}function O9(e){W8.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function L9(){j8.call(this),this.status=1}function F9(e){this.g=e}(V5=Q7.prototype).Ka=function(e){this.L=e},V5.da=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():V8.g(),this.C=this.u?z8(this.u):z8(V8),this.g.onreadystatechange=e6(this.Ha,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(s){return void n9(this,s)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var a in r)n.set(a,r[a]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var i,o=(0,Ht.Z)(r.keys());try{for(o.s();!(i=o.n()).done;){var s=i.value;n.set(s,r.get(s))}}catch(yhe){o.e(yhe)}finally{o.f()}}r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),a=H5.FormData&&e instanceof H5.FormData,!(0<=a6(t9,t))||r||a||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var u,c=(0,Ht.Z)(n);try{for(c.s();!(u=c.n()).done;){var l=(0,ge.Z)(u.value,2),d=l[0],f=l[1];this.g.setRequestHeader(d,f)}}catch(yhe){c.e(yhe)}finally{c.f()}this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{o9(this),0<this.B&&((this.K=function(e){return g6&&C6()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=e6(this.qa,this)):this.A=y8(this.qa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){n9(this,s)}},V5.qa=function(){"undefined"!=typeof G5&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,r8(this,"timeout"),this.abort(8))},V5.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,r8(this,"complete"),r8(this,"abort"),i9(this))},V5.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),i9(this,!0)),Q7.X.M.call(this)},V5.Ha=function(){this.s||(this.F||this.v||this.l?a9(this):this.fb())},V5.fb=function(){a9(this)},V5.aa=function(){try{return 2<s9(this)?this.g.status:-1}catch(D7){return-1}},V5.fa=function(){try{return this.g?this.g.responseText:""}catch(D7){return""}},V5.Sa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Y7(t)}},V5.Ea=function(){return this.m},V5.Oa=function(){return"string"===typeof this.j?this.j:String(this.j)},(V5=f9.prototype).ma=8,V5.G=1,V5.Ja=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;var t=new H8(this,this.j,e,void 0),n=this.s;if(this.S&&(n?B6(n=P6(n),this.S):n=this.S),null!==this.o||this.N||(t.H=n,n=null),this.O)e:{for(var r=0,a=0;a<this.i.length;a++){var i=this.i[a];if(void 0===(i="__data__"in i.g&&"string"===typeof(i=i.g.__data__)?i.length:void 0))break;if(4096<(r+=i)){r=a;break e}if(4096===r||a===this.i.length-1){r=a+1;break e}}r=1e3}else r=1e3;r=b9(this,t,r),v7(a=d7(this.F),"RID",e),v7(a,"CVER",22),this.D&&v7(a,"X-HTTP-Session-Id",this.D),y9(this,a),n&&(this.N?r="headers="+encodeURIComponent(String(c9(n)))+"&"+r:this.o&&l9(a,this.o,n)),P7(this.h,t),this.Ya&&v7(a,"TYPE","init"),this.O?(v7(a,"$req",r),v7(a,"SID","null"),t.Z=!0,Y8(t,a,null)):Y8(t,a,r),this.G=2}}else 3==this.G&&(e?g9(this,e):0==this.i.length||L7(this.h)||g9(this))},V5.Ia=function(){if(this.u=null,I9(this),this.$&&!(this.K||null==this.g||0>=this.P)){var e=2*this.P;this.j.info("BP detection timer enabled: "+e),this.B=L8(e6(this.eb,this),e)}},V5.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,D8(10),p9(this),I9(this))},V5.cb=function(){null!=this.v&&(this.v=null,p9(this),w9(this),D8(19))},V5.kb=function(e){e?(this.j.info("Successfully pinged google.com"),D8(2)):(this.j.info("Failed to ping google.com"),D8(1))},(V5=A9.prototype).xa=function(){},V5.wa=function(){},V5.va=function(){},V5.ua=function(){},V5.Ra=function(){},R9.prototype.g=function(e,t){return new D9(e,t)},n6(D9,n8),D9.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;D8(0),e.V=t,e.ia=n||{},e.L=e.Y,e.F=Z9(e,null,e.V),m9(e)},D9.prototype.close=function(){h9(this.g)},D9.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=i8(e),e=n);t.i.push(new A7(t.ab++,e)),3==t.G&&m9(t)},D9.prototype.M=function(){this.g.l=null,delete this.j,h9(this.g),delete this.g,D9.X.M.call(this)},n6(O9,W8),n6(L9,j8),n6(F9,A9),F9.prototype.xa=function(){r8(this.g,"a")},F9.prototype.wa=function(e){r8(this.g,new O9(e))},F9.prototype.va=function(e){r8(this.g,new L9)},F9.prototype.ua=function(){r8(this.g,"b")},R9.prototype.createWebChannel=R9.prototype.g,D9.prototype.send=D9.prototype.u,D9.prototype.open=D9.prototype.m,D9.prototype.close=D9.prototype.close,F8.NO_ERROR=0,F8.TIMEOUT=8,F8.HTTP_ERROR=6,M8.COMPLETE="complete",B8.EventType=U8,U8.OPEN="a",U8.CLOSE="b",U8.ERROR="c",U8.MESSAGE="d",n8.prototype.listen=n8.prototype.N,Q7.prototype.listenOnce=Q7.prototype.O,Q7.prototype.getLastError=Q7.prototype.Oa,Q7.prototype.getLastErrorCode=Q7.prototype.Ea,Q7.prototype.getStatus=Q7.prototype.aa,Q7.prototype.getResponseJson=Q7.prototype.Sa,Q7.prototype.getResponseText=Q7.prototype.fa,Q7.prototype.send=Q7.prototype.da,Q7.prototype.setWithCredentials=Q7.prototype.Ka;var M9=j5.createWebChannelTransport=function(){return new R9},P9=j5.getStatEventTarget=function(){return Z8()},z9=j5.ErrorCode=F8,B9=j5.EventType=M8,V9=j5.Event=N8,U9=j5.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},W9=j5.FetchXmlHttpFactory=G7,j9=j5.WebChannel=B8,G9=j5.XhrIo=Q7,H9="@firebase/firestore",q9=function(){function e(t){(0,Se.Z)(this,e),this.uid=t}return(0,Te.Z)(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();q9.UNAUTHENTICATED=new q9(null),q9.GOOGLE_CREDENTIALS=new q9("google-credentials-uid"),q9.FIRST_PARTY=new q9("first-party-uid"),q9.MOCK_USER=new q9("mock-user");var $9="9.19.0",K9=new sY("@firebase/firestore");function X9(){return K9.logLevel}function Y9(e){if(K9.logLevel<=eY.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=n.map(eee);K9.debug.apply(K9,["Firestore (".concat($9,"): ").concat(e)].concat((0,me.Z)(a)))}}function Q9(e){if(K9.logLevel<=eY.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=n.map(eee);K9.error.apply(K9,["Firestore (".concat($9,"): ").concat(e)].concat((0,me.Z)(a)))}}function J9(e){if(K9.logLevel<=eY.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=n.map(eee);K9.warn.apply(K9,["Firestore (".concat($9,"): ").concat(e)].concat((0,me.Z)(a)))}}function eee(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function tee(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat($9,") INTERNAL ASSERTION FAILED: ")+e;throw Q9(t),new Error(t)}function nee(e,t){e||tee()}function ree(e,t){return e}var aee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},iee=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e,r){var a;return(0,Se.Z)(this,n),(a=t.call(this,e,r)).code=e,a.message=r,a.toString=function(){return"".concat(a.name,": [code=").concat(a.code,"]: ").concat(a.message)},a}return(0,Te.Z)(n)}(MX),oee=(0,Te.Z)((function e(){var t=this;(0,Se.Z)(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),see=(0,Te.Z)((function e(t,n){(0,Se.Z)(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),uee=function(){function e(){(0,Se.Z)(this,e)}return(0,Te.Z)(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(q9.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),cee=function(){function e(t){(0,Se.Z)(this,e),this.token=t,this.changeListener=null}return(0,Te.Z)(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),lee=function(){function e(t){(0,Se.Z)(this,e),this.t=t,this.currentUser=q9.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return(0,Te.Z)(e,[{key:"start",value:function(e,t){var n=this,r=this.i,a=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},i=new oee;this.o=function(){n.i++,n.currentUser=n.u(),i.resolve(),i=new oee,e.enqueueRetryable((function(){return a(n.currentUser)}))};var o=function(){var t=i;e.enqueueRetryable((0,ke.Z)((0,be.Z)().mark((function e(){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,a(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},s=function(e){Y9("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return s(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?s(e):(Y9("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new oee)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(Y9("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(nee("string"==typeof n.accessToken),new see(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return nee(null===e||"string"==typeof e),new q9(e)}}]),e}(),dee=function(){function e(t,n,r){(0,Se.Z)(this,e),this.h=t,this.l=n,this.m=r,this.type="FirstParty",this.user=q9.FIRST_PARTY,this.g=new Map}return(0,Te.Z)(e,[{key:"p",value:function(){return this.m?this.m():null}},{key:"headers",get:function(){this.g.set("X-Goog-AuthUser",this.h);var e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}]),e}(),fee=function(){function e(t,n,r){(0,Se.Z)(this,e),this.h=t,this.l=n,this.m=r}return(0,Te.Z)(e,[{key:"getToken",value:function(){return Promise.resolve(new dee(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(q9.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),hee=(0,Te.Z)((function e(t){(0,Se.Z)(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),pee=function(){function e(t){(0,Se.Z)(this,e),this.I=t,this.forceRefresh=!1,this.appCheck=null,this.T=null}return(0,Te.Z)(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&Y9("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.T;return n.T=e.token,Y9("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var a=function(e){Y9("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.I.onInit((function(e){return a(e)})),setTimeout((function(){if(!n.appCheck){var e=n.I.getImmediate({optional:!0});e?a(e):Y9("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(nee("string"==typeof t.token),e.T=t.token,new hee(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function vee(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var mee=function(){function e(){(0,Se.Z)(this,e)}return(0,Te.Z)(e,null,[{key:"A",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=vee(40),a=0;a<r.length;++a)n.length<20&&r[a]<t&&(n+=e.charAt(r[a]%e.length));return n}}]),e}();function gee(e,t){return e<t?-1:e>t?1:0}function yee(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function bee(e){return e+"\0"}var kee=function(){function e(t,n){if((0,Se.Z)(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new iee(aee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new iee(aee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new iee(aee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new iee(aee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return(0,Te.Z)(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?gee(this.nanoseconds,e.nanoseconds):gee(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),wee=function(){function e(t){(0,Se.Z)(this,e),this.timestamp=t}return(0,Te.Z)(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new kee(0,0))}},{key:"max",value:function(){return new e(new kee(253402300799,999999999))}}]),e}(),xee=function(){function e(t,n,r){(0,Se.Z)(this,e),void 0===n?n=0:n>t.length&&tee(),void 0===r?r=t.length-n:r>t.length-n&&tee(),this.segments=t,this.offset=n,this.len=r}return(0,Te.Z)(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var a=e.get(r),i=t.get(r);if(a<i)return-1;if(a>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),Iee=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(){return(0,Se.Z)(this,n),t.apply(this,arguments)}return(0,Te.Z)(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];for(var i=0,o=r;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new iee(aee.INVALID_ARGUMENT,"Invalid segment (".concat(s,"). Paths must not contain // in them."));e.push.apply(e,(0,me.Z)(s.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(xee),See=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Tee=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(){return(0,Se.Z)(this,n),t.apply(this,arguments)}return(0,Te.Z)(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return See.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",a=0,i=function(){if(0===r.length)throw new iee(aee.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;a<e.length;){var s=e[a];if("\\"===s){if(a+1===e.length)throw new iee(aee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var u=e[a+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new iee(aee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,a+=2}else"`"===s?(o=!o,a++):"."!==s||o?(r+=s,a++):(i(),a++)}if(i(),o)throw new iee(aee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(xee),Eee=function(){function e(t){(0,Se.Z)(this,e),this.path=t}return(0,Te.Z)(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===Iee.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(Iee.fromString(t))}},{key:"fromName",value:function(t){return new e(Iee.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(Iee.emptyPath())}},{key:"comparator",value:function(e,t){return Iee.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new Iee(t.slice()))}}]),e}(),Nee=(0,Te.Z)((function e(t,n,r,a){(0,Se.Z)(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=a}));function Cee(e){return e.fields.find((function(e){return 2===e.kind}))}function Zee(e){return e.fields.filter((function(e){return 2!==e.kind}))}Nee.UNKNOWN_ID=-1;var _ee=(0,Te.Z)((function e(t,n){(0,Se.Z)(this,e),this.fieldPath=t,this.kind=n}));var Aee=function(){function e(t,n){(0,Se.Z)(this,e),this.sequenceNumber=t,this.offset=n}return(0,Te.Z)(e,null,[{key:"empty",value:function(){return new e(0,Oee.min())}}]),e}();function Ree(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,a=wee.fromTimestamp(1e9===r?new kee(n+1,0):new kee(n,r));return new Oee(a,Eee.empty(),t)}function Dee(e){return new Oee(e.readTime,e.key,-1)}var Oee=function(){function e(t,n,r){(0,Se.Z)(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return(0,Te.Z)(e,null,[{key:"min",value:function(){return new e(wee.min(),Eee.empty(),-1)}},{key:"max",value:function(){return new e(wee.max(),Eee.empty(),-1)}}]),e}();function Lee(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=Eee.comparator(e.documentKey,t.documentKey))?n:gee(e.largestBatchId,t.largestBatchId)}var Fee="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Mee=function(){function e(){(0,Se.Z)(this,e),this.onCommittedListeners=[]}return(0,Te.Z)(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function Pee(e){return zee.apply(this,arguments)}function zee(){return zee=(0,ke.Z)((0,be.Z)().mark((function e(t){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===aee.FAILED_PRECONDITION&&t.message===Fee){e.next=2;break}throw t;case 2:Y9("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),zee.apply(this,arguments)}var Bee=function(){function e(t){var n=this;(0,Se.Z)(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return(0,Te.Z)(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&tee(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,a){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,a)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,a)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,a=0,i=!1;t.forEach((function(t){++r,t.next((function(){++a,i&&a===r&&e()}),(function(e){return n(e)}))})),i=!0,a===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),a=(0,Ht.Z)(t);try{var i=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(a.s();!(n=a.n()).done;)i()}catch(yhe){a.e(yhe)}finally{a.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,a){r.push(t.call(n,e,a))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var a=t.length,i=new Array(a),o=0,s=function(){var s=u;n(t[s]).next((function(t){i[s]=t,++o===a&&e(i)}),(function(e){return r(e)}))},u=0;u<a;u++)s()}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function a(){!0===t()?n().next((function(){a()}),r):e()}()}))}}]),e}(),Vee=function(){function e(t,n){var r=this;(0,Se.Z)(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.R=new oee,this.transaction.oncomplete=function(){r.R.resolve()},this.transaction.onabort=function(){n.error?r.R.reject(new jee(t,n.error)):r.R.resolve()},this.transaction.onerror=function(e){var n=Kee(e.target.error);r.R.reject(new jee(t,n))}}return(0,Te.Z)(e,[{key:"v",get:function(){return this.R.promise}},{key:"abort",value:function(e){e&&this.R.reject(e),this.aborted||(Y9("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"P",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new Hee(t)}}],[{key:"open",value:function(t,n,r,a){try{return new e(n,t.transaction(a,r))}catch(t){throw new jee(n,t)}}}]),e}(),Uee=function(){function e(t,n,r){(0,Se.Z)(this,e),this.name=t,this.version=n,this.V=r,12.2===e.S(AX())&&Q9("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return(0,Te.Z)(e,[{key:"$",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){var n=this;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return Y9("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var a=indexedDB.open(n.name,n.version);a.onsuccess=function(t){var n=t.target.result;e(n)},a.onblocked=function(){r(new jee(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new iee(aee.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new iee(aee.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new jee(t,n))},a.onupgradeneeded=function(e){Y9("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.V.M(t,a.transaction,e.oldVersion,n.version).next((function(){Y9("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.F&&(this.db.onversionchange=function(e){return n.F(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"B",value:function(e){this.F=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t,n,r,a){var i,o,s,u,c=this;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i="readonly"===n,o=0,s=(0,be.Z)().mark((function e(){var n,s,u,l;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return++o,e.prev=1,e.next=4,c.$(t);case 4:return c.db=e.sent,n=Vee.open(c.db,t,i?"readonly":"readwrite",r),s=a(n).next((function(e){return n.P(),e})).catch((function(e){return n.abort(e),Bee.reject(e)})).toPromise(),s.catch((function(){})),e.next=9,n.v;case 9:return e.t0=s,e.abrupt("return",{v:e.t0});case 13:if(e.prev=13,e.t1=e.catch(1),u=e.t1,l="FirebaseError"!==u.name&&o<3,Y9("SimpleDb","Transaction failed with error:",u.message,"Retrying:",l),c.close(),l){e.next=18;break}return e.abrupt("return",{v:Promise.reject(u)});case 18:case"end":return e.stop()}}),e,null,[[1,13]])}));case 3:return e.delegateYield(s(),"t0",4);case 4:if("object"!==typeof(u=e.t0)){e.next=7;break}return e.abrupt("return",u.v);case 7:e.next=3;break;case 9:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return Y9("SimpleDb","Removing database:",e),qee(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"D",value:function(){if(!FX())return!1;if(e.C())return!0;var t=AX(),n=e.S(t),r=0<n&&n<10,a=e.N(t),i=0<a&&a<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||i)}},{key:"C",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.k)}},{key:"O",value:function(e,t){return e.store(t)}},{key:"S",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"N",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),Wee=function(){function e(t){(0,Se.Z)(this,e),this.L=t,this.q=!1,this.U=null}return(0,Te.Z)(e,[{key:"isDone",get:function(){return this.q}},{key:"K",get:function(){return this.U}},{key:"cursor",set:function(e){this.L=e}},{key:"done",value:function(){this.q=!0}},{key:"G",value:function(e){this.U=e}},{key:"delete",value:function(){return qee(this.L.delete())}}]),e}(),jee=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e,r){var a;return(0,Se.Z)(this,n),(a=t.call(this,aee.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",a}return(0,Te.Z)(n)}(iee);function Gee(e){return"IndexedDbTransactionError"===e.name}var Hee=function(){function e(t){(0,Se.Z)(this,e),this.store=t}return(0,Te.Z)(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(Y9("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Y9("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),qee(n)}},{key:"add",value:function(e){return Y9("SimpleDb","ADD",this.store.name,e,e),qee(this.store.add(e))}},{key:"get",value:function(e){var t=this;return qee(this.store.get(e)).next((function(n){return void 0===n&&(n=null),Y9("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return Y9("SimpleDb","DELETE",this.store.name,e),qee(this.store.delete(e))}},{key:"count",value:function(){return Y9("SimpleDb","COUNT",this.store.name),qee(this.store.count())}},{key:"j",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),a=[];return this.W(r,(function(e,t){a.push(t)})).next((function(){return a}))}var i=this.store.getAll(n.range);return new Bee((function(e,t){i.onerror=function(e){t(e.target.error)},i.onsuccess=function(t){e(t.target.result)}}))}},{key:"H",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new Bee((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"J",value:function(e,t){Y9("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.Y=!1;var r=this.cursor(n);return this.W(r,(function(e,t,n){return n.delete()}))}},{key:"Z",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.W(r,t)}},{key:"X",value:function(e){var t=this.cursor({});return new Bee((function(n,r){t.onerror=function(e){var t=Kee(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"W",value:function(e,t){var n=[];return new Bee((function(r,a){e.onerror=function(e){a(e.target.error)},e.onsuccess=function(e){var a=e.target.result;if(a){var i=new Wee(a),o=t(a.primaryKey,a.value,i);if(o instanceof Bee){var s=o.catch((function(e){return i.done(),Bee.reject(e)}));n.push(s)}i.isDone?r():null===i.K?a.continue():a.continue(i.K)}else r()}})).next((function(){return Bee.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.Y?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function qee(e){return new Bee((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=Kee(e.target.error);n(t)}}))}var $ee=!1;function Kee(e){var t=Uee.S(AX());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new iee("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return $ee||($ee=!0,setTimeout((function(){throw r}),0)),r}}return e}var Xee=function(){function e(t,n){(0,Se.Z)(this,e),this.asyncQueue=t,this.tt=n,this.task=null}return(0,Te.Z)(e,[{key:"start",value:function(){this.et(15e3)}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"et",value:function(e){var t=this;Y9("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ke.Z)((0,be.Z)().mark((function e(){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=Y9,e.t1="Documents written: ",e.next=6,t.tt.nt();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!Gee(e.t4)){e.next=17;break}Y9("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,Pee(e.t4);case 19:return e.next=21,t.et(6e4);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),Yee=function(){function e(t,n){(0,Se.Z)(this,e),this.localStore=t,this.persistence=n}return(0,Te.Z)(e,[{key:"nt",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){var t,n=this,r=arguments;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.st(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"st",value:function(e,t){var n=this,r=new Set,a=t,i=!0;return Bee.doWhile((function(){return!0===i&&a>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return Y9("IndexBackiller","Processing collection: ".concat(t)),n.it(e,t,a).next((function(e){a-=e,r.add(t)}));i=!1}))})).next((function(){return t-a}))}},{key:"it",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(a){return r.localStore.localDocuments.getNextDocuments(e,t,a,n).next((function(n){var i=n.changes;return r.localStore.indexManager.updateIndexEntries(e,i).next((function(){return r.rt(a,n)})).next((function(n){return Y9("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return i.size}))}))}))}},{key:"rt",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=Dee(t);Lee(r,n)>0&&(n=r)})),new Oee(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),Qee=function(){function e(t,n){var r=this;(0,Se.Z)(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.ot(e)},this.ut=function(e){return n.writeSequenceNumber(e)})}return(0,Te.Z)(e,[{key:"ot",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.ut&&this.ut(e),e}}]),e}();function Jee(e){return null==e}function ete(e){return 0===e&&1/e==-1/0}function tte(e){return"number"==typeof e&&Number.isInteger(e)&&!ete(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function nte(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=ate(t)),t=rte(e.get(n),t);return ate(t)}function rte(e,t){for(var n=t,r=e.length,a=0;a<r;a++){var i=e.charAt(a);switch(i){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=i}}return n}function ate(e){return e+"\x01\x01"}function ite(e){var t=e.length;if(nee(t>=2),2===t)return nee("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Iee.emptyPath();for(var n=t-2,r=[],a="",i=0;i<t;){var o=e.indexOf("\x01",i);switch((o<0||o>n)&&tee(),e.charAt(o+1)){case"\x01":var s=e.substring(i,o),u=void 0;0===a.length?u=s:(u=a+=s,a=""),r.push(u);break;case"\x10":a+=e.substring(i,o),a+="\0";break;case"\x11":a+=e.substring(i,o+1);break;default:tee()}i=o+2}return new Iee(r)}Qee.ct=-1;var ote=["userId","batchId"];function ste(e,t){return[e,nte(t)]}function ute(e,t,n){return[e,nte(t),n]}var cte={},lte=["prefixPath","collectionGroup","readTime","documentId"],dte=["prefixPath","collectionGroup","documentId"],fte=["collectionGroup","readTime","prefixPath","documentId"],hte=["canonicalId","targetId"],pte=["targetId","path"],vte=["path","targetId"],mte=["collectionId","parent"],gte=["indexId","uid"],yte=["uid","sequenceNumber"],bte=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],kte=["indexId","uid","orderedDocumentKey"],wte=["userId","collectionPath","documentId"],xte=["userId","collectionPath","largestBatchId"],Ite=["userId","collectionGroup","largestBatchId"],Ste=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),Tte=[].concat((0,me.Z)(Ste),["documentOverlays"]),Ete=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Nte=Ete,Cte=[].concat(Nte,["indexConfiguration","indexState","indexEntries"]),Zte=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e,r){var a;return(0,Se.Z)(this,n),(a=t.call(this)).at=e,a.currentSequenceNumber=r,a}return(0,Te.Z)(n)}(Mee);function _te(e,t){var n=ree(e);return Uee.O(n.at,t)}function Ate(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Rte(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Dte(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var Ote=function(){function e(t,n){(0,Se.Z)(this,e),this.comparator=t,this.root=n||Fte.EMPTY}return(0,Te.Z)(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Fte.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Fte.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new Lte(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new Lte(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new Lte(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new Lte(this.root,e,this.comparator,!0)}}]),e}(),Lte=function(){function e(t,n,r,a){(0,Se.Z)(this,e),this.isReverse=a,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=n?r(t.key,n):1,n&&a&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return(0,Te.Z)(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),Fte=function(){function e(t,n,r,a,i){(0,Se.Z)(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=a?a:e.EMPTY,this.right=null!=i?i:e.EMPTY,this.size=this.left.size+1+this.right.size}return(0,Te.Z)(e,[{key:"copy",value:function(t,n,r,a,i){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=a?a:this.left,null!=i?i:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,a=n(e,r.key);return(r=a<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===a?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,a=this;if(n(t,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(t,n),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),0===n(t,a.key)){if(a.right.isEmpty())return e.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(t,n))}return a.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw tee();if(this.right.isRed())throw tee();var e=this.left.check();if(e!==this.right.check())throw tee();return e+(this.isRed()?0:1)}}]),e}();Fte.EMPTY=null,Fte.RED=!0,Fte.BLACK=!1,Fte.EMPTY=new(function(){function e(){(0,Se.Z)(this,e),this.size=0}return(0,Te.Z)(e,[{key:"key",get:function(){throw tee()}},{key:"value",get:function(){throw tee()}},{key:"color",get:function(){throw tee()}},{key:"left",get:function(){throw tee()}},{key:"right",get:function(){throw tee()}},{key:"copy",value:function(e,t,n,r,a){return this}},{key:"insert",value:function(e,t,n){return new Fte(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var Mte=function(){function e(t){(0,Se.Z)(this,e),this.comparator=t,this.data=new Ote(this.comparator)}return(0,Te.Z)(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new Pte(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new Pte(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var a=n.getNext().key,i=r.getNext().key;if(0!==this.comparator(a,i))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),Pte=function(){function e(t){(0,Se.Z)(this,e),this.iter=t}return(0,Te.Z)(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function zte(e){return e.hasNext()?e.getNext():void 0}var Bte=function(){function e(t){(0,Se.Z)(this,e),this.fields=t,t.sort(Tee.comparator)}return(0,Te.Z)(e,[{key:"unionWith",value:function(t){var n,r=new Mte(Tee.comparator),a=(0,Ht.Z)(this.fields);try{for(a.s();!(n=a.n()).done;){var i=n.value;r=r.add(i)}}catch(yhe){a.e(yhe)}finally{a.f()}var o,s=(0,Ht.Z)(t);try{for(s.s();!(o=s.n()).done;){var u=o.value;r=r.add(u)}}catch(yhe){s.e(yhe)}finally{s.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=(0,Ht.Z)(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(yhe){n.e(yhe)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return yee(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}(),Vte=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(){var e;return(0,Se.Z)(this,n),(e=t.apply(this,arguments)).name="Base64DecodeError",e}return(0,Te.Z)(n)}((0,lT.Z)(Error));var Ute=function(e){function t(e){(0,Se.Z)(this,t),this.binaryString=e}return(0,Te.Z)(t,[{key:e,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return gee(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){var n=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Vte("Invalid base64 string: "+e):e}}(e);return new t(n)}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}(Symbol.iterator);Ute.EMPTY_BYTE_STRING=new Ute("");var Wte=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function jte(e){if(nee(!!e),"string"==typeof e){var t=0,n=Wte.exec(e);if(nee(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var a=new Date(e);return{seconds:Math.floor(a.getTime()/1e3),nanos:t}}return{seconds:Gte(e.seconds),nanos:Gte(e.nanos)}}function Gte(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Hte(e){return"string"==typeof e?Ute.fromBase64String(e):Ute.fromUint8Array(e)}function qte(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function $te(e){var t=e.mapValue.fields.__previous_value__;return qte(t)?$te(t):t}function Kte(e){var t=jte(e.mapValue.fields.__local_write_time__.timestampValue);return new kee(t.seconds,t.nanos)}var Xte=(0,Te.Z)((function e(t,n,r,a,i,o,s,u){(0,Se.Z)(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=a,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.useFetchStreams=u})),Yte=function(){function e(t,n){(0,Se.Z)(this,e),this.projectId=t,this.database=n||"(default)"}return(0,Te.Z)(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}(),Qte={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Jte={nullValue:"NULL_VALUE"};function ene(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?qte(e)?4:pne(e)?9007199254740991:10:tee()}function tne(e,t){if(e===t)return!0;var n=ene(e);if(n!==ene(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Kte(e).isEqual(Kte(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=jte(e.timestampValue),r=jte(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Hte(e.bytesValue).isEqual(Hte(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Gte(e.geoPointValue.latitude)===Gte(t.geoPointValue.latitude)&&Gte(e.geoPointValue.longitude)===Gte(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Gte(e.integerValue)===Gte(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=Gte(e.doubleValue),r=Gte(t.doubleValue);return n===r?ete(n)===ete(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return yee(e.arrayValue.values||[],t.arrayValue.values||[],tne);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Ate(n)!==Ate(r))return!1;for(var a in n)if(n.hasOwnProperty(a)&&(void 0===r[a]||!tne(n[a],r[a])))return!1;return!0}(e,t);default:return tee()}}function nne(e,t){return void 0!==(e.values||[]).find((function(e){return tne(e,t)}))}function rne(e,t){if(e===t)return 0;var n=ene(e),r=ene(t);if(n!==r)return gee(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return gee(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=Gte(e.integerValue||e.doubleValue),r=Gte(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return ane(e.timestampValue,t.timestampValue);case 4:return ane(Kte(e),Kte(t));case 5:return gee(e.stringValue,t.stringValue);case 6:return function(e,t){var n=Hte(e),r=Hte(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),a=0;a<n.length&&a<r.length;a++){var i=gee(n[a],r[a]);if(0!==i)return i}return gee(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=gee(Gte(e.latitude),Gte(t.latitude));return 0!==n?n:gee(Gte(e.longitude),Gte(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],a=0;a<n.length&&a<r.length;++a){var i=rne(n[a],r[a]);if(i)return i}return gee(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Qte.mapValue&&t===Qte.mapValue)return 0;if(e===Qte.mapValue)return 1;if(t===Qte.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),a=t.fields||{},i=Object.keys(a);r.sort(),i.sort();for(var o=0;o<r.length&&o<i.length;++o){var s=gee(r[o],i[o]);if(0!==s)return s;var u=rne(n[r[o]],a[i[o]]);if(0!==u)return u}return gee(r.length,i.length)}(e.mapValue,t.mapValue);default:throw tee()}}function ane(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return gee(e,t);var n=jte(e),r=jte(t),a=gee(n.seconds,r.seconds);return 0!==a?a:gee(n.nanos,r.nanos)}function ine(e){return one(e)}function one(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=jte(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Hte(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Eee.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,a=(0,Ht.Z)(e.values||[]);try{for(a.s();!(t=a.n()).done;){var i=t.value;r?r=!1:n+=",",n+=one(i)}}catch(yhe){a.e(yhe)}finally{a.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n=Object.keys(e.fields||{}).sort(),r="{",a=!0,i=(0,Ht.Z)(n);try{for(i.s();!(t=i.n()).done;){var o=t.value;a?a=!1:r+=",",r+="".concat(o,":").concat(one(e.fields[o]))}}catch(yhe){i.e(yhe)}finally{i.f()}return r+"}"}(e.mapValue):tee();var t,n}function sne(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function une(e){return!!e&&"integerValue"in e}function cne(e){return!!e&&"arrayValue"in e}function lne(e){return!!e&&"nullValue"in e}function dne(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function fne(e){return!!e&&"mapValue"in e}function hne(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Rte(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=hne(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=hne(e.arrayValue.values[r]);return n}return Object.assign({},e)}function pne(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function vne(e){return"nullValue"in e?Jte:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?sne(Yte.empty(),Eee.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:tee()}function mne(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?sne(Yte.empty(),Eee.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?Qte:tee()}function gne(e,t){var n=rne(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function yne(e,t){var n=rne(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var bne=function(){function e(t){(0,Se.Z)(this,e),this.value=t}return(0,Te.Z)(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!fne(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=hne(t)}},{key:"setAll",value:function(e){var t=this,n=Tee.emptyPath(),r={},a=[];e.forEach((function(e,i){if(!n.isImmediateParentOf(i)){var o=t.getFieldsMap(n);t.applyChanges(o,r,a),r={},a=[],n=i.popLast()}e?r[i.lastSegment()]=hne(e):a.push(i.lastSegment())}));var i=this.getFieldsMap(n);this.applyChanges(i,r,a)}},{key:"delete",value:function(e){var t=this.field(e.popLast());fne(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return tne(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];fne(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Rte(t,(function(t,n){return e[t]=n}));var r,a=(0,Ht.Z)(n);try{for(a.s();!(r=a.n()).done;){var i=r.value;delete e[i]}}catch(yhe){a.e(yhe)}finally{a.f()}}},{key:"clone",value:function(){return new e(hne(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function kne(e){var t=[];return Rte(e.fields,(function(e,n){var r=new Tee([e]);if(fne(n)){var a=kne(n.mapValue).fields;if(0===a.length)t.push(r);else{var i,o=(0,Ht.Z)(a);try{for(o.s();!(i=o.n()).done;){var s=i.value;t.push(r.child(s))}}catch(yhe){o.e(yhe)}finally{o.f()}}}else t.push(r)})),new Bte(t)}var wne=function(){function e(t,n,r,a,i,o,s){(0,Se.Z)(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=a,this.createTime=i,this.data=o,this.documentState=s}return(0,Te.Z)(e,[{key:"convertToFoundDocument",value:function(e,t){return!this.createTime.isEqual(wee.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=bne.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=bne.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=wee.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,wee.min(),wee.min(),wee.min(),bne.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r,a){return new e(t,1,n,wee.min(),r,a,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,wee.min(),wee.min(),bne.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,wee.min(),wee.min(),bne.empty(),2)}}]),e}(),xne=(0,Te.Z)((function e(t,n){(0,Se.Z)(this,e),this.position=t,this.inclusive=n}));function Ine(e,t,n){for(var r=0,a=0;a<e.position.length;a++){var i=t[a],o=e.position[a];if(r=i.field.isKeyField()?Eee.comparator(Eee.fromName(o.referenceValue),n.key):rne(o,n.data.field(i.field)),"desc"===i.dir&&(r*=-1),0!==r)break}return r}function Sne(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!tne(e.position[n],t.position[n]))return!1;return!0}var Tne=(0,Te.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";(0,Se.Z)(this,e),this.field=t,this.dir=n}));function Ene(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var Nne=(0,Te.Z)((function e(){(0,Se.Z)(this,e)})),Cne=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e,r,a){var i;return(0,Se.Z)(this,n),(i=t.call(this)).field=e,i.op=r,i.value=a,i}return(0,Te.Z)(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(rne(t,this.value)):null!==t&&ene(this.value)===ene(t)&&this.matchesComparison(rne(t,this.value))}},{key:"matchesComparison",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return tee()}}},{key:"isInequality",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}},{key:"getFlattenedFilters",value:function(){return[this]}},{key:"getFilters",value:function(){return[this]}},{key:"getFirstInequalityField",value:function(){return this.isInequality()?this.field:null}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new Pne(e,t,r):"array-contains"===t?new Une(e,r):"in"===t?new Wne(e,r):"not-in"===t?new jne(e,r):"array-contains-any"===t?new Gne(e,r):new n(e,t,r)}},{key:"createKeyFieldInFilter",value:function(e,t,n){return"in"===t?new zne(e,n):new Bne(e,n)}}]),n}(Nne),Zne=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e,r){var a;return(0,Se.Z)(this,n),(a=t.call(this)).filters=e,a.op=r,a.ht=null,a}return(0,Te.Z)(n,[{key:"matches",value:function(e){return _ne(this)?void 0===this.filters.find((function(t){return!t.matches(e)})):void 0!==this.filters.find((function(t){return t.matches(e)}))}},{key:"getFlattenedFilters",value:function(){return null!==this.ht||(this.ht=this.filters.reduce((function(e,t){return e.concat(t.getFlattenedFilters())}),[])),this.ht}},{key:"getFilters",value:function(){return Object.assign([],this.filters)}},{key:"getFirstInequalityField",value:function(){var e=this.lt((function(e){return e.isInequality()}));return null!==e?e.field:null}},{key:"lt",value:function(e){var t,n=(0,Ht.Z)(this.getFlattenedFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e(r))return r}}catch(yhe){n.e(yhe)}finally{n.f()}return null}}],[{key:"create",value:function(e,t){return new n(e,t)}}]),n}(Nne);function _ne(e){return"and"===e.op}function Ane(e){return"or"===e.op}function Rne(e){return Dne(e)&&_ne(e)}function Dne(e){var t,n=(0,Ht.Z)(e.filters);try{for(n.s();!(t=n.n()).done;){if(t.value instanceof Zne)return!1}}catch(yhe){n.e(yhe)}finally{n.f()}return!0}function One(e){if(e instanceof Cne)return e.field.canonicalString()+e.op.toString()+ine(e.value);if(Rne(e))return e.filters.map((function(e){return One(e)})).join(",");var t=e.filters.map((function(e){return One(e)})).join(",");return"".concat(e.op,"(").concat(t,")")}function Lne(e,t){return e instanceof Cne?function(e,t){return t instanceof Cne&&e.op===t.op&&e.field.isEqual(t.field)&&tne(e.value,t.value)}(e,t):e instanceof Zne?function(e,t){return t instanceof Zne&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((function(e,n,r){return e&&Lne(n,t.filters[r])}),!0)}(e,t):void tee()}function Fne(e,t){var n=e.filters.concat(t);return Zne.create(n,e.op)}function Mne(e){return e instanceof Cne?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(ine(e.value))}(e):e instanceof Zne?function(e){return e.op.toString()+" {"+e.getFilters().map(Mne).join(" ,")+"}"}(e):"Filter"}var Pne=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e,r,a){var i;return(0,Se.Z)(this,n),(i=t.call(this,e,r,a)).key=Eee.fromName(a.referenceValue),i}return(0,Te.Z)(n,[{key:"matches",value:function(e){var t=Eee.comparator(e.key,this.key);return this.matchesComparison(t)}}]),n}(Cne),zne=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e,r){var a;return(0,Se.Z)(this,n),(a=t.call(this,e,"in",r)).keys=Vne("in",r),a}return(0,Te.Z)(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Cne),Bne=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e,r){var a;return(0,Se.Z)(this,n),(a=t.call(this,e,"not-in",r)).keys=Vne("not-in",r),a}return(0,Te.Z)(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Cne);function Vne(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return Eee.fromName(e.referenceValue)}))}var Une=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e,r){return(0,Se.Z)(this,n),t.call(this,e,"array-contains",r)}return(0,Te.Z)(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return cne(t)&&nne(t.arrayValue,this.value)}}]),n}(Cne),Wne=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e,r){return(0,Se.Z)(this,n),t.call(this,e,"in",r)}return(0,Te.Z)(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&nne(this.value.arrayValue,t)}}]),n}(Cne),jne=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e,r){return(0,Se.Z)(this,n),t.call(this,e,"not-in",r)}return(0,Te.Z)(n,[{key:"matches",value:function(e){if(nne(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!nne(this.value.arrayValue,t)}}]),n}(Cne),Gne=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e,r){return(0,Se.Z)(this,n),t.call(this,e,"array-contains-any",r)}return(0,Te.Z)(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!cne(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return nne(t.value.arrayValue,e)}))}}]),n}(Cne),Hne=(0,Te.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;(0,Se.Z)(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=a,this.limit=i,this.startAt=o,this.endAt=s,this.ft=null}));function qne(e){return new Hne(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function $ne(e){var t=ree(e);if(null===t.ft){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return One(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),Jee(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return ine(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return ine(e)})).join(",")),t.ft=n}return t.ft}function Kne(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!Ene(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(!Lne(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Sne(e.startAt,t.startAt)&&Sne(e.endAt,t.endAt)}function Xne(e){return Eee.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Yne(e,t){return e.filters.filter((function(e){return e instanceof Cne&&e.field.isEqual(t)}))}function Qne(e,t,n){var r,a=Jte,i=!0,o=(0,Ht.Z)(Yne(e,t));try{for(o.s();!(r=o.n()).done;){var s=r.value,u=Jte,c=!0;switch(s.op){case"<":case"<=":u=vne(s.value);break;case"==":case"in":case">=":u=s.value;break;case">":u=s.value,c=!1;break;case"!=":case"not-in":u=Jte}gne({value:a,inclusive:i},{value:u,inclusive:c})<0&&(a=u,i=c)}}catch(yhe){o.e(yhe)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var d=n.position[l];gne({value:a,inclusive:i},{value:d,inclusive:n.inclusive})<0&&(a=d,i=n.inclusive);break}return{value:a,inclusive:i}}function Jne(e,t,n){var r,a=Qte,i=!0,o=(0,Ht.Z)(Yne(e,t));try{for(o.s();!(r=o.n()).done;){var s=r.value,u=Qte,c=!0;switch(s.op){case">=":case">":u=mne(s.value),c=!1;break;case"==":case"in":case"<=":u=s.value;break;case"<":u=s.value,c=!1;break;case"!=":case"not-in":u=Qte}yne({value:a,inclusive:i},{value:u,inclusive:c})>0&&(a=u,i=c)}}catch(yhe){o.e(yhe)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var d=n.position[l];yne({value:a,inclusive:i},{value:d,inclusive:n.inclusive})>0&&(a=d,i=n.inclusive);break}return{value:a,inclusive:i}}var ere=(0,Te.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;(0,Se.Z)(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=a,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=u,this.dt=null,this.wt=null,this.startAt,this.endAt}));function tre(e,t,n,r,a,i,o,s){return new ere(e,t,n,r,a,i,o,s)}function nre(e){return new ere(e)}function rre(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function are(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function ire(e){var t,n=(0,Ht.Z)(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value.getFirstInequalityField();if(null!==r)return r}}catch(yhe){n.e(yhe)}finally{n.f()}return null}function ore(e){return null!==e.collectionGroup}function sre(e){var t=ree(e);if(null===t.dt){t.dt=[];var n=ire(t),r=are(t);if(null!==n&&null===r)n.isKeyField()||t.dt.push(new Tne(n)),t.dt.push(new Tne(Tee.keyField(),"asc"));else{var a,i=!1,o=(0,Ht.Z)(t.explicitOrderBy);try{for(o.s();!(a=o.n()).done;){var s=a.value;t.dt.push(s),s.field.isKeyField()&&(i=!0)}}catch(yhe){o.e(yhe)}finally{o.f()}if(!i){var u=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.dt.push(new Tne(Tee.keyField(),u))}}}return t.dt}function ure(e){var t=ree(e);if(!t.wt)if("F"===t.limitType)t.wt=qne(t.path,t.collectionGroup,sre(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],a=(0,Ht.Z)(sre(t));try{for(a.s();!(n=a.n()).done;){var i=n.value,o="desc"===i.dir?"asc":"desc";r.push(new Tne(i.field,o))}}catch(yhe){a.e(yhe)}finally{a.f()}var s=t.endAt?new xne(t.endAt.position,t.endAt.inclusive):null,u=t.startAt?new xne(t.startAt.position,t.startAt.inclusive):null;t.wt=qne(t.path,t.collectionGroup,r,t.filters,t.limit,s,u)}return t.wt}function cre(e,t){t.getFirstInequalityField(),ire(e);var n=e.filters.concat([t]);return new ere(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function lre(e,t,n){return new ere(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function dre(e,t){return Kne(ure(e),ure(t))&&e.limitType===t.limitType}function fre(e){return"".concat($ne(ure(e)),"|lt:").concat(e.limitType)}function hre(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return Mne(e)})).join(", "),"]")),Jee(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return ine(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return ine(e)})).join(",")),"Target(".concat(t,")")}(ure(e)),"; limitType=").concat(e.limitType,")")}function pre(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Eee.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=(0,Ht.Z)(sre(e));try{for(r.s();!(n=r.n()).done;){var a=n.value;if(!a.field.isKeyField()&&null===t.data.field(a.field))return!1}}catch(yhe){r.e(yhe)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=(0,Ht.Z)(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(yhe){r.e(yhe)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=Ine(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,sre(e),t))&&!(e.endAt&&!function(e,t,n){var r=Ine(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,sre(e),t))}(e,t)}function vre(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function mre(e){return function(t,n){var r,a=!1,i=(0,Ht.Z)(sre(e));try{for(i.s();!(r=i.n()).done;){var o=r.value,s=gre(o,t,n);if(0!==s)return s;a=a||o.field.isKeyField()}}catch(yhe){i.e(yhe)}finally{i.f()}return 0}}function gre(e,t,n){var r=e.field.isKeyField()?Eee.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),a=n.data.field(e);return null!==r&&null!==a?rne(r,a):tee()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return tee()}}var yre=function(){function e(t,n){(0,Se.Z)(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return(0,Te.Z)(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,a=(0,Ht.Z)(n);try{for(a.s();!(r=a.n()).done;){var i=(0,ge.Z)(r.value,2),o=i[0],s=i[1];if(this.equalsFn(o,e))return s}}catch(yhe){a.e(yhe)}finally{a.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return void(r[a]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){Rte(this.inner,(function(t,n){var r,a=(0,Ht.Z)(n);try{for(a.s();!(r=a.n()).done;){var i=(0,ge.Z)(r.value,2),o=i[0],s=i[1];e(o,s)}}catch(yhe){a.e(yhe)}finally{a.f()}}))}},{key:"isEmpty",value:function(){return Dte(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),bre=new Ote(Eee.comparator);function kre(){return bre}var wre=new Ote(Eee.comparator);function xre(){for(var e=wre,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var a=0,i=n;a<i.length;a++){var o=i[a];e=e.insert(o.key,o)}return e}function Ire(e){var t=wre;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function Sre(){return Ere()}function Tre(){return Ere()}function Ere(){return new yre((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var Nre=new Ote(Eee.comparator),Cre=new Mte(Eee.comparator);function Zre(){for(var e=Cre,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var a=0,i=n;a<i.length;a++){var o=i[a];e=e.add(o)}return e}var _re=new Mte(gee);function Are(){return _re}function Rre(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ete(t)?"-0":t}}function Dre(e){return{integerValue:""+e}}function Ore(e,t){return tte(t)?Dre(t):Rre(e,t)}var Lre=(0,Te.Z)((function e(){(0,Se.Z)(this,e),this._=void 0}));function Fre(e,t,n){return e instanceof zre?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Bre?Vre(e,t):e instanceof Ure?Wre(e,t):function(e,t){var n=Pre(e,t),r=Gre(n)+Gre(e._t);return une(n)&&une(e._t)?Dre(r):Rre(e.serializer,r)}(e,t)}function Mre(e,t,n){return e instanceof Bre?Vre(e,t):e instanceof Ure?Wre(e,t):n}function Pre(e,t){return e instanceof jre?une(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var zre=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(){return(0,Se.Z)(this,n),t.apply(this,arguments)}return(0,Te.Z)(n)}(Lre),Bre=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r;return(0,Se.Z)(this,n),(r=t.call(this)).elements=e,r}return(0,Te.Z)(n)}(Lre);function Vre(e,t){var n,r=Hre(t),a=(0,Ht.Z)(e.elements);try{var i=function(){var e=n.value;r.some((function(t){return tne(t,e)}))||r.push(e)};for(a.s();!(n=a.n()).done;)i()}catch(yhe){a.e(yhe)}finally{a.f()}return{arrayValue:{values:r}}}var Ure=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r;return(0,Se.Z)(this,n),(r=t.call(this)).elements=e,r}return(0,Te.Z)(n)}(Lre);function Wre(e,t){var n,r=Hre(t),a=(0,Ht.Z)(e.elements);try{var i=function(){var e=n.value;r=r.filter((function(t){return!tne(t,e)}))};for(a.s();!(n=a.n()).done;)i()}catch(yhe){a.e(yhe)}finally{a.f()}return{arrayValue:{values:r}}}var jre=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e,r){var a;return(0,Se.Z)(this,n),(a=t.call(this)).serializer=e,a._t=r,a}return(0,Te.Z)(n)}(Lre);function Gre(e){return Gte(e.integerValue||e.doubleValue)}function Hre(e){return cne(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var qre=(0,Te.Z)((function e(t,n){(0,Se.Z)(this,e),this.field=t,this.transform=n}));var $re=(0,Te.Z)((function e(t,n){(0,Se.Z)(this,e),this.version=t,this.transformResults=n})),Kre=function(){function e(t,n){(0,Se.Z)(this,e),this.updateTime=t,this.exists=n}return(0,Te.Z)(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function Xre(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var Yre=(0,Te.Z)((function e(){(0,Se.Z)(this,e)}));function Qre(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new lae(e.key,Kre.none()):new rae(e.key,e.data,Kre.none());var n,r=e.data,a=bne.empty(),i=new Mte(Tee.comparator),o=(0,Ht.Z)(t.fields);try{for(o.s();!(n=o.n()).done;){var s=n.value;if(!i.has(s)){var u=r.field(s);null===u&&s.length>1&&(s=s.popLast(),u=r.field(s)),null===u?a.delete(s):a.set(s,u),i=i.add(s)}}}catch(yhe){o.e(yhe)}finally{o.f()}return new aae(e.key,a,new Bte(i.toArray()),Kre.none())}function Jre(e,t,n){e instanceof rae?function(e,t,n){var r=e.value.clone(),a=oae(e.fieldTransforms,t,n.transformResults);r.setAll(a),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof aae?function(e,t,n){if(Xre(e.precondition,t)){var r=oae(e.fieldTransforms,t,n.transformResults),a=t.data;a.setAll(iae(e)),a.setAll(r),t.convertToFoundDocument(n.version,a).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function eae(e,t,n,r){return e instanceof rae?function(e,t,n,r){if(!Xre(e.precondition,t))return n;var a=e.value.clone(),i=sae(e.fieldTransforms,r,t);return a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null}(e,t,n,r):e instanceof aae?function(e,t,n,r){if(!Xre(e.precondition,t))return n;var a=sae(e.fieldTransforms,r,t),i=t.data;return i.setAll(iae(e)),i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return Xre(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function tae(e,t){var n,r=null,a=(0,Ht.Z)(e.fieldTransforms);try{for(a.s();!(n=a.n()).done;){var i=n.value,o=t.data.field(i.field),s=Pre(i.transform,o||null);null!=s&&(null===r&&(r=bne.empty()),r.set(i.field,s))}}catch(yhe){a.e(yhe)}finally{a.f()}return r||null}function nae(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&yee(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Bre&&t instanceof Bre||e instanceof Ure&&t instanceof Ure?yee(e.elements,t.elements,tne):e instanceof jre&&t instanceof jre?tne(e._t,t._t):e instanceof zre&&t instanceof zre}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var rae=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e,r,a){var i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return(0,Se.Z)(this,n),(i=t.call(this)).key=e,i.value=r,i.precondition=a,i.fieldTransforms=o,i.type=0,i}return(0,Te.Z)(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Yre),aae=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e,r,a,i){var o,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return(0,Se.Z)(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=a,o.precondition=i,o.fieldTransforms=s,o.type=1,o}return(0,Te.Z)(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(Yre);function iae(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function oae(e,t,n){var r=new Map;nee(e.length===n.length);for(var a=0;a<n.length;a++){var i=e[a],o=i.transform,s=t.data.field(i.field);r.set(i.field,Mre(o,s,n[a]))}return r}function sae(e,t,n){var r,a=new Map,i=(0,Ht.Z)(e);try{for(i.s();!(r=i.n()).done;){var o=r.value,s=o.transform,u=n.data.field(o.field);a.set(o.field,Fre(s,u,t))}}catch(yhe){i.e(yhe)}finally{i.f()}return a}var uae,cae,lae=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e,r){var a;return(0,Se.Z)(this,n),(a=t.call(this)).key=e,a.precondition=r,a.type=2,a.fieldTransforms=[],a}return(0,Te.Z)(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Yre),dae=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e,r){var a;return(0,Se.Z)(this,n),(a=t.call(this)).key=e,a.precondition=r,a.type=3,a.fieldTransforms=[],a}return(0,Te.Z)(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Yre),fae=function(){function e(t,n,r,a){(0,Se.Z)(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=a}return(0,Te.Z)(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var a=this.mutations[r];a.key.isEqual(e.key)&&Jre(a,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=(0,Ht.Z)(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var a=n.value;a.key.isEqual(e.key)&&(t=eae(a,e,t,this.localWriteTime))}}catch(yhe){r.e(yhe)}finally{r.f()}var i,o=(0,Ht.Z)(this.mutations);try{for(o.s();!(i=o.n()).done;){var s=i.value;s.key.isEqual(e.key)&&(t=eae(s,e,t,this.localWriteTime))}}catch(yhe){o.e(yhe)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=Tre();return this.mutations.forEach((function(a){var i=e.get(a.key),o=i.overlayedDocument,s=n.applyToLocalView(o,i.mutatedFields),u=Qre(o,s=t.has(a.key)?null:s);null!==u&&r.set(a.key,u),o.isValidDocument()||o.convertToNoDocument(wee.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),Zre())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&yee(this.mutations,e.mutations,(function(e,t){return nae(e,t)}))&&yee(this.baseMutations,e.baseMutations,(function(e,t){return nae(e,t)}))}}]),e}(),hae=function(){function e(t,n,r,a){(0,Se.Z)(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=a}return(0,Te.Z)(e,null,[{key:"from",value:function(t,n,r){nee(t.mutations.length===r.length);for(var a=Nre,i=t.mutations,o=0;o<i.length;o++)a=a.insert(i[o].key,r[o].version);return new e(t,n,r,a)}}]),e}(),pae=function(){function e(t,n){(0,Se.Z)(this,e),this.largestBatchId=t,this.mutation=n}return(0,Te.Z)(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),vae=(0,Te.Z)((function e(t){(0,Se.Z)(this,e),this.count=t}));function mae(e){switch(e){default:return tee();case aee.CANCELLED:case aee.UNKNOWN:case aee.DEADLINE_EXCEEDED:case aee.RESOURCE_EXHAUSTED:case aee.INTERNAL:case aee.UNAVAILABLE:case aee.UNAUTHENTICATED:return!1;case aee.INVALID_ARGUMENT:case aee.NOT_FOUND:case aee.ALREADY_EXISTS:case aee.PERMISSION_DENIED:case aee.FAILED_PRECONDITION:case aee.ABORTED:case aee.OUT_OF_RANGE:case aee.UNIMPLEMENTED:case aee.DATA_LOSS:return!0}}function gae(e){if(void 0===e)return Q9("GRPC error has no .code"),aee.UNKNOWN;switch(e){case uae.OK:return aee.OK;case uae.CANCELLED:return aee.CANCELLED;case uae.UNKNOWN:return aee.UNKNOWN;case uae.DEADLINE_EXCEEDED:return aee.DEADLINE_EXCEEDED;case uae.RESOURCE_EXHAUSTED:return aee.RESOURCE_EXHAUSTED;case uae.INTERNAL:return aee.INTERNAL;case uae.UNAVAILABLE:return aee.UNAVAILABLE;case uae.UNAUTHENTICATED:return aee.UNAUTHENTICATED;case uae.INVALID_ARGUMENT:return aee.INVALID_ARGUMENT;case uae.NOT_FOUND:return aee.NOT_FOUND;case uae.ALREADY_EXISTS:return aee.ALREADY_EXISTS;case uae.PERMISSION_DENIED:return aee.PERMISSION_DENIED;case uae.FAILED_PRECONDITION:return aee.FAILED_PRECONDITION;case uae.ABORTED:return aee.ABORTED;case uae.OUT_OF_RANGE:return aee.OUT_OF_RANGE;case uae.UNIMPLEMENTED:return aee.UNIMPLEMENTED;case uae.DATA_LOSS:return aee.DATA_LOSS;default:return tee()}}(cae=uae||(uae={}))[cae.OK=0]="OK",cae[cae.CANCELLED=1]="CANCELLED",cae[cae.UNKNOWN=2]="UNKNOWN",cae[cae.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",cae[cae.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",cae[cae.NOT_FOUND=5]="NOT_FOUND",cae[cae.ALREADY_EXISTS=6]="ALREADY_EXISTS",cae[cae.PERMISSION_DENIED=7]="PERMISSION_DENIED",cae[cae.UNAUTHENTICATED=16]="UNAUTHENTICATED",cae[cae.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",cae[cae.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",cae[cae.ABORTED=10]="ABORTED",cae[cae.OUT_OF_RANGE=11]="OUT_OF_RANGE",cae[cae.UNIMPLEMENTED=12]="UNIMPLEMENTED",cae[cae.INTERNAL=13]="INTERNAL",cae[cae.UNAVAILABLE=14]="UNAVAILABLE",cae[cae.DATA_LOSS=15]="DATA_LOSS";var yae=function(){function e(){(0,Se.Z)(this,e),this.onExistenceFilterMismatchCallbacks=new Map}return(0,Te.Z)(e,[{key:"onExistenceFilterMismatch",value:function(e){var t=this,n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),function(){return t.onExistenceFilterMismatchCallbacks.delete(n)}}},{key:"notifyOnExistenceFilterMismatch",value:function(e){this.onExistenceFilterMismatchCallbacks.forEach((function(t){return t(e)}))}}],[{key:"instance",get:function(){return bae}},{key:"getOrCreateInstance",value:function(){return null===bae&&(bae=new e),bae}}]),e}(),bae=null,kae=function(){function e(t,n,r,a,i){(0,Se.Z)(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=i}return(0,Te.Z)(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,r){var a=new Map;return a.set(t,wae.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(wee.min(),a,Are(),kre(),Zre())}}]),e}(),wae=function(){function e(t,n,r,a,i){(0,Se.Z)(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=i}return(0,Te.Z)(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,r){return new e(r,n,Zre(),Zre(),Zre())}}]),e}(),xae=(0,Te.Z)((function e(t,n,r,a){(0,Se.Z)(this,e),this.It=t,this.removedTargetIds=n,this.key=r,this.Tt=a})),Iae=(0,Te.Z)((function e(t,n){(0,Se.Z)(this,e),this.targetId=t,this.Et=n})),Sae=(0,Te.Z)((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ute.EMPTY_BYTE_STRING,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;(0,Se.Z)(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=a})),Tae=function(){function e(){(0,Se.Z)(this,e),this.At=0,this.Rt=Cae(),this.vt=Ute.EMPTY_BYTE_STRING,this.bt=!1,this.Pt=!0}return(0,Te.Z)(e,[{key:"current",get:function(){return this.bt}},{key:"resumeToken",get:function(){return this.vt}},{key:"Vt",get:function(){return 0!==this.At}},{key:"St",get:function(){return this.Pt}},{key:"Dt",value:function(e){e.approximateByteSize()>0&&(this.Pt=!0,this.vt=e)}},{key:"Ct",value:function(){var e=Zre(),t=Zre(),n=Zre();return this.Rt.forEach((function(r,a){switch(a){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:tee()}})),new wae(this.vt,this.bt,e,t,n)}},{key:"xt",value:function(){this.Pt=!1,this.Rt=Cae()}},{key:"Nt",value:function(e,t){this.Pt=!0,this.Rt=this.Rt.insert(e,t)}},{key:"kt",value:function(e){this.Pt=!0,this.Rt=this.Rt.remove(e)}},{key:"Ot",value:function(){this.At+=1}},{key:"$t",value:function(){this.At-=1}},{key:"Mt",value:function(){this.Pt=!0,this.bt=!0}}]),e}(),Eae=function(){function e(t){(0,Se.Z)(this,e),this.Ft=t,this.Bt=new Map,this.Lt=kre(),this.qt=Nae(),this.Ut=new Mte(gee)}return(0,Te.Z)(e,[{key:"Kt",value:function(e){var t,n=(0,Ht.Z)(e.It);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.Tt&&e.Tt.isFoundDocument()?this.Gt(r,e.Tt):this.Qt(r,e.key,e.Tt)}}catch(yhe){n.e(yhe)}finally{n.f()}var a,i=(0,Ht.Z)(e.removedTargetIds);try{for(i.s();!(a=i.n()).done;){var o=a.value;this.Qt(o,e.key,e.Tt)}}catch(yhe){i.e(yhe)}finally{i.f()}}},{key:"zt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.jt(n);switch(e.state){case 0:t.Wt(n)&&r.Dt(e.resumeToken);break;case 1:r.$t(),r.Vt||r.xt(),r.Dt(e.resumeToken);break;case 2:r.$t(),r.Vt||t.removeTarget(n);break;case 3:t.Wt(n)&&(r.Mt(),r.Dt(e.resumeToken));break;case 4:t.Wt(n)&&(t.Ht(n),r.Dt(e.resumeToken));break;default:tee()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((function(e,r){n.Wt(r)&&t(r)}))}},{key:"Jt",value:function(e){var t,n=e.targetId,r=e.Et.count,a=this.Yt(n);if(a){var i=a.target;if(Xne(i))if(0===r){var o=new Eee(i.path);this.Qt(n,o,wne.newNoDocument(o,wee.min()))}else nee(1===r);else{var s=this.Zt(n);s!==r&&(this.Ht(n),this.Ut=this.Ut.add(n),null===(t=yae.instance)||void 0===t||t.notifyOnExistenceFilterMismatch({localCacheCount:s,existenceFilterCount:e.Et.count}))}}}},{key:"Xt",value:function(e){var t=this,n=new Map;this.Bt.forEach((function(r,a){var i=t.Yt(a);if(i){if(r.current&&Xne(i.target)){var o=new Eee(i.target.path);null!==t.Lt.get(o)||t.te(a,o)||t.Qt(a,o,wne.newNoDocument(o,e))}r.St&&(n.set(a,r.Ct()),r.xt())}}));var r=Zre();this.qt.forEach((function(e,n){var a=!0;n.forEachWhile((function(e){var n=t.Yt(e);return!n||2===n.purpose||(a=!1,!1)})),a&&(r=r.add(e))})),this.Lt.forEach((function(t,n){return n.setReadTime(e)}));var a=new kae(e,n,this.Ut,this.Lt,r);return this.Lt=kre(),this.qt=Nae(),this.Ut=new Mte(gee),a}},{key:"Gt",value:function(e,t){if(this.Wt(e)){var n=this.te(e,t.key)?2:0;this.jt(e).Nt(t.key,n),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}}},{key:"Qt",value:function(e,t,n){if(this.Wt(e)){var r=this.jt(e);this.te(e,t)?r.Nt(t,1):r.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),n&&(this.Lt=this.Lt.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Bt.delete(e)}},{key:"Zt",value:function(e){var t=this.jt(e).Ct();return this.Ft.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Ot",value:function(e){this.jt(e).Ot()}},{key:"jt",value:function(e){var t=this.Bt.get(e);return t||(t=new Tae,this.Bt.set(e,t)),t}},{key:"ee",value:function(e){var t=this.qt.get(e);return t||(t=new Mte(gee),this.qt=this.qt.insert(e,t)),t}},{key:"Wt",value:function(e){var t=null!==this.Yt(e);return t||Y9("WatchChangeAggregator","Detected inactive target",e),t}},{key:"Yt",value:function(e){var t=this.Bt.get(e);return t&&t.Vt?null:this.Ft.ne(e)}},{key:"Ht",value:function(e){var t=this;this.Bt.set(e,new Tae),this.Ft.getRemoteKeysForTarget(e).forEach((function(n){t.Qt(e,n,null)}))}},{key:"te",value:function(e,t){return this.Ft.getRemoteKeysForTarget(e).has(t)}}]),e}();function Nae(){return new Ote(Eee.comparator)}function Cae(){return new Ote(Eee.comparator)}var Zae={asc:"ASCENDING",desc:"DESCENDING"},_ae={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Aae={and:"AND",or:"OR"},Rae=(0,Te.Z)((function e(t,n){(0,Se.Z)(this,e),this.databaseId=t,this.useProto3Json=n}));function Dae(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Oae(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Lae(e,t){return Dae(e,t.toTimestamp())}function Fae(e){return nee(!!e),wee.fromTimestamp(function(e){var t=jte(e);return new kee(t.seconds,t.nanos)}(e))}function Mae(e,t){return function(e){return new Iee(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Pae(e){var t=Iee.fromString(e);return nee(sie(t)),t}function zae(e,t){return Mae(e.databaseId,t.path)}function Bae(e,t){var n=Pae(t);if(n.get(1)!==e.databaseId.projectId)throw new iee(aee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new iee(aee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Eee(jae(n))}function Vae(e,t){return Mae(e.databaseId,t)}function Uae(e){var t=Pae(e);return 4===t.length?Iee.emptyPath():jae(t)}function Wae(e){return new Iee(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function jae(e){return nee(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Gae(e,t,n){return{name:zae(e,t),fields:n.value.mapValue.fields}}function Hae(e,t,n){var r=Bae(e,t.name),a=Fae(t.updateTime),i=t.createTime?Fae(t.createTime):wee.min(),o=new bne({mapValue:{fields:t.fields}}),s=wne.newFoundDocument(r,a,i,o);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}function qae(e,t){return"found"in t?function(e,t){nee(!!t.found),t.found.name,t.found.updateTime;var n=Bae(e,t.found.name),r=Fae(t.found.updateTime),a=t.found.createTime?Fae(t.found.createTime):wee.min(),i=new bne({mapValue:{fields:t.found.fields}});return wne.newFoundDocument(n,r,a,i)}(e,t):"missing"in t?function(e,t){nee(!!t.missing),nee(!!t.readTime);var n=Bae(e,t.missing),r=Fae(t.readTime);return wne.newNoDocument(n,r)}(e,t):tee()}function $ae(e,t){var n;if(t instanceof rae)n={update:Gae(e,t.key,t.value)};else if(t instanceof lae)n={delete:zae(e,t.key)};else if(t instanceof aae)n={update:Gae(e,t.key,t.data),updateMask:oie(t.fieldMask)};else{if(!(t instanceof dae))return tee();n={verify:zae(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof zre)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Bre)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Ure)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof jre)return{fieldPath:t.field.canonicalString(),increment:n._t};throw tee()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Lae(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:tee()}(e,t.precondition)),n}function Kae(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?Kre.updateTime(Fae(e.updateTime)):void 0!==e.exists?Kre.exists(e.exists):Kre.none()}(t.currentDocument):Kre.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)nee("REQUEST_TIME"===t.setToServerValue),n=new zre;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new Bre(r)}else if("removeAllFromArray"in t){var a=t.removeAllFromArray.values||[];n=new Ure(a)}else"increment"in t?n=new jre(e,t.increment):tee();var i=Tee.fromServerFormat(t.fieldPath);return new qre(i,n)}(e,t)})):[];if(t.update){t.update.name;var a=Bae(e,t.update.name),i=new bne({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new Bte(t.map((function(e){return Tee.fromServerFormat(e)})))}(t.updateMask);return new aae(a,i,o,n,r)}return new rae(a,i,n,r)}if(t.delete){var s=Bae(e,t.delete);return new lae(s,n)}if(t.verify){var u=Bae(e,t.verify);return new dae(u,n)}return tee()}function Xae(e,t){return{documents:[Vae(e,t.path)]}}function Yae(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Vae(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Vae(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var a=function(e){if(0!==e.length)return iie(Zne.create(e,"and"))}(t.filters);a&&(n.structuredQuery.where=a);var i=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:rie(e.field),direction:eie(e.dir)}}(e)}))}(t.orderBy);i&&(n.structuredQuery.orderBy=i);var o,s=function(e,t){return e.useProto3Json||Jee(t)?t:{value:t}}(e,t.limit);return null!==s&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function Qae(e){var t=Uae(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,a=null;if(r>0){nee(1===r);var i=n.from[0];i.allDescendants?a=i.collectionId:t=t.child(i.collectionId)}var o=[];n.where&&(o=function(e){var t=Jae(e);return t instanceof Zne&&Rne(t)?t.getFilters():[t]}(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(e){return function(e){return new Tne(aie(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var u=null;n.limit&&(u=function(e){var t;return Jee(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new xne(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new xne(n,t)}(n.endAt)),tre(t,a,s,o,u,"F",c,l)}function Jae(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=aie(e.unaryFilter.field);return Cne.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=aie(e.unaryFilter.field);return Cne.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=aie(e.unaryFilter.field);return Cne.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var a=aie(e.unaryFilter.field);return Cne.create(a,"!=",{nullValue:"NULL_VALUE"});default:return tee()}}(e):void 0!==e.fieldFilter?function(e){return Cne.create(aie(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return tee()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Zne.create(e.compositeFilter.filters.map((function(e){return Jae(e)})),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return tee()}}(e.compositeFilter.op))}(e):tee()}function eie(e){return Zae[e]}function tie(e){return _ae[e]}function nie(e){return Aae[e]}function rie(e){return{fieldPath:e.canonicalString()}}function aie(e){return Tee.fromServerFormat(e.fieldPath)}function iie(e){return e instanceof Cne?function(e){if("=="===e.op){if(dne(e.value))return{unaryFilter:{field:rie(e.field),op:"IS_NAN"}};if(lne(e.value))return{unaryFilter:{field:rie(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(dne(e.value))return{unaryFilter:{field:rie(e.field),op:"IS_NOT_NAN"}};if(lne(e.value))return{unaryFilter:{field:rie(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:rie(e.field),op:tie(e.op),value:e.value}}}(e):e instanceof Zne?function(e){var t=e.getFilters().map((function(e){return iie(e)}));return 1===t.length?t[0]:{compositeFilter:{op:nie(e.op),filters:t}}}(e):tee()}function oie(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function sie(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}var uie=function(){function e(t,n,r,a){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:wee.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:wee.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Ute.EMPTY_BYTE_STRING;(0,Se.Z)(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return(0,Te.Z)(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),cie=(0,Te.Z)((function e(t){(0,Se.Z)(this,e),this.se=t}));function lie(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:die(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:zae(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Dae(e,t.version.toTimestamp()),createTime:Dae(e,t.createTime.toTimestamp())}}(e.se,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:fie(t.version)};else{if(!t.isUnknownDocument())return tee();r.unknownDocument={path:n.path.toArray(),version:fie(t.version)}}return r}function die(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function fie(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function hie(e){var t=new kee(e.seconds,e.nanoseconds);return wee.fromTimestamp(t)}function pie(e,t){for(var n=(t.baseMutations||[]).map((function(t){return Kae(e.se,t)})),r=0;r<t.mutations.length-1;++r){var a=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var i=t.mutations[r+1];a.updateTransforms=i.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return Kae(e.se,t)})),s=kee.fromMillis(t.localWriteTimeMs);return new fae(t.batchId,s,n,o)}function vie(e){var t,n,r=hie(e.readTime),a=void 0!==e.lastLimboFreeSnapshotVersion?hie(e.lastLimboFreeSnapshotVersion):wee.min();return void 0!==e.query.documents?(nee(1===(n=e.query).documents.length),t=ure(nre(Uae(n.documents[0])))):t=function(e){return ure(Qae(e))}(e.query),new uie(t,e.targetId,0,e.lastListenSequenceNumber,r,a,Ute.fromBase64String(e.resumeToken))}function mie(e,t){var n,r=fie(t.snapshotVersion),a=fie(t.lastLimboFreeSnapshotVersion);n=Xne(t.target)?Xae(e.se,t.target):Yae(e.se,t.target);var i=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:$ne(t.target),readTime:r,resumeToken:i,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:a,query:n}}function gie(e){var t=Qae({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?lre(t,t.limit,"L"):t}function yie(e,t){return new pae(t.largestBatchId,Kae(e.se,t.overlayMutation))}function bie(e,t){var n=t.path.lastSegment();return[e,nte(t.path.popLast()),n]}function kie(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:fie(r.readTime),documentKey:nte(r.documentKey.path),largestBatchId:r.largestBatchId}}var wie=function(){function e(){(0,Se.Z)(this,e)}return(0,Te.Z)(e,[{key:"getBundleMetadata",value:function(e,t){return xie(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:hie(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return xie(e).put({bundleId:(n=t).id,createTime:fie(Fae(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return Iie(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:gie(t.bundledQuery),readTime:hie(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return Iie(e).put(function(e){return{name:e.name,readTime:fie(Fae(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function xie(e){return _te(e,"bundles")}function Iie(e){return _te(e,"namedQueries")}var Sie=function(){function e(t,n){(0,Se.Z)(this,e),this.serializer=t,this.userId=n}return(0,Te.Z)(e,[{key:"getOverlay",value:function(e,t){var n=this;return Tie(e).get(bie(this.userId,t)).next((function(e){return e?yie(n.serializer,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=Sre();return Bee.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,a=[];return n.forEach((function(n,i){var o=new pae(t,i);a.push(r.re(e,o))})),Bee.waitFor(a)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,a=new Set;t.forEach((function(e){return a.add(nte(e.getCollectionPath()))}));var i=[];return a.forEach((function(t){var a=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);i.push(Tie(e).J("collectionPathOverlayIndex",a))})),Bee.waitFor(i)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,a=Sre(),i=nte(t),o=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return Tie(e).j("collectionPathOverlayIndex",o).next((function(e){var t,n=(0,Ht.Z)(e);try{for(n.s();!(t=n.n()).done;){var i=t.value,o=yie(r.serializer,i);a.set(o.getKey(),o)}}catch(yhe){n.e(yhe)}finally{n.f()}return a}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var a,i=this,o=Sre(),s=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Tie(e).Z({index:"collectionGroupOverlayIndex",range:s},(function(e,t,n){var s=yie(i.serializer,t);o.size()<r||s.largestBatchId===a?(o.set(s.getKey(),s),a=s.largestBatchId):n.done()})).next((function(){return o}))}},{key:"re",value:function(e,t){return Tie(e).put(function(e,t,n){var r=bie(t,n.mutation.key),a=(0,ge.Z)(r,3);a[0];return{userId:t,collectionPath:a[1],documentId:a[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:$ae(e.se,n.mutation)}}(this.serializer,this.userId,t))}}],[{key:"ie",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function Tie(e){return _te(e,"documentOverlays")}var Eie=function(){function e(){(0,Se.Z)(this,e)}return(0,Te.Z)(e,[{key:"oe",value:function(e,t){this.ue(e,t),t.ce()}},{key:"ue",value:function(e,t){if("nullValue"in e)this.ae(t,5);else if("booleanValue"in e)this.ae(t,10),t.he(e.booleanValue?1:0);else if("integerValue"in e)this.ae(t,15),t.he(Gte(e.integerValue));else if("doubleValue"in e){var n=Gte(e.doubleValue);isNaN(n)?this.ae(t,13):(this.ae(t,15),ete(n)?t.he(0):t.he(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ae(t,20),"string"==typeof r?t.le(r):(t.le("".concat(r.seconds||"")),t.he(r.nanos||0))}else if("stringValue"in e)this.fe(e.stringValue,t),this.de(t);else if("bytesValue"in e)this.ae(t,30),t.we(Hte(e.bytesValue)),this.de(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){var a=e.geoPointValue;this.ae(t,45),t.he(a.latitude||0),t.he(a.longitude||0)}else"mapValue"in e?pne(e)?this.ae(t,Number.MAX_SAFE_INTEGER):(this.me(e.mapValue,t),this.de(t)):"arrayValue"in e?(this.ge(e.arrayValue,t),this.de(t)):tee()}},{key:"fe",value:function(e,t){this.ae(t,25),this.ye(e,t)}},{key:"ye",value:function(e,t){t.le(e)}},{key:"me",value:function(e,t){var n=e.fields||{};this.ae(t,55);for(var r=0,a=Object.keys(n);r<a.length;r++){var i=a[r];this.fe(i,t),this.ue(n[i],t)}}},{key:"ge",value:function(e,t){var n=e.values||[];this.ae(t,50);var r,a=(0,Ht.Z)(n);try{for(a.s();!(r=a.n()).done;){var i=r.value;this.ue(i,t)}}catch(yhe){a.e(yhe)}finally{a.f()}}},{key:"_e",value:function(e,t){var n=this;this.ae(t,37),Eee.fromName(e).path.forEach((function(e){n.ae(t,60),n.ye(e,t)}))}},{key:"ae",value:function(e,t){e.he(t)}},{key:"de",value:function(e){e.he(2)}}]),e}();function Nie(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function Cie(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=Nie(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}Eie.pe=new Eie;var Zie=function(){function e(){(0,Se.Z)(this,e),this.buffer=new Uint8Array(1024),this.position=0}return(0,Te.Z)(e,[{key:"Ie",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Te(n.value),n=t.next();this.Ee()}},{key:"Ae",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Re(n.value),n=t.next();this.ve()}},{key:"be",value:function(e){var t,n=(0,Ht.Z)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,a=r.charCodeAt(0);if(a<128)this.Te(a);else if(a<2048)this.Te(960|a>>>6),this.Te(128|63&a);else if(r<"\ud800"||"\udbff"<r)this.Te(480|a>>>12),this.Te(128|63&a>>>6),this.Te(128|63&a);else{var i=r.codePointAt(0);this.Te(240|i>>>18),this.Te(128|63&i>>>12),this.Te(128|63&i>>>6),this.Te(128|63&i)}}}catch(yhe){n.e(yhe)}finally{n.f()}this.Ee()}},{key:"Pe",value:function(e){var t,n=(0,Ht.Z)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,a=r.charCodeAt(0);if(a<128)this.Re(a);else if(a<2048)this.Re(960|a>>>6),this.Re(128|63&a);else if(r<"\ud800"||"\udbff"<r)this.Re(480|a>>>12),this.Re(128|63&a>>>6),this.Re(128|63&a);else{var i=r.codePointAt(0);this.Re(240|i>>>18),this.Re(128|63&i>>>12),this.Re(128|63&i>>>6),this.Re(128|63&i)}}}catch(yhe){n.e(yhe)}finally{n.f()}this.ve()}},{key:"Ve",value:function(e){var t=this.Se(e),n=Cie(t);this.De(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Ce",value:function(e){var t=this.Se(e),n=Cie(t);this.De(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"xe",value:function(){this.Ne(255),this.Ne(255)}},{key:"ke",value:function(){this.Oe(255),this.Oe(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.De(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"$e",value:function(){return this.buffer.slice(0,this.position)}},{key:"Se",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"Te",value:function(e){var t=255&e;0===t?(this.Ne(0),this.Ne(255)):255===t?(this.Ne(255),this.Ne(0)):this.Ne(t)}},{key:"Re",value:function(e){var t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(e)}},{key:"Ee",value:function(){this.Ne(0),this.Ne(1)}},{key:"ve",value:function(){this.Oe(0),this.Oe(1)}},{key:"Ne",value:function(e){this.De(1),this.buffer[this.position++]=e}},{key:"Oe",value:function(e){this.De(1),this.buffer[this.position++]=~e}},{key:"De",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),_ie=function(){function e(t){(0,Se.Z)(this,e),this.Me=t}return(0,Te.Z)(e,[{key:"we",value:function(e){this.Me.Ie(e)}},{key:"le",value:function(e){this.Me.be(e)}},{key:"he",value:function(e){this.Me.Ve(e)}},{key:"ce",value:function(){this.Me.xe()}}]),e}(),Aie=function(){function e(t){(0,Se.Z)(this,e),this.Me=t}return(0,Te.Z)(e,[{key:"we",value:function(e){this.Me.Ae(e)}},{key:"le",value:function(e){this.Me.Pe(e)}},{key:"he",value:function(e){this.Me.Ce(e)}},{key:"ce",value:function(){this.Me.ke()}}]),e}(),Rie=function(){function e(){(0,Se.Z)(this,e),this.Me=new Zie,this.Fe=new _ie(this.Me),this.Be=new Aie(this.Me)}return(0,Te.Z)(e,[{key:"seed",value:function(e){this.Me.seed(e)}},{key:"Le",value:function(e){return 0===e?this.Fe:this.Be}},{key:"$e",value:function(){return this.Me.$e()}},{key:"reset",value:function(){this.Me.reset()}}]),e}(),Die=function(){function e(t,n,r,a){(0,Se.Z)(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=a}return(0,Te.Z)(e,[{key:"qe",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function Oie(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=Lie(e.arrayValue,t.arrayValue))?n:0!==(n=Lie(e.directionalValue,t.directionalValue))?n:Eee.comparator(e.documentKey,t.documentKey)}function Lie(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var Fie=function(){function e(t){(0,Se.Z)(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ue=t.orderBy,this.Ke=[];var n,r=(0,Ht.Z)(t.filters);try{for(r.s();!(n=r.n()).done;){var a=n.value;a.isInequality()?this.Ge=a:this.Ke.push(a)}}catch(yhe){r.e(yhe)}finally{r.f()}}return(0,Te.Z)(e,[{key:"Qe",value:function(e){nee(e.collectionGroup===this.collectionId);var t=Cee(e);if(void 0!==t&&!this.ze(t))return!1;for(var n=Zee(e),r=0,a=0;r<n.length&&this.ze(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.Ge){var i=n[r];if(!this.je(this.Ge,i)||!this.We(this.Ue[a++],i))return!1;++r}for(;r<n.length;++r){var o=n[r];if(a>=this.Ue.length||!this.We(this.Ue[a++],o))return!1}return!0}},{key:"ze",value:function(e){var t,n=(0,Ht.Z)(this.Ke);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.je(r,e))return!0}}catch(yhe){n.e(yhe)}finally{n.f()}return!1}},{key:"je",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"We",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}();function Mie(e){var t,n;if(nee(e instanceof Cne||e instanceof Zne),e instanceof Cne){if(e instanceof Wne){var r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((function(t){return Cne.create(e.field,"==",t)})))||[];return Zne.create(r,"or")}return e}var a=e.filters.map((function(e){return Mie(e)}));return Zne.create(a,e.op)}function Pie(e){if(0===e.getFilters().length)return[];var t=Uie(Mie(e));return nee(Vie(t)),zie(t)||Bie(t)?[t]:t.getFilters()}function zie(e){return e instanceof Cne}function Bie(e){return e instanceof Zne&&Rne(e)}function Vie(e){return zie(e)||Bie(e)||function(e){if(e instanceof Zne&&Ane(e)){var t,n=(0,Ht.Z)(e.getFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!zie(r)&&!Bie(r))return!1}}catch(yhe){n.e(yhe)}finally{n.f()}return!0}return!1}(e)}function Uie(e){if(nee(e instanceof Cne||e instanceof Zne),e instanceof Cne)return e;if(1===e.filters.length)return Uie(e.filters[0]);var t=e.filters.map((function(e){return Uie(e)})),n=Zne.create(t,e.op);return Vie(n=Gie(n))?n:(nee(n instanceof Zne),nee(_ne(n)),nee(n.filters.length>1),n.filters.reduce((function(e,t){return Wie(e,t)})))}function Wie(e,t){var n;return nee(e instanceof Cne||e instanceof Zne),nee(t instanceof Cne||t instanceof Zne),n=e instanceof Cne?t instanceof Cne?function(e,t){return Zne.create([e,t],"and")}(e,t):jie(e,t):t instanceof Cne?jie(t,e):function(e,t){if(nee(e.filters.length>0&&t.filters.length>0),_ne(e)&&_ne(t))return Fne(e,t.getFilters());var n=Ane(e)?e:t,r=Ane(e)?t:e,a=n.filters.map((function(e){return Wie(e,r)}));return Zne.create(a,"or")}(e,t),Gie(n)}function jie(e,t){if(_ne(t))return Fne(t,e.getFilters());var n=t.filters.map((function(t){return Wie(e,t)}));return Zne.create(n,"or")}function Gie(e){if(nee(e instanceof Cne||e instanceof Zne),e instanceof Cne)return e;var t=e.getFilters();if(1===t.length)return Gie(t[0]);if(Dne(e))return e;var n=t.map((function(e){return Gie(e)})),r=[];return n.forEach((function(t){t instanceof Cne?r.push(t):t instanceof Zne&&(t.op===e.op?r.push.apply(r,(0,me.Z)(t.filters)):r.push(t))})),1===r.length?r[0]:Zne.create(r,e.op)}var Hie=function(){function e(){(0,Se.Z)(this,e),this.He=new qie}return(0,Te.Z)(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.He.add(t),Bee.resolve()}},{key:"getCollectionParents",value:function(e,t){return Bee.resolve(this.He.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return Bee.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return Bee.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return Bee.resolve(null)}},{key:"getIndexType",value:function(e,t){return Bee.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return Bee.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return Bee.resolve(null)}},{key:"getMinOffset",value:function(e,t){return Bee.resolve(Oee.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return Bee.resolve(Oee.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return Bee.resolve()}},{key:"updateIndexEntries",value:function(e,t){return Bee.resolve()}}]),e}(),qie=function(){function e(){(0,Se.Z)(this,e),this.index={}}return(0,Te.Z)(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Mte(Iee.comparator),a=!r.has(n);return this.index[t]=r.add(n),a}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new Mte(Iee.comparator)).toArray()}}]),e}(),$ie=new Uint8Array(0),Kie=function(){function e(t,n){(0,Se.Z)(this,e),this.user=t,this.databaseId=n,this.Je=new qie,this.Ye=new yre((function(e){return $ne(e)}),(function(e,t){return Kne(e,t)})),this.uid=t.uid||""}return(0,Te.Z)(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.Je.has(t)){var r=t.lastSegment(),a=t.popLast();e.addOnCommittedListener((function(){n.Je.add(t)}));var i={collectionId:r,parent:nte(a)};return Xie(e).put(i)}return Bee.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[bee(t),""],!1,!0);return Xie(e).j(r).next((function(e){var r,a=(0,Ht.Z)(e);try{for(a.s();!(r=a.n()).done;){var i=r.value;if(i.collectionId!==t)break;n.push(ite(i.parent))}}catch(yhe){a.e(yhe)}finally{a.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=Qie(e),a=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete a.indexId;var i=r.add(a);if(t.indexState){var o=Jie(e);return i.next((function(e){o.put(kie(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return i.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=Qie(e),r=Jie(e),a=Yie(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=Yie(e),a=!0,i=new Map;return Bee.forEach(this.Ze(t),(function(t){return n.Xe(e,t).next((function(e){a&&(a=!!e),i.set(t,e)}))})).next((function(){if(a){var e=Zre(),o=[];return Bee.forEach(i,(function(a,i){var s;Y9("IndexedDbIndexManager","Using index ".concat((s=a,"id=".concat(s.indexId,"|cg=").concat(s.collectionGroup,"|f=").concat(s.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat($ne(t)));var u=function(e,t){var n=Cee(t);if(void 0===n)return null;var r,a=(0,Ht.Z)(Yne(e,n.fieldPath));try{for(a.s();!(r=a.n()).done;){var i=r.value;switch(i.op){case"array-contains-any":return i.value.arrayValue.values||[];case"array-contains":return[i.value]}}}catch(yhe){a.e(yhe)}finally{a.f()}return null}(i,a),c=function(e,t){var n,r=new Map,a=(0,Ht.Z)(Zee(t));try{for(a.s();!(n=a.n()).done;){var i,o=n.value,s=(0,Ht.Z)(Yne(e,o.fieldPath));try{for(s.s();!(i=s.n()).done;){var u=i.value;switch(u.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),u.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),u.value),Array.from(r.values())}}}catch(yhe){s.e(yhe)}finally{s.f()}}}catch(yhe){a.e(yhe)}finally{a.f()}return null}(i,a),l=function(e,t){var n,r=[],a=!0,i=(0,Ht.Z)(Zee(t));try{for(i.s();!(n=i.n()).done;){var o=n.value,s=0===o.kind?Qne(e,o.fieldPath,e.startAt):Jne(e,o.fieldPath,e.startAt);r.push(s.value),a&&(a=s.inclusive)}}catch(yhe){i.e(yhe)}finally{i.f()}return new xne(r,a)}(i,a),d=function(e,t){var n,r=[],a=!0,i=(0,Ht.Z)(Zee(t));try{for(i.s();!(n=i.n()).done;){var o=n.value,s=0===o.kind?Jne(e,o.fieldPath,e.endAt):Qne(e,o.fieldPath,e.endAt);r.push(s.value),a&&(a=s.inclusive)}}catch(yhe){i.e(yhe)}finally{i.f()}return new xne(r,a)}(i,a),f=n.tn(a,i,l),h=n.tn(a,i,d),p=n.en(a,i,c),v=n.nn(a.indexId,u,f,l.inclusive,h,d.inclusive,p);return Bee.forEach(v,(function(n){return r.H(n,t.limit).next((function(t){t.forEach((function(t){var n=Eee.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return Bee.resolve(null)}))}},{key:"Ze",value:function(e){var t=this.Ye.get(e);return t||(t=0===e.filters.length?[e]:Pie(Zne.create(e.filters,"and")).map((function(t){return qne(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)})),this.Ye.set(e,t),t)}},{key:"nn",value:function(e,t,n,r,a,i,o){for(var s=this,u=(null!=t?t.length:1)*Math.max(n.length,a.length),c=u/(null!=t?t.length:1),l=[],d=function(){var u=t?s.sn(t[f/c]):$ie,d=s.rn(e,u,n[f%c],r),h=s.on(e,u,a[f%c],i),p=o.map((function(t){return s.rn(e,u,t,!0)}));l.push.apply(l,(0,me.Z)(s.createRange(d,h,p)))},f=0;f<u;++f)d();return l}},{key:"rn",value:function(e,t,n,r){var a=new Die(e,Eee.empty(),t,n);return r?a:a.qe()}},{key:"on",value:function(e,t,n,r){var a=new Die(e,Eee.empty(),t,n);return r?a.qe():a}},{key:"Xe",value:function(e,t){var n=new Fie(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,a=(0,Ht.Z)(e);try{for(a.s();!(t=a.n()).done;){var i=t.value;n.Qe(i)&&(!r||i.fields.length>r.fields.length)&&(r=i)}}catch(yhe){a.e(yhe)}finally{a.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2,a=this.Ze(t);return Bee.forEach(a,(function(t){return n.Xe(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new Mte(Tee.comparator),r=!1,a=(0,Ht.Z)(e.filters);try{for(a.s();!(t=a.n()).done;){var i,o=t.value,s=(0,Ht.Z)(o.getFlattenedFilters());try{for(s.s();!(i=s.n()).done;){var u=i.value;u.field.isKeyField()||("array-contains"===u.op||"array-contains-any"===u.op?r=!0:n=n.add(u.field))}}catch(yhe){s.e(yhe)}finally{s.f()}}}catch(yhe){a.e(yhe)}finally{a.f()}var c,l=(0,Ht.Z)(e.orderBy);try{for(l.s();!(c=l.n()).done;){var d=c.value;d.field.isKeyField()||(n=n.add(d.field))}}catch(yhe){l.e(yhe)}finally{l.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return function(e){return null!==e.limit}(t)&&a.length>1&&2===r?1:r}))}},{key:"un",value:function(e,t){var n,r=new Rie,a=(0,Ht.Z)(Zee(e));try{for(a.s();!(n=a.n()).done;){var i=n.value,o=t.data.field(i.fieldPath);if(null==o)return null;var s=r.Le(i.kind);Eie.pe.oe(o,s)}}catch(yhe){a.e(yhe)}finally{a.f()}return r.$e()}},{key:"sn",value:function(e){var t=new Rie;return Eie.pe.oe(e,t.Le(0)),t.$e()}},{key:"cn",value:function(e,t){var n=new Rie;return Eie.pe.oe(sne(this.databaseId,t),n.Le(function(e){var t=Zee(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.$e()}},{key:"en",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new Rie);var a,i=0,o=(0,Ht.Z)(Zee(e));try{for(o.s();!(a=o.n()).done;){var s,u=a.value,c=n[i++],l=(0,Ht.Z)(r);try{for(l.s();!(s=l.n()).done;){var d=s.value;if(this.an(t,u.fieldPath)&&cne(c))r=this.hn(r,u,c);else{var f=d.Le(u.kind);Eie.pe.oe(c,f)}}}catch(yhe){l.e(yhe)}finally{l.f()}}}catch(yhe){o.e(yhe)}finally{o.f()}return this.ln(r)}},{key:"tn",value:function(e,t,n){return this.en(e,t,n.position)}},{key:"ln",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].$e();return t}},{key:"hn",value:function(e,t,n){var r,a=(0,me.Z)(e),i=[],o=(0,Ht.Z)(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var s,u=r.value,c=(0,Ht.Z)(a);try{for(c.s();!(s=c.n()).done;){var l=s.value,d=new Rie;d.seed(l.$e()),Eie.pe.oe(u,d.Le(t.kind)),i.push(d)}}catch(yhe){c.e(yhe)}finally{c.f()}}}catch(yhe){o.e(yhe)}finally{o.f()}return i}},{key:"an",value:function(e,t){return!!e.filters.find((function(e){return e instanceof Cne&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=Qie(e),a=Jie(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next((function(e){var t=[];return Bee.forEach(e,(function(e){return a.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new Aee(t.sequenceNumber,new Oee(hie(t.readTime),new Eee(ite(t.documentKey)),t.largestBatchId)):Aee.empty(),r=e.fields.map((function(e){var t=(0,ge.Z)(e,2),n=t[0],r=t[1];return new _ee(Tee.fromServerFormat(n),r)}));return new Nee(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:gee(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,a=Qie(e),i=Jie(e);return this.fn(e).next((function(e){return a.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return Bee.forEach(t,(function(t){return i.put(kie(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return Bee.forEach(t,(function(t,a){var i=r.get(t.collectionGroup);return(i?Bee.resolve(i):n.getFieldIndexes(e,t.collectionGroup)).next((function(i){return r.set(t.collectionGroup,i),Bee.forEach(i,(function(r){return n.dn(e,t,r).next((function(t){var i=n.wn(a,r);return t.isEqual(i)?Bee.resolve():n._n(e,a,r,t,i)}))}))}))}))}},{key:"mn",value:function(e,t,n,r){return Yie(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.cn(n,t.key),documentKey:t.key.path.toArray()})}},{key:"gn",value:function(e,t,n,r){return Yie(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.cn(n,t.key),t.key.path.toArray()])}},{key:"dn",value:function(e,t,n){var r=Yie(e),a=new Mte(Oie);return r.Z({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.cn(n,t)])},(function(e,r){a=a.add(new Die(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return a}))}},{key:"wn",value:function(e,t){var n=new Mte(Oie),r=this.un(t,e);if(null==r)return n;var a=Cee(t);if(null!=a){var i=e.data.field(a.fieldPath);if(cne(i)){var o,s=(0,Ht.Z)(i.arrayValue.values||[]);try{for(s.s();!(o=s.n()).done;){var u=o.value;n=n.add(new Die(t.indexId,e.key,this.sn(u),r))}}catch(yhe){s.e(yhe)}finally{s.f()}}}else n=n.add(new Die(t.indexId,e.key,$ie,r));return n}},{key:"_n",value:function(e,t,n,r,a){var i=this;Y9("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,a){for(var i=e.getIterator(),o=t.getIterator(),s=zte(i),u=zte(o);s||u;){var c=!1,l=!1;if(s&&u){var d=n(s,u);d<0?l=!0:d>0&&(c=!0)}else null!=s?l=!0:c=!0;c?(r(u),u=zte(o)):l?(a(s),s=zte(i)):(s=zte(i),u=zte(o))}}(r,a,Oie,(function(r){o.push(i.mn(e,t,n,r))}),(function(r){o.push(i.gn(e,t,n,r))})),Bee.waitFor(o)}},{key:"fn",value:function(e){var t=1;return Jie(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return Oie(e,t)})).filter((function(e,t,n){return!t||0!==Oie(e,n[t-1])}));var r=[];r.push(e);var a,i=(0,Ht.Z)(n);try{for(i.s();!(a=i.n()).done;){var o=a.value,s=Oie(o,e),u=Oie(o,t);if(0===s)r[0]=e.qe();else if(s>0&&u<0)r.push(o),r.push(o.qe());else if(u>0)break}}catch(yhe){i.e(yhe)}finally{i.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2){if(this.yn(r[l],r[l+1]))return[];var d=[r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,$ie,[]],f=[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,$ie,[]];c.push(IDBKeyRange.bound(d,f))}return c}},{key:"yn",value:function(e,t){return Oie(e,t)>0}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(eoe)}},{key:"getMinOffset",value:function(e,t){var n=this;return Bee.mapArray(this.Ze(t),(function(t){return n.Xe(e,t).next((function(e){return e||tee()}))})).next(eoe)}}]),e}();function Xie(e){return _te(e,"collectionParents")}function Yie(e){return _te(e,"indexEntries")}function Qie(e){return _te(e,"indexConfiguration")}function Jie(e){return _te(e,"indexState")}function eoe(e){nee(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var a=e[r].indexState.offset;Lee(a,t)<0&&(t=a),n<a.largestBatchId&&(n=a.largestBatchId)}return new Oee(t.readTime,t.documentKey,n)}var toe={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},noe=function(){function e(t,n,r){(0,Se.Z)(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return(0,Te.Z)(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function roe(e,t,n){var r=e.store("mutations"),a=e.store("documentMutations"),i=[],o=IDBKeyRange.only(n.batchId),s=0,u=r.Z({range:o},(function(e,t,n){return s++,n.delete()}));i.push(u.next((function(){nee(1===s)})));var c,l=[],d=(0,Ht.Z)(n.mutations);try{for(d.s();!(c=d.n()).done;){var f=c.value,h=ute(t,f.key.path,n.batchId);i.push(a.delete(h)),l.push(f.key)}}catch(yhe){d.e(yhe)}finally{d.f()}return Bee.waitFor(i).next((function(){return l}))}function aoe(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw tee();t=e.noDocument}return JSON.stringify(t).length}noe.DEFAULT_COLLECTION_PERCENTILE=10,noe.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,noe.DEFAULT=new noe(41943040,noe.DEFAULT_COLLECTION_PERCENTILE,noe.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),noe.DISABLED=new noe(-1,0,0);var ioe=function(){function e(t,n,r,a){(0,Se.Z)(this,e),this.userId=t,this.serializer=n,this.indexManager=r,this.referenceDelegate=a,this.pn={}}return(0,Te.Z)(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return soe(e).Z({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var a=this,i=uoe(e),o=soe(e);return o.add({}).next((function(s){nee("number"==typeof s);var u,c=new fae(s,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return $ae(e.se,t)})),a=n.mutations.map((function(t){return $ae(e.se,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:a}}(a.serializer,a.userId,c),d=[],f=new Mte((function(e,t){return gee(e.canonicalString(),t.canonicalString())})),h=(0,Ht.Z)(r);try{for(h.s();!(u=h.n()).done;){var p=u.value,v=ute(a.userId,p.key.path,s);f=f.add(p.key.path.popLast()),d.push(o.put(l)),d.push(i.put(v,cte))}}catch(yhe){h.e(yhe)}finally{h.f()}return f.forEach((function(t){d.push(a.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){a.pn[s]=c.keys()})),Bee.waitFor(d).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return soe(e).get(t).next((function(e){return e?(nee(e.userId===n.userId),pie(n.serializer,e)):null}))}},{key:"In",value:function(e,t){var n=this;return this.pn[t]?Bee.resolve(this.pn[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.pn[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,a=IDBKeyRange.lowerBound([this.userId,r]),i=null;return soe(e).Z({index:"userMutationsIndex",range:a},(function(e,t,a){t.userId===n.userId&&(nee(t.batchId>=r),i=pie(n.serializer,t)),a.done()})).next((function(){return i}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return soe(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return soe(e).j("userMutationsIndex",n).next((function(e){return e.map((function(e){return pie(t.serializer,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=ste(this.userId,t.path),a=IDBKeyRange.lowerBound(r),i=[];return uoe(e).Z({range:a},(function(r,a,o){var s=(0,ge.Z)(r,3),u=s[0],c=s[1],l=s[2],d=ite(c);if(u===n.userId&&t.path.isEqual(d))return soe(e).get(l).next((function(e){if(!e)throw tee();nee(e.userId===n.userId),i.push(pie(n.serializer,e))}));o.done()})).next((function(){return i}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Mte(gee),a=[];return t.forEach((function(t){var i=ste(n.userId,t.path),o=IDBKeyRange.lowerBound(i),s=uoe(e).Z({range:o},(function(e,a,i){var o=(0,ge.Z)(e,3),s=o[0],u=o[1],c=o[2],l=ite(u);s===n.userId&&t.path.isEqual(l)?r=r.add(c):i.done()}));a.push(s)})),Bee.waitFor(a).next((function(){return n.Tn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,a=r.length+1,i=ste(this.userId,r),o=IDBKeyRange.lowerBound(i),s=new Mte(gee);return uoe(e).Z({range:o},(function(e,t,i){var o=(0,ge.Z)(e,3),u=o[0],c=o[1],l=o[2],d=ite(c);u===n.userId&&r.isPrefixOf(d)?d.length===a&&(s=s.add(l)):i.done()})).next((function(){return n.Tn(e,s)}))}},{key:"Tn",value:function(e,t){var n=this,r=[],a=[];return t.forEach((function(t){a.push(soe(e).get(t).next((function(e){if(null===e)throw tee();nee(e.userId===n.userId),r.push(pie(n.serializer,e))})))})),Bee.waitFor(a).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return roe(e.at,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.En(t.batchId)})),Bee.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"En",value:function(e){delete this.pn[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return Bee.resolve();var r=IDBKeyRange.lowerBound([t.userId]),a=[];return uoe(e).Z({range:r},(function(e,n,r){if(e[0]===t.userId){var i=ite(e[1]);a.push(i)}else r.done()})).next((function(){nee(0===a.length)}))}))}},{key:"containsKey",value:function(e,t){return ooe(e,this.userId,t)}},{key:"An",value:function(e){var t=this;return coe(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"ie",value:function(t,n,r,a){return nee(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,a)}}]),e}();function ooe(e,t,n){var r=ste(t,n.path),a=r[1],i=IDBKeyRange.lowerBound(r),o=!1;return uoe(e).Z({range:i,Y:!0},(function(e,n,r){var i=(0,ge.Z)(e,3),s=i[0],u=i[1];i[2];s===t&&u===a&&(o=!0),r.done()})).next((function(){return o}))}function soe(e){return _te(e,"mutations")}function uoe(e){return _te(e,"documentMutations")}function coe(e){return _te(e,"mutationQueues")}var loe=function(){function e(t){(0,Se.Z)(this,e),this.Rn=t}return(0,Te.Z)(e,[{key:"next",value:function(){return this.Rn+=2,this.Rn}}],[{key:"vn",value:function(){return new e(0)}},{key:"bn",value:function(){return new e(-1)}}]),e}(),doe=function(){function e(t,n){(0,Se.Z)(this,e),this.referenceDelegate=t,this.serializer=n}return(0,Te.Z)(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.Pn(e).next((function(n){var r=new loe(n.highestTargetId);return n.highestTargetId=r.next(),t.Vn(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.Pn(e).next((function(e){return wee.fromTimestamp(new kee(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.Pn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.Pn(e).next((function(a){return a.highestListenSequenceNumber=t,n&&(a.lastRemoteSnapshotVersion=n.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),r.Vn(e,a)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.Sn(e,t).next((function(){return n.Pn(e).next((function(r){return r.targetCount+=1,n.Dn(t,r),n.Vn(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.Sn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return foe(e).delete(t.targetId)})).next((function(){return n.Pn(e)})).next((function(t){return nee(t.targetCount>0),t.targetCount-=1,n.Vn(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,a=0,i=[];return foe(e).Z((function(o,s){var u=vie(s);u.sequenceNumber<=t&&null===n.get(u.targetId)&&(a++,i.push(r.removeTargetData(e,u)))})).next((function(){return Bee.waitFor(i)})).next((function(){return a}))}},{key:"forEachTarget",value:function(e,t){return foe(e).Z((function(e,n){var r=vie(n);t(r)}))}},{key:"Pn",value:function(e){return hoe(e).get("targetGlobalKey").next((function(e){return nee(null!==e),e}))}},{key:"Vn",value:function(e,t){return hoe(e).put("targetGlobalKey",t)}},{key:"Sn",value:function(e,t){return foe(e).put(mie(this.serializer,t))}},{key:"Dn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.Pn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=$ne(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),a=null;return foe(e).Z({range:r,index:"queryTargetsIndex"},(function(e,n,r){var i=vie(n);Kne(t,i.target)&&(a=i,r.done())})).next((function(){return a}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,a=[],i=poe(e);return t.forEach((function(t){var o=nte(t.path);a.push(i.put({targetId:n,path:o})),a.push(r.referenceDelegate.addReference(e,n,t))})),Bee.waitFor(a)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,a=poe(e);return Bee.forEach(t,(function(t){var i=nte(t.path);return Bee.waitFor([a.delete([n,i]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=poe(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=poe(e),a=Zre();return r.Z({range:n,Y:!0},(function(e,t,n){var r=ite(e[1]),i=new Eee(r);a=a.add(i)})).next((function(){return a}))}},{key:"containsKey",value:function(e,t){var n=nte(t.path),r=IDBKeyRange.bound([n],[bee(n)],!1,!0),a=0;return poe(e).Z({index:"documentTargetsIndex",Y:!0,range:r},(function(e,t,n){var r=(0,ge.Z)(e,2),i=r[0];r[1];0!==i&&(a++,n.done())})).next((function(){return a>0}))}},{key:"ne",value:function(e,t){return foe(e).get(t).next((function(e){return e?vie(e):null}))}}]),e}();function foe(e){return _te(e,"targets")}function hoe(e){return _te(e,"targetGlobal")}function poe(e){return _te(e,"targetDocuments")}function voe(e,t){var n=(0,ge.Z)(e,2),r=n[0],a=n[1],i=(0,ge.Z)(t,2),o=i[0],s=i[1],u=gee(r,o);return 0===u?gee(a,s):u}var moe=function(){function e(t){(0,Se.Z)(this,e),this.Cn=t,this.buffer=new Mte(voe),this.xn=0}return(0,Te.Z)(e,[{key:"Nn",value:function(){return++this.xn}},{key:"kn",value:function(e){var t=[e,this.Nn()];if(this.buffer.size<this.Cn)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();voe(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),goe=function(){function e(t,n,r){(0,Se.Z)(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.On=null}return(0,Te.Z)(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.$n(6e4)}},{key:"stop",value:function(){this.On&&(this.On.cancel(),this.On=null)}},{key:"started",get:function(){return null!==this.On}},{key:"$n",value:function(e){var t=this;Y9("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.On=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ke.Z)((0,be.Z)().mark((function e(){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.On=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!Gee(e.t0)){e.next=12;break}Y9("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,Pee(e.t0);case 14:return e.next=16,t.$n(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),yoe=function(){function e(t,n){(0,Se.Z)(this,e),this.Mn=t,this.params=n}return(0,Te.Z)(e,[{key:"calculateTargetCount",value:function(e,t){return this.Mn.Fn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return Bee.resolve(Qee.ct);var r=new moe(t);return this.Mn.forEachTarget(e,(function(e){return r.kn(e.sequenceNumber)})).next((function(){return n.Mn.Bn(e,(function(e){return r.kn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.Mn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.Mn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Y9("LruGarbageCollector","Garbage collection skipped; disabled"),Bee.resolve(toe)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Y9("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),toe):n.Ln(e,t)}))}},{key:"getCacheSize",value:function(e){return this.Mn.getCacheSize(e)}},{key:"Ln",value:function(e,t){var n,r,a,i,o,s,u,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(Y9("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,i=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return a=t,s=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return u=Date.now(),X9()<=eY.DEBUG&&Y9("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(i-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-i)+"ms\n"+"\tRemoved ".concat(a," targets in ")+(s-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(u-s)+"ms\n"+"Total Duration: ".concat(u-l,"ms")),Bee.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:a,documentsRemoved:e})}))}}]),e}(),boe=function(){function e(t,n){(0,Se.Z)(this,e),this.db=t,this.garbageCollector=function(e,t){return new yoe(e,t)}(this,n)}return(0,Te.Z)(e,[{key:"Fn",value:function(e){var t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"qn",value:function(e){var t=0;return this.Bn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Bn",value:function(e,t){return this.Un(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return koe(e,n)}},{key:"removeReference",value:function(e,t,n){return koe(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return koe(e,t)}},{key:"Kn",value:function(e,t){return function(e,t){var n=!1;return coe(e).X((function(r){return ooe(e,r,t).next((function(e){return e&&(n=!0),Bee.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[],i=0;return this.Un(e,(function(o,s){if(s<=t){var u=n.Kn(e,o).next((function(t){if(!t)return i++,r.getEntry(e,o).next((function(){return r.removeEntry(o,wee.min()),poe(e).delete([0,nte(o.path)])}))}));a.push(u)}})).next((function(){return Bee.waitFor(a)})).next((function(){return r.apply(e)})).next((function(){return i}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return koe(e,t)}},{key:"Un",value:function(e,t){var n,r=poe(e),a=Qee.ct;return r.Z({index:"documentTargetsIndex"},(function(e,r){var i=(0,ge.Z)(e,2),o=i[0],s=(i[1],r.path),u=r.sequenceNumber;0===o?(a!==Qee.ct&&t(new Eee(ite(n)),a),a=u,n=s):a=Qee.ct})).next((function(){a!==Qee.ct&&t(new Eee(ite(n)),a)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function koe(e,t){return poe(e).put(function(e,t){return{targetId:0,path:nte(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var woe=function(){function e(){(0,Se.Z)(this,e),this.changes=new yre((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return(0,Te.Z)(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,wne.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Bee.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),xoe=function(){function e(t){(0,Se.Z)(this,e),this.serializer=t}return(0,Te.Z)(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return Eoe(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return Eoe(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],die(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Gn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=wne.newInvalidDocument(t);return Eoe(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Noe(t))},(function(e,a){r=n.Qn(t,a)})).next((function(){return r}))}},{key:"zn",value:function(e,t){var n=this,r={size:0,document:wne.newInvalidDocument(t)};return Eoe(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Noe(t))},(function(e,a){r={document:n.Qn(t,a),size:aoe(a)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=kre();return this.jn(e,t,(function(e,t){var a=n.Qn(e,t);r=r.insert(e,a)})).next((function(){return r}))}},{key:"Wn",value:function(e,t){var n=this,r=kre(),a=new Ote(Eee.comparator);return this.jn(e,t,(function(e,t){var i=n.Qn(e,t);r=r.insert(e,i),a=a.insert(e,aoe(t))})).next((function(){return{documents:r,Hn:a}}))}},{key:"jn",value:function(e,t,n){if(t.isEmpty())return Bee.resolve();var r=new Mte(Zoe);t.forEach((function(e){return r=r.add(e)}));var a=IDBKeyRange.bound(Noe(r.first()),Noe(r.last())),i=r.getIterator(),o=i.getNext();return Eoe(e).Z({index:"documentKeyIndex",range:a},(function(e,t,r){for(var a=Eee.fromSegments([].concat((0,me.Z)(t.prefixPath),[t.collectionGroup,t.documentId]));o&&Zoe(o,a)<0;)n(o,null),o=i.getNext();o&&o.isEqual(a)&&(n(o,t),o=i.hasNext()?i.getNext():null),o?r.G(Noe(o)):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var a=this,i=t.path,o=[i.popLast().toArray(),i.lastSegment(),die(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],s=[i.popLast().toArray(),i.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Eoe(e).j(IDBKeyRange.bound(o,s,!0)).next((function(e){var n,i=kre(),o=(0,Ht.Z)(e);try{for(o.s();!(n=o.n()).done;){var s=n.value,u=a.Qn(Eee.fromSegments(s.prefixPath.concat(s.collectionGroup,s.documentId)),s);u.isFoundDocument()&&(pre(t,u)||r.has(u.key))&&(i=i.insert(u.key,u))}}catch(yhe){o.e(yhe)}finally{o.f()}return i}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var a=this,i=kre(),o=Coe(t,n),s=Coe(t,Oee.max());return Eoe(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,s,!0)},(function(e,t,n){var o=a.Qn(Eee.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(i=i.insert(o.key,o)).size===r&&n.done()})).next((function(){return i}))}},{key:"newChangeBuffer",value:function(e){return new Soe(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return Toe(e).get("remoteDocumentGlobalKey").next((function(e){return nee(!!e),e}))}},{key:"Gn",value:function(e,t){return Toe(e).put("remoteDocumentGlobalKey",t)}},{key:"Qn",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=Hae(e.se,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=Eee.fromSegments(t.noDocument.path),a=hie(t.noDocument.readTime);n=wne.newNoDocument(r,a),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return tee();var i=Eee.fromSegments(t.unknownDocument.path),o=hie(t.unknownDocument.version);n=wne.newUnknownDocument(i,o)}return t.readTime&&n.setReadTime(function(e){var t=new kee(e[0],e[1]);return wee.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!n.isNoDocument()||!n.version.isEqual(wee.min()))return n}return wne.newInvalidDocument(e)}}]),e}();function Ioe(e){return new xoe(e)}var Soe=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e,r){var a;return(0,Se.Z)(this,n),(a=t.call(this)).Jn=e,a.trackRemovals=r,a.Yn=new yre((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),a}return(0,Te.Z)(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,a=new Mte((function(e,t){return gee(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(i,o){var s=t.Yn.get(i);if(n.push(t.Jn.removeEntry(e,i,s.readTime)),o.isValidDocument()){var u=lie(t.Jn.serializer,o);a=a.add(i.path.popLast());var c=aoe(u);r+=c-s.size,n.push(t.Jn.addEntry(e,i,u))}else if(r-=s.size,t.trackRemovals){var l=lie(t.Jn.serializer,o.convertToNoDocument(wee.min()));n.push(t.Jn.addEntry(e,i,l))}})),a.forEach((function(r){n.push(t.Jn.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.Jn.updateMetadata(e,r)),Bee.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.Jn.zn(e,t).next((function(e){return n.Yn.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.Jn.Wn(e,t).next((function(e){var t=e.documents;return e.Hn.forEach((function(e,r){n.Yn.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(woe);function Toe(e){return _te(e,"remoteDocumentGlobal")}function Eoe(e){return _te(e,"remoteDocumentsV14")}function Noe(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Coe(e,t){var n=t.documentKey.path.toArray();return[e,die(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Zoe(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),a=0,i=0;i<n.length-2&&i<r.length-2;++i)if(a=gee(n[i],r[i]))return a;return(a=gee(n.length,r.length))||((a=gee(n[n.length-2],r[r.length-2]))||gee(n[n.length-1],r[r.length-1]))}var _oe=(0,Te.Z)((function e(t,n){(0,Se.Z)(this,e),this.overlayedDocument=t,this.mutatedFields=n})),Aoe=function(){function e(t,n,r,a){(0,Se.Z)(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=a}return(0,Te.Z)(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(a){return r=a,n.remoteDocumentCache.getEntry(e,t)})).next((function(e){return null!==r&&eae(r.mutation,e,Bte.empty(),kee.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,Zre()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Zre(),a=Sre();return this.populateOverlays(e,a,t).next((function(){return n.computeViews(e,t,a,r).next((function(e){var t=xre();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=Sre();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,Zre())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var a=kre(),i=Ere(),o=Ere();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof aae)?a=a.insert(t.key,t):void 0!==o?(i.set(t.key,o.mutation.getFieldMask()),eae(o.mutation,t,o.mutation.getFieldMask(),kee.now())):i.set(t.key,Bte.empty())})),this.recalculateAndSaveOverlays(e,a).next((function(e){return e.forEach((function(e,t){return i.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new _oe(t,null!==(n=i.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=Ere(),a=new Ote((function(e,t){return e-t})),i=Zre();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,i=(0,Ht.Z)(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var i=t.get(n);if(null!==i){var o=r.get(n)||Bte.empty();o=e.applyToLocalView(i,o),r.set(n,o);var s=(a.get(e.batchId)||Zre()).add(n);a=a.insert(e.batchId,s)}}))};for(i.s();!(n=i.n()).done;)o()}catch(yhe){i.e(yhe)}finally{i.f()}})).next((function(){for(var o=[],s=a.getReverseIterator(),u=function(){var a=s.getNext(),u=a.key,c=a.value,l=Tre();c.forEach((function(e){if(!i.has(e)){var n=Qre(t.get(e),r.get(e));null!==n&&l.set(e,n),i=i.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,u,l))};s.hasNext();)u();return Bee.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return Eee.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):ore(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var a=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(i){var o=r-i.size>0?a.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):Bee.resolve(Sre()),s=-1,u=i;return o.next((function(t){return Bee.forEach(t,(function(t,n){return s<n.largestBatchId&&(s=n.largestBatchId),i.get(t)?Bee.resolve():a.remoteDocumentCache.getEntry(e,t).next((function(e){u=u.insert(t,e)}))})).next((function(){return a.populateOverlays(e,t,i)})).next((function(){return a.computeViews(e,u,t,Zre())})).next((function(e){return{batchId:s,changes:Ire(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new Eee(t)).next((function(e){var t=xre();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,a=t.collectionGroup,i=xre();return this.indexManager.getCollectionParents(e,a).next((function(o){return Bee.forEach(o,(function(o){var s=function(e,t){return new ere(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(a));return r.getDocumentsMatchingCollectionQuery(e,s,n).next((function(e){e.forEach((function(e,t){i=i.insert(e,t)}))}))})).next((function(){return i}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,a=this;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((function(i){return r=i,a.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r)})).next((function(e){r.forEach((function(t,n){var r=n.getKey();null===e.get(r)&&(e=e.insert(r,wne.newInvalidDocument(r)))}));var n=xre();return e.forEach((function(e,a){var i=r.get(e);void 0!==i&&eae(i.mutation,a,Bte.empty(),kee.now()),pre(t,a)&&(n=n.insert(e,a))})),n}))}}]),e}(),Roe=function(){function e(t){(0,Se.Z)(this,e),this.serializer=t,this.Zn=new Map,this.Xn=new Map}return(0,Te.Z)(e,[{key:"getBundleMetadata",value:function(e,t){return Bee.resolve(this.Zn.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.Zn.set(t.id,{id:(n=t).id,version:n.version,createTime:Fae(n.createTime)}),Bee.resolve()}},{key:"getNamedQuery",value:function(e,t){return Bee.resolve(this.Xn.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.Xn.set(t.name,function(e){return{name:e.name,query:gie(e.bundledQuery),readTime:Fae(e.readTime)}}(t)),Bee.resolve()}}]),e}(),Doe=function(){function e(){(0,Se.Z)(this,e),this.overlays=new Ote(Eee.comparator),this.ts=new Map}return(0,Te.Z)(e,[{key:"getOverlay",value:function(e,t){return Bee.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=Sre();return Bee.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,a){r.re(e,t,a)})),Bee.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,a=this.ts.get(n);return void 0!==a&&(a.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.ts.delete(n)),Bee.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=Sre(),a=t.length+1,i=new Eee(t.child("")),o=this.overlays.getIteratorFrom(i);o.hasNext();){var s=o.getNext().value,u=s.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===a&&s.largestBatchId>n&&r.set(s.getKey(),s)}return Bee.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var a=new Ote((function(e,t){return e-t})),i=this.overlays.getIterator();i.hasNext();){var o=i.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var s=a.get(o.largestBatchId);null===s&&(s=Sre(),a=a.insert(o.largestBatchId,s)),s.set(o.getKey(),o)}}for(var u=Sre(),c=a.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return u.set(e,t)})),!(u.size()>=r)););return Bee.resolve(u)}},{key:"re",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var a=this.ts.get(r.largestBatchId).delete(n.key);this.ts.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(n.key,new pae(t,n));var i=this.ts.get(t);void 0===i&&(i=Zre(),this.ts.set(t,i)),this.ts.set(t,i.add(n.key))}}]),e}(),Ooe=function(){function e(){(0,Se.Z)(this,e),this.es=new Mte(Loe.ns),this.ss=new Mte(Loe.rs)}return(0,Te.Z)(e,[{key:"isEmpty",value:function(){return this.es.isEmpty()}},{key:"addReference",value:function(e,t){var n=new Loe(e,t);this.es=this.es.add(n),this.ss=this.ss.add(n)}},{key:"os",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.us(new Loe(e,t))}},{key:"cs",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"hs",value:function(e){var t=this,n=new Eee(new Iee([])),r=new Loe(n,e),a=new Loe(n,e+1),i=[];return this.ss.forEachInRange([r,a],(function(e){t.us(e),i.push(e.key)})),i}},{key:"ls",value:function(){var e=this;this.es.forEach((function(t){return e.us(t)}))}},{key:"us",value:function(e){this.es=this.es.delete(e),this.ss=this.ss.delete(e)}},{key:"fs",value:function(e){var t=new Eee(new Iee([])),n=new Loe(t,e),r=new Loe(t,e+1),a=Zre();return this.ss.forEachInRange([n,r],(function(e){a=a.add(e.key)})),a}},{key:"containsKey",value:function(e){var t=new Loe(e,0),n=this.es.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),Loe=function(){function e(t,n){(0,Se.Z)(this,e),this.key=t,this.ds=n}return(0,Te.Z)(e,null,[{key:"ns",value:function(e,t){return Eee.comparator(e.key,t.key)||gee(e.ds,t.ds)}},{key:"rs",value:function(e,t){return gee(e.ds,t.ds)||Eee.comparator(e.key,t.key)}}]),e}(),Foe=function(){function e(t,n){(0,Se.Z)(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.ws=1,this._s=new Mte(Loe.ns)}return(0,Te.Z)(e,[{key:"checkEmpty",value:function(e){return Bee.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var a=this.ws;this.ws++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var i=new fae(a,t,n,r);this.mutationQueue.push(i);var o,s=(0,Ht.Z)(r);try{for(s.s();!(o=s.n()).done;){var u=o.value;this._s=this._s.add(new Loe(u.key,a)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast())}}catch(yhe){s.e(yhe)}finally{s.f()}return Bee.resolve(i)}},{key:"lookupMutationBatch",value:function(e,t){return Bee.resolve(this.gs(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.ys(n),a=r<0?0:r;return Bee.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return Bee.resolve(0===this.mutationQueue.length?-1:this.ws-1)}},{key:"getAllMutationBatches",value:function(e){return Bee.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new Loe(t,0),a=new Loe(t,Number.POSITIVE_INFINITY),i=[];return this._s.forEachInRange([r,a],(function(e){var t=n.gs(e.ds);i.push(t)})),Bee.resolve(i)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Mte(gee);return t.forEach((function(e){var t=new Loe(e,0),a=new Loe(e,Number.POSITIVE_INFINITY);n._s.forEachInRange([t,a],(function(e){r=r.add(e.ds)}))})),Bee.resolve(this.ps(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,a=n;Eee.isDocumentKey(a)||(a=a.child(""));var i=new Loe(new Eee(a),0),o=new Mte(gee);return this._s.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.ds)),!0)}),i),Bee.resolve(this.ps(o))}},{key:"ps",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.gs(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;nee(0===this.Is(t.batchId,"removed")),this.mutationQueue.shift();var r=this._s;return Bee.forEach(t.mutations,(function(a){var i=new Loe(a.key,t.batchId);return r=r.delete(i),n.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((function(){n._s=r}))}},{key:"En",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new Loe(t,0),r=this._s.firstAfterOrEqual(n);return Bee.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,Bee.resolve()}},{key:"Is",value:function(e,t){return this.ys(e)}},{key:"ys",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"gs",value:function(e){var t=this.ys(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),Moe=function(){function e(t){(0,Se.Z)(this,e),this.Ts=t,this.docs=new Ote(Eee.comparator),this.size=0}return(0,Te.Z)(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),a=r?r.size:0,i=this.Ts(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:i}),this.size+=i-a,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return Bee.resolve(n?n.document.mutableCopy():wne.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=kre();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():wne.newInvalidDocument(e))})),Bee.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){for(var a=kre(),i=t.path,o=new Eee(i.child("")),s=this.docs.getIteratorFrom(o);s.hasNext();){var u=s.getNext(),c=u.key,l=u.value.document;if(!i.isPrefixOf(c.path))break;c.path.length>i.length+1||Lee(Dee(l),n)<=0||(r.has(l.key)||pre(t,l))&&(a=a.insert(l.key,l.mutableCopy()))}return Bee.resolve(a)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){tee()}},{key:"Es",value:function(e,t){return Bee.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new Poe(this)}},{key:"getSize",value:function(e){return Bee.resolve(this.size)}}]),e}(),Poe=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r;return(0,Se.Z)(this,n),(r=t.call(this)).Jn=e,r}return(0,Te.Z)(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,a){a.isValidDocument()?n.push(t.Jn.addEntry(e,a)):t.Jn.removeEntry(r)})),Bee.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Jn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Jn.getEntries(e,t)}}]),n}(woe),zoe=function(){function e(t){(0,Se.Z)(this,e),this.persistence=t,this.As=new yre((function(e){return $ne(e)}),Kne),this.lastRemoteSnapshotVersion=wee.min(),this.highestTargetId=0,this.Rs=0,this.vs=new Ooe,this.targetCount=0,this.bs=loe.vn()}return(0,Te.Z)(e,[{key:"forEachTarget",value:function(e,t){return this.As.forEach((function(e,n){return t(n)})),Bee.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return Bee.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return Bee.resolve(this.Rs)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.bs.next(),Bee.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Rs&&(this.Rs=t),Bee.resolve()}},{key:"Sn",value:function(e){this.As.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.bs=new loe(t),this.highestTargetId=t),e.sequenceNumber>this.Rs&&(this.Rs=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Sn(t),this.targetCount+=1,Bee.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Sn(t),Bee.resolve()}},{key:"removeTargetData",value:function(e,t){return this.As.delete(t.target),this.vs.hs(t.targetId),this.targetCount-=1,Bee.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,a=0,i=[];return this.As.forEach((function(o,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.As.delete(o),i.push(r.removeMatchingKeysForTargetId(e,s.targetId)),a++)})),Bee.waitFor(i).next((function(){return a}))}},{key:"getTargetCount",value:function(e){return Bee.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.As.get(t)||null;return Bee.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.vs.os(t,n),Bee.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.vs.cs(t,n);var r=this.persistence.referenceDelegate,a=[];return r&&t.forEach((function(t){a.push(r.markPotentiallyOrphaned(e,t))})),Bee.waitFor(a)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.vs.hs(t),Bee.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.vs.fs(t);return Bee.resolve(n)}},{key:"containsKey",value:function(e,t){return Bee.resolve(this.vs.containsKey(t))}}]),e}(),Boe=function(){function e(t,n){var r=this;(0,Se.Z)(this,e),this.Ps={},this.overlays={},this.Vs=new Qee(0),this.Ss=!1,this.Ss=!0,this.referenceDelegate=t(this),this.Ds=new zoe(this),this.indexManager=new Hie,this.remoteDocumentCache=new Moe((function(e){return r.referenceDelegate.Cs(e)})),this.serializer=new cie(n),this.xs=new Roe(this.serializer)}return(0,Te.Z)(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Ss=!1,Promise.resolve()}},{key:"started",get:function(){return this.Ss}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new Doe,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Ps[e.toKey()];return n||(n=new Foe(t,this.referenceDelegate),this.Ps[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Ds}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.xs}},{key:"runTransaction",value:function(e,t,n){var r=this;Y9("MemoryPersistence","Starting transaction:",e);var a=new Voe(this.Vs.next());return this.referenceDelegate.Ns(),n(a).next((function(e){return r.referenceDelegate.ks(a).next((function(){return e}))})).toPromise().then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"Os",value:function(e,t){return Bee.or(Object.values(this.Ps).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),Voe=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r;return(0,Se.Z)(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return(0,Te.Z)(n)}(Mee),Uoe=function(){function e(t){(0,Se.Z)(this,e),this.persistence=t,this.$s=new Ooe,this.Ms=null}return(0,Te.Z)(e,[{key:"Bs",get:function(){if(this.Ms)return this.Ms;throw tee()}},{key:"addReference",value:function(e,t,n){return this.$s.addReference(n,t),this.Bs.delete(n.toString()),Bee.resolve()}},{key:"removeReference",value:function(e,t,n){return this.$s.removeReference(n,t),this.Bs.add(n.toString()),Bee.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Bs.add(t.toString()),Bee.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.$s.hs(t.targetId).forEach((function(e){return n.Bs.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Bs.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Ns",value:function(){this.Ms=new Set}},{key:"ks",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Bee.forEach(this.Bs,(function(r){var a=Eee.fromPath(r);return t.Ls(e,a).next((function(e){e||n.removeEntry(a,wee.min())}))})).next((function(){return t.Ms=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Ls(e,t).next((function(e){e?n.Bs.delete(t.toString()):n.Bs.add(t.toString())}))}},{key:"Cs",value:function(e){return 0}},{key:"Ls",value:function(e,t){var n=this;return Bee.or([function(){return Bee.resolve(n.$s.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Os(e,t)}])}}],[{key:"Fs",value:function(t){return new e(t)}}]),e}(),Woe=function(){function e(t){(0,Se.Z)(this,e),this.serializer=t}return(0,Te.Z)(e,[{key:"M",value:function(e,t,n,r){var a=this,i=new Vee("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ote,{unique:!0}),e.createObjectStore("documentMutations")}(e),joe(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=Bee.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),joe(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:wee.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(i)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").j().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ote,{unique:!0});var r=t.store("mutations"),a=n.map((function(e){return r.put(e)}));return Bee.waitFor(a)}))}(e,i)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return a.qs(i)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),a.Us(i)}))),n<7&&r>=7&&(o=o.next((function(){return a.Ks(i)}))),n<8&&r>=8&&(o=o.next((function(){return a.Gs(e,i)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return a.Qs(i)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:wte});t.createIndex("collectionPathOverlayIndex",xte,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",Ite,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:lte});t.createIndex("documentKeyIndex",dte),t.createIndex("collectionGroupIndex",fte)}(e)})).next((function(){return a.zs(e,i)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return a.js(e,i)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:gte}).createIndex("sequenceNumberIndex",yte,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:bte}).createIndex("documentKeyIndex",kte,{unique:!1})}(e)}))),o}},{key:"Us",value:function(e){var t=0;return e.store("remoteDocuments").Z((function(e,n){t+=aoe(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"qs",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.j().next((function(n){return Bee.forEach(n,(function(n){var a=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",a).next((function(r){return Bee.forEach(r,(function(r){nee(r.userId===n.userId);var a=pie(t.serializer,r);return roe(e,n.userId,a).next((function(){}))}))}))}))}))}},{key:"Ks",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.Z((function(n,a){var i=new Iee(n),o=function(e){return[0,nte(e)]}(i);r.push(t.get(o).next((function(n){return n?Bee.resolve():function(n){return t.put({targetId:0,path:nte(n),sequenceNumber:e.highestListenSequenceNumber})}(i)})))})).next((function(){return Bee.waitFor(r)}))}))}},{key:"Gs",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:mte});var n=t.store("collectionParents"),r=new qie,a=function(e){if(r.add(e)){var t=e.lastSegment(),a=e.popLast();return n.put({collectionId:t,parent:nte(a)})}};return t.store("remoteDocuments").Z({Y:!0},(function(e,t){var n=new Iee(e);return a(n.popLast())})).next((function(){return t.store("documentMutations").Z({Y:!0},(function(e,t){var n=(0,ge.Z)(e,3),r=(n[0],n[1]),i=(n[2],ite(r));return a(i.popLast())}))}))}},{key:"Qs",value:function(e){var t=this,n=e.store("targets");return n.Z((function(e,r){var a=vie(r),i=mie(t.serializer,a);return n.put(i)}))}},{key:"zs",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.Z((function(e,n){var a,i=t.store("remoteDocumentsV14"),o=(a=n,a.document?new Eee(Iee.fromString(a.document.name).popFirst(5)):a.noDocument?Eee.fromSegments(a.noDocument.path):a.unknownDocument?Eee.fromSegments(a.unknownDocument.path):tee()).path.toArray(),s={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(s))})).next((function(){return Bee.waitFor(r)}))}},{key:"js",value:function(e,t){var n=this,r=t.store("mutations"),a=Ioe(this.serializer),i=new Boe(Uoe.Fs,this.serializer.se);return r.j().next((function(e){var r=new Map;return e.forEach((function(e){var t,a=null!==(t=r.get(e.userId))&&void 0!==t?t:Zre();pie(n.serializer,e).keys().forEach((function(e){return a=a.add(e)})),r.set(e.userId,a)})),Bee.forEach(r,(function(e,r){var o=new q9(r),s=Sie.ie(n.serializer,o),u=i.getIndexManager(o),c=ioe.ie(o,n.serializer,u,i.referenceDelegate);return new Aoe(a,c,s,u).recalculateAndSaveOverlaysForDocumentKeys(new Zte(t,Qee.ct),e).next()}))}))}}]),e}();function joe(e){e.createObjectStore("targetDocuments",{keyPath:pte}).createIndex("documentTargetsIndex",vte,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",hte,{unique:!0}),e.createObjectStore("targetGlobal")}var Goe="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Hoe=function(){function e(t,n,r,a,i,o,s,u,c,l){var d=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if((0,Se.Z)(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Ws=i,this.window=o,this.document=s,this.Hs=c,this.Js=l,this.Ys=d,this.Vs=null,this.Ss=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.Xs=null,this.ti=null,this.ei=Number.NEGATIVE_INFINITY,this.ni=function(e){return Promise.resolve()},!e.D())throw new iee(aee.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new boe(this,a),this.si=n+"main",this.serializer=new cie(u),this.ii=new Uee(this.si,this.Ys,new Woe(this.serializer)),this.Ds=new doe(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Ioe(this.serializer),this.xs=new wie,this.window&&this.window.localStorage?this.ri=this.window.localStorage:(this.ri=null,!1===l&&Q9("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return(0,Te.Z)(e,[{key:"start",value:function(){var e=this;return this.oi().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new iee(aee.FAILED_PRECONDITION,Goe);return e.ui(),e.ci(),e.ai(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Ds.getHighestSequenceNumber(t)}))})).then((function(t){e.Vs=new Qee(t,e.Hs)})).then((function(){e.Ss=!0})).catch((function(t){return e.ii&&e.ii.close(),Promise.reject(t)}))}},{key:"hi",value:function(e){var t=this;return this.ni=function(){var n=(0,ke.Z)((0,be.Z)().mark((function n(r){return(0,be.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.ii.B(function(){var t=(0,ke.Z)((0,be.Z)().mark((function t(n){return(0,be.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Ws.enqueueAndForget((0,ke.Z)((0,be.Z)().mark((function e(){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.oi();case 4:case"end":return e.stop()}}),e)})))))}},{key:"oi",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return $oe(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.li(t).next((function(t){t||(e.isPrimary=!1,e.Ws.enqueueRetryable((function(){return e.ni(!1)})))}))})).next((function(){return e.fi(t)})).next((function(n){return e.isPrimary&&!n?e.di(t).next((function(){return!1})):!!n&&e.wi(t).next((function(){return!0}))}))})).catch((function(t){if(Gee(t))return Y9("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return Y9("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Ws.enqueueRetryable((function(){return e.ni(t)})),e.isPrimary=t}))}},{key:"li",value:function(e){var t=this;return qoe(e).get("owner").next((function(e){return Bee.resolve(t._i(e))}))}},{key:"mi",value:function(e){return $oe(e).delete(this.clientId)}},{key:"gi",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){var t,n,r,a,i=this;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.yi(this.ei,18e5)){e.next=6;break}return this.ei=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=_te(e,"clientMetadata");return t.j().next((function(e){var n=i.pi(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return Bee.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.ri){n=(0,Ht.Z)(t);try{for(n.s();!(r=n.n()).done;)a=r.value,this.ri.removeItem(this.Ii(a.clientId))}catch(yhe){n.e(yhe)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ai",value:function(){var e=this;this.ti=this.Ws.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.oi().then((function(){return e.gi()})).then((function(){return e.ai()}))}))}},{key:"_i",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"fi",value:function(e){var t=this;return this.Js?Bee.resolve(!0):qoe(e).get("owner").next((function(n){if(null!==n&&t.yi(n.leaseTimestampMs,5e3)&&!t.Ti(n.ownerId)){if(t._i(n)&&t.networkEnabled)return!0;if(!t._i(n)){if(!n.allowTabSynchronization)throw new iee(aee.FAILED_PRECONDITION,Goe);return!1}}return!(!t.networkEnabled||!t.inForeground)||$oe(e).j().next((function(e){return void 0===t.pi(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,a=t.networkEnabled===e.networkEnabled;if(n||r&&a)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&Y9("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){var t=this;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Ss=!1,this.Ei(),this.ti&&(this.ti.cancel(),this.ti=null),this.Ai(),this.Ri(),e.next=7,this.ii.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new Zte(e,Qee.ct);return t.di(n).next((function(){return t.mi(n)}))}));case 7:this.ii.close(),this.vi();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"pi",value:function(e,t){var n=this;return e.filter((function(e){return n.yi(e.updateTimeMs,t)&&!n.Ti(e.clientId)}))}},{key:"bi",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return $oe(t).j().next((function(t){return e.pi(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.Ss}},{key:"getMutationQueue",value:function(e,t){return ioe.ie(e,this.serializer,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Ds}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new Kie(e,this.serializer.se.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return Sie.ie(this.serializer,e)}},{key:"getBundleCache",value:function(){return this.xs}},{key:"runTransaction",value:function(e,t,n){var r=this;Y9("IndexedDbPersistence","Starting transaction:",e);var a,i,o="readonly"===t?"readonly":"readwrite",s=15===(a=this.Ys)?Cte:14===a?Nte:13===a?Ete:12===a?Tte:11===a?Ste:void tee();return this.ii.runTransaction(e,o,s,(function(a){return i=new Zte(a,r.Vs?r.Vs.next():Qee.ct),"readwrite-primary"===t?r.li(i).next((function(e){return!!e||r.fi(i)})).next((function(t){if(!t)throw Q9("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Ws.enqueueRetryable((function(){return r.ni(!1)})),new iee(aee.FAILED_PRECONDITION,Fee);return n(i)})).next((function(e){return r.wi(i).next((function(){return e}))})):r.Pi(i).next((function(){return n(i)}))})).then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Pi",value:function(e){var t=this;return qoe(e).get("owner").next((function(e){if(null!==e&&t.yi(e.leaseTimestampMs,5e3)&&!t.Ti(e.ownerId)&&!t._i(e)&&!(t.Js||t.allowTabSynchronization&&e.allowTabSynchronization))throw new iee(aee.FAILED_PRECONDITION,Goe)}))}},{key:"wi",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return qoe(e).put("owner",t)}},{key:"di",value:function(e){var t=this,n=qoe(e);return n.get("owner").next((function(e){return t._i(e)?(Y9("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):Bee.resolve()}))}},{key:"yi",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(Q9("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"ui",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Xs=function(){e.Ws.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.oi()}))},this.document.addEventListener("visibilitychange",this.Xs),this.inForeground="visible"===this.document.visibilityState)}},{key:"Ai",value:function(){this.Xs&&(this.document.removeEventListener("visibilitychange",this.Xs),this.Xs=null)}},{key:"ci",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=function(){t.Ei();var e=/(?:Version|Mobile)\/1[456]/;!RX()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&t.Ws.enterRestrictedMode(!0),t.Ws.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.Zs))}},{key:"Ri",value:function(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}},{key:"Ti",value:function(e){var t;try{var n=null!==(null===(t=this.ri)||void 0===t?void 0:t.getItem(this.Ii(e)));return Y9("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Q9("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Ei",value:function(){if(this.ri)try{this.ri.setItem(this.Ii(this.clientId),String(Date.now()))}catch(n6){Q9("Failed to set zombie client id.",n6)}}},{key:"vi",value:function(){if(this.ri)try{this.ri.removeItem(this.Ii(this.clientId))}catch(n6){}}},{key:"Ii",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"D",value:function(){return Uee.D()}}]),e}();function qoe(e){return _te(e,"owner")}function $oe(e){return _te(e,"clientMetadata")}function Koe(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var Xoe=function(){function e(t,n,r,a){(0,Se.Z)(this,e),this.targetId=t,this.fromCache=n,this.Vi=r,this.Si=a}return(0,Te.Z)(e,null,[{key:"Di",value:function(t,n){var r,a=Zre(),i=Zre(),o=(0,Ht.Z)(n.docChanges);try{for(o.s();!(r=o.n()).done;){var s=r.value;switch(s.type){case 0:a=a.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}}}catch(yhe){o.e(yhe)}finally{o.f()}return new e(t,n.fromCache,a,i)}}]),e}(),Yoe=function(){function e(){(0,Se.Z)(this,e),this.Ci=!1}return(0,Te.Z)(e,[{key:"initialize",value:function(e,t){this.xi=e,this.indexManager=t,this.Ci=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var a=this;return this.Ni(e,t).next((function(i){return i||a.ki(e,t,r,n)})).next((function(n){return n||a.Oi(e,t)}))}},{key:"Ni",value:function(e,t){var n=this;if(rre(t))return Bee.resolve(null);var r=ure(t);return this.indexManager.getIndexType(e,r).next((function(a){return 0===a?null:(null!==t.limit&&1===a&&(t=lre(t,null,"F"),r=ure(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(a){var i=Zre.apply(void 0,(0,me.Z)(a));return n.xi.getDocuments(e,i).next((function(a){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.$i(t,a);return n.Mi(t,o,i,r.readTime)?n.Ni(e,lre(t,null,"F")):n.Fi(e,o,t,r)}))}))})))}))}},{key:"ki",value:function(e,t,n,r){var a=this;return rre(t)||r.isEqual(wee.min())?this.Oi(e,t):this.xi.getDocuments(e,n).next((function(i){var o=a.$i(t,i);return a.Mi(t,o,n,r)?a.Oi(e,t):(X9()<=eY.DEBUG&&Y9("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),hre(t)),a.Fi(e,o,t,Ree(r,-1)))}))}},{key:"$i",value:function(e,t){var n=new Mte(mre(e));return t.forEach((function(t,r){pre(e,r)&&(n=n.add(r))})),n}},{key:"Mi",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(r)>0)}},{key:"Oi",value:function(e,t){return X9()<=eY.DEBUG&&Y9("QueryEngine","Using full collection scan to execute query:",hre(t)),this.xi.getDocumentsMatchingQuery(e,t,Oee.min())}},{key:"Fi",value:function(e,t,n,r){return this.xi.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),Qoe=function(){function e(t,n,r,a){(0,Se.Z)(this,e),this.persistence=t,this.Bi=n,this.serializer=a,this.Li=new Ote(gee),this.qi=new yre((function(e){return $ne(e)}),Kne),this.Ui=new Map,this.Ki=t.getRemoteDocumentCache(),this.Ds=t.getTargetCache(),this.xs=t.getBundleCache(),this.Gi(r)}return(0,Te.Z)(e,[{key:"Gi",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Aoe(this.Ki,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ki.setIndexManager(this.indexManager),this.Bi.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.Li)}))}}]),e}();function Joe(e,t,n,r){return new Qoe(e,t,n,r)}function ese(e,t){return tse.apply(this,arguments)}function tse(){return tse=(0,ke.Z)((0,be.Z)().mark((function e(t,n){var r;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ree(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(a){return t=a,r.Gi(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var a,i=[],o=[],s=Zre(),u=(0,Ht.Z)(t);try{for(u.s();!(a=u.n()).done;){var c=a.value;i.push(c.batchId);var l,d=(0,Ht.Z)(c.mutations);try{for(d.s();!(l=d.n()).done;){var f=l.value;s=s.add(f.key)}}catch(yhe){d.e(yhe)}finally{d.f()}}}catch(yhe){u.e(yhe)}finally{u.f()}var h,p=(0,Ht.Z)(n);try{for(p.s();!(h=p.n()).done;){var v=h.value;o.push(v.batchId);var m,g=(0,Ht.Z)(v.mutations);try{for(g.s();!(m=g.n()).done;){var y=m.value;s=s.add(y.key)}}catch(yhe){g.e(yhe)}finally{g.f()}}}catch(yhe){p.e(yhe)}finally{p.f()}return r.localDocuments.getDocuments(e,s).next((function(e){return{Qi:e,removedBatchIds:i,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),tse.apply(this,arguments)}function nse(e,t){var n=ree(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),a=n.Ki.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var a=n.batch,i=a.keys(),o=Bee.resolve();return i.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var i=n.docVersions.get(e);nee(null!==i),t.version.compareTo(i)<0&&(a.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,a)}))}(n,e,t,a).next((function(){return a.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=Zre(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function rse(e){var t=ree(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Ds.getLastRemoteSnapshotVersion(e)}))}function ase(e,t){var n=ree(e),r=t.snapshotVersion,a=n.Li;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var i=n.Ki.newChangeBuffer({trackRemovals:!0});a=n.Li;var o=[];t.targetChanges.forEach((function(i,s){var u=a.get(s);if(u){o.push(n.Ds.removeMatchingKeys(e,i.removedDocuments,s).next((function(){return n.Ds.addMatchingKeys(e,i.addedDocuments,s)})));var c=u.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(s)?c=c.withResumeToken(Ute.EMPTY_BYTE_STRING,wee.min()).withLastLimboFreeSnapshotVersion(wee.min()):i.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(i.resumeToken,r)),a=a.insert(s,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(u,c,i)&&o.push(n.Ds.updateTargetData(e,c))}}));var s=kre(),u=Zre();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(ise(e,i,t.documentUpdates).next((function(e){s=e.zi,u=e.ji}))),!r.isEqual(wee.min())){var c=n.Ds.getLastRemoteSnapshotVersion(e).next((function(t){return n.Ds.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return Bee.waitFor(o).next((function(){return i.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,s,u)})).next((function(){return s}))})).then((function(e){return n.Li=a,e}))}function ise(e,t,n){var r=Zre(),a=Zre();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=kre();return n.forEach((function(n,i){var o=e.get(n);i.isFoundDocument()!==o.isFoundDocument()&&(a=a.add(n)),i.isNoDocument()&&i.version.isEqual(wee.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!o.isValidDocument()||i.version.compareTo(o.version)>0||0===i.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):Y9("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",i.version)})),{zi:r,ji:a}}))}function ose(e,t){var n=ree(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function sse(e,t){var n=ree(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Ds.getTargetData(e,t).next((function(a){return a?(r=a,Bee.resolve(r)):n.Ds.allocateTargetId(e).next((function(a){return r=new uie(t,a,0,e.currentSequenceNumber),n.Ds.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.Li.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Li=n.Li.insert(e.targetId,e),n.qi.set(t,e.targetId)),e}))}function use(e,t,n){return cse.apply(this,arguments)}function cse(){return cse=(0,ke.Z)((0,be.Z)().mark((function e(t,n,r){var a,i,o;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=ree(t),i=a.Li.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,a.persistence.runTransaction("Release target",o,(function(e){return a.persistence.referenceDelegate.removeTarget(e,i)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),Gee(e.t1)){e.next=12;break}throw e.t1;case 12:Y9("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:a.Li=a.Li.remove(n),a.qi.delete(i.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),cse.apply(this,arguments)}function lse(e,t,n){var r=ree(e),a=wee.min(),i=Zre();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=ree(e),a=r.qi.get(n);return void 0!==a?Bee.resolve(r.Li.get(a)):r.Ds.getTargetData(t,n)}(r,e,ure(t)).next((function(t){if(t)return a=t.lastLimboFreeSnapshotVersion,r.Ds.getMatchingKeysForTargetId(e,t.targetId).next((function(e){i=e}))})).next((function(){return r.Bi.getDocumentsMatchingQuery(e,t,n?a:wee.min(),n?i:Zre())})).next((function(e){return hse(r,vre(t),e),{documents:e,Wi:i}}))}))}function dse(e,t){var n=ree(e),r=ree(n.Ds),a=n.Li.get(t);return a?Promise.resolve(a.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.ne(e,t).next((function(e){return e?e.target:null}))}))}function fse(e,t){var n=ree(e),r=n.Ui.get(t)||wee.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.Ki.getAllFromCollectionGroup(e,t,Ree(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return hse(n,t,e),e}))}function hse(e,t,n){var r=e.Ui.get(t)||wee.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Ui.set(t,r)}function pse(e,t,n,r){return vse.apply(this,arguments)}function vse(){return vse=(0,ke.Z)((0,be.Z)().mark((function e(t,n,r,a){var i,o,s,u,c,l,d,f,h,p;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=ree(t),o=Zre(),s=kre(),u=(0,Ht.Z)(r);try{for(u.s();!(c=u.n()).done;)l=c.value,d=n.Hi(l.metadata.name),l.document&&(o=o.add(d)),(f=n.Ji(l)).setReadTime(n.Yi(l.metadata.readTime)),s=s.insert(d,f)}catch(yhe){u.e(yhe)}finally{u.f()}return h=i.Ki.newChangeBuffer({trackRemovals:!0}),e.next=7,sse(i,function(e){return ure(nre(Iee.fromString("__bundle__/docs/".concat(e))))}(a));case 7:return p=e.sent,e.abrupt("return",i.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return ise(e,h,s).next((function(t){return h.apply(e),t})).next((function(t){return i.Ds.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return i.Ds.addMatchingKeys(e,o,p.targetId)})).next((function(){return i.localDocuments.getLocalViewOfDocuments(e,t.zi,t.ji)})).next((function(){return t.zi}))}))})));case 9:case"end":return e.stop()}}),e)}))),vse.apply(this,arguments)}function mse(e,t){return gse.apply(this,arguments)}function gse(){return gse=(0,ke.Z)((0,be.Z)().mark((function e(t,n){var r,a,i,o=arguments;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:Zre(),e.next=3,sse(t,ure(gie(n.bundledQuery)));case 3:return a=e.sent,i=ree(t),e.abrupt("return",i.persistence.runTransaction("Save named query","readwrite",(function(e){var t=Fae(n.readTime);if(a.snapshotVersion.compareTo(t)>=0)return i.xs.saveNamedQuery(e,n);var o=a.withResumeToken(Ute.EMPTY_BYTE_STRING,t);return i.Li=i.Li.insert(o.targetId,o),i.Ds.updateTargetData(e,o).next((function(){return i.Ds.removeMatchingKeysForTargetId(e,a.targetId)})).next((function(){return i.Ds.addMatchingKeys(e,r,a.targetId)})).next((function(){return i.xs.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),gse.apply(this,arguments)}function yse(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function bse(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function kse(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var wse=function(){function e(t,n,r,a){(0,Se.Z)(this,e),this.user=t,this.batchId=n,this.state=r,this.error=a}return(0,Te.Z)(e,[{key:"Xi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Zi",value:function(t,n,r){var a,i=JSON.parse(r),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&((o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(a=new iee(i.error.code,i.error.message))),o?new e(t,n,i.state,a):(Q9("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),xse=function(){function e(t,n,r){(0,Se.Z)(this,e),this.targetId=t,this.state=n,this.error=r}return(0,Te.Z)(e,[{key:"Xi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Zi",value:function(t,n){var r,a=JSON.parse(n),i="object"==typeof a&&-1!==["not-current","current","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return i&&a.error&&((i="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(r=new iee(a.error.code,a.error.message))),i?new e(t,a.state,r):(Q9("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),Ise=function(){function e(t,n){(0,Se.Z)(this,e),this.clientId=t,this.activeTargetIds=n}return(0,Te.Z)(e,null,[{key:"Zi",value:function(t,n){for(var r=JSON.parse(n),a="object"==typeof r&&r.activeTargetIds instanceof Array,i=Are(),o=0;a&&o<r.activeTargetIds.length;++o)a=tte(r.activeTargetIds[o]),i=i.add(r.activeTargetIds[o]);return a?new e(t,i):(Q9("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),Sse=function(){function e(t,n){(0,Se.Z)(this,e),this.clientId=t,this.onlineState=n}return(0,Te.Z)(e,null,[{key:"Zi",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(Q9("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),Tse=function(){function e(){(0,Se.Z)(this,e),this.activeTargetIds=Are()}return(0,Te.Z)(e,[{key:"tr",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"er",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"Xi",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),Ese=function(){function e(t,n,r,a,i){(0,Se.Z)(this,e),this.window=t,this.Ws=n,this.persistenceKey=r,this.nr=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.sr=this.ir.bind(this),this.rr=new Ote(gee),this.started=!1,this.ur=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.cr=yse(this.persistenceKey,this.nr),this.ar=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.rr=this.rr.insert(this.nr,new Tse),this.hr=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.lr=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.dr=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.wr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this._r=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.sr)}return(0,Te.Z)(e,[{key:"start",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){var t,n,r,a,i,o,s,u,c,l,d,f=this;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.bi();case 2:t=e.sent,n=(0,Ht.Z)(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((a=r.value)!==this.nr){e.next=10;break}return e.abrupt("continue",12);case 10:(i=this.getItem(yse(this.persistenceKey,a)))&&(o=Ise.Zi(a,i))&&(this.rr=this.rr.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.mr(),(s=this.storage.getItem(this.wr))&&(u=this.gr(s))&&this.yr(u),c=(0,Ht.Z)(this.ur);try{for(c.s();!(l=c.n()).done;)d=l.value,this.ir(d)}catch(yhe){c.e(yhe)}finally{c.f()}this.ur=[],this.window.addEventListener("pagehide",(function(){return f.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.ar,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.pr(this.rr)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.rr.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Ir(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Ir(e,t,n),this.Tr(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(kse(this.persistenceKey,e));if(n){var r=xse.Zi(e,n);r&&(t=r.state)}}return this.Er.tr(e),this.mr(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Er.er(e),this.mr()}},{key:"isLocalQueryTarget",value:function(e){return this.Er.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(kse(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.Ar(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Tr(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Rr(e)}},{key:"notifyBundleLoaded",value:function(e){this.vr(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.sr),this.removeItem(this.cr),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return Y9("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){Y9("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){Y9("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"ir",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(Y9("SharedClientState","EVENT",n.key,n.newValue),n.key===this.cr)return void Q9("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ws.enqueueRetryable((0,ke.Z)((0,be.Z)().mark((function e(){var r,a,i,o,s,u,c;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.hr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.br(n.key),e.abrupt("return",t.Pr(r,null));case 6:if(!(a=t.Vr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.Pr(a.clientId,a));case 9:e.next=41;break;case 11:if(!t.lr.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(i=t.Sr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.Dr(i));case 16:e.next=41;break;case 18:if(!t.dr.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Cr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Nr(o));case 23:e.next=41;break;case 25:if(n.key!==t.wr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(s=t.gr(n.newValue))){e.next=30;break}return e.abrupt("return",t.yr(s));case 30:e.next=41;break;case 32:if(n.key!==t.ar){e.next=37;break}u=function(e){var t=Qee.ct;if(null!=e)try{var n=JSON.parse(e);nee("number"==typeof n),t=n}catch(e){Q9("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),u!==Qee.ct&&t.sequenceNumberHandler(u),e.next=41;break;case 37:if(n.key!==t._r){e.next=41;break}return c=t.kr(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Or(e)})));case 41:e.next=44;break;case 43:t.ur.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Er",get:function(){return this.rr.get(this.nr)}},{key:"mr",value:function(){this.setItem(this.cr,this.Er.Xi())}},{key:"Ir",value:function(e,t,n){var r=new wse(this.currentUser,e,t,n),a=bse(this.persistenceKey,this.currentUser,e);this.setItem(a,r.Xi())}},{key:"Tr",value:function(e){var t=bse(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Rr",value:function(e){var t={clientId:this.nr,onlineState:e};this.storage.setItem(this.wr,JSON.stringify(t))}},{key:"Ar",value:function(e,t,n){var r=kse(this.persistenceKey,e),a=new xse(e,t,n);this.setItem(r,a.Xi())}},{key:"vr",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this._r,t)}},{key:"br",value:function(e){var t=this.hr.exec(e);return t?t[1]:null}},{key:"Vr",value:function(e,t){var n=this.br(e);return Ise.Zi(n,t)}},{key:"Sr",value:function(e,t){var n=this.lr.exec(e),r=Number(n[1]),a=void 0!==n[2]?n[2]:null;return wse.Zi(new q9(a),r,t)}},{key:"Cr",value:function(e,t){var n=this.dr.exec(e),r=Number(n[1]);return xse.Zi(r,t)}},{key:"gr",value:function(e){return Sse.Zi(e)}},{key:"kr",value:function(e){return JSON.parse(e)}},{key:"Dr",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.$r(t.batchId,t.state,t.error));case 2:Y9("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Nr",value:function(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}},{key:"Pr",value:function(e,t){var n=this,r=t?this.rr.insert(e,t):this.rr.remove(e),a=this.pr(this.rr),i=this.pr(r),o=[],s=[];return i.forEach((function(e){a.has(e)||o.push(e)})),a.forEach((function(e){i.has(e)||s.push(e)})),this.syncEngine.Fr(o,s).then((function(){n.rr=r}))}},{key:"yr",value:function(e){this.rr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"pr",value:function(e){var t=Are();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"D",value:function(e){return!(!e||!e.localStorage)}}]),e}(),Nse=function(){function e(){(0,Se.Z)(this,e),this.Br=new Tse,this.Lr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return(0,Te.Z)(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Br.tr(e),this.Lr[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Lr[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Br.er(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Br.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Lr[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Br.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Br.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Br=new Tse,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),Cse=function(){function e(){(0,Se.Z)(this,e)}return(0,Te.Z)(e,[{key:"qr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),Zse=function(){function e(){var t=this;(0,Se.Z)(this,e),this.Ur=function(){return t.Kr()},this.Gr=function(){return t.Qr()},this.zr=[],this.jr()}return(0,Te.Z)(e,[{key:"qr",value:function(e){this.zr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Ur),window.removeEventListener("offline",this.Gr)}},{key:"jr",value:function(){window.addEventListener("online",this.Ur),window.addEventListener("offline",this.Gr)}},{key:"Kr",value:function(){Y9("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=(0,Ht.Z)(this.zr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(yhe){t.e(yhe)}finally{t.f()}}},{key:"Qr",value:function(){Y9("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=(0,Ht.Z)(this.zr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(yhe){t.e(yhe)}finally{t.f()}}}],[{key:"D",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),_se=null;function Ase(){return null===_se?_se=268435456+Math.round(2147483648*Math.random()):_se++,"0x"+_se.toString(16)}var Rse={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},Dse=function(){function e(t){(0,Se.Z)(this,e),this.Wr=t.Wr,this.Hr=t.Hr}return(0,Te.Z)(e,[{key:"Jr",value:function(e){this.Yr=e}},{key:"Zr",value:function(e){this.Xr=e}},{key:"onMessage",value:function(e){this.eo=e}},{key:"close",value:function(){this.Hr()}},{key:"send",value:function(e){this.Wr(e)}},{key:"no",value:function(){this.Yr()}},{key:"so",value:function(e){this.Xr(e)}},{key:"io",value:function(e){this.eo(e)}}]),e}(),Ose="WebChannelConnection",Lse=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r;return(0,Se.Z)(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return(0,Te.Z)(n,[{key:"lo",value:function(e,t,n,r){var a=Ase();return new Promise((function(i,o){var s=new G9;s.setWithCredentials(!0),s.listenOnce(B9.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case z9.NO_ERROR:var t=s.getResponseJson();Y9(Ose,"XHR for RPC '".concat(e,"' ").concat(a," received:"),JSON.stringify(t)),i(t);break;case z9.TIMEOUT:Y9(Ose,"RPC '".concat(e,"' ").concat(a," timed out")),o(new iee(aee.DEADLINE_EXCEEDED,"Request time out"));break;case z9.HTTP_ERROR:var n=s.getStatus();if(Y9(Ose,"RPC '".concat(e,"' ").concat(a," failed with status:"),n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson();Array.isArray(r)&&(r=r[0]);var u=null==r?void 0:r.error;if(u&&u.status&&u.message){var c=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(aee).indexOf(t)>=0?t:aee.UNKNOWN}(u.status);o(new iee(c,u.message))}else o(new iee(aee.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new iee(aee.UNAVAILABLE,"Connection failed."));break;default:tee()}}finally{Y9(Ose,"RPC '".concat(e,"' ").concat(a," completed."))}}));var u=JSON.stringify(r);Y9(Ose,"RPC '".concat(e,"' ").concat(a," sending request:"),r),s.send(t,"POST",u,n,15)}))}},{key:"wo",value:function(e,t,n){var r=Ase(),a=[this.ro,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=M9(),o=P9(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(s.xmlHttpFactory=new W9({})),this.ho(s.initMessageHeaders,t,n),s.encodeInitMessageHeaders=!0;var u=a.join("");Y9(Ose,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(u),s);var c=i.createWebChannel(u,s),l=!1,d=!1,f=new Dse({Wr:function(t){d?Y9(Ose,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(l||(Y9(Ose,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),c.open(),l=!0),Y9(Ose,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),c.send(t))},Hr:function(){return c.close()}}),h=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return h(c,j9.EventType.OPEN,(function(){d||Y9(Ose,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),h(c,j9.EventType.CLOSE,(function(){d||(d=!0,Y9(Ose,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.so())})),h(c,j9.EventType.ERROR,(function(t){d||(d=!0,J9(Ose,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),f.so(new iee(aee.UNAVAILABLE,"The operation could not be completed")))})),h(c,j9.EventType.MESSAGE,(function(t){var n;if(!d){var a=t.data[0];nee(!!a);var i=a,o=i.error||(null===(n=i[0])||void 0===n?void 0:n.error);if(o){Y9(Ose,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);var s=o.status,u=function(e){var t=uae[e];if(void 0!==t)return gae(t)}(s),l=o.message;void 0===u&&(u=aee.INTERNAL,l="Unknown error status: "+s+" with message "+o.message),d=!0,f.so(new iee(u,l)),c.close()}else Y9(Ose,"RPC '".concat(e,"' stream ").concat(r," received:"),a),f.io(a)}})),h(o,V9.STAT_EVENT,(function(t){t.stat===U9.PROXY?Y9(Ose,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===U9.NOPROXY&&Y9(Ose,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((function(){f.no()}),0),f}}]),n}(function(){function e(t){(0,Se.Z)(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.ro=n+"://"+t.host,this.oo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return(0,Te.Z)(e,[{key:"uo",get:function(){return!1}},{key:"co",value:function(e,t,n,r,a){var i=Ase(),o=this.ao(e,t);Y9("RestConnection","Sending RPC '".concat(e,"' ").concat(i,":"),o,n);var s={};return this.ho(s,r,a),this.lo(e,o,s,n).then((function(t){return Y9("RestConnection","Received RPC '".concat(e,"' ").concat(i,": "),t),t}),(function(t){throw J9("RestConnection","RPC '".concat(e,"' ").concat(i," failed with error: "),t,"url: ",o,"request:",n),t}))}},{key:"fo",value:function(e,t,n,r,a,i){return this.co(e,t,n,r,a)}},{key:"ho",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+$9,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"ao",value:function(e,t){var n=Rse[e];return"".concat(this.ro,"/v1/").concat(t,":").concat(n)}}]),e}());function Fse(){return"undefined"!=typeof window?window:null}function Mse(){return"undefined"!=typeof document?document:null}function Pse(e){return new Rae(e,!0)}var zse=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;(0,Se.Z)(this,e),this.Ws=t,this.timerId=n,this._o=r,this.mo=a,this.yo=i,this.po=0,this.Io=null,this.To=Date.now(),this.reset()}return(0,Te.Z)(e,[{key:"reset",value:function(){this.po=0}},{key:"Eo",value:function(){this.po=this.yo}},{key:"Ao",value:function(e){var t=this;this.cancel();var n=Math.floor(this.po+this.Ro()),r=Math.max(0,Date.now()-this.To),a=Math.max(0,n-r);a>0&&Y9("ExponentialBackoff","Backing off for ".concat(a," ms (base delay: ").concat(this.po," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.Io=this.Ws.enqueueAfterDelay(this.timerId,a,(function(){return t.To=Date.now(),e()})),this.po*=this.mo,this.po<this._o&&(this.po=this._o),this.po>this.yo&&(this.po=this.yo)}},{key:"vo",value:function(){null!==this.Io&&(this.Io.skipDelay(),this.Io=null)}},{key:"cancel",value:function(){null!==this.Io&&(this.Io.cancel(),this.Io=null)}},{key:"Ro",value:function(){return(Math.random()-.5)*this.po}}]),e}(),Bse=function(){function e(t,n,r,a,i,o,s,u){(0,Se.Z)(this,e),this.Ws=t,this.bo=r,this.Po=a,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=u,this.state=0,this.Vo=0,this.So=null,this.Do=null,this.stream=null,this.Co=new zse(t,n)}return(0,Te.Z)(e,[{key:"xo",value:function(){return 1===this.state||5===this.state||this.No()}},{key:"No",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.ko()}},{key:"stop",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.xo(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Oo",value:function(){this.state=0,this.Co.reset()}},{key:"$o",value:function(){var e=this;this.No()&&null===this.So&&(this.So=this.Ws.enqueueAfterDelay(this.bo,6e4,(function(){return e.Mo()})))}},{key:"Fo",value:function(e){this.Bo(),this.stream.send(e)}},{key:"Mo",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.No()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Bo",value:function(){this.So&&(this.So.cancel(),this.So=null)}},{key:"Lo",value:function(){this.Do&&(this.Do.cancel(),this.Do=null)}},{key:"close",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t,n){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Bo(),this.Lo(),this.Co.cancel(),this.Vo++,4!==t?this.Co.reset():n&&n.code===aee.RESOURCE_EXHAUSTED?(Q9(n.toString()),Q9("Using maximum backoff delay to prevent overloading the backend."),this.Co.Eo()):n&&n.code===aee.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.qo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Zr(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"qo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Uo(this.Vo),n=this.Vo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=(0,ge.Z)(t,2),a=r[0],i=r[1];e.Vo===n&&e.Ko(a,i)}),(function(n){t((function(){var t=new iee(aee.UNKNOWN,"Fetching auth token failed: "+n.message);return e.Go(t)}))}))}},{key:"Ko",value:function(e,t){var n=this,r=this.Uo(this.Vo);this.stream=this.Qo(e,t),this.stream.Jr((function(){r((function(){return n.state=2,n.Do=n.Ws.enqueueAfterDelay(n.Po,1e4,(function(){return n.No()&&(n.state=3),Promise.resolve()})),n.listener.Jr()}))})),this.stream.Zr((function(e){r((function(){return n.Go(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"ko",value:function(){var e=this;this.state=5,this.Co.Ao((0,ke.Z)((0,be.Z)().mark((function t(){return(0,be.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"Go",value:function(e){return Y9("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Uo",value:function(e){var t=this;return function(n){t.Ws.enqueueAndForget((function(){return t.Vo===e?n():(Y9("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),Vse=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e,r,a,i,o,s){var u;return(0,Se.Z)(this,n),(u=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,a,i,s)).serializer=o,u}return(0,Te.Z)(n,[{key:"Qo",value:function(e,t){return this.connection.wo("Listen",e,t)}},{key:"onMessage",value:function(e){this.Co.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:tee()}(t.targetChange.targetChangeType||"NO_CHANGE"),a=t.targetChange.targetIds||[],i=function(e,t){return e.useProto3Json?(nee(void 0===t||"string"==typeof t),Ute.fromBase64String(t||"")):(nee(void 0===t||t instanceof Uint8Array),Ute.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,s=o&&function(e){var t=void 0===e.code?aee.UNKNOWN:gae(e.code);return new iee(t,e.message||"")}(o);n=new Sae(r,a,i,s||null)}else if("documentChange"in t){t.documentChange;var u=t.documentChange;u.document,u.document.name,u.document.updateTime;var c=Bae(e,u.document.name),l=Fae(u.document.updateTime),d=u.document.createTime?Fae(u.document.createTime):wee.min(),f=new bne({mapValue:{fields:u.document.fields}}),h=wne.newFoundDocument(c,l,d,f),p=u.targetIds||[],v=u.removedTargetIds||[];n=new xae(p,v,h.key,h)}else if("documentDelete"in t){t.documentDelete;var m=t.documentDelete;m.document;var g=Bae(e,m.document),y=m.readTime?Fae(m.readTime):wee.min(),b=wne.newNoDocument(g,y),k=m.removedTargetIds||[];n=new xae([],k,b.key,b)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var x=Bae(e,w.document),I=w.removedTargetIds||[];n=new xae([],I,x,null)}else{if(!("filter"in t))return tee();t.filter;var S=t.filter;S.targetId;var T=S.count||0,E=new vae(T),N=S.targetId;n=new Iae(N,E)}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return wee.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?wee.min():t.readTime?Fae(t.readTime):wee.min()}(e);return this.listener.zo(t,n)}},{key:"jo",value:function(e){var t={};t.database=Wae(this.serializer),t.addTarget=function(e,t){var n,r=t.target;return(n=Xne(r)?{documents:Xae(e,r)}:{query:Yae(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=Oae(e,t.resumeToken):t.snapshotVersion.compareTo(wee.min())>0&&(n.readTime=Dae(e,t.snapshotVersion.toTimestamp())),n}(this.serializer,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return tee()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.Fo(t)}},{key:"Wo",value:function(e){var t={};t.database=Wae(this.serializer),t.removeTarget=e,this.Fo(t)}}]),n}(Bse),Use=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e,r,a,i,o,s){var u;return(0,Se.Z)(this,n),(u=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,a,i,s)).serializer=o,u.Ho=!1,u}return(0,Te.Z)(n,[{key:"Jo",get:function(){return this.Ho}},{key:"start",value:function(){this.Ho=!1,this.lastStreamToken=void 0,BN((0,zN.Z)(n.prototype),"start",this).call(this)}},{key:"qo",value:function(){this.Ho&&this.Yo([])}},{key:"Qo",value:function(e,t){return this.connection.wo("Write",e,t)}},{key:"onMessage",value:function(e){if(nee(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Ho){this.Co.reset();var t=function(e,t){return e&&e.length>0?(nee(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?Fae(e.updateTime):Fae(t);return n.isEqual(wee.min())&&(n=Fae(t)),new $re(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=Fae(e.commitTime);return this.listener.Zo(n,t)}return nee(!e.writeResults||0===e.writeResults.length),this.Ho=!0,this.listener.Xo()}},{key:"tu",value:function(){var e={};e.database=Wae(this.serializer),this.Fo(e)}},{key:"Yo",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return $ae(t.serializer,e)}))};this.Fo(n)}}]),n}(Bse),Wse=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e,r,a,i){var o;return(0,Se.Z)(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.connection=a,o.serializer=i,o.eu=!1,o}return(0,Te.Z)(n,[{key:"nu",value:function(){if(this.eu)throw new iee(aee.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"co",value:function(e,t,n){var r=this;return this.nu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var i=(0,ge.Z)(a,2),o=i[0],s=i[1];return r.connection.co(e,t,n,o,s)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===aee.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new iee(aee.UNKNOWN,e.toString())}))}},{key:"fo",value:function(e,t,n,r){var a=this;return this.nu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var o=(0,ge.Z)(i,2),s=o[0],u=o[1];return a.connection.fo(e,t,n,s,u,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===aee.UNAUTHENTICATED&&(a.authCredentials.invalidateToken(),a.appCheckCredentials.invalidateToken()),e):new iee(aee.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.eu=!0}}]),n}(function(){return(0,Te.Z)((function e(){(0,Se.Z)(this,e)}))}());var jse=function(){function e(t,n){(0,Se.Z)(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.su=0,this.iu=null,this.ru=!0}return(0,Te.Z)(e,[{key:"ou",value:function(){var e=this;0===this.su&&(this.uu("Unknown"),this.iu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.iu=null,e.cu("Backend didn't respond within 10 seconds."),e.uu("Offline"),Promise.resolve()})))}},{key:"au",value:function(e){"Online"===this.state?this.uu("Unknown"):(this.su++,this.su>=1&&(this.hu(),this.cu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.uu("Offline")))}},{key:"set",value:function(e){this.hu(),this.su=0,"Online"===e&&(this.ru=!1),this.uu(e)}},{key:"uu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"cu",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.ru?(Q9(t),this.ru=!1):Y9("OnlineStateTracker",t)}},{key:"hu",value:function(){null!==this.iu&&(this.iu.cancel(),this.iu=null)}}]),e}(),Gse=(0,Te.Z)((function e(t,n,r,a,i){var o=this;(0,Se.Z)(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.lu=[],this.fu=new Map,this.du=new Set,this.wu=[],this._u=i,this._u.qr((function(e){r.enqueueAndForget((0,ke.Z)((0,be.Z)().mark((function e(){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=nue(o),!e.t0){e.next=5;break}return Y9("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){var n;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=ree(t)).du.add(4),e.next=4,$se(n);case 4:return n.mu.set("Unknown"),n.du.delete(4),e.next=8,Hse(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.mu=new jse(r,a)}));function Hse(e){return qse.apply(this,arguments)}function qse(){return qse=(0,ke.Z)((0,be.Z)().mark((function e(t){var n,r,a;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!nue(t)){e.next=18;break}n=(0,Ht.Z)(t.wu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return a=r.value,e.next=8,a(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),qse.apply(this,arguments)}function $se(e){return Kse.apply(this,arguments)}function Kse(){return Kse=(0,ke.Z)((0,be.Z)().mark((function e(t){var n,r,a;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=(0,Ht.Z)(t.wu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return a=r.value,e.next=7,a(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),Kse.apply(this,arguments)}function Xse(e,t){var n=ree(e);n.fu.has(t.targetId)||(n.fu.set(t.targetId,t),tue(n)?eue(n):Aue(n).No()&&Qse(n,t))}function Yse(e,t){var n=ree(e),r=Aue(n);n.fu.delete(t),r.No()&&Jse(n,t),0===n.fu.size&&(r.No()?r.$o():nue(n)&&n.mu.set("Unknown"))}function Qse(e,t){e.gu.Ot(t.targetId),Aue(e).jo(t)}function Jse(e,t){e.gu.Ot(t),Aue(e).Wo(t)}function eue(e){e.gu=new Eae({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},ne:function(t){return e.fu.get(t)||null}}),Aue(e).start(),e.mu.ou()}function tue(e){return nue(e)&&!Aue(e).xo()&&e.fu.size>0}function nue(e){return 0===ree(e).du.size}function rue(e){e.gu=void 0}function aue(e){return iue.apply(this,arguments)}function iue(){return iue=(0,ke.Z)((0,be.Z)().mark((function e(t){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.fu.forEach((function(e,n){Qse(t,e)}));case 1:case"end":return e.stop()}}),e)}))),iue.apply(this,arguments)}function oue(e,t){return sue.apply(this,arguments)}function sue(){return sue=(0,ke.Z)((0,be.Z)().mark((function e(t,n){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:rue(t),tue(t)?(t.mu.au(n),eue(t)):t.mu.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),sue.apply(this,arguments)}function uue(e,t,n){return cue.apply(this,arguments)}function cue(){return cue=(0,ke.Z)((0,be.Z)().mark((function e(t,n,r){var a;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.mu.set("Online"),!(n instanceof Sae&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t,n){var r,a,i,o;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,a=(0,Ht.Z)(n.targetIds),e.prev=2,a.s();case 4:if((i=a.n()).done){e.next=14;break}if(o=i.value,e.t0=t.fu.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.fu.delete(o),t.gu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),a.e(e.t1);case 19:return e.prev=19,a.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),Y9("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,lue(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof xae?t.gu.Kt(n):n instanceof Iae?t.gu.Jt(n):t.gu.zt(n),r.isEqual(wee.min())){e.next=29;break}return e.prev=14,e.next=17,rse(t.localStore);case 17:if(a=e.sent,e.t1=r.compareTo(a)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.gu.Xt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var a=e.fu.get(r);a&&e.fu.set(r,a.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.fu.get(t);if(n){e.fu.set(t,n.withResumeToken(Ute.EMPTY_BYTE_STRING,n.snapshotVersion)),Jse(e,t);var r=new uie(n.target,t,1,n.sequenceNumber);Qse(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),Y9("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,lue(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),cue.apply(this,arguments)}function lue(e,t,n){return due.apply(this,arguments)}function due(){return due=(0,ke.Z)((0,be.Z)().mark((function e(t,n,r){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Gee(n)){e.next=2;break}throw n;case 2:return t.du.add(1),e.next=5,$se(t);case 5:t.mu.set("Offline"),r||(r=function(){return rse(t.localStore)}),t.asyncQueue.enqueueRetryable((0,ke.Z)((0,be.Z)().mark((function e(){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Y9("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.du.delete(1),e.next=6,Hse(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),due.apply(this,arguments)}function fue(e,t){return t().catch((function(n){return lue(e,n,t)}))}function hue(e){return pue.apply(this,arguments)}function pue(){return pue=(0,ke.Z)((0,be.Z)().mark((function e(t){var n,r,a,i;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=ree(t),r=Rue(n),a=n.lu.length>0?n.lu[n.lu.length-1].batchId:-1;case 2:if(!vue(n)){e.next=19;break}return e.prev=3,e.next=6,ose(n.localStore,a);case 6:if(null!==(i=e.sent)){e.next=10;break}return 0===n.lu.length&&r.$o(),e.abrupt("break",19);case 10:a=i.batchId,mue(n,i),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,lue(n,e.t0);case 17:e.next=2;break;case 19:gue(n)&&yue(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),pue.apply(this,arguments)}function vue(e){return nue(e)&&e.lu.length<10}function mue(e,t){e.lu.push(t);var n=Rue(e);n.No()&&n.Jo&&n.Yo(t.mutations)}function gue(e){return nue(e)&&!Rue(e).xo()&&e.lu.length>0}function yue(e){Rue(e).start()}function bue(e){return kue.apply(this,arguments)}function kue(){return kue=(0,ke.Z)((0,be.Z)().mark((function e(t){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Rue(t).tu();case 1:case"end":return e.stop()}}),e)}))),kue.apply(this,arguments)}function wue(e){return xue.apply(this,arguments)}function xue(){return xue=(0,ke.Z)((0,be.Z)().mark((function e(t){var n,r,a,i;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Rue(t),r=(0,Ht.Z)(t.lu);try{for(r.s();!(a=r.n()).done;)i=a.value,n.Yo(i.mutations)}catch(yhe){r.e(yhe)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),xue.apply(this,arguments)}function Iue(e,t,n){return Sue.apply(this,arguments)}function Sue(){return Sue=(0,ke.Z)((0,be.Z)().mark((function e(t,n,r){var a,i;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.lu.shift(),i=hae.from(a,n,r),e.next=3,fue(t,(function(){return t.remoteSyncer.applySuccessfulWrite(i)}));case 3:return e.next=5,hue(t);case 5:case"end":return e.stop()}}),e)}))),Sue.apply(this,arguments)}function Tue(e,t){return Eue.apply(this,arguments)}function Eue(){return Eue=(0,ke.Z)((0,be.Z)().mark((function e(t,n){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&Rue(t).Jo,!e.t0){e.next=4;break}return e.next=4,function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t,n){var r,a;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!mae(a=n.code)||a===aee.ABORTED){e.next=7;break}return r=t.lu.shift(),Rue(t).Oo(),e.next=5,fue(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,hue(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:gue(t)&&yue(t);case 5:case"end":return e.stop()}}),e)}))),Eue.apply(this,arguments)}function Nue(e,t){return Cue.apply(this,arguments)}function Cue(){return Cue=(0,ke.Z)((0,be.Z)().mark((function e(t,n){var r,a;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=ree(t)).asyncQueue.verifyOperationInProgress(),Y9("RemoteStore","RemoteStore received new credentials"),a=nue(r),r.du.add(3),e.next=6,$se(r);case 6:return a&&r.mu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.du.delete(3),e.next=12,Hse(r);case 12:case"end":return e.stop()}}),e)}))),Cue.apply(this,arguments)}function Zue(e,t){return _ue.apply(this,arguments)}function _ue(){return _ue=(0,ke.Z)((0,be.Z)().mark((function e(t,n){var r;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=ree(t),!n){e.next=7;break}return r.du.delete(2),e.next=5,Hse(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.du.add(2),e.next=12,$se(r);case 12:r.mu.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),_ue.apply(this,arguments)}function Aue(e){return e.yu||(e.yu=function(e,t,n){var r=ree(e);return r.nu(),new Vse(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Jr:aue.bind(null,e),Zr:oue.bind(null,e),zo:uue.bind(null,e)}),e.wu.push(function(){var t=(0,ke.Z)((0,be.Z)().mark((function t(n){return(0,be.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.yu.Oo(),tue(e)?eue(e):e.mu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.yu.stop();case 6:rue(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.yu}function Rue(e){return e.pu||(e.pu=function(e,t,n){var r=ree(e);return r.nu(),new Use(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Jr:bue.bind(null,e),Zr:Tue.bind(null,e),Xo:wue.bind(null,e),Zo:Iue.bind(null,e)}),e.wu.push(function(){var t=(0,ke.Z)((0,be.Z)().mark((function t(n){return(0,be.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.pu.Oo(),t.next=4,hue(e);case 4:t.next=9;break;case 6:return t.next=8,e.pu.stop();case 8:e.lu.length>0&&(Y9("RemoteStore","Stopping write stream with ".concat(e.lu.length," pending writes")),e.lu=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.pu}var Due=function(){function e(t,n,r,a,i){(0,Se.Z)(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=a,this.removalCallback=i,this.deferred=new oee,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return(0,Te.Z)(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new iee(aee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,a,i){var o=new e(t,n,Date.now()+r,a,i);return o.start(r),o}}]),e}();function Oue(e,t){if(Q9("AsyncQueue","".concat(t,": ").concat(e)),Gee(e))return new iee(aee.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var Lue=function(){function e(t){(0,Se.Z)(this,e),this.comparator=t?function(e,n){return t(e,n)||Eee.comparator(e.key,n.key)}:function(e,t){return Eee.comparator(e.key,t.key)},this.keyedMap=xre(),this.sortedSet=new Ote(this.comparator)}return(0,Te.Z)(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var a=n.getNext().key,i=r.getNext().key;if(!a.isEqual(i))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),Fue=function(){function e(){(0,Se.Z)(this,e),this.Iu=new Ote(Eee.comparator)}return(0,Te.Z)(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Iu.get(t);n?0!==e.type&&3===n.type?this.Iu=this.Iu.insert(t,e):3===e.type&&1!==n.type?this.Iu=this.Iu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Iu=this.Iu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Iu=this.Iu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Iu=this.Iu.remove(t):1===e.type&&2===n.type?this.Iu=this.Iu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Iu=this.Iu.insert(t,{type:2,doc:e.doc}):tee():this.Iu=this.Iu.insert(t,e)}},{key:"Tu",value:function(){var e=[];return this.Iu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),Mue=function(){function e(t,n,r,a,i,o,s,u,c){(0,Se.Z)(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=u,this.hasCachedResults=c}return(0,Te.Z)(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&dre(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,a,i){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,Lue.emptySet(n),o,r,a,!0,!1,i)}}]),e}(),Pue=(0,Te.Z)((function e(){(0,Se.Z)(this,e),this.Eu=void 0,this.listeners=[]})),zue=(0,Te.Z)((function e(){(0,Se.Z)(this,e),this.queries=new yre((function(e){return fre(e)}),dre),this.onlineState="Unknown",this.Au=new Set}));function Bue(e,t){return Vue.apply(this,arguments)}function Vue(){return Vue=(0,ke.Z)((0,be.Z)().mark((function e(t,n){var r,a,i,o,s;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=ree(t),a=n.query,i=!1,(o=r.queries.get(a))||(i=!0,o=new Pue),!i){e.next=13;break}return e.prev=3,e.next=6,r.onListen(a);case 6:o.Eu=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),s=Oue(e.t0,"Initialization of query '".concat(hre(n.query),"' failed")),e.abrupt("return",void n.onError(s));case 13:r.queries.set(a,o),o.listeners.push(n),n.Ru(r.onlineState),o.Eu&&n.vu(o.Eu)&&Hue(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),Vue.apply(this,arguments)}function Uue(e,t){return Wue.apply(this,arguments)}function Wue(){return Wue=(0,ke.Z)((0,be.Z)().mark((function e(t,n){var r,a,i,o,s;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=ree(t),a=n.query,i=!1,(o=r.queries.get(a))&&(s=o.listeners.indexOf(n))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),!i){e.next=6;break}return e.abrupt("return",(r.queries.delete(a),r.onUnlisten(a)));case 6:case"end":return e.stop()}}),e)}))),Wue.apply(this,arguments)}function jue(e,t){var n,r=ree(e),a=!1,i=(0,Ht.Z)(t);try{for(i.s();!(n=i.n()).done;){var o=n.value,s=o.query,u=r.queries.get(s);if(u){var c,l=(0,Ht.Z)(u.listeners);try{for(l.s();!(c=l.n()).done;){c.value.vu(o)&&(a=!0)}}catch(yhe){l.e(yhe)}finally{l.f()}u.Eu=o}}}catch(yhe){i.e(yhe)}finally{i.f()}a&&Hue(r)}function Gue(e,t,n){var r=ree(e),a=r.queries.get(t);if(a){var i,o=(0,Ht.Z)(a.listeners);try{for(o.s();!(i=o.n()).done;){i.value.onError(n)}}catch(yhe){o.e(yhe)}finally{o.f()}}r.queries.delete(t)}function Hue(e){e.Au.forEach((function(e){e.next()}))}var que=function(){function e(t,n,r){(0,Se.Z)(this,e),this.query=t,this.bu=n,this.Pu=!1,this.Vu=null,this.onlineState="Unknown",this.options=r||{}}return(0,Te.Z)(e,[{key:"vu",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=(0,Ht.Z)(e.docChanges);try{for(r.s();!(t=r.n()).done;){var a=t.value;3!==a.type&&n.push(a)}}catch(yhe){r.e(yhe)}finally{r.f()}e=new Mue(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var i=!1;return this.Pu?this.Su(e)&&(this.bu.next(e),i=!0):this.Du(e,this.onlineState)&&(this.Cu(e),i=!0),this.Vu=e,i}},{key:"onError",value:function(e){this.bu.error(e)}},{key:"Ru",value:function(e){this.onlineState=e;var t=!1;return this.Vu&&!this.Pu&&this.Du(this.Vu,e)&&(this.Cu(this.Vu),t=!0),t}},{key:"Du",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.xu||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"Su",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Vu&&this.Vu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Cu",value:function(e){e=Mue.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Pu=!0,this.bu.next(e)}}]),e}(),$ue=function(){function e(t,n){(0,Se.Z)(this,e),this.Nu=t,this.byteLength=n}return(0,Te.Z)(e,[{key:"ku",value:function(){return"metadata"in this.Nu}}]),e}(),Kue=function(){function e(t){(0,Se.Z)(this,e),this.serializer=t}return(0,Te.Z)(e,[{key:"Hi",value:function(e){return Bae(this.serializer,e)}},{key:"Ji",value:function(e){return e.metadata.exists?Hae(this.serializer,e.document,!1):wne.newNoDocument(this.Hi(e.metadata.name),this.Yi(e.metadata.readTime))}},{key:"Yi",value:function(e){return Fae(e)}}]),e}(),Xue=function(){function e(t,n,r){(0,Se.Z)(this,e),this.Ou=t,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Yue(t)}return(0,Te.Z)(e,[{key:"$u",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.Nu.namedQuery)this.queries.push(e.Nu.namedQuery);else if(e.Nu.documentMetadata){this.documents.push({metadata:e.Nu.documentMetadata}),e.Nu.documentMetadata.exists||++t;var n=Iee.fromString(e.Nu.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.Nu.document&&(this.documents[this.documents.length-1].document=e.Nu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"Mu",value:function(e){var t,n=new Map,r=new Kue(this.serializer),a=(0,Ht.Z)(e);try{for(a.s();!(t=a.n()).done;){var i=t.value;if(i.metadata.queries){var o,s=r.Hi(i.metadata.name),u=(0,Ht.Z)(i.metadata.queries);try{for(u.s();!(o=u.n()).done;){var c=o.value,l=(n.get(c)||Zre()).add(s);n.set(c,l)}}catch(yhe){u.e(yhe)}finally{u.f()}}}}catch(yhe){a.e(yhe)}finally{a.f()}return n}},{key:"complete",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){var t,n,r,a,i;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pse(this.localStore,new Kue(this.serializer),this.documents,this.Ou.id);case 2:t=e.sent,n=this.Mu(this.documents),r=(0,Ht.Z)(this.queries),e.prev=5,r.s();case 7:if((a=r.n()).done){e.next=13;break}return i=a.value,e.next=11,mse(this.localStore,i,n.get(i.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Fu:this.collectionGroups,Bu:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function Yue(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var Que=(0,Te.Z)((function e(t){(0,Se.Z)(this,e),this.key=t})),Jue=(0,Te.Z)((function e(t){(0,Se.Z)(this,e),this.key=t})),ece=function(){function e(t,n){(0,Se.Z)(this,e),this.query=t,this.Lu=n,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Uu=Zre(),this.mutatedKeys=Zre(),this.Ku=mre(t),this.Gu=new Lue(this.Ku)}return(0,Te.Z)(e,[{key:"Qu",get:function(){return this.Lu}},{key:"zu",value:function(e,t){var n=this,r=t?t.ju:new Fue,a=t?t.Gu:this.Gu,i=t?t.mutatedKeys:this.mutatedKeys,o=a,s=!1,u="F"===this.query.limitType&&a.size===this.query.limit?a.last():null,c="L"===this.query.limitType&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((function(e,t){var l=a.get(e),d=pre(n.query,t)?t:null,f=!!l&&n.mutatedKeys.has(l.key),h=!!d&&(d.hasLocalMutations||n.mutatedKeys.has(d.key)&&d.hasCommittedMutations),p=!1;l&&d?l.data.isEqual(d.data)?f!==h&&(r.track({type:3,doc:d}),p=!0):n.Wu(l,d)||(r.track({type:2,doc:d}),p=!0,(u&&n.Ku(d,u)>0||c&&n.Ku(d,c)<0)&&(s=!0)):!l&&d?(r.track({type:0,doc:d}),p=!0):l&&!d&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(s=!0)),p&&(d?(o=o.add(d),i=h?i.add(e):i.delete(e)):(o=o.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),i=i.delete(l.key),r.track({type:1,doc:l})}return{Gu:o,ju:r,Mi:s,mutatedKeys:i}}},{key:"Wu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,a=this.Gu;this.Gu=e.Gu,this.mutatedKeys=e.mutatedKeys;var i=e.ju.Tu();i.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return tee()}};return n(e)-n(t)}(e.type,t.type)||r.Ku(e.doc,t.doc)})),this.Hu(n);var o=t?this.Ju():[],s=0===this.Uu.size&&this.current?1:0,u=s!==this.qu;return this.qu=s,0!==i.length||u?{snapshot:new Mue(this.query,e.Gu,a,i,e.mutatedKeys,0===s,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),Yu:o}:{Yu:o}}},{key:"Ru",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Gu:this.Gu,ju:new Fue,mutatedKeys:this.mutatedKeys,Mi:!1},!1)):{Yu:[]}}},{key:"Zu",value:function(e){return!this.Lu.has(e)&&!!this.Gu.has(e)&&!this.Gu.get(e).hasLocalMutations}},{key:"Hu",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Lu=t.Lu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Lu=t.Lu.delete(e)})),this.current=e.current)}},{key:"Ju",value:function(){var e=this;if(!this.current)return[];var t=this.Uu;this.Uu=Zre(),this.Gu.forEach((function(t){e.Zu(t.key)&&(e.Uu=e.Uu.add(t.key))}));var n=[];return t.forEach((function(t){e.Uu.has(t)||n.push(new Jue(t))})),this.Uu.forEach((function(e){t.has(e)||n.push(new Que(e))})),n}},{key:"Xu",value:function(e){this.Lu=e.Wi,this.Uu=Zre();var t=this.zu(e.documents);return this.applyChanges(t,!0)}},{key:"tc",value:function(){return Mue.fromInitialDocuments(this.query,this.Gu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}]),e}(),tce=(0,Te.Z)((function e(t,n,r){(0,Se.Z)(this,e),this.query=t,this.targetId=n,this.view=r})),nce=(0,Te.Z)((function e(t){(0,Se.Z)(this,e),this.key=t,this.ec=!1})),rce=function(){function e(t,n,r,a,i,o){(0,Se.Z)(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=a,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.nc={},this.sc=new yre((function(e){return fre(e)}),dre),this.ic=new Map,this.rc=new Set,this.oc=new Ote(Eee.comparator),this.uc=new Map,this.cc=new Ooe,this.ac={},this.hc=new Map,this.lc=loe.bn(),this.onlineState="Unknown",this.fc=void 0}return(0,Te.Z)(e,[{key:"isPrimaryClient",get:function(){return!0===this.fc}}]),e}();function ace(e,t){return ice.apply(this,arguments)}function ice(){return ice=(0,ke.Z)((0,be.Z)().mark((function e(t,n){var r,a,i,o,s,u;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Yce(t),!(o=r.sc.get(n))){e.next=6;break}a=o.targetId,r.sharedClientState.addLocalQueryTarget(a),i=o.view.tc(),e.next=15;break;case 6:return e.next=8,sse(r.localStore,ure(n));case 8:return s=e.sent,r.isPrimaryClient&&Xse(r.remoteStore,s),u=r.sharedClientState.addLocalQueryTarget(s.targetId),a=s.targetId,e.next=14,oce(r,n,a,"current"===u,s.resumeToken);case 14:i=e.sent;case 15:return e.abrupt("return",i);case 16:case"end":return e.stop()}}),e)}))),ice.apply(this,arguments)}function oce(e,t,n,r,a){return sce.apply(this,arguments)}function sce(){return sce=(0,ke.Z)((0,be.Z)().mark((function e(t,n,r,a,i){var o,s,u,c,l,d;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.dc=function(e,n,r){return function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t,n,r,a){var i,o,s;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.view.zu(r),e.t0=i.Mi,!e.t0){e.next=6;break}return e.next=5,lse(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.zu(t,i)}));case 5:i=e.sent;case 6:return o=a&&a.targetChanges.get(n.targetId),s=n.view.applyChanges(i,t.isPrimaryClient,o),e.abrupt("return",(Nce(t,n.targetId,s.Yu),s.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,lse(t.localStore,n,!0);case 3:return o=e.sent,s=new ece(n,o.Wi),u=s.zu(o.documents),c=wae.createSynthesizedTargetChangeForCurrentChange(r,a&&"Offline"!==t.onlineState,i),l=s.applyChanges(u,t.isPrimaryClient,c),Nce(t,r,l.Yu),d=new tce(n,r,s),e.abrupt("return",(t.sc.set(n,d),t.ic.has(r)?t.ic.get(r).push(n):t.ic.set(r,[n]),l.snapshot));case 11:case"end":return e.stop()}}),e)}))),sce.apply(this,arguments)}function uce(e,t){return cce.apply(this,arguments)}function cce(){return cce=(0,ke.Z)((0,be.Z)().mark((function e(t,n){var r,a,i;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=ree(t),a=r.sc.get(n),!((i=r.ic.get(a.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.ic.set(a.targetId,i.filter((function(e){return!dre(e,n)}))),void r.sc.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(a.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(a.targetId),e.t0){e.next=9;break}return e.next=9,use(r.localStore,a.targetId,!1).then((function(){r.sharedClientState.clearQueryState(a.targetId),Yse(r.remoteStore,a.targetId),Tce(r,a.targetId)})).catch(Pee);case 9:e.next=14;break;case 11:return Tce(r,a.targetId),e.next=14,use(r.localStore,a.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),cce.apply(this,arguments)}function lce(e,t,n){return dce.apply(this,arguments)}function dce(){return dce=(0,ke.Z)((0,be.Z)().mark((function e(t,n,r){var a,i,o;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Qce(t),e.prev=1,e.next=4,function(e,t){var n,r,a=ree(e),i=kee.now(),o=t.reduce((function(e,t){return e.add(t.key)}),Zre());return a.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var s=kre(),u=Zre();return a.Ki.getEntries(e,o).next((function(e){(s=e).forEach((function(e,t){t.isValidDocument()||(u=u.add(e))}))})).next((function(){return a.localDocuments.getOverlayedDocuments(e,s)})).next((function(r){n=r;var o,s=[],u=(0,Ht.Z)(t);try{for(u.s();!(o=u.n()).done;){var c=o.value,l=tae(c,n.get(c.key).overlayedDocument);null!=l&&s.push(new aae(c.key,l,kne(l.value.mapValue),Kre.exists(!0)))}}catch(yhe){u.e(yhe)}finally{u.f()}return a.mutationQueue.addMutationBatch(e,i,s,t)})).next((function(t){r=t;var i=t.applyToLocalDocumentSet(n,u);return a.documentOverlayCache.saveOverlays(e,t.batchId,i)}))})).then((function(){return{batchId:r.batchId,changes:Ire(n)}}))}(a.localStore,n);case 4:return i=e.sent,a.sharedClientState.addPendingMutation(i.batchId),function(e,t,n){var r=e.ac[e.currentUser.toKey()];r||(r=new Ote(gee)),r=r.insert(t,n),e.ac[e.currentUser.toKey()]=r}(a,i.batchId,r),e.next=9,_ce(a,i.changes);case 9:return e.next=11,hue(a.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=Oue(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),dce.apply(this,arguments)}function fce(e,t){return hce.apply(this,arguments)}function hce(){return hce=(0,ke.Z)((0,be.Z)().mark((function e(t,n){var r,a;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ree(t),e.prev=1,e.next=4,ase(r.localStore,n);case 4:return a=e.sent,n.targetChanges.forEach((function(e,t){var n=r.uc.get(t);n&&(nee(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.ec=!0:e.modifiedDocuments.size>0?nee(n.ec):e.removedDocuments.size>0&&(nee(n.ec),n.ec=!1))})),e.next=8,_ce(r,a,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Pee(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),hce.apply(this,arguments)}function pce(e,t,n){var r=ree(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var a=[];r.sc.forEach((function(e,n){var r=n.view.Ru(t);r.snapshot&&a.push(r.snapshot)})),function(e,t){var n=ree(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var a,i=(0,Ht.Z)(n.listeners);try{for(i.s();!(a=i.n()).done;){a.value.Ru(t)&&(r=!0)}}catch(yhe){i.e(yhe)}finally{i.f()}})),r&&Hue(n)}(r.eventManager,t),a.length&&r.nc.zo(a),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function vce(e,t,n){return mce.apply(this,arguments)}function mce(){return mce=(0,ke.Z)((0,be.Z)().mark((function e(t,n,r){var a,i,o,s,u,c;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((a=ree(t)).sharedClientState.updateQueryState(n,"rejected",r),i=a.uc.get(n),!(o=i&&i.key)){e.next=14;break}return s=(s=new Ote(Eee.comparator)).insert(o,wne.newNoDocument(o,wee.min())),u=Zre().add(o),c=new kae(wee.min(),new Map,new Mte(gee),s,u),e.next=9,fce(a,c);case 9:a.oc=a.oc.remove(o),a.uc.delete(n),Zce(a),e.next=16;break;case 14:return e.next=16,use(a.localStore,n,!1).then((function(){return Tce(a,n,r)})).catch(Pee);case 16:case"end":return e.stop()}}),e)}))),mce.apply(this,arguments)}function gce(e,t){return yce.apply(this,arguments)}function yce(){return yce=(0,ke.Z)((0,be.Z)().mark((function e(t,n){var r,a,i;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ree(t),a=n.batch.batchId,e.prev=1,e.next=4,nse(r.localStore,n);case 4:return i=e.sent,Sce(r,a,null),Ice(r,a),r.sharedClientState.updateMutationState(a,"acknowledged"),e.next=10,_ce(r,i);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Pee(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),yce.apply(this,arguments)}function bce(e,t,n){return kce.apply(this,arguments)}function kce(){return kce=(0,ke.Z)((0,be.Z)().mark((function e(t,n,r){var a,i;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=ree(t),e.prev=1,e.next=4,function(e,t){var n=ree(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return nee(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(a.localStore,n);case 4:return i=e.sent,Sce(a,n,r),Ice(a,n),a.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,_ce(a,i);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Pee(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),kce.apply(this,arguments)}function wce(e,t){return xce.apply(this,arguments)}function xce(){return xce=(0,ke.Z)((0,be.Z)().mark((function e(t,n){var r,a,i,o;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return nue((r=ree(t)).remoteStore)||Y9("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=ree(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(a=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(i=r.hc.get(a)||[]).push(n),r.hc.set(a,i),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=Oue(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),xce.apply(this,arguments)}function Ice(e,t){(e.hc.get(t)||[]).forEach((function(e){e.resolve()})),e.hc.delete(t)}function Sce(e,t,n){var r=ree(e),a=r.ac[r.currentUser.toKey()];if(a){var i=a.get(t);i&&(n?i.reject(n):i.resolve(),a=a.remove(t)),r.ac[r.currentUser.toKey()]=a}}function Tce(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,a=(0,Ht.Z)(e.ic.get(t));try{for(a.s();!(r=a.n()).done;){var i=r.value;e.sc.delete(i),n&&e.nc.wc(i,n)}}catch(yhe){a.e(yhe)}finally{a.f()}e.ic.delete(t),e.isPrimaryClient&&e.cc.hs(t).forEach((function(t){e.cc.containsKey(t)||Ece(e,t)}))}function Ece(e,t){e.rc.delete(t.path.canonicalString());var n=e.oc.get(t);null!==n&&(Yse(e.remoteStore,n),e.oc=e.oc.remove(t),e.uc.delete(n),Zce(e))}function Nce(e,t,n){var r,a=(0,Ht.Z)(n);try{for(a.s();!(r=a.n()).done;){var i=r.value;i instanceof Que?(e.cc.addReference(i.key,t),Cce(e,i)):i instanceof Jue?(Y9("SyncEngine","Document no longer in limbo: "+i.key),e.cc.removeReference(i.key,t),e.cc.containsKey(i.key)||Ece(e,i.key)):tee()}}catch(yhe){a.e(yhe)}finally{a.f()}}function Cce(e,t){var n=t.key,r=n.path.canonicalString();e.oc.get(n)||e.rc.has(r)||(Y9("SyncEngine","New document in limbo: "+n),e.rc.add(r),Zce(e))}function Zce(e){for(;e.rc.size>0&&e.oc.size<e.maxConcurrentLimboResolutions;){var t=e.rc.values().next().value;e.rc.delete(t);var n=new Eee(Iee.fromString(t)),r=e.lc.next();e.uc.set(r,new nce(n)),e.oc=e.oc.insert(n,r),Xse(e.remoteStore,new uie(ure(nre(n.path)),r,2,Qee.ct))}}function _ce(e,t,n){return Ace.apply(this,arguments)}function Ace(){return Ace=(0,ke.Z)((0,be.Z)().mark((function e(t,n,r){var a,i,o,s;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=ree(t),i=[],o=[],s=[],e.t0=a.sc.isEmpty(),e.t0){e.next=9;break}return a.sc.forEach((function(e,t){s.push(a.dc(t,n,r).then((function(e){if((e||r)&&a.isPrimaryClient&&a.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){i.push(e);var n=Xoe.Di(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(s);case 6:return a.nc.zo(i),e.next=9,function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t,n){var r,a,i,o,s,u,c,l;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ree(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return Bee.forEach(n,(function(t){return Bee.forEach(t.Vi,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return Bee.forEach(t.Si,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),Gee(e.t0)){e.next=10;break}throw e.t0;case 10:Y9("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:a=(0,Ht.Z)(n);try{for(a.s();!(i=a.n()).done;)o=i.value,s=o.targetId,o.fromCache||(u=r.Li.get(s),c=u.snapshotVersion,l=u.withLastLimboFreeSnapshotVersion(c),r.Li=r.Li.insert(s,l))}catch(yhe){a.e(yhe)}finally{a.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(a.localStore,o);case 9:case"end":return e.stop()}}),e)}))),Ace.apply(this,arguments)}function Rce(e,t){return Dce.apply(this,arguments)}function Dce(){return Dce=(0,ke.Z)((0,be.Z)().mark((function e(t,n){var r,a;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=ree(t)).currentUser.isEqual(n)){e.next=11;break}return Y9("SyncEngine","User change. New user:",n.toKey()),e.next=5,ese(r.localStore,n);case 5:return a=e.sent,r.currentUser=n,function(e,t){e.hc.forEach((function(e){e.forEach((function(e){e.reject(new iee(aee.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.hc.clear()}(r),r.sharedClientState.handleUserChange(n,a.removedBatchIds,a.addedBatchIds),e.next=11,_ce(r,a.Qi);case 11:case"end":return e.stop()}}),e)}))),Dce.apply(this,arguments)}function Oce(e,t){var n=ree(e),r=n.uc.get(t);if(r&&r.ec)return Zre().add(r.key);var a=Zre(),i=n.ic.get(t);if(!i)return a;var o,s=(0,Ht.Z)(i);try{for(s.s();!(o=s.n()).done;){var u=o.value,c=n.sc.get(u);a=a.unionWith(c.view.Qu)}}catch(yhe){s.e(yhe)}finally{s.f()}return a}function Lce(e,t){return Fce.apply(this,arguments)}function Fce(){return Fce=(0,ke.Z)((0,be.Z)().mark((function e(t,n){var r,a,i;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ree(t),e.next=3,lse(r.localStore,n.query,!0);case 3:return a=e.sent,i=n.view.Xu(a),e.abrupt("return",(r.isPrimaryClient&&Nce(r,n.targetId,i.Yu),i));case 6:case"end":return e.stop()}}),e)}))),Fce.apply(this,arguments)}function Mce(e,t){return Pce.apply(this,arguments)}function Pce(){return Pce=(0,ke.Z)((0,be.Z)().mark((function e(t,n){var r;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ree(t),e.abrupt("return",fse(r.localStore,n).then((function(e){return _ce(r,e)})));case 2:case"end":return e.stop()}}),e)}))),Pce.apply(this,arguments)}function zce(e,t,n,r){return Bce.apply(this,arguments)}function Bce(){return Bce=(0,ke.Z)((0,be.Z)().mark((function e(t,n,r,a){var i,o;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ree(t),e.next=3,function(e,t){var n=ree(e),r=ree(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.In(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):Bee.resolve(null)}))}))}(i.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,hue(i.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(Sce(i,n,a||null),Ice(i,n),function(e,t){ree(ree(e).mutationQueue).En(t)}(i.localStore,n)):tee();case 11:return e.next=13,_ce(i,o);case 13:e.next=16;break;case 15:Y9("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),Bce.apply(this,arguments)}function Vce(e,t){return Uce.apply(this,arguments)}function Uce(){return Uce=(0,ke.Z)((0,be.Z)().mark((function e(t,n){var r,a,i,o,s,u,c,l;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Yce(r=ree(t)),Qce(r),!0!==n||!0===r.fc){e.next=13;break}return a=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,Wce(r,a.toArray());case 5:return i=e.sent,r.fc=!0,e.next=9,Zue(r.remoteStore,!0);case 9:o=(0,Ht.Z)(i);try{for(o.s();!(s=o.n()).done;)u=s.value,Xse(r.remoteStore,u)}catch(yhe){o.e(yhe)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.fc){e.next=25;break}return c=[],l=Promise.resolve(),r.ic.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return Tce(r,t),use(r.localStore,t,!0)})),Yse(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,Wce(r,c);case 21:return function(e){var t=ree(e);t.uc.forEach((function(e,n){Yse(t.remoteStore,n)})),t.cc.ls(),t.uc=new Map,t.oc=new Ote(Eee.comparator)}(r),r.fc=!1,e.next=25,Zue(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),Uce.apply(this,arguments)}function Wce(e,t,n){return jce.apply(this,arguments)}function jce(){return jce=(0,ke.Z)((0,be.Z)().mark((function e(t,n,r){var a,i,o,s,u,c,l,d,f,h,p,v,m,g;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=ree(t),i=[],o=[],s=(0,Ht.Z)(n),e.prev=2,s.s();case 4:if((u=s.n()).done){e.next=45;break}if(c=u.value,l=void 0,!(d=a.ic.get(c))||0===d.length){e.next=34;break}return e.next=11,sse(a.localStore,ure(d[0]));case 11:l=e.sent,f=(0,Ht.Z)(d),e.prev=13,f.s();case 15:if((h=f.n()).done){e.next=24;break}return p=h.value,v=a.sc.get(p),e.next=20,Lce(a,v);case 20:(m=e.sent).snapshot&&o.push(m.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),f.e(e.t0);case 29:return e.prev=29,f.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,dse(a.localStore,c);case 36:return g=e.sent,e.next=39,sse(a.localStore,g);case 39:return l=e.sent,e.next=42,oce(a,Gce(g),c,!1,l.resumeToken);case 42:i.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),s.e(e.t1);case 50:return e.prev=50,s.f(),e.finish(50);case 53:return e.abrupt("return",(a.nc.zo(o),i));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),jce.apply(this,arguments)}function Gce(e){return tre(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function Hce(e){var t=ree(e);return ree(ree(t.localStore).persistence).bi()}function qce(e,t,n,r){return $ce.apply(this,arguments)}function $ce(){return $ce=(0,ke.Z)((0,be.Z)().mark((function e(t,n,r,a){var i,o,s,u;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=ree(t)).fc){e.next=3;break}return e.abrupt("return",void Y9("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=i.ic.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,fse(i.localStore,vre(o[0]));case 10:return s=e.sent,u=kae.createSynthesizedRemoteEventForCurrentChange(n,"current"===r,Ute.EMPTY_BYTE_STRING),e.next=14,_ce(i,s,u);case 14:return e.abrupt("break",20);case 15:return e.next=17,use(i.localStore,n,!0);case 17:return Tce(i,n,a),e.abrupt("break",20);case 19:tee();case 20:case"end":return e.stop()}}),e)}))),$ce.apply(this,arguments)}function Kce(e,t,n){return Xce.apply(this,arguments)}function Xce(){return Xce=(0,ke.Z)((0,be.Z)().mark((function e(t,n,r){var a,i,o,s,u,c,l,d,f;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=Yce(t)).fc){e.next=45;break}i=(0,Ht.Z)(n),e.prev=3,i.s();case 5:if((o=i.n()).done){e.next=21;break}if(s=o.value,!a.ic.has(s)){e.next=10;break}return Y9("SyncEngine","Adding an already active target "+s),e.abrupt("continue",19);case 10:return e.next=12,dse(a.localStore,s);case 12:return u=e.sent,e.next=15,sse(a.localStore,u);case 15:return c=e.sent,e.next=18,oce(a,Gce(u),c.targetId,!1,c.resumeToken);case 18:Xse(a.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),i.e(e.t0);case 26:return e.prev=26,i.f(),e.finish(26);case 29:l=(0,Ht.Z)(r),e.prev=30,f=(0,be.Z)().mark((function e(){var t;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d.value,e.t0=a.ic.has(t),!e.t0){e.next=5;break}return e.next=5,use(a.localStore,t,!1).then((function(){Yse(a.remoteStore,t),Tce(a,t)})).catch(Pee);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((d=l.n()).done){e.next=37;break}return e.delegateYield(f(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),Xce.apply(this,arguments)}function Yce(e){var t=ree(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=fce.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Oce.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=vce.bind(null,t),t.nc.zo=jue.bind(null,t.eventManager),t.nc.wc=Gue.bind(null,t.eventManager),t}function Qce(e){var t=ree(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=gce.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=bce.bind(null,t),t}function Jce(e,t,n){var r=ree(e);(function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t,n,r){var a,i,o,s,u;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return a=e.sent,e.next=6,function(e,t){var n=ree(e),r=Fae(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.xs.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,a);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(a)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(Yue(a)),i=new Xue(a,t.localStore,n.serializer),e.next=15,n._c();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,i.$u(o);case 19:return(s=e.sent)&&r._updateProgress(s),e.next=23,n._c();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,i.complete();case 28:return u=e.sent,e.next=31,_ce(t,u.Bu,void 0);case 31:return e.next=33,function(e,t){var n=ree(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.xs.saveBundleMetadata(e,t)}))}(t.localStore,a);case 33:return r._completeWith(u.progress),e.abrupt("return",Promise.resolve(u.Fu));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(J9("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var ele=function(){function e(){(0,Se.Z)(this,e),this.synchronizeTabs=!1}return(0,Te.Z)(e,[{key:"initialize",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.serializer=Pse(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),e.next=5,this.persistence.start();case 5:this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createGarbageCollectionScheduler",value:function(e,t){return null}},{key:"createIndexBackfillerScheduler",value:function(e,t){return null}},{key:"createLocalStore",value:function(e){return Joe(this.persistence,new Yoe,e.initialUser,this.serializer)}},{key:"createPersistence",value:function(e){return new Boe(Uoe.Fs,this.serializer)}},{key:"createSharedClientState",value:function(e){return new Nse}},{key:"terminate",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),tle=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e,r,a){var i;return(0,Se.Z)(this,n),(i=t.call(this)).mc=e,i.cacheSizeBytes=r,i.forceOwnership=a,i.synchronizeTabs=!1,i}return(0,Te.Z)(n,[{key:"initialize",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){var r=this;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,BN((0,zN.Z)(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.mc.initialize(this,t);case 4:return e.next=6,Qce(this.mc.syncEngine);case 6:return e.next=8,hue(this.mc.remoteStore);case 8:return e.next=10,this.persistence.hi((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createLocalStore",value:function(e){return Joe(this.persistence,new Yoe,e.initialUser,this.serializer)}},{key:"createGarbageCollectionScheduler",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new goe(n,e.asyncQueue,t)}},{key:"createIndexBackfillerScheduler",value:function(e,t){var n=new Yee(t,this.persistence);return new Xee(e.asyncQueue,n)}},{key:"createPersistence",value:function(e){var t=Koe(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?noe.withCacheSize(this.cacheSizeBytes):noe.DEFAULT;return new Hoe(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Fse(),Mse(),this.serializer,this.sharedClientState,!!this.forceOwnership)}},{key:"createSharedClientState",value:function(e){return new Nse}}]),n}(ele),nle=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e,r){var a;return(0,Se.Z)(this,n),(a=t.call(this,e,r,!1)).mc=e,a.cacheSizeBytes=r,a.synchronizeTabs=!0,a}return(0,Te.Z)(n,[{key:"initialize",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){var r,a=this;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,BN((0,zN.Z)(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.mc.syncEngine,e.t0=this.sharedClientState instanceof Ese,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={$r:zce.bind(null,r),Mr:qce.bind(null,r),Fr:Kce.bind(null,r),bi:Hce.bind(null,r),Or:Mce.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.hi(function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vce(a.mc.syncEngine,t);case 2:a.gcScheduler&&(t&&!a.gcScheduler.started?a.gcScheduler.start():t||a.gcScheduler.stop()),a.indexBackfillerScheduler&&(t&&!a.indexBackfillerScheduler.started?a.indexBackfillerScheduler.start():t||a.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createSharedClientState",value:function(e){var t=Fse();if(!Ese.D(t))throw new iee(aee.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Koe(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Ese(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(tle),rle=function(){function e(){(0,Se.Z)(this,e)}return(0,Te.Z)(e,[{key:"initialize",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t,n){var r=this;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return pce(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Rce.bind(null,this.syncEngine),e.next=12,Zue(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new zue}},{key:"createDatastore",value:function(e){var t,n=Pse(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new Lse(t));return function(e,t,n,r){return new Wse(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,a,i,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,a=function(e){return pce(o.syncEngine,e,0)},i=Zse.D()?new Zse:new Cse,new Gse(t,n,r,a,i)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,a,i,o){var s=new rce(e,t,n,r,a,i);return o&&(s.fc=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){var n;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ree(t),Y9("RemoteStore","RemoteStore shutting down."),n.du.add(5),e.next=5,$se(n);case 5:n._u.shutdown(),n.mu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function ale(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return(0,ke.Z)((0,be.Z)().mark((function r(){var a;return(0,be.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return a={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,a));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return(0,ke.Z)((0,be.Z)().mark((function e(){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.resolve()}}var ile=function(){function e(t){(0,Se.Z)(this,e),this.observer=t,this.muted=!1}return(0,Te.Z)(e,[{key:"next",value:function(e){this.observer.next&&this.gc(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.gc(this.observer.error,e):Q9("Uncaught Error in snapshot listener:",e.toString())}},{key:"yc",value:function(){this.muted=!0}},{key:"gc",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),ole=function(){function e(t,n){var r=this;(0,Se.Z)(this,e),this.Ic=t,this.serializer=n,this.metadata=new oee,this.buffer=new Uint8Array,this.Tc=new TextDecoder("utf-8"),this.Ec().then((function(e){e&&e.ku()?r.metadata.resolve(e.Nu.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.Nu))))}),(function(e){return r.metadata.reject(e)}))}return(0,Te.Z)(e,[{key:"close",value:function(){return this.Ic.cancel()}},{key:"getMetadata",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_c",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Ec());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ec",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){var t,n,r,a;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Ac();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.Tc.decode(t),r=Number(n),isNaN(r)&&this.Rc("length string (".concat(n,") is not valid number")),e.next=9,this.vc(r);case 9:return a=e.sent,e.abrupt("return",new $ue(JSON.parse(a),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"bc",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"Ac",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){var t,n;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.bc()<0)){e.next=7;break}return e.next=3,this.Pc();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.bc())<0&&this.Rc("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"vc",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){var n;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Pc();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Rc("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.Tc.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Rc",value:function(e){throw this.Ic.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Pc",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){var t,n;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Ic.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),sle=function(){function e(t){(0,Se.Z)(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return(0,Te.Z)(e,[{key:"lookup",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){var n,r=this;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new iee(aee.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t,n){var r,a,i,o,s,u;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ree(t),a=Wae(r.serializer)+"/documents",i={documents:n.map((function(e){return zae(r.serializer,e)}))},e.next=5,r.fo("BatchGetDocuments",a,i,n.length);case 5:return o=e.sent,s=new Map,o.forEach((function(e){var t=qae(r.serializer,e);s.set(t.key.toString(),t)})),u=[],e.abrupt("return",(n.forEach((function(e){var t=s.get(e.toString());nee(!!t),u.push(t)})),u));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new lae(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){var t,n=this;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=Eee.fromPath(t);n.mutations.push(new dae(r,n.precondition(r)))})),e.next=7,function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t,n){var r,a,i;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ree(t),a=Wae(r.serializer)+"/documents",i={writes:n.map((function(e){return $ae(r.serializer,e)}))},e.next=3,r.co("Commit",a,i);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw tee();t=wee.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new iee(aee.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(wee.min())?Kre.exists(!1):Kre.updateTime(t):Kre.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(wee.min()))throw new iee(aee.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Kre.updateTime(t)}return Kre.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),ule=function(){function e(t,n,r,a,i){(0,Se.Z)(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=a,this.deferred=i,this.Vc=r.maxAttempts,this.Co=new zse(this.asyncQueue,"transaction_retry")}return(0,Te.Z)(e,[{key:"run",value:function(){this.Vc-=1,this.Sc()}},{key:"Sc",value:function(){var e=this;this.Co.Ao((0,ke.Z)((0,be.Z)().mark((function t(){var n,r;return(0,be.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new sle(e.datastore),(r=e.Dc(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Cc(t)}))}))})).catch((function(t){e.Cc(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"Dc",value:function(e){try{var t=this.updateFunction(e);return!Jee(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Cc",value:function(e){var t=this;this.Vc>0&&this.xc(e)?(this.Vc-=1,this.asyncQueue.enqueueAndForget((function(){return t.Sc(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"xc",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!mae(t)}return!1}}]),e}(),cle=function(){function e(t,n,r,a){var i=this;(0,Se.Z)(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=a,this.user=q9.UNAUTHENTICATED,this.clientId=mee.A(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Y9("FirestoreClient","Received user=",t.uid),e.next=3,i.authCredentialListener(t);case 3:i.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return Y9("FirestoreClient","Received new app check token=",e),i.appCheckCredentialListener(e,i.user)}))}return(0,Te.Z)(e,[{key:"getConfiguration",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new iee(aee.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new oee;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ke.Z)((0,be.Z)().mark((function n(){var r;return(0,be.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e._onlineComponents,!n.t0){n.next=5;break}return n.next=5,e._onlineComponents.terminate();case 5:if(n.t1=e._offlineComponents,!n.t1){n.next=9;break}return n.next=9,e._offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=Oue(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function lle(e,t){return dle.apply(this,arguments)}function dle(){return dle=(0,ke.Z)((0,be.Z)().mark((function e(t,n){var r,a;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),Y9("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:a=r.initialUser,t.setCredentialChangeListener(function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=a.isEqual(t),e.t0){e.next=5;break}return e.next=4,ese(n.localStore,t);case 4:a=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t._offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),dle.apply(this,arguments)}function fle(e,t){return hle.apply(this,arguments)}function hle(){return hle=(0,ke.Z)((0,be.Z)().mark((function e(t,n){var r,a;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,vle(t);case 3:return r=e.sent,Y9("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return a=e.sent,e.next=10,n.initialize(r,a);case 10:t.setCredentialChangeListener((function(e){return Nue(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return Nue(n.remoteStore,t)})),t._onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),hle.apply(this,arguments)}function ple(e){return"FirebaseError"===e.name?e.code===aee.FAILED_PRECONDITION||e.code===aee.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}function vle(e){return mle.apply(this,arguments)}function mle(){return mle=(0,ke.Z)((0,be.Z)().mark((function e(t){var n;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._offlineComponents){e.next=21;break}if(!t._uninitializedComponentsProvider){e.next=18;break}return Y9("FirestoreClient","Using user provided OfflineComponentProvider"),e.prev=3,e.next=6,lle(t,t._uninitializedComponentsProvider._offline);case 6:e.next=16;break;case 8:if(e.prev=8,e.t0=e.catch(3),ple(n=e.t0)){e.next=13;break}throw n;case 13:return J9("Error using user provided cache. Falling back to memory cache: "+n),e.next=16,lle(t,new ele);case 16:e.next=21;break;case 18:return Y9("FirestoreClient","Using default OfflineComponentProvider"),e.next=21,lle(t,new ele);case 21:return e.abrupt("return",t._offlineComponents);case 22:case"end":return e.stop()}}),e,null,[[3,8]])}))),mle.apply(this,arguments)}function gle(e){return yle.apply(this,arguments)}function yle(){return yle=(0,ke.Z)((0,be.Z)().mark((function e(t){return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t._onlineComponents,e.t0){e.next=11;break}if(!t._uninitializedComponentsProvider){e.next=8;break}return Y9("FirestoreClient","Using user provided OnlineComponentProvider"),e.next=6,fle(t,t._uninitializedComponentsProvider._online);case 6:e.next=11;break;case 8:return Y9("FirestoreClient","Using default OnlineComponentProvider"),e.next=11,fle(t,new rle);case 11:return e.abrupt("return",t._onlineComponents);case 12:case"end":return e.stop()}}),e)}))),yle.apply(this,arguments)}function ble(e){return vle(e).then((function(e){return e.persistence}))}function kle(e){return vle(e).then((function(e){return e.localStore}))}function wle(e){return gle(e).then((function(e){return e.remoteStore}))}function xle(e){return gle(e).then((function(e){return e.syncEngine}))}function Ile(e){return gle(e).then((function(e){return e.datastore}))}function Sle(e){return Tle.apply(this,arguments)}function Tle(){return Tle=(0,ke.Z)((0,be.Z)().mark((function e(t){var n,r;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gle(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=ace.bind(null,n.syncEngine),r.onUnlisten=uce.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),Tle.apply(this,arguments)}function Ele(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new oee;return e.asyncQueue.enqueueAndForget((0,ke.Z)((0,be.Z)().mark((function a(){return(0,be.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.t0=function(e,t,n,r,a){var i=new ile({next:function(i){t.enqueueAndForget((function(){return Uue(e,o)}));var s=i.docs.has(n);!s&&i.fromCache?a.reject(new iee(aee.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&i.fromCache&&r&&"server"===r.source?a.reject(new iee(aee.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):a.resolve(i)},error:function(e){return a.reject(e)}}),o=new que(nre(n.path),i,{includeMetadataChanges:!0,xu:!0});return Bue(e,o)},a.next=3,Sle(e);case 3:return a.t1=a.sent,a.t2=e.asyncQueue,a.t3=t,a.t4=n,a.t5=r,a.abrupt("return",(0,a.t0)(a.t1,a.t2,a.t3,a.t4,a.t5));case 9:case"end":return a.stop()}}),a)})))),r.promise}function Nle(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new oee;return e.asyncQueue.enqueueAndForget((0,ke.Z)((0,be.Z)().mark((function a(){return(0,be.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.t0=function(e,t,n,r,a){var i=new ile({next:function(n){t.enqueueAndForget((function(){return Uue(e,o)})),n.fromCache&&"server"===r.source?a.reject(new iee(aee.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):a.resolve(n)},error:function(e){return a.reject(e)}}),o=new que(n,i,{includeMetadataChanges:!0,xu:!0});return Bue(e,o)},a.next=3,Sle(e);case 3:return a.t1=a.sent,a.t2=e.asyncQueue,a.t3=t,a.t4=n,a.t5=r,a.abrupt("return",(0,a.t0)(a.t1,a.t2,a.t3,a.t4,a.t5));case 9:case"end":return a.stop()}}),a)})))),r.promise}var Cle=new Map;function Zle(e,t,n){if(!n)throw new iee(aee.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function _le(e,t,n,r){if(!0===t&&!0===r)throw new iee(aee.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function Ale(e){if(!Eee.isDocumentKey(e))throw new iee(aee.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Rle(e){if(Eee.isDocumentKey(e))throw new iee(aee.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Dle(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":tee()}function Ole(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new iee(aee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Dle(e);throw new iee(aee.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function Lle(e,t){if(t<=0)throw new iee(aee.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var Fle=function(){function e(t){var n;if((0,Se.Z)(this,e),void 0===t.host){if(void 0!==t.ssl)throw new iee(aee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.cache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new iee(aee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,_le("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return(0,Te.Z)(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),Mle=function(){function e(t,n,r,a){(0,Se.Z)(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Fle({}),this._settingsFrozen=!1}return(0,Te.Z)(e,[{key:"app",get:function(){if(!this._app)throw new iee(aee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new iee(aee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Fle(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new uee;switch(e.type){case"firstParty":return new fee(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new iee(aee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=Cle.get(e);t&&(Y9("ComponentProvider","Removing Datastore"),Cle.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function Ple(e,t,n){var r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=(e=Ole(e,Mle))._getSettings();if("firestore.googleapis.com"!==i.host&&i.host!==t&&J9("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},i),{host:"".concat(t,":").concat(n),ssl:!1})),a.mockUserToken){var o,s;if("string"==typeof a.mockUserToken)o=a.mockUserToken,s=q9.MOCK_USER;else{o=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,a=e.sub||e.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var i=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},e);return[IX(JSON.stringify({alg:"none",type:"JWT"})),IX(JSON.stringify(i)),""].join(".")}(a.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var u=a.mockUserToken.sub||a.mockUserToken.user_id;if(!u)throw new iee(aee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");s=new q9(u)}e._authCredentials=new cee(new see(o,s))}}var zle=function(){function e(t,n,r){(0,Se.Z)(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return(0,Te.Z)(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new Vle(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),Ble=function(){function e(t,n,r){(0,Se.Z)(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return(0,Te.Z)(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),Vle=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e,r,a){var i;return(0,Se.Z)(this,n),(i=t.call(this,e,r,nre(a)))._path=a,i.type="collection",i}return(0,Te.Z)(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new zle(this.firestore,null,new Eee(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(Ble);function Ule(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];if(e=KX(e),Zle("collection","path",t),e instanceof Mle){var i=Iee.fromString.apply(Iee,[t].concat(r));return Rle(i),new Vle(e,null,i)}if(!(e instanceof zle||e instanceof Vle))throw new iee(aee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Iee.fromString.apply(Iee,[t].concat(r)));return Rle(o),new Vle(e.firestore,null,o)}function Wle(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];if(e=KX(e),1===arguments.length&&(t=mee.A()),Zle("doc","path",t),e instanceof Mle){var i=Iee.fromString.apply(Iee,[t].concat(r));return Ale(i),new zle(e,null,new Eee(i))}if(!(e instanceof zle||e instanceof Vle))throw new iee(aee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Iee.fromString.apply(Iee,[t].concat(r)));return Ale(o),new zle(e.firestore,e instanceof Vle?e.converter:null,new Eee(o))}function jle(e,t){return e=KX(e),t=KX(t),(e instanceof zle||e instanceof Vle)&&(t instanceof zle||t instanceof Vle)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function Gle(e,t){return e=KX(e),t=KX(t),e instanceof Ble&&t instanceof Ble&&e.firestore===t.firestore&&dre(e._query,t._query)&&e.converter===t.converter}var Hle=function(){function e(){var t=this;(0,Se.Z)(this,e),this.Nc=Promise.resolve(),this.kc=[],this.Oc=!1,this.$c=[],this.Mc=null,this.Fc=!1,this.Bc=!1,this.Lc=[],this.Co=new zse(this,"async_queue_retry"),this.qc=function(){var e=Mse();e&&Y9("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Co.vo()};var n=Mse();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.qc)}return(0,Te.Z)(e,[{key:"isShuttingDown",get:function(){return this.Oc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Uc(),this.Kc(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Oc){this.Oc=!0,this.Bc=e||!1;var t=Mse();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.qc)}}},{key:"enqueue",value:function(e){var t=this;if(this.Uc(),this.Oc)return new Promise((function(){}));var n=new oee;return this.Kc((function(){return t.Oc&&t.Bc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.kc.push(e),t.Gc()}))}},{key:"Gc",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){var t=this;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.kc.length){e.next=14;break}return e.prev=1,e.next=4,this.kc[0]();case 4:this.kc.shift(),this.Co.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),Gee(e.t0)){e.next=12;break}throw e.t0;case 12:Y9("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.kc.length>0&&this.Co.Ao((function(){return t.Gc()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Kc",value:function(e){var t=this,n=this.Nc.then((function(){return t.Fc=!0,e().catch((function(e){t.Mc=e,t.Fc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Q9("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Fc=!1,e}))}));return this.Nc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Uc(),this.Lc.indexOf(e)>-1&&(t=0);var a=Due.createAndSchedule(this,e,t,n,(function(e){return r.Qc(e)}));return this.$c.push(a),a}},{key:"Uc",value:function(){this.Mc&&tee()}},{key:"verifyOperationInProgress",value:function(){}},{key:"zc",value:function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){var t;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Nc,e.next=3,t;case 3:if(t!==this.Nc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"jc",value:function(e){var t,n=(0,Ht.Z)(this.$c);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(yhe){n.e(yhe)}finally{n.f()}return!1}},{key:"Wc",value:function(e){var t=this;return this.zc().then((function(){t.$c.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=(0,Ht.Z)(t.$c);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(a.skipDelay(),"all"!==e&&a.timerId===e)break}}catch(yhe){r.e(yhe)}finally{r.f()}return t.zc()}))}},{key:"Hc",value:function(e){this.Lc.push(e)}},{key:"Qc",value:function(e){var t=this.$c.indexOf(e);this.$c.splice(t,1)}}]),e}();function qle(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,a=(0,Ht.Z)(["next","error","complete"]);try{for(a.s();!(n=a.n()).done;){var i=n.value;if(i in r&&"function"==typeof r[i])return!0}}catch(yhe){a.e(yhe)}finally{a.f()}return!1}(e)}var $le=function(){function e(){(0,Se.Z)(this,e),this._progressObserver={},this._taskCompletionResolver=new oee,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return(0,Te.Z)(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),Kle=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e,r,a,i){var o;return(0,Se.Z)(this,n),(o=t.call(this,e,r,a,i)).type="firestore",o._queue=new Hle,o._persistenceKey=(null==i?void 0:i.name)||"[DEFAULT]",o}return(0,Te.Z)(n,[{key:"_terminate",value:function(){return this._firestoreClient||Yle(this),this._firestoreClient.terminate()}}]),n}(Mle);function Xle(e){return e._firestoreClient||Yle(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Yle(e){var t,n,r,a=e._freezeSettings(),i=function(e,t,n,r){return new Xte(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,a);e._firestoreClient=new cle(e._authCredentials,e._appCheckCredentials,e._queue,i),(null===(n=a.cache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=a.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:a.cache.kind,_offline:a.cache._offlineComponentProvider,_online:a.cache._onlineComponentProvider})}function Qle(e,t,n){var r=new oee;return e.asyncQueue.enqueue((0,ke.Z)((0,be.Z)().mark((function a(){var i;return(0,be.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,lle(e,n);case 3:return a.next=5,fle(e,t);case 5:r.resolve(),a.next=14;break;case 8:if(a.prev=8,a.t0=a.catch(0),ple(i=a.t0)){a.next=13;break}throw i;case 13:J9("Error enabling indexeddb cache. Falling back to memory cache: "+i),r.reject(i);case 14:case"end":return a.stop()}}),a,null,[[0,8]])})))).then((function(){return r.promise}))}function Jle(e){return function(e){return e.asyncQueue.enqueue((0,ke.Z)((0,be.Z)().mark((function t(){var n,r;return(0,be.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ble(e);case 2:return n=t.sent,t.next=5,wle(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=ree(e);return t.du.delete(0),Hse(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(Xle(e=Ole(e,Kle)))}function ede(e){return function(e){return e.asyncQueue.enqueue((0,ke.Z)((0,be.Z)().mark((function t(){var n,r;return(0,be.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ble(e);case 2:return n=t.sent,t.next=5,wle(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){var n;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=ree(t)).du.add(0),e.next=4,$se(n);case 4:n.mu.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(Xle(e=Ole(e,Kle)))}function tde(e,t){var n=Xle(e=Ole(e,Kle)),r=new $le;return function(e,t,n,r){var a=function(e,t){return function(e,t){return new ole(e,t)}(function(e,t){if(e instanceof Uint8Array)return ale(e,t);if(e instanceof ArrayBuffer)return ale(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,Pse(t));e.asyncQueue.enqueueAndForget((0,ke.Z)((0,be.Z)().mark((function t(){return(0,be.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Jce,t.next=3,xle(e);case 3:t.t1=t.sent,t.t2=a,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function nde(e,t){return function(e,t){return e.asyncQueue.enqueue((0,ke.Z)((0,be.Z)().mark((function n(){return(0,be.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=ree(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.xs.getNamedQuery(e,t)}))},n.next=3,kle(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(Xle(e=Ole(e,Kle)),t).then((function(t){return t?new Ble(e,null,t.query):null}))}function rde(e){if(e._initialized||e._terminated)throw new iee(aee.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var ade=function(){function e(t){(0,Se.Z)(this,e),this._byteString=t}return(0,Te.Z)(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Ute.fromBase64String(t))}catch(t){throw new iee(aee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Ute.fromUint8Array(t))}}]),e}(),ide=function(){function e(){(0,Se.Z)(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var a=0;a<n.length;++a)if(0===n[a].length)throw new iee(aee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Tee(n)}return(0,Te.Z)(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var ode=(0,Te.Z)((function e(t){(0,Se.Z)(this,e),this._methodName=t})),sde=function(){function e(t,n){if((0,Se.Z)(this,e),!isFinite(t)||t<-90||t>90)throw new iee(aee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new iee(aee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return(0,Te.Z)(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return gee(this._lat,e._lat)||gee(this._long,e._long)}}]),e}(),ude=/^__.*__$/,cde=function(){function e(t,n,r){(0,Se.Z)(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return(0,Te.Z)(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new aae(e,this.data,this.fieldMask,t,this.fieldTransforms):new rae(e,this.data,t,this.fieldTransforms)}}]),e}(),lde=function(){function e(t,n,r){(0,Se.Z)(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return(0,Te.Z)(e,[{key:"toMutation",value:function(e,t){return new aae(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function dde(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw tee()}}var fde=function(){function e(t,n,r,a,i,o){(0,Se.Z)(this,e),this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=a,void 0===i&&this.Jc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return(0,Te.Z)(e,[{key:"path",get:function(){return this.settings.path}},{key:"Yc",get:function(){return this.settings.Yc}},{key:"Zc",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"Xc",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Zc({path:n,ta:!1});return r.ea(e),r}},{key:"na",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Zc({path:n,ta:!1});return r.Jc(),r}},{key:"sa",value:function(e){return this.Zc({path:void 0,ta:!0})}},{key:"ia",value:function(e){return Rde(e,this.settings.methodName,this.settings.ra||!1,this.path,this.settings.oa)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"Jc",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.ea(this.path.get(e))}},{key:"ea",value:function(e){if(0===e.length)throw this.ia("Document fields must not be empty");if(dde(this.Yc)&&ude.test(e))throw this.ia('Document fields cannot begin and end with "__"')}}]),e}(),hde=function(){function e(t,n,r){(0,Se.Z)(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||Pse(t)}return(0,Te.Z)(e,[{key:"ua",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new fde({Yc:e,methodName:t,oa:n,path:Tee.emptyPath(),ta:!1,ra:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}]),e}();function pde(e){var t=e._freezeSettings(),n=Pse(e._databaseId);return new hde(e._databaseId,!!t.ignoreUndefinedProperties,n)}function vde(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.ua(i.merge||i.mergeFields?2:0,t,n,a);Cde("Data must be an object, but it was:",o,r);var s,u,c=Ede(r,o);if(i.merge)s=new Bte(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){var l,d=[],f=(0,Ht.Z)(i.mergeFields);try{for(f.s();!(l=f.n()).done;){var h=Zde(t,l.value,n);if(!o.contains(h))throw new iee(aee.INVALID_ARGUMENT,"Field '".concat(h,"' is specified in your field mask but missing from your input data."));Dde(d,h)||d.push(h)}}catch(yhe){f.e(yhe)}finally{f.f()}s=new Bte(d),u=o.fieldTransforms.filter((function(e){return s.covers(e.field)}))}else s=null,u=o.fieldTransforms;return new cde(new bne(c),s,u)}var mde=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(){return(0,Se.Z)(this,n),t.apply(this,arguments)}return(0,Te.Z)(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.Yc)throw 1===e.Yc?e.ia("".concat(this._methodName,"() can only appear at the top level of your update data")):e.ia("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(ode);function gde(e,t,n){return new fde({Yc:3,oa:t.settings.oa,methodName:e._methodName,ta:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}var yde=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(){return(0,Se.Z)(this,n),t.apply(this,arguments)}return(0,Te.Z)(n,[{key:"_toFieldTransform",value:function(e){return new qre(e.path,new zre)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(ode),bde=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e,r){var a;return(0,Se.Z)(this,n),(a=t.call(this,e)).ca=r,a}return(0,Te.Z)(n,[{key:"_toFieldTransform",value:function(e){var t=gde(this,e,!0),n=this.ca.map((function(e){return Tde(e,t)})),r=new Bre(n);return new qre(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(ode),kde=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e,r){var a;return(0,Se.Z)(this,n),(a=t.call(this,e)).ca=r,a}return(0,Te.Z)(n,[{key:"_toFieldTransform",value:function(e){var t=gde(this,e,!0),n=this.ca.map((function(e){return Tde(e,t)})),r=new Ure(n);return new qre(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(ode),wde=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e,r){var a;return(0,Se.Z)(this,n),(a=t.call(this,e)).aa=r,a}return(0,Te.Z)(n,[{key:"_toFieldTransform",value:function(e){var t=new jre(e.serializer,Ore(e.serializer,this.aa));return new qre(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(ode);function xde(e,t,n,r){var a=e.ua(1,t,n);Cde("Data must be an object, but it was:",a,r);var i=[],o=bne.empty();Rte(r,(function(e,r){var s=Ade(t,e,n);r=KX(r);var u=a.na(s);if(r instanceof mde)i.push(s);else{var c=Tde(r,u);null!=c&&(i.push(s),o.set(s,c))}}));var s=new Bte(i);return new lde(o,s,a.fieldTransforms)}function Ide(e,t,n,r,a,i){var o=e.ua(1,t,n),s=[Zde(t,r,n)],u=[a];if(i.length%2!=0)throw new iee(aee.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<i.length;c+=2)s.push(Zde(t,i[c])),u.push(i[c+1]);for(var l=[],d=bne.empty(),f=s.length-1;f>=0;--f)if(!Dde(l,s[f])){var h=s[f],p=u[f];p=KX(p);var v=o.na(h);if(p instanceof mde)l.push(h);else{var m=Tde(p,v);null!=m&&(l.push(h),d.set(h,m))}}var g=new Bte(l);return new lde(d,g,o.fieldTransforms)}function Sde(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Tde(n,e.ua(r?4:3,t))}function Tde(e,t){if(Nde(e=KX(e)))return Cde("Unsupported field value:",t,e),Ede(e,t);if(e instanceof ode)return function(e,t){if(!dde(t.Yc))throw t.ia("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.ia("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.ta&&4!==t.Yc)throw t.ia("Nested arrays are not supported");return function(e,t){var n,r=[],a=0,i=(0,Ht.Z)(e);try{for(i.s();!(n=i.n()).done;){var o=Tde(n.value,t.sa(a));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),a++}}catch(yhe){i.e(yhe)}finally{i.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=KX(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Ore(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=kee.fromDate(e);return{timestampValue:Dae(t.serializer,n)}}if(e instanceof kee){var r=new kee(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Dae(t.serializer,r)}}if(e instanceof sde)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof ade)return{bytesValue:Oae(t.serializer,e._byteString)};if(e instanceof zle){var a=t.databaseId,i=e.firestore._databaseId;if(!i.isEqual(a))throw t.ia("Document reference is for database ".concat(i.projectId,"/").concat(i.database," but should be for database ").concat(a.projectId,"/").concat(a.database));return{referenceValue:Mae(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.ia("Unsupported field value: ".concat(Dle(e)))}(e,t)}function Ede(e,t){var n={};return Dte(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Rte(e,(function(e,r){var a=Tde(r,t.Xc(e));null!=a&&(n[e]=a)})),{mapValue:{fields:n}}}function Nde(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof kee||e instanceof sde||e instanceof ade||e instanceof zle||e instanceof ode)}function Cde(e,t,n){if(!Nde(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=Dle(n);throw"an object"===r?t.ia(e+" a custom object"):t.ia(e+" "+r)}}function Zde(e,t,n){if((t=KX(t))instanceof ide)return t._internalPath;if("string"==typeof t)return Ade(e,t);throw Rde("Field path arguments must be of type string or ",e,!1,void 0,n)}var _de=new RegExp("[~\\*/\\[\\]]");function Ade(e,t,n){if(t.search(_de)>=0)throw Rde("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return(0,U5.Z)(ide,(0,me.Z)(t.split(".")))._internalPath}catch(r){throw Rde("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Rde(e,t,n,r,a){var i=r&&!r.isEmpty(),o=void 0!==a,s="Function ".concat(t,"() called with invalid data");n&&(s+=" (via `toFirestore()`)"),s+=". ";var u="";return(i||o)&&(u+=" (found",i&&(u+=" in field ".concat(r)),o&&(u+=" in document ".concat(a)),u+=")"),new iee(aee.INVALID_ARGUMENT,s+e+u)}function Dde(e,t){return e.some((function(e){return e.isEqual(t)}))}var Ode=function(){function e(t,n,r,a,i){(0,Se.Z)(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=a,this._converter=i}return(0,Te.Z)(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new zle(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new Lde(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(Fde("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),Lde=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(){return(0,Se.Z)(this,n),t.apply(this,arguments)}return(0,Te.Z)(n,[{key:"data",value:function(){return BN((0,zN.Z)(n.prototype),"data",this).call(this)}}]),n}(Ode);function Fde(e,t){return"string"==typeof t?Ade(e,t):t instanceof ide?t._internalPath:t._delegate._internalPath}function Mde(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new iee(aee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Pde=(0,Te.Z)((function e(){(0,Se.Z)(this,e)})),zde=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(){return(0,Se.Z)(this,n),t.apply(this,arguments)}return(0,Te.Z)(n)}(Pde);function Bde(e,t){for(var n=[],r=arguments.length,a=new Array(r>2?r-2:0),i=2;i<r;i++)a[i-2]=arguments[i];t instanceof Pde&&n.push(t),function(e){var t=e.filter((function(e){return e instanceof Ude})).length,n=e.filter((function(e){return e instanceof Vde})).length;if(t>1||t>0&&n>0)throw new iee(aee.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n=n.concat(a));var o,s=(0,Ht.Z)(n);try{for(s.s();!(o=s.n()).done;){e=o.value._apply(e)}}catch(yhe){s.e(yhe)}finally{s.f()}return e}var Vde=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e,r,a){var i;return(0,Se.Z)(this,n),(i=t.call(this))._field=e,i._op=r,i._value=a,i.type="where",i}return(0,Te.Z)(n,[{key:"_apply",value:function(e){var t=this._parse(e);return efe(e._query,t),new Ble(e.firestore,e.converter,cre(e._query,t))}},{key:"_parse",value:function(e){var t=pde(e.firestore),n=function(e,t,n,r,a,i,o){var s;if(a.isKeyField()){if("array-contains"===i||"array-contains-any"===i)throw new iee(aee.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(i,"' queries on documentId()."));if("in"===i||"not-in"===i){Jde(o,i);var u,c=[],l=(0,Ht.Z)(o);try{for(l.s();!(u=l.n()).done;){var d=u.value;c.push(Qde(r,e,d))}}catch(yhe){l.e(yhe)}finally{l.f()}s={arrayValue:{values:c}}}else s=Qde(r,e,o)}else"in"!==i&&"not-in"!==i&&"array-contains-any"!==i||Jde(o,i),s=Sde(n,"where",o,"in"===i||"not-in"===i);return Cne.create(a,i,s)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(zde);var Ude=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e,r){var a;return(0,Se.Z)(this,n),(a=t.call(this)).type=e,a._queryConstraints=r,a}return(0,Te.Z)(n,[{key:"_parse",value:function(e){var t=this._queryConstraints.map((function(t){return t._parse(e)})).filter((function(e){return e.getFilters().length>0}));return 1===t.length?t[0]:Zne.create(t,this._getOperator())}},{key:"_apply",value:function(e){var t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){var n,r=e,a=t.getFlattenedFilters(),i=(0,Ht.Z)(a);try{for(i.s();!(n=i.n()).done;){var o=n.value;efe(r,o),r=cre(r,o)}}catch(yhe){i.e(yhe)}finally{i.f()}}(e._query,t),new Ble(e.firestore,e.converter,cre(e._query,t)))}},{key:"_getQueryConstraints",value:function(){return this._queryConstraints}},{key:"_getOperator",value:function(){return"and"===this.type?"and":"or"}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(Pde);var Wde=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e,r){var a;return(0,Se.Z)(this,n),(a=t.call(this))._field=e,a._direction=r,a.type="orderBy",a}return(0,Te.Z)(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new iee(aee.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new iee(aee.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Tne(t,n);return function(e,t){if(null===are(e)){var n=ire(e);null!==n&&tfe(e,n,t.field)}}(e,r),r}(e._query,this._field,this._direction);return new Ble(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new ere(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(zde);var jde=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e,r,a){var i;return(0,Se.Z)(this,n),(i=t.call(this)).type=e,i._limit=r,i._limitType=a,i}return(0,Te.Z)(n,[{key:"_apply",value:function(e){return new Ble(e.firestore,e.converter,lre(e._query,this._limit,this._limitType))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(zde);var Gde=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e,r,a){var i;return(0,Se.Z)(this,n),(i=t.call(this)).type=e,i._docOrFields=r,i._inclusive=a,i}return(0,Te.Z)(n,[{key:"_apply",value:function(e){var t=Yde(e,this.type,this._docOrFields,this._inclusive);return new Ble(e.firestore,e.converter,function(e,t){return new ere(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(zde);function Hde(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Gde._create("startAt",t,!0)}function qde(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Gde._create("startAfter",t,!1)}var $de=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e,r,a){var i;return(0,Se.Z)(this,n),(i=t.call(this)).type=e,i._docOrFields=r,i._inclusive=a,i}return(0,Te.Z)(n,[{key:"_apply",value:function(e){var t=Yde(e,this.type,this._docOrFields,this._inclusive);return new Ble(e.firestore,e.converter,function(e,t){return new ere(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(zde);function Kde(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return $de._create("endBefore",t,!1)}function Xde(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return $de._create("endAt",t,!0)}function Yde(e,t,n,r){if(n[0]=KX(n[0]),n[0]instanceof Ode)return function(e,t,n,r,a){if(!r)throw new iee(aee.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var i,o=[],s=(0,Ht.Z)(sre(e));try{for(s.s();!(i=s.n()).done;){var u=i.value;if(u.field.isKeyField())o.push(sne(t,r.key));else{var c=r.data.field(u.field);if(qte(c))throw new iee(aee.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new iee(aee.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(yhe){s.e(yhe)}finally{s.f()}return new xne(o,a)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var a=pde(e.firestore);return function(e,t,n,r,a,i){var o=e.explicitOrderBy;if(a.length>o.length)throw new iee(aee.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var s=[],u=0;u<a.length;u++){var c=a[u];if(o[u].field.isKeyField()){if("string"!=typeof c)throw new iee(aee.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!ore(e)&&-1!==c.indexOf("/"))throw new iee(aee.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(Iee.fromString(c));if(!Eee.isDocumentKey(l))throw new iee(aee.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var d=new Eee(l);s.push(sne(t,d))}else{var f=Sde(n,r,c);s.push(f)}}return new xne(s,i)}(e._query,e.firestore._databaseId,a,t,n,r)}function Qde(e,t,n){if("string"==typeof(n=KX(n))){if(""===n)throw new iee(aee.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ore(t)&&-1!==n.indexOf("/"))throw new iee(aee.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(Iee.fromString(n));if(!Eee.isDocumentKey(r))throw new iee(aee.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return sne(e,new Eee(r))}if(n instanceof zle)return sne(e,n._key);throw new iee(aee.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Dle(n),"."))}function Jde(e,t){if(!Array.isArray(e)||0===e.length)throw new iee(aee.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function efe(e,t){if(t.isInequality()){var n=ire(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new iee(aee.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(r.toString(),"'"));var a=are(e);null!==a&&tfe(e,r,a)}var i=function(e,t){var n,r=(0,Ht.Z)(e);try{for(r.s();!(n=r.n()).done;){var a,i=n.value,o=(0,Ht.Z)(i.getFlattenedFilters());try{for(o.s();!(a=o.n()).done;){var s=a.value;if(t.indexOf(s.op)>=0)return s.op}}catch(yhe){o.e(yhe)}finally{o.f()}}}catch(yhe){r.e(yhe)}finally{r.f()}return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new iee(aee.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new iee(aee.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}function tfe(e,t,n){if(!n.isEqual(t))throw new iee(aee.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var nfe=function(){function e(){(0,Se.Z)(this,e)}return(0,Te.Z)(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(ene(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Gte(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Hte(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw tee()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return Rte(e.fields,(function(e,a){r[e]=n.convertValue(a,t)})),r}},{key:"convertGeoPoint",value:function(e){return new sde(Gte(e.latitude),Gte(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=$te(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Kte(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=jte(e);return new kee(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=Iee.fromString(e);nee(sie(n));var r=new Yte(n.get(1),n.get(3)),a=new Eee(n.popFirst(5));return r.isEqual(t)||Q9("Document ".concat(a," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),a}}]),e}();function rfe(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var afe=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r;return(0,Se.Z)(this,n),(r=t.call(this)).firestore=e,r}return(0,Te.Z)(n,[{key:"convertBytes",value:function(e){return new ade(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new zle(this.firestore,null,t)}}]),n}(nfe);var ife=function(){function e(t,n){(0,Se.Z)(this,e),this.hasPendingWrites=t,this.fromCache=n}return(0,Te.Z)(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),ofe=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e,r,a,i,o,s){var u;return(0,Se.Z)(this,n),(u=t.call(this,e,r,a,i,s))._firestore=e,u._firestoreImpl=e,u.metadata=o,u}return(0,Te.Z)(n,[{key:"exists",value:function(){return BN((0,zN.Z)(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new sfe(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(Fde("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(Ode),sfe=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(){return(0,Se.Z)(this,n),t.apply(this,arguments)}return(0,Te.Z)(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return BN((0,zN.Z)(n.prototype),"data",this).call(this,e)}}]),n}(ofe),ufe=function(){function e(t,n,r,a){(0,Se.Z)(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=a,this.metadata=new ife(a.hasPendingWrites,a.fromCache),this.query=r}return(0,Te.Z)(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new sfe(n._firestore,n._userDataWriter,r.key,r,new ife(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new iee(aee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new sfe(e._firestore,e._userDataWriter,t.doc.key,t.doc,new ife(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new sfe(e._firestore,e._userDataWriter,t.doc.key,t.doc,new ife(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),a=-1,i=-1;return 0!==t.type&&(a=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(i=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:cfe(t.type),doc:n,oldIndex:a,newIndex:i}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}]),e}();function cfe(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return tee()}}function lfe(e,t){return e instanceof ofe&&t instanceof ofe?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof ufe&&t instanceof ufe&&e._firestore===t._firestore&&Gle(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}var dfe=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r;return(0,Se.Z)(this,n),(r=t.call(this)).firestore=e,r}return(0,Te.Z)(n,[{key:"convertBytes",value:function(e){return new ade(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new zle(this.firestore,null,t)}}]),n}(nfe);function ffe(e){e=Ole(e,zle);var t=Ole(e.firestore,Kle),n=Xle(t),r=new dfe(t);return function(e,t){var n=new oee;return e.asyncQueue.enqueueAndForget((0,ke.Z)((0,be.Z)().mark((function r(){return(0,be.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t,n,r){var a,i;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=ree(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(a=e.sent).isFoundDocument()?r.resolve(a):a.isNoDocument()?r.resolve(null):r.reject(new iee(aee.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),i=Oue(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(i);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,kle(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new ofe(t,r,e._key,n,new ife(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function hfe(e){e=Ole(e,Ble);var t=Ole(e.firestore,Kle),n=Xle(t),r=new dfe(t);return function(e,t){var n=new oee;return e.asyncQueue.enqueueAndForget((0,ke.Z)((0,be.Z)().mark((function r(){return(0,be.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t,n,r){var a,i,o,s,u;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,lse(t,n,!0);case 3:a=e.sent,i=new ece(n,a.Wi),o=i.zu(a.documents),s=i.applyChanges(o,!1),r.resolve(s.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),u=Oue(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(u);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,kle(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new ufe(t,r,e,n)}))}function pfe(e,t,n){e=Ole(e,zle);var r=Ole(e.firestore,Kle),a=rfe(e.converter,t,n);return yfe(r,[vde(pde(r),"setDoc",e._key,a,null!==e.converter,n).toMutation(e._key,Kre.none())])}function vfe(e,t,n){e=Ole(e,zle);for(var r=Ole(e.firestore,Kle),a=pde(r),i=arguments.length,o=new Array(i>3?i-3:0),s=3;s<i;s++)o[s-3]=arguments[s];return yfe(r,[("string"==typeof(t=KX(t))||t instanceof ide?Ide(a,"updateDoc",e._key,t,n,o):xde(a,"updateDoc",e._key,t)).toMutation(e._key,Kre.exists(!0))])}function mfe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a,i,o;e=KX(e);var s={includeMetadataChanges:!1},u=0;"object"!=typeof n[u]||qle(n[u])||(s=n[u],u++);var c,l,d,f={includeMetadataChanges:s.includeMetadataChanges};if(qle(n[u])){var h=n[u];n[u]=null===(a=h.next)||void 0===a?void 0:a.bind(h),n[u+1]=null===(i=h.error)||void 0===i?void 0:i.bind(h),n[u+2]=null===(o=h.complete)||void 0===o?void 0:o.bind(h)}if(e instanceof zle)l=Ole(e.firestore,Kle),d=nre(e._key.path),c={next:function(t){n[u]&&n[u](bfe(l,e,t))},error:n[u+1],complete:n[u+2]};else{var p=Ole(e,Ble);l=Ole(p.firestore,Kle),d=p._query;var v=new dfe(l);c={next:function(e){n[u]&&n[u](new ufe(l,v,p,e))},error:n[u+1],complete:n[u+2]},Mde(e._query)}return function(e,t,n,r){var a=new ile(r),i=new que(t,a,n);return e.asyncQueue.enqueueAndForget((0,ke.Z)((0,be.Z)().mark((function t(){return(0,be.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Bue,t.next=3,Sle(e);case 3:return t.t1=t.sent,t.t2=i,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){a.yc(),e.asyncQueue.enqueueAndForget((0,ke.Z)((0,be.Z)().mark((function t(){return(0,be.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Uue,t.next=3,Sle(e);case 3:return t.t1=t.sent,t.t2=i,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(Xle(l),d,f,c)}function gfe(e,t){return function(e,t){var n=new ile(t);return e.asyncQueue.enqueueAndForget((0,ke.Z)((0,be.Z)().mark((function t(){return(0,be.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){ree(e).Au.add(t),t.next()},t.next=3,Sle(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.yc(),e.asyncQueue.enqueueAndForget((0,ke.Z)((0,be.Z)().mark((function t(){return(0,be.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){ree(e).Au.delete(t)},t.next=3,Sle(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(Xle(e=Ole(e,Kle)),qle(t)?t:{next:t})}function yfe(e,t){return function(e,t){var n=new oee;return e.asyncQueue.enqueueAndForget((0,ke.Z)((0,be.Z)().mark((function r(){return(0,be.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=lce,r.next=3,xle(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(Xle(e),t)}function bfe(e,t,n){var r=n.docs.get(t._key),a=new dfe(e);return new ofe(e,a,t._key,r,new ife(n.hasPendingWrites,n.fromCache),t.converter)}var kfe={maxAttempts:5},wfe=function(){function e(t,n){(0,Se.Z)(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=pde(t)}return(0,Te.Z)(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=xfe(e,this._firestore),a=rfe(r.converter,t,n),i=vde(this._dataReader,"WriteBatch.set",r._key,a,null!==r.converter,n);return this._mutations.push(i.toMutation(r._key,Kre.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,a=xfe(e,this._firestore),i=arguments.length,o=new Array(i>3?i-3:0),s=3;s<i;s++)o[s-3]=arguments[s];return r="string"==typeof(t=KX(t))||t instanceof ide?Ide(this._dataReader,"WriteBatch.update",a._key,t,n,o):xde(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(r.toMutation(a._key,Kre.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=xfe(e,this._firestore);return this._mutations=this._mutations.concat(new lae(t._key,Kre.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new iee(aee.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function xfe(e,t){if((e=KX(e)).firestore!==t)throw new iee(aee.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var Ife=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e,r){var a;return(0,Se.Z)(this,n),(a=t.call(this,e,r))._firestore=e,a}return(0,Te.Z)(n,[{key:"get",value:function(e){var t=this,r=xfe(e,this._firestore),a=new dfe(this._firestore);return BN((0,zN.Z)(n.prototype),"get",this).call(this,e).then((function(e){return new ofe(t._firestore,a,r._key,e._document,new ife(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){(0,Se.Z)(this,e),this._firestore=t,this._transaction=n,this._dataReader=pde(t)}return(0,Te.Z)(e,[{key:"get",value:function(e){var t=this,n=xfe(e,this._firestore),r=new afe(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return tee();var a=e[0];if(a.isFoundDocument())return new Ode(t._firestore,r,a.key,a,n.converter);if(a.isNoDocument())return new Ode(t._firestore,r,n._key,null,n.converter);throw tee()}))}},{key:"set",value:function(e,t,n){var r=xfe(e,this._firestore),a=rfe(r.converter,t,n),i=vde(this._dataReader,"Transaction.set",r._key,a,null!==r.converter,n);return this._transaction.set(r._key,i),this}},{key:"update",value:function(e,t,n){for(var r,a=xfe(e,this._firestore),i=arguments.length,o=new Array(i>3?i-3:0),s=3;s<i;s++)o[s-3]=arguments[s];return r="string"==typeof(t=KX(t))||t instanceof ide?Ide(this._dataReader,"Transaction.update",a._key,t,n,o):xde(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,r),this}},{key:"delete",value:function(e){var t=xfe(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function Sfe(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new bde("arrayUnion",t)}function Tfe(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new kde("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){$9=e}(jY),MY(new XX("firestore",(function(e,n){var r=n.instanceIdentifier,a=n.options,i=e.getProvider("app").getImmediate(),o=new Kle(new lee(e.getProvider("auth-internal")),new pee(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new iee(aee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Yte(e.options.projectId,t)}(i,r),i);return a=Object.assign({useFetchStreams:t},a),o._setSettings(a),o}),"PUBLIC").setMultipleInstances(!0)),XY(H9,"3.10.0",e),XY(H9,"3.10.0","esm2017")}();var Efe="@firebase/firestore-compat",Nfe="0.3.6";function Cfe(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new iee("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function Zfe(){if("undefined"===typeof Uint8Array)throw new iee("unimplemented","Uint8Arrays are not available in this environment.")}function _fe(){if("undefined"==typeof atob)throw new iee("unimplemented","Blobs are unavailable in Firestore in this environment.")}var Afe=function(){function e(t){(0,Se.Z)(this,e),this._delegate=t}return(0,Te.Z)(e,[{key:"toBase64",value:function(){return _fe(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return Zfe(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return _fe(),new e(ade.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return Zfe(),new e(ade.fromUint8Array(t))}}]),e}();function Rfe(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,a=(0,Ht.Z)(t);try{for(a.s();!(n=a.n()).done;){var i=n.value;if(i in r&&"function"===typeof r[i])return!0}}catch(yhe){a.e(yhe)}finally{a.f()}return!1}(e,["next","error","complete"])}var Dfe=function(){function e(){(0,Se.Z)(this,e)}return(0,Te.Z)(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){rde(e=Ole(e,Kle));var n=Xle(e);if(n._uninitializedComponentsProvider)throw new iee(aee.FAILED_PRECONDITION,"SDK cache is already specified.");J9("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var r=e._freezeSettings(),a=new rle;return Qle(n,a,new tle(a,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){rde(e=Ole(e,Kle));var t=Xle(e);if(t._uninitializedComponentsProvider)throw new iee(aee.FAILED_PRECONDITION,"SDK cache is already specified.");J9("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var n=e._freezeSettings(),r=new rle;return Qle(t,r,new nle(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new iee(aee.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new oee;return e._queue.enqueueAndForgetEvenWhileRestricted((0,ke.Z)((0,be.Z)().mark((function n(){return(0,be.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(t){var n;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Uee.D()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,Uee.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(Koe(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),Ofe=function(){function e(t,n,r){var a=this;(0,Se.Z)(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return a.terminate()}},t instanceof Yte||(this._appCompat=t)}return(0,Te.Z)(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||J9("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Ple(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return Jle(this._delegate)}},{key:"disableNetwork",value:function(){return ede(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&_le("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new oee;return e.asyncQueue.enqueueAndForget((0,ke.Z)((0,be.Z)().mark((function n(){return(0,be.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=wce,n.next=3,xle(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(Xle(e=Ole(e,Kle)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return gfe(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new iee("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new $fe(this,Ule(this._delegate,e))}catch(t){throw Bfe(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new zfe(this,Wle(this._delegate,e))}catch(t){throw Bfe(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new Gfe(this,function(e,t){if(e=Ole(e,Mle),Zle("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new iee(aee.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new Ble(e,null,function(e){return new ere(Iee.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw Bfe(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return function(e,t,n){e=Ole(e,Kle);var r=Object.assign(Object.assign({},kfe),n);return function(e){if(e.maxAttempts<1)throw new iee(aee.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new oee;return e.asyncQueue.enqueueAndForget((0,ke.Z)((0,be.Z)().mark((function a(){var i;return(0,be.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Ile(e);case 2:i=a.sent,new ule(e.asyncQueue,i,n,t,r).run();case 4:case"end":return a.stop()}}),a)})))),r.promise}(Xle(e),(function(n){return t(new Ife(e,n))}),r)}(this._delegate,(function(n){return e(new Ffe(t,n))}))}},{key:"batch",value:function(){var e=this;return Xle(this._delegate),new Mfe(new wfe(this._delegate,(function(t){return yfe(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return tde(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return nde(this._delegate,e).then((function(e){return e?new Gfe(t,e):null}))}}]),e}(),Lfe=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e){var r;return(0,Se.Z)(this,n),(r=t.call(this)).firestore=e,r}return(0,Te.Z)(n,[{key:"convertBytes",value:function(e){return new Afe(new ade(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return zfe.forKey(t,this.firestore,null)}}]),n}(nfe);var Ffe=function(){function e(t,n){(0,Se.Z)(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new Lfe(t)}return(0,Te.Z)(e,[{key:"get",value:function(e){var t=this,n=Kfe(e);return this._delegate.get(n).then((function(e){return new Wfe(t._firestore,new ofe(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=Kfe(e);return n?(Cfe("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,a=new Array(r>3?r-3:0),i=3;i<r;i++)a[i-3]=arguments[i];var o,s=Kfe(e);2===arguments.length?this._delegate.update(s,t):(o=this._delegate).update.apply(o,[s,t,n].concat(a));return this}},{key:"delete",value:function(e){var t=Kfe(e);return this._delegate.delete(t),this}}]),e}(),Mfe=function(){function e(t){(0,Se.Z)(this,e),this._delegate=t}return(0,Te.Z)(e,[{key:"set",value:function(e,t,n){var r=Kfe(e);return n?(Cfe("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,a=new Array(r>3?r-3:0),i=3;i<r;i++)a[i-3]=arguments[i];var o,s=Kfe(e);2===arguments.length?this._delegate.update(s,t):(o=this._delegate).update.apply(o,[s,t,n].concat(a));return this}},{key:"delete",value:function(e){var t=Kfe(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),Pfe=function(){function e(t,n,r){(0,Se.Z)(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return(0,Te.Z)(e,[{key:"fromFirestore",value:function(e,t){var n=new sfe(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new jfe(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,a=r.get(t);a||(a=new WeakMap,r.set(t,a));var i=a.get(n);return i||(i=new e(t,new Lfe(t),n),a.set(n,i)),i}}]),e}();Pfe.INSTANCES=new WeakMap;var zfe=function(){function e(t,n){(0,Se.Z)(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new Lfe(t)}return(0,Te.Z)(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new $fe(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new $fe(this.firestore,Ule(this._delegate,e))}catch(t){throw Bfe(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=KX(e))instanceof zle&&jle(this._delegate,e)}},{key:"set",value:function(e,t){t=Cfe("DocumentReference.set",t);try{return t?pfe(this._delegate,e,t):pfe(this._delegate,e)}catch(n){throw Bfe(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];try{return 1===arguments.length?vfe(this._delegate,e):vfe.apply(void 0,[this._delegate,e,t].concat(r))}catch(i){throw Bfe(i,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return yfe(Ole(e.firestore,Kle),[new lae(e._key,Kre.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var a=Vfe(n),i=Ufe(n,(function(t){return new Wfe(e.firestore,new ofe(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return mfe(this._delegate,a,i)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?ffe(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Ole(e,zle);var t=Ole(e.firestore,Kle);return Ele(Xle(t),e._key,{source:"server"}).then((function(n){return bfe(t,e,n)}))}(this._delegate):function(e){e=Ole(e,zle);var t=Ole(e.firestore,Kle);return Ele(Xle(t),e._key).then((function(n){return bfe(t,e,n)}))}(this._delegate),t.then((function(e){return new Wfe(n.firestore,new ofe(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(Pfe.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new iee("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new zle(n._delegate,r,new Eee(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new zle(n._delegate,r,t))}}]),e}();function Bfe(e,t,n){return e.message=e.message.replace(t,n),e}function Vfe(e){var t,n=(0,Ht.Z)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!Rfe(r))return r}}catch(yhe){n.e(yhe)}finally{n.f()}return{}}function Ufe(e,t){var n,r,a;return{next:function(e){a.next&&a.next(t(e))},error:null===(n=(a=Rfe(e[0])?e[0]:Rfe(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(a),complete:null===(r=a.complete)||void 0===r?void 0:r.bind(a)}}var Wfe=function(){function e(t,n){(0,Se.Z)(this,e),this._firestore=t,this._delegate=n}return(0,Te.Z)(e,[{key:"ref",get:function(){return new zfe(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return lfe(this._delegate,e._delegate)}}]),e}(),jfe=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(){return(0,Se.Z)(this,n),t.apply(this,arguments)}return(0,Te.Z)(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||tee()}(void 0!==t),t}}]),n}(Wfe),Gfe=function(){function e(t,n){(0,Se.Z)(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new Lfe(t)}return(0,Te.Z)(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,Bde(this._delegate,function(e,t,n){var r=t,a=Fde("where",e);return Vde._create(a,r,n)}(t,n,r)))}catch(a){throw Bfe(a,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,Bde(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Fde("orderBy",e);return Wde._create(n,t)}(t,n)))}catch(r){throw Bfe(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,Bde(this._delegate,function(e){return Lle("limit",e),jde._create("limit",e,"F")}(t)))}catch(n){throw Bfe(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,Bde(this._delegate,function(e){return Lle("limitToLast",e),jde._create("limitToLast",e,"L")}(t)))}catch(n){throw Bfe(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,Bde(this._delegate,Hde.apply(void 0,arguments)))}catch(t){throw Bfe(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,Bde(this._delegate,qde.apply(void 0,arguments)))}catch(t){throw Bfe(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,Bde(this._delegate,Kde.apply(void 0,arguments)))}catch(t){throw Bfe(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,Bde(this._delegate,Xde.apply(void 0,arguments)))}catch(t){throw Bfe(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return Gle(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?hfe(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Ole(e,Ble);var t=Ole(e.firestore,Kle),n=Xle(t),r=new dfe(t);return Nle(n,e._query,{source:"server"}).then((function(n){return new ufe(t,r,e,n)}))}(this._delegate):function(e){e=Ole(e,Ble);var t=Ole(e.firestore,Kle),n=Xle(t),r=new dfe(t);return Mde(e._query),Nle(n,e._query).then((function(n){return new ufe(t,r,e,n)}))}(this._delegate),t.then((function(e){return new qfe(n.firestore,new ufe(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var a=Vfe(n),i=Ufe(n,(function(t){return new qfe(e.firestore,new ufe(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return mfe(this._delegate,a,i)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(Pfe.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),Hfe=function(){function e(t,n){(0,Se.Z)(this,e),this._firestore=t,this._delegate=n}return(0,Te.Z)(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new jfe(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),qfe=function(){function e(t,n){(0,Se.Z)(this,e),this._firestore=t,this._delegate=n}return(0,Te.Z)(e,[{key:"query",get:function(){return new Gfe(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new jfe(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new Hfe(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new jfe(n._firestore,r))}))}},{key:"isEqual",value:function(e){return lfe(this._delegate,e._delegate)}}]),e}(),$fe=function(e){(0,xe.Z)(n,e);var t=(0,Ie.Z)(n);function n(e,r){var a;return(0,Se.Z)(this,n),(a=t.call(this,e,r)).firestore=e,a._delegate=r,a}return(0,Te.Z)(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new zfe(this.firestore,e):null}},{key:"doc",value:function(e){try{return new zfe(this.firestore,void 0===e?Wle(this._delegate):Wle(this._delegate,e))}catch(t){throw Bfe(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=Ole(e.firestore,Kle),r=Wle(e),a=rfe(e.converter,t);return yfe(n,[vde(pde(e.firestore),"addDoc",r._key,a,null!==e.converter,{}).toMutation(r._key,Kre.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new zfe(t.firestore,e)}))}},{key:"isEqual",value:function(e){return jle(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(Pfe.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(Gfe);function Kfe(e){return Ole(e,zle)}var Xfe=function(){function e(){(0,Se.Z)(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=(0,U5.Z)(ide,n)}return(0,Te.Z)(e,[{key:"isEqual",value:function(e){return(e=KX(e))instanceof ide&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(Tee.keyField().canonicalString())}}]),e}(),Yfe=function(){function e(t){(0,Se.Z)(this,e),this._delegate=t}return(0,Te.Z)(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new yde("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new mde("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=Sfe.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=Tfe.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new wde("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),Qfe={Firestore:Ofe,GeoPoint:sde,Timestamp:kee,Blob:Afe,Transaction:Ffe,WriteBatch:Mfe,DocumentReference:zfe,DocumentSnapshot:Wfe,Query:Gfe,QueryDocumentSnapshot:jfe,QuerySnapshot:qfe,CollectionReference:$fe,FieldPath:Xfe,FieldValue:Yfe,setLogLevel:function(e){!function(e){K9.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new XX("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},Qfe)))}(e,(function(e,t){return new Ofe(e,t,new Dfe)})),e.registerVersion(Efe,Nfe)}(TQ);var Jfe={apiKey:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.FIREBASE_API_KEY,authDomain:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.FIREBASE_AUTH_DOMAIN,projectId:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.FIREBASE_PROJECT_ID,storageBucket:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.FIREBASE_STORAGE_BUCKET,messagingSenderId:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.FIREBASE_MESSAGING_SENDER_ID,appId:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.FIREBASE_APP_ID,measurementId:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.FIREBASE_MEASUREMENT_ID},ehe=TQ.initializeApp(Jfe).auth(),the={googleProvider:new TQ.auth.GoogleAuthProvider},nhe={name:"",height:0,stats:[],abilities:[],types:[],weight:0},rhe=function(e){var t=e.isOpen,n=e.onClose,r=e.name,a=e.imageUrl,i=(0,S.useContext)(yX),o=i.handleAddPokemon,s=i.pokemonData,u=(0,S.useState)(nhe),c=(0,ge.Z)(u,2),l=c[0],d=c[1];(0,S.useEffect)((function(){(0,ke.Z)((0,be.Z)().mark((function e(){var n;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||s[r.toLowerCase()]){e.next=7;break}return e.next=3,o(r);case 3:null!=(n=e.sent)&&d(n),e.next=8;break;case 7:s[r.toLowerCase()]&&d(s[r.toLowerCase()]);case 8:case"end":return e.stop()}}),e)})))()}),[t]);return(0,hX.jsxs)(_u,{isOpen:t,onDidDismiss:n,children:[(0,hX.jsx)(mu,{children:(0,hX.jsxs)(Iu,{children:[(0,hX.jsx)(xu,{children:r}),(0,hX.jsx)(cu,{slot:"end",children:(0,hX.jsx)(Eu,{onClick:n,children:"Close"})})]})}),(0,hX.jsx)(pu,{children:(0,hX.jsxs)(vu,{children:[(0,hX.jsx)(ku,{className:"ion-justify-content-center ion-margin",children:(0,hX.jsx)(gu,{className:"pokemon-image",src:a})}),(0,hX.jsx)(ku,{className:"ion-justify-content-center ion-margin",children:(0,hX.jsxs)(hX.Fragment,{children:[(0,hX.jsx)(wu,{className:" ion-padding-start ion-padding-end",children:"Height: ".concat(l.height/100," m")}),(0,hX.jsx)(wu,{className:"ion-padding-start ion-padding-end",children:"Weight: ".concat(l.weight," kg")})]})}),(0,hX.jsx)(ku,{className:"ion-justify-content-center ion-margin",children:(0,hX.jsx)(hX.Fragment,{children:l.types.map((function(e){return(0,hX.jsx)(fu,{className:"".concat(e,"-type"),children:e})}))})}),(0,hX.jsx)(ku,{className:"ion-justify-content-center ion-margin",children:(0,hX.jsx)(wu,{className:"title-text",children:"Base Stats"})}),(0,hX.jsx)(ku,{className:"ion-justify-content-center",children:function(){var e=l.stats,t=function(e,t){switch(t){case"hp":return"".concat(t,": ").concat(e,"/255");case"attack":return"".concat(t,": ").concat(e,"/190");case"defense":case"special-defense":return"".concat(t,": ").concat(e,"/230");case"special-attack":return"".concat(t,": ").concat(e,"/194");case"speed":return"".concat(t,": ").concat(e,"/180");default:return""}};return e.map((function(e){var n=e.statName,r=e.effort,a=e.baseStat,i=function(e,t){switch(e){case"hp":return t/255;case"attack":return t/190;case"defense":case"special-defense":return t/230;case"special-attack":return t/194;case"speed":return t/180;default:return 0}}(n,a);return console.log(r,a),(0,hX.jsxs)("div",{className:"stat-bar-container",children:[(0,hX.jsx)(yu,{className:"stat-text",children:t(a,n)}),(0,hX.jsx)(bu,{className:"".concat(n,"-bar"),value:i})]})}))}()}),(0,hX.jsx)(ku,{className:"ion-justify-content-center ion-margin",children:(0,hX.jsx)(wu,{className:"title-text",children:"Abilities"})}),(0,hX.jsx)(ku,{className:"ion-justify-content-center",children:(0,hX.jsx)(vu,{className:"ion-justify-content-center ion-align-items-center",children:(0,hX.jsx)(ku,{children:l.abilities.map((function(e){return(0,hX.jsx)(hu,{children:(0,hX.jsx)(wu,{children:e})},e)}))})})})]})})]})},ahe=function(e){var t=e.name,n=e.imageUrl,r=(0,S.useState)(!1),a=(0,ge.Z)(r,2),i=a[0],o=a[1];return(0,hX.jsxs)(hX.Fragment,{children:[(0,hX.jsxs)(Nu,{className:"card-wrapper",onClick:function(){o(!0)},children:[(0,hX.jsx)(gu,{src:n,alt:"Image ".concat(t)}),(0,hX.jsx)(lu,{children:(0,hX.jsx)(du,{children:t})})]}),(0,hX.jsx)(rhe,{isOpen:i,onClose:function(){o(!1)},name:t,imageUrl:n})]})},ihe=function(){var e=(0,S.useState)([]),t=(0,ge.Z)(e,2),n=t[0],r=t[1];return(0,S.useEffect)((function(){var e=function(){var e=(0,ke.Z)((0,be.Z)().mark((function e(){var t,n;return(0,be.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,sX();case 2:t=e.sent,n=t.map((function(e,t){var n,r=e.name,a="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/official-artwork/".concat(t+1,".png");return{name:(n=r,n.charAt(0).toUpperCase()+n.slice(1)),imageUrl:a}})),r(n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),(0,hX.jsxs)(Uu,{children:[(0,hX.jsx)(mu,{children:(0,hX.jsx)(Iu,{children:(0,hX.jsx)(xu,{children:"Pokedex"})})}),(0,hX.jsx)(pu,{children:(0,hX.jsx)(vu,{children:n.map((function(e,t){var r=e.name,a=e.imageUrl;return t%2===0?(0,hX.jsxs)(ku,{children:[(0,hX.jsx)(hu,{size:"6",children:(0,hX.jsx)(ahe,{name:r,imageUrl:a})}),(0,hX.jsx)(hu,{size:"6",children:t+1<n.length&&(0,hX.jsx)(ahe,{name:n[t+1].name,imageUrl:n[t+1].imageUrl})})]},t):null}))})})]})},ohe=function(){return(0,hX.jsxs)(Uu,{children:[(0,hX.jsx)(mu,{children:(0,hX.jsx)(Iu,{children:(0,hX.jsx)(xu,{children:"Tab 3"})})}),(0,hX.jsxs)(pu,{fullscreen:!0,children:[(0,hX.jsx)(mu,{collapse:"condense",children:(0,hX.jsx)(Iu,{children:(0,hX.jsx)(xu,{size:"large",children:"Tab 3"})})}),(0,hX.jsx)(vX,{name:"Tab 3 page"})]})]})},she=function(e,t){return she=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},she(e,t)};var uhe=function(){return uhe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},uhe.apply(this,arguments)};function che(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{u(r.next(e))}catch(t){i(t)}}function s(e){try{u(r.throw(e))}catch(t){i(t)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}u((r=r.apply(e,t||[])).next())}))}function lhe(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(s){i=[6,s],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}var dhe={googleProvider:"firebase.auth.GoogleAuthProvider",facebookProvider:"firebase.auth.FacebookAuthProvider",twitterProvider:"firebase.auth.TwitterAuthProvider",githubProvider:"firebase.auth.GithubAuthProvider",appleProvider:"firebase.auth.OAuthProvider"},fhe={googleProvider:"https://firebase.google.com/docs/auth/web/google-signin",facebookProvider:"https://firebase.google.com/docs/auth/web/facebook-signin",twitterProvider:"https://firebase.google.com/docs/auth/web/twitter-signin",githubProvider:"https://firebase.google.com/docs/auth/web/github-auth",appleProvider:"https://firebase.google.com/docs/auth/web/apple"},hhe=function(e){var t=e.firebaseAppAuth,n=e.providers,r=void 0===n?{}:n;return function(e){var n;return n=function(n){function a(){var e=null!==n&&n.apply(this,arguments)||this;return e.state={loading:!1,user:void 0,error:void 0},e.setError=function(t){return e.setState({error:t})},e.toggleLoading=function(){e.setState((function(e){return{loading:!e.loading}}))},e.tryToSignInWithProvider=function(n){return e.tryTo((function(){var e=r[n];if(!e)throw new Error(function(e){return"Please provide an instance of "+dhe[e]+" in the withFirebaseAuth HOC providers parameter under the "+e+" key. Check "+fhe[e]+" to learn more."}(n));return t.signInWithPopup(e)}))},e.signOut=function(){return e.tryTo((function(){return t.signOut()}))},e.signInAnonymously=function(){return e.tryTo((function(){return t.signInAnonymously()}))},e.signInWithGithub=function(){return e.tryToSignInWithProvider("githubProvider")},e.signInWithTwitter=function(){return e.tryToSignInWithProvider("twitterProvider")},e.signInWithGoogle=function(){return e.tryToSignInWithProvider("googleProvider")},e.signInWithFacebook=function(){return e.tryToSignInWithProvider("facebookProvider")},e.signInWithApple=function(){return e.tryToSignInWithProvider("appleProvider")},e.signInWithEmailAndPassword=function(n,r){return e.tryTo((function(){return t.signInWithEmailAndPassword(n,r)}))},e.signInWithPhoneNumber=function(n,r){return e.tryTo((function(){return t.signInWithPhoneNumber(n,r)}))},e.createUserWithEmailAndPassword=function(n,r){return e.tryTo((function(){return t.createUserWithEmailAndPassword(n,r)}))},e.sharedHandlers={createUserWithEmailAndPassword:e.createUserWithEmailAndPassword,signInWithEmailAndPassword:e.signInWithEmailAndPassword,signInWithGithub:e.signInWithGithub,signInWithTwitter:e.signInWithTwitter,signInWithGoogle:e.signInWithGoogle,signInWithFacebook:e.signInWithFacebook,signInWithApple:e.signInWithApple,signInWithPhoneNumber:e.signInWithPhoneNumber,signInAnonymously:e.signInAnonymously,setError:e.setError,signOut:e.signOut},e}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}she(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(a,n),a.prototype.componentDidMount=function(){var e=this;this.unsubscribeAuthStateListener=t.onAuthStateChanged((function(t){return e.setState({user:t})}))},a.prototype.componentWillUnmount=function(){this.unsubscribeAuthStateListener&&this.unsubscribeAuthStateListener()},a.prototype.tryTo=function(e){return che(this,void 0,void 0,(function(){var t;return lhe(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,3,4]),this.toggleLoading(),[4,e()];case 1:return[2,n.sent()];case 2:return t=n.sent(),this.setError(t.message),[2,t];case 3:return this.toggleLoading(),[7];case 4:return[2]}}))}))},a.prototype.render=function(){var t=uhe(uhe(uhe({},this.props),this.sharedHandlers),{loading:this.state.loading,user:this.state.user,error:this.state.error});return S.createElement(e,uhe({},t))},a}(S.PureComponent),n.displayName="withFirebaseAuth("+(e.displayName||e.name)+")",n}};!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"undefined"!==typeof document&&document.documentElement.classList.add("ion-ce"),Ge(Object.assign({},e))}();var phe=function(e){void 0===e&&(e={});var t=e.window,n=void 0===t?document.defaultView:t,r=n.history;function a(){var e=n.location,t=e.pathname,a=e.search,i=e.hash,o=r.state||{};return[o.idx,se({pathname:t,search:a,hash:i,state:o.usr||null,key:o.key||"default"})]}var i=null;n.addEventListener(ce,(function(){if(i)d.call(i),i=null;else{var e=oe.Pop,t=a(),n=t[0],r=t[1];if(d.length){if(null!=n){var o=u-n;o&&(i={action:e,location:r,retry:function(){g(-1*o)}},g(o))}}else m(e)}}));var o=oe.Pop,s=a(),u=s[0],c=s[1],l=de(),d=de();function f(e){return"string"===typeof e?e:he(e)}function h(e,t){return void 0===t&&(t=null),se(_({pathname:c.pathname,hash:"",search:""},"string"===typeof e?pe(e):e,{state:t,key:fe()}))}function p(e,t){return[{usr:e.state,key:e.key,idx:t},f(e)]}function v(e,t,n){return!d.length||(d.call({action:e,location:t,retry:n}),!1)}function m(e){o=e;var t=a();u=t[0],c=t[1],l.call({action:o,location:c})}function g(e){r.go(e)}null==u&&(u=0,r.replaceState(_({},r.state,{idx:u}),""));var y={get action(){return o},get location(){return c},createHref:f,push:function e(t,a){var i=oe.Push,o=h(t,a);if(v(i,o,(function(){e(t,a)}))){var s=p(o,u+1),c=s[0],l=s[1];try{r.pushState(c,"",l)}catch(d){n.location.assign(l)}m(i)}},replace:function e(t,n){var a=oe.Replace,i=h(t,n);if(v(a,i,(function(){e(t,n)}))){var o=p(i,u),s=o[0],c=o[1];r.replaceState(s,"",c),m(a)}},go:g,back:function(){g(-1)},forward:function(){g(1)},listen:function(e){return l.push(e)},block:function(e){var t=d.push(e);return 1===d.length&&n.addEventListener(ue,le),function(){t(),d.length||n.removeEventListener(ue,le)}}};return y}(),vhe=hhe({providers:the,firebaseAppAuth:ehe})((function(e){var t=e.props,n=t.user;t.signOut,t.signInWithGoogle;return n?(0,hX.jsx)(hX.Fragment,{}):(0,hX.jsx)(bX,{children:(0,hX.jsx)(Pu,{children:(0,hX.jsx)(K,{history:phe,children:(0,hX.jsxs)(nc,{children:[(0,hX.jsxs)($u,{children:[(0,hX.jsx)(ee,{exact:!0,path:"/pokedex",children:(0,hX.jsx)(ihe,{})}),(0,hX.jsx)(ee,{exact:!0,path:"/camera",children:(0,hX.jsx)(pX,{})}),(0,hX.jsx)(ee,{path:"/tab3",children:(0,hX.jsx)(ohe,{})}),(0,hX.jsx)(ee,{exact:!0,path:"/",children:(0,hX.jsx)(ihe,{})})]}),(0,hX.jsxs)(Qu,{slot:"bottom",children:[(0,hX.jsxs)(Ku,{tab:"pokedex",href:"/pokedex",children:[(0,hX.jsx)(ac,{icon:"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M202.24 74C166.11 56.75 115.61 48.3 48 48a31.36 31.36 0 00-17.92 5.33A32 32 0 0016 79.9V366c0 19.34 13.76 33.93 32 33.93 71.07 0 142.36 6.64 185.06 47a4.11 4.11 0 006.94-3V106.82a15.89 15.89 0 00-5.46-12A143 143 0 00202.24 74zM481.92 53.3A31.33 31.33 0 00464 48c-67.61.3-118.11 8.71-154.24 26a143.31 143.31 0 00-32.31 20.78 15.93 15.93 0 00-5.45 12v337.13a3.93 3.93 0 006.68 2.81c25.67-25.5 70.72-46.82 185.36-46.81a32 32 0 0032-32v-288a32 32 0 00-14.12-26.61z'/></svg>"}),(0,hX.jsx)(yu,{children:"Pokedex"})]}),(0,hX.jsxs)(Ku,{tab:"camera",href:"/camera",children:[(0,hX.jsx)(ac,{icon:"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><circle cx='256' cy='272' r='64'/><path d='M432 144h-59c-3 0-6.72-1.94-9.62-5l-25.94-40.94a15.52 15.52 0 00-1.37-1.85C327.11 85.76 315 80 302 80h-92c-13 0-25.11 5.76-34.07 16.21a15.52 15.52 0 00-1.37 1.85l-25.94 41c-2.22 2.42-5.34 5-8.62 5v-8a16 16 0 00-16-16h-24a16 16 0 00-16 16v8h-4a48.05 48.05 0 00-48 48V384a48.05 48.05 0 0048 48h352a48.05 48.05 0 0048-48V192a48.05 48.05 0 00-48-48zM256 368a96 96 0 1196-96 96.11 96.11 0 01-96 96z'/></svg>"}),(0,hX.jsx)(yu,{children:"Camera"})]}),(0,hX.jsxs)(Ku,{tab:"tab3",href:"/tab3",children:[(0,hX.jsx)(ac,{icon:"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M416 464H96a48.05 48.05 0 01-48-48V96a48.05 48.05 0 0148-48h320a48.05 48.05 0 0148 48v320a48.05 48.05 0 01-48 48z'/></svg>"}),(0,hX.jsx)(yu,{children:"Tab 3"})]})]})]})})})})}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var mhe=function(e){e&&e instanceof Function&&n.e(377).then(n.bind(n,9377)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,i=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),i(e),o(e)}))},ghe=document.getElementById("root");(0,T.s)(ghe).render((0,hX.jsx)(S.StrictMode,{children:(0,hX.jsx)(vhe,{})})),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)})),mhe()}()}();
//# sourceMappingURL=main.e5775365.js.map